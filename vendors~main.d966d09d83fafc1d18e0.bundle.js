/*! For license information please see vendors~main.d966d09d83fafc1d18e0.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,"a",(function(){return _defineProperty}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}__webpack_require__.d(__webpack_exports__,"a",(function(){return _createClass}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}__webpack_require__.d(__webpack_exports__,"a",(function(){return _classCallCheck}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}__webpack_require__.d(__webpack_exports__,"a",(function(){return _getPrototypeOf}))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(787)()},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(757)},function(module,__webpack_exports__,__webpack_require__){"use strict";function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}__webpack_require__.d(__webpack_exports__,"a",(function(){return _assertThisInitialized}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return _possibleConstructorReturn}));var _helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6);function _possibleConstructorReturn(self,call){return!call||"object"!==Object(_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(call)&&"function"!=typeof call?Object(_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__.a)(self):call}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return _inherits}));var _setPrototypeOf__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(146);function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Object(_setPrototypeOf__WEBPACK_IMPORTED_MODULE_0__.a)(subClass,superClass)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"j",(function(){return unified_parameter_api.c})),__webpack_require__.d(__webpack_exports__,"h",(function(){return unified_parameter_api.b})),__webpack_require__.d(__webpack_exports__,"k",(function(){return unified_parameter_api.d})),__webpack_require__.d(__webpack_exports__,"a",(function(){return createGLContext})),__webpack_require__.d(__webpack_exports__,"i",(function(){return resizeGLContext})),__webpack_require__.d(__webpack_exports__,"d",(function(){return instrumentGLContext})),__webpack_require__.d(__webpack_exports__,"g",(function(){return utils.i})),__webpack_require__.d(__webpack_exports__,"c",(function(){return utils.c})),__webpack_require__.d(__webpack_exports__,"b",(function(){return utils.b})),__webpack_require__.d(__webpack_exports__,"e",(function(){return utils.g})),__webpack_require__.d(__webpack_exports__,"f",(function(){return utils.h}));__webpack_require__(400);var unified_parameter_api=__webpack_require__(115),track_context_state=__webpack_require__(81),env=__webpack_require__(27),utils=__webpack_require__(16),isBrowser=Object(env.isBrowser)(),isPage=isBrowser&&"undefined"!=typeof document,CONTEXT_DEFAULTS={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function createGLContext(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(utils.a)(isBrowser,"createGLContext on available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils");var gl,_options=options=Object.assign({},CONTEXT_DEFAULTS,options),width=_options.width,height=_options.height;function onError(message){if(options.throwOnError)throw new Error(message);return console.error(message),null}options.onError=onError;var _options2=options,canvas=_options2.canvas,targetCanvas=getCanvas({canvas:canvas,width:width,height:height,onError:onError});return(gl=createBrowserContext(targetCanvas,options))?(logInfo(gl=instrumentGLContext(gl,options)),gl):null}function instrumentGLContext(gl){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!gl||gl._instrumented)return gl;gl._version=gl._version||getVersion(gl),gl.luma=gl.luma||{},gl.luma.canvasSizeInfo=gl.luma.canvasSizeInfo||{};var _options3=options=Object.assign({},CONTEXT_DEFAULTS,options),manageState=_options3.manageState,debug=_options3.debug;return manageState&&Object(track_context_state.a)(gl,{copyState:!1,log:function log(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return utils.i.log.apply(utils.i,[1].concat(args))()}}),isBrowser&&debug&&(env.global.makeDebugContext?(gl=env.global.makeDebugContext(gl,options),utils.i.level=Math.max(utils.i.level,1)):utils.i.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),gl._instrumented=!0,gl}function resizeGLContext(gl){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(gl.canvas){var devicePixelRatio=Object(utils.e)(options.useDevicePixels);setDevicePixelRatio(gl,devicePixelRatio,options)}else{var ext=gl.getExtension("STACKGL_resize_drawingbuffer");ext&&"width"in options&&"height"in options&&ext.resize(options.width,options.height)}}function createBrowserContext(canvas,options){var onError=options.onError,onCreateError=function onCreateError(error){return onError("WebGL context: ".concat(error.statusMessage||"error"))};canvas.addEventListener("webglcontextcreationerror",onCreateError,!1);var _options$webgl=options.webgl1,webgl1=void 0===_options$webgl||_options$webgl,_options$webgl2=options.webgl2,webgl2=void 0===_options$webgl2||_options$webgl2,gl=null;return webgl2&&(gl=(gl=gl||canvas.getContext("webgl2",options))||canvas.getContext("experimental-webgl2",options)),webgl1&&(gl=(gl=gl||canvas.getContext("webgl",options))||canvas.getContext("experimental-webgl",options)),canvas.removeEventListener("webglcontextcreationerror",onCreateError,!1),gl||onError("Failed to create ".concat(webgl2&&!webgl1?"WebGL2":"WebGL"," context"))}function getCanvas(_ref){var targetCanvas,canvas=_ref.canvas,_ref$width=_ref.width,width=void 0===_ref$width?800:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?600:_ref$height,onError=_ref.onError;"string"==typeof canvas?(isPage&&"complete"===document.readyState||onError("createGLContext called on canvas '".concat(canvas,"' before page was loaded")),targetCanvas=document.getElementById(canvas)):canvas?targetCanvas=canvas:((targetCanvas=document.createElement("canvas")).id="lumagl-canvas",targetCanvas.style.width=Number.isFinite(width)?"".concat(width,"px"):"100%",targetCanvas.style.height=Number.isFinite(height)?"".concat(height,"px"):"100%",document.body.insertBefore(targetCanvas,document.body.firstChild));return targetCanvas}function logInfo(gl){var webGL=Object(utils.h)(gl)?"WebGL2":"WebGL1",info=function getContextDebugInfo(gl){var vendorMasked=gl.getParameter(7936),rendererMasked=gl.getParameter(7937),ext=gl.getExtension("WEBGL_debug_renderer_info");return{vendor:ext&&gl.getParameter(ext.UNMASKED_VENDOR_WEBGL||7936)||vendorMasked,renderer:ext&&gl.getParameter(ext.UNMASKED_RENDERER_WEBGL||7937)||rendererMasked,vendorMasked:vendorMasked,rendererMasked:rendererMasked,version:gl.getParameter(7938),shadingLanguageVersion:gl.getParameter(35724)}}(gl),driver=info?"(".concat(info.vendor,",").concat(info.renderer,")"):"",debug=gl.debug?" debug":"";utils.i.info(1,"".concat(webGL).concat(debug," context ").concat(driver))()}function getVersion(gl){return"undefined"!=typeof WebGL2RenderingContext&&gl instanceof WebGL2RenderingContext?2:1}function setDevicePixelRatio(gl,devicePixelRatio,options){var clientWidth="width"in options?options.width:gl.canvas.clientWidth,clientHeight="height"in options?options.height:gl.canvas.clientHeight;clientWidth&&clientHeight||(utils.i.log(1,"Canvas clientWidth/clientHeight is 0")(),devicePixelRatio=1,clientWidth=gl.canvas.width||1,clientHeight=gl.canvas.height||1),gl.luma=gl.luma||{},gl.luma.canvasSizeInfo=gl.luma.canvasSizeInfo||{};var cachedSize=gl.luma.canvasSizeInfo;if(cachedSize.clientWidth!==clientWidth||cachedSize.clientHeight!==clientHeight||cachedSize.devicePixelRatio!==devicePixelRatio){var clampedPixelRatio=devicePixelRatio,canvasWidth=Math.floor(clientWidth*clampedPixelRatio),canvasHeight=Math.floor(clientHeight*clampedPixelRatio);gl.canvas.width=canvasWidth,gl.canvas.height=canvasHeight,gl.drawingBufferWidth===canvasWidth&&gl.drawingBufferHeight===canvasHeight||(utils.i.warn("Device pixel ratio clamped")(),clampedPixelRatio=Math.min(gl.drawingBufferWidth/clientWidth,gl.drawingBufferHeight/clientHeight),gl.canvas.width=Math.floor(clientWidth*clampedPixelRatio),gl.canvas.height=Math.floor(clientHeight*clampedPixelRatio)),Object.assign(gl.luma.canvasSizeInfo,{clientWidth:clientWidth,clientHeight:clientHeight,devicePixelRatio:devicePixelRatio})}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(184)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return _slicedToArray}));var unsupportedIterableToArray=__webpack_require__(213);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||Object(unsupportedIterableToArray.a)(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return EPSILON})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ARRAY_TYPE})),__webpack_require__.d(__webpack_exports__,"c",(function(){return RANDOM}));var EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var y=0,i=arguments.length;i--;)y+=arguments[i]*arguments[i];return Math.sqrt(y)})},function(module,exports,__webpack_require__){"use strict";var $TypeError=TypeError,$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch(e){$gOPD=null}var throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD?function(){try{return throwTypeError}catch(calleeThrows){try{return $gOPD(arguments,"callee").get}catch(gOPDthrows){return throwTypeError}}}():throwTypeError,hasSymbols=__webpack_require__(68)(),getProto=Object.getPrototypeOf||function(x){return x.__proto__},asyncGenIterator=void 0,TypedArray="undefined"==typeof Uint8Array?void 0:getProto(Uint8Array),INTRINSICS={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":asyncGenIterator&&hasSymbols&&Symbol.asyncIterator?asyncGenIterator[Symbol.asyncIterator]():void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&hasSymbols?getProto((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&hasSymbols?getProto((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":hasSymbols?Symbol:void 0,"%SymbolPrototype%":hasSymbols?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypedArrayPrototype%":TypedArray?TypedArray.prototype:void 0,"%TypeError%":$TypeError,"%TypeErrorPrototype%":$TypeError.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},$replace=__webpack_require__(185).call(Function.call,String.prototype.replace),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function stringToPath(string){var result=[];return $replace(string,rePropName,(function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match})),result},getBaseIntrinsic=function getBaseIntrinsic(name,allowMissing){if(!(name in INTRINSICS))throw new SyntaxError("intrinsic "+name+" does not exist!");if(void 0===INTRINSICS[name]&&!allowMissing)throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!");return INTRINSICS[name]};module.exports=function GetIntrinsic(name,allowMissing){if("string"!=typeof name||0===name.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof allowMissing)throw new TypeError('"allowMissing" argument must be a boolean');for(var parts=stringToPath(name),value=getBaseIntrinsic("%"+(parts.length>0?parts[0]:"")+"%",allowMissing),i=1;i<parts.length;i+=1)if(null!=value)if($gOPD&&i+1>=parts.length){var desc=$gOPD(value,parts[i]);if(!allowMissing&&!(parts[i]in value))throw new $TypeError("base intrinsic for "+name+" exists, but the property is not available.");value=desc?desc.get||desc.value:value[parts[i]]}else value=value[parts[i]];return value}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__.d(__webpack_exports__,"a",(function(){return _typeof}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return _toConsumableArray}));var arrayLikeToArray=__webpack_require__(176);var unsupportedIterableToArray=__webpack_require__(213);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return Object(arrayLikeToArray.a)(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||Object(unsupportedIterableToArray.a)(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return assert})),__webpack_require__.d(__webpack_exports__,"d",(function(){return deepArrayEqual})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isObjectEmpty})),__webpack_require__.d(__webpack_exports__,"b",(function(){return cssToDevicePixels})),__webpack_require__.d(__webpack_exports__,"c",(function(){return cssToDeviceRatio})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getDevicePixelRatio})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isWebGL})),__webpack_require__.d(__webpack_exports__,"h",(function(){return isWebGL2})),__webpack_require__.d(__webpack_exports__,"i",(function(){return utils_log}));var log=__webpack_require__(798);function assert(condition,message){if(!condition)throw new Error(message||"luma.gl: assertion failed.")}function isObjectEmpty(object){for(var key in object)return!1;return!0}function deepArrayEqual(x,y){if(x===y)return!0;var isArrayX=Array.isArray(x)||ArrayBuffer.isView(x),isArrayY=Array.isArray(y)||ArrayBuffer.isView(y);if(isArrayX&&isArrayY&&x.length===y.length){for(var i=0;i<x.length;++i)if(x[i]!==y[i])return!1;return!0}return!1}function cssToDeviceRatio(gl){if(gl.canvas&&gl.luma){var clientWidth=gl.luma.canvasSizeInfo.clientWidth;return clientWidth?gl.drawingBufferWidth/clientWidth:1}return 1}function cssToDevicePixels(gl,cssPixel){var yInvert=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],ratio=cssToDeviceRatio(gl),width=gl.drawingBufferWidth,height=gl.drawingBufferHeight;return scalePixels(cssPixel,ratio,width,height,yInvert)}function getDevicePixelRatio(useDevicePixels){var windowRatio="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(useDevicePixels)?useDevicePixels<=0?1:useDevicePixels:useDevicePixels?windowRatio:1}function scalePixels(pixel,ratio,width,height,yInvert){var yHigh,x=scaleX(pixel[0],ratio,width),y=scaleY(pixel[1],ratio,height,yInvert),t=scaleX(pixel[0]+1,ratio,width),xHigh=t===width-1?t:t-1;return t=scaleY(pixel[1]+1,ratio,height,yInvert),yInvert?(yHigh=y,y=t=0===t?t:t+1):yHigh=t===height-1?t:t-1,{x:x,y:y,width:Math.max(xHigh-x+1,1),height:Math.max(yHigh-y+1,1)}}function scaleX(x,ratio,width){return Math.min(Math.round(x*ratio),width-1)}function scaleY(y,ratio,height,yInvert){return yInvert?Math.max(0,height-1-Math.round(y*ratio)):Math.min(Math.round(y*ratio),height-1)}function isWebGL(gl){return Boolean(gl&&Number.isFinite(gl._version))}function isWebGL2(gl){return Boolean(gl&&2===gl._version)}var utils_log=new log.a({id:"luma.gl"})},function(module,__webpack_exports__,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}__webpack_require__.d(__webpack_exports__,"a",(function(){return _asyncToGenerator}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return COORDINATE_SYSTEM})),__webpack_require__.d(__webpack_exports__,"c",(function(){return PROJECTION_MODE})),__webpack_require__.d(__webpack_exports__,"b",(function(){return EVENTS}));var _utils_log__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20),COORDINATE_SYSTEM={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(COORDINATE_SYSTEM,"IDENTITY",{get:function get(){return _utils_log__WEBPACK_IMPORTED_MODULE_0__.a.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0}});var PROJECTION_MODE={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},EVENTS={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _math_gl_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(282);__webpack_require__.d(__webpack_exports__,"a",(function(){return _math_gl_core__WEBPACK_IMPORTED_MODULE_0__.a})),__webpack_require__.d(__webpack_exports__,"b",(function(){return _math_gl_core__WEBPACK_IMPORTED_MODULE_0__.b})),__webpack_require__.d(__webpack_exports__,"c",(function(){return _math_gl_core__WEBPACK_IMPORTED_MODULE_0__.c})),__webpack_require__.d(__webpack_exports__,"d",(function(){return _math_gl_core__WEBPACK_IMPORTED_MODULE_0__.d})),__webpack_require__.d(__webpack_exports__,"e",(function(){return _math_gl_core__WEBPACK_IMPORTED_MODULE_0__.e}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var probe_gl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(798);__webpack_exports__.a=new probe_gl__WEBPACK_IMPORTED_MODULE_0__.a({id:"deck"})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"p",(function(){return transpose})),__webpack_require__.d(__webpack_exports__,"e",(function(){return invert})),__webpack_require__.d(__webpack_exports__,"a",(function(){return determinant})),__webpack_require__.d(__webpack_exports__,"g",(function(){return multiply})),__webpack_require__.d(__webpack_exports__,"o",(function(){return translate})),__webpack_require__.d(__webpack_exports__,"n",(function(){return scale})),__webpack_require__.d(__webpack_exports__,"j",(function(){return rotate})),__webpack_require__.d(__webpack_exports__,"k",(function(){return rotateX})),__webpack_require__.d(__webpack_exports__,"l",(function(){return rotateY})),__webpack_require__.d(__webpack_exports__,"m",(function(){return rotateZ})),__webpack_require__.d(__webpack_exports__,"c",(function(){return fromQuat})),__webpack_require__.d(__webpack_exports__,"d",(function(){return frustum})),__webpack_require__.d(__webpack_exports__,"i",(function(){return perspective})),__webpack_require__.d(__webpack_exports__,"h",(function(){return ortho})),__webpack_require__.d(__webpack_exports__,"f",(function(){return lookAt})),__webpack_require__.d(__webpack_exports__,"b",(function(){return equals}));var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);function transpose(out,a){if(out===a){var a01=a[1],a02=a[2],a03=a[3],a12=a[6],a13=a[7],a23=a[11];out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a01,out[6]=a[9],out[7]=a[13],out[8]=a02,out[9]=a12,out[11]=a[14],out[12]=a03,out[13]=a13,out[14]=a23}else out[0]=a[0],out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a[1],out[5]=a[5],out[6]=a[9],out[7]=a[13],out[8]=a[2],out[9]=a[6],out[10]=a[10],out[11]=a[14],out[12]=a[3],out[13]=a[7],out[14]=a[11],out[15]=a[15];return out}function invert(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;return det?(det=1/det,out[0]=(a11*b11-a12*b10+a13*b09)*det,out[1]=(a02*b10-a01*b11-a03*b09)*det,out[2]=(a31*b05-a32*b04+a33*b03)*det,out[3]=(a22*b04-a21*b05-a23*b03)*det,out[4]=(a12*b08-a10*b11-a13*b07)*det,out[5]=(a00*b11-a02*b08+a03*b07)*det,out[6]=(a32*b02-a30*b05-a33*b01)*det,out[7]=(a20*b05-a22*b02+a23*b01)*det,out[8]=(a10*b10-a11*b08+a13*b06)*det,out[9]=(a01*b08-a00*b10-a03*b06)*det,out[10]=(a30*b04-a31*b02+a33*b00)*det,out[11]=(a21*b02-a20*b04-a23*b00)*det,out[12]=(a11*b07-a10*b09-a12*b06)*det,out[13]=(a00*b09-a01*b07+a02*b06)*det,out[14]=(a31*b01-a30*b03-a32*b00)*det,out[15]=(a20*b03-a21*b01+a22*b00)*det,out):null}function determinant(a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];return(a00*a11-a01*a10)*(a22*a33-a23*a32)-(a00*a12-a02*a10)*(a21*a33-a23*a31)+(a00*a13-a03*a10)*(a21*a32-a22*a31)+(a01*a12-a02*a11)*(a20*a33-a23*a30)-(a01*a13-a03*a11)*(a20*a32-a22*a30)+(a02*a13-a03*a12)*(a20*a31-a21*a30)}function multiply(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return out[0]=b0*a00+b1*a10+b2*a20+b3*a30,out[1]=b0*a01+b1*a11+b2*a21+b3*a31,out[2]=b0*a02+b1*a12+b2*a22+b3*a32,out[3]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[4],b1=b[5],b2=b[6],b3=b[7],out[4]=b0*a00+b1*a10+b2*a20+b3*a30,out[5]=b0*a01+b1*a11+b2*a21+b3*a31,out[6]=b0*a02+b1*a12+b2*a22+b3*a32,out[7]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[8],b1=b[9],b2=b[10],b3=b[11],out[8]=b0*a00+b1*a10+b2*a20+b3*a30,out[9]=b0*a01+b1*a11+b2*a21+b3*a31,out[10]=b0*a02+b1*a12+b2*a22+b3*a32,out[11]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[12],b1=b[13],b2=b[14],b3=b[15],out[12]=b0*a00+b1*a10+b2*a20+b3*a30,out[13]=b0*a01+b1*a11+b2*a21+b3*a31,out[14]=b0*a02+b1*a12+b2*a22+b3*a32,out[15]=b0*a03+b1*a13+b2*a23+b3*a33,out}function translate(out,a,v){var a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,x=v[0],y=v[1],z=v[2];return a===out?(out[12]=a[0]*x+a[4]*y+a[8]*z+a[12],out[13]=a[1]*x+a[5]*y+a[9]*z+a[13],out[14]=a[2]*x+a[6]*y+a[10]*z+a[14],out[15]=a[3]*x+a[7]*y+a[11]*z+a[15]):(a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],out[0]=a00,out[1]=a01,out[2]=a02,out[3]=a03,out[4]=a10,out[5]=a11,out[6]=a12,out[7]=a13,out[8]=a20,out[9]=a21,out[10]=a22,out[11]=a23,out[12]=a00*x+a10*y+a20*z+a[12],out[13]=a01*x+a11*y+a21*z+a[13],out[14]=a02*x+a12*y+a22*z+a[14],out[15]=a03*x+a13*y+a23*z+a[15]),out}function scale(out,a,v){var x=v[0],y=v[1],z=v[2];return out[0]=a[0]*x,out[1]=a[1]*x,out[2]=a[2]*x,out[3]=a[3]*x,out[4]=a[4]*y,out[5]=a[5]*y,out[6]=a[6]*y,out[7]=a[7]*y,out[8]=a[8]*z,out[9]=a[9]*z,out[10]=a[10]*z,out[11]=a[11]*z,out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out}function rotate(out,a,rad,axis){var s,c,t,a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,b00,b01,b02,b10,b11,b12,b20,b21,b22,x=axis[0],y=axis[1],z=axis[2],len=Math.hypot(x,y,z);return len<_common_js__WEBPACK_IMPORTED_MODULE_0__.b?null:(x*=len=1/len,y*=len,z*=len,s=Math.sin(rad),t=1-(c=Math.cos(rad)),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],b00=x*x*t+c,b01=y*x*t+z*s,b02=z*x*t-y*s,b10=x*y*t-z*s,b11=y*y*t+c,b12=z*y*t+x*s,b20=x*z*t+y*s,b21=y*z*t-x*s,b22=z*z*t+c,out[0]=a00*b00+a10*b01+a20*b02,out[1]=a01*b00+a11*b01+a21*b02,out[2]=a02*b00+a12*b01+a22*b02,out[3]=a03*b00+a13*b01+a23*b02,out[4]=a00*b10+a10*b11+a20*b12,out[5]=a01*b10+a11*b11+a21*b12,out[6]=a02*b10+a12*b11+a22*b12,out[7]=a03*b10+a13*b11+a23*b12,out[8]=a00*b20+a10*b21+a20*b22,out[9]=a01*b20+a11*b21+a21*b22,out[10]=a02*b20+a12*b21+a22*b22,out[11]=a03*b20+a13*b21+a23*b22,a!==out&&(out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out)}function rotateX(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a!==out&&(out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[4]=a10*c+a20*s,out[5]=a11*c+a21*s,out[6]=a12*c+a22*s,out[7]=a13*c+a23*s,out[8]=a20*c-a10*s,out[9]=a21*c-a11*s,out[10]=a22*c-a12*s,out[11]=a23*c-a13*s,out}function rotateY(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a!==out&&(out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[0]=a00*c-a20*s,out[1]=a01*c-a21*s,out[2]=a02*c-a22*s,out[3]=a03*c-a23*s,out[8]=a00*s+a20*c,out[9]=a01*s+a21*c,out[10]=a02*s+a22*c,out[11]=a03*s+a23*c,out}function rotateZ(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7];return a!==out&&(out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[0]=a00*c+a10*s,out[1]=a01*c+a11*s,out[2]=a02*c+a12*s,out[3]=a03*c+a13*s,out[4]=a10*c-a00*s,out[5]=a11*c-a01*s,out[6]=a12*c-a02*s,out[7]=a13*c-a03*s,out}function fromQuat(out,q){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,yx=y*x2,yy=y*y2,zx=z*x2,zy=z*y2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-yy-zz,out[1]=yx+wz,out[2]=zx-wy,out[3]=0,out[4]=yx-wz,out[5]=1-xx-zz,out[6]=zy+wx,out[7]=0,out[8]=zx+wy,out[9]=zy-wx,out[10]=1-xx-yy,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out}function frustum(out,left,right,bottom,top,near,far){var rl=1/(right-left),tb=1/(top-bottom),nf=1/(near-far);return out[0]=2*near*rl,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=2*near*tb,out[6]=0,out[7]=0,out[8]=(right+left)*rl,out[9]=(top+bottom)*tb,out[10]=(far+near)*nf,out[11]=-1,out[12]=0,out[13]=0,out[14]=far*near*2*nf,out[15]=0,out}function perspective(out,fovy,aspect,near,far){var nf,f=1/Math.tan(fovy/2);return out[0]=f/aspect,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=f,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[11]=-1,out[12]=0,out[13]=0,out[15]=0,null!=far&&far!==1/0?(nf=1/(near-far),out[10]=(far+near)*nf,out[14]=2*far*near*nf):(out[10]=-1,out[14]=-2*near),out}function ortho(out,left,right,bottom,top,near,far){var lr=1/(left-right),bt=1/(bottom-top),nf=1/(near-far);return out[0]=-2*lr,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=-2*bt,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=2*nf,out[11]=0,out[12]=(left+right)*lr,out[13]=(top+bottom)*bt,out[14]=(far+near)*nf,out[15]=1,out}function lookAt(out,eye,center,up){var x0,x1,x2,y0,y1,y2,z0,z1,z2,len,eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2],centerx=center[0],centery=center[1],centerz=center[2];return Math.abs(eyex-centerx)<_common_js__WEBPACK_IMPORTED_MODULE_0__.b&&Math.abs(eyey-centery)<_common_js__WEBPACK_IMPORTED_MODULE_0__.b&&Math.abs(eyez-centerz)<_common_js__WEBPACK_IMPORTED_MODULE_0__.b?function identity(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out}(out):(z0=eyex-centerx,z1=eyey-centery,z2=eyez-centerz,x0=upy*(z2*=len=1/Math.hypot(z0,z1,z2))-upz*(z1*=len),x1=upz*(z0*=len)-upx*z2,x2=upx*z1-upy*z0,(len=Math.hypot(x0,x1,x2))?(x0*=len=1/len,x1*=len,x2*=len):(x0=0,x1=0,x2=0),y0=z1*x2-z2*x1,y1=z2*x0-z0*x2,y2=z0*x1-z1*x0,(len=Math.hypot(y0,y1,y2))?(y0*=len=1/len,y1*=len,y2*=len):(y0=0,y1=0,y2=0),out[0]=x0,out[1]=y0,out[2]=z0,out[3]=0,out[4]=x1,out[5]=y1,out[6]=z1,out[7]=0,out[8]=x2,out[9]=y2,out[10]=z2,out[11]=0,out[12]=-(x0*eyex+x1*eyey+x2*eyez),out[13]=-(y0*eyex+y1*eyey+y2*eyez),out[14]=-(z0*eyex+z1*eyey+z2*eyez),out[15]=1,out)}function equals(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8],a9=a[9],a10=a[10],a11=a[11],a12=a[12],a13=a[13],a14=a[14],a15=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];return Math.abs(a0-b0)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a8),Math.abs(b8))&&Math.abs(a9-b9)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a9),Math.abs(b9))&&Math.abs(a10-b10)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a10),Math.abs(b10))&&Math.abs(a11-b11)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a11),Math.abs(b11))&&Math.abs(a12-b12)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a12),Math.abs(b12))&&Math.abs(a13-b13)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a13),Math.abs(b13))&&Math.abs(a14-b14)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a14),Math.abs(b14))&&Math.abs(a15-b15)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a15),Math.abs(b15))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return get_get}));var getPrototypeOf=__webpack_require__(3);function get_get(target,property,receiver){return(get_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=Object(getPrototypeOf.a)(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}})(target,property,receiver||target)}},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"luma.gl: assertion failed.")}__webpack_require__.d(__webpack_exports__,"a",(function(){return assert}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return config})),__webpack_require__.d(__webpack_exports__,"d",(function(){return formatValue})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isArray})),__webpack_require__.d(__webpack_exports__,"a",(function(){return clamp})),__webpack_require__.d(__webpack_exports__,"f",(function(){return lerp})),__webpack_require__.d(__webpack_exports__,"c",(function(){return equals}));__webpack_require__(14),__webpack_require__(149),__webpack_require__(15),__webpack_require__(72),Math.PI,Math.PI;var config={};function round(value){return Math.round(value/config.EPSILON)*config.EPSILON}function formatValue(value){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$precision=_ref.precision,precision=void 0===_ref$precision?config.precision||4:_ref$precision;return value=round(value),"".concat(parseFloat(value.toPrecision(precision)))}function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)&&!(value instanceof DataView)}function map(value,func,result){if(isArray(value)){result=result||function duplicateArray(array){return array.clone?array.clone():new Array(array.length)}(value);for(var i=0;i<result.length&&i<value.length;++i)result[i]=func(value[i],i,result);return result}return func(value)}function clamp(value,min,max){return map(value,(function(value){return Math.max(min,Math.min(max,value))}))}function lerp(a,b,t){return isArray(a)?a.map((function(ai,i){return lerp(ai,b[i],t)})):t*b+(1-t)*a}function equals(a,b,epsilon){var oldEpsilon=config.EPSILON;epsilon&&(config.EPSILON=epsilon);try{if(a===b)return!0;if(isArray(a)&&isArray(b)){if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i)if(!equals(a[i],b[i]))return!1;return!0}return a&&a.equals?a.equals(b):b&&b.equals?b.equals(a):!(!Number.isFinite(a)||!Number.isFinite(b))&&Math.abs(a-b)<=config.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}finally{config.EPSILON=oldEpsilon}}config.EPSILON=1e-12,config.debug=!1,config.precision=4,config.printTypes=!1,config.printDegrees=!1,config.printRowMajor=!0},function(module,exports,__webpack_require__){var global=__webpack_require__(30),getOwnPropertyDescriptor=__webpack_require__(159).f,createNonEnumerableProperty=__webpack_require__(78),redefine=__webpack_require__(69),setGlobal=__webpack_require__(242),copyConstructorProperties=__webpack_require__(332),isForced=__webpack_require__(193);module.exports=function(options,source){var target,key,targetProperty,sourceProperty,descriptor,TARGET=options.target,GLOBAL=options.global,STATIC=options.stat;if(target=GLOBAL?global:STATIC?global[TARGET]||setGlobal(TARGET,{}):(global[TARGET]||{}).prototype)for(key in source){if(sourceProperty=source[key],targetProperty=options.noTargetGet?(descriptor=getOwnPropertyDescriptor(target,key))&&descriptor.value:target[key],!isForced(GLOBAL?key:TARGET+(STATIC?".":"#")+key,options.forced)&&void 0!==targetProperty){if(typeof sourceProperty==typeof targetProperty)continue;copyConstructorProperties(sourceProperty,targetProperty)}(options.sham||targetProperty&&targetProperty.sham)&&createNonEnumerableProperty(sourceProperty,"sham",!0),redefine(target,key,sourceProperty,options)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"deck.gl: assertion failed.")}__webpack_require__.d(__webpack_exports__,"a",(function(){return assert}))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(783)},function(module,exports,__webpack_require__){"use strict";var ES5Type=__webpack_require__(308);module.exports=function Type(x){return"symbol"==typeof x?"Symbol":ES5Type(x)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return web_mercator_viewport_WebMercatorViewport})),__webpack_require__.d(__webpack_exports__,"e",(function(){return get_bounds_getBounds})),__webpack_require__.d(__webpack_exports__,"c",(function(){return fit_bounds_fitBounds})),__webpack_require__.d(__webpack_exports__,"l",(function(){return normalizeViewportProps})),__webpack_require__.d(__webpack_exports__,"d",(function(){return flyToViewport})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getFlyToDuration})),__webpack_require__.d(__webpack_exports__,"k",(function(){return lngLatToWorld})),__webpack_require__.d(__webpack_exports__,"n",(function(){return worldToLngLat})),__webpack_require__.d(__webpack_exports__,"o",(function(){return worldToPixels})),__webpack_require__.d(__webpack_exports__,"m",(function(){return pixelsToWorld})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getMeterZoom})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getDistanceScales})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addMetersToLngLat})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getViewMatrix})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getProjectionParameters}));var toConsumableArray=__webpack_require__(15),slicedToArray=__webpack_require__(11),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),vec4=__webpack_require__(95);function transformVector(matrix,vector){var result=vec4.b([],vector,matrix);return vec4.a(result,result,1/result[3]),result}function mod(value,divisor){var modulus=value%divisor;return modulus<0?divisor+modulus:modulus}function lerp(start,end,step){return step*end+(1-step)*start}var mat4=__webpack_require__(21),vec2=__webpack_require__(46),vec3=__webpack_require__(53);function assert(condition,message){if(!condition)throw new Error(message||"@math.gl/web-mercator: assertion failed.")}var PI=Math.PI,PI_4=PI/4,DEGREES_TO_RADIANS=PI/180,RADIANS_TO_DEGREES=180/PI;function zoomToScale(zoom){return Math.pow(2,zoom)}function scaleToZoom(scale){return Math.log2(scale)}function lngLatToWorld(_ref){var _ref2=Object(slicedToArray.a)(_ref,2),lng=_ref2[0],lat=_ref2[1];assert(Number.isFinite(lng)),assert(Number.isFinite(lat)&&lat>=-90&&lat<=90,"invalid latitude");var phi2=lat*DEGREES_TO_RADIANS;return[512*(lng*DEGREES_TO_RADIANS+PI)/(2*PI),512*(PI+Math.log(Math.tan(PI_4+.5*phi2)))/(2*PI)]}function worldToLngLat(_ref3){var _ref4=Object(slicedToArray.a)(_ref3,2),x=_ref4[0],y=_ref4[1],lambda2=x/512*(2*PI)-PI,phi2=2*(Math.atan(Math.exp(y/512*(2*PI)-PI))-PI_4);return[lambda2*RADIANS_TO_DEGREES,phi2*RADIANS_TO_DEGREES]}function getMeterZoom(_ref5){var latitude=_ref5.latitude;return assert(Number.isFinite(latitude)),scaleToZoom(4003e4*Math.cos(latitude*DEGREES_TO_RADIANS))-9}function getDistanceScales(_ref6){var latitude=_ref6.latitude,longitude=_ref6.longitude,_ref6$highPrecision=_ref6.highPrecision,highPrecision=void 0!==_ref6$highPrecision&&_ref6$highPrecision;assert(Number.isFinite(latitude)&&Number.isFinite(longitude));var result={},latCosine=Math.cos(latitude*DEGREES_TO_RADIANS),unitsPerDegreeY=512/360/latCosine,altUnitsPerMeter=512/4003e4/latCosine;if(result.unitsPerMeter=[altUnitsPerMeter,altUnitsPerMeter,altUnitsPerMeter],result.metersPerUnit=[1/altUnitsPerMeter,1/altUnitsPerMeter,1/altUnitsPerMeter],result.unitsPerDegree=[512/360,unitsPerDegreeY,altUnitsPerMeter],result.degreesPerUnit=[.703125,1/unitsPerDegreeY,1/altUnitsPerMeter],highPrecision){var latCosine2=DEGREES_TO_RADIANS*Math.tan(latitude*DEGREES_TO_RADIANS)/latCosine,unitsPerDegreeY2=512/360*latCosine2/2,altUnitsPerDegree2=512/4003e4*latCosine2,altUnitsPerMeter2=altUnitsPerDegree2/unitsPerDegreeY*altUnitsPerMeter;result.unitsPerDegree2=[0,unitsPerDegreeY2,altUnitsPerDegree2],result.unitsPerMeter2=[altUnitsPerMeter2,0,altUnitsPerMeter2]}return result}function addMetersToLngLat(lngLatZ,xyz){var _lngLatZ=Object(slicedToArray.a)(lngLatZ,3),longitude=_lngLatZ[0],latitude=_lngLatZ[1],z0=_lngLatZ[2],_xyz=Object(slicedToArray.a)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],_getDistanceScales=getDistanceScales({longitude:longitude,latitude:latitude,highPrecision:!0}),unitsPerMeter=_getDistanceScales.unitsPerMeter,unitsPerMeter2=_getDistanceScales.unitsPerMeter2,worldspace=lngLatToWorld(lngLatZ);worldspace[0]+=x*(unitsPerMeter[0]+unitsPerMeter2[0]*y),worldspace[1]+=y*(unitsPerMeter[1]+unitsPerMeter2[1]*y);var newLngLat=worldToLngLat(worldspace),newZ=(z0||0)+(z||0);return Number.isFinite(z0)||Number.isFinite(z)?[newLngLat[0],newLngLat[1],newZ]:newLngLat}function getViewMatrix(_ref7){var height=_ref7.height,pitch=_ref7.pitch,bearing=_ref7.bearing,altitude=_ref7.altitude,scale=_ref7.scale,_ref7$center=_ref7.center,center=void 0===_ref7$center?null:_ref7$center,vm=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return mat4.o(vm,vm,[0,0,-altitude]),mat4.k(vm,vm,-pitch*DEGREES_TO_RADIANS),mat4.m(vm,vm,bearing*DEGREES_TO_RADIANS),scale/=height,mat4.n(vm,vm,[scale,scale,scale]),center&&mat4.o(vm,vm,vec3.c([],center)),vm}function getProjectionParameters(_ref8){var width=_ref8.width,height=_ref8.height,_ref8$altitude=_ref8.altitude,altitude=void 0===_ref8$altitude?1.5:_ref8$altitude,_ref8$pitch=_ref8.pitch,pitch=void 0===_ref8$pitch?0:_ref8$pitch,_ref8$nearZMultiplier=_ref8.nearZMultiplier,nearZMultiplier=void 0===_ref8$nearZMultiplier?1:_ref8$nearZMultiplier,_ref8$farZMultiplier=_ref8.farZMultiplier,farZMultiplier=void 0===_ref8$farZMultiplier?1:_ref8$farZMultiplier,pitchRadians=pitch*DEGREES_TO_RADIANS,halfFov=Math.atan(.5/altitude),topHalfSurfaceDistance=Math.sin(halfFov)*altitude/Math.sin(Math.min(Math.max(Math.PI/2-pitchRadians-halfFov,.01),Math.PI-.01));return{fov:2*halfFov,aspect:width/height,focalDistance:altitude,near:nearZMultiplier,far:(Math.sin(pitchRadians)*topHalfSurfaceDistance+altitude)*farZMultiplier}}function getProjectionMatrix(_ref9){var width=_ref9.width,height=_ref9.height,pitch=_ref9.pitch,_getProjectionParamet=getProjectionParameters({width:width,height:height,altitude:_ref9.altitude,pitch:pitch,nearZMultiplier:_ref9.nearZMultiplier,farZMultiplier:_ref9.farZMultiplier}),fov=_getProjectionParamet.fov,aspect=_getProjectionParamet.aspect,near=_getProjectionParamet.near,far=_getProjectionParamet.far;return mat4.i([],fov,aspect,near,far)}function worldToPixels(xyz,pixelProjectionMatrix){var _xyz2=Object(slicedToArray.a)(xyz,3),x=_xyz2[0],y=_xyz2[1],_xyz2$=_xyz2[2],z=void 0===_xyz2$?0:_xyz2$;return assert(Number.isFinite(x)&&Number.isFinite(y)&&Number.isFinite(z)),transformVector(pixelProjectionMatrix,[x,y,z,1])}function pixelsToWorld(xyz,pixelUnprojectionMatrix){var targetZ=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,_xyz3=Object(slicedToArray.a)(xyz,3),x=_xyz3[0],y=_xyz3[1],z=_xyz3[2];if(assert(Number.isFinite(x)&&Number.isFinite(y),"invalid pixel coordinate"),Number.isFinite(z)){var coord=transformVector(pixelUnprojectionMatrix,[x,y,z,1]);return coord}var coord0=transformVector(pixelUnprojectionMatrix,[x,y,0,1]),coord1=transformVector(pixelUnprojectionMatrix,[x,y,1,1]),z0=coord0[2],z1=coord1[2],t=z0===z1?0:((targetZ||0)-z0)/(z1-z0);return vec2.c([],coord0,coord1,t)}function fit_bounds_fitBounds(_ref){var width=_ref.width,height=_ref.height,bounds=_ref.bounds,_ref$minExtent=_ref.minExtent,minExtent=void 0===_ref$minExtent?0:_ref$minExtent,_ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?24:_ref$maxZoom,_ref$padding=_ref.padding,padding=void 0===_ref$padding?0:_ref$padding,_ref$offset=_ref.offset,offset=void 0===_ref$offset?[0,0]:_ref$offset,_bounds=Object(slicedToArray.a)(bounds,2),_bounds$=Object(slicedToArray.a)(_bounds[0],2),west=_bounds$[0],south=_bounds$[1],_bounds$2=Object(slicedToArray.a)(_bounds[1],2),east=_bounds$2[0],north=_bounds$2[1];if(Number.isFinite(padding)){padding={top:padding,bottom:padding,left:padding,right:padding}}else assert(Number.isFinite(padding.top)&&Number.isFinite(padding.bottom)&&Number.isFinite(padding.left)&&Number.isFinite(padding.right));var viewport=new web_mercator_viewport_WebMercatorViewport({width:width,height:height,longitude:0,latitude:0,zoom:0}),nw=viewport.project([west,north]),se=viewport.project([east,south]),size=[Math.max(Math.abs(se[0]-nw[0]),minExtent),Math.max(Math.abs(se[1]-nw[1]),minExtent)],targetSize=[width-padding.left-padding.right-2*Math.abs(offset[0]),height-padding.top-padding.bottom-2*Math.abs(offset[1])];assert(targetSize[0]>0&&targetSize[1]>0);var scaleX=targetSize[0]/size[0],scaleY=targetSize[1]/size[1],offsetX=(padding.right-padding.left)/2/scaleX,offsetY=(padding.bottom-padding.top)/2/scaleY,center=[(se[0]+nw[0])/2+offsetX,(se[1]+nw[1])/2+offsetY],centerLngLat=viewport.unproject(center),zoom=Math.min(maxZoom,viewport.zoom+Math.log2(Math.abs(Math.min(scaleX,scaleY))));return assert(Number.isFinite(zoom)),{longitude:centerLngLat[0],latitude:centerLngLat[1],zoom:zoom}}var get_bounds_DEGREES_TO_RADIANS=Math.PI/180;function get_bounds_getBounds(viewport){var topLeft,topRight,z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,width=viewport.width,height=viewport.height,unproject=viewport.unproject,unprojectOps={targetZ:z},bottomLeft=unproject([0,height],unprojectOps),bottomRight=unproject([width,height],unprojectOps),halfFov=Math.atan(.5/viewport.altitude),angleToGround=(90-viewport.pitch)*get_bounds_DEGREES_TO_RADIANS;return halfFov>angleToGround-.01?(topLeft=unprojectOnFarPlane(viewport,0,z),topRight=unprojectOnFarPlane(viewport,width,z)):(topLeft=unproject([0,0],unprojectOps),topRight=unproject([width,0],unprojectOps)),[bottomLeft,bottomRight,topRight,topLeft]}function unprojectOnFarPlane(viewport,x,targetZ){var pixelUnprojectionMatrix=viewport.pixelUnprojectionMatrix,coord0=transformVector(pixelUnprojectionMatrix,[x,0,1,1]),coord1=transformVector(pixelUnprojectionMatrix,[x,viewport.height,1,1]),t=(targetZ*viewport.distanceScales.unitsPerMeter[2]-coord0[2])/(coord1[2]-coord0[2]),result=worldToLngLat(vec2.c([],coord0,coord1,t));return result[2]=targetZ,result}var web_mercator_viewport_WebMercatorViewport=function(){function WebMercatorViewport(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:1,height:1},width=_ref.width,height=_ref.height,_ref$latitude=_ref.latitude,latitude=void 0===_ref$latitude?0:_ref$latitude,_ref$longitude=_ref.longitude,longitude=void 0===_ref$longitude?0:_ref$longitude,_ref$zoom=_ref.zoom,zoom=void 0===_ref$zoom?0:_ref$zoom,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?0:_ref$pitch,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?0:_ref$bearing,_ref$altitude=_ref.altitude,altitude=void 0===_ref$altitude?1.5:_ref$altitude,_ref$nearZMultiplier=_ref.nearZMultiplier,nearZMultiplier=void 0===_ref$nearZMultiplier?.02:_ref$nearZMultiplier,_ref$farZMultiplier=_ref.farZMultiplier,farZMultiplier=void 0===_ref$farZMultiplier?1.01:_ref$farZMultiplier;Object(classCallCheck.a)(this,WebMercatorViewport),width=width||1,height=height||1;var scale=zoomToScale(zoom);altitude=Math.max(.75,altitude);var center=lngLatToWorld([longitude,latitude]);center[2]=0,this.projectionMatrix=getProjectionMatrix({width:width,height:height,pitch:pitch,altitude:altitude,nearZMultiplier:nearZMultiplier,farZMultiplier:farZMultiplier}),this.viewMatrix=getViewMatrix({height:height,scale:scale,center:center,pitch:pitch,bearing:bearing,altitude:altitude}),this.width=width,this.height=height,this.scale=scale,this.latitude=latitude,this.longitude=longitude,this.zoom=zoom,this.pitch=pitch,this.bearing=bearing,this.altitude=altitude,this.center=center,this.distanceScales=getDistanceScales(this),this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}return Object(createClass.a)(WebMercatorViewport,[{key:"_initMatrices",value:function _initMatrices(){var width=this.width,height=this.height,projectionMatrix=this.projectionMatrix,viewMatrix=this.viewMatrix,vpm=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];mat4.g(vpm,vpm,projectionMatrix),mat4.g(vpm,vpm,viewMatrix),this.viewProjectionMatrix=vpm;var m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];mat4.n(m,m,[width/2,-height/2,1]),mat4.o(m,m,[1,-1,0]),mat4.g(m,m,vpm);var mInverse=mat4.e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m);if(!mInverse)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=mInverse}},{key:"equals",value:function equals(viewport){return viewport instanceof WebMercatorViewport&&(viewport.width===this.width&&viewport.height===this.height&&mat4.b(viewport.projectionMatrix,this.projectionMatrix)&&mat4.b(viewport.viewMatrix,this.viewMatrix))}},{key:"project",value:function project(xyz){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$topLeft=_ref2.topLeft,topLeft=void 0===_ref2$topLeft||_ref2$topLeft,worldPosition=this.projectPosition(xyz),coord=worldToPixels(worldPosition,this.pixelProjectionMatrix),_coord=Object(slicedToArray.a)(coord,2),x=_coord[0],y=_coord[1],y2=topLeft?y:this.height-y;return 2===xyz.length?[x,y2]:[x,y2,coord[2]]}},{key:"unproject",value:function unproject(xyz){var _ref3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref3$topLeft=_ref3.topLeft,topLeft=void 0===_ref3$topLeft||_ref3$topLeft,_ref3$targetZ=_ref3.targetZ,targetZ=void 0===_ref3$targetZ?void 0:_ref3$targetZ,_xyz=Object(slicedToArray.a)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],y2=topLeft?y:this.height-y,targetZWorld=targetZ&&targetZ*this.distanceScales.unitsPerMeter[2],coord=pixelsToWorld([x,y2,z],this.pixelUnprojectionMatrix,targetZWorld),_this$unprojectPositi=this.unprojectPosition(coord),_this$unprojectPositi2=Object(slicedToArray.a)(_this$unprojectPositi,3),X=_this$unprojectPositi2[0],Y=_this$unprojectPositi2[1],Z=_this$unprojectPositi2[2];return Number.isFinite(z)?[X,Y,Z]:Number.isFinite(targetZ)?[X,Y,targetZ]:[X,Y]}},{key:"projectPosition",value:function projectPosition(xyz){var _lngLatToWorld=lngLatToWorld(xyz),_lngLatToWorld2=Object(slicedToArray.a)(_lngLatToWorld,2);return[_lngLatToWorld2[0],_lngLatToWorld2[1],(xyz[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function unprojectPosition(xyz){var _worldToLngLat=worldToLngLat(xyz),_worldToLngLat2=Object(slicedToArray.a)(_worldToLngLat,2);return[_worldToLngLat2[0],_worldToLngLat2[1],(xyz[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function projectFlat(lngLat){return lngLatToWorld(lngLat)}},{key:"unprojectFlat",value:function unprojectFlat(xy){return worldToLngLat(xy)}},{key:"getMapCenterByLngLatPosition",value:function getMapCenterByLngLatPosition(_ref4){var lngLat=_ref4.lngLat,fromLocation=pixelsToWorld(_ref4.pos,this.pixelUnprojectionMatrix),toLocation=lngLatToWorld(lngLat),translate=vec2.a([],toLocation,vec2.d([],fromLocation));return worldToLngLat(vec2.a([],this.center,translate))}},{key:"getLocationAtPoint",value:function getLocationAtPoint(_ref5){var lngLat=_ref5.lngLat,pos=_ref5.pos;return this.getMapCenterByLngLatPosition({lngLat:lngLat,pos:pos})}},{key:"fitBounds",value:function fitBounds(bounds){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},width=this.width,height=this.height,_fitBounds2=fit_bounds_fitBounds(Object.assign({width:width,height:height,bounds:bounds},options)),longitude=_fitBounds2.longitude,latitude=_fitBounds2.latitude,zoom=_fitBounds2.zoom;return new WebMercatorViewport({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom})}},{key:"getBounds",value:function getBounds(options){var corners=this.getBoundingRegion(options),west=Math.min.apply(Math,Object(toConsumableArray.a)(corners.map((function(p){return p[0]})))),east=Math.max.apply(Math,Object(toConsumableArray.a)(corners.map((function(p){return p[0]}))));return[[west,Math.min.apply(Math,Object(toConsumableArray.a)(corners.map((function(p){return p[1]}))))],[east,Math.max.apply(Math,Object(toConsumableArray.a)(corners.map((function(p){return p[1]}))))]]}},{key:"getBoundingRegion",value:function getBoundingRegion(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return get_bounds_getBounds(this,options.z||0)}}]),WebMercatorViewport}();function normalizeViewportProps(_ref){var width=_ref.width,height=_ref.height,longitude=_ref.longitude,latitude=_ref.latitude,zoom=_ref.zoom,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?0:_ref$pitch,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?0:_ref$bearing;(longitude<-180||longitude>180)&&(longitude=mod(longitude+180,360)-180),(bearing<-180||bearing>180)&&(bearing=mod(bearing+180,360)-180);var flatViewport=new web_mercator_viewport_WebMercatorViewport({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom}),topY=flatViewport.project([longitude,85.05113])[1],bottomY=flatViewport.project([longitude,-85.05113])[1],shiftY=0;return bottomY-topY<height&&(zoom+=Math.log2(height/(bottomY-topY)),topY=(flatViewport=new web_mercator_viewport_WebMercatorViewport({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom})).project([longitude,85.05113])[1],bottomY=flatViewport.project([longitude,-85.05113])[1]),topY>0?shiftY=topY:bottomY<height&&(shiftY=bottomY-height),shiftY&&(latitude=flatViewport.unproject([width/2,height/2+shiftY])[1]),{width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom,pitch:pitch,bearing:bearing}}var VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom"],DEFAULT_OPTS={curve:1.414,speed:1.2};function flyToViewport(startProps,endProps,t){var opts=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},viewport={},_getFlyToTransitionPa=getFlyToTransitionParams(startProps,endProps,opts),startZoom=_getFlyToTransitionPa.startZoom,startCenterXY=_getFlyToTransitionPa.startCenterXY,uDelta=_getFlyToTransitionPa.uDelta,w0=_getFlyToTransitionPa.w0,u1=_getFlyToTransitionPa.u1,S=_getFlyToTransitionPa.S,rho=_getFlyToTransitionPa.rho,rho2=_getFlyToTransitionPa.rho2,r0=_getFlyToTransitionPa.r0;if(u1<.01){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=VIEWPORT_TRANSITION_PROPS[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value,startValue=startProps[key],endValue=endProps[key];viewport[key]=lerp(startValue,endValue,t)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return viewport}var s=t*S,w=Math.cosh(r0)/Math.cosh(r0+rho*s),u=w0*((Math.cosh(r0)*Math.tanh(r0+rho*s)-Math.sinh(r0))/rho2)/u1,scaleIncrement=1/w,newZoom=startZoom+scaleToZoom(scaleIncrement),newCenterWorld=vec2.e([],uDelta,u);vec2.a(newCenterWorld,newCenterWorld,startCenterXY);var newCenter=worldToLngLat(newCenterWorld);return viewport.longitude=newCenter[0],viewport.latitude=newCenter[1],viewport.zoom=newZoom,viewport}function getFlyToDuration(startProps,endProps){var duration,opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_opts=opts=Object.assign({},DEFAULT_OPTS,opts),screenSpeed=_opts.screenSpeed,speed=_opts.speed,maxDuration=_opts.maxDuration,_getFlyToTransitionPa2=getFlyToTransitionParams(startProps,endProps,opts),S=_getFlyToTransitionPa2.S,rho=_getFlyToTransitionPa2.rho,length=1e3*S;return duration=Number.isFinite(screenSpeed)?length/(screenSpeed/rho):length/speed,Number.isFinite(maxDuration)&&duration>maxDuration?0:duration}function getFlyToTransitionParams(startProps,endProps,opts){var rho=(opts=Object.assign({},DEFAULT_OPTS,opts)).curve,startZoom=startProps.zoom,startCenter=[startProps.longitude,startProps.latitude],startScale=zoomToScale(startZoom),endZoom=endProps.zoom,endCenter=[endProps.longitude,endProps.latitude],scale=zoomToScale(endZoom-startZoom),startCenterXY=lngLatToWorld(startCenter),endCenterXY=lngLatToWorld(endCenter),uDelta=vec2.f([],endCenterXY,startCenterXY),w0=Math.max(startProps.width,startProps.height),w1=w0/scale,u1=vec2.b(uDelta)*startScale,_u1=Math.max(u1,.01),rho2=rho*rho,b0=(w1*w1-w0*w0+rho2*rho2*_u1*_u1)/(2*w0*rho2*_u1),b1=(w1*w1-w0*w0-rho2*rho2*_u1*_u1)/(2*w1*rho2*_u1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);return{startZoom:startZoom,startCenterXY:startCenterXY,uDelta:uDelta,w0:w0,u1:u1,S:(r1-r0)/rho,rho:rho,rho2:rho2,r0:r0,r1:r1}}},function(module,exports,__webpack_require__){(function(global){var check=function(it){return it&&it.Math==Math&&it};module.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||Function("return this")()}).call(this,__webpack_require__(43))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return checkNumber})),__webpack_require__.d(__webpack_exports__,"b",(function(){return checkVector})),__webpack_require__.d(__webpack_exports__,"c",(function(){return deprecated}));var _common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(24);function validateVector(v,length){if(v.length!==length)return!1;for(var i=0;i<v.length;++i)if(!Number.isFinite(v[i]))return!1;return!0}function checkNumber(value){if(!Number.isFinite(value))throw new Error("Invalid number ".concat(value));return value}function checkVector(v,length){var callerName=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(_common__WEBPACK_IMPORTED_MODULE_0__.b.debug&&!validateVector(v,length))throw new Error("math.gl: ".concat(callerName," some fields set to invalid numbers'"));return v}var map={};function deprecated(method,version){map[method]||(map[method]=!0,console.warn("".concat(method," has been removed in version ").concat(version,", see upgrade guide for more information")))}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),callBind=__webpack_require__(228),$indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function callBoundIntrinsic(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);return"function"==typeof intrinsic&&$indexOf(name,".prototype.")?callBind(intrinsic):intrinsic}},,,function(module,exports){module.exports=function(exec){try{return!!exec()}catch(error){return!0}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return register})),__webpack_require__.d(__webpack_exports__,"a",(function(){return debug}));var _utils_log__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20),loggers={};function register(handlers){loggers=handlers}function debug(eventType){var _loggers$eventType;_utils_log__WEBPACK_IMPORTED_MODULE_0__.a.level>0&&loggers[eventType]&&(_loggers$eventType=loggers[eventType]).call.apply(_loggers$eventType,arguments)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return LIFECYCLE})),__webpack_require__.d(__webpack_exports__,"b",(function(){return PROP_SYMBOLS}));var LIFECYCLE={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},PROP_SYMBOLS={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")}},,function(module,exports,__webpack_require__){var global=__webpack_require__(30),shared=__webpack_require__(244),has=__webpack_require__(50),uid=__webpack_require__(190),NATIVE_SYMBOL=__webpack_require__(250),USE_SYMBOL_AS_UID=__webpack_require__(336),WellKnownSymbolsStore=shared("wks"),Symbol=global.Symbol,createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol:Symbol&&Symbol.withoutSetter||uid;module.exports=function(name){return has(WellKnownSymbolsStore,name)||(NATIVE_SYMBOL&&has(Symbol,name)?WellKnownSymbolsStore[name]=Symbol[name]:WellKnownSymbolsStore[name]=createWellKnownSymbol("Symbol."+name)),WellKnownSymbolsStore[name]}},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Buffer}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8),_resource__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(48),_accessor__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(66),_webgl_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(102),_webgl_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(101),_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9),_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(292),_utils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(23),DEPRECATED_PROPS={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},PROP_CHECKS_INITIALIZE={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:DEPRECATED_PROPS},PROP_CHECKS_SET_PROPS={removedProps:DEPRECATED_PROPS},Buffer=function(_Resource){function Buffer(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Buffer),(_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(Buffer).call(this,gl,props))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),_this.target=props.target||(_this.gl.webgl2?36662:34962),_this.initialize(props),Object.seal(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__.a)(_this)),_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__.a)(Buffer,_Resource),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Buffer,[{key:"getElementCount",value:function getElementCount(){var accessor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/_accessor__WEBPACK_IMPORTED_MODULE_7__.a.getBytesPerElement(accessor))}},{key:"getVertexCount",value:function getVertexCount(){var accessor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/_accessor__WEBPACK_IMPORTED_MODULE_7__.a.getBytesPerVertex(accessor))}},{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(props)&&(props={data:props}),Number.isFinite(props)&&(props={byteLength:props}),props=Object(_utils__WEBPACK_IMPORTED_MODULE_11__.a)("Buffer",props,PROP_CHECKS_INITIALIZE),this.usage=props.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},props,props.accessor)),props.data?this._setData(props.data,props.offset,props.byteLength):this._setByteLength(props.byteLength||0),this}},{key:"setProps",value:function setProps(props){return"accessor"in(props=Object(_utils__WEBPACK_IMPORTED_MODULE_11__.a)("Buffer",props,PROP_CHECKS_SET_PROPS))&&this.setAccessor(props.accessor),this}},{key:"setAccessor",value:function setAccessor(accessor){return delete(accessor=Object.assign({},accessor)).buffer,this.accessor=new _accessor__WEBPACK_IMPORTED_MODULE_7__.a(accessor),this}},{key:"reallocate",value:function reallocate(byteLength){return byteLength>this.byteLength?(this._setByteLength(byteLength),!0):(this.bytesUsed=byteLength,!1)}},{key:"setData",value:function setData(props){return this.initialize(props)}},{key:"subData",value:function subData(props){ArrayBuffer.isView(props)&&(props={data:props});var _props=props,data=_props.data,_props$offset=_props.offset,offset=void 0===_props$offset?0:_props$offset,_props$srcOffset=_props.srcOffset,srcOffset=void 0===_props$srcOffset?0:_props$srcOffset,byteLength=props.byteLength||props.length;Object(_utils__WEBPACK_IMPORTED_MODULE_12__.a)(data);var target=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(target,this.handle),0!==srcOffset||void 0!==byteLength?(Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_8__.a)(this.gl),this.gl.bufferSubData(this.target,offset,data,srcOffset,byteLength)):this.gl.bufferSubData(target,offset,data),this.gl.bindBuffer(target,null),this.debugData=null,this._inferType(data),this}},{key:"copyData",value:function copyData(_ref){var sourceBuffer=_ref.sourceBuffer,_ref$readOffset=_ref.readOffset,readOffset=void 0===_ref$readOffset?0:_ref$readOffset,_ref$writeOffset=_ref.writeOffset,writeOffset=void 0===_ref$writeOffset?0:_ref$writeOffset,size=_ref.size,gl=this.gl;return Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_8__.a)(gl),gl.bindBuffer(36662,sourceBuffer.handle),gl.bindBuffer(36663,this.handle),gl.copyBufferSubData(36662,36663,readOffset,writeOffset,size),gl.bindBuffer(36662,null),gl.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function getData(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref2$dstData=_ref2.dstData,dstData=void 0===_ref2$dstData?null:_ref2$dstData,_ref2$srcByteOffset=_ref2.srcByteOffset,srcByteOffset=void 0===_ref2$srcByteOffset?0:_ref2$srcByteOffset,_ref2$dstOffset=_ref2.dstOffset,dstOffset=void 0===_ref2$dstOffset?0:_ref2$dstOffset,_ref2$length=_ref2.length,length=void 0===_ref2$length?0:_ref2$length;Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_8__.a)(this.gl);var dstAvailableElementCount,dstElementCount,ArrayType=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_9__.c)(this.accessor.type||5126,{clamped:!1}),sourceAvailableElementCount=this._getAvailableElementCount(srcByteOffset),dstElementOffset=dstOffset;dstData?dstAvailableElementCount=(dstElementCount=dstData.length)-dstElementOffset:dstElementCount=dstElementOffset+(dstAvailableElementCount=Math.min(sourceAvailableElementCount,length||sourceAvailableElementCount));var copyElementCount=Math.min(sourceAvailableElementCount,dstAvailableElementCount);return length=length||copyElementCount,Object(_utils__WEBPACK_IMPORTED_MODULE_12__.a)(length<=copyElementCount),dstData=dstData||new ArrayType(dstElementCount),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,srcByteOffset,dstData,dstOffset,length),this.gl.bindBuffer(36662,null),dstData}},{key:"bind",value:function bind(){var _ref3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref3$target=_ref3.target,target=void 0===_ref3$target?this.target:_ref3$target,_ref3$index=_ref3.index,index=void 0===_ref3$index?this.accessor&&this.accessor.index:_ref3$index,_ref3$offset=_ref3.offset,offset=void 0===_ref3$offset?0:_ref3$offset,size=_ref3.size;return 35345===target||35982===target?void 0!==size?this.gl.bindBufferRange(target,index,this.handle,offset,size):(Object(_utils__WEBPACK_IMPORTED_MODULE_12__.a)(0===offset),this.gl.bindBufferBase(target,index,this.handle)):this.gl.bindBuffer(target,this.handle),this}},{key:"unbind",value:function unbind(){var _ref4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref4$target=_ref4.target,target=void 0===_ref4$target?this.target:_ref4$target,_ref4$index=_ref4.index,index=void 0===_ref4$index?this.accessor&&this.accessor.index:_ref4$index,isIndexedBuffer=35345===target||35982===target;return isIndexedBuffer?this.gl.bindBufferBase(target,index,null):this.gl.bindBuffer(target,null),this}},{key:"getDebugData",value:function getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function invalidateDebugData(){this.debugData=null}},{key:"_setData",value:function _setData(data){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,byteLength=arguments.length>2&&void 0!==arguments[2]?arguments[2]:data.byteLength+offset;Object(_utils__WEBPACK_IMPORTED_MODULE_12__.a)(ArrayBuffer.isView(data)),this._trackDeallocatedMemory();var target=this._getTarget();this.gl.bindBuffer(target,this.handle),this.gl.bufferData(target,byteLength,this.usage),this.gl.bufferSubData(target,offset,data),this.gl.bindBuffer(target,null),this.debugData=data.slice(0,10),this.bytesUsed=byteLength,this._trackAllocatedMemory(byteLength);var type=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_9__.b)(data);return Object(_utils__WEBPACK_IMPORTED_MODULE_12__.a)(type),this.setAccessor(new _accessor__WEBPACK_IMPORTED_MODULE_7__.a(this.accessor,{type:type})),this}},{key:"_setByteLength",value:function _setByteLength(byteLength){var usage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(_utils__WEBPACK_IMPORTED_MODULE_12__.a)(byteLength>=0),this._trackDeallocatedMemory();var data=byteLength;0===byteLength&&(data=new Float32Array(0));var target=this._getTarget();return this.gl.bindBuffer(target,this.handle),this.gl.bufferData(target,data,usage),this.gl.bindBuffer(target,null),this.usage=usage,this.debugData=null,this.bytesUsed=byteLength,this._trackAllocatedMemory(byteLength),this}},{key:"_getTarget",value:function _getTarget(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function _getAvailableElementCount(srcByteOffset){var sourceElementOffset=srcByteOffset/Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_9__.c)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-sourceElementOffset}},{key:"_inferType",value:function _inferType(data){this.accessor.type||this.setAccessor(new _accessor__WEBPACK_IMPORTED_MODULE_7__.a(this.accessor,{type:Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_9__.b)(data)}))}},{key:"_createHandle",value:function _createHandle(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function _getParameter(pname){this.gl.bindBuffer(this.target,this.handle);var value=this.gl.getBufferParameter(this.target,pname);return this.gl.bindBuffer(this.target,null),value}},{key:"setByteLength",value:function setByteLength(byteLength){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_10__.g.deprecated("setByteLength","reallocate")(),this.reallocate(byteLength)}},{key:"updateAccessor",value:function updateAccessor(opts){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_10__.g.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new _accessor__WEBPACK_IMPORTED_MODULE_7__.a(this.accessor,opts),this}},{key:"type",get:function get(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_10__.g.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function get(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_10__.g.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),Buffer}(_resource__WEBPACK_IMPORTED_MODULE_6__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";function defaultEqualityCheck(a,b){return a===b}function areArgumentsShallowlyEqual(equalityCheck,prev,next){if(null===prev||null===next||prev.length!==next.length)return!1;for(var length=prev.length,i=0;i<length;i++)if(!equalityCheck(prev[i],next[i]))return!1;return!0}function getDependencies(funcs){var dependencies=Array.isArray(funcs[0])?funcs[0]:funcs;if(!dependencies.every((function(dep){return"function"==typeof dep}))){var dependencyTypes=dependencies.map((function(dep){return typeof dep})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+dependencyTypes+"]")}return dependencies}__webpack_require__.d(__webpack_exports__,"a",(function(){return createSelector}));var createSelector=function createSelectorCreator(memoize){for(var _len=arguments.length,memoizeOptions=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)memoizeOptions[_key-1]=arguments[_key];return function(){for(var _len2=arguments.length,funcs=Array(_len2),_key2=0;_key2<_len2;_key2++)funcs[_key2]=arguments[_key2];var recomputations=0,resultFunc=funcs.pop(),dependencies=getDependencies(funcs),memoizedResultFunc=memoize.apply(void 0,[function(){return recomputations++,resultFunc.apply(null,arguments)}].concat(memoizeOptions)),selector=memoize((function(){for(var params=[],length=dependencies.length,i=0;i<length;i++)params.push(dependencies[i].apply(null,arguments));return memoizedResultFunc.apply(null,params)}));return selector.resultFunc=resultFunc,selector.dependencies=dependencies,selector.recomputations=function(){return recomputations},selector.resetRecomputations=function(){return recomputations=0},selector}}((function defaultMemoize(func){var equalityCheck=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultEqualityCheck,lastArgs=null,lastResult=null;return function(){return areArgumentsShallowlyEqual(equalityCheck,lastArgs,arguments)||(lastResult=func.apply(null,arguments)),lastArgs=arguments,lastResult}}))},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){"use strict";var keys=__webpack_require__(443),hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),toStr=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,supportsDescriptors=origDefineProperty&&function(){var obj={};try{for(var _ in origDefineProperty(obj,"x",{enumerable:!1,value:obj}),obj)return!1;return obj.x===obj}catch(e){return!1}}(),defineProperty=function(object,name,value,predicate){var fn;(!(name in object)||"function"==typeof(fn=predicate)&&"[object Function]"===toStr.call(fn)&&predicate())&&(supportsDescriptors?origDefineProperty(object,name,{configurable:!0,enumerable:!1,value:value,writable:!0}):object[name]=value)},defineProperties=function(object,map){var predicates=arguments.length>2?arguments[2]:{},props=keys(map);hasSymbols&&(props=concat.call(props,Object.getOwnPropertySymbols(map)));for(var i=0;i<props.length;i+=1)defineProperty(object,props[i],map[props[i]],predicates[props[i]])};defineProperties.supportsDescriptors=!!supportsDescriptors,module.exports=defineProperties},function(module,exports,__webpack_require__){var path=__webpack_require__(245),has=__webpack_require__(50),wrappedWellKnownSymbolModule=__webpack_require__(340),defineProperty=__webpack_require__(52).f;module.exports=function(NAME){var Symbol=path.Symbol||(path.Symbol={});has(Symbol,NAME)||defineProperty(Symbol,NAME,{value:wrappedWellKnownSymbolModule.f(NAME)})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return add})),__webpack_require__.d(__webpack_exports__,"e",(function(){return scale})),__webpack_require__.d(__webpack_exports__,"b",(function(){return length})),__webpack_require__.d(__webpack_exports__,"d",(function(){return negate})),__webpack_require__.d(__webpack_exports__,"c",(function(){return lerp})),__webpack_require__.d(__webpack_exports__,"g",(function(){return transformMat4})),__webpack_require__.d(__webpack_exports__,"f",(function(){return sub}));var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);function add(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out}function scale(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out}function length(a){var x=a[0],y=a[1];return Math.hypot(x,y)}function negate(out,a){return out[0]=-a[0],out[1]=-a[1],out}function lerp(out,a,b,t){var ax=a[0],ay=a[1];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out}function transformMat4(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[4]*y+m[12],out[1]=m[1]*x+m[5]*y+m[13],out}var vec,sub=function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out};vec=function create(){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.a(2);return _common_js__WEBPACK_IMPORTED_MODULE_0__.a!=Float32Array&&(out[0]=0,out[1]=0),out}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return identity})),__webpack_require__.d(__webpack_exports__,"a",(function(){return copy})),__webpack_require__.d(__webpack_exports__,"d",(function(){return transformer})),__webpack_require__.d(__webpack_exports__,"b",(function(){return continuous}));var bisect=__webpack_require__(822),value=__webpack_require__(819),number=__webpack_require__(177),round=__webpack_require__(809),src_number=function(x){return+x},unit=[0,1];function identity(x){return x}function normalize(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:(x=isNaN(b)?NaN:.5,function(){return x});var x}function bimap(domain,range,interpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];return d1<d0?(d0=normalize(d1,d0),r0=interpolate(r1,r0)):(d0=normalize(d0,d1),r0=interpolate(r0,r1)),function(x){return r0(d0(x))}}function polymap(domain,range,interpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;for(domain[j]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++i<j;)d[i]=normalize(domain[i],domain[i+1]),r[i]=interpolate(range[i],range[i+1]);return function(x){var i=Object(bisect.b)(domain,x,1,j)-1;return r[i](d[i](x))}}function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function transformer(){var transform,untransform,unknown,piecewise,output,input,domain=unit,range=unit,interpolate=value.a,clamp=identity;function rescale(){var n=Math.min(domain.length,range.length);return clamp!==identity&&(clamp=function clamper(a,b){var t;return a>b&&(t=a,a=b,b=t),function(x){return Math.max(a,Math.min(b,x))}}(domain[0],domain[n-1])),piecewise=n>2?polymap:bimap,output=input=null,scale}function scale(x){return isNaN(x=+x)?unknown:(output||(output=piecewise(domain.map(transform),range,interpolate)))(transform(clamp(x)))}return scale.invert=function(y){return clamp(untransform((input||(input=piecewise(range,domain.map(transform),number.a)))(y)))},scale.domain=function(_){return arguments.length?(domain=Array.from(_,src_number),rescale()):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()},scale.rangeRound=function(_){return range=Array.from(_),interpolate=round.a,rescale()},scale.clamp=function(_){return arguments.length?(clamp=!!_||identity,rescale()):clamp!==identity},scale.interpolate=function(_){return arguments.length?(interpolate=_,rescale()):interpolate},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t,u){return transform=t,untransform=u,rescale()}}function continuous(){return transformer()(identity,identity)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Resource}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_init__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(180),_webgl_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(102),_webgl_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(117),_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(154),_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(23),_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(796),ERR_RESOURCE_METHOD_UNDEFINED="Resource subclass must define virtual methods",Resource=function(){function Resource(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Resource),Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_4__.b)(gl);var id=opts.id,_opts$userData=opts.userData,userData=void 0===_opts$userData?{}:_opts$userData;this.gl=gl,this.id=id||Object(_utils__WEBPACK_IMPORTED_MODULE_6__.c)(this.constructor.name),this.userData=userData,this._bound=!1,this._handle=opts.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Resource,[{key:"toString",value:function toString(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function _delete(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$deleteChildren=_ref.deleteChildren,deleteChildren=void 0!==_ref$deleteChildren&&_ref$deleteChildren,children=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,children&&deleteChildren&&children.filter(Boolean).forEach((function(child){child.delete()})),this}},{key:"bind",value:function bind(){var value,funcOrHandle=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof funcOrHandle?(this._bindHandle(funcOrHandle),this):(this._bound?value=funcOrHandle():(this._bindHandle(this.handle),this._bound=!0,value=funcOrHandle(),this._bound=!1,this._bindHandle(null)),value)}},{key:"unbind",value:function unbind(){this.bind(null)}},{key:"getParameter",value:function getParameter(pname){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pname=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_5__.b)(this.gl,pname),Object(_utils__WEBPACK_IMPORTED_MODULE_7__.a)(pname);var parameters=this.constructor.PARAMETERS||{},parameter=parameters[pname];if(parameter){var isWebgl2=Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_2__.f)(this.gl),parameterAvailable=(!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension));if(!parameterAvailable){var webgl1Default=parameter.webgl1,webgl2Default="webgl2"in parameter?parameter.webgl2:parameter.webgl1,defaultValue=isWebgl2?webgl2Default:webgl1Default;return defaultValue}}return this._getParameter(pname,opts)}},{key:"getParameters",value:function getParameters(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref2={},parameters=_ref2.parameters,keys=_ref2.keys,PARAMETERS=this.constructor.PARAMETERS||{},isWebgl2=Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_2__.f)(this.gl),values={},parameterKeys=parameters||Object.keys(PARAMETERS),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=parameterKeys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var pname=_step.value,parameter=PARAMETERS[pname],parameterAvailable=parameter&&(!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension));if(parameterAvailable){var key=keys?Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_5__.a)(this.gl,pname):pname;values[key]=this.getParameter(pname,opts),keys&&"GLenum"===parameter.type&&(values[key]=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_5__.a)(this.gl,values[key]))}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return values}},{key:"setParameter",value:function setParameter(pname,value){pname=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_5__.b)(this.gl,pname),Object(_utils__WEBPACK_IMPORTED_MODULE_7__.a)(pname);var parameter=(this.constructor.PARAMETERS||{})[pname];if(parameter){var isWebgl2=Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_2__.f)(this.gl);if(!((!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension))))throw new Error("Parameter not available on this platform");"GLenum"===parameter.type&&(value=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_5__.b)(value))}return this._setParameter(pname,value),this}},{key:"setParameters",value:function setParameters(parameters){for(var pname in parameters)this.setParameter(pname,parameters[pname]);return this}},{key:"stubRemovedMethods",value:function stubRemovedMethods(className,version,methodNames){return Object(_utils__WEBPACK_IMPORTED_MODULE_8__.a)(this,className,version,methodNames)}},{key:"initialize",value:function initialize(opts){}},{key:"_createHandle",value:function _createHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_deleteHandle",value:function _deleteHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_bindHandle",value:function _bindHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_getOptsFromHandle",value:function _getOptsFromHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_getParameter",value:function _getParameter(pname,opts){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_setParameter",value:function _setParameter(pname,value){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_context",value:function _context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function _addStats(){var name=this.constructor.name,stats=_init__WEBPACK_IMPORTED_MODULE_3__.a.get("Resource Counts");stats.get("Resources Created").incrementCount(),stats.get("".concat(name,"s Created")).incrementCount(),stats.get("".concat(name,"s Active")).incrementCount()}},{key:"_removeStats",value:function _removeStats(){var name=this.constructor.name;_init__WEBPACK_IMPORTED_MODULE_3__.a.get("Resource Counts").get("".concat(name,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function _trackAllocatedMemory(bytes){var name=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,stats=_init__WEBPACK_IMPORTED_MODULE_3__.a.get("Memory Usage");stats.get("GPU Memory").addCount(bytes),stats.get("".concat(name," Memory")).addCount(bytes),this.byteLength=bytes}},{key:"_trackDeallocatedMemory",value:function _trackDeallocatedMemory(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,stats=_init__WEBPACK_IMPORTED_MODULE_3__.a.get("Memory Usage");stats.get("GPU Memory").subtractCount(this.byteLength),stats.get("".concat(name," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function get(){return this._handle}}]),Resource}()},function(module,exports,__webpack_require__){var fails=__webpack_require__(35);module.exports=!fails((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40);module.exports=function(it){if(!isObject(it))throw TypeError(String(it)+" is not an object");return it}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),IE8_DOM_DEFINE=__webpack_require__(329),anObject=__webpack_require__(51),toPrimitive=__webpack_require__(161),nativeDefineProperty=Object.defineProperty;exports.f=DESCRIPTORS?nativeDefineProperty:function defineProperty(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return nativeDefineProperty(O,P,Attributes)}catch(error){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported");return"value"in Attributes&&(O[P]=Attributes.value),O}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return negate})),__webpack_require__.d(__webpack_exports__,"b",(function(){return cross})),__webpack_require__.d(__webpack_exports__,"i",(function(){return transformMat4})),__webpack_require__.d(__webpack_exports__,"h",(function(){return transformMat3})),__webpack_require__.d(__webpack_exports__,"j",(function(){return transformQuat})),__webpack_require__.d(__webpack_exports__,"d",(function(){return rotateX})),__webpack_require__.d(__webpack_exports__,"e",(function(){return rotateY})),__webpack_require__.d(__webpack_exports__,"f",(function(){return rotateZ})),__webpack_require__.d(__webpack_exports__,"a",(function(){return angle})),__webpack_require__.d(__webpack_exports__,"g",(function(){return sub}));var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);function negate(out,a){return out[0]=-a[0],out[1]=-a[1],out[2]=-a[2],out}function cross(out,a,b){var ax=a[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2];return out[0]=ay*bz-az*by,out[1]=az*bx-ax*bz,out[2]=ax*by-ay*bx,out}function transformMat4(out,a,m){var x=a[0],y=a[1],z=a[2],w=m[3]*x+m[7]*y+m[11]*z+m[15];return w=w||1,out[0]=(m[0]*x+m[4]*y+m[8]*z+m[12])/w,out[1]=(m[1]*x+m[5]*y+m[9]*z+m[13])/w,out[2]=(m[2]*x+m[6]*y+m[10]*z+m[14])/w,out}function transformMat3(out,a,m){var x=a[0],y=a[1],z=a[2];return out[0]=x*m[0]+y*m[3]+z*m[6],out[1]=x*m[1]+y*m[4]+z*m[7],out[2]=x*m[2]+y*m[5]+z*m[8],out}function transformQuat(out,a,q){var qx=q[0],qy=q[1],qz=q[2],qw=q[3],x=a[0],y=a[1],z=a[2],uvx=qy*z-qz*y,uvy=qz*x-qx*z,uvz=qx*y-qy*x,uuvx=qy*uvz-qz*uvy,uuvy=qz*uvx-qx*uvz,uuvz=qx*uvy-qy*uvx,w2=2*qw;return uvx*=w2,uvy*=w2,uvz*=w2,uuvx*=2,uuvy*=2,uuvz*=2,out[0]=x+uvx+uuvx,out[1]=y+uvy+uuvy,out[2]=z+uvz+uuvz,out}function rotateX(out,a,b,rad){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0],r[1]=p[1]*Math.cos(rad)-p[2]*Math.sin(rad),r[2]=p[1]*Math.sin(rad)+p[2]*Math.cos(rad),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out}function rotateY(out,a,b,rad){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[2]*Math.sin(rad)+p[0]*Math.cos(rad),r[1]=p[1],r[2]=p[2]*Math.cos(rad)-p[0]*Math.sin(rad),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out}function rotateZ(out,a,b,rad){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0]*Math.cos(rad)-p[1]*Math.sin(rad),r[1]=p[0]*Math.sin(rad)+p[1]*Math.cos(rad),r[2]=p[2],out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out}function angle(a,b){var ax=a[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2],mag=Math.sqrt(ax*ax+ay*ay+az*az)*Math.sqrt(bx*bx+by*by+bz*bz),cosine=mag&&function dot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}(a,b)/mag;return Math.acos(Math.min(Math.max(cosine,-1),1))}var vec,sub=function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out};vec=function create(){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.a(3);return _common_js__WEBPACK_IMPORTED_MODULE_0__.a!=Float32Array&&(out[0]=0,out[1]=0,out[2]=0),out}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Color})),__webpack_require__.d(__webpack_exports__,"d",(function(){return darker})),__webpack_require__.d(__webpack_exports__,"c",(function(){return brighter})),__webpack_require__.d(__webpack_exports__,"e",(function(){return color})),__webpack_require__.d(__webpack_exports__,"g",(function(){return rgbConvert})),__webpack_require__.d(__webpack_exports__,"f",(function(){return rgb})),__webpack_require__.d(__webpack_exports__,"b",(function(){return Rgb}));var _define_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(55);function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;return format=(format+"").trim().toLowerCase(),(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn(m):3===l?new Rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===l?rgba(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===l?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function rgbConvert(o){return o instanceof Color||(o=color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}function rgb(r,g,b,opacity){return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}function hex(value){return((value=Math.max(0,Math.min(255,Math.round(value)||0)))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.a)(Color,color,{copy:function(channels){return Object.assign(new this.constructor,this,channels)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:function color_formatHsl(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.a)(Rgb,rgb,Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.b)(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){return k=null==k?darker:Math.pow(darker,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.a)(Hsl,(function hsl(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)}),Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.b)(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?darker:Math.pow(darker,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}__webpack_require__.d(__webpack_exports__,"b",(function(){return extend})),__webpack_exports__.a=function(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}},,,function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),inspect=__webpack_require__(237),IsPropertyKey=__webpack_require__(76),Type=__webpack_require__(28);module.exports=function Get(O,P){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true, got "+inspect(P));return O[P]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Texture}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8),_resource__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(48),_buffer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(41),_texture_formats__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(99),_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9),probe_gl_env__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(27),_webgl_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(102),_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(154),_utils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(23),NPOT_MIN_FILTERS=[9729,9728],WebGLBuffer=probe_gl_env__WEBPACK_IMPORTED_MODULE_9__.global.WebGLBuffer||function WebGLBuffer(){},Texture=function(_Resource){function Texture(gl,props){var _this;Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Texture);var _props$id=props.id,id=void 0===_props$id?Object(_utils__WEBPACK_IMPORTED_MODULE_11__.c)("texture"):_props$id,handle=props.handle,target=props.target;return(_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__.a)(Texture).call(this,gl,{id:id,handle:handle}))).target=target,_this.textureUnit=void 0,_this.loaded=!1,_this.width=void 0,_this.height=void 0,_this.depth=void 0,_this.format=void 0,_this.type=void 0,_this.dataFormat=void 0,_this.border=void 0,_this.textureUnit=void 0,_this.mipmaps=void 0,_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(Texture,_Resource),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__.a)(Texture,null,[{key:"isSupported",value:function isSupported(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},format=_ref.format,linearFiltering=_ref.linearFiltering,supported=!0;return format&&(supported=(supported=supported&&Object(_texture_formats__WEBPACK_IMPORTED_MODULE_7__.d)(gl,format))&&(!linearFiltering||Object(_texture_formats__WEBPACK_IMPORTED_MODULE_7__.e)(gl,format))),supported}}]),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__.a)(Texture,[{key:"toString",value:function toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function initialize(){var _this2=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},data=props.data;if(data instanceof Promise)return data.then((function(resolvedImageData){return _this2.initialize(Object.assign({},props,{pixels:resolvedImageData,data:resolvedImageData}))})),this;var _props$pixels=props.pixels,pixels=void 0===_props$pixels?null:_props$pixels,_props$format=props.format,format=void 0===_props$format?6408:_props$format,_props$border=props.border,border=void 0===_props$border?0:_props$border,_props$recreate=props.recreate,recreate=void 0!==_props$recreate&&_props$recreate,_props$parameters=props.parameters,parameters=void 0===_props$parameters?{}:_props$parameters,_props$pixelStore=props.pixelStore,pixelStore=void 0===_props$pixelStore?{}:_props$pixelStore,_props$textureUnit=props.textureUnit,textureUnit=void 0===_props$textureUnit?void 0:_props$textureUnit,_props$mipmaps=props.mipmaps,mipmaps=void 0===_props$mipmaps||_props$mipmaps;data||(data=pixels);var width=props.width,height=props.height,dataFormat=props.dataFormat,type=props.type,_props$depth=props.depth,depth=void 0===_props$depth?0:_props$depth,_this$_deduceParamete=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:!1,data:data,width:width,height:height});return width=_this$_deduceParamete.width,height=_this$_deduceParamete.height,dataFormat=_this$_deduceParamete.dataFormat,type=_this$_deduceParamete.type,this.width=width,this.height=height,this.depth=depth,this.format=format,this.type=type,this.dataFormat=dataFormat,this.border=border,this.textureUnit=textureUnit,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),mipmaps&&this._isNPOT()&&(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_8__.g.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),mipmaps=!1,this._updateForNPOT(parameters)),this.mipmaps=mipmaps,this.setImageData({data:data,width:width,height:height,depth:depth,format:format,type:type,dataFormat:dataFormat,border:border,mipmaps:mipmaps,parameters:pixelStore}),mipmaps&&this.generateMipmap(),this.setParameters(parameters),recreate&&(this.data=data),this}},{key:"resize",value:function resize(_ref2){var height=_ref2.height,width=_ref2.width,_ref2$mipmaps=_ref2.mipmaps,mipmaps=void 0!==_ref2$mipmaps&&_ref2$mipmaps;return width!==this.width||height!==this.height?this.initialize({width:width,height:height,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:mipmaps}):this}},{key:"generateMipmap",value:function generateMipmap(){var _this3=this,params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_8__.g.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_8__.k)(this.gl,params,(function(){_this3.gl.generateMipmap(_this3.target)})),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function setImageData(options){this._trackDeallocatedMemory("Texture");var _options$target=options.target,target=void 0===_options$target?this.target:_options$target,_options$pixels=options.pixels,pixels=void 0===_options$pixels?null:_options$pixels,_options$level=options.level,level=void 0===_options$level?0:_options$level,_options$format=options.format,format=void 0===_options$format?this.format:_options$format,_options$border=options.border,border=void 0===_options$border?this.border:_options$border,_options$offset=options.offset,offset=void 0===_options$offset?0:_options$offset,_options$parameters=options.parameters,parameters=void 0===_options$parameters?{}:_options$parameters,_options$data=options.data,data=void 0===_options$data?null:_options$data,_options$type=options.type,type=void 0===_options$type?this.type:_options$type,_options$width=options.width,width=void 0===_options$width?this.width:_options$width,_options$height=options.height,height=void 0===_options$height?this.height:_options$height,_options$dataFormat=options.dataFormat,dataFormat=void 0===_options$dataFormat?this.dataFormat:_options$dataFormat,_options$compressed=options.compressed,compressed=void 0!==_options$compressed&&_options$compressed;data||(data=pixels);var _this$_deduceParamete2=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:compressed,data:data,width:width,height:height});type=_this$_deduceParamete2.type,dataFormat=_this$_deduceParamete2.dataFormat,compressed=_this$_deduceParamete2.compressed,width=_this$_deduceParamete2.width,height=_this$_deduceParamete2.height;var gl=this.gl;gl.bindTexture(this.target,this.handle);var dataType,_this$_getDataType=this._getDataType({data:data,compressed:compressed});if(data=_this$_getDataType.data,dataType=_this$_getDataType.dataType,Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_8__.k)(this.gl,parameters,(function(){switch(dataType){case"null":gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data);break;case"typed-array":gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data,offset);break;case"buffer":Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_10__.a)(gl),gl.bindBuffer(35052,data.handle||data),gl.texImage2D(target,level,format,width,height,border,dataFormat,type,offset),gl.bindBuffer(35052,null);break;case"browser-object":Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_8__.f)(gl)?gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data):gl.texImage2D(target,level,format,dataFormat,type,data);break;case"compressed":gl.compressedTexImage2D(target,level,format,width,height,border,data);break;default:Object(_utils__WEBPACK_IMPORTED_MODULE_12__.a)(!1,"Unknown image data type")}})),data&&data.byteLength)this._trackAllocatedMemory(data.byteLength,"Texture");else{var channels=_texture_formats__WEBPACK_IMPORTED_MODULE_7__.a[this.dataFormat]||4,channelSize=_texture_formats__WEBPACK_IMPORTED_MODULE_7__.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*channels*channelSize,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function setSubImageData(_ref3){var _this4=this,_ref3$target=_ref3.target,target=void 0===_ref3$target?this.target:_ref3$target,_ref3$pixels=_ref3.pixels,pixels=void 0===_ref3$pixels?null:_ref3$pixels,_ref3$data=_ref3.data,data=void 0===_ref3$data?null:_ref3$data,_ref3$x=_ref3.x,x=void 0===_ref3$x?0:_ref3$x,_ref3$y=_ref3.y,y=void 0===_ref3$y?0:_ref3$y,_ref3$width=_ref3.width,width=void 0===_ref3$width?this.width:_ref3$width,_ref3$height=_ref3.height,height=void 0===_ref3$height?this.height:_ref3$height,_ref3$level=_ref3.level,level=void 0===_ref3$level?0:_ref3$level,_ref3$format=_ref3.format,format=void 0===_ref3$format?this.format:_ref3$format,_ref3$type=_ref3.type,type=void 0===_ref3$type?this.type:_ref3$type,_ref3$dataFormat=_ref3.dataFormat,dataFormat=void 0===_ref3$dataFormat?this.dataFormat:_ref3$dataFormat,_ref3$compressed=_ref3.compressed,compressed=void 0!==_ref3$compressed&&_ref3$compressed,_ref3$offset=_ref3.offset,offset=void 0===_ref3$offset?0:_ref3$offset,_ref3$border=_ref3.border,_ref3$parameters=(void 0===_ref3$border&&this.border,_ref3.parameters),parameters=void 0===_ref3$parameters?{}:_ref3$parameters,_this$_deduceParamete3=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:compressed,data:data,width:width,height:height});if(type=_this$_deduceParamete3.type,dataFormat=_this$_deduceParamete3.dataFormat,compressed=_this$_deduceParamete3.compressed,width=_this$_deduceParamete3.width,height=_this$_deduceParamete3.height,Object(_utils__WEBPACK_IMPORTED_MODULE_12__.a)(0===this.depth,"texSubImage not supported for 3D textures"),data||(data=pixels),data&&data.data){var ndarray=data;data=ndarray.data,width=ndarray.shape[0],height=ndarray.shape[1]}data instanceof _buffer__WEBPACK_IMPORTED_MODULE_6__.a&&(data=data.handle),this.gl.bindTexture(this.target,this.handle),Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_8__.k)(this.gl,parameters,(function(){compressed?_this4.gl.compressedTexSubImage2D(target,level,x,y,width,height,format,data):null===data?_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,null):ArrayBuffer.isView(data)?_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,data,offset):data instanceof WebGLBuffer?(Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_10__.a)(_this4.gl),_this4.gl.bindBuffer(35052,data),_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,offset),_this4.gl.bindBuffer(35052,null)):Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_8__.f)(_this4.gl)?_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,data):_this4.gl.texSubImage2D(target,level,x,y,dataFormat,type,data)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function copyFramebuffer(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_8__.g.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function getActiveUnit(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function bind(){var textureUnit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,gl=this.gl;return void 0!==textureUnit&&(this.textureUnit=textureUnit,gl.activeTexture(33984+textureUnit)),gl.bindTexture(this.target,this.handle),textureUnit}},{key:"unbind",value:function unbind(){var textureUnit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,gl=this.gl;return void 0!==textureUnit&&(this.textureUnit=textureUnit,gl.activeTexture(33984+textureUnit)),gl.bindTexture(this.target,null),textureUnit}},{key:"_getDataType",value:function _getDataType(_ref4){var data=_ref4.data,_ref4$compressed=_ref4.compressed;return void 0!==_ref4$compressed&&_ref4$compressed?{data:data,dataType:"compressed"}:null===data?{data:data,dataType:"null"}:ArrayBuffer.isView(data)?{data:data,dataType:"typed-array"}:data instanceof _buffer__WEBPACK_IMPORTED_MODULE_6__.a?{data:data.handle,dataType:"buffer"}:data instanceof WebGLBuffer?{data:data,dataType:"buffer"}:{data:data,dataType:"browser-object"}}},{key:"_deduceParameters",value:function _deduceParameters(opts){var format=opts.format,data=opts.data,width=opts.width,height=opts.height,dataFormat=opts.dataFormat,type=opts.type,compressed=opts.compressed,textureFormat=_texture_formats__WEBPACK_IMPORTED_MODULE_7__.b[format];dataFormat=dataFormat||textureFormat&&textureFormat.dataFormat,type=type||textureFormat&&textureFormat.types[0],compressed=compressed||textureFormat&&textureFormat.compressed;var _this$_deduceImageSiz=this._deduceImageSize(data,width,height);return{dataFormat:dataFormat,type:type,compressed:compressed,width:width=_this$_deduceImageSiz.width,height:height=_this$_deduceImageSiz.height,format:format,data:data}}},{key:"_deduceImageSize",value:function _deduceImageSize(data,width,height){var size;return size="undefined"!=typeof ImageData&&data instanceof ImageData?{width:data.width,height:data.height}:"undefined"!=typeof HTMLImageElement&&data instanceof HTMLImageElement?{width:data.naturalWidth,height:data.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&data instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&data instanceof ImageBitmap?{width:data.width,height:data.height}:"undefined"!=typeof HTMLVideoElement&&data instanceof HTMLVideoElement?{width:data.videoWidth,height:data.videoHeight}:data?{width:width,height:height}:{width:width>=0?width:1,height:height>=0?height:1},Object(_utils__WEBPACK_IMPORTED_MODULE_12__.a)(size,"Could not deduced texture size"),Object(_utils__WEBPACK_IMPORTED_MODULE_12__.a)(void 0===width||size.width===width,"Deduced texture width does not match supplied width"),Object(_utils__WEBPACK_IMPORTED_MODULE_12__.a)(void 0===height||size.height===height,"Deduced texture height does not match supplied height"),size}},{key:"_createHandle",value:function _createHandle(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function _getParameter(pname){switch(pname){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var value=this.gl.getTexParameter(this.target,pname);return this.gl.bindTexture(this.target,null),value}}},{key:"_setParameter",value:function _setParameter(pname,param){switch(this.gl.bindTexture(this.target,this.handle),param=this._getNPOTParam(pname,param),pname){case 33082:case 33083:this.gl.texParameterf(this.handle,pname,param);break;case 4096:case 4097:Object(_utils__WEBPACK_IMPORTED_MODULE_12__.a)(!1);break;default:this.gl.texParameteri(this.target,pname,param)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function _isNPOT(){return!Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_8__.f)(this.gl)&&(!(!this.width||!this.height)&&(!Object(_utils__WEBPACK_IMPORTED_MODULE_11__.b)(this.width)||!Object(_utils__WEBPACK_IMPORTED_MODULE_11__.b)(this.height)))}},{key:"_updateForNPOT",value:function _updateForNPOT(parameters){void 0===parameters[this.gl.TEXTURE_MIN_FILTER]&&(parameters[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===parameters[this.gl.TEXTURE_WRAP_S]&&(parameters[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===parameters[this.gl.TEXTURE_WRAP_T]&&(parameters[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function _getNPOTParam(pname,param){if(this._isNPOT())switch(pname){case 10241:-1===NPOT_MIN_FILTERS.indexOf(param)&&(param=9729);break;case 10242:case 10243:33071!==param&&(param=33071)}return param}}]),Texture}(_resource__WEBPACK_IMPORTED_MODULE_5__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain)}return this}function initInterpolator(domain,interpolator){switch(arguments.length){case 0:break;case 1:"function"==typeof domain?this.interpolator(domain):this.range(domain);break;default:this.domain(domain),"function"==typeof interpolator?this.interpolator(interpolator):this.range(interpolator)}return this}__webpack_require__.d(__webpack_exports__,"b",(function(){return initRange})),__webpack_require__.d(__webpack_exports__,"a",(function(){return initInterpolator}))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"b",(function(){return window_})),__webpack_require__.d(__webpack_exports__,"a",(function(){return document_}));var window_="undefined"!=typeof window?window:global,document_=(void 0!==global||window,"undefined"!=typeof document?document:{})}).call(this,__webpack_require__(43))},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(185);module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,process){__webpack_require__.d(__webpack_exports__,"b",(function(){return window_})),__webpack_require__.d(__webpack_exports__,"a",(function(){return process_}));var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global&&global,document:"undefined"!=typeof document&&document,process:"object"===(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))&&process},window_=globals.window||globals.self||globals.global,process_=globals.process||{};console}).call(this,__webpack_require__(43),__webpack_require__(58))},function(module,exports){module.exports={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Accessor}));var _babel_runtime_helpers_esm_construct__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(149),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_webgl_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(101),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(23),_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(292),DEFAULT_ACCESSOR_VALUES={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},PROP_CHECKS={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},Accessor=function(){function Accessor(){var _this=this;Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,Accessor);for(var _len2=arguments.length,accessors=new Array(_len2),_key2=0;_key2<_len2;_key2++)accessors[_key2]=arguments[_key2];accessors.forEach((function(accessor){return _this._assign(accessor)})),Object.freeze(this)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(Accessor,null,[{key:"getBytesPerElement",value:function getBytesPerElement(accessor){return Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_3__.c)(accessor.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function getBytesPerVertex(accessor){return Object(_utils__WEBPACK_IMPORTED_MODULE_4__.a)(accessor.size),Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_3__.c)(accessor.type||5126).BYTES_PER_ELEMENT*accessor.size}},{key:"resolve",value:function resolve(){for(var _len=arguments.length,accessors=new Array(_len),_key=0;_key<_len;_key++)accessors[_key]=arguments[_key];return Object(_babel_runtime_helpers_esm_construct__WEBPACK_IMPORTED_MODULE_0__.a)(Accessor,[DEFAULT_ACCESSOR_VALUES].concat(accessors))}}]),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(Accessor,[{key:"toString",value:function toString(){return JSON.stringify(this)}},{key:"_assign",value:function _assign(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(props=Object(_utils__WEBPACK_IMPORTED_MODULE_5__.a)("Accessor",props,PROP_CHECKS)).type&&(this.type=props.type,5124!==props.type&&5125!==props.type||(this.integer=!0)),void 0!==props.size&&(this.size=props.size),void 0!==props.offset&&(this.offset=props.offset),void 0!==props.stride&&(this.stride=props.stride),void 0!==props.normalized&&(this.normalized=props.normalized),void 0!==props.integer&&(this.integer=props.integer),void 0!==props.divisor&&(this.divisor=props.divisor),void 0!==props.buffer&&(this.buffer=props.buffer),void 0!==props.index&&("boolean"==typeof index?this.index=props.index?1:0:this.index=props.index),void 0!==props.instanced&&(this.divisor=props.instanced?1:0),void 0!==props.isInstanced&&(this.divisor=props.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function get(){return Accessor.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function get(){return Accessor.getBytesPerVertex(this)}}]),Accessor}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createMat4})),__webpack_require__.d(__webpack_exports__,"b",(function(){return extractCameraVectors})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getFrustumPlanes})),__webpack_require__.d(__webpack_exports__,"d",(function(){return toDoublePrecisionArray}));var _typed_array_manager__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(98),math_gl__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(19);function createMat4(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function extractCameraVectors(_ref){var viewMatrix=_ref.viewMatrix,viewMatrixInverse=_ref.viewMatrixInverse;return{eye:[viewMatrixInverse[12],viewMatrixInverse[13],viewMatrixInverse[14]],direction:[-viewMatrix[2],-viewMatrix[6],-viewMatrix[10]],up:[viewMatrix[1],viewMatrix[5],viewMatrix[9]],right:[viewMatrix[0],viewMatrix[4],viewMatrix[8]]}}var scratchArray,cameraPosition=new math_gl__WEBPACK_IMPORTED_MODULE_1__.b,cameraDirection=new math_gl__WEBPACK_IMPORTED_MODULE_1__.b,cameraUp=new math_gl__WEBPACK_IMPORTED_MODULE_1__.b,cameraRight=new math_gl__WEBPACK_IMPORTED_MODULE_1__.b,nearCenter=new math_gl__WEBPACK_IMPORTED_MODULE_1__.b,farCenter=new math_gl__WEBPACK_IMPORTED_MODULE_1__.b,a=new math_gl__WEBPACK_IMPORTED_MODULE_1__.b;function getFrustumPlanes(_ref2){var aspect=_ref2.aspect,near=_ref2.near,far=_ref2.far,fovyRadians=_ref2.fovyRadians,position=_ref2.position,direction=_ref2.direction,up=_ref2.up,right=_ref2.right;cameraDirection.copy(direction);var nearFarScale=1/cameraDirection.len();cameraDirection.normalize(),cameraPosition.copy(position),cameraUp.copy(up);var widthScale=1/cameraUp.len();cameraUp.normalize(),cameraRight.copy(right).normalize();var nearHeight=2*Math.tan(fovyRadians/2)*near*widthScale,nearWidth=nearHeight*aspect;nearCenter.copy(cameraDirection).scale(near*nearFarScale).add(cameraPosition),farCenter.copy(cameraDirection).scale(far*nearFarScale).add(cameraPosition);var normal=cameraDirection.clone().negate(),distance=normal.dot(nearCenter),planes={near:{distance:distance,normal:normal},far:{distance:cameraDirection.dot(farCenter),normal:cameraDirection.clone()}};return a.copy(cameraRight).scale(.5*nearWidth).add(nearCenter).subtract(cameraPosition).normalize(),normal=new math_gl__WEBPACK_IMPORTED_MODULE_1__.b(a).cross(cameraUp),distance=cameraPosition.dot(normal),planes.right={normal:normal,distance:distance},a.copy(cameraRight).scale(.5*-nearWidth).add(nearCenter).subtract(cameraPosition).normalize(),normal=new math_gl__WEBPACK_IMPORTED_MODULE_1__.b(cameraUp).cross(a),distance=cameraPosition.dot(normal),planes.left={normal:normal,distance:distance},a.copy(cameraUp).scale(.5*nearHeight).add(nearCenter).subtract(cameraPosition).normalize(),normal=new math_gl__WEBPACK_IMPORTED_MODULE_1__.b(cameraRight).cross(a),distance=cameraPosition.dot(normal),planes.top={normal:normal,distance:distance},a.copy(cameraUp).scale(.5*-nearHeight).add(nearCenter).subtract(cameraPosition).normalize(),normal=new math_gl__WEBPACK_IMPORTED_MODULE_1__.b(a).cross(cameraRight),distance=cameraPosition.dot(normal),planes.bottom={normal:normal,distance:distance},planes}function toDoublePrecisionArray(typedArray,_ref3){var _ref3$size=_ref3.size,size=void 0===_ref3$size?1:_ref3$size,_ref3$startIndex=_ref3.startIndex,startIndex=void 0===_ref3$startIndex?0:_ref3$startIndex,endIndex=_ref3.endIndex;Number.isFinite(endIndex)||(endIndex=typedArray.length);var count=(endIndex-startIndex)/size;scratchArray=_typed_array_manager__WEBPACK_IMPORTED_MODULE_0__.a.allocate(scratchArray,count,{type:Float32Array,size:2*size});for(var x,sourceIndex=startIndex,targetIndex=0;sourceIndex<endIndex;){for(var j=0;j<size;j++){var value=typedArray[sourceIndex++];scratchArray[targetIndex+j]=value,scratchArray[targetIndex+j+size]=(x=value)-Math.fround(x)}targetIndex+=2*size}return scratchArray.subarray(0,count*size*2)}},function(module,exports,__webpack_require__){"use strict";(function(global){var origSymbol=global.Symbol,hasSymbolSham=__webpack_require__(296);module.exports=function hasNativeSymbols(){return"function"==typeof origSymbol&&("function"==typeof Symbol&&("symbol"==typeof origSymbol("foo")&&("symbol"==typeof Symbol("bar")&&hasSymbolSham())))}}).call(this,__webpack_require__(43))},function(module,exports,__webpack_require__){var global=__webpack_require__(30),createNonEnumerableProperty=__webpack_require__(78),has=__webpack_require__(50),setGlobal=__webpack_require__(242),inspectSource=__webpack_require__(243),InternalStateModule=__webpack_require__(107),getInternalState=InternalStateModule.get,enforceInternalState=InternalStateModule.enforce,TEMPLATE=String(String).split("String");(module.exports=function(O,key,value,options){var unsafe=!!options&&!!options.unsafe,simple=!!options&&!!options.enumerable,noTargetGet=!!options&&!!options.noTargetGet;"function"==typeof value&&("string"!=typeof key||has(value,"name")||createNonEnumerableProperty(value,"name",key),enforceInternalState(value).source=TEMPLATE.join("string"==typeof key?key:"")),O!==global?(unsafe?!noTargetGet&&O[key]&&(simple=!0):delete O[key],simple?O[key]=value:createNonEnumerableProperty(O,key,value)):simple?O[key]=value:setGlobal(key,value)})(Function.prototype,"toString",(function toString(){return"function"==typeof this&&getInternalState(this).source||inspectSource(this)}))},function(module,exports,__webpack_require__){var requireObjectCoercible=__webpack_require__(106);module.exports=function(argument){return Object(requireObjectCoercible(argument))}},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(366),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error("math.gl assertion ".concat(message))}__webpack_require__.d(__webpack_exports__,"a",(function(){return assert}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return GL_PARAMETER_DEFAULTS})),__webpack_require__.d(__webpack_exports__,"e",(function(){return GL_PARAMETER_SETTERS})),__webpack_require__.d(__webpack_exports__,"a",(function(){return GL_COMPOSITE_PARAMETER_SETTERS})),__webpack_require__.d(__webpack_exports__,"b",(function(){return GL_HOOKED_SETTERS})),__webpack_require__.d(__webpack_exports__,"d",(function(){return GL_PARAMETER_GETTERS}));var _GL_PARAMETER_DEFAULT,_GL_PARAMETER_SETTERS,_GL_PARAMETER_GETTERS,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15),_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(16),GL_PARAMETER_DEFAULTS=(_GL_PARAMETER_DEFAULT={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3042,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,32773,new Float32Array([0,0,0,0])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,32777,32774),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,34877,32774),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,32969,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,32968,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,32971,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,32970,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3106,new Float32Array([0,0,0,0])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3107,[!0,!0,!0,!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2884,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2885,1029),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2929,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2931,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2932,513),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2928,new Float32Array([0,1])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2930,!0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3024,!0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,36006,null),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2886,2305),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,33170,4352),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2849,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,32823,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,32824,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,10752,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,32938,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,32939,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3089,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3088,new Int32Array([0,0,1024,1024])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2960,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2961,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2968,4294967295),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,36005,4294967295),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2962,519),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2967,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2963,4294967295),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,34816,519),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,36003,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,36004,4294967295),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2964,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2965,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2966,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,34817,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,34818,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,34819,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,2978,[0,0,1024,1024]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3333,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3317,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,37440,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,37441,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,37443,37444),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,35723,4352),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,36010,null),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,35977,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3330,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3332,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3331,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3314,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,32878,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3316,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,3315,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_DEFAULT,32877,0),_GL_PARAMETER_DEFAULT),enable=function enable(gl,value,key){return value?gl.enable(key):gl.disable(key)},hint=function hint(gl,value,key){return gl.hint(key,value)},pixelStorei=function pixelStorei(gl,value,key){return gl.pixelStorei(key,value)};function isArray(array){return Array.isArray(array)||ArrayBuffer.isView(array)}var GL_PARAMETER_SETTERS=(_GL_PARAMETER_SETTERS={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3042,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,32773,(function(gl,value){return gl.blendColor.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,32777,"blendEquation"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,34877,"blendEquation"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,32969,"blendFunc"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,32968,"blendFunc"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,32971,"blendFunc"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,32970,"blendFunc"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3106,(function(gl,value){return gl.clearColor.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3107,(function(gl,value){return gl.colorMask.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2884,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2885,(function(gl,value){return gl.cullFace(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2929,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2931,(function(gl,value){return gl.clearDepth(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2932,(function(gl,value){return gl.depthFunc(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2928,(function(gl,value){return gl.depthRange.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2930,(function(gl,value){return gl.depthMask(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3024,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,35723,hint),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,36006,(function drawFramebuffer(gl,value){var target=Object(_utils__WEBPACK_IMPORTED_MODULE_3__.h)(gl)?36009:36160;return gl.bindFramebuffer(target,value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2886,(function(gl,value){return gl.frontFace(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,33170,hint),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2849,(function(gl,value){return gl.lineWidth(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,32823,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,32824,"polygonOffset"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,10752,"polygonOffset"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,35977,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,32938,"sampleCoverage"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,32939,"sampleCoverage"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3089,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3088,(function(gl,value){return gl.scissor.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2960,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2961,(function(gl,value){return gl.clearStencil(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2968,(function(gl,value){return gl.stencilMaskSeparate(1028,value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,36005,(function(gl,value){return gl.stencilMaskSeparate(1029,value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2962,"stencilFuncFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2967,"stencilFuncFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2963,"stencilFuncFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,34816,"stencilFuncBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,36003,"stencilFuncBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,36004,"stencilFuncBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2964,"stencilOpFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2965,"stencilOpFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2966,"stencilOpFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,34817,"stencilOpBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,34818,"stencilOpBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,34819,"stencilOpBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,2978,(function(gl,value){return gl.viewport.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3333,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3317,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,37440,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,37441,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,37443,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3330,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3332,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3331,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,36010,(function readFramebuffer(gl,value){return gl.bindFramebuffer(36008,value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3314,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,32878,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3316,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,3315,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,32877,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"framebuffer",(function framebuffer(gl,_framebuffer){var handle=_framebuffer&&"handle"in _framebuffer?_framebuffer.handle:_framebuffer;return gl.bindFramebuffer(36160,handle)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"blend",(function blend(gl,value){return value?gl.enable(3042):gl.disable(3042)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"blendColor",(function blendColor(gl,value){return gl.blendColor.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"blendEquation",(function blendEquation(gl,args){args=isArray(args)?args:[args,args],gl.blendEquationSeparate.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(args))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"blendFunc",(function blendFunc(gl,args){args=isArray(args)&&2===args.length?[].concat(Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(args),Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(args)):args,gl.blendFuncSeparate.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(args))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"clearColor",(function clearColor(gl,value){return gl.clearColor.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"clearDepth",(function clearDepth(gl,value){return gl.clearDepth(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"clearStencil",(function clearStencil(gl,value){return gl.clearStencil(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"colorMask",(function colorMask(gl,value){return gl.colorMask.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"cull",(function cull(gl,value){return value?gl.enable(2884):gl.disable(2884)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"cullFace",(function cullFace(gl,value){return gl.cullFace(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"depthTest",(function depthTest(gl,value){return value?gl.enable(2929):gl.disable(2929)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"depthFunc",(function depthFunc(gl,value){return gl.depthFunc(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"depthMask",(function depthMask(gl,value){return gl.depthMask(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"depthRange",(function depthRange(gl,value){return gl.depthRange.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"dither",(function dither(gl,value){return value?gl.enable(3024):gl.disable(3024)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"derivativeHint",(function derivativeHint(gl,value){gl.hint(35723,value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"frontFace",(function frontFace(gl,value){return gl.frontFace(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"mipmapHint",(function mipmapHint(gl,value){return gl.hint(33170,value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"lineWidth",(function lineWidth(gl,value){return gl.lineWidth(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"polygonOffsetFill",(function polygonOffsetFill(gl,value){return value?gl.enable(32823):gl.disable(32823)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"polygonOffset",(function polygonOffset(gl,value){return gl.polygonOffset.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"sampleCoverage",(function sampleCoverage(gl,value){return gl.sampleCoverage.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"scissorTest",(function scissorTest(gl,value){return value?gl.enable(3089):gl.disable(3089)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"scissor",(function scissor(gl,value){return gl.scissor.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"stencilTest",(function stencilTest(gl,value){return value?gl.enable(2960):gl.disable(2960)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"stencilMask",(function stencilMask(gl,value){var _value=value=isArray(value)?value:[value,value],_value2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_value,2),mask=_value2[0],backMask=_value2[1];gl.stencilMaskSeparate(1028,mask),gl.stencilMaskSeparate(1029,backMask)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"stencilFunc",(function stencilFunc(gl,args){var _args=args=isArray(args)&&3===args.length?[].concat(Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(args),Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(args)):args,_args2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_args,6),func=_args2[0],ref=_args2[1],mask=_args2[2],backFunc=_args2[3],backRef=_args2[4],backMask=_args2[5];gl.stencilFuncSeparate(1028,func,ref,mask),gl.stencilFuncSeparate(1029,backFunc,backRef,backMask)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"stencilOp",(function stencilOp(gl,args){var _args3=args=isArray(args)&&3===args.length?[].concat(Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(args),Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(args)):args,_args4=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_args3,6),sfail=_args4[0],dpfail=_args4[1],dppass=_args4[2],backSfail=_args4[3],backDpfail=_args4[4],backDppass=_args4[5];gl.stencilOpSeparate(1028,sfail,dpfail,dppass),gl.stencilOpSeparate(1029,backSfail,backDpfail,backDppass)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_SETTERS,"viewport",(function viewport(gl,value){return gl.viewport.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(value))})),_GL_PARAMETER_SETTERS);function getValue(glEnum,values,cache){return void 0!==values[glEnum]?values[glEnum]:cache[glEnum]}var GL_COMPOSITE_PARAMETER_SETTERS={blendEquation:function blendEquation(gl,values,cache){return gl.blendEquationSeparate(getValue(32777,values,cache),getValue(34877,values,cache))},blendFunc:function blendFunc(gl,values,cache){return gl.blendFuncSeparate(getValue(32969,values,cache),getValue(32968,values,cache),getValue(32971,values,cache),getValue(32970,values,cache))},polygonOffset:function polygonOffset(gl,values,cache){return gl.polygonOffset(getValue(32824,values,cache),getValue(10752,values,cache))},sampleCoverage:function sampleCoverage(gl,values,cache){return gl.sampleCoverage(getValue(32938,values,cache),getValue(32939,values,cache))},stencilFuncFront:function stencilFuncFront(gl,values,cache){return gl.stencilFuncSeparate(1028,getValue(2962,values,cache),getValue(2967,values,cache),getValue(2963,values,cache))},stencilFuncBack:function stencilFuncBack(gl,values,cache){return gl.stencilFuncSeparate(1029,getValue(34816,values,cache),getValue(36003,values,cache),getValue(36004,values,cache))},stencilOpFront:function stencilOpFront(gl,values,cache){return gl.stencilOpSeparate(1028,getValue(2964,values,cache),getValue(2965,values,cache),getValue(2966,values,cache))},stencilOpBack:function stencilOpBack(gl,values,cache){return gl.stencilOpSeparate(1029,getValue(34817,values,cache),getValue(34818,values,cache),getValue(34819,values,cache))}},GL_HOOKED_SETTERS={enable:function enable(update,capability){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},capability,!0))},disable:function disable(update,capability){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},capability,!1))},pixelStorei:function pixelStorei(update,pname,value){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},pname,value))},hint:function hint(update,pname,_hint){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},pname,_hint))},bindFramebuffer:function bindFramebuffer(update,target,framebuffer){var _update5;switch(target){case 36160:return update((_update5={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update5,36006,framebuffer),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update5,36010,framebuffer),_update5));case 36009:return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},36006,framebuffer));case 36008:return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},36010,framebuffer));default:return null}},blendColor:function blendColor(update,r,g,b,a){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},32773,new Float32Array([r,g,b,a])))},blendEquation:function blendEquation(update,mode){var _update9;return update((_update9={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update9,32777,mode),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update9,34877,mode),_update9))},blendEquationSeparate:function blendEquationSeparate(update,modeRGB,modeAlpha){var _update10;return update((_update10={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update10,32777,modeRGB),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update10,34877,modeAlpha),_update10))},blendFunc:function blendFunc(update,src,dst){var _update11;return update((_update11={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update11,32969,src),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update11,32968,dst),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update11,32971,src),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update11,32970,dst),_update11))},blendFuncSeparate:function blendFuncSeparate(update,srcRGB,dstRGB,srcAlpha,dstAlpha){var _update12;return update((_update12={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update12,32969,srcRGB),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update12,32968,dstRGB),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update12,32971,srcAlpha),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update12,32970,dstAlpha),_update12))},clearColor:function clearColor(update,r,g,b,a){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},3106,new Float32Array([r,g,b,a])))},clearDepth:function clearDepth(update,depth){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},2931,depth))},clearStencil:function clearStencil(update,s){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},2961,s))},colorMask:function colorMask(update,r,g,b,a){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},3107,[r,g,b,a]))},cullFace:function cullFace(update,mode){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},2885,mode))},depthFunc:function depthFunc(update,func){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},2932,func))},depthRange:function depthRange(update,zNear,zFar){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},2928,new Float32Array([zNear,zFar])))},depthMask:function depthMask(update,mask){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},2930,mask))},frontFace:function frontFace(update,face){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},2886,face))},lineWidth:function lineWidth(update,width){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},2849,width))},polygonOffset:function polygonOffset(update,factor,units){var _update23;return update((_update23={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update23,32824,factor),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update23,10752,units),_update23))},sampleCoverage:function sampleCoverage(update,value,invert){var _update24;return update((_update24={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update24,32938,value),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update24,32939,invert),_update24))},scissor:function scissor(update,x,y,width,height){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},3088,new Int32Array([x,y,width,height])))},stencilMask:function stencilMask(update,mask){var _update26;return update((_update26={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update26,2968,mask),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update26,36005,mask),_update26))},stencilMaskSeparate:function stencilMaskSeparate(update,face,mask){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},1028===face?2968:36005,mask))},stencilFunc:function stencilFunc(update,func,ref,mask){var _update28;return update((_update28={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update28,2962,func),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update28,2967,ref),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update28,2963,mask),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update28,34816,func),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update28,36003,ref),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update28,36004,mask),_update28))},stencilFuncSeparate:function stencilFuncSeparate(update,face,func,ref,mask){var _update29;return update((_update29={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update29,1028===face?2962:34816,func),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update29,1028===face?2967:36003,ref),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update29,1028===face?2963:36004,mask),_update29))},stencilOp:function stencilOp(update,fail,zfail,zpass){var _update30;return update((_update30={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update30,2964,fail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update30,2965,zfail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update30,2966,zpass),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update30,34817,fail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update30,34818,zfail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update30,34819,zpass),_update30))},stencilOpSeparate:function stencilOpSeparate(update,face,fail,zfail,zpass){var _update31;return update((_update31={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update31,1028===face?2964:34817,fail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update31,1028===face?2965:34818,zfail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_update31,1028===face?2966:34819,zpass),_update31))},viewport:function viewport(update,x,y,width,height){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},2978,[x,y,width,height]))}},isEnabled=function isEnabled(gl,key){return gl.isEnabled(key)},GL_PARAMETER_GETTERS=(_GL_PARAMETER_GETTERS={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_GETTERS,3042,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_GETTERS,2884,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_GETTERS,2929,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_GETTERS,3024,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_GETTERS,32823,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_GETTERS,32926,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_GETTERS,32928,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_GETTERS,3089,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_GETTERS,2960,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_GL_PARAMETER_GETTERS,35977,isEnabled),_GL_PARAMETER_GETTERS)},,,function(module,exports,__webpack_require__){"use strict";module.exports=function IsPropertyKey(argument){return"string"==typeof argument||"symbol"==typeof argument}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),fails=__webpack_require__(35),isArray=__webpack_require__(164),isObject=__webpack_require__(40),toObject=__webpack_require__(70),toLength=__webpack_require__(90),createProperty=__webpack_require__(249),arraySpeciesCreate=__webpack_require__(335),arrayMethodHasSpeciesSupport=__webpack_require__(194),wellKnownSymbol=__webpack_require__(39),V8_VERSION=__webpack_require__(251),IS_CONCAT_SPREADABLE=wellKnownSymbol("isConcatSpreadable"),IS_CONCAT_SPREADABLE_SUPPORT=V8_VERSION>=51||!fails((function(){var array=[];return array[IS_CONCAT_SPREADABLE]=!1,array.concat()[0]!==array})),SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("concat"),isConcatSpreadable=function(O){if(!isObject(O))return!1;var spreadable=O[IS_CONCAT_SPREADABLE];return void 0!==spreadable?!!spreadable:isArray(O)};$({target:"Array",proto:!0,forced:!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT},{concat:function concat(arg){var i,k,length,len,E,O=toObject(this),A=arraySpeciesCreate(O,0),n=0;for(i=-1,length=arguments.length;i<length;i++)if(isConcatSpreadable(E=-1===i?O:arguments[i])){if(n+(len=toLength(E.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(k=0;k<len;k++,n++)k in E&&createProperty(A,n,E[k])}else{if(n>=9007199254740991)throw TypeError("Maximum allowed index exceeded");createProperty(A,n++,E)}return A.length=n,A}})},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),definePropertyModule=__webpack_require__(52),createPropertyDescriptor=__webpack_require__(160);module.exports=DESCRIPTORS?function(object,key,value){return definePropertyModule.f(object,key,createPropertyDescriptor(1,value))}:function(object,key,value){return object[key]=value,object}},function(module,exports,__webpack_require__){var TO_STRING_TAG_SUPPORT=__webpack_require__(253),redefine=__webpack_require__(69),toString=__webpack_require__(564);TO_STRING_TAG_SUPPORT||redefine(Object.prototype,"toString",toString,{unsafe:!0})},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),fails=__webpack_require__(35),has=__webpack_require__(50),defineProperty=Object.defineProperty,cache={},thrower=function(it){throw it};module.exports=function(METHOD_NAME,options){if(has(cache,METHOD_NAME))return cache[METHOD_NAME];options||(options={});var method=[][METHOD_NAME],ACCESSORS=!!has(options,"ACCESSORS")&&options.ACCESSORS,argument0=has(options,0)?options[0]:thrower,argument1=has(options,1)?options[1]:void 0;return cache[METHOD_NAME]=!!method&&!fails((function(){if(ACCESSORS&&!DESCRIPTORS)return!0;var O={length:-1};ACCESSORS?defineProperty(O,1,{enumerable:!0,get:thrower}):O[1]=1,method.call(O,argument0,argument1)}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"a",(function(){return trackContextState})),__webpack_require__.d(__webpack_exports__,"c",(function(){return pushContextState})),__webpack_require__.d(__webpack_exports__,"b",(function(){return popContextState}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(73),_unified_parameter_api__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(115),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(16);function installGetterOverride(gl,functionName){var originalGetterFunc=gl[functionName].bind(gl);gl[functionName]=function get(){var pname=arguments.length<=0?void 0:arguments[0];return pname in gl.state.cache||(gl.state.cache[pname]=originalGetterFunc.apply(void 0,arguments)),gl.state.enable?gl.state.cache[pname]:originalGetterFunc.apply(void 0,arguments)},Object.defineProperty(gl[functionName],"name",{value:"".concat(functionName,"-from-cache"),configurable:!1})}function installSetterSpy(gl,functionName,setter){var originalSetterFunc=gl[functionName].bind(gl);gl[functionName]=function set(){for(var _len=arguments.length,params=new Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];var _setter=setter.apply(void 0,[gl.state._updateCache].concat(params)),valueChanged=_setter.valueChanged,oldValue=_setter.oldValue;return valueChanged&&originalSetterFunc.apply(void 0,params),oldValue},Object.defineProperty(gl[functionName],"name",{value:"".concat(functionName,"-to-cache"),configurable:!1})}function installProgramSpy(gl){var originalUseProgram=gl.useProgram.bind(gl);gl.useProgram=function useProgramLuma(handle){gl.state.program!==handle&&(originalUseProgram(handle),gl.state.program=handle)}}var GLState=function(){function GLState(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$copyState=_ref.copyState,copyState=void 0!==_ref$copyState&&_ref$copyState,_ref$log=_ref.log,log=void 0===_ref$log?function(){}:_ref$log;Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,GLState),this.gl=gl,this.program=null,this.stateStack=[],this.enable=!0,this.cache=copyState?Object(_unified_parameter_api__WEBPACK_IMPORTED_MODULE_3__.a)(gl):Object.assign({},_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_2__.c),this.log=log,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(GLState,[{key:"push",value:function push(){this.stateStack.push({})}},{key:"pop",value:function pop(){Object(_utils__WEBPACK_IMPORTED_MODULE_4__.a)(this.stateStack.length>0);var oldValues=this.stateStack[this.stateStack.length-1];Object(_unified_parameter_api__WEBPACK_IMPORTED_MODULE_3__.c)(this.gl,oldValues,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function _updateCache(values){var oldValue,valueChanged=!1,oldValues=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var key in values){Object(_utils__WEBPACK_IMPORTED_MODULE_4__.a)(void 0!==key);var value=values[key],cached=this.cache[key];Object(_utils__WEBPACK_IMPORTED_MODULE_4__.d)(value,cached)||(valueChanged=!0,oldValue=cached,oldValues&&!(key in oldValues)&&(oldValues[key]=cached),this.cache[key]=value)}return{valueChanged:valueChanged,oldValue:oldValue}}}]),GLState}();function trackContextState(gl){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$enable=_ref2.enable,enable=void 0===_ref2$enable||_ref2$enable,copyState=_ref2.copyState;if(Object(_utils__WEBPACK_IMPORTED_MODULE_4__.a)(void 0!==copyState),!gl.state){var global_=void 0!==global?global:window;for(var key in global_.polyfillContext&&global_.polyfillContext(gl),gl.state=new GLState(gl,{copyState:copyState,enable:enable}),installProgramSpy(gl),_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_2__.b){var setter=_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_2__.b[key];installSetterSpy(gl,key,setter)}installGetterOverride(gl,"getParameter"),installGetterOverride(gl,"isEnabled")}return gl.state.enable=enable,gl}function pushContextState(gl){gl.state||trackContextState(gl,{copyState:!1}),gl.state.push()}function popContextState(gl){Object(_utils__WEBPACK_IMPORTED_MODULE_4__.a)(gl.state),gl.state.pop()}}).call(this,__webpack_require__(43))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Framebuffer}));var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7),_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3),_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(22),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(8),_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(9),_resource__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(48),_texture_2d__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(148),_renderbuffer__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(129),_clear__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(285),_copy_and_blit_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(291),_features__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(797),_webgl_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(102),_webgl_utils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(117),_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(23),Framebuffer=function(_Resource){function Framebuffer(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__.a)(this,Framebuffer),(_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__.a)(Framebuffer).call(this,gl,opts))).width=null,_this.height=null,_this.attachments={},_this.readBuffer=36064,_this.drawBuffers=[36064],_this.ownResources=[],_this.initialize(opts),Object.seal(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__.a)(_this)),_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__.a)(Framebuffer,_Resource),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(Framebuffer,[{key:"MAX_COLOR_ATTACHMENTS",get:function get(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function get(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function isSupported(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},colorBufferFloat=_ref.colorBufferFloat,colorBufferHalfFloat=_ref.colorBufferHalfFloat,supported=!0;return colorBufferFloat&&(supported=Boolean(gl.getExtension("EXT_color_buffer_float")||gl.getExtension("WEBGL_color_buffer_float")||gl.getExtension("OES_texture_float"))),colorBufferHalfFloat&&(supported=supported&&Boolean(gl.getExtension("EXT_color_buffer_float")||gl.getExtension("EXT_color_buffer_half_float"))),supported}},{key:"getDefaultFramebuffer",value:function getDefaultFramebuffer(gl){return gl.luma=gl.luma||{},gl.luma.defaultFramebuffer=gl.luma.defaultFramebuffer||new Framebuffer(gl,{id:"default-framebuffer",handle:null,attachments:{}}),gl.luma.defaultFramebuffer}}]),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(Framebuffer,[{key:"initialize",value:function initialize(_ref2){var _ref2$width=_ref2.width,width=void 0===_ref2$width?1:_ref2$width,_ref2$height=_ref2.height,height=void 0===_ref2$height?1:_ref2$height,_ref2$attachments=_ref2.attachments,attachments=void 0===_ref2$attachments?null:_ref2$attachments,_ref2$color=_ref2.color,color=void 0===_ref2$color||_ref2$color,_ref2$depth=_ref2.depth,depth=void 0===_ref2$depth||_ref2$depth,_ref2$stencil=_ref2.stencil,stencil=void 0!==_ref2$stencil&&_ref2$stencil,_ref2$check=_ref2.check,check=void 0===_ref2$check||_ref2$check,readBuffer=_ref2.readBuffer,drawBuffers=_ref2.drawBuffers;if(Object(_utils__WEBPACK_IMPORTED_MODULE_18__.a)(width>=0&&height>=0,"Width and height need to be integers"),this.width=width,this.height=height,attachments)for(var attachment in attachments){var target=attachments[attachment];(Array.isArray(target)?target[0]:target).resize({width:width,height:height})}else attachments=this._createDefaultAttachments(color,depth,stencil,width,height);this.update({clearAttachments:!0,attachments:attachments,readBuffer:readBuffer,drawBuffers:drawBuffers}),attachments&&check&&this.checkStatus()}},{key:"delete",value:function _delete(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.ownResources[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.delete()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}Object(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__.a)(Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__.a)(Framebuffer.prototype),"delete",this).call(this)}},{key:"update",value:function update(_ref3){var _ref3$attachments=_ref3.attachments,attachments=void 0===_ref3$attachments?{}:_ref3$attachments,readBuffer=_ref3.readBuffer,drawBuffers=_ref3.drawBuffers,_ref3$clearAttachment=_ref3.clearAttachments,clearAttachments=void 0!==_ref3$clearAttachment&&_ref3$clearAttachment,_ref3$resizeAttachmen=_ref3.resizeAttachments,resizeAttachments=void 0===_ref3$resizeAttachmen||_ref3$resizeAttachmen;this.attach(attachments,{clearAttachments:clearAttachments,resizeAttachments:resizeAttachments});var gl=this.gl,prevHandle=gl.bindFramebuffer(36160,this.handle);return readBuffer&&this._setReadBuffer(readBuffer),drawBuffers&&this._setDrawBuffers(drawBuffers),gl.bindFramebuffer(36160,prevHandle||null),this}},{key:"resize",value:function resize(){var _ref4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=_ref4.width,height=_ref4.height;if(null===this.handle)return Object(_utils__WEBPACK_IMPORTED_MODULE_18__.a)(void 0===width&&void 0===height),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var attachmentPoint in void 0===width&&(width=this.gl.drawingBufferWidth),void 0===height&&(height=this.gl.drawingBufferHeight),width!==this.width&&height!==this.height&&_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_9__.g.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(width,"x").concat(height))(),this.attachments)this.attachments[attachmentPoint].resize({width:width,height:height});return this.width=width,this.height=height,this}},{key:"attach",value:function attach(attachments){var _this2=this,_ref5=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref5$clearAttachment=_ref5.clearAttachments,clearAttachments=void 0!==_ref5$clearAttachment&&_ref5$clearAttachment,_ref5$resizeAttachmen=_ref5.resizeAttachments,resizeAttachments=void 0===_ref5$resizeAttachmen||_ref5$resizeAttachmen,newAttachments={};clearAttachments&&Object.keys(this.attachments).forEach((function(key){newAttachments[key]=null})),Object.assign(newAttachments,attachments);var prevHandle=this.gl.bindFramebuffer(36160,this.handle);for(var key in newAttachments){Object(_utils__WEBPACK_IMPORTED_MODULE_18__.a)(void 0!==key,"Misspelled framebuffer binding point?");var attachment=Number(key),descriptor=newAttachments[attachment],object=descriptor;if(object)if(object instanceof _renderbuffer__WEBPACK_IMPORTED_MODULE_12__.a)this._attachRenderbuffer({attachment:attachment,renderbuffer:object});else if(Array.isArray(descriptor)){var _descriptor=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(descriptor,3),texture=_descriptor[0],_descriptor$=_descriptor[1],layer=void 0===_descriptor$?0:_descriptor$,_descriptor$2=_descriptor[2],level=void 0===_descriptor$2?0:_descriptor$2;object=texture,this._attachTexture({attachment:attachment,texture:texture,layer:layer,level:level})}else this._attachTexture({attachment:attachment,texture:object,layer:0,level:0});else this._unattach(attachment);resizeAttachments&&object&&object.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,prevHandle||null),Object.assign(this.attachments,attachments),Object.keys(this.attachments).filter((function(key){return!_this2.attachments[key]})).forEach((function(key){delete _this2.attachments[key]}))}},{key:"checkStatus",value:function checkStatus(){this.gl;var status=this.getStatus();if(36053!==status)throw new Error(_getFrameBufferStatus(status));return this}},{key:"getStatus",value:function getStatus(){var gl=this.gl,prevHandle=gl.bindFramebuffer(36160,this.handle),status=gl.checkFramebufferStatus(36160);return gl.bindFramebuffer(36160,prevHandle||null),status}},{key:"clear",value:function clear(){var _ref6=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},color=_ref6.color,depth=_ref6.depth,stencil=_ref6.stencil,_ref6$drawBuffers=_ref6.drawBuffers,drawBuffers=void 0===_ref6$drawBuffers?[]:_ref6$drawBuffers,prevHandle=this.gl.bindFramebuffer(36160,this.handle);return(color||depth||stencil)&&Object(_clear__WEBPACK_IMPORTED_MODULE_13__.a)(this.gl,{color:color,depth:depth,stencil:stencil}),drawBuffers.forEach((function(value,drawBuffer){Object(_clear__WEBPACK_IMPORTED_MODULE_13__.b)({drawBuffer:drawBuffer,value:value})})),this.gl.bindFramebuffer(36160,prevHandle||null),this}},{key:"readPixels",value:function readPixels(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_9__.g.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function readPixelsToBuffer(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_9__.g.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function copyToDataUrl(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_9__.g.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function copyToImage(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_9__.g.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function copyToTexture(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_9__.g.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function blit(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_9__.g.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function invalidate(_ref7){var _ref7$attachments=_ref7.attachments,attachments=void 0===_ref7$attachments?[]:_ref7$attachments,_ref7$x=_ref7.x,x=void 0===_ref7$x?0:_ref7$x,_ref7$y=_ref7.y,y=void 0===_ref7$y?0:_ref7$y,width=_ref7.width,height=_ref7.height,gl=this.gl;Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_16__.a)(gl);var prevHandle=gl.bindFramebuffer(36008,this.handle);return 0===x&&0===y&&void 0===width&&void 0===height?gl.invalidateFramebuffer(36008,attachments):gl.invalidateFramebuffer(36008,attachments,x,y,width,height),gl.bindFramebuffer(36008,prevHandle),this}},{key:"getAttachmentParameter",value:function getAttachmentParameter(attachment,pname,keys){var value=this._getAttachmentParameterFallback(pname);return null===value&&(this.gl.bindFramebuffer(36160,this.handle),value=this.gl.getFramebufferAttachmentParameter(36160,attachment,pname),this.gl.bindFramebuffer(36160,null)),keys&&value>1e3&&(value=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_17__.a)(this.gl,value)),value}},{key:"getAttachmentParameters",value:function getAttachmentParameters(){var attachment=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,keys=arguments.length>1?arguments[1]:void 0,parameters=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],values={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=parameters[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var pname=_step2.value,key=keys?Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_17__.a)(this.gl,pname):pname;values[key]=this.getAttachmentParameter(attachment,pname,keys)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return values}},{key:"getParameters",value:function getParameters(){for(var keys=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],attachments=Object.keys(this.attachments),parameters={},_i=0,_attachments=attachments;_i<_attachments.length;_i++){var attachmentName=_attachments[_i],attachment=Number(attachmentName),key=keys?Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_17__.a)(this.gl,attachment):attachment;parameters[key]=this.getAttachmentParameters(attachment,keys)}return parameters}},{key:"show",value:function show(){return"undefined"!=typeof window&&window.open(Object(_copy_and_blit_js__WEBPACK_IMPORTED_MODULE_14__.a)(this),"luma-debug-texture"),this}},{key:"log",value:function log(){var logLevel=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,message=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(logLevel>_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_9__.g.level||"undefined"==typeof window)return this;message=message||"Framebuffer ".concat(this.id);var image=Object(_copy_and_blit_js__WEBPACK_IMPORTED_MODULE_14__.a)(this,{maxHeight:100});return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_9__.g.image({logLevel:logLevel,message:message,image:image},message)(),this}},{key:"bind",value:function bind(){var _ref8=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref8$target=_ref8.target,target=void 0===_ref8$target?36160:_ref8$target;return this.gl.bindFramebuffer(target,this.handle),this}},{key:"unbind",value:function unbind(){var _ref9=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref9$target=_ref9.target,target=void 0===_ref9$target?36160:_ref9$target;return this.gl.bindFramebuffer(target,null),this}},{key:"_createDefaultAttachments",value:function _createDefaultAttachments(color,depth,stencil,width,height){var _parameters,defaultAttachments=null;color&&((defaultAttachments=defaultAttachments||{})[36064]=new _texture_2d__WEBPACK_IMPORTED_MODULE_11__.a(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:width,height:height,mipmaps:!1,parameters:(_parameters={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_parameters,10241,9729),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_parameters,10240,9729),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_parameters,10242,33071),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_parameters,10243,33071),_parameters)}),this.ownResources.push(defaultAttachments[36064]));return depth&&stencil?((defaultAttachments=defaultAttachments||{})[33306]=new _renderbuffer__WEBPACK_IMPORTED_MODULE_12__.a(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:width,height:111}),this.ownResources.push(defaultAttachments[33306])):depth?((defaultAttachments=defaultAttachments||{})[36096]=new _renderbuffer__WEBPACK_IMPORTED_MODULE_12__.a(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:width,height:height}),this.ownResources.push(defaultAttachments[36096])):stencil&&Object(_utils__WEBPACK_IMPORTED_MODULE_18__.a)(!1),defaultAttachments}},{key:"_unattach",value:function _unattach(attachment){var oldAttachment=this.attachments[attachment];oldAttachment&&(oldAttachment instanceof _renderbuffer__WEBPACK_IMPORTED_MODULE_12__.a?this.gl.framebufferRenderbuffer(36160,attachment,36161,null):this.gl.framebufferTexture2D(36160,attachment,3553,null,0),delete this.attachments[attachment])}},{key:"_attachRenderbuffer",value:function _attachRenderbuffer(_ref10){var _ref10$attachment=_ref10.attachment,attachment=void 0===_ref10$attachment?36064:_ref10$attachment,renderbuffer=_ref10.renderbuffer;this.gl.framebufferRenderbuffer(36160,attachment,36161,renderbuffer.handle),this.attachments[attachment]=renderbuffer}},{key:"_attachTexture",value:function _attachTexture(_ref11){var _ref11$attachment=_ref11.attachment,attachment=void 0===_ref11$attachment?36064:_ref11$attachment,texture=_ref11.texture,layer=_ref11.layer,level=_ref11.level,gl=this.gl;switch(gl.bindTexture(texture.target,texture.handle),texture.target){case 35866:case 32879:gl.framebufferTextureLayer(36160,attachment,texture.target,level,layer);break;case 34067:var face=function mapIndexToCubeMapFace(layer){return layer<34069?layer+34069:layer}(layer);gl.framebufferTexture2D(36160,attachment,face,texture.handle,level);break;case 3553:gl.framebufferTexture2D(36160,attachment,3553,texture.handle,level);break;default:Object(_utils__WEBPACK_IMPORTED_MODULE_18__.a)(!1,"Illegal texture type")}gl.bindTexture(texture.target,null),this.attachments[attachment]=texture}},{key:"_setReadBuffer",value:function _setReadBuffer(readBuffer){var gl=this.gl;Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_9__.f)(gl)?gl.readBuffer(readBuffer):Object(_utils__WEBPACK_IMPORTED_MODULE_18__.a)(36064===readBuffer||1029===readBuffer,"Multiple render targets not supported"),this.readBuffer=readBuffer}},{key:"_setDrawBuffers",value:function _setDrawBuffers(drawBuffers){var gl=this.gl;if(Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_9__.f)(gl))gl.drawBuffers(drawBuffers);else{var ext=gl.getExtension("WEBGL.draw_buffers");ext?ext.drawBuffersWEBGL(drawBuffers):Object(_utils__WEBPACK_IMPORTED_MODULE_18__.a)(1===drawBuffers.length&&(36064===drawBuffers[0]||1029===drawBuffers[0]),"Multiple render targets not supported")}this.drawBuffers=drawBuffers}},{key:"_getAttachmentParameterFallback",value:function _getAttachmentParameterFallback(pname){var caps=Object(_features__WEBPACK_IMPORTED_MODULE_15__.a)(this.gl);switch(pname){case 36052:return caps.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return caps.WEBGL2?null:8;case 33297:return caps.WEBGL2?null:5125;case 33296:return caps.WEBGL2||caps.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function _createHandle(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function _bindHandle(handle){return this.gl.bindFramebuffer(36160,handle)}},{key:"color",get:function get(){return this.attachments[36064]||null}},{key:"texture",get:function get(){return this.attachments[36064]||null}},{key:"depth",get:function get(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function get(){return this.attachments[36128]||this.attachments[33306]||null}}]),Framebuffer}(_resource__WEBPACK_IMPORTED_MODULE_10__.a);function _getFrameBufferStatus(status){return(Framebuffer.STATUS||{})[status]||"Framebuffer error ".concat(status)}Framebuffer.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Transition}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);function noop(){}var DEFAULT_SETTINGS={onStart:noop,onUpdate:noop,onInterrupt:noop,onEnd:noop},Transition=function(){function Transition(timeline){Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Transition),this._inProgress=!1,this._handle=null,this.timeline=timeline,this.settings={}}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Transition,[{key:"start",value:function start(props){this.cancel(),this.settings=Object.assign({},DEFAULT_SETTINGS,props),this._inProgress=!0,this.settings.onStart(this)}},{key:"end",value:function end(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function cancel(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function update(){if(!this._inProgress)return!1;if(null===this._handle){var timeline=this.timeline,settings=this.settings;this._handle=timeline.addChannel({delay:timeline.getTime(),duration:settings.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}},{key:"_onUpdate",value:function _onUpdate(){}},{key:"inProgress",get:function get(){return this._inProgress}}]),Transition}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createIterable})),__webpack_require__.d(__webpack_exports__,"c",(function(){return isAsyncIterable})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getAccessorFromBuffer}));var EMPTY_ARRAY=[],placeholderArray=[];function createIterable(data){var startRow=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,endRow=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,iterable=EMPTY_ARRAY,objectInfo={index:-1,data:data,target:[]};return data?"function"==typeof data[Symbol.iterator]?iterable=data:data.length>0&&(placeholderArray.length=data.length,iterable=placeholderArray):iterable=EMPTY_ARRAY,(startRow>0||Number.isFinite(endRow))&&(iterable=(Array.isArray(iterable)?iterable:Array.from(iterable)).slice(startRow,endRow),objectInfo.index=startRow-1),{iterable:iterable,objectInfo:objectInfo}}function isAsyncIterable(data){return data&&data[Symbol.asyncIterator]}function getAccessorFromBuffer(typedArray,_ref){var size=_ref.size,stride=_ref.stride,offset=_ref.offset,startIndices=_ref.startIndices,nested=_ref.nested,bytesPerElement=typedArray.BYTES_PER_ELEMENT,elementStride=stride?stride/bytesPerElement:size,elementOffset=offset?offset/bytesPerElement:0,vertexCount=Math.floor((typedArray.length-elementOffset)/elementStride);return function(_,_ref2){var index=_ref2.index,target=_ref2.target;if(!startIndices){for(var sourceIndex=index*elementStride+elementOffset,j=0;j<size;j++)target[j]=typedArray[sourceIndex+j];return target}var result,startIndex=startIndices[index],endIndex=startIndices[index+1]||vertexCount;if(nested){result=new Array(endIndex-startIndex);for(var i=startIndex;i<endIndex;i++){var _sourceIndex=i*elementStride+elementOffset;target=new Array(size);for(var _j=0;_j<size;_j++)target[_j]=typedArray[_sourceIndex+_j];result[i-startIndex]=target}}else if(elementStride===size)result=typedArray.subarray(startIndex*size+elementOffset,endIndex*size+elementOffset);else{result=new typedArray.constructor((endIndex-startIndex)*size);for(var targetIndex=0,_i=startIndex;_i<endIndex;_i++)for(var _sourceIndex2=_i*elementStride+elementOffset,_j2=0;_j2<size;_j2++)result[targetIndex++]=typedArray[_sourceIndex2+_j2]}return result}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _formatDecimal_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(128);__webpack_exports__.a=function(x){return(x=Object(_formatDecimal_js__WEBPACK_IMPORTED_MODULE_0__.a)(Math.abs(x)))?x[1]:NaN}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return VERTEX_SHADER})),__webpack_require__.d(__webpack_exports__,"a",(function(){return FRAGMENT_SHADER}));var VERTEX_SHADER="vs",FRAGMENT_SHADER="fs"},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(227)},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(302)},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(192),min=Math.min;module.exports=function(argument){return argument>0?min(toInteger(argument),9007199254740991):0}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),global=__webpack_require__(30),getBuiltIn=__webpack_require__(135),IS_PURE=__webpack_require__(162),DESCRIPTORS=__webpack_require__(49),NATIVE_SYMBOL=__webpack_require__(250),USE_SYMBOL_AS_UID=__webpack_require__(336),fails=__webpack_require__(35),has=__webpack_require__(50),isArray=__webpack_require__(164),isObject=__webpack_require__(40),anObject=__webpack_require__(51),toObject=__webpack_require__(70),toIndexedObject=__webpack_require__(105),toPrimitive=__webpack_require__(161),createPropertyDescriptor=__webpack_require__(160),nativeObjectCreate=__webpack_require__(136),objectKeys=__webpack_require__(165),getOwnPropertyNamesModule=__webpack_require__(191),getOwnPropertyNamesExternal=__webpack_require__(565),getOwnPropertySymbolsModule=__webpack_require__(248),getOwnPropertyDescriptorModule=__webpack_require__(159),definePropertyModule=__webpack_require__(52),propertyIsEnumerableModule=__webpack_require__(187),createNonEnumerableProperty=__webpack_require__(78),redefine=__webpack_require__(69),shared=__webpack_require__(244),sharedKey=__webpack_require__(189),hiddenKeys=__webpack_require__(163),uid=__webpack_require__(190),wellKnownSymbol=__webpack_require__(39),wrappedWellKnownSymbolModule=__webpack_require__(340),defineWellKnownSymbol=__webpack_require__(45),setToStringTag=__webpack_require__(120),InternalStateModule=__webpack_require__(107),$forEach=__webpack_require__(108).forEach,HIDDEN=sharedKey("hidden"),TO_PRIMITIVE=wellKnownSymbol("toPrimitive"),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("Symbol"),ObjectPrototype=Object.prototype,$Symbol=global.Symbol,$stringify=getBuiltIn("JSON","stringify"),nativeGetOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,nativeDefineProperty=definePropertyModule.f,nativeGetOwnPropertyNames=getOwnPropertyNamesExternal.f,nativePropertyIsEnumerable=propertyIsEnumerableModule.f,AllSymbols=shared("symbols"),ObjectPrototypeSymbols=shared("op-symbols"),StringToSymbolRegistry=shared("string-to-symbol-registry"),SymbolToStringRegistry=shared("symbol-to-string-registry"),WellKnownSymbolsStore=shared("wks"),QObject=global.QObject,USE_SETTER=!QObject||!QObject.prototype||!QObject.prototype.findChild,setSymbolDescriptor=DESCRIPTORS&&fails((function(){return 7!=nativeObjectCreate(nativeDefineProperty({},"a",{get:function(){return nativeDefineProperty(this,"a",{value:7}).a}})).a}))?function(O,P,Attributes){var ObjectPrototypeDescriptor=nativeGetOwnPropertyDescriptor(ObjectPrototype,P);ObjectPrototypeDescriptor&&delete ObjectPrototype[P],nativeDefineProperty(O,P,Attributes),ObjectPrototypeDescriptor&&O!==ObjectPrototype&&nativeDefineProperty(ObjectPrototype,P,ObjectPrototypeDescriptor)}:nativeDefineProperty,wrap=function(tag,description){var symbol=AllSymbols[tag]=nativeObjectCreate($Symbol.prototype);return setInternalState(symbol,{type:"Symbol",tag:tag,description:description}),DESCRIPTORS||(symbol.description=description),symbol},isSymbol=USE_SYMBOL_AS_UID?function(it){return"symbol"==typeof it}:function(it){return Object(it)instanceof $Symbol},$defineProperty=function defineProperty(O,P,Attributes){O===ObjectPrototype&&$defineProperty(ObjectPrototypeSymbols,P,Attributes),anObject(O);var key=toPrimitive(P,!0);return anObject(Attributes),has(AllSymbols,key)?(Attributes.enumerable?(has(O,HIDDEN)&&O[HIDDEN][key]&&(O[HIDDEN][key]=!1),Attributes=nativeObjectCreate(Attributes,{enumerable:createPropertyDescriptor(0,!1)})):(has(O,HIDDEN)||nativeDefineProperty(O,HIDDEN,createPropertyDescriptor(1,{})),O[HIDDEN][key]=!0),setSymbolDescriptor(O,key,Attributes)):nativeDefineProperty(O,key,Attributes)},$defineProperties=function defineProperties(O,Properties){anObject(O);var properties=toIndexedObject(Properties),keys=objectKeys(properties).concat($getOwnPropertySymbols(properties));return $forEach(keys,(function(key){DESCRIPTORS&&!$propertyIsEnumerable.call(properties,key)||$defineProperty(O,key,properties[key])})),O},$propertyIsEnumerable=function propertyIsEnumerable(V){var P=toPrimitive(V,!0),enumerable=nativePropertyIsEnumerable.call(this,P);return!(this===ObjectPrototype&&has(AllSymbols,P)&&!has(ObjectPrototypeSymbols,P))&&(!(enumerable||!has(this,P)||!has(AllSymbols,P)||has(this,HIDDEN)&&this[HIDDEN][P])||enumerable)},$getOwnPropertyDescriptor=function getOwnPropertyDescriptor(O,P){var it=toIndexedObject(O),key=toPrimitive(P,!0);if(it!==ObjectPrototype||!has(AllSymbols,key)||has(ObjectPrototypeSymbols,key)){var descriptor=nativeGetOwnPropertyDescriptor(it,key);return!descriptor||!has(AllSymbols,key)||has(it,HIDDEN)&&it[HIDDEN][key]||(descriptor.enumerable=!0),descriptor}},$getOwnPropertyNames=function getOwnPropertyNames(O){var names=nativeGetOwnPropertyNames(toIndexedObject(O)),result=[];return $forEach(names,(function(key){has(AllSymbols,key)||has(hiddenKeys,key)||result.push(key)})),result},$getOwnPropertySymbols=function getOwnPropertySymbols(O){var IS_OBJECT_PROTOTYPE=O===ObjectPrototype,names=nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE?ObjectPrototypeSymbols:toIndexedObject(O)),result=[];return $forEach(names,(function(key){!has(AllSymbols,key)||IS_OBJECT_PROTOTYPE&&!has(ObjectPrototype,key)||result.push(AllSymbols[key])})),result};(NATIVE_SYMBOL||(redefine(($Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor");var description=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,tag=uid(description),setter=function(value){this===ObjectPrototype&&setter.call(ObjectPrototypeSymbols,value),has(this,HIDDEN)&&has(this[HIDDEN],tag)&&(this[HIDDEN][tag]=!1),setSymbolDescriptor(this,tag,createPropertyDescriptor(1,value))};return DESCRIPTORS&&USE_SETTER&&setSymbolDescriptor(ObjectPrototype,tag,{configurable:!0,set:setter}),wrap(tag,description)}).prototype,"toString",(function toString(){return getInternalState(this).tag})),redefine($Symbol,"withoutSetter",(function(description){return wrap(uid(description),description)})),propertyIsEnumerableModule.f=$propertyIsEnumerable,definePropertyModule.f=$defineProperty,getOwnPropertyDescriptorModule.f=$getOwnPropertyDescriptor,getOwnPropertyNamesModule.f=getOwnPropertyNamesExternal.f=$getOwnPropertyNames,getOwnPropertySymbolsModule.f=$getOwnPropertySymbols,wrappedWellKnownSymbolModule.f=function(name){return wrap(wellKnownSymbol(name),name)},DESCRIPTORS&&(nativeDefineProperty($Symbol.prototype,"description",{configurable:!0,get:function description(){return getInternalState(this).description}}),IS_PURE||redefine(ObjectPrototype,"propertyIsEnumerable",$propertyIsEnumerable,{unsafe:!0}))),$({global:!0,wrap:!0,forced:!NATIVE_SYMBOL,sham:!NATIVE_SYMBOL},{Symbol:$Symbol}),$forEach(objectKeys(WellKnownSymbolsStore),(function(name){defineWellKnownSymbol(name)})),$({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL},{for:function(key){var string=String(key);if(has(StringToSymbolRegistry,string))return StringToSymbolRegistry[string];var symbol=$Symbol(string);return StringToSymbolRegistry[string]=symbol,SymbolToStringRegistry[symbol]=string,symbol},keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(sym+" is not a symbol");if(has(SymbolToStringRegistry,sym))return SymbolToStringRegistry[sym]},useSetter:function(){USE_SETTER=!0},useSimple:function(){USE_SETTER=!1}}),$({target:"Object",stat:!0,forced:!NATIVE_SYMBOL,sham:!DESCRIPTORS},{create:function create(O,Properties){return void 0===Properties?nativeObjectCreate(O):$defineProperties(nativeObjectCreate(O),Properties)},defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor}),$({target:"Object",stat:!0,forced:!NATIVE_SYMBOL},{getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$({target:"Object",stat:!0,forced:fails((function(){getOwnPropertySymbolsModule.f(1)}))},{getOwnPropertySymbols:function getOwnPropertySymbols(it){return getOwnPropertySymbolsModule.f(toObject(it))}}),$stringify)&&$({target:"JSON",stat:!0,forced:!NATIVE_SYMBOL||fails((function(){var symbol=$Symbol();return"[null]"!=$stringify([symbol])||"{}"!=$stringify({a:symbol})||"{}"!=$stringify(Object(symbol))}))},{stringify:function stringify(it,replacer,space){for(var $replacer,args=[it],index=1;arguments.length>index;)args.push(arguments[index++]);if($replacer=replacer,(isObject(replacer)||void 0!==it)&&!isSymbol(it))return isArray(replacer)||(replacer=function(key,value){if("function"==typeof $replacer&&(value=$replacer.call(this,key,value)),!isSymbol(value))return value}),args[1]=replacer,$stringify.apply(null,args)}});$Symbol.prototype[TO_PRIMITIVE]||createNonEnumerableProperty($Symbol.prototype,TO_PRIMITIVE,$Symbol.prototype.valueOf),setToStringTag($Symbol,"Symbol"),hiddenKeys[HIDDEN]=!0},function(module,exports,__webpack_require__){(function(global){var win;win="undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{},module.exports=win}).call(this,__webpack_require__(43))},function(module,exports,__webpack_require__){"use strict";var toIndexedObject=__webpack_require__(105),addToUnscopables=__webpack_require__(255),Iterators=__webpack_require__(169),InternalStateModule=__webpack_require__(107),defineIterator=__webpack_require__(257),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("Array Iterator");module.exports=defineIterator(Array,"Array",(function(iterated,kind){setInternalState(this,{type:"Array Iterator",target:toIndexedObject(iterated),index:0,kind:kind})}),(function(){var state=getInternalState(this),target=state.target,kind=state.kind,index=state.index++;return!target||index>=target.length?(state.target=void 0,{value:void 0,done:!0}):"keys"==kind?{value:index,done:!1}:"values"==kind?{value:target[index],done:!1}:{value:[index,target[index]],done:!1}}),"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},function(module,exports){module.exports=function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return scale})),__webpack_require__.d(__webpack_exports__,"b",(function(){return transformMat4}));var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);function scale(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out}function transformMat4(out,a,m){var x=a[0],y=a[1],z=a[2],w=a[3];return out[0]=m[0]*x+m[4]*y+m[8]*z+m[12]*w,out[1]=m[1]*x+m[5]*y+m[9]*z+m[13]*w,out[2]=m[2]*x+m[6]*y+m[10]*z+m[14]*w,out[3]=m[3]*x+m[7]*y+m[11]*z+m[15]*w,out}var vec;vec=function create(){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.a(4);return _common_js__WEBPACK_IMPORTED_MODULE_0__.a!=Float32Array&&(out[0]=0,out[1]=0,out[2]=0,out[3]=0),out}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return getPrimitiveDrawMode})),__webpack_require__.d(__webpack_exports__,"a",(function(){return decomposeCompositeGLType})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getCompositeGLType}));var _COMPOSITE_GL_TYPES,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(23),COMPOSITE_GL_TYPES=(_COMPOSITE_GL_TYPES={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,5126,[5126,1,"float"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35664,[5126,2,"vec2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35665,[5126,3,"vec3"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35666,[5126,4,"vec4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,5124,[5124,1,"int"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35667,[5124,2,"ivec2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35668,[5124,3,"ivec3"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35669,[5124,4,"ivec4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,5125,[5125,1,"uint"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,36294,[5125,2,"uvec2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,36295,[5125,3,"uvec3"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,36296,[5125,4,"uvec4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35670,[5126,1,"bool"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35671,[5126,2,"bvec2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35672,[5126,3,"bvec3"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35673,[5126,4,"bvec4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35674,[5126,8,"mat2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35685,[5126,8,"mat2x3"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35686,[5126,8,"mat2x4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35675,[5126,12,"mat3"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35687,[5126,12,"mat3x2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35688,[5126,12,"mat3x4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35676,[5126,16,"mat4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35689,[5126,16,"mat4x2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35690,[5126,16,"mat4x3"]),_COMPOSITE_GL_TYPES);function getPrimitiveDrawMode(drawMode){switch(drawMode){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Object(_utils__WEBPACK_IMPORTED_MODULE_2__.a)(!1),0}}function decomposeCompositeGLType(compositeGLType){var typeAndSize=COMPOSITE_GL_TYPES[compositeGLType];if(!typeAndSize)return null;var _typeAndSize=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(typeAndSize,2);return{type:_typeAndSize[0],components:_typeAndSize[1]}}function getCompositeGLType(type,components){switch(type){case 5120:case 5121:case 5122:case 5123:type=5126}for(var glType in COMPOSITE_GL_TYPES){var _COMPOSITE_GL_TYPES$g=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(COMPOSITE_GL_TYPES[glType],3),compType=_COMPOSITE_GL_TYPES$g[0],compComponents=_COMPOSITE_GL_TYPES$g[1],name=_COMPOSITE_GL_TYPES$g[2];if(compType===type&&compComponents===components)return{glType:glType,name:name}}return null}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isLoaderObject})),__webpack_require__.d(__webpack_exports__,"b",(function(){return normalizeLoader}));var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_loaders_gl_loader_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(181);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function isLoaderObject(loader){if(!loader)return!1;Array.isArray(loader)&&(loader=loader[0]);var hasParser=loader.parseTextSync||loader.parseSync||loader.parse||loader.parseStream||loader.parseInBatches,loaderOptions=loader.options&&loader.options[loader.id];return hasParser=hasParser||loaderOptions&&loaderOptions.workerUrl}function normalizeLoader(loader){var options;return Object(_loaders_gl_loader_utils__WEBPACK_IMPORTED_MODULE_1__.a)(loader,"null loader"),Object(_loaders_gl_loader_utils__WEBPACK_IMPORTED_MODULE_1__.a)(isLoaderObject(loader),"invalid loader"),Array.isArray(loader)&&(options=loader[1],loader=_objectSpread(_objectSpread({},loader=loader[0]),{},{options:_objectSpread(_objectSpread({},loader.options),options)})),loader.extension&&(loader.extensions=loader.extensions||loader.extension,delete loader.extension),Array.isArray(loader.extensions)||(loader.extensions=[loader.extensions]),Object(_loaders_gl_loader_utils__WEBPACK_IMPORTED_MODULE_1__.a)(loader.extensions&&loader.extensions.length>0&&loader.extensions[0]),loader.parseTextSync&&(loader.text=!0),loader.text||(loader.binary=!0),loader}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),TypedArrayManager=function(){function TypedArrayManager(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$overAlloc=_ref.overAlloc,overAlloc=void 0===_ref$overAlloc?2:_ref$overAlloc,_ref$poolSize=_ref.poolSize,poolSize=void 0===_ref$poolSize?100:_ref$poolSize;Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,TypedArrayManager),this.overAlloc=overAlloc,this.poolSize=poolSize,this._pool=[]}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(TypedArrayManager,[{key:"allocate",value:function allocate(typedArray,count,_ref2){var _ref2$size=_ref2.size,size=void 0===_ref2$size?1:_ref2$size,type=_ref2.type,_ref2$padding=_ref2.padding,padding=void 0===_ref2$padding?0:_ref2$padding,_ref2$copy=_ref2.copy,copy=void 0!==_ref2$copy&&_ref2$copy,_ref2$initialize=_ref2.initialize,initialize=void 0!==_ref2$initialize&&_ref2$initialize,Type=type||typedArray&&typedArray.constructor||Float32Array,newSize=count*size+padding;if(ArrayBuffer.isView(typedArray)){if(newSize<=typedArray.length)return typedArray;if(newSize*typedArray.BYTES_PER_ELEMENT<=typedArray.buffer.byteLength)return new Type(typedArray.buffer,0,newSize)}var newArray=this._allocate(Type,newSize,initialize);return typedArray&&copy?newArray.set(typedArray):initialize||newArray.fill(0,0,4),this._release(typedArray),newArray}},{key:"release",value:function release(typedArray){this._release(typedArray)}},{key:"_allocate",value:function _allocate(Type,size,initialize){size=Math.max(Math.ceil(size*this.overAlloc),1);var pool=this._pool,byteLength=Type.BYTES_PER_ELEMENT*size,i=pool.findIndex((function(b){return b.byteLength>=byteLength}));if(i>=0){var array=new Type(pool.splice(i,1)[0],0,size);return initialize&&array.fill(0),array}return new Type(size)}},{key:"_release",value:function _release(typedArray){if(ArrayBuffer.isView(typedArray)){var pool=this._pool,buffer=typedArray.buffer,byteLength=buffer.byteLength,i=pool.findIndex((function(b){return b.byteLength>=byteLength}));i<0?pool.push(buffer):(i>0||pool.length<this.poolSize)&&pool.splice(i,0,buffer),pool.length>this.poolSize&&pool.shift()}}}]),TypedArrayManager}();__webpack_exports__.a=new TypedArrayManager},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return TEXTURE_FORMATS})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DATA_FORMAT_CHANNELS})),__webpack_require__.d(__webpack_exports__,"c",(function(){return TYPE_SIZES})),__webpack_require__.d(__webpack_exports__,"d",(function(){return isFormatSupported})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isLinearFilteringSupported}));var _TEXTURE_FORMATS,_DATA_FORMAT_CHANNELS,_TYPE_SIZES,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),TEXTURE_FORMATS=(_TEXTURE_FORMATS={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,6407,{dataFormat:6407,types:[5121,33635]}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,6406,{dataFormat:6406,types:[5121]}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,6409,{dataFormat:6409,types:[5121]}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,6410,{dataFormat:6410,types:[5121]}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,34836,{dataFormat:6408,types:[5126],gl2:!0}),_TEXTURE_FORMATS),DATA_FORMAT_CHANNELS=(_DATA_FORMAT_CHANNELS={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6403,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,36244,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,33319,2),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,33320,2),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6407,3),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,36248,3),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6408,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,36249,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6402,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,34041,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6406,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6409,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6410,2),_DATA_FORMAT_CHANNELS),TYPE_SIZES=(_TYPE_SIZES={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5126,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5125,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5124,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5123,2),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5122,2),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5131,2),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5120,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5121,1),_TYPE_SIZES);function isFormatSupported(gl,format){var info=TEXTURE_FORMATS[format];if(!info)return!1;if(void 0===info.gl1&&void 0===info.gl2)return!0;var value=Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_1__.f)(gl)&&info.gl2||info.gl1;return"string"==typeof value?gl.getExtension(value):value}function isLinearFilteringSupported(gl,format){var info=TEXTURE_FORMATS[format];switch(info&&info.types[0]){case 5126:return gl.getExtension("OES_texture_float_linear");case 5131:return gl.getExtension("OES_texture_half_float_linear");default:return!0}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return hue})),__webpack_require__.d(__webpack_exports__,"b",(function(){return gamma})),__webpack_require__.d(__webpack_exports__,"a",(function(){return nogamma}));var _constant_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(152);function linear(a,d){return function(t){return a+t*d}}function hue(a,b){var d=b-a;return d?linear(a,d>180||d<-180?d-360*Math.round(d/360):d):Object(_constant_js__WEBPACK_IMPORTED_MODULE_0__.a)(isNaN(a)?b:a)}function gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):Object(_constant_js__WEBPACK_IMPORTED_MODULE_0__.a)(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):Object(_constant_js__WEBPACK_IMPORTED_MODULE_0__.a)(isNaN(a)?b:a)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getGLTypeFromTypedArray})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getTypedArrayFromGLType})),__webpack_require__.d(__webpack_exports__,"a",(function(){return flipRows})),__webpack_require__.d(__webpack_exports__,"d",(function(){return scalePixels}));function getGLTypeFromTypedArray(arrayOrType){switch(ArrayBuffer.isView(arrayOrType)?arrayOrType.constructor:arrayOrType){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function getTypedArrayFromGLType(glType){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$clamped=_ref.clamped,clamped=void 0===_ref$clamped||_ref$clamped;switch(glType){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return clamped?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function flipRows(_ref2){var data=_ref2.data,width=_ref2.width,height=_ref2.height,_ref2$bytesPerPixel=_ref2.bytesPerPixel,bytesPerPixel=void 0===_ref2$bytesPerPixel?4:_ref2$bytesPerPixel,temp=_ref2.temp,bytesPerRow=width*bytesPerPixel;temp=temp||new Uint8Array(bytesPerRow);for(var y=0;y<height/2;++y){var topOffset=y*bytesPerRow,bottomOffset=(height-y-1)*bytesPerRow;temp.set(data.subarray(topOffset,topOffset+bytesPerRow)),data.copyWithin(topOffset,bottomOffset,bottomOffset+bytesPerRow),data.set(temp,bottomOffset)}}function scalePixels(_ref3){for(var data=_ref3.data,width=_ref3.width,height=_ref3.height,newWidth=Math.round(width/2),newHeight=Math.round(height/2),newData=new Uint8Array(newWidth*newHeight*4),y=0;y<newHeight;y++)for(var x=0;x<newWidth;x++)for(var c=0;c<4;c++)newData[4*(y*newWidth+x)+c]=data[4*(2*y*width+2*x)+c];return{data:newData,width:newWidth,height:newHeight}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return assertWebGLContext})),__webpack_require__.d(__webpack_exports__,"a",(function(){return assertWebGL2Context}));var _utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9);function assertWebGLContext(gl){Object(_utils__WEBPACK_IMPORTED_MODULE_0__.a)(Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_1__.e)(gl),"Invalid WebGLRenderingContext")}function assertWebGL2Context(gl){Object(_utils__WEBPACK_IMPORTED_MODULE_0__.a)(Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_1__.f)(gl),"Requires WebGL2")}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),$String=GetIntrinsic("%String%"),$TypeError=GetIntrinsic("%TypeError%");module.exports=function ToString(argument){if("symbol"==typeof argument)throw new $TypeError("Cannot convert a Symbol value to a string");return $String(argument)}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),callBound=__webpack_require__(32),$apply=GetIntrinsic("%Reflect.apply%",!0)||callBound("%Function.prototype.apply%");module.exports=function Call(F,V){var args=arguments.length>2?arguments[2]:[];return $apply(F,V,args)}},function(module,exports,__webpack_require__){var IndexedObject=__webpack_require__(188),requireObjectCoercible=__webpack_require__(106);module.exports=function(it){return IndexedObject(requireObjectCoercible(it))}},function(module,exports){module.exports=function(it){if(null==it)throw TypeError("Can't call method on "+it);return it}},function(module,exports,__webpack_require__){var set,get,has,NATIVE_WEAK_MAP=__webpack_require__(331),global=__webpack_require__(30),isObject=__webpack_require__(40),createNonEnumerableProperty=__webpack_require__(78),objectHas=__webpack_require__(50),sharedKey=__webpack_require__(189),hiddenKeys=__webpack_require__(163),WeakMap=global.WeakMap;if(NATIVE_WEAK_MAP){var store=new WeakMap,wmget=store.get,wmhas=store.has,wmset=store.set;set=function(it,metadata){return wmset.call(store,it,metadata),metadata},get=function(it){return wmget.call(store,it)||{}},has=function(it){return wmhas.call(store,it)}}else{var STATE=sharedKey("state");hiddenKeys[STATE]=!0,set=function(it,metadata){return createNonEnumerableProperty(it,STATE,metadata),metadata},get=function(it){return objectHas(it,STATE)?it[STATE]:{}},has=function(it){return objectHas(it,STATE)}}module.exports={set:set,get:get,has:has,enforce:function(it){return has(it)?get(it):set(it,{})},getterFor:function(TYPE){return function(it){var state;if(!isObject(it)||(state=get(it)).type!==TYPE)throw TypeError("Incompatible receiver, "+TYPE+" required");return state}}}},function(module,exports,__webpack_require__){var bind=__webpack_require__(166),IndexedObject=__webpack_require__(188),toObject=__webpack_require__(70),toLength=__webpack_require__(90),arraySpeciesCreate=__webpack_require__(335),push=[].push,createMethod=function(TYPE){var IS_MAP=1==TYPE,IS_FILTER=2==TYPE,IS_SOME=3==TYPE,IS_EVERY=4==TYPE,IS_FIND_INDEX=6==TYPE,NO_HOLES=5==TYPE||IS_FIND_INDEX;return function($this,callbackfn,that,specificCreate){for(var value,result,O=toObject($this),self=IndexedObject(O),boundFunction=bind(callbackfn,that,3),length=toLength(self.length),index=0,create=specificCreate||arraySpeciesCreate,target=IS_MAP?create($this,length):IS_FILTER?create($this,0):void 0;length>index;index++)if((NO_HOLES||index in self)&&(result=boundFunction(value=self[index],index,O),TYPE))if(IS_MAP)target[index]=result;else if(result)switch(TYPE){case 3:return!0;case 5:return value;case 6:return index;case 2:push.call(target,value)}else if(IS_EVERY)return!1;return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:target}};module.exports={forEach:createMethod(0),map:createMethod(1),filter:createMethod(2),some:createMethod(3),every:createMethod(4),find:createMethod(5),findIndex:createMethod(6)}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),DESCRIPTORS=__webpack_require__(49),global=__webpack_require__(30),has=__webpack_require__(50),isObject=__webpack_require__(40),defineProperty=__webpack_require__(52).f,copyConstructorProperties=__webpack_require__(332),NativeSymbol=global.Symbol;if(DESCRIPTORS&&"function"==typeof NativeSymbol&&(!("description"in NativeSymbol.prototype)||void 0!==NativeSymbol().description)){var EmptyStringDescriptionStore={},SymbolWrapper=function Symbol(){var description=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),result=this instanceof SymbolWrapper?new NativeSymbol(description):void 0===description?NativeSymbol():NativeSymbol(description);return""===description&&(EmptyStringDescriptionStore[result]=!0),result};copyConstructorProperties(SymbolWrapper,NativeSymbol);var symbolPrototype=SymbolWrapper.prototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString,native="Symbol(test)"==String(NativeSymbol("test")),regexp=/^Symbol\((.*)\)[^)]+$/;defineProperty(symbolPrototype,"description",{configurable:!0,get:function description(){var symbol=isObject(this)?this.valueOf():this,string=symbolToString.call(symbol);if(has(EmptyStringDescriptionStore,symbol))return"";var desc=native?string.slice(7,-1):string.replace(regexp,"$1");return""===desc?void 0:desc}}),$({global:!0,forced:!0},{Symbol:SymbolWrapper})}},function(module,exports,__webpack_require__){__webpack_require__(45)("iterator")},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),forEach=__webpack_require__(342);$({target:"Array",proto:!0,forced:[].forEach!=forEach},{forEach:forEach})},function(module,exports,__webpack_require__){"use strict";var charAt=__webpack_require__(351).charAt,InternalStateModule=__webpack_require__(107),defineIterator=__webpack_require__(257),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("String Iterator");defineIterator(String,"String",(function(iterated){setInternalState(this,{type:"String Iterator",string:String(iterated),index:0})}),(function next(){var point,state=getInternalState(this),string=state.string,index=state.index;return index>=string.length?{value:void 0,done:!0}:(point=charAt(string,index),state.index+=point.length,{value:point,done:!1})}))},function(module,exports,__webpack_require__){var global=__webpack_require__(30),DOMIterables=__webpack_require__(353),forEach=__webpack_require__(342),createNonEnumerableProperty=__webpack_require__(78);for(var COLLECTION_NAME in DOMIterables){var Collection=global[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype&&CollectionPrototype.forEach!==forEach)try{createNonEnumerableProperty(CollectionPrototype,"forEach",forEach)}catch(error){CollectionPrototype.forEach=forEach}}},function(module,exports,__webpack_require__){var global=__webpack_require__(30),DOMIterables=__webpack_require__(353),ArrayIteratorMethods=__webpack_require__(93),createNonEnumerableProperty=__webpack_require__(78),wellKnownSymbol=__webpack_require__(39),ITERATOR=wellKnownSymbol("iterator"),TO_STRING_TAG=wellKnownSymbol("toStringTag"),ArrayValues=ArrayIteratorMethods.values;for(var COLLECTION_NAME in DOMIterables){var Collection=global[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype){if(CollectionPrototype[ITERATOR]!==ArrayValues)try{createNonEnumerableProperty(CollectionPrototype,ITERATOR,ArrayValues)}catch(error){CollectionPrototype[ITERATOR]=ArrayValues}if(CollectionPrototype[TO_STRING_TAG]||createNonEnumerableProperty(CollectionPrototype,TO_STRING_TAG,COLLECTION_NAME),DOMIterables[COLLECTION_NAME])for(var METHOD_NAME in ArrayIteratorMethods)if(CollectionPrototype[METHOD_NAME]!==ArrayIteratorMethods[METHOD_NAME])try{createNonEnumerableProperty(CollectionPrototype,METHOD_NAME,ArrayIteratorMethods[METHOD_NAME])}catch(error){CollectionPrototype[METHOD_NAME]=ArrayIteratorMethods[METHOD_NAME]}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return setParameters})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getParameters})),__webpack_require__.d(__webpack_exports__,"b",(function(){return resetParameters})),__webpack_require__.d(__webpack_exports__,"d",(function(){return withParameters}));var _webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(73),_track_context_state__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(81),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(16);function setParameters(gl,values){if(Object(_utils__WEBPACK_IMPORTED_MODULE_2__.a)(Object(_utils__WEBPACK_IMPORTED_MODULE_2__.g)(gl),"setParameters requires a WebGL context"),!Object(_utils__WEBPACK_IMPORTED_MODULE_2__.f)(values)){var compositeSetters={};for(var key in values){var glConstant=Number(key),setter=_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.e[key];setter&&("string"==typeof setter?compositeSetters[setter]=!0:setter(gl,values[key],glConstant))}var cache=gl.state&&gl.state.cache;if(cache)for(var _key in compositeSetters){(0,_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.a[_key])(gl,values,cache)}}}function getParameters(gl,parameters){if("number"==typeof(parameters=parameters||_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.c)){var key=parameters,getter=_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.d[key];return getter?getter(gl,key):gl.getParameter(key)}var parameterKeys=Array.isArray(parameters)?parameters:Object.keys(parameters),state={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=parameterKeys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _key2=_step.value,_getter=_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.d[_key2];state[_key2]=_getter?_getter(gl,Number(_key2)):gl.getParameter(Number(_key2))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return state}function resetParameters(gl){setParameters(gl,_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.c)}function withParameters(gl,parameters,func){if(Object(_utils__WEBPACK_IMPORTED_MODULE_2__.f)(parameters))return func(gl);var value,_parameters$nocatch=parameters.nocatch,nocatch=void 0===_parameters$nocatch||_parameters$nocatch;if(Object(_track_context_state__WEBPACK_IMPORTED_MODULE_1__.c)(gl),setParameters(gl,parameters),nocatch)value=func(gl),Object(_track_context_state__WEBPACK_IMPORTED_MODULE_1__.b)(gl);else try{value=func(gl)}finally{Object(_track_context_state__WEBPACK_IMPORTED_MODULE_1__.b)(gl)}return value}},function(module,__webpack_exports__,__webpack_require__){"use strict";function flatten(array){var filter=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};return Array.isArray(array)?flattenArray(array,filter,[]):filter(array)?[array]:[]}function flattenArray(array,filter,result){for(var index=-1;++index<array.length;){var value=array[index];Array.isArray(value)?flattenArray(value,filter,result):filter(value)&&result.push(value)}return result}function fillArray(_ref){for(var target=_ref.target,source=_ref.source,_ref$start=_ref.start,start=void 0===_ref$start?0:_ref$start,_ref$count=_ref.count,count=void 0===_ref$count?1:_ref$count,length=source.length,total=count*length,copied=0,i=start;copied<length;copied++)target[i++]=source[copied];for(;copied<total;)copied<total-copied?(target.copyWithin(start+copied,start,start+copied),copied*=2):(target.copyWithin(start+copied,start,start+total-copied),copied=total);return target}__webpack_require__.d(__webpack_exports__,"b",(function(){return flatten})),__webpack_require__.d(__webpack_exports__,"a",(function(){return fillArray}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getKeyValue})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getKey}));var _utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23);function getKeyValue(gl,name){if("string"!=typeof name)return name;var number=Number(name);if(!isNaN(number))return number;var value=gl[name=name.replace(/^.*\./,"")];return Object(_utils__WEBPACK_IMPORTED_MODULE_0__.a)(void 0!==value,"Accessing undefined constant GL.".concat(name)),value}function getKey(gl,value){for(var key in value=Number(value),gl)if(gl[key]===value)return"GL.".concat(key);return String(value)}},function(module,exports,__webpack_require__){"use strict";var MAX_SAFE_INTEGER=__webpack_require__(186),ToInteger=__webpack_require__(303);module.exports=function ToLength(argument){var len=ToInteger(argument);return len<=0?0:len>MAX_SAFE_INTEGER?MAX_SAFE_INTEGER:len}},function(module,exports,__webpack_require__){"use strict";var ES5Type=__webpack_require__(308);module.exports=function Type(x){return"symbol"==typeof x?"Symbol":ES5Type(x)}},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(52).f,has=__webpack_require__(50),TO_STRING_TAG=__webpack_require__(39)("toStringTag");module.exports=function(it,TAG,STATIC){it&&!has(it=STATIC?it:it.prototype,TO_STRING_TAG)&&defineProperty(it,TO_STRING_TAG,{configurable:!0,value:TAG})}},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(String(it)+" is not a function");return it}},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports){module.exports=function isObjectLike(value){return null!=value&&"object"==typeof value}},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(659),getValue=__webpack_require__(662);module.exports=function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}},function(module,__webpack_exports__,__webpack_require__){"use strict";var fp32={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},constants=__webpack_require__(18),COORDINATE_SYSTEM_GLSL_CONSTANTS=Object.keys(constants.a).map((function(key){return"const int COORDINATE_SYSTEM_".concat(key," = ").concat(constants.a[key],";")})).join(""),PROJECTION_MODE_GLSL_CONSTANTS=Object.keys(constants.c).map((function(key){return"const int PROJECTION_MODE_".concat(key," = ").concat(constants.c[key],";")})).join(""),project_glsl="".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS,"\n").concat(PROJECTION_MODE_GLSL_CONSTANTS,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy) * WORLD_SCALE,\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n    position_world += project_uModelMatrix * vec4(position64Low, 0.0);\n  }\n\n  return project_offset_(position_world);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n"),viewport_uniforms=__webpack_require__(212),INITIAL_MODULE_OPTIONS={};__webpack_exports__.a={name:"project",dependencies:[fp32],vs:project_glsl,getUniforms:function getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:INITIAL_MODULE_OPTIONS;return opts.viewport?Object(viewport_uniforms.b)(opts):{}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function isEqual(a,b){if(a===b)return!0;if(Array.isArray(a)){var len=a.length;if(!b||b.length!==len)return!1;for(var i=0;i<len;i++)if(a[i]!==b[i])return!1;return!0}return!1}function memoize(compute){var cachedResult,cachedArgs={};return function(args){for(var key in args)if(!isEqual(args[key],cachedArgs[key])){cachedResult=compute(args),cachedArgs=args;break}return cachedResult}}__webpack_require__.d(__webpack_exports__,"a",(function(){return memoize}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Viewport}));var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_utils_log__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(20),_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(67),math_gl__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(19),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(21),_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(29),_lib_constants__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(18),DEGREES_TO_RADIANS=Math.PI/180,IDENTITY=Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.a)(),ZERO_VECTOR=[0,0,0],DEFAULT_DISTANCE_SCALES={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},Viewport=function(){function Viewport(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,Viewport);var _opts$id=opts.id,id=void 0===_opts$id?null:_opts$id,_opts$x=opts.x,x=void 0===_opts$x?0:_opts$x,_opts$y=opts.y,y=void 0===_opts$y?0:_opts$y,_opts$width=opts.width,width=void 0===_opts$width?1:_opts$width,_opts$height=opts.height,height=void 0===_opts$height?1:_opts$height;this.id=id||this.constructor.displayName||"viewport",this.x=x,this.y=y,this.width=width||1,this.height=height||1,this._frustumPlanes={},this._initViewMatrix(opts),this._initProjectionMatrix(opts),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(Viewport,[{key:"equals",value:function equals(viewport){return viewport instanceof Viewport&&(this===viewport||viewport.width===this.width&&viewport.height===this.height&&viewport.scale===this.scale&&Object(math_gl__WEBPACK_IMPORTED_MODULE_5__.d)(viewport.projectionMatrix,this.projectionMatrix)&&Object(math_gl__WEBPACK_IMPORTED_MODULE_5__.d)(viewport.viewMatrix,this.viewMatrix))}},{key:"project",value:function project(xyz){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$topLeft=_ref.topLeft,topLeft=void 0===_ref$topLeft||_ref$topLeft,worldPosition=this.projectPosition(xyz),coord=Object(_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_7__.o)(worldPosition,this.pixelProjectionMatrix),_coord=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(coord,2),x=_coord[0],y=_coord[1],y2=topLeft?y:this.height-y;return 2===xyz.length?[x,y2]:[x,y2,coord[2]]}},{key:"unproject",value:function unproject(xyz){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$topLeft=_ref2.topLeft,topLeft=void 0===_ref2$topLeft||_ref2$topLeft,targetZ=_ref2.targetZ,_xyz=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],y2=topLeft?y:this.height-y,targetZWorld=targetZ&&targetZ*this.distanceScales.unitsPerMeter[2],coord=Object(_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_7__.m)([x,y2,z],this.pixelUnprojectionMatrix,targetZWorld),_this$unprojectPositi=this.unprojectPosition(coord),_this$unprojectPositi2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_this$unprojectPositi,3),X=_this$unprojectPositi2[0],Y=_this$unprojectPositi2[1],Z=_this$unprojectPositi2[2];return Number.isFinite(z)?[X,Y,Z]:Number.isFinite(targetZ)?[X,Y,targetZ]:[X,Y]}},{key:"projectPosition",value:function projectPosition(xyz){var _this$projectFlat=this.projectFlat(xyz),_this$projectFlat2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_this$projectFlat,2);return[_this$projectFlat2[0],_this$projectFlat2[1],(xyz[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function unprojectPosition(xyz){var _this$unprojectFlat=this.unprojectFlat(xyz),_this$unprojectFlat2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_this$unprojectFlat,2);return[_this$unprojectFlat2[0],_this$unprojectFlat2[1],(xyz[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function projectFlat(xyz){return this.isGeospatial?Object(_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_7__.k)(xyz):xyz}},{key:"unprojectFlat",value:function unprojectFlat(xyz){return this.isGeospatial?Object(_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_7__.n)(xyz):xyz}},{key:"getBounds",value:function getBounds(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},unprojectOption={targetZ:options.z||0},topLeft=this.unproject([0,0],unprojectOption),topRight=this.unproject([this.width,0],unprojectOption),bottomLeft=this.unproject([0,this.height],unprojectOption),bottomRight=this.unproject([this.width,this.height],unprojectOption);return[Math.min(topLeft[0],topRight[0],bottomLeft[0],bottomRight[0]),Math.min(topLeft[1],topRight[1],bottomLeft[1],bottomRight[1]),Math.max(topLeft[0],topRight[0],bottomLeft[0],bottomRight[0]),Math.max(topLeft[1],topRight[1],bottomLeft[1],bottomRight[1])]}},{key:"getDistanceScales",value:function getDistanceScales(){var coordinateOrigin=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return coordinateOrigin?Object(_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_7__.f)({longitude:coordinateOrigin[0],latitude:coordinateOrigin[1],highPrecision:!0}):this.distanceScales}},{key:"containsPixel",value:function containsPixel(_ref3){var x=_ref3.x,y=_ref3.y,_ref3$width=_ref3.width,width=void 0===_ref3$width?1:_ref3$width,_ref3$height=_ref3.height,height=void 0===_ref3$height?1:_ref3$height;return x<this.x+this.width&&this.x<x+width&&y<this.y+this.height&&this.y<y+height}},{key:"getFrustumPlanes",value:function getFrustumPlanes(){if(this._frustumPlanes.near)return this._frustumPlanes;var _this$projectionProps=this.projectionProps,near=_this$projectionProps.near,far=_this$projectionProps.far,fovyRadians=_this$projectionProps.fovyRadians,aspect=_this$projectionProps.aspect;return Object.assign(this._frustumPlanes,Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.c)({aspect:aspect,near:near,far:far,fovyRadians:fovyRadians,position:this.cameraPosition,direction:this.cameraDirection,up:this.cameraUp,right:this.cameraRight})),this._frustumPlanes}},{key:"getCameraPosition",value:function getCameraPosition(){return this.cameraPosition}},{key:"getCameraDirection",value:function getCameraDirection(){return this.cameraDirection}},{key:"getCameraUp",value:function getCameraUp(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function _createProjectionMatrix(_ref4){var orthographic=_ref4.orthographic,fovyRadians=_ref4.fovyRadians,aspect=_ref4.aspect,focalDistance=_ref4.focalDistance,near=_ref4.near,far=_ref4.far;return orthographic?(new math_gl__WEBPACK_IMPORTED_MODULE_5__.a).orthographic({fovy:fovyRadians,aspect:aspect,focalDistance:focalDistance,near:near,far:far}):(new math_gl__WEBPACK_IMPORTED_MODULE_5__.a).perspective({fovy:fovyRadians,aspect:aspect,near:near,far:far})}},{key:"_initViewMatrix",value:function _initViewMatrix(opts){var _opts$viewMatrix=opts.viewMatrix,viewMatrix=void 0===_opts$viewMatrix?IDENTITY:_opts$viewMatrix,_opts$longitude=opts.longitude,longitude=void 0===_opts$longitude?null:_opts$longitude,_opts$latitude=opts.latitude,latitude=void 0===_opts$latitude?null:_opts$latitude,_opts$zoom=opts.zoom,zoom=void 0===_opts$zoom?null:_opts$zoom,_opts$position=opts.position,position=void 0===_opts$position?null:_opts$position,_opts$modelMatrix=opts.modelMatrix,modelMatrix=void 0===_opts$modelMatrix?null:_opts$modelMatrix,_opts$focalDistance=opts.focalDistance,focalDistance=void 0===_opts$focalDistance?1:_opts$focalDistance,_opts$distanceScales=opts.distanceScales,distanceScales=void 0===_opts$distanceScales?null:_opts$distanceScales;this.isGeospatial=Number.isFinite(latitude)&&Number.isFinite(longitude),this.zoom=zoom,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?Object(_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_7__.h)({latitude:latitude})+Math.log2(focalDistance):0);var scale=Math.pow(2,this.zoom);this.scale=scale,this.distanceScales=this.isGeospatial?Object(_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_7__.f)({latitude:latitude,longitude:longitude}):distanceScales||DEFAULT_DISTANCE_SCALES,this.focalDistance=focalDistance,this.distanceScales.metersPerUnit=new math_gl__WEBPACK_IMPORTED_MODULE_5__.b(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new math_gl__WEBPACK_IMPORTED_MODULE_5__.b(this.distanceScales.unitsPerMeter),this.position=ZERO_VECTOR,this.meterOffset=ZERO_VECTOR,position&&(this.position=position,this.modelMatrix=modelMatrix,this.meterOffset=modelMatrix?modelMatrix.transformVector(position):position),this.isGeospatial?(this.longitude=longitude,this.latitude=latitude,this.center=this._getCenterInWorld({longitude:longitude,latitude:latitude})):this.center=position?this.projectPosition(position):[0,0,0],this.viewMatrixUncentered=viewMatrix,this.viewMatrix=(new math_gl__WEBPACK_IMPORTED_MODULE_5__.a).multiplyRight(this.viewMatrixUncentered).translate(new math_gl__WEBPACK_IMPORTED_MODULE_5__.b(this.center||ZERO_VECTOR).negate())}},{key:"_getCenterInWorld",value:function _getCenterInWorld(_ref5){var longitude=_ref5.longitude,latitude=_ref5.latitude,meterOffset=this.meterOffset,distanceScales=this.distanceScales,center=new math_gl__WEBPACK_IMPORTED_MODULE_5__.b(this.projectPosition([longitude,latitude,0]));if(meterOffset){var commonPosition=new math_gl__WEBPACK_IMPORTED_MODULE_5__.b(meterOffset).scale(distanceScales.unitsPerMeter);center.add(commonPosition)}return center}},{key:"_initProjectionMatrix",value:function _initProjectionMatrix(opts){var _opts$projectionMatri=opts.projectionMatrix,projectionMatrix=void 0===_opts$projectionMatri?null:_opts$projectionMatri,_opts$orthographic=opts.orthographic,orthographic=void 0!==_opts$orthographic&&_opts$orthographic,fovyRadians=opts.fovyRadians,_opts$fovy=opts.fovy,fovy=void 0===_opts$fovy?75:_opts$fovy,_opts$near=opts.near,near=void 0===_opts$near?.1:_opts$near,_opts$far=opts.far,far=void 0===_opts$far?1e3:_opts$far,_opts$focalDistance2=opts.focalDistance,focalDistance=void 0===_opts$focalDistance2?1:_opts$focalDistance2;this.projectionProps={orthographic:orthographic,fovyRadians:fovyRadians||fovy*DEGREES_TO_RADIANS,aspect:this.width/this.height,focalDistance:focalDistance,near:near,far:far},this.projectionMatrix=projectionMatrix||this._createProjectionMatrix(this.projectionProps)}},{key:"_initPixelMatrices",value:function _initPixelMatrices(){var vpm=Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.a)();gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_6__.g(vpm,vpm,this.projectionMatrix),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_6__.g(vpm,vpm,this.viewMatrix),this.viewProjectionMatrix=vpm,this.viewMatrixInverse=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_6__.e([],this.viewMatrix)||this.viewMatrix;var _extractCameraVectors=Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.b)({viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse}),eye=_extractCameraVectors.eye,direction=_extractCameraVectors.direction,up=_extractCameraVectors.up,right=_extractCameraVectors.right;this.cameraPosition=eye,this.cameraDirection=direction,this.cameraUp=up,this.cameraRight=right;var viewportMatrix=Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.a)(),pixelProjectionMatrix=Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.a)();gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_6__.n(viewportMatrix,viewportMatrix,[this.width/2,-this.height/2,1]),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_6__.o(viewportMatrix,viewportMatrix,[1,-1,0]),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_6__.g(pixelProjectionMatrix,viewportMatrix,this.viewProjectionMatrix),this.pixelProjectionMatrix=pixelProjectionMatrix,this.viewportMatrix=viewportMatrix,this.pixelUnprojectionMatrix=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_6__.e(Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.a)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||_utils_log__WEBPACK_IMPORTED_MODULE_3__.a.warn("Pixel project matrix not invertible")()}},{key:"metersPerPixel",get:function get(){return this.distanceScales.metersPerUnit[2]/this.scale}},{key:"projectionMode",get:function get(){return this.isGeospatial?this.zoom<12?_lib_constants__WEBPACK_IMPORTED_MODULE_8__.c.WEB_MERCATOR:_lib_constants__WEBPACK_IMPORTED_MODULE_8__.c.WEB_MERCATOR_AUTO_OFFSET:_lib_constants__WEBPACK_IMPORTED_MODULE_8__.c.IDENTITY}}]),Viewport}();Viewport.displayName="Viewport"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=function(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return renderbuffer_Renderbuffer}));var _$33190$36012$,classCallCheck=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(7),getPrototypeOf=__webpack_require__(3),assertThisInitialized=__webpack_require__(6),createClass=__webpack_require__(1),inherits=__webpack_require__(8),resource=__webpack_require__(48),defineProperty=__webpack_require__(0),EXT_FLOAT_WEBGL2="EXT_color_buffer_float",renderbuffer_formats=(_$33190$36012$={},Object(defineProperty.a)(_$33190$36012$,33189,{bpp:2}),Object(defineProperty.a)(_$33190$36012$,33190,{gl2:!0,bpp:3}),Object(defineProperty.a)(_$33190$36012$,36012,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36168,{bpp:1}),Object(defineProperty.a)(_$33190$36012$,34041,{bpp:4}),Object(defineProperty.a)(_$33190$36012$,35056,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36013,{gl2:!0,bpp:5}),Object(defineProperty.a)(_$33190$36012$,32854,{bpp:2}),Object(defineProperty.a)(_$33190$36012$,36194,{bpp:2}),Object(defineProperty.a)(_$33190$36012$,32855,{bpp:2}),Object(defineProperty.a)(_$33190$36012$,33321,{gl2:!0,bpp:1}),Object(defineProperty.a)(_$33190$36012$,33330,{gl2:!0,bpp:1}),Object(defineProperty.a)(_$33190$36012$,33329,{gl2:!0,bpp:1}),Object(defineProperty.a)(_$33190$36012$,33332,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33331,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33334,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33333,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33323,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33336,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33335,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33338,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33337,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33340,{gl2:!0,bpp:8}),Object(defineProperty.a)(_$33190$36012$,33339,{gl2:!0,bpp:8}),Object(defineProperty.a)(_$33190$36012$,32849,{gl2:!0,bpp:3}),Object(defineProperty.a)(_$33190$36012$,32856,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,32857,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36220,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36238,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36975,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36214,{gl2:!0,bpp:8}),Object(defineProperty.a)(_$33190$36012$,36232,{gl2:!0,bpp:8}),Object(defineProperty.a)(_$33190$36012$,36226,{gl2:!0,bpp:16}),Object(defineProperty.a)(_$33190$36012$,36208,{gl2:!0,bpp:16}),Object(defineProperty.a)(_$33190$36012$,33325,{gl2:EXT_FLOAT_WEBGL2,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33327,{gl2:EXT_FLOAT_WEBGL2,bpp:4}),Object(defineProperty.a)(_$33190$36012$,34842,{gl2:EXT_FLOAT_WEBGL2,bpp:8}),Object(defineProperty.a)(_$33190$36012$,33326,{gl2:EXT_FLOAT_WEBGL2,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33328,{gl2:EXT_FLOAT_WEBGL2,bpp:8}),Object(defineProperty.a)(_$33190$36012$,34836,{gl2:EXT_FLOAT_WEBGL2,bpp:16}),Object(defineProperty.a)(_$33190$36012$,35898,{gl2:EXT_FLOAT_WEBGL2,bpp:4}),_$33190$36012$),esm=__webpack_require__(9),assert=__webpack_require__(23);function isFormatSupported(gl,format,formats){var info=formats[format];if(!info)return!1;var value=Object(esm.f)(gl)&&info.gl2||info.gl1;return"string"==typeof value?gl.getExtension(value):value}var renderbuffer_Renderbuffer=function(_Resource){function Renderbuffer(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Renderbuffer),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Renderbuffer).call(this,gl,opts))).initialize(opts),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(Renderbuffer,_Resource),Object(createClass.a)(Renderbuffer,null,[{key:"isSupported",value:function isSupported(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},format=_ref.format;return!format||isFormatSupported(gl,format,renderbuffer_formats)}},{key:"getSamplesForFormat",value:function getSamplesForFormat(gl,_ref2){var format=_ref2.format;return gl.getInternalformatParameter(36161,format,32937)}}]),Object(createClass.a)(Renderbuffer,[{key:"initialize",value:function initialize(_ref3){var format=_ref3.format,_ref3$width=_ref3.width,width=void 0===_ref3$width?1:_ref3$width,_ref3$height=_ref3.height,height=void 0===_ref3$height?1:_ref3$height,_ref3$samples=_ref3.samples,samples=void 0===_ref3$samples?0:_ref3$samples;return Object(assert.a)(format,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==samples&&Object(esm.f)(this.gl)?this.gl.renderbufferStorageMultisample(36161,samples,format,width,height):this.gl.renderbufferStorage(36161,format,width,height),this.format=format,this.width=width,this.height=height,this.samples=samples,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*renderbuffer_formats[this.format].bpp),this}},{key:"resize",value:function resize(_ref4){var width=_ref4.width,height=_ref4.height;return width!==this.width||height!==this.height?this.initialize({width:width,height:height,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function _bindHandle(handle){this.gl.bindRenderbuffer(36161,handle)}},{key:"_syncHandle",value:function _syncHandle(handle){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function _getParameter(pname){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,pname)}}]),Renderbuffer}(resource.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"b",(function(){return userAgent})),__webpack_require__.d(__webpack_exports__,"c",(function(){return window_})),__webpack_require__.d(__webpack_exports__,"a",(function(){return passiveSupported}));var userAgent="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",window_="undefined"!=typeof window?window:global,passiveSupported=(void 0!==global||window,"undefined"!=typeof document&&document,!1);try{var options={get passive(){return passiveSupported=!0,!0}};window_.addEventListener("test",options,options),window_.removeEventListener("test",options,options)}catch(err){}}).call(this,__webpack_require__(43))},,,function(module,exports,__webpack_require__){"use strict";module.exports=Number.isNaN||function isNaN(a){return a!=a}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),$TypeError=GetIntrinsic("%TypeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),has=__webpack_require__(63),predicates={"Property Descriptor":function isPropertyDescriptor(Type,Desc){if("Object"!==Type(Desc))return!1;var allowed={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var key in Desc)if(has(Desc,key)&&!allowed[key])return!1;var isData=has(Desc,"[[Value]]"),IsAccessor=has(Desc,"[[Get]]")||has(Desc,"[[Set]]");if(isData&&IsAccessor)throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0}};module.exports=function assertRecord(Type,recordType,argumentName,value){var predicate=predicates[recordType];if("function"!=typeof predicate)throw new $SyntaxError("unknown record type: "+recordType);if(!predicate(Type,value))throw new $TypeError(argumentName+" must be a "+recordType)}},function(module,exports,__webpack_require__){var path=__webpack_require__(245),global=__webpack_require__(30),aFunction=function(variable){return"function"==typeof variable?variable:void 0};module.exports=function(namespace,method){return arguments.length<2?aFunction(path[namespace])||aFunction(global[namespace]):path[namespace]&&path[namespace][method]||global[namespace]&&global[namespace][method]}},function(module,exports,__webpack_require__){var activeXDocument,anObject=__webpack_require__(51),defineProperties=__webpack_require__(338),enumBugKeys=__webpack_require__(247),hiddenKeys=__webpack_require__(163),html=__webpack_require__(339),documentCreateElement=__webpack_require__(241),sharedKey=__webpack_require__(189),IE_PROTO=sharedKey("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(content){return"<script>"+content+"<\/script>"},NullProtoObject=function(){try{activeXDocument=document.domain&&new ActiveXObject("htmlfile")}catch(error){}var iframeDocument,iframe;NullProtoObject=activeXDocument?function(activeXDocument){activeXDocument.write(scriptTag("")),activeXDocument.close();var temp=activeXDocument.parentWindow.Object;return activeXDocument=null,temp}(activeXDocument):((iframe=documentCreateElement("iframe")).style.display="none",html.appendChild(iframe),iframe.src=String("javascript:"),(iframeDocument=iframe.contentWindow.document).open(),iframeDocument.write(scriptTag("document.F=Object")),iframeDocument.close(),iframeDocument.F);for(var length=enumBugKeys.length;length--;)delete NullProtoObject.prototype[enumBugKeys[length]];return NullProtoObject()};hiddenKeys[IE_PROTO]=!0,module.exports=Object.create||function create(O,Properties){var result;return null!==O?(EmptyConstructor.prototype=anObject(O),result=new EmptyConstructor,EmptyConstructor.prototype=null,result[IE_PROTO]=O):result=NullProtoObject(),void 0===Properties?result:defineProperties(result,Properties)}},function(module,exports,__webpack_require__){"use strict";var fails=__webpack_require__(35);module.exports=function(METHOD_NAME,argument){var method=[][METHOD_NAME];return!!method&&fails((function(){method.call(null,argument||function(){throw 1},1)}))}},function(module,exports,__webpack_require__){__webpack_require__(25)({target:"Array",stat:!0},{isArray:__webpack_require__(164)})},function(module,exports,__webpack_require__){var redefine=__webpack_require__(69),DatePrototype=Date.prototype,nativeDateToString=DatePrototype.toString,getTime=DatePrototype.getTime;new Date(NaN)+""!="Invalid Date"&&redefine(DatePrototype,"toString",(function toString(){var value=getTime.call(this);return value==value?nativeDateToString.call(this):"Invalid Date"}))},function(module,exports,__webpack_require__){var $=__webpack_require__(25),toObject=__webpack_require__(70),nativeKeys=__webpack_require__(165);$({target:"Object",stat:!0,forced:__webpack_require__(35)((function(){nativeKeys(1)}))},{keys:function keys(it){return nativeKeys(toObject(it))}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),exec=__webpack_require__(262);$({target:"RegExp",proto:!0,forced:/./.exec!==exec},{exec:exec})},function(module,exports,__webpack_require__){"use strict";var redefine=__webpack_require__(69),anObject=__webpack_require__(51),fails=__webpack_require__(35),flags=__webpack_require__(350),RegExpPrototype=RegExp.prototype,nativeToString=RegExpPrototype.toString,NOT_GENERIC=fails((function(){return"/a/b"!=nativeToString.call({source:"a",flags:"b"})})),INCORRECT_NAME="toString"!=nativeToString.name;(NOT_GENERIC||INCORRECT_NAME)&&redefine(RegExp.prototype,"toString",(function toString(){var R=anObject(this),p=String(R.source),rf=R.flags;return"/"+p+"/"+String(void 0===rf&&R instanceof RegExp&&!("flags"in RegExpPrototype)?flags.call(R):rf)}),{unsafe:!0})},function(module,exports,__webpack_require__){"use strict";(function(global){__webpack_require__(77),Object.defineProperty(exports,"__esModule",{value:!0}),exports.logger=void 0;var console=global.console,logger={debug:function debug(message){for(var _len=arguments.length,rest=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)rest[_key-1]=arguments[_key];return console.debug.apply(console,[message].concat(rest))},log:function log(message){for(var _len2=arguments.length,rest=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)rest[_key2-1]=arguments[_key2];return console.log.apply(console,[message].concat(rest))},info:function info(message){for(var _len3=arguments.length,rest=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)rest[_key3-1]=arguments[_key3];return console.info.apply(console,[message].concat(rest))},warn:function warn(message){for(var _len4=arguments.length,rest=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)rest[_key4-1]=arguments[_key4];return console.warn.apply(console,[message].concat(rest))},error:function error(message){for(var _len5=arguments.length,rest=new Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++)rest[_key5-1]=arguments[_key5];return console.error.apply(console,[message].concat(rest))}};exports.logger=logger}).call(this,__webpack_require__(43))},function(module,exports,__webpack_require__){var $=__webpack_require__(25),DESCRIPTORS=__webpack_require__(49);$({target:"Object",stat:!0,forced:!DESCRIPTORS,sham:!DESCRIPTORS},{defineProperty:__webpack_require__(52).f})},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(203),getRawTag=__webpack_require__(634),objectToString=__webpack_require__(635),symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function baseGetTag(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__.d(__webpack_exports__,"a",(function(){return _setPrototypeOf}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return linearish})),__webpack_require__.d(__webpack_exports__,"a",(function(){return linear}));var ticks=__webpack_require__(810),continuous=__webpack_require__(47),init=__webpack_require__(61),formatSpecifier=__webpack_require__(288),exponent=__webpack_require__(85),defaultLocale=__webpack_require__(816),tickFormat=function(start,stop,count,specifier){var precision,step=Object(ticks.c)(start,stop,count);switch((specifier=Object(formatSpecifier.a)(null==specifier?",f":specifier)).type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=specifier.precision||isNaN(precision=function(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Object(exponent.a)(value)/3)))-Object(exponent.a)(Math.abs(step)))}(step,value))||(specifier.precision=precision),Object(defaultLocale.b)(specifier,value);case"":case"e":case"g":case"p":case"r":null!=specifier.precision||isNaN(precision=function(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,Object(exponent.a)(max)-Object(exponent.a)(step))+1}(step,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":null!=specifier.precision||isNaN(precision=function(step){return Math.max(0,-Object(exponent.a)(Math.abs(step)))}(step))||(specifier.precision=precision-2*("%"===specifier.type))}return Object(defaultLocale.a)(specifier)};function linearish(scale){var domain=scale.domain;return scale.ticks=function(count){var d=domain();return Object(ticks.a)(d[0],d[d.length-1],null==count?10:count)},scale.tickFormat=function(count,specifier){var d=domain();return tickFormat(d[0],d[d.length-1],null==count?10:count,specifier)},scale.nice=function(count){null==count&&(count=10);var step,d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1];return stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step),(step=Object(ticks.b)(start,stop,count))>0?(start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step,step=Object(ticks.b)(start,stop,count)):step<0&&(start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step,step=Object(ticks.b)(start,stop,count)),step>0?(d[i0]=Math.floor(start/step)*step,d[i1]=Math.ceil(stop/step)*step,domain(d)):step<0&&(d[i0]=Math.ceil(start*step)/step,d[i1]=Math.floor(stop*step)/step,domain(d)),scale},scale}function linear(){var scale=Object(continuous.b)();return scale.copy=function(){return Object(continuous.a)(scale,linear())},init.b.apply(scale,arguments),linearish(scale)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return texture_2d_Texture2D}));var classCallCheck=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(7),getPrototypeOf=__webpack_require__(3),assertThisInitialized=__webpack_require__(6),createClass=__webpack_require__(1),inherits=__webpack_require__(8),texture=__webpack_require__(60),webgl_checks=__webpack_require__(102),assert=__webpack_require__(23),pathPrefix="";function loadImage(url,opts){return Object(assert.a)("string"==typeof url),url=pathPrefix+url,new Promise((function(resolve,reject){try{var image=new Image;image.onload=function(){return resolve(image)},image.onerror=function(){return reject(new Error("Could not load image ".concat(url,".")))},image.crossOrigin=opts&&opts.crossOrigin||"anonymous",image.src=url}catch(error){reject(error)}}))}var texture_2d_Texture2D=function(_Texture){function Texture2D(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Texture2D),Object(webgl_checks.b)(gl),(props instanceof Promise||"string"==typeof props)&&(props={data:props}),"string"==typeof props.data&&(props=Object.assign({},props,{data:loadImage(props.data)})),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Texture2D).call(this,gl,Object.assign({},props,{target:3553})))).initialize(props),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(Texture2D,_Texture),Object(createClass.a)(Texture2D,null,[{key:"isSupported",value:function isSupported(gl,opts){return texture.a.isSupported(gl,opts)}}]),Texture2D}(texture.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return construct_construct}));var setPrototypeOf=__webpack_require__(146);function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function construct_construct(Parent,args,Class){return(construct_construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&Object(setPrototypeOf.a)(instance,Class.prototype),instance}).apply(null,arguments)}},function(module,__webpack_exports__,__webpack_require__){"use strict";function vec2_transformMat4AsVector(out,a,m){var x=a[0],y=a[1],w=m[3]*x+m[7]*y||1;return out[0]=(m[0]*x+m[4]*y)/w,out[1]=(m[1]*x+m[5]*y)/w,out}function vec3_transformMat4AsVector(out,a,m){var x=a[0],y=a[1],z=a[2],w=m[3]*x+m[7]*y+m[11]*z||1;return out[0]=(m[0]*x+m[4]*y+m[8]*z)/w,out[1]=(m[1]*x+m[5]*y+m[9]*z)/w,out[2]=(m[2]*x+m[6]*y+m[10]*z)/w,out}function vec3_transformMat2(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y,out[1]=m[1]*x+m[3]*y,out[2]=a[2],out}__webpack_require__.d(__webpack_exports__,"a",(function(){return vec2_transformMat4AsVector})),__webpack_require__.d(__webpack_exports__,"c",(function(){return vec3_transformMat4AsVector})),__webpack_require__.d(__webpack_exports__,"b",(function(){return vec3_transformMat2}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return deg2rad})),__webpack_require__.d(__webpack_exports__,"b",(function(){return rad2deg}));var deg2rad=Math.PI/180,rad2deg=180/Math.PI},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=function(x){return function(){return x}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return WEBGL2_CONTEXT_POLYFILLS})),__webpack_require__.d(__webpack_exports__,"a",(function(){return WEBGL2_CONTEXT_OVERRIDES}));var _WEBGL_PARAMETERS,_WEBGL2_CONTEXT_POLYF,defineProperty=__webpack_require__(0),utils=__webpack_require__(16),get_parameter_polyfill_getWebGL2ValueOrZero=function getWebGL2ValueOrZero(gl){return Object(utils.h)(gl)?void 0:0},WEBGL_PARAMETERS=(_WEBGL_PARAMETERS={},Object(defineProperty.a)(_WEBGL_PARAMETERS,3074,(function(gl){return Object(utils.h)(gl)?void 0:36064})),Object(defineProperty.a)(_WEBGL_PARAMETERS,35723,(function(gl){return Object(utils.h)(gl)?void 0:4352})),Object(defineProperty.a)(_WEBGL_PARAMETERS,35977,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,32937,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,36795,(function(gl,getParameter){var ext=Object(utils.h)(gl)?gl.getExtension("EXT_disjoint_timer_query_webgl2"):gl.getExtension("EXT_disjoint_timer_query");return ext&&ext.GPU_DISJOINT_EXT?getParameter(ext.GPU_DISJOINT_EXT):0})),Object(defineProperty.a)(_WEBGL_PARAMETERS,37445,(function(gl,getParameter){var ext=gl.getExtension("WEBGL_debug_renderer_info");return getParameter(ext&&ext.UNMASKED_VENDOR_WEBGL||7936)})),Object(defineProperty.a)(_WEBGL_PARAMETERS,37446,(function(gl,getParameter){var ext=gl.getExtension("WEBGL_debug_renderer_info");return getParameter(ext&&ext.UNMASKED_RENDERER_WEBGL||7937)})),Object(defineProperty.a)(_WEBGL_PARAMETERS,34047,(function(gl,getParameter){var ext=gl.luma.extensions.EXT_texture_filter_anisotropic;return ext?getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),Object(defineProperty.a)(_WEBGL_PARAMETERS,32883,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35071,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,37447,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,36063,(function(gl,getParameter){if(!Object(utils.h)(gl)){var ext=gl.getExtension("WEBGL_draw_buffers");return ext?getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),Object(defineProperty.a)(_WEBGL_PARAMETERS,35379,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35374,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35377,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,34852,(function(gl){if(!Object(utils.h)(gl)){var ext=gl.getExtension("WEBGL_draw_buffers");return ext?ext.MAX_DRAW_BUFFERS_WEBGL:0}})),Object(defineProperty.a)(_WEBGL_PARAMETERS,36203,(function(gl){return gl.getExtension("OES_element_index")?2147483647:65535})),Object(defineProperty.a)(_WEBGL_PARAMETERS,33001,(function(gl){return gl.getExtension("OES_element_index")?16777216:65535})),Object(defineProperty.a)(_WEBGL_PARAMETERS,33e3,(function(gl){return 16777216})),Object(defineProperty.a)(_WEBGL_PARAMETERS,37157,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35373,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35657,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,36183,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,37137,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,34045,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35978,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35979,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35968,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35376,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35375,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35659,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,37154,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35371,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35658,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35076,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35077,get_parameter_polyfill_getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35380,get_parameter_polyfill_getWebGL2ValueOrZero),_WEBGL_PARAMETERS);var WEBGL2_CONTEXT_POLYFILLS=(_WEBGL2_CONTEXT_POLYF={},Object(defineProperty.a)(_WEBGL2_CONTEXT_POLYF,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function createVertexArray(){Object(utils.a)(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function deleteVertexArray(){},bindVertexArray:function bindVertexArray(){},isVertexArray:function isVertexArray(){return!1}}),Object(defineProperty.a)(_WEBGL2_CONTEXT_POLYF,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function vertexAttribDivisor(location,divisor){Object(utils.a)(0===divisor,"WebGL instanced rendering not supported")},drawElementsInstanced:function drawElementsInstanced(){},drawArraysInstanced:function drawArraysInstanced(){}}),Object(defineProperty.a)(_WEBGL2_CONTEXT_POLYF,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function drawBuffers(){Object(utils.a)(!1)}}),Object(defineProperty.a)(_WEBGL2_CONTEXT_POLYF,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function createQuery(){Object(utils.a)(!1)},deleteQuery:function deleteQuery(){Object(utils.a)(!1)},beginQuery:function beginQuery(){Object(utils.a)(!1)},endQuery:function endQuery(){},getQuery:function getQuery(handle,pname){return this.getQueryObject(handle,pname)},getQueryParameter:function getQueryParameter(handle,pname){return this.getQueryObject(handle,pname)},getQueryObject:function getQueryObject(){}}),_WEBGL2_CONTEXT_POLYF),WEBGL2_CONTEXT_OVERRIDES={readBuffer:function readBuffer(gl,originalFunc,attachment){Object(utils.h)(gl)&&originalFunc(attachment)},getVertexAttrib:function getVertexAttrib(gl,originalFunc,location,pname){var result,_getExtensionData=function getExtensionData(gl,extension){return{webgl2:Object(utils.h)(gl),ext:gl.getExtension(extension)}}(gl,"ANGLE_instanced_arrays"),webgl2=_getExtensionData.webgl2,ext=_getExtensionData.ext;switch(pname){case 35069:result=!!webgl2&&void 0;break;case 35070:result=webgl2||ext?void 0:0}return void 0!==result?result:originalFunc(location,pname)},getProgramParameter:function getProgramParameter(gl,originalFunc,program,pname){if(!Object(utils.h)(gl))switch(pname){case 35967:return 35981;case 35971:case 35382:return 0}return originalFunc(program,pname)},getInternalformatParameter:function getInternalformatParameter(gl,originalFunc,target,format,pname){if(!Object(utils.h)(gl))switch(pname){case 32937:return new Int32Array([0])}return gl.getInternalformatParameter(target,format,pname)},getTexParameter:function getTexParameter(gl,originalFunc,target,pname){switch(pname){case 34046:var ext=gl.luma.extensions.EXT_texture_filter_anisotropic;pname=ext&&ext.TEXTURE_MAX_ANISOTROPY_EXT||34046}return originalFunc(target,pname)},getParameter:function getParameterPolyfill(gl,originalGetParameter,pname){var limit=WEBGL_PARAMETERS[pname],value="function"==typeof limit?limit(gl,originalGetParameter,pname):limit;return void 0!==value?value:originalGetParameter(pname)},hint:function hint(gl,originalFunc,pname,value){return originalFunc(pname,value)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return uid})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isPowerOfTwo})),__webpack_require__.d(__webpack_exports__,"a",(function(){return isObjectEmpty}));var _assert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),uidCounters={};function uid(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";uidCounters[id]=uidCounters[id]||1;var count=uidCounters[id]++;return"".concat(id,"-").concat(count)}function isPowerOfTwo(n){return Object(_assert__WEBPACK_IMPORTED_MODULE_0__.a)("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function isObjectEmpty(obj){var isEmpty=!0;for(var key in obj){isEmpty=!1;break}return isEmpty}},,,function(module,exports,__webpack_require__){"use strict";var $Array=__webpack_require__(13)("%Array%"),toStr=!$Array.isArray&&__webpack_require__(32)("Object.prototype.toString");module.exports=$Array.isArray||function IsArray(argument){return"[object Array]"===toStr(argument)}},function(module,exports,__webpack_require__){"use strict";var $Object=__webpack_require__(13)("%Object%"),RequireObjectCoercible=__webpack_require__(88);module.exports=function ToObject(value){return RequireObjectCoercible(value),$Object(value)}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),propertyIsEnumerableModule=__webpack_require__(187),createPropertyDescriptor=__webpack_require__(160),toIndexedObject=__webpack_require__(105),toPrimitive=__webpack_require__(161),has=__webpack_require__(50),IE8_DOM_DEFINE=__webpack_require__(329),nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;exports.f=DESCRIPTORS?nativeGetOwnPropertyDescriptor:function getOwnPropertyDescriptor(O,P){if(O=toIndexedObject(O),P=toPrimitive(P,!0),IE8_DOM_DEFINE)try{return nativeGetOwnPropertyDescriptor(O,P)}catch(error){}if(has(O,P))return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O,P),O[P])}},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40);module.exports=function(input,PREFERRED_STRING){if(!isObject(input))return input;var fn,val;if(PREFERRED_STRING&&"function"==typeof(fn=input.toString)&&!isObject(val=fn.call(input)))return val;if("function"==typeof(fn=input.valueOf)&&!isObject(val=fn.call(input)))return val;if(!PREFERRED_STRING&&"function"==typeof(fn=input.toString)&&!isObject(val=fn.call(input)))return val;throw TypeError("Can't convert object to primitive value")}},function(module,exports){module.exports=!1},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){var classof=__webpack_require__(89);module.exports=Array.isArray||function isArray(arg){return"Array"==classof(arg)}},function(module,exports,__webpack_require__){var internalObjectKeys=__webpack_require__(333),enumBugKeys=__webpack_require__(247);module.exports=Object.keys||function keys(O){return internalObjectKeys(O,enumBugKeys)}},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(121);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 0:return function(){return fn.call(that)};case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){var $=__webpack_require__(25),from=__webpack_require__(597);$({target:"Array",stat:!0,forced:!__webpack_require__(256)((function(iterable){Array.from(iterable)}))},{from:from})},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){var $=__webpack_require__(25),assign=__webpack_require__(602);$({target:"Object",stat:!0,forced:Object.assign!==assign},{assign:assign})},function(module,exports,__webpack_require__){var hiddenKeys=__webpack_require__(163),isObject=__webpack_require__(40),has=__webpack_require__(50),defineProperty=__webpack_require__(52).f,uid=__webpack_require__(190),FREEZING=__webpack_require__(363),METADATA=uid("meta"),id=0,isExtensible=Object.isExtensible||function(){return!0},setMetadata=function(it){defineProperty(it,METADATA,{value:{objectID:"O"+ ++id,weakData:{}}})},meta=module.exports={REQUIRED:!1,fastKey:function(it,create){if(!isObject(it))return"symbol"==typeof it?it:("string"==typeof it?"S":"P")+it;if(!has(it,METADATA)){if(!isExtensible(it))return"F";if(!create)return"E";setMetadata(it)}return it[METADATA].objectID},getWeakData:function(it,create){if(!has(it,METADATA)){if(!isExtensible(it))return!0;if(!create)return!1;setMetadata(it)}return it[METADATA].weakData},onFreeze:function(it){return FREEZING&&meta.REQUIRED&&isExtensible(it)&&!has(it,METADATA)&&setMetadata(it),it}};hiddenKeys[METADATA]=!0},function(module,exports,__webpack_require__){"use strict";var events;Object.defineProperty(exports,"__esModule",{value:!0}),exports.NAVIGATE_URL=exports.DOCS_RENDERED=exports.STORY_THREW_EXCEPTION=exports.STORIES_EXPAND_ALL=exports.STORIES_COLLAPSE_ALL=exports.STORY_CHANGED=exports.STORY_ERRORED=exports.STORY_MISSING=exports.STORY_RENDERED=exports.STORY_RENDER=exports.STORY_ADDED=exports.STORY_INIT=exports.REGISTER_SUBSCRIPTION=exports.FORCE_RE_RENDER=exports.PREVIEW_KEYDOWN=exports.SELECT_STORY=exports.STORIES_CONFIGURED=exports.SET_STORIES=exports.GET_STORIES=exports.SET_CURRENT_STORY=exports.GET_CURRENT_STORY=exports.CHANNEL_CREATED=exports.default=void 0,function(events){events.CHANNEL_CREATED="channelCreated",events.GET_CURRENT_STORY="getCurrentStory",events.SET_CURRENT_STORY="setCurrentStory",events.GET_STORIES="getStories",events.SET_STORIES="setStories",events.STORIES_CONFIGURED="storiesConfigured",events.SELECT_STORY="selectStory",events.PREVIEW_KEYDOWN="previewKeydown",events.STORY_ADDED="storyAdded",events.STORY_CHANGED="storyChanged",events.STORY_UNCHANGED="storyUnchanged",events.FORCE_RE_RENDER="forceReRender",events.REGISTER_SUBSCRIPTION="registerSubscription",events.STORY_INIT="storyInit",events.STORY_RENDER="storyRender",events.STORY_RENDERED="storyRendered",events.STORY_MISSING="storyMissing",events.STORY_ERRORED="storyErrored",events.STORY_THREW_EXCEPTION="storyThrewException",events.STORIES_COLLAPSE_ALL="storiesCollapseAll",events.STORIES_EXPAND_ALL="storiesExpandAll",events.DOCS_RENDERED="docsRendered",events.NAVIGATE_URL="navigateUrl"}(events||(events={}));var _default=events;exports.default=_default;var CHANNEL_CREATED=events.CHANNEL_CREATED,GET_CURRENT_STORY=events.GET_CURRENT_STORY,SET_CURRENT_STORY=events.SET_CURRENT_STORY,GET_STORIES=events.GET_STORIES,SET_STORIES=events.SET_STORIES,STORIES_CONFIGURED=events.STORIES_CONFIGURED,SELECT_STORY=events.SELECT_STORY,PREVIEW_KEYDOWN=events.PREVIEW_KEYDOWN,FORCE_RE_RENDER=events.FORCE_RE_RENDER,REGISTER_SUBSCRIPTION=events.REGISTER_SUBSCRIPTION,STORY_INIT=events.STORY_INIT,STORY_ADDED=events.STORY_ADDED,STORY_RENDER=events.STORY_RENDER,STORY_RENDERED=events.STORY_RENDERED,STORY_MISSING=events.STORY_MISSING,STORY_ERRORED=events.STORY_ERRORED,STORY_CHANGED=events.STORY_CHANGED,STORIES_COLLAPSE_ALL=events.STORIES_COLLAPSE_ALL,STORIES_EXPAND_ALL=events.STORIES_EXPAND_ALL,STORY_THREW_EXCEPTION=events.STORY_THREW_EXCEPTION,DOCS_RENDERED=events.DOCS_RENDERED,NAVIGATE_URL=events.NAVIGATE_URL;exports.NAVIGATE_URL=NAVIGATE_URL,exports.DOCS_RENDERED=DOCS_RENDERED,exports.STORY_THREW_EXCEPTION=STORY_THREW_EXCEPTION,exports.STORIES_EXPAND_ALL=STORIES_EXPAND_ALL,exports.STORIES_COLLAPSE_ALL=STORIES_COLLAPSE_ALL,exports.STORY_CHANGED=STORY_CHANGED,exports.STORY_ERRORED=STORY_ERRORED,exports.STORY_MISSING=STORY_MISSING,exports.STORY_RENDERED=STORY_RENDERED,exports.STORY_RENDER=STORY_RENDER,exports.STORY_ADDED=STORY_ADDED,exports.STORY_INIT=STORY_INIT,exports.REGISTER_SUBSCRIPTION=REGISTER_SUBSCRIPTION,exports.FORCE_RE_RENDER=FORCE_RE_RENDER,exports.PREVIEW_KEYDOWN=PREVIEW_KEYDOWN,exports.SELECT_STORY=SELECT_STORY,exports.STORIES_CONFIGURED=STORIES_CONFIGURED,exports.SET_STORIES=SET_STORIES,exports.GET_STORIES=GET_STORIES,exports.SET_CURRENT_STORY=SET_CURRENT_STORY,exports.GET_CURRENT_STORY=GET_CURRENT_STORY,exports.CHANNEL_CREATED=CHANNEL_CREATED},function(module,exports){module.exports=function eq(value,other){return value===other||value!=value&&other!=other}},function(module,exports){module.exports=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){function getHiResTimestamp(){var timestamp;if("undefined"!=typeof window&&window.performance)timestamp=window.performance.now();else if(void 0!==process&&process.hrtime){var timeParts=process.hrtime();timestamp=1e3*timeParts[0]+timeParts[1]/1e6}else timestamp=Date.now();return timestamp}__webpack_require__.d(__webpack_exports__,"a",(function(){return getHiResTimestamp}))}).call(this,__webpack_require__(58))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__.d(__webpack_exports__,"a",(function(){return _arrayLikeToArray}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=function(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,process){__webpack_require__.d(__webpack_exports__,"a",(function(){return global_})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isBrowser}));var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global&&global,document:"undefined"!=typeof document&&document},global_=globals.global||globals.self||globals.window,isBrowser="object"!==(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))||"[object process]"!==String(process)||process.browser,matches=void 0!==process&&process.version&&process.version.match(/v([0-9]*)/);matches&&parseFloat(matches[1])}).call(this,__webpack_require__(43),__webpack_require__(58))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return merge_options_getGlobalLoaderState})),__webpack_require__.d(__webpack_exports__,"b",(function(){return mergeOptions}));var defineProperty=__webpack_require__(0),esm_typeof=__webpack_require__(14),globals=__webpack_require__(807),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),loggers_NullLog=function(){function NullLog(){Object(classCallCheck.a)(this,NullLog)}return Object(createClass.a)(NullLog,[{key:"log",value:function log(){return function(_){}}},{key:"info",value:function info(){return function(_){}}},{key:"warn",value:function warn(){return function(_){}}},{key:"error",value:function error(){return function(_){}}}]),NullLog}(),DEFAULT_LOADER_OPTIONS={CDN:"https://unpkg.com/@loaders.gl",worker:!0,log:new(function(){function ConsoleLog(){Object(classCallCheck.a)(this,ConsoleLog),this.console=console}return Object(createClass.a)(ConsoleLog,[{key:"log",value:function log(){for(var _this$console$log,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this$console$log=this.console.log).bind.apply(_this$console$log,[this.console].concat(args))}},{key:"info",value:function info(){for(var _this$console$info,_len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return(_this$console$info=this.console.info).bind.apply(_this$console$info,[this.console].concat(args))}},{key:"warn",value:function warn(){for(var _this$console$warn,_len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return(_this$console$warn=this.console.warn).bind.apply(_this$console$warn,[this.console].concat(args))}},{key:"error",value:function error(){for(var _this$console$error,_len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return(_this$console$error=this.console.error).bind.apply(_this$console$error,[this.console].concat(args))}}]),ConsoleLog}()),dataType:"arraybuffer",metadata:!1};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var merge_options_isPureObject=function isPureObject(value){return value&&"object"===Object(esm_typeof.a)(value)&&value.constructor==={}.constructor},merge_options_getGlobalLoaderState=function getGlobalLoaderState(){globals.a.loaders=globals.a.loaders||{};var loaders=globals.a.loaders;return loaders._state=loaders._state||{},loaders._state},merge_options_getGlobalLoaderOptions=function getGlobalLoaderOptions(){var state=merge_options_getGlobalLoaderState();return state.globalOptions=state.globalOptions||_objectSpread({},DEFAULT_LOADER_OPTIONS),state.globalOptions};function mergeOptions(loader,options,url){var topOptions=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return validateLoaderOptions(loader,options,topOptions),mergeOptionsInternal(loader,options,url)}function validateLoaderOptions(loader,options){var topOptions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:DEFAULT_LOADER_OPTIONS,log=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console;if(topOptions)for(var key in options)"object"===Object(esm_typeof.a)(options[key])||topOptions[key]||log.warn("Top-level loader option ".concat(key," not recognized"));var idOptions=options&&options[loader.id]||{},loaderOptions=loader.options&&loader.options[loader.id]||{},deprecatedOptions=loader.defaultOptions&&loader.defaultOptions[loader.id]||{};for(var _key in idOptions)_key in loaderOptions||(_key in deprecatedOptions?log.warn("".concat(loader.name," loader option ").concat(loader.id,".").concat(_key," deprecated, use ").concat(deprecatedOptions[_key])):log.warn("".concat(loader.name," loader option ").concat(loader.id,".").concat(_key," not recognized")))}function mergeOptionsInternal(loader,options,url){var mergedOptions=_objectSpread({},loader.options||{});return function addUrlOptions(options,url){url&&!("baseUri"in options)&&(options.baseUri=url)}(mergedOptions,url),null===mergedOptions.log&&(mergedOptions.log=new loggers_NullLog),mergeNestedFields(mergedOptions,merge_options_getGlobalLoaderOptions()),mergeNestedFields(mergedOptions,options),mergedOptions}function mergeNestedFields(mergedOptions,options){for(var key in options)if(key in options){var value=options[key];merge_options_isPureObject(value)&&merge_options_isPureObject(mergedOptions[key])?mergedOptions[key]=_objectSpread(_objectSpread({},mergedOptions[key]),options[key]):mergedOptions[key]=options[key]}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return lumaStats}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),probe_gl__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(799),probe_gl_env__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(27),lumaStats=new(function(){function StatsManager(){Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,StatsManager),this.stats=new Map}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(StatsManager,[{key:"get",value:function get(name){return this.stats.has(name)||this.stats.set(name,new probe_gl__WEBPACK_IMPORTED_MODULE_3__.a({id:name})),this.stats.get(name)}}]),StatsManager}());if(probe_gl_env__WEBPACK_IMPORTED_MODULE_4__.global.luma&&"8.2.0"!==probe_gl_env__WEBPACK_IMPORTED_MODULE_4__.global.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(probe_gl_env__WEBPACK_IMPORTED_MODULE_4__.global.luma.VERSION," vs ").concat("8.2.0"));probe_gl_env__WEBPACK_IMPORTED_MODULE_4__.global.luma||(Object(probe_gl_env__WEBPACK_IMPORTED_MODULE_4__.isBrowser)()&&_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_2__.g.log(1,"luma.gl ".concat("8.2.0"," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),probe_gl_env__WEBPACK_IMPORTED_MODULE_4__.global.luma=probe_gl_env__WEBPACK_IMPORTED_MODULE_4__.global.luma||{VERSION:"8.2.0",version:"8.2.0",log:_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_2__.g,stats:lumaStats,globals:{modules:{},nodeIO:{}}});probe_gl_env__WEBPACK_IMPORTED_MODULE_4__.global.luma},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"loader assertion failed.")}__webpack_require__.d(__webpack_exports__,"a",(function(){return assert}))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(window,document,exportName,undefined){"use strict";var assign,VENDOR_PREFIXES=["","webkit","Moz","MS","ms","o"],TEST_ELEMENT=document.createElement("div"),round=Math.round,abs=Math.abs,now=Date.now;function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout)}function invokeArrayArg(arg,fn,context){return!!Array.isArray(arg)&&(each(arg,context[fn],context),!0)}function each(obj,iterator,context){var i;if(obj)if(obj.forEach)obj.forEach(iterator,context);else if(void 0!==obj.length)for(i=0;i<obj.length;)iterator.call(context,obj[i],i,obj),i++;else for(i in obj)obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)}function deprecate(method,name,message){var deprecationMessage="DEPRECATED METHOD: "+name+"\n"+message+" AT \n";return function(){var e=new Error("get-stack-trace"),stack=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",log=window.console&&(window.console.warn||window.console.log);return log&&log.call(window.console,deprecationMessage,stack),method.apply(this,arguments)}}assign="function"!=typeof Object.assign?function assign(target){if(null==target)throw new TypeError("Cannot convert undefined or null to object");for(var output=Object(target),index=1;index<arguments.length;index++){var source=arguments[index];if(null!=source)for(var nextKey in source)source.hasOwnProperty(nextKey)&&(output[nextKey]=source[nextKey])}return output}:Object.assign;var extend=deprecate((function extend(dest,src,merge){for(var keys=Object.keys(src),i=0;i<keys.length;)(!merge||merge&&void 0===dest[keys[i]])&&(dest[keys[i]]=src[keys[i]]),i++;return dest}),"extend","Use `assign`."),merge=deprecate((function merge(dest,src){return extend(dest,src,!0)}),"merge","Use `assign`.");function inherit(child,base,properties){var childP,baseP=base.prototype;(childP=child.prototype=Object.create(baseP)).constructor=child,childP._super=baseP,properties&&assign(childP,properties)}function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments)}}function boolOrFn(val,args){return"function"==typeof val?val.apply(args&&args[0]||void 0,args):val}function ifUndefined(val1,val2){return void 0===val1?val2:val1}function addEventListeners(target,types,handler){each(splitStr(types),(function(type){target.addEventListener(type,handler,!1)}))}function removeEventListeners(target,types,handler){each(splitStr(types),(function(type){target.removeEventListener(type,handler,!1)}))}function hasParent(node,parent){for(;node;){if(node==parent)return!0;node=node.parentNode}return!1}function inStr(str,find){return str.indexOf(find)>-1}function splitStr(str){return str.trim().split(/\s+/g)}function inArray(src,find,findByKey){if(src.indexOf&&!findByKey)return src.indexOf(find);for(var i=0;i<src.length;){if(findByKey&&src[i][findByKey]==find||!findByKey&&src[i]===find)return i;i++}return-1}function toArray(obj){return Array.prototype.slice.call(obj,0)}function uniqueArray(src,key,sort){for(var results=[],values=[],i=0;i<src.length;){var val=key?src[i][key]:src[i];inArray(values,val)<0&&results.push(src[i]),values[i]=val,i++}return sort&&(results=key?results.sort((function sortUniqueArray(a,b){return a[key]>b[key]})):results.sort()),results}function prefixed(obj,property){for(var prefix,prop,camelProp=property[0].toUpperCase()+property.slice(1),i=0;i<VENDOR_PREFIXES.length;){if((prop=(prefix=VENDOR_PREFIXES[i])?prefix+camelProp:property)in obj)return prop;i++}}var _uniqueId=1;function getWindowForElement(element){var doc=element.ownerDocument||element;return doc.defaultView||doc.parentWindow||window}var SUPPORT_TOUCH="ontouchstart"in window,SUPPORT_POINTER_EVENTS=void 0!==prefixed(window,"PointerEvent"),SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),PROPS_XY=["x","y"],PROPS_CLIENT_XY=["clientX","clientY"];function Input(manager,callback){var self=this;this.manager=manager,this.callback=callback,this.element=manager.element,this.target=manager.options.inputTarget,this.domHandler=function(ev){boolOrFn(manager.options.enable,[manager])&&self.handler(ev)},this.init()}function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length,changedPointersLen=input.changedPointers.length,isFirst=1&eventType&&pointersLen-changedPointersLen==0,isFinal=12&eventType&&pointersLen-changedPointersLen==0;input.isFirst=!!isFirst,input.isFinal=!!isFinal,isFirst&&(manager.session={}),input.eventType=eventType,function computeInputData(manager,input){var session=manager.session,pointers=input.pointers,pointersLength=pointers.length;session.firstInput||(session.firstInput=simpleCloneInputData(input));pointersLength>1&&!session.firstMultiple?session.firstMultiple=simpleCloneInputData(input):1===pointersLength&&(session.firstMultiple=!1);var firstInput=session.firstInput,firstMultiple=session.firstMultiple,offsetCenter=firstMultiple?firstMultiple.center:firstInput.center,center=input.center=getCenter(pointers);input.timeStamp=now(),input.deltaTime=input.timeStamp-firstInput.timeStamp,input.angle=getAngle(offsetCenter,center),input.distance=getDistance(offsetCenter,center),function computeDeltaXY(session,input){var center=input.center,offset=session.offsetDelta||{},prevDelta=session.prevDelta||{},prevInput=session.prevInput||{};1!==input.eventType&&4!==prevInput.eventType||(prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0},offset=session.offsetDelta={x:center.x,y:center.y});input.deltaX=prevDelta.x+(center.x-offset.x),input.deltaY=prevDelta.y+(center.y-offset.y)}(session,input),input.offsetDirection=getDirection(input.deltaX,input.deltaY);var overallVelocity=getVelocity(input.deltaTime,input.deltaX,input.deltaY);input.overallVelocityX=overallVelocity.x,input.overallVelocityY=overallVelocity.y,input.overallVelocity=abs(overallVelocity.x)>abs(overallVelocity.y)?overallVelocity.x:overallVelocity.y,input.scale=firstMultiple?function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY)}(firstMultiple.pointers,pointers):1,input.rotation=firstMultiple?function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)+getAngle(start[1],start[0],PROPS_CLIENT_XY)}(firstMultiple.pointers,pointers):0,input.maxPointers=session.prevInput?input.pointers.length>session.prevInput.maxPointers?input.pointers.length:session.prevInput.maxPointers:input.pointers.length,function computeIntervalInputData(session,input){var velocity,velocityX,velocityY,direction,last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp;if(8!=input.eventType&&(deltaTime>25||void 0===last.velocity)){var deltaX=input.deltaX-last.deltaX,deltaY=input.deltaY-last.deltaY,v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x,velocityY=v.y,velocity=abs(v.x)>abs(v.y)?v.x:v.y,direction=getDirection(deltaX,deltaY),session.lastInterval=input}else velocity=last.velocity,velocityX=last.velocityX,velocityY=last.velocityY,direction=last.direction;input.velocity=velocity,input.velocityX=velocityX,input.velocityY=velocityY,input.direction=direction}(session,input);var target=manager.element;hasParent(input.srcEvent.target,target)&&(target=input.srcEvent.target);input.target=target}(manager,input),manager.emit("hammer.input",input),manager.recognize(input),manager.session.prevInput=input}function simpleCloneInputData(input){for(var pointers=[],i=0;i<input.pointers.length;)pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)},i++;return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY}}function getCenter(pointers){var pointersLength=pointers.length;if(1===pointersLength)return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};for(var x=0,y=0,i=0;i<pointersLength;)x+=pointers[i].clientX,y+=pointers[i].clientY,i++;return{x:round(x/pointersLength),y:round(y/pointersLength)}}function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0}}function getDirection(x,y){return x===y?1:abs(x)>=abs(y)?x<0?2:4:y<0?8:16}function getDistance(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt(x*x+y*y)}function getAngle(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return 180*Math.atan2(y,x)/Math.PI}Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)}};var MOUSE_INPUT_MAP={mousedown:1,mousemove:2,mouseup:4};function MouseInput(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,Input.apply(this,arguments)}inherit(MouseInput,Input,{handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];1&eventType&&0===ev.button&&(this.pressed=!0),2&eventType&&1!==ev.which&&(eventType=4),this.pressed&&(4&eventType&&(this.pressed=!1),this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:"mouse",srcEvent:ev}))}});var POINTER_INPUT_MAP={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},IE10_POINTER_TYPE_ENUM={2:"touch",3:"pen",4:"mouse",5:"kinect"},POINTER_ELEMENT_EVENTS="pointerdown",POINTER_WINDOW_EVENTS="pointermove pointerup pointercancel";function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS,this.evWin=POINTER_WINDOW_EVENTS,Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}window.MSPointerEvent&&!window.PointerEvent&&(POINTER_ELEMENT_EVENTS="MSPointerDown",POINTER_WINDOW_EVENTS="MSPointerMove MSPointerUp MSPointerCancel"),inherit(PointerEventInput,Input,{handler:function PEhandler(ev){var store=this.store,removePointer=!1,eventTypeNormalized=ev.type.toLowerCase().replace("ms",""),eventType=POINTER_INPUT_MAP[eventTypeNormalized],pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType,isTouch="touch"==pointerType,storeIndex=inArray(store,ev.pointerId,"pointerId");1&eventType&&(0===ev.button||isTouch)?storeIndex<0&&(store.push(ev),storeIndex=store.length-1):12&eventType&&(removePointer=!0),storeIndex<0||(store[storeIndex]=ev,this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev}),removePointer&&store.splice(storeIndex,1))}});var SINGLE_TOUCH_INPUT_MAP={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function SingleTouchInput(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,Input.apply(this,arguments)}function normalizeSingleTouches(ev,type){var all=toArray(ev.touches),changed=toArray(ev.changedTouches);return 12&type&&(all=uniqueArray(all.concat(changed),"identifier",!0)),[all,changed]}inherit(SingleTouchInput,Input,{handler:function TEhandler(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(1===type&&(this.started=!0),this.started){var touches=normalizeSingleTouches.call(this,ev,type);12&type&&touches[0].length-touches[1].length==0&&(this.started=!1),this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:"touch",srcEvent:ev})}}});var TOUCH_INPUT_MAP={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function TouchInput(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},Input.apply(this,arguments)}function getTouches(ev,type){var allTouches=toArray(ev.touches),targetIds=this.targetIds;if(3&type&&1===allTouches.length)return targetIds[allTouches[0].identifier]=!0,[allTouches,allTouches];var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;if(targetTouches=allTouches.filter((function(touch){return hasParent(touch.target,target)})),1===type)for(i=0;i<targetTouches.length;)targetIds[targetTouches[i].identifier]=!0,i++;for(i=0;i<changedTouches.length;)targetIds[changedTouches[i].identifier]&&changedTargetTouches.push(changedTouches[i]),12&type&&delete targetIds[changedTouches[i].identifier],i++;return changedTargetTouches.length?[uniqueArray(targetTouches.concat(changedTargetTouches),"identifier",!0),changedTargetTouches]:void 0}inherit(TouchInput,Input,{handler:function MTEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type],touches=getTouches.call(this,ev,type);touches&&this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:"touch",srcEvent:ev})}});function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler),this.mouse=new MouseInput(this.manager,handler),this.primaryTouch=null,this.lastTouches=[]}function recordTouches(eventType,eventData){1&eventType?(this.primaryTouch=eventData.changedPointers[0].identifier,setLastTouch.call(this,eventData)):12&eventType&&setLastTouch.call(this,eventData)}function setLastTouch(eventData){var touch=eventData.changedPointers[0];if(touch.identifier===this.primaryTouch){var lastTouch={x:touch.clientX,y:touch.clientY};this.lastTouches.push(lastTouch);var lts=this.lastTouches;setTimeout((function(){var i=lts.indexOf(lastTouch);i>-1&&lts.splice(i,1)}),2500)}}function isSyntheticEvent(eventData){for(var x=eventData.srcEvent.clientX,y=eventData.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var t=this.lastTouches[i],dx=Math.abs(x-t.x),dy=Math.abs(y-t.y);if(dx<=25&&dy<=25)return!0}return!1}inherit(TouchMouseInput,Input,{handler:function TMEhandler(manager,inputEvent,inputData){var isTouch="touch"==inputData.pointerType,isMouse="mouse"==inputData.pointerType;if(!(isMouse&&inputData.sourceCapabilities&&inputData.sourceCapabilities.firesTouchEvents)){if(isTouch)recordTouches.call(this,inputEvent,inputData);else if(isMouse&&isSyntheticEvent.call(this,inputData))return;this.callback(manager,inputEvent,inputData)}},destroy:function destroy(){this.touch.destroy(),this.mouse.destroy()}});var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,"touchAction"),NATIVE_TOUCH_ACTION=void 0!==PREFIXED_TOUCH_ACTION,TOUCH_ACTION_MAP=function getTouchActionProps(){if(!NATIVE_TOUCH_ACTION)return!1;var touchMap={},cssSupports=window.CSS&&window.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(val){touchMap[val]=!cssSupports||window.CSS.supports("touch-action",val)})),touchMap}();function TouchAction(manager,value){this.manager=manager,this.set(value)}TouchAction.prototype={set:function(value){"compute"==value&&(value=this.compute()),NATIVE_TOUCH_ACTION&&this.manager.element.style&&TOUCH_ACTION_MAP[value]&&(this.manager.element.style[PREFIXED_TOUCH_ACTION]=value),this.actions=value.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var actions=[];return each(this.manager.recognizers,(function(recognizer){boolOrFn(recognizer.options.enable,[recognizer])&&(actions=actions.concat(recognizer.getTouchAction()))})),function cleanTouchActions(actions){if(inStr(actions,"none"))return"none";var hasPanX=inStr(actions,"pan-x"),hasPanY=inStr(actions,"pan-y");if(hasPanX&&hasPanY)return"none";if(hasPanX||hasPanY)return hasPanX?"pan-x":"pan-y";if(inStr(actions,"manipulation"))return"manipulation";return"auto"}(actions.join(" "))},preventDefaults:function(input){var srcEvent=input.srcEvent,direction=input.offsetDirection;if(this.manager.session.prevented)srcEvent.preventDefault();else{var actions=this.actions,hasNone=inStr(actions,"none")&&!TOUCH_ACTION_MAP.none,hasPanY=inStr(actions,"pan-y")&&!TOUCH_ACTION_MAP["pan-y"],hasPanX=inStr(actions,"pan-x")&&!TOUCH_ACTION_MAP["pan-x"];if(hasNone){var isTapPointer=1===input.pointers.length,isTapMovement=input.distance<2,isTapTouchTime=input.deltaTime<250;if(isTapPointer&&isTapMovement&&isTapTouchTime)return}if(!hasPanX||!hasPanY)return hasNone||hasPanY&&6&direction||hasPanX&&24&direction?this.preventSrc(srcEvent):void 0}},preventSrc:function(srcEvent){this.manager.session.prevented=!0,srcEvent.preventDefault()}};function Recognizer(options){this.options=assign({},this.defaults,options||{}),this.id=function uniqueId(){return _uniqueId++}(),this.manager=null,this.options.enable=ifUndefined(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function stateStr(state){return 16&state?"cancel":8&state?"end":4&state?"move":2&state?"start":""}function directionStr(direction){return 16==direction?"down":8==direction?"up":2==direction?"left":4==direction?"right":""}function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;return manager?manager.get(otherRecognizer):otherRecognizer}function AttrRecognizer(){Recognizer.apply(this,arguments)}function PanRecognizer(){AttrRecognizer.apply(this,arguments),this.pX=null,this.pY=null}function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}function PressRecognizer(){Recognizer.apply(this,arguments),this._timer=null,this._input=null}function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}function TapRecognizer(){Recognizer.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Hammer(element,options){return(options=options||{}).recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset),new Manager(element,options)}Recognizer.prototype={defaults:{},set:function(options){return assign(this.options,options),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"recognizeWith",this))return this;var simultaneous=this.simultaneous;return simultaneous[(otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this)).id]||(simultaneous[otherRecognizer.id]=otherRecognizer,otherRecognizer.recognizeWith(this)),this},dropRecognizeWith:function(otherRecognizer){return invokeArrayArg(otherRecognizer,"dropRecognizeWith",this)||(otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),delete this.simultaneous[otherRecognizer.id]),this},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"requireFailure",this))return this;var requireFail=this.requireFail;return-1===inArray(requireFail,otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this))&&(requireFail.push(otherRecognizer),otherRecognizer.requireFailure(this)),this},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"dropRequireFailure",this))return this;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);return index>-1&&this.requireFail.splice(index,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id]},emit:function(input){var self=this,state=this.state;function emit(event){self.manager.emit(event,input)}state<8&&emit(self.options.event+stateStr(state)),emit(self.options.event),input.additionalEvent&&emit(input.additionalEvent),state>=8&&emit(self.options.event+stateStr(state))},tryEmit:function(input){if(this.canEmit())return this.emit(input);this.state=32},canEmit:function(){for(var i=0;i<this.requireFail.length;){if(!(33&this.requireFail[i].state))return!1;i++}return!0},recognize:function(inputData){var inputDataClone=assign({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(inputDataClone),30&this.state&&this.tryEmit(inputDataClone)},process:function(inputData){},getTouchAction:function(){},reset:function(){}},inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return 0===optionPointers||input.pointers.length===optionPointers},process:function(input){var state=this.state,eventType=input.eventType,isRecognized=6&state,isValid=this.attrTest(input);return isRecognized&&(8&eventType||!isValid)?16|state:isRecognized||isValid?4&eventType?8|state:2&state?4|state:2:32}}),inherit(PanRecognizer,AttrRecognizer,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var direction=this.options.direction,actions=[];return 6&direction&&actions.push("pan-y"),24&direction&&actions.push("pan-x"),actions},directionTest:function(input){var options=this.options,hasMoved=!0,distance=input.distance,direction=input.direction,x=input.deltaX,y=input.deltaY;return direction&options.direction||(6&options.direction?(direction=0===x?1:x<0?2:4,hasMoved=x!=this.pX,distance=Math.abs(input.deltaX)):(direction=0===y?1:y<0?8:16,hasMoved=y!=this.pY,distance=Math.abs(input.deltaY))),input.direction=direction,hasMoved&&distance>options.threshold&&direction&options.direction},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(2&this.state||!(2&this.state)&&this.directionTest(input))},emit:function(input){this.pX=input.deltaX,this.pY=input.deltaY;var direction=directionStr(input.direction);direction&&(input.additionalEvent=this.options.event+direction),this._super.emit.call(this,input)}}),inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||2&this.state)},emit:function(input){if(1!==input.scale){var inOut=input.scale<1?"in":"out";input.additionalEvent=this.options.event+inOut}this._super.emit.call(this,input)}}),inherit(PressRecognizer,Recognizer,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTime=input.deltaTime>options.time;if(this._input=input,!validMovement||!validPointers||12&input.eventType&&!validTime)this.reset();else if(1&input.eventType)this.reset(),this._timer=setTimeoutContext((function(){this.state=8,this.tryEmit()}),options.time,this);else if(4&input.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(input){8===this.state&&(input&&4&input.eventType?this.manager.emit(this.options.event+"up",input):(this._input.timeStamp=now(),this.manager.emit(this.options.event,this._input)))}}),inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||2&this.state)}}),inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function(input){var velocity,direction=this.options.direction;return 30&direction?velocity=input.overallVelocity:6&direction?velocity=input.overallVelocityX:24&direction&&(velocity=input.overallVelocityY),this._super.attrTest.call(this,input)&&direction&input.offsetDirection&&input.distance>this.options.threshold&&input.maxPointers==this.options.pointers&&abs(velocity)>this.options.velocity&&4&input.eventType},emit:function(input){var direction=directionStr(input.offsetDirection);direction&&this.manager.emit(this.options.event+direction,input),this.manager.emit(this.options.event,input)}}),inherit(TapRecognizer,Recognizer,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTouchTime=input.deltaTime<options.time;if(this.reset(),1&input.eventType&&0===this.count)return this.failTimeout();if(validMovement&&validTouchTime&&validPointers){if(4!=input.eventType)return this.failTimeout();var validInterval=!this.pTime||input.timeStamp-this.pTime<options.interval,validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;if(this.pTime=input.timeStamp,this.pCenter=input.center,validMultiTap&&validInterval?this.count+=1:this.count=1,this._input=input,0===this.count%options.taps)return this.hasRequireFailures()?(this._timer=setTimeoutContext((function(){this.state=8,this.tryEmit()}),options.interval,this),2):8}return 32},failTimeout:function(){return this._timer=setTimeoutContext((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Hammer.VERSION="2.0.7",Hammer.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:!1}],[PinchRecognizer,{enable:!1},["rotate"]],[SwipeRecognizer,{direction:6}],[PanRecognizer,{direction:6},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Manager(element,options){this.options=assign({},Hammer.defaults,options||{}),this.options.inputTarget=this.options.inputTarget||element,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=element,this.input=function createInputInstance(manager){var inputClass=manager.options.inputClass;return new(inputClass||(SUPPORT_POINTER_EVENTS?PointerEventInput:SUPPORT_ONLY_TOUCH?TouchInput:SUPPORT_TOUCH?TouchMouseInput:MouseInput))(manager,inputHandler)}(this),this.touchAction=new TouchAction(this,this.options.touchAction),toggleCssProps(this,!0),each(this.options.recognizers,(function(item){var recognizer=this.add(new item[0](item[1]));item[2]&&recognizer.recognizeWith(item[2]),item[3]&&recognizer.requireFailure(item[3])}),this)}function toggleCssProps(manager,add){var prop,element=manager.element;element.style&&(each(manager.options.cssProps,(function(value,name){prop=prefixed(element.style,name),add?(manager.oldCssProps[prop]=element.style[prop],element.style[prop]=value):element.style[prop]=manager.oldCssProps[prop]||""})),add||(manager.oldCssProps={}))}Manager.prototype={set:function(options){return assign(this.options,options),options.touchAction&&this.touchAction.update(),options.inputTarget&&(this.input.destroy(),this.input.target=options.inputTarget,this.input.init()),this},stop:function(force){this.session.stopped=force?2:1},recognize:function(inputData){var session=this.session;if(!session.stopped){var recognizer;this.touchAction.preventDefaults(inputData);var recognizers=this.recognizers,curRecognizer=session.curRecognizer;(!curRecognizer||curRecognizer&&8&curRecognizer.state)&&(curRecognizer=session.curRecognizer=null);for(var i=0;i<recognizers.length;)recognizer=recognizers[i],2===session.stopped||curRecognizer&&recognizer!=curRecognizer&&!recognizer.canRecognizeWith(curRecognizer)?recognizer.reset():recognizer.recognize(inputData),!curRecognizer&&14&recognizer.state&&(curRecognizer=session.curRecognizer=recognizer),i++}},get:function(recognizer){if(recognizer instanceof Recognizer)return recognizer;for(var recognizers=this.recognizers,i=0;i<recognizers.length;i++)if(recognizers[i].options.event==recognizer)return recognizers[i];return null},add:function(recognizer){if(invokeArrayArg(recognizer,"add",this))return this;var existing=this.get(recognizer.options.event);return existing&&this.remove(existing),this.recognizers.push(recognizer),recognizer.manager=this,this.touchAction.update(),recognizer},remove:function(recognizer){if(invokeArrayArg(recognizer,"remove",this))return this;if(recognizer=this.get(recognizer)){var recognizers=this.recognizers,index=inArray(recognizers,recognizer);-1!==index&&(recognizers.splice(index,1),this.touchAction.update())}return this},on:function(events,handler){if(void 0!==events&&void 0!==handler){var handlers=this.handlers;return each(splitStr(events),(function(event){handlers[event]=handlers[event]||[],handlers[event].push(handler)})),this}},off:function(events,handler){if(void 0!==events){var handlers=this.handlers;return each(splitStr(events),(function(event){handler?handlers[event]&&handlers[event].splice(inArray(handlers[event],handler),1):delete handlers[event]})),this}},emit:function(event,data){this.options.domEvents&&function triggerDomEvent(event,data){var gestureEvent=document.createEvent("Event");gestureEvent.initEvent(event,!0,!0),gestureEvent.gesture=data,data.target.dispatchEvent(gestureEvent)}(event,data);var handlers=this.handlers[event]&&this.handlers[event].slice();if(handlers&&handlers.length){data.type=event,data.preventDefault=function(){data.srcEvent.preventDefault()};for(var i=0;i<handlers.length;)handlers[i](data),i++}},destroy:function(){this.element&&toggleCssProps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},assign(Hammer,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,assign:assign,inherit:inherit,bindFn:bindFn,prefixed:prefixed}),(void 0!==window?window:"undefined"!=typeof self?self:{}).Hammer=Hammer,void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return Hammer}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(window,document)},,function(module,exports,__webpack_require__){var runtime=function(exports){"use strict";var Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function invoke(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){var previousPromise;this._invoke=function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){!function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}(module.exports);try{regeneratorRuntime=runtime}catch(accidentalStrictMode){Function("r","regeneratorRuntime = r")(runtime)}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(447);module.exports=Function.prototype.bind||implementation},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),$Math=GetIntrinsic("%Math%"),$Number=GetIntrinsic("%Number%");module.exports=$Number.MAX_SAFE_INTEGER||$Math.pow(2,53)-1},function(module,exports,__webpack_require__){"use strict";var nativePropertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1);exports.f=NASHORN_BUG?function propertyIsEnumerable(V){var descriptor=getOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable}:nativePropertyIsEnumerable},function(module,exports,__webpack_require__){var fails=__webpack_require__(35),classof=__webpack_require__(89),split="".split;module.exports=fails((function(){return!Object("z").propertyIsEnumerable(0)}))?function(it){return"String"==classof(it)?split.call(it,""):Object(it)}:Object},function(module,exports,__webpack_require__){var shared=__webpack_require__(244),uid=__webpack_require__(190),keys=shared("keys");module.exports=function(key){return keys[key]||(keys[key]=uid(key))}},function(module,exports){var id=0,postfix=Math.random();module.exports=function(key){return"Symbol("+String(void 0===key?"":key)+")_"+(++id+postfix).toString(36)}},function(module,exports,__webpack_require__){var internalObjectKeys=__webpack_require__(333),hiddenKeys=__webpack_require__(247).concat("length","prototype");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return internalObjectKeys(O,hiddenKeys)}},function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(argument){return isNaN(argument=+argument)?0:(argument>0?floor:ceil)(argument)}},function(module,exports,__webpack_require__){var fails=__webpack_require__(35),replacement=/#|\.prototype\./,isForced=function(feature,detection){var value=data[normalize(feature)];return value==POLYFILL||value!=NATIVE&&("function"==typeof detection?fails(detection):!!detection)},normalize=isForced.normalize=function(string){return String(string).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P";module.exports=isForced},function(module,exports,__webpack_require__){var fails=__webpack_require__(35),wellKnownSymbol=__webpack_require__(39),V8_VERSION=__webpack_require__(251),SPECIES=wellKnownSymbol("species");module.exports=function(METHOD_NAME){return V8_VERSION>=51||!fails((function(){var array=[];return(array.constructor={})[SPECIES]=function(){return{foo:1}},1!==array[METHOD_NAME](Boolean).foo}))}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),$map=__webpack_require__(108).map,arrayMethodHasSpeciesSupport=__webpack_require__(194),arrayMethodUsesToLength=__webpack_require__(80),HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("map"),USES_TO_LENGTH=arrayMethodUsesToLength("map");$({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT||!USES_TO_LENGTH},{map:function map(callbackfn){return $map(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";var Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,$=__webpack_require__(25),IS_PURE=__webpack_require__(162),global=__webpack_require__(30),getBuiltIn=__webpack_require__(135),NativePromise=__webpack_require__(605),redefine=__webpack_require__(69),redefineAll=__webpack_require__(197),setToStringTag=__webpack_require__(120),setSpecies=__webpack_require__(355),isObject=__webpack_require__(40),aFunction=__webpack_require__(121),anInstance=__webpack_require__(198),classof=__webpack_require__(89),inspectSource=__webpack_require__(243),iterate=__webpack_require__(199),checkCorrectnessOfIteration=__webpack_require__(256),speciesConstructor=__webpack_require__(606),task=__webpack_require__(269).set,microtask=__webpack_require__(607),promiseResolve=__webpack_require__(608),hostReportErrors=__webpack_require__(609),newPromiseCapabilityModule=__webpack_require__(357),perform=__webpack_require__(610),InternalStateModule=__webpack_require__(107),isForced=__webpack_require__(193),wellKnownSymbol=__webpack_require__(39),V8_VERSION=__webpack_require__(251),SPECIES=wellKnownSymbol("species"),PROMISE="Promise",getInternalState=InternalStateModule.get,setInternalState=InternalStateModule.set,getInternalPromiseState=InternalStateModule.getterFor(PROMISE),PromiseConstructor=NativePromise,TypeError=global.TypeError,document=global.document,process=global.process,$fetch=getBuiltIn("fetch"),newPromiseCapability=newPromiseCapabilityModule.f,newGenericPromiseCapability=newPromiseCapability,IS_NODE="process"==classof(process),DISPATCH_EVENT=!!(document&&document.createEvent&&global.dispatchEvent),FORCED=isForced(PROMISE,(function(){if(!(inspectSource(PromiseConstructor)!==String(PromiseConstructor))){if(66===V8_VERSION)return!0;if(!IS_NODE&&"function"!=typeof PromiseRejectionEvent)return!0}if(IS_PURE&&!PromiseConstructor.prototype.finally)return!0;if(V8_VERSION>=51&&/native code/.test(PromiseConstructor))return!1;var promise=PromiseConstructor.resolve(1),FakePromise=function(exec){exec((function(){}),(function(){}))};return(promise.constructor={})[SPECIES]=FakePromise,!(promise.then((function(){}))instanceof FakePromise)})),INCORRECT_ITERATION=FORCED||!checkCorrectnessOfIteration((function(iterable){PromiseConstructor.all(iterable).catch((function(){}))})),isThenable=function(it){var then;return!(!isObject(it)||"function"!=typeof(then=it.then))&&then},notify=function(promise,state,isReject){if(!state.notified){state.notified=!0;var chain=state.reactions;microtask((function(){for(var value=state.value,ok=1==state.state,index=0;chain.length>index;){var result,then,exited,reaction=chain[index++],handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2===state.rejection&&onHandleUnhandled(promise,state),state.rejection=1),!0===handler?result=value:(domain&&domain.enter(),result=handler(value),domain&&(domain.exit(),exited=!0)),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(error){domain&&!exited&&domain.exit(),reject(error)}}state.reactions=[],state.notified=!1,isReject&&!state.rejection&&onUnhandled(promise,state)}))}},dispatchEvent=function(name,promise,reason){var event,handler;DISPATCH_EVENT?((event=document.createEvent("Event")).promise=promise,event.reason=reason,event.initEvent(name,!1,!0),global.dispatchEvent(event)):event={promise:promise,reason:reason},(handler=global["on"+name])?handler(event):"unhandledrejection"===name&&hostReportErrors("Unhandled promise rejection",reason)},onUnhandled=function(promise,state){task.call(global,(function(){var result,value=state.value;if(isUnhandled(state)&&(result=perform((function(){IS_NODE?process.emit("unhandledRejection",value,promise):dispatchEvent("unhandledrejection",promise,value)})),state.rejection=IS_NODE||isUnhandled(state)?2:1,result.error))throw result.value}))},isUnhandled=function(state){return 1!==state.rejection&&!state.parent},onHandleUnhandled=function(promise,state){task.call(global,(function(){IS_NODE?process.emit("rejectionHandled",promise):dispatchEvent("rejectionhandled",promise,state.value)}))},bind=function(fn,promise,state,unwrap){return function(value){fn(promise,state,value,unwrap)}},internalReject=function(promise,state,value,unwrap){state.done||(state.done=!0,unwrap&&(state=unwrap),state.value=value,state.state=2,notify(promise,state,!0))},internalResolve=function(promise,state,value,unwrap){if(!state.done){state.done=!0,unwrap&&(state=unwrap);try{if(promise===value)throw TypeError("Promise can't be resolved itself");var then=isThenable(value);then?microtask((function(){var wrapper={done:!1};try{then.call(value,bind(internalResolve,promise,wrapper,state),bind(internalReject,promise,wrapper,state))}catch(error){internalReject(promise,wrapper,error,state)}})):(state.value=value,state.state=1,notify(promise,state,!1))}catch(error){internalReject(promise,{done:!1},error,state)}}};FORCED&&(PromiseConstructor=function Promise(executor){anInstance(this,PromiseConstructor,PROMISE),aFunction(executor),Internal.call(this);var state=getInternalState(this);try{executor(bind(internalResolve,this,state),bind(internalReject,this,state))}catch(error){internalReject(this,state,error)}},(Internal=function Promise(executor){setInternalState(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=redefineAll(PromiseConstructor.prototype,{then:function then(onFulfilled,onRejected){var state=getInternalPromiseState(this),reaction=newPromiseCapability(speciesConstructor(this,PromiseConstructor));return reaction.ok="function"!=typeof onFulfilled||onFulfilled,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=IS_NODE?process.domain:void 0,state.parent=!0,state.reactions.push(reaction),0!=state.state&&notify(this,state,!1),reaction.promise},catch:function(onRejected){return this.then(void 0,onRejected)}}),OwnPromiseCapability=function(){var promise=new Internal,state=getInternalState(promise);this.promise=promise,this.resolve=bind(internalResolve,promise,state),this.reject=bind(internalReject,promise,state)},newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===PromiseConstructor||C===PromiseWrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)},IS_PURE||"function"!=typeof NativePromise||(nativeThen=NativePromise.prototype.then,redefine(NativePromise.prototype,"then",(function then(onFulfilled,onRejected){var that=this;return new PromiseConstructor((function(resolve,reject){nativeThen.call(that,resolve,reject)})).then(onFulfilled,onRejected)}),{unsafe:!0}),"function"==typeof $fetch&&$({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(input){return promiseResolve(PromiseConstructor,$fetch.apply(global,arguments))}}))),$({global:!0,wrap:!0,forced:FORCED},{Promise:PromiseConstructor}),setToStringTag(PromiseConstructor,PROMISE,!1,!0),setSpecies(PROMISE),PromiseWrapper=getBuiltIn(PROMISE),$({target:PROMISE,stat:!0,forced:FORCED},{reject:function reject(r){var capability=newPromiseCapability(this);return capability.reject.call(void 0,r),capability.promise}}),$({target:PROMISE,stat:!0,forced:IS_PURE||FORCED},{resolve:function resolve(x){return promiseResolve(IS_PURE&&this===PromiseWrapper?PromiseConstructor:this,x)}}),$({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function all(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,result=perform((function(){var $promiseResolve=aFunction(C.resolve),values=[],counter=0,remaining=1;iterate(iterable,(function(promise){var index=counter++,alreadyCalled=!1;values.push(void 0),remaining++,$promiseResolve.call(C,promise).then((function(value){alreadyCalled||(alreadyCalled=!0,values[index]=value,--remaining||resolve(values))}),reject)})),--remaining||resolve(values)}));return result.error&&reject(result.value),capability.promise},race:function race(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,result=perform((function(){var $promiseResolve=aFunction(C.resolve);iterate(iterable,(function(promise){$promiseResolve.call(C,promise).then(capability.resolve,reject)}))}));return result.error&&reject(result.value),capability.promise}})},function(module,exports,__webpack_require__){var redefine=__webpack_require__(69);module.exports=function(target,src,options){for(var key in src)redefine(target,key,src[key],options);return target}},function(module,exports){module.exports=function(it,Constructor,name){if(!(it instanceof Constructor))throw TypeError("Incorrect "+(name?name+" ":"")+"invocation");return it}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(51),isArrayIteratorMethod=__webpack_require__(344),toLength=__webpack_require__(90),bind=__webpack_require__(166),getIteratorMethod=__webpack_require__(345),callWithSafeIterationClosing=__webpack_require__(343),Result=function(stopped,result){this.stopped=stopped,this.result=result};(module.exports=function(iterable,fn,that,AS_ENTRIES,IS_ITERATOR){var iterator,iterFn,index,length,result,next,step,boundFunction=bind(fn,that,AS_ENTRIES?2:1);if(IS_ITERATOR)iterator=iterable;else{if("function"!=typeof(iterFn=getIteratorMethod(iterable)))throw TypeError("Target is not iterable");if(isArrayIteratorMethod(iterFn)){for(index=0,length=toLength(iterable.length);length>index;index++)if((result=AS_ENTRIES?boundFunction(anObject(step=iterable[index])[0],step[1]):boundFunction(iterable[index]))&&result instanceof Result)return result;return new Result(!1)}iterator=iterFn.call(iterable)}for(next=iterator.next;!(step=next.call(iterator)).done;)if("object"==typeof(result=callWithSafeIterationClosing(iterator,boundFunction,step.value,AS_ENTRIES))&&result&&result instanceof Result)return result;return new Result(!1)}).stop=function(result){return new Result(!0,result)}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),defineProperty=__webpack_require__(52).f,FunctionPrototype=Function.prototype,FunctionPrototypeToString=FunctionPrototype.toString,nameRE=/^\s*function ([^ (]*)/;DESCRIPTORS&&!("name"in FunctionPrototype)&&defineProperty(FunctionPrototype,"name",{configurable:!0,get:function(){try{return FunctionPrototypeToString.call(this).match(nameRE)[1]}catch(error){return""}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isExportStory=function isExportStory(key,_ref){var includeStories=_ref.includeStories,excludeStories=_ref.excludeStories;return"__esModule"!==key&&(!includeStories||matches(key,includeStories))&&(!excludeStories||!matches(key,excludeStories))},exports.parseKind=exports.storyNameFromExport=exports.toId=exports.sanitize=void 0;var _startCase=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(626));function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr))&&"[object Arguments]"!==Object.prototype.toString.call(arr))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var sanitize=function sanitize(string){return string.toLowerCase().replace(/[ '`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")};exports.sanitize=sanitize;var sanitizeSafe=function sanitizeSafe(string,part){var sanitized=sanitize(string);if(""===sanitized)throw new Error("Invalid ".concat(part," '").concat(string,"', must include alphanumeric characters"));return sanitized};exports.toId=function toId(kind,name){return"".concat(sanitizeSafe(kind,"kind"),"--").concat(sanitizeSafe(name,"name"))};function matches(storyKey,arrayOrRegex){return Array.isArray(arrayOrRegex)?arrayOrRegex.includes(storyKey):storyKey.match(arrayOrRegex)}exports.storyNameFromExport=function storyNameFromExport(key){return(0,_startCase.default)(key)};exports.parseKind=function parseKind(kind,_ref2){var rootSeparator=_ref2.rootSeparator,groupSeparator=_ref2.groupSeparator,_kind$split2=_slicedToArray(kind.split(rootSeparator,2),2),root=_kind$split2[0],remainder=_kind$split2[1];return{root:remainder?root:null,groups:(remainder||kind).split(groupSeparator).filter((function(i){return!!i}))}}},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(632);module.exports=function toString(value){return null==value?"":baseToString(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(71).Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(145),isObjectLike=__webpack_require__(123);module.exports=function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&"[object Symbol]"==baseGetTag(value)}},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(649),listCacheDelete=__webpack_require__(650),listCacheGet=__webpack_require__(651),listCacheHas=__webpack_require__(652),listCacheSet=__webpack_require__(653);function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},function(module,exports,__webpack_require__){var eq=__webpack_require__(173);module.exports=function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(124)(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(671);module.exports=function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(273),isLength=__webpack_require__(376);module.exports=function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},function(module,exports){function _typeof(obj){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?module.exports=_typeof=function _typeof(obj){return typeof obj}:module.exports=_typeof=function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}module.exports=_typeof},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return deckgl_DeckGL}));var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(7),getPrototypeOf=__webpack_require__(3),assertThisInitialized=__webpack_require__(6),inherits=__webpack_require__(8),react=__webpack_require__(5),react_default=__webpack_require__.n(react),prop_types=__webpack_require__(4),prop_types_default=__webpack_require__.n(prop_types),defineProperty=__webpack_require__(0),slicedToArray=__webpack_require__(11),channelHandles=1,animationHandles=1,timeline_Timeline=function(){function Timeline(){Object(classCallCheck.a)(this,Timeline),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return Object(createClass.a)(Timeline,[{key:"addChannel",value:function addChannel(props){var _props$delay=props.delay,delay=void 0===_props$delay?0:_props$delay,_props$duration=props.duration,duration=void 0===_props$duration?Number.POSITIVE_INFINITY:_props$duration,_props$rate=props.rate,rate=void 0===_props$rate?1:_props$rate,_props$repeat=props.repeat,handle=channelHandles++,channel={time:0,delay:delay,duration:duration,rate:rate,repeat:void 0===_props$repeat?1:_props$repeat};return this._setChannelTime(channel,this.time),this.channels.set(handle,channel),handle}},{key:"removeChannel",value:function removeChannel(handle){this.channels.delete(handle);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.animations[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=Object(slicedToArray.a)(_step.value,2),animationHandle=_step$value[0];_step$value[1].channel===handle&&this.detachAnimation(animationHandle)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"isFinished",value:function isFinished(handle){var channel=this.channels.get(handle);return void 0!==channel&&this.time>=channel.delay+channel.duration*channel.repeat}},{key:"getTime",value:function getTime(handle){if(void 0===handle)return this.time;var channel=this.channels.get(handle);return void 0===channel?-1:channel.time}},{key:"setTime",value:function setTime(time){this.time=Math.max(0,time);var channels=this.channels.values(),_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=channels[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var channel=_step2.value;this._setChannelTime(channel,this.time)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var animations=this.animations.values(),_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=animations[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var animationData=_step3.value,animation=animationData.animation,_channel=animationData.channel;animation.setTime(this.getTime(_channel))}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}},{key:"play",value:function play(){this.playing=!0}},{key:"pause",value:function pause(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function reset(){this.setTime(0)}},{key:"attachAnimation",value:function attachAnimation(animation,channelHandle){var animationHandle=animationHandles++;return this.animations.set(animationHandle,{animation:animation,channel:channelHandle}),animation.setTime(this.getTime(channelHandle)),animationHandle}},{key:"detachAnimation",value:function detachAnimation(handle){this.animations.delete(handle)}},{key:"update",value:function update(engineTime){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=engineTime),this.setTime(this.time+(engineTime-this.lastEngineTime)),this.lastEngineTime=engineTime)}},{key:"_setChannelTime",value:function _setChannelTime(channel,time){var offsetTime=time-channel.delay;offsetTime>=channel.duration*channel.repeat?channel.time=channel.duration*channel.rate:(channel.time=Math.max(0,offsetTime)%channel.duration,channel.time*=channel.rate)}}]),Timeline}(),lib_layer=__webpack_require__(220),constants=__webpack_require__(37),log=__webpack_require__(20),esm_debug=__webpack_require__(36),flatten=__webpack_require__(116),esm=__webpack_require__(799),load=__webpack_require__(814),resource_Resource=function(){function Resource(id,data,context){Object(classCallCheck.a)(this,Resource),this.id=id,this.context=context,this._loadCount=0,this._subscribers=new Set,this.setData(data)}return Object(createClass.a)(Resource,[{key:"subscribe",value:function subscribe(consumer){this._subscribers.add(consumer)}},{key:"unsubscribe",value:function unsubscribe(consumer){this._subscribers.delete(consumer)}},{key:"inUse",value:function inUse(){return this._subscribers.size>0}},{key:"delete",value:function _delete(){}},{key:"getData",value:function getData(){var _this=this;return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((function(){return _this.getData()}))}},{key:"setData",value:function setData(data,forceUpdate){var _this2=this;if(data!==this._data||forceUpdate){this._data=data;var loadCount=++this._loadCount,loader=data;"string"==typeof data&&(loader=Object(load.a)(data)),loader instanceof Promise?(this.isLoaded=!1,this._loader=loader.then((function(result){_this2._loadCount===loadCount&&(_this2.isLoaded=!0,_this2._error=null,_this2._content=result)})).catch((function(error){_this2._loadCount===loadCount&&(_this2.isLoaded=!0,_this2._error=error||!0)}))):(this.isLoaded=!0,this._error=null,this._content=data);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this._subscribers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.onChange(this.getData())}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}}]),Resource}(),resource_manager_ResourceManager=function(){function ResourceManager(_ref){var gl=_ref.gl,protocol=_ref.protocol;Object(classCallCheck.a)(this,ResourceManager),this.protocol=protocol||"resource://",this._context={gl:gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}return Object(createClass.a)(ResourceManager,[{key:"contains",value:function contains(resourceId){return!!resourceId.startsWith(this.protocol)||resourceId in this._resources}},{key:"add",value:function add(_ref2){var resourceId=_ref2.resourceId,data=_ref2.data,_ref2$forceUpdate=_ref2.forceUpdate,forceUpdate=void 0!==_ref2$forceUpdate&&_ref2$forceUpdate,_ref2$persistent=_ref2.persistent,persistent=void 0===_ref2$persistent||_ref2$persistent,res=this._resources[resourceId];res?res.setData(data,forceUpdate):(res=new resource_Resource(resourceId,data,this._context),this._resources[resourceId]=res),res.persistent=persistent}},{key:"remove",value:function remove(resourceId){var res=this._resources[resourceId];res&&(res.delete(),delete this._resources[resourceId])}},{key:"unsubscribe",value:function unsubscribe(_ref3){var consumerId=_ref3.consumerId,consumer=this._consumers[consumerId];if(consumer){for(var requestId in consumer){var request=consumer[requestId];request.resource&&request.resource.unsubscribe(request)}delete this._consumers[consumerId],this.prune()}}},{key:"subscribe",value:function subscribe(_ref4){var resourceId=_ref4.resourceId,onChange=_ref4.onChange,consumerId=_ref4.consumerId,_ref4$requestId=_ref4.requestId,requestId=void 0===_ref4$requestId?"default":_ref4$requestId,resources=this._resources,protocol=this.protocol;resourceId.startsWith(protocol)&&(resources[resourceId=resourceId.replace(protocol,"")]||this.add({resourceId:resourceId,data:null,persistent:!1}));var res=resources[resourceId];if(this._track(consumerId,requestId,res,onChange),res)return res.getData()}},{key:"prune",value:function prune(){var _this=this;this._pruneRequest||(this._pruneRequest=setTimeout((function(){return _this._prune()}),0))}},{key:"finalize",value:function finalize(){for(var key in this._resources)this._resources[key].delete()}},{key:"_track",value:function _track(consumerId,requestId,resource,onChange){var consumers=this._consumers,consumer=consumers[consumerId]=consumers[consumerId]||{},request=consumer[requestId]||{};request.resource&&(request.resource.unsubscribe(request),request.resource=null,this.prune()),resource&&(consumer[requestId]=request,request.onChange=onChange,request.resource=resource,resource.subscribe(request))}},{key:"_prune",value:function _prune(){this._pruneRequest=null;for(var _i=0,_Object$keys=Object.keys(this._resources);_i<_Object$keys.length;_i++){var key=_Object$keys[_i],res=this._resources[key];res.persistent||res.inUse()||(res.delete(),delete this._resources[key])}}}]),ResourceManager}(),viewports_viewport=__webpack_require__(127),program_manager=__webpack_require__(420),geometry={name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},project=__webpack_require__(125),DEFAULT_MODULES=[geometry,project.a],SHADER_HOOKS=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function createProgramManager(gl){var programManager=program_manager.a.getDefaultProgramManager(gl),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=DEFAULT_MODULES[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var shaderModule=_step.value;programManager.addDefaultModule(shaderModule)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=SHADER_HOOKS[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var shaderHook=_step2.value;programManager.addShaderHook(shaderHook)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return programManager}var INITIAL_CONTEXT=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),layer_manager_layerName=function layerName(layer){return layer instanceof lib_layer.a?"".concat(layer):layer?"invalid":"null"},layer_manager_LayerManager=function(){function LayerManager(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},deck=_ref.deck,stats=_ref.stats,viewport=_ref.viewport,timeline=_ref.timeline;Object(classCallCheck.a)(this,LayerManager),this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new resource_manager_ResourceManager({gl:gl,protocol:"deck://"}),this.context=Object.assign({},INITIAL_CONTEXT,{layerManager:this,gl:gl,deck:deck,programManager:gl&&createProgramManager(gl),stats:stats||new esm.a({id:"deck.gl"}),viewport:viewport||new viewports_viewport.a({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:timeline||new timeline_Timeline,resourceManager:this.resourceManager}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this._onError=null,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}return Object(createClass.a)(LayerManager,[{key:"finalize",value:function finalize(){this.resourceManager.finalize();var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.layers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var layer=_step.value;this._finalizeLayer(layer)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this._needsRedraw;opts.clearRedrawFlags&&(this._needsRedraw=!1);var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.layers[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var layer=_step2.value,layerNeedsRedraw=layer.getNeedsRedraw(opts);redraw=redraw||layerNeedsRedraw}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return redraw}},{key:"needsUpdate",value:function needsUpdate(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function setNeedsRedraw(reason){this._needsRedraw=this._needsRedraw||reason}},{key:"setNeedsUpdate",value:function setNeedsUpdate(reason){this._needsUpdate=this._needsUpdate||reason}},{key:"getLayers",value:function getLayers(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref2$layerIds=_ref2.layerIds,layerIds=void 0===_ref2$layerIds?null:_ref2$layerIds;return layerIds?this.layers.filter((function(layer){return layerIds.find((function(layerId){return 0===layer.id.indexOf(layerId)}))})):this.layers}},{key:"setProps",value:function setProps(props){"debug"in props&&(this._debug=props.debug),"userData"in props&&(this.context.userData=props.userData),"layers"in props&&this.setLayers(props.layers),"onError"in props&&(this._onError=props.onError)}},{key:"setLayers",value:function setLayers(newLayers){var forceUpdate=arguments.length>1&&void 0!==arguments[1]&&arguments[1],shouldUpdate=forceUpdate||newLayers!==this.lastRenderedLayers;if(Object(esm_debug.a)("layerManager.setLayers",this,shouldUpdate,newLayers),!shouldUpdate)return this;this.lastRenderedLayers=newLayers,newLayers=Object(flatten.b)(newLayers,Boolean);var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=newLayers[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var layer=_step3.value;layer.context=this.context}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return this._updateLayers(this.layers,newLayers),this}},{key:"updateLayers",value:function updateLayers(){var reason=this.needsUpdate();if(reason){this.setNeedsRedraw("updating layers: ".concat(reason));this.setLayers(this.lastRenderedLayers,!0)}}},{key:"activateViewport",value:function activateViewport(viewport){return Object(esm_debug.a)("layerManager.activateViewport",this,viewport),viewport&&(this.context.viewport=viewport),this}},{key:"_handleError",value:function _handleError(stage,error,layer){this._onError?this._onError(error,layer):log.a.error("error during ".concat(stage," of ").concat(layer_manager_layerName(layer)),error)()}},{key:"_updateLayers",value:function _updateLayers(oldLayers,newLayers){var oldLayerMap={},_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=oldLayers[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var oldLayer=_step4.value;oldLayerMap[oldLayer.id]?log.a.warn("Multiple old layers with same id ".concat(layer_manager_layerName(oldLayer)))():oldLayerMap[oldLayer.id]=oldLayer}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}var generatedLayers=[];this._updateSublayersRecursively(newLayers,oldLayerMap,generatedLayers),this._finalizeOldLayers(oldLayerMap);for(var needsUpdate=!1,_i=0,_generatedLayers=generatedLayers;_i<_generatedLayers.length;_i++){if(_generatedLayers[_i].hasUniformTransition()){needsUpdate=!0;break}}this._needsUpdate=needsUpdate,this.layers=generatedLayers}},{key:"_updateSublayersRecursively",value:function _updateSublayersRecursively(newLayers,oldLayerMap,generatedLayers){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=newLayers[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var newLayer=_step5.value;newLayer.context=this.context;var oldLayer=oldLayerMap[newLayer.id];null===oldLayer&&log.a.warn("Multiple new layers with same id ".concat(layer_manager_layerName(newLayer)))(),oldLayerMap[newLayer.id]=null;var sublayers=null;try{this._debug&&oldLayer!==newLayer&&newLayer.validateProps(),oldLayer?(this._transferLayerState(oldLayer,newLayer),this._updateLayer(newLayer)):this._initializeLayer(newLayer),generatedLayers.push(newLayer),sublayers=newLayer.isComposite&&newLayer.getSubLayers()}catch(err){this._handleError("matching",err,newLayer)}sublayers&&this._updateSublayersRecursively(sublayers,oldLayerMap,generatedLayers)}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{_iteratorNormalCompletion5||null==_iterator5.return||_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}},{key:"_finalizeOldLayers",value:function _finalizeOldLayers(oldLayerMap){for(var layerId in oldLayerMap){var layer=oldLayerMap[layerId];layer&&this._finalizeLayer(layer)}}},{key:"_initializeLayer",value:function _initializeLayer(layer){try{layer._initialize(),layer.lifecycle=constants.a.INITIALIZED}catch(err){this._handleError("initialization",err,layer)}}},{key:"_transferLayerState",value:function _transferLayerState(oldLayer,newLayer){newLayer._transferState(oldLayer),newLayer.lifecycle=constants.a.MATCHED,newLayer!==oldLayer&&(oldLayer.lifecycle=constants.a.AWAITING_GC)}},{key:"_updateLayer",value:function _updateLayer(layer){try{layer._update()}catch(err){this._handleError("update",err,layer)}}},{key:"_finalizeLayer",value:function _finalizeLayer(layer){this._needsRedraw=this._needsRedraw||"finalized ".concat(layer_manager_layerName(layer)),layer.lifecycle=constants.a.AWAITING_FINALIZATION;try{layer._finalize(),layer.lifecycle=constants.a.FINALIZED}catch(err){this._handleError("finalization",err,layer)}}}]),LayerManager}(),assert=__webpack_require__(26);function deepEqual(a,b){if(a===b)return!0;if(!a||!b)return!1;for(var key in a){var aValue=a[key],bValue=b[key];if(!(aValue===bValue||Array.isArray(aValue)&&Array.isArray(bValue)&&deepEqual(aValue,bValue)))return!1}return!0}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var view_manager_ViewManager=function(){function ViewManager(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,ViewManager),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=props.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=props.eventManager,this._eventCallbacks={onViewStateChange:props.onViewStateChange,onInteractiveStateChange:props.onInteractiveStateChange},Object.seal(this),this.setProps(props)}return Object(createClass.a)(ViewManager,[{key:"finalize",value:function finalize(){for(var key in this.controllers)this.controllers[key]&&this.controllers[key].finalize();this.controllers={}}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}},{key:"setNeedsUpdate",value:function setNeedsUpdate(reason){this._needsUpdate=this._needsUpdate||reason,this._needsRedraw=this._needsRedraw||reason}},{key:"updateViewStates",value:function updateViewStates(){for(var viewId in this.controllers){var controller=this.controllers[viewId];controller&&controller.updateTransition()}}},{key:"getViewports",value:function getViewports(rect){return rect?this._viewports.filter((function(viewport){return viewport.containsPixel(rect)})):this._viewports}},{key:"getViews",value:function getViews(){var viewMap={};return this.views.forEach((function(view){viewMap[view.id]=view})),viewMap}},{key:"getView",value:function getView(viewOrViewId){return"string"==typeof viewOrViewId?this.views.find((function(view){return view.id===viewOrViewId})):viewOrViewId}},{key:"getViewState",value:function getViewState(viewId){var view=this.getView(viewId),viewState=view&&this.viewState[view.getViewStateId()]||this.viewState;return view?view.filterViewState(viewState):viewState}},{key:"getViewport",value:function getViewport(viewId){return this._viewportMap[viewId]}},{key:"unproject",value:function unproject(xyz,opts){for(var viewports=this.getViewports(),pixel={x:xyz[0],y:xyz[1]},i=viewports.length-1;i>=0;--i){var viewport=viewports[i];if(viewport.containsPixel(pixel)){var p=xyz.slice();return p[0]-=viewport.x,p[1]-=viewport.y,viewport.unproject(p,opts)}}return null}},{key:"setProps",value:function setProps(props){"views"in props&&this._setViews(props.views),"viewState"in props&&this._setViewState(props.viewState),("width"in props||"height"in props)&&this._setSize(props.width,props.height),this._isUpdating||this._update()}},{key:"_update",value:function _update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function _setSize(width,height){Object(assert.a)(Number.isFinite(width)&&Number.isFinite(height)),width===this.width&&height===this.height||(this.width=width,this.height=height,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function _setViews(views){views=Object(flatten.b)(views,Boolean),this._diffViews(views,this.views)&&this.setNeedsUpdate("views changed"),this.views=views}},{key:"_setViewState",value:function _setViewState(viewState){viewState?(!deepEqual(viewState,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=viewState):log.a.warn("missing `viewState` or `initialViewState`")()}},{key:"_onViewStateChange",value:function _onViewStateChange(viewId,event){event.viewId=viewId,this._eventCallbacks.onViewStateChange(event)}},{key:"_createController",value:function _createController(view,props){return new(0,props.type)(_objectSpread({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,props.id),onStateChange:this._eventCallbacks.onInteractiveStateChange,makeViewport:view._getViewport.bind(view)},props))}},{key:"_updateController",value:function _updateController(view,viewState,viewport,controller){var controllerProps=view.controller;return controllerProps?(controllerProps=_objectSpread({},viewState,{},view.props,{},controllerProps,{id:view.id,x:viewport.x,y:viewport.y,width:viewport.width,height:viewport.height}),controller?controller.setProps(controllerProps):controller=this._createController(view,controllerProps),controller):null}},{key:"_rebuildViewports",value:function _rebuildViewports(){var width=this.width,height=this.height,views=this.views,oldControllers=this.controllers;this._viewports=[],this.controllers={};for(var i=views.length;i--;){var view=views[i],viewState=this.getViewState(view),viewport=view.makeViewport({width:width,height:height,viewState:viewState});this.controllers[view.id]=this._updateController(view,viewState,viewport,oldControllers[view.id]),this._viewports.unshift(viewport)}for(var id in oldControllers)oldControllers[id]&&!this.controllers[id]&&oldControllers[id].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function _buildViewportMap(){var _this=this;this._viewportMap={},this._viewports.forEach((function(viewport){viewport.id&&(_this._viewportMap[viewport.id]=_this._viewportMap[viewport.id]||viewport)}))}},{key:"_diffViews",value:function _diffViews(newViews,oldViews){return newViews.length!==oldViews.length||newViews.some((function(_,i){return!newViews[i].equals(oldViews[i])}))}}]),ViewManager}(),esm_typeof=__webpack_require__(14),PERCENT_OR_PIXELS_REGEX=/([0-9]+\.?[0-9]*)(%|px)/;function parsePosition(value){switch(Object(esm_typeof.a)(value)){case"number":return{position:value,relative:!1};case"string":var match=value.match(PERCENT_OR_PIXELS_REGEX);if(match&&match.length>=3){var relative="%"===match[2],position=parseFloat(match[1]);return{position:relative?position/100:position,relative:relative}}default:throw new Error("Could not parse position string ".concat(value))}}function getPosition(position,extent){return position.relative?Math.round(position.position*extent):position.position}function view_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var view_View=function(){function View(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,View);var _props$id=props.id,id=void 0===_props$id?null:_props$id,_props$x=props.x,x=void 0===_props$x?0:_props$x,_props$y=props.y,y=void 0===_props$y?0:_props$y,_props$width=props.width,width=void 0===_props$width?"100%":_props$width,_props$height=props.height,height=void 0===_props$height?"100%":_props$height,_props$projectionMatr=props.projectionMatrix,projectionMatrix=void 0===_props$projectionMatr?null:_props$projectionMatr,_props$fovy=props.fovy,fovy=void 0===_props$fovy?50:_props$fovy,_props$near=props.near,near=void 0===_props$near?.1:_props$near,_props$far=props.far,far=void 0===_props$far?1e3:_props$far,_props$modelMatrix=props.modelMatrix,modelMatrix=void 0===_props$modelMatrix?null:_props$modelMatrix,_props$viewportInstan=props.viewportInstance,viewportInstance=void 0===_props$viewportInstan?null:_props$viewportInstan,_props$type=props.type,type=void 0===_props$type?viewports_viewport.a:_props$type;Object(assert.a)(!viewportInstance||viewportInstance instanceof viewports_viewport.a),this.viewportInstance=viewportInstance,this.id=id||this.constructor.displayName||"view",this.type=type,this.props=Object.assign({},props,{id:this.id,projectionMatrix:projectionMatrix,fovy:fovy,near:near,far:far,modelMatrix:modelMatrix}),this._parseDimensions({x:x,y:y,width:width,height:height}),this.equals=this.equals.bind(this),Object.seal(this)}return Object(createClass.a)(View,[{key:"equals",value:function equals(view){return this===view||(this.viewportInstance?view.viewportInstance&&this.viewportInstance.equals(view.viewportInstance):deepEqual(this.props,view.props))}},{key:"makeViewport",value:function makeViewport(_ref){var width=_ref.width,height=_ref.height,viewState=_ref.viewState;if(this.viewportInstance)return this.viewportInstance;viewState=this.filterViewState(viewState);var viewportDimensions=this.getDimensions({width:width,height:height}),props=function view_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?view_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):view_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},viewState,{},this.props,{},viewportDimensions);return this._getViewport(props)}},{key:"getViewStateId",value:function getViewStateId(){switch(Object(esm_typeof.a)(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function filterViewState(viewState){if(this.props.viewState&&"object"===Object(esm_typeof.a)(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var newViewState=Object.assign({},viewState);for(var key in this.props.viewState)"id"!==key&&(newViewState[key]=this.props.viewState[key]);return newViewState}return viewState}},{key:"getDimensions",value:function getDimensions(_ref2){var width=_ref2.width,height=_ref2.height;return{x:getPosition(this._x,width),y:getPosition(this._y,height),width:getPosition(this._width,width),height:getPosition(this._height,height)}}},{key:"_getControllerProps",value:function _getControllerProps(defaultOpts){var opts=this.props.controller;return opts?!0===opts?defaultOpts:("function"==typeof opts&&(opts={type:opts}),Object.assign({},defaultOpts,opts)):null}},{key:"_getViewport",value:function _getViewport(props){return new(0,this.type)(props)}},{key:"_parseDimensions",value:function _parseDimensions(_ref3){var x=_ref3.x,y=_ref3.y,width=_ref3.width,height=_ref3.height;this._x=parsePosition(x),this._y=parsePosition(y),this._width=parsePosition(width),this._height=parsePosition(height)}}]),View}(),web_mercator_viewport=__webpack_require__(218),dist_esm=__webpack_require__(19),transition_interpolator_TransitionInterpolator=function(){function TransitionInterpolator(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,TransitionInterpolator),Array.isArray(opts)&&(opts={compare:opts,extract:opts,required:opts});var _opts=opts,compare=_opts.compare,extract=_opts.extract,required=_opts.required;this._propsToCompare=compare,this._propsToExtract=extract,this._requiredProps=required}return Object(createClass.a)(TransitionInterpolator,[{key:"arePropsEqual",value:function arePropsEqual(currentProps,nextProps){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=(this._propsToCompare||Object.keys(nextProps))[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;if(!(key in currentProps)||!(key in nextProps)||!Object(dist_esm.d)(currentProps[key],nextProps[key]))return!1}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return!0}},{key:"initializeProps",value:function initializeProps(startProps,endProps){var result;if(this._propsToExtract){var startViewStateProps={},endViewStateProps={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this._propsToExtract[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var key=_step2.value;startViewStateProps[key]=startProps[key],endViewStateProps[key]=endProps[key]}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}result={start:startViewStateProps,end:endViewStateProps}}else result={start:startProps,end:endProps};return this._checkRequiredProps(result.start),this._checkRequiredProps(result.end),result}},{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){return endProps}},{key:"getDuration",value:function getDuration(startProps,endProps){return endProps.transitionDuration}},{key:"_checkRequiredProps",value:function _checkRequiredProps(props){this._requiredProps&&this._requiredProps.forEach((function(propName){var value=props[propName];Object(assert.a)(Number.isFinite(value)||Array.isArray(value),"".concat(propName," is required for transition"))}))}}]),TransitionInterpolator}(),DEFAULT_PROPS=["longitude","latitude","zoom","bearing","pitch"],DEFAULT_REQUIRED_PROPS=["longitude","latitude","zoom"],linear_interpolator_LinearInterpolator=function(_TransitionInterpolat){function LinearInterpolator(transitionProps){return Object(classCallCheck.a)(this,LinearInterpolator),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(LinearInterpolator).call(this,transitionProps||{compare:DEFAULT_PROPS,extract:DEFAULT_PROPS,required:DEFAULT_REQUIRED_PROPS}))}return Object(inherits.a)(LinearInterpolator,_TransitionInterpolat),Object(createClass.a)(LinearInterpolator,[{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){var viewport={};for(var key in endProps)viewport[key]=Object(dist_esm.e)(startProps[key]||0,endProps[key]||0,t);return viewport}}]),LinearInterpolator}(transition_interpolator_TransitionInterpolator),transition=__webpack_require__(83),noop=function noop(){},TRANSITION_EVENTS_BREAK=1,TRANSITION_EVENTS_SNAP_TO_END=2,TRANSITION_EVENTS_IGNORE=3,transition_manager_DEFAULT_PROPS={transitionDuration:0,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new linear_interpolator_LinearInterpolator,transitionInterruption:TRANSITION_EVENTS_BREAK,onTransitionStart:noop,onTransitionInterrupt:noop,onTransitionEnd:noop},transition_manager_TransitionManager=function(){function TransitionManager(ControllerState){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,TransitionManager),this.ControllerState=ControllerState,this.props=Object.assign({},transition_manager_DEFAULT_PROPS,props),this.propsInTransition=null,this.transition=new transition.a(props.timeline),this.onViewStateChange=props.onViewStateChange,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return Object(createClass.a)(TransitionManager,[{key:"finalize",value:function finalize(){this.transition.cancel()}},{key:"getViewportInTransition",value:function getViewportInTransition(){return this.propsInTransition}},{key:"processViewStateChange",value:function processViewStateChange(nextProps){var transitionTriggered=!1,currentProps=this.props;if(nextProps=Object.assign({},transition_manager_DEFAULT_PROPS,nextProps),this.props=nextProps,this._shouldIgnoreViewportChange(currentProps,nextProps))return transitionTriggered;if(this._isTransitionEnabled(nextProps)){var _this$transition$sett=this.transition.settings,interruption=_this$transition$sett.interruption,endProps=_this$transition$sett.endProps,startProps=Object.assign({},currentProps,interruption===TRANSITION_EVENTS_SNAP_TO_END?endProps:this.propsInTransition||currentProps);this._triggerTransition(startProps,nextProps),transitionTriggered=!0}else this.transition.cancel();return transitionTriggered}},{key:"updateTransition",value:function updateTransition(){this.transition.update()}},{key:"_isTransitionEnabled",value:function _isTransitionEnabled(props){var transitionDuration=props.transitionDuration,transitionInterpolator=props.transitionInterpolator;return(transitionDuration>0||"auto"===transitionDuration)&&Boolean(transitionInterpolator)}},{key:"_isUpdateDueToCurrentTransition",value:function _isUpdateDueToCurrentTransition(props){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(props,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function _shouldIgnoreViewportChange(currentProps,nextProps){return this.transition.inProgress?this.transition.settings.interruption===TRANSITION_EVENTS_IGNORE||this._isUpdateDueToCurrentTransition(nextProps):!this._isTransitionEnabled(nextProps)||nextProps.transitionInterpolator.arePropsEqual(currentProps,nextProps)}},{key:"_triggerTransition",value:function _triggerTransition(startProps,endProps){var startViewstate=new this.ControllerState(startProps),endViewStateProps=new this.ControllerState(endProps).shortestPathFrom(startViewstate),transitionInterpolator=endProps.transitionInterpolator,duration=transitionInterpolator.getDuration?transitionInterpolator.getDuration(startProps,endProps):endProps.transitionDuration;if(0!==duration){var initialProps=endProps.transitionInterpolator.initializeProps(startProps,endViewStateProps);this.propsInTransition={},this.duration=duration,this.transition.start({duration:duration,easing:endProps.transitionEasing,interpolator:endProps.transitionInterpolator,interruption:endProps.transitionInterruption,startProps:initialProps.start,endProps:initialProps.end,onStart:endProps.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(endProps.onTransitionInterrupt),onEnd:this._onTransitionEnd(endProps.onTransitionEnd)}),this.updateTransition()}}},{key:"_onTransitionEnd",value:function _onTransitionEnd(callback){var _this=this;return function(transition){_this.propsInTransition=null,callback(transition)}}},{key:"_onTransitionUpdate",value:function _onTransitionUpdate(transition){var time=transition.time,_transition$settings=transition.settings,interpolator=_transition$settings.interpolator,startProps=_transition$settings.startProps,endProps=_transition$settings.endProps,duration=_transition$settings.duration,t=(0,_transition$settings.easing)(time/duration),viewport=interpolator.interpolateProps(startProps,endProps,t);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,viewport)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0},oldViewState:this.props})}}]),TransitionManager}();function controller_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}transition_manager_TransitionManager.defaultProps=transition_manager_DEFAULT_PROPS;var NO_TRANSITION_PROPS={transitionDuration:0},EVENT_TYPES_WHEEL=["wheel"],EVENT_TYPES_PAN=["panstart","panmove","panend"],EVENT_TYPES_PINCH=["pinchstart","pinchmove","pinchend"],EVENT_TYPES_DOUBLE_TAP=["doubletap"],EVENT_TYPES_KEYBOARD=["keydown"],controller_Controller=function(){function Controller(ControllerState){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,Controller),Object(assert.a)(ControllerState),this.ControllerState=ControllerState,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new transition_manager_TransitionManager(ControllerState,options),this._events=null,this._state={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(options)}return Object(createClass.a)(Controller,[{key:"finalize",value:function finalize(){for(var eventName in this._events)this._events[eventName]&&this.eventManager.off(eventName,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function handleEvent(event){var ControllerState=this.ControllerState;switch(this.controllerState=new ControllerState(function controller_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?controller_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):controller_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({makeViewport:this.makeViewport},this.controllerStateProps,{},this._state)),event.type){case"panstart":return this._onPanStart(event);case"panmove":return this._onPan(event);case"panend":return this._onPanEnd(event);case"pinchstart":return this._onPinchStart(event);case"pinchmove":return this._onPinch(event);case"pinchend":return this._onPinchEnd(event);case"doubletap":return this._onDoubleTap(event);case"wheel":return this._onWheel(event);case"keydown":return this._onKeyDown(event);default:return!1}}},{key:"getCenter",value:function getCenter(event){var _this$controllerState=this.controllerStateProps,x=_this$controllerState.x,y=_this$controllerState.y,offsetCenter=event.offsetCenter;return[offsetCenter.x-x,offsetCenter.y-y]}},{key:"isPointInBounds",value:function isPointInBounds(pos,event){var _this$controllerState2=this.controllerStateProps,width=_this$controllerState2.width,height=_this$controllerState2.height;if(event&&event.handled)return!1;var inside=pos[0]>=0&&pos[0]<=width&&pos[1]>=0&&pos[1]<=height;return inside&&event&&event.stopPropagation(),inside}},{key:"isFunctionKeyPressed",value:function isFunctionKeyPressed(event){var srcEvent=event.srcEvent;return Boolean(srcEvent.metaKey||srcEvent.altKey||srcEvent.ctrlKey||srcEvent.shiftKey)}},{key:"isDragging",value:function isDragging(){return this._state.isDragging}},{key:"setProps",value:function setProps(props){"onViewStateChange"in props&&(this.onViewStateChange=props.onViewStateChange),"onStateChange"in props&&(this.onStateChange=props.onStateChange),"makeViewport"in props&&(this.makeViewport=props.makeViewport),this.controllerStateProps=props,"eventManager"in props&&this.eventManager!==props.eventManager&&(this.eventManager=props.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var _props$scrollZoom=props.scrollZoom,scrollZoom=void 0===_props$scrollZoom||_props$scrollZoom,_props$dragPan=props.dragPan,dragPan=void 0===_props$dragPan||_props$dragPan,_props$dragRotate=props.dragRotate,dragRotate=void 0===_props$dragRotate||_props$dragRotate,_props$doubleClickZoo=props.doubleClickZoom,doubleClickZoom=void 0===_props$doubleClickZoo||_props$doubleClickZoo,_props$touchZoom=props.touchZoom,touchZoom=void 0===_props$touchZoom||_props$touchZoom,_props$touchRotate=props.touchRotate,touchRotate=void 0!==_props$touchRotate&&_props$touchRotate,_props$keyboard=props.keyboard,keyboard=void 0===_props$keyboard||_props$keyboard,isInteractive=Boolean(this.onViewStateChange);this.toggleEvents(EVENT_TYPES_WHEEL,isInteractive&&scrollZoom),this.toggleEvents(EVENT_TYPES_PAN,isInteractive&&(dragPan||dragRotate)),this.toggleEvents(EVENT_TYPES_PINCH,isInteractive&&(touchZoom||touchRotate)),this.toggleEvents(EVENT_TYPES_DOUBLE_TAP,isInteractive&&doubleClickZoom),this.toggleEvents(EVENT_TYPES_KEYBOARD,isInteractive&&keyboard),this.scrollZoom=scrollZoom,this.dragPan=dragPan,this.dragRotate=dragRotate,this.doubleClickZoom=doubleClickZoom,this.touchZoom=touchZoom,this.touchRotate=touchRotate,this.keyboard=keyboard}},{key:"updateTransition",value:function updateTransition(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function toggleEvents(eventNames,enabled){var _this=this;this.eventManager&&eventNames.forEach((function(eventName){_this._events[eventName]!==enabled&&(_this._events[eventName]=enabled,enabled?_this.eventManager.on(eventName,_this.handleEvent):_this.eventManager.off(eventName,_this.handleEvent))}))}},{key:"updateViewport",value:function updateViewport(newControllerState){var extraProps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},interactionState=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},viewState=Object.assign({},newControllerState.getViewportProps(),extraProps),changed=this.controllerState!==newControllerState;if(changed){var oldViewState=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:viewState,interactionState:interactionState,oldViewState:oldViewState})}Object.assign(this._state,newControllerState.getInteractiveState(),interactionState),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function _onPanStart(event){var pos=this.getCenter(event);if(!this.isPointInBounds(pos,event))return!1;var newControllerState=this.controllerState.panStart({pos:pos}).rotateStart({pos:pos});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}},{key:"_onPan",value:function _onPan(event){if(!this.isDragging())return!1;var alternateMode=this.isFunctionKeyPressed(event)||event.rightButton;return(alternateMode=this.invertPan?!alternateMode:alternateMode)?this._onPanMove(event):this._onPanRotate(event)}},{key:"_onPanEnd",value:function _onPanEnd(event){var newControllerState=this.controllerState.panEnd().rotateEnd();return this.updateViewport(newControllerState,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function _onPanMove(event){if(!this.dragPan)return!1;var pos=this.getCenter(event),newControllerState=this.controllerState.pan({pos:pos});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanRotate",value:function _onPanRotate(event){if(!this.dragRotate)return!1;var deltaX=event.deltaX,deltaY=event.deltaY,_this$controllerState3=this.controllerState.getViewportProps(),deltaScaleX=deltaX/_this$controllerState3.width,deltaScaleY=deltaY/_this$controllerState3.height,newControllerState=this.controllerState.rotate({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0,isRotating:!0}),!0}},{key:"_onWheel",value:function _onWheel(event){if(!this.scrollZoom)return!1;event.preventDefault();var pos=this.getCenter(event);if(!this.isPointInBounds(pos,event))return!1;var delta=event.delta,scale=2/(1+Math.exp(-Math.abs(.01*delta)));delta<0&&0!==scale&&(scale=1/scale);var newControllerState=this.controllerState.zoom({pos:pos,scale:scale});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isZooming:!0,isPanning:!0}),!0}},{key:"_onPinchStart",value:function _onPinchStart(event){var pos=this.getCenter(event);if(!this.isPointInBounds(pos,event))return!1;var newControllerState=this.controllerState.zoomStart({pos:pos}).rotateStart({pos:pos});return this._state.startPinchRotation=event.rotation,this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}},{key:"_onPinch",value:function _onPinch(event){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;var newControllerState=this.controllerState;if(this.touchZoom){var scale=event.scale,pos=this.getCenter(event);newControllerState=newControllerState.zoom({pos:pos,scale:scale})}if(this.touchRotate){var rotation=event.rotation,startPinchRotation=this._state.startPinchRotation;newControllerState=newControllerState.rotate({deltaScaleX:-(rotation-startPinchRotation)/180})}return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function _onPinchEnd(event){var newControllerState=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(newControllerState,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function _onDoubleTap(event){if(!this.doubleClickZoom)return!1;var pos=this.getCenter(event);if(!this.isPointInBounds(pos,event))return!1;var isZoomOut=this.isFunctionKeyPressed(event),newControllerState=this.controllerState.zoom({pos:pos,scale:isZoomOut?.5:2});return this.updateViewport(newControllerState,this._getTransitionProps(),{isZooming:!0,isPanning:!0}),!0}},{key:"_onKeyDown",value:function _onKeyDown(event){if(!this.keyboard)return!1;var newControllerState,funcKey=this.isFunctionKeyPressed(event),controllerState=this.controllerState,interactionState={};switch(event.srcEvent.keyCode){case 189:newControllerState=funcKey?controllerState.zoomOut().zoomOut():controllerState.zoomOut(),interactionState.isZooming=!0;break;case 187:newControllerState=funcKey?controllerState.zoomIn().zoomIn():controllerState.zoomIn(),interactionState.isZooming=!0;break;case 37:funcKey?(newControllerState=controllerState.rotateLeft(),interactionState.isRotating=!0):(newControllerState=controllerState.moveLeft(),interactionState.isPanning=!0);break;case 39:funcKey?(newControllerState=controllerState.rotateRight(),interactionState.isRotating=!0):(newControllerState=controllerState.moveRight(),interactionState.isPanning=!0);break;case 38:funcKey?(newControllerState=controllerState.rotateUp(),interactionState.isRotating=!0):(newControllerState=controllerState.moveUp(),interactionState.isPanning=!0);break;case 40:funcKey?(newControllerState=controllerState.rotateDown(),interactionState.isRotating=!0):(newControllerState=controllerState.moveDown(),interactionState.isPanning=!0);break;default:return!1}return this.updateViewport(newControllerState,this._getTransitionProps(),interactionState),!0}},{key:"_getTransitionProps",value:function _getTransitionProps(){return NO_TRANSITION_PROPS}},{key:"events",set:function set(customEvents){this.toggleEvents(this._customEvents,!1),this.toggleEvents(customEvents,!0),this._customEvents=customEvents,this.setProps(this.controllerStateProps)}}]),Controller}(),view_state_ViewState=function(){function ViewState(opts){Object(classCallCheck.a)(this,ViewState),Object(assert.a)(Number.isFinite(opts.width),"`width` must be supplied"),Object(assert.a)(Number.isFinite(opts.height),"`height` must be supplied"),this._viewportProps=this._applyConstraints(opts)}return Object(createClass.a)(ViewState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"shortestPathFrom",value:function shortestPathFrom(viewState){return this._viewportProps}},{key:"_applyConstraints",value:function _applyConstraints(props){return props}}]),ViewState}(),web_mercator_dist_esm=__webpack_require__(29);function map_controller_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function map_controller_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?map_controller_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):map_controller_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new linear_interpolator_LinearInterpolator,transitionInterruption:TRANSITION_EVENTS_BREAK},map_controller_NO_TRANSITION_PROPS={transitionDuration:0},MAPBOX_LIMITS_minZoom=0,MAPBOX_LIMITS_maxZoom=20,MAPBOX_LIMITS_minPitch=0,MAPBOX_LIMITS_maxPitch=60,DEFAULT_STATE_pitch=0,DEFAULT_STATE_bearing=0,DEFAULT_STATE_altitude=1.5,map_controller_MapState=function(_ViewState){function MapState(){var _this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},makeViewport=_ref.makeViewport,width=_ref.width,height=_ref.height,latitude=_ref.latitude,longitude=_ref.longitude,zoom=_ref.zoom,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?DEFAULT_STATE_bearing:_ref$bearing,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?DEFAULT_STATE_pitch:_ref$pitch,_ref$altitude=_ref.altitude,altitude=void 0===_ref$altitude?DEFAULT_STATE_altitude:_ref$altitude,_ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?MAPBOX_LIMITS_maxZoom:_ref$maxZoom,_ref$minZoom=_ref.minZoom,minZoom=void 0===_ref$minZoom?MAPBOX_LIMITS_minZoom:_ref$minZoom,_ref$maxPitch=_ref.maxPitch,maxPitch=void 0===_ref$maxPitch?MAPBOX_LIMITS_maxPitch:_ref$maxPitch,_ref$minPitch=_ref.minPitch,minPitch=void 0===_ref$minPitch?MAPBOX_LIMITS_minPitch:_ref$minPitch,startPanLngLat=_ref.startPanLngLat,startZoomLngLat=_ref.startZoomLngLat,startBearing=_ref.startBearing,startPitch=_ref.startPitch,startZoom=_ref.startZoom;return Object(classCallCheck.a)(this,MapState),Object(assert.a)(Number.isFinite(longitude),"`longitude` must be supplied"),Object(assert.a)(Number.isFinite(latitude),"`latitude` must be supplied"),Object(assert.a)(Number.isFinite(zoom),"`zoom` must be supplied"),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(MapState).call(this,{width:width,height:height,latitude:latitude,longitude:longitude,zoom:zoom,bearing:bearing,pitch:pitch,altitude:altitude,maxZoom:maxZoom,minZoom:minZoom,maxPitch:maxPitch,minPitch:minPitch})))._interactiveState={startPanLngLat:startPanLngLat,startZoomLngLat:startZoomLngLat,startBearing:startBearing,startPitch:startPitch,startZoom:startZoom},_this.makeViewport=makeViewport,_this}return Object(inherits.a)(MapState,_ViewState),Object(createClass.a)(MapState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(_ref2){var pos=_ref2.pos;return this._getUpdatedState({startPanLngLat:this._unproject(pos)})}},{key:"pan",value:function pan(_ref3){var pos=_ref3.pos,startPos=_ref3.startPos,startPanLngLat=this._interactiveState.startPanLngLat||this._unproject(startPos);if(!startPanLngLat)return this;var _this$_calculateNewLn=this._calculateNewLngLat({startPanLngLat:startPanLngLat,pos:pos}),_this$_calculateNewLn2=Object(slicedToArray.a)(_this$_calculateNewLn,2),longitude=_this$_calculateNewLn2[0],latitude=_this$_calculateNewLn2[1];return this._getUpdatedState({longitude:longitude,latitude:latitude})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function rotateStart(_ref4){_ref4.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function rotate(_ref5){var _ref5$deltaScaleX=_ref5.deltaScaleX,deltaScaleX=void 0===_ref5$deltaScaleX?0:_ref5$deltaScaleX,_ref5$deltaScaleY=_ref5.deltaScaleY,deltaScaleY=void 0===_ref5$deltaScaleY?0:_ref5$deltaScaleY,_this$_interactiveSta=this._interactiveState,startBearing=_this$_interactiveSta.startBearing,startPitch=_this$_interactiveSta.startPitch;if(!Number.isFinite(startBearing)||!Number.isFinite(startPitch))return this;var _this$_calculateNewPi=this._calculateNewPitchAndBearing({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY,startBearing:startBearing,startPitch:startPitch}),pitch=_this$_calculateNewPi.pitch,bearing=_this$_calculateNewPi.bearing;return this._getUpdatedState({bearing:bearing,pitch:pitch})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function zoomStart(_ref6){var pos=_ref6.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(pos),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(_ref7){var pos=_ref7.pos,startPos=_ref7.startPos,scale=_ref7.scale,_this$_interactiveSta2=this._interactiveState,startZoom=_this$_interactiveSta2.startZoom,startZoomLngLat=_this$_interactiveSta2.startZoomLngLat;Number.isFinite(startZoom)||(startZoom=this._viewportProps.zoom,startZoomLngLat=this._unproject(startPos)||this._unproject(pos));var zoom=this._calculateNewZoom({scale:scale,startZoom:startZoom}),_zoomedViewport$getMa=this.makeViewport(map_controller_objectSpread({},this._viewportProps,{zoom:zoom})).getMapCenterByLngLatPosition({lngLat:startZoomLngLat,pos:pos}),_zoomedViewport$getMa2=Object(slicedToArray.a)(_zoomedViewport$getMa,2),longitude=_zoomedViewport$getMa2[0],latitude=_zoomedViewport$getMa2[1];return this._getUpdatedState({zoom:zoom,longitude:longitude,latitude:latitude})}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function zoomIn(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function zoomOut(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function moveLeft(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function moveRight(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function moveUp(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function moveDown(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function rotateLeft(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function rotateRight(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function rotateUp(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function rotateDown(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function shortestPathFrom(viewState){var fromProps=viewState.getViewportProps(),props=Object.assign({},this._viewportProps),bearing=props.bearing,longitude=props.longitude;return Math.abs(bearing-fromProps.bearing)>180&&(props.bearing=bearing<0?bearing+360:bearing-360),Math.abs(longitude-fromProps.longitude)>180&&(props.longitude=longitude<0?longitude+360:longitude-360),props}},{key:"_zoomFromCenter",value:function _zoomFromCenter(scale){var _this$_viewportProps=this._viewportProps,width=_this$_viewportProps.width,height=_this$_viewportProps.height;return this.zoom({pos:[width/2,height/2],scale:scale})}},{key:"_panFromCenter",value:function _panFromCenter(offset){var _this$_viewportProps2=this._viewportProps,width=_this$_viewportProps2.width,height=_this$_viewportProps2.height;return this.pan({startPos:[width/2,height/2],pos:[width/2+offset[0],height/2+offset[1]]})}},{key:"_getUpdatedState",value:function _getUpdatedState(newProps){return new this.constructor(map_controller_objectSpread({makeViewport:this.makeViewport},this._viewportProps,{},this._interactiveState,{},newProps))}},{key:"_applyConstraints",value:function _applyConstraints(props){var maxZoom=props.maxZoom,minZoom=props.minZoom,zoom=props.zoom;props.zoom=Object(dist_esm.c)(zoom,minZoom,maxZoom);var maxPitch=props.maxPitch,minPitch=props.minPitch,pitch=props.pitch;return props.pitch=Object(dist_esm.c)(pitch,minPitch,maxPitch),Object.assign(props,Object(web_mercator_dist_esm.l)(props)),props}},{key:"_unproject",value:function _unproject(pos){var viewport=this.makeViewport(this._viewportProps);return pos&&viewport.unproject(pos)}},{key:"_calculateNewLngLat",value:function _calculateNewLngLat(_ref8){var startPanLngLat=_ref8.startPanLngLat,pos=_ref8.pos;return this.makeViewport(this._viewportProps).getMapCenterByLngLatPosition({lngLat:startPanLngLat,pos:pos})}},{key:"_calculateNewZoom",value:function _calculateNewZoom(_ref9){var scale=_ref9.scale,startZoom=_ref9.startZoom,_this$_viewportProps3=this._viewportProps,maxZoom=_this$_viewportProps3.maxZoom,minZoom=_this$_viewportProps3.minZoom,zoom=startZoom+Math.log2(scale);return Object(dist_esm.c)(zoom,minZoom,maxZoom)}},{key:"_calculateNewPitchAndBearing",value:function _calculateNewPitchAndBearing(_ref10){var deltaScaleX=_ref10.deltaScaleX,deltaScaleY=_ref10.deltaScaleY,startBearing=_ref10.startBearing,startPitch=_ref10.startPitch;deltaScaleY=Object(dist_esm.c)(deltaScaleY,-1,1);var _this$_viewportProps4=this._viewportProps,minPitch=_this$_viewportProps4.minPitch,maxPitch=_this$_viewportProps4.maxPitch,pitch=startPitch;return deltaScaleY>0?pitch=startPitch+deltaScaleY*(maxPitch-startPitch):deltaScaleY<0&&(pitch=startPitch-deltaScaleY*(minPitch-startPitch)),{pitch:pitch,bearing:startBearing+180*deltaScaleX}}}]),MapState}(view_state_ViewState),map_controller_MapController=function(_Controller){function MapController(props){var _this2;return Object(classCallCheck.a)(this,MapController),(_this2=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(MapController).call(this,map_controller_MapState,props))).invertPan=!0,_this2}return Object(inherits.a)(MapController,_Controller),Object(createClass.a)(MapController,[{key:"_getTransitionProps",value:function _getTransitionProps(){return LINEAR_TRANSITION_PROPS}},{key:"_onPanRotate",value:function _onPanRotate(event){if(!this.dragRotate)return!1;var deltaX=event.deltaX,deltaY=event.deltaY,_this$getCenter=this.getCenter(event),centerY=Object(slicedToArray.a)(_this$getCenter,2)[1],startY=centerY-deltaY,_this$controllerState=this.controllerState.getViewportProps(),width=_this$controllerState.width,height=_this$controllerState.height,deltaScaleX=deltaX/width,deltaScaleY=0;deltaY>0?Math.abs(height-startY)>5&&(deltaScaleY=deltaY/(startY-height)*1.2):deltaY<0&&startY>5&&(deltaScaleY=1-centerY/startY),deltaScaleY=Math.min(1,Math.max(-1,deltaScaleY));var newControllerState=this.controllerState.rotate({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY});return this.updateViewport(newControllerState,map_controller_NO_TRANSITION_PROPS,{isDragging:!0,isRotating:!0})}}]),MapController}(controller_Controller),map_view_MapView=function(_View){function MapView(props){return Object(classCallCheck.a)(this,MapView),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(MapView).call(this,Object.assign({},props,{type:web_mercator_viewport.a})))}return Object(inherits.a)(MapView,_View),Object(createClass.a)(MapView,[{key:"controller",get:function get(){return this._getControllerProps({type:map_controller_MapController})}}]),MapView}(view_View);map_view_MapView.displayName="MapView";var texture_2d=__webpack_require__(148),DEFAULT_LIGHT_COLOR=[255,255,255],idCount=0,ambient_light_AmbientLight=function AmbientLight(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,AmbientLight);var _props$color=props.color,color=void 0===_props$color?DEFAULT_LIGHT_COLOR:_props$color,_props$intensity=props.intensity,intensity=void 0===_props$intensity?1:_props$intensity;this.id=props.id||"ambient-".concat(idCount++),this.color=color,this.intensity=intensity,this.type="ambient"},directional_light_DEFAULT_LIGHT_COLOR=[255,255,255],DEFAULT_LIGHT_DIRECTION=[0,0,-1],directional_light_idCount=0,directional_light_DirectionalLight=function(){function DirectionalLight(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,DirectionalLight);var _props$color=props.color,color=void 0===_props$color?directional_light_DEFAULT_LIGHT_COLOR:_props$color,_props$intensity=props.intensity,intensity=void 0===_props$intensity?1:_props$intensity,_props$direction=props.direction,direction=void 0===_props$direction?DEFAULT_LIGHT_DIRECTION:_props$direction,_props$_shadow=props._shadow,_shadow=void 0!==_props$_shadow&&_props$_shadow;this.id=props.id||"directional-".concat(directional_light_idCount++),this.color=color,this.intensity=intensity,this.type="directional",this.direction=new dist_esm.b(direction).normalize().toArray(),this.shadow=_shadow}return Object(createClass.a)(DirectionalLight,[{key:"getProjectedLight",value:function getProjectedLight(){return this}}]),DirectionalLight}(),effect_Effect=function(){function Effect(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,Effect);var _props$id=props.id,id=void 0===_props$id?"effect":_props$id;this.id=id,this.props={},Object.assign(this.props,props)}return Object(createClass.a)(Effect,[{key:"preRender",value:function preRender(){}},{key:"getModuleParameters",value:function getModuleParameters(){}},{key:"cleanup",value:function cleanup(){}}]),Effect}(),esm_get=__webpack_require__(22),pass_Pass=function(){function Pass(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,Pass);var _props$id=props.id,id=void 0===_props$id?"pass":_props$id;this.id=id,this.gl=gl,this.props={},Object.assign(this.props,props)}return Object(createClass.a)(Pass,[{key:"setProps",value:function setProps(props){Object.assign(this.props,props)}},{key:"render",value:function render(){}},{key:"cleanup",value:function cleanup(){}}]),Pass}(),gltools_dist_esm=__webpack_require__(9),clear=__webpack_require__(285),layers_pass_LayersPass=function(_Pass){function LayersPass(){return Object(classCallCheck.a)(this,LayersPass),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(LayersPass).apply(this,arguments))}return Object(inherits.a)(LayersPass,_Pass),Object(createClass.a)(LayersPass,[{key:"render",value:function render(props){var gl=this.gl;return Object(gltools_dist_esm.j)(gl,{framebuffer:props.target}),this._drawLayers(props)}},{key:"_drawLayers",value:function _drawLayers(props){var viewports=props.viewports,views=props.views,onViewportActive=props.onViewportActive,_props$clearCanvas=props.clearCanvas,clearCanvas=void 0===_props$clearCanvas||_props$clearCanvas,gl=this.gl;clearCanvas&&function clearGLCanvas(gl){var width=gl.drawingBufferWidth,height=gl.drawingBufferHeight;Object(gltools_dist_esm.j)(gl,{viewport:[0,0,width,height]}),gl.clear(16640)}(gl);var renderStats=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=viewports[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var viewportOrDescriptor=_step.value,viewport=viewportOrDescriptor.viewport||viewportOrDescriptor,view=views&&views[viewport.id];onViewportActive(viewport);var drawLayerParams=this._getDrawLayerParams(viewport,props);props.view=view;var subViewports=viewport.subViewports||[viewport],_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=subViewports[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var subViewport=_step2.value;props.viewport=subViewport;var stats=this._drawLayersInViewport(gl,props,drawLayerParams);renderStats.push(stats)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return renderStats}},{key:"_getDrawLayerParams",value:function _getDrawLayerParams(viewport,_ref){for(var layers=_ref.layers,_ref$pass=_ref.pass,pass=void 0===_ref$pass?"unknown":_ref$pass,layerFilter=_ref.layerFilter,effects=_ref.effects,moduleParameters=_ref.moduleParameters,drawLayerParams=[],indexResolver=function layerIndexResolver(){var startIndex=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,layerIndices=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},resolvers={};return function(layer,isDrawn){var index,indexOverride=layer.props._offset,layerId=layer.id,parentId=layer.parent&&layer.parent.id;if(parentId in resolvers){var resolver=resolvers[parentId]=resolvers[parentId]||layerIndexResolver(layerIndices[parentId],layerIndices);index=resolver(layer,isDrawn),resolvers[layerId]=resolver}else Number.isFinite(indexOverride)?(index=indexOverride+(layerIndices[parentId]||0),resolvers[layerId]=null):index=startIndex;return isDrawn&&index>=startIndex&&(startIndex=index+1),layerIndices[layerId]=index,index}}(),layerIndex=0;layerIndex<layers.length;layerIndex++){var layer=layers[layerIndex],shouldDrawLayer=this._shouldDrawLayer(layer,viewport,pass,layerFilter),layerParam={shouldDrawLayer:shouldDrawLayer,layerRenderIndex:indexResolver(layer,shouldDrawLayer)};shouldDrawLayer&&(layerParam.moduleParameters=this._getModuleParameters(layer,effects,pass,moduleParameters),layerParam.layerParameters=this.getLayerParameters(layer,layerIndex)),drawLayerParams[layerIndex]=layerParam}return drawLayerParams}},{key:"_drawLayersInViewport",value:function _drawLayersInViewport(gl,_ref2,drawLayerParams){var layers=_ref2.layers,onError=_ref2.onError,viewport=_ref2.viewport,view=_ref2.view,glViewport=function getGLViewport(gl,_ref3){var viewport=_ref3.viewport,height=gl.canvas?gl.canvas.clientHeight||gl.canvas.height:100,dimensions=viewport,pixelRatio=Object(gltools_dist_esm.c)(gl);return[dimensions.x*pixelRatio,(height-dimensions.y-dimensions.height)*pixelRatio,dimensions.width*pixelRatio,dimensions.height*pixelRatio]}(gl,{viewport:viewport});if(view&&view.props.clear){var clearOpts=!0===view.props.clear?{color:!0,depth:!0}:view.props.clear;Object(gltools_dist_esm.k)(gl,{scissorTest:!0,scissor:glViewport},(function(){return Object(clear.a)(gl,clearOpts)}))}var renderStatus={totalCount:layers.length,visibleCount:0,compositeCount:0,pickableCount:0};Object(gltools_dist_esm.j)(gl,{viewport:glViewport});for(var layerIndex=0;layerIndex<layers.length;layerIndex++){var layer=layers[layerIndex],_drawLayerParams$laye=drawLayerParams[layerIndex],shouldDrawLayer=_drawLayerParams$laye.shouldDrawLayer,layerRenderIndex=_drawLayerParams$laye.layerRenderIndex,moduleParameters=_drawLayerParams$laye.moduleParameters,layerParameters=_drawLayerParams$laye.layerParameters;if(shouldDrawLayer&&layer.props.pickable&&renderStatus.pickableCount++,layer.isComposite)renderStatus.compositeCount++;else if(shouldDrawLayer){renderStatus.visibleCount++,moduleParameters.viewport=viewport;try{layer.drawLayer({moduleParameters:moduleParameters,uniforms:{layerIndex:layerRenderIndex},parameters:layerParameters})}catch(err){onError?onError(err,layer):log.a.error("error during drawing of ".concat(layer),err)()}}}return renderStatus}},{key:"shouldDrawLayer",value:function shouldDrawLayer(layer){return!0}},{key:"getModuleParameters",value:function getModuleParameters(layer,effects){return null}},{key:"getLayerParameters",value:function getLayerParameters(layer,layerIndex){return layer.props.parameters}},{key:"_shouldDrawLayer",value:function _shouldDrawLayer(layer,viewport,pass,layerFilter){var shouldDrawLayer=this.shouldDrawLayer(layer)&&layer.props.visible;return shouldDrawLayer&&layerFilter&&(shouldDrawLayer=layerFilter({layer:layer,viewport:viewport,isPicking:pass.startsWith("picking"),renderPass:pass})),shouldDrawLayer&&layer.activateViewport(viewport),shouldDrawLayer}},{key:"_getModuleParameters",value:function _getModuleParameters(layer,effects,pass,overrides){var moduleParameters=Object.assign(Object.create(layer.props),{autoWrapLongitude:layer.wrapLongitude,viewport:layer.context.viewport,mousePosition:layer.context.mousePosition,pickingActive:0,devicePixelRatio:Object(gltools_dist_esm.c)(this.gl)});if(effects){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=effects[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var effect=_step3.value;Object.assign(moduleParameters,effect.getModuleParameters(layer))}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}return Object.assign(moduleParameters,this.getModuleParameters(layer,effects),overrides)}}]),LayersPass}(pass_Pass);var renderbuffer=__webpack_require__(129),framebuffer=__webpack_require__(82);function shadow_pass_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var shadow_pass_ShadowPass=function(_LayersPass){function ShadowPass(gl,props){var _parameters,_attachments,_this;return Object(classCallCheck.a)(this,ShadowPass),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ShadowPass).call(this,gl,props))).shadowMap=new texture_2d.a(gl,{width:1,height:1,parameters:(_parameters={},Object(defineProperty.a)(_parameters,10241,9729),Object(defineProperty.a)(_parameters,10240,9729),Object(defineProperty.a)(_parameters,10242,33071),Object(defineProperty.a)(_parameters,10243,33071),_parameters)}),_this.depthBuffer=new renderbuffer.a(gl,{format:33189,width:1,height:1}),_this.fbo=new framebuffer.a(gl,{id:"shadowmap",width:1,height:1,attachments:(_attachments={},Object(defineProperty.a)(_attachments,36064,_this.shadowMap),Object(defineProperty.a)(_attachments,36096,_this.depthBuffer),_attachments)}),_this}return Object(inherits.a)(ShadowPass,_LayersPass),Object(createClass.a)(ShadowPass,[{key:"render",value:function render(params){var _this2=this,target=this.fbo;Object(gltools_dist_esm.k)(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(function(){var viewport=params.viewports[0],pixelRatio=Object(gltools_dist_esm.c)(_this2.gl),width=viewport.width*pixelRatio,height=viewport.height*pixelRatio;width===target.width&&height===target.height||target.resize({width:width,height:height}),Object(esm_get.a)(Object(getPrototypeOf.a)(ShadowPass.prototype),"render",_this2).call(_this2,function shadow_pass_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?shadow_pass_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):shadow_pass_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},params,{target:target,pass:"shadow"}))}))}},{key:"shouldDrawLayer",value:function shouldDrawLayer(layer){return!1!==layer.props.shadowEnabled}},{key:"getModuleParameters",value:function getModuleParameters(){return{drawToShadowMap:!0}}},{key:"delete",value:function _delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),ShadowPass}(layers_pass_LayersPass),toConsumableArray=__webpack_require__(15),lib_constants=__webpack_require__(18),memoize=__webpack_require__(126),getMemoizedViewportCenterPosition=Object(memoize.a)((function getViewportCenterPosition(_ref){var viewport=_ref.viewport,center=_ref.center;return new dist_esm.a(viewport.viewProjectionMatrix).invert().transform(center)})),getMemoizedViewProjectionMatrices=Object(memoize.a)((function getViewProjectionMatrices(_ref2){var viewport=_ref2.viewport,shadowMatrices=_ref2.shadowMatrices,projectionMatrices=[],pixelUnprojectionMatrix=viewport.pixelUnprojectionMatrix,farZ=viewport.isGeospatial?void 0:1,corners=[[0,0,farZ],[viewport.width,0,farZ],[0,viewport.height,farZ],[viewport.width,viewport.height,farZ],[0,0,-1],[viewport.width,0,-1],[0,viewport.height,-1],[viewport.width,viewport.height,-1]].map((function(pixel){return function screenToCommonSpace(xyz,pixelUnprojectionMatrix){var _xyz=Object(slicedToArray.a)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],coord=Object(web_mercator_dist_esm.m)([x,y,z],pixelUnprojectionMatrix);if(Number.isFinite(z))return coord;return[coord[0],coord[1],0]}(pixel,pixelUnprojectionMatrix)})),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function _loop(){var shadowMatrix=_step.value,viewMatrix=shadowMatrix.clone().translate(new dist_esm.b(viewport.center).negate()),positions=corners.map((function(corner){return viewMatrix.transform(corner)})),projectionMatrix=(new dist_esm.a).ortho({left:Math.min.apply(Math,Object(toConsumableArray.a)(positions.map((function(position){return position[0]})))),right:Math.max.apply(Math,Object(toConsumableArray.a)(positions.map((function(position){return position[0]})))),bottom:Math.min.apply(Math,Object(toConsumableArray.a)(positions.map((function(position){return position[1]})))),top:Math.max.apply(Math,Object(toConsumableArray.a)(positions.map((function(position){return position[1]})))),near:Math.min.apply(Math,Object(toConsumableArray.a)(positions.map((function(position){return-position[2]})))),far:Math.max.apply(Math,Object(toConsumableArray.a)(positions.map((function(position){return-position[2]}))))});projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix))},_iterator=shadowMatrices[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return projectionMatrices})),DEFAULT_SHADOW_COLOR=[0,0,0,1],VECTOR_TO_POINT_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function createShadowUniforms(){for(var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},uniforms={shadow_uDrawShadowMap:Boolean(opts.drawToShadowMap),shadow_uUseShadowMap:!!opts.shadowMaps&&opts.shadowMaps.length>0,shadow_uColor:opts.shadowColor||DEFAULT_SHADOW_COLOR,shadow_uLightId:opts.shadowLightId||0,shadow_uLightCount:opts.shadowMatrices.length},center=getMemoizedViewportCenterPosition({viewport:opts.viewport,center:context.project_uCenter}),projectCenters=[],viewProjectionMatrices=getMemoizedViewProjectionMatrices({shadowMatrices:opts.shadowMatrices,viewport:opts.viewport}).slice(),i=0;i<opts.shadowMatrices.length;i++){var viewProjectionMatrix=viewProjectionMatrices[i],viewProjectionMatrixCentered=viewProjectionMatrix.clone().translate(new dist_esm.b(opts.viewport.center).negate());context.project_uCoordinateSystem===lib_constants.a.LNGLAT&&context.project_uProjectionMode===lib_constants.c.WEB_MERCATOR?(viewProjectionMatrices[i]=viewProjectionMatrixCentered,projectCenters[i]=center):(viewProjectionMatrices[i]=viewProjectionMatrix.clone().multiplyRight(VECTOR_TO_POINT_MATRIX),projectCenters[i]=viewProjectionMatrixCentered.transform(center))}for(var _i=0;_i<viewProjectionMatrices.length;_i++)uniforms["shadow_uViewProjectionMatrices[".concat(_i,"]")]=viewProjectionMatrices[_i],uniforms["shadow_uProjectCenters[".concat(_i,"]")]=projectCenters[_i],opts.shadowMaps&&opts.shadowMaps.length>0?uniforms["shadow_uShadowMap".concat(_i)]=opts.shadowMaps[_i]:uniforms["shadow_uShadowMap".concat(_i)]=opts.dummyShadowMap;return uniforms}var shadow={name:"shadow",dependencies:[project.a],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(opts.drawToShadowMap||opts.shadowMaps&&opts.shadowMaps.length>0){var shadowUniforms={},_opts$shadowEnabled=opts.shadowEnabled,shadowEnabled=void 0===_opts$shadowEnabled||_opts$shadowEnabled;return shadowEnabled&&opts.shadowMatrices&&opts.shadowMatrices.length>0?Object.assign(shadowUniforms,createShadowUniforms(opts,context)):Object.assign(shadowUniforms,{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}),shadowUniforms}return{}}},DEFAULT_AMBIENT_LIGHT_PROPS={color:[255,255,255],intensity:1},DEFAULT_DIRECTIONAL_LIGHT_PROPS=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],lighting_effect_DEFAULT_SHADOW_COLOR=[0,0,0,200/255],lighting_effect_LightingEffect=function(_Effect){function LightingEffect(props){var _this;for(var key in Object(classCallCheck.a)(this,LightingEffect),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(LightingEffect).call(this,props))).ambientLight=null,_this.directionalLights=[],_this.pointLights=[],_this.shadowColor=lighting_effect_DEFAULT_SHADOW_COLOR,_this.shadowPasses=[],_this.shadowMaps=[],_this.dummyShadowMap=null,_this.shadow=!1,_this.programManager=null,props){var lightSource=props[key];switch(lightSource.type){case"ambient":_this.ambientLight=lightSource;break;case"directional":_this.directionalLights.push(lightSource);break;case"point":_this.pointLights.push(lightSource)}}return _this._applyDefaultLights(),_this.shadow=_this.directionalLights.some((function(light){return light.shadow})),_this}return Object(inherits.a)(LightingEffect,_Effect),Object(createClass.a)(LightingEffect,[{key:"preRender",value:function preRender(gl,_ref){var layers=_ref.layers,layerFilter=_ref.layerFilter,viewports=_ref.viewports,onViewportActive=_ref.onViewportActive,views=_ref.views;if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(gl),this.programManager||(this.programManager=program_manager.a.getDefaultProgramManager(gl),shadow&&this.programManager.addDefaultModule(shadow)),this.dummyShadowMap||(this.dummyShadowMap=new texture_2d.a(gl,{width:1,height:1}));for(var i=0;i<this.shadowPasses.length;i++){this.shadowPasses[i].render({layers:layers,layerFilter:layerFilter,viewports:viewports,onViewportActive:onViewportActive,views:views,moduleParameters:{shadowLightId:i,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}},{key:"getModuleParameters",value:function getModuleParameters(layer){var parameters=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return parameters.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((function(directionalLight){return directionalLight.getProjectedLight({layer:layer})})),pointLights:this.pointLights.map((function(pointLight){return pointLight.getProjectedLight({layer:layer})}))},parameters}},{key:"cleanup",value:function cleanup(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.shadowPasses[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.delete()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(shadow),this.programManager=null)}},{key:"_createLightMatrix",value:function _createLightMatrix(){var lightMatrices=[],_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.directionalLights[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var light=_step2.value,viewMatrix=(new dist_esm.a).lookAt({eye:new dist_esm.b(light.direction).negate()});lightMatrices.push(viewMatrix)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return lightMatrices}},{key:"_createShadowPasses",value:function _createShadowPasses(gl){for(var i=0;i<this.directionalLights.length;i++){var shadowPass=new shadow_pass_ShadowPass(gl);this.shadowPasses[i]=shadowPass,this.shadowMaps[i]=shadowPass.shadowMap}}},{key:"_applyDefaultLights",value:function _applyDefaultLights(){var ambientLight=this.ambientLight,pointLights=this.pointLights,directionalLights=this.directionalLights;ambientLight||0!==pointLights.length||0!==directionalLights.length||(this.ambientLight=new ambient_light_AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS),this.directionalLights.push(new directional_light_DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]),new directional_light_DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1])))}}]),LightingEffect}(effect_Effect),DEFAULT_LIGHTING_EFFECT=new lighting_effect_LightingEffect,effect_manager_EffectManager=function(){function EffectManager(){Object(classCallCheck.a)(this,EffectManager),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return Object(createClass.a)(EffectManager,[{key:"setProps",value:function setProps(props){"effects"in props&&(props.effects.length===this.effects.length&&deepEqual(props.effects,this.effects)||(this.setEffects(props.effects),this._needsRedraw="effects changed"))}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}},{key:"getEffects",value:function getEffects(){return this._internalEffects}},{key:"finalize",value:function finalize(){this.cleanup()}},{key:"setEffects",value:function setEffects(){var effects=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=effects,this._createInternalEffects()}},{key:"cleanup",value:function cleanup(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.effects[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.cleanup()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this._internalEffects[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){_step2.value.cleanup()}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}this.effects.length=0,this._internalEffects.length=0}},{key:"_createInternalEffects",value:function _createInternalEffects(){this._internalEffects=this.effects.slice(),this.effects.some((function(effect){return effect instanceof lighting_effect_LightingEffect}))||this._internalEffects.push(DEFAULT_LIGHTING_EFFECT)}}]),EffectManager}(),draw_layers_pass_DrawLayersPass=function(_LayersPass){function DrawLayersPass(){return Object(classCallCheck.a)(this,DrawLayersPass),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(DrawLayersPass).apply(this,arguments))}return Object(inherits.a)(DrawLayersPass,_LayersPass),DrawLayersPass}(layers_pass_LayersPass);function pick_layers_pass_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function pick_layers_pass_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?pick_layers_pass_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):pick_layers_pass_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var PICKING_PARAMETERS={blendFunc:[1,0,32771,0],blendEquation:32774},pick_layers_pass_PickLayersPass=function(_LayersPass){function PickLayersPass(){return Object(classCallCheck.a)(this,PickLayersPass),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PickLayersPass).apply(this,arguments))}return Object(inherits.a)(PickLayersPass,_LayersPass),Object(createClass.a)(PickLayersPass,[{key:"render",value:function render(props){props.pickingFBO?this._drawPickingBuffer(props):Object(esm_get.a)(Object(getPrototypeOf.a)(PickLayersPass.prototype),"render",this).call(this,props)}},{key:"_drawPickingBuffer",value:function _drawPickingBuffer(_ref){var _this=this,layers=_ref.layers,layerFilter=_ref.layerFilter,viewports=_ref.viewports,onViewportActive=_ref.onViewportActive,pickingFBO=_ref.pickingFBO,_ref$deviceRect=_ref.deviceRect,x=_ref$deviceRect.x,y=_ref$deviceRect.y,width=_ref$deviceRect.width,height=_ref$deviceRect.height,_ref$pass=_ref.pass,pass=void 0===_ref$pass?"picking":_ref$pass,redrawReason=_ref.redrawReason,pickZ=_ref.pickZ,gl=this.gl;return this.pickZ=pickZ,Object(gltools_dist_esm.k)(gl,pick_layers_pass_objectSpread({scissorTest:!0,scissor:[x,y,width,height],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},PICKING_PARAMETERS,{blend:!pickZ}),(function(){Object(esm_get.a)(Object(getPrototypeOf.a)(PickLayersPass.prototype),"render",_this).call(_this,{target:pickingFBO,layers:layers,layerFilter:layerFilter,viewports:viewports,onViewportActive:onViewportActive,pass:pass,redrawReason:redrawReason})}))}},{key:"shouldDrawLayer",value:function shouldDrawLayer(layer){return layer.props.pickable}},{key:"getModuleParameters",value:function getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}},{key:"getLayerParameters",value:function getLayerParameters(layer,layerIndex){var pickParameters=this.pickZ?{blend:!1}:pick_layers_pass_objectSpread({},PICKING_PARAMETERS,{blend:!0,blendColor:[0,0,0,(layerIndex+1)/255]});return Object.assign({},layer.props.parameters,pickParameters)}}]),PickLayersPass}(layers_pass_LayersPass);function deck_renderer_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var deck_renderer_DeckRenderer=function(){function DeckRenderer(gl){Object(classCallCheck.a)(this,DeckRenderer),this.gl=gl,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new draw_layers_pass_DrawLayersPass(gl),this.pickLayersPass=new pick_layers_pass_PickLayersPass(gl),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null,this._onError=null}return Object(createClass.a)(DeckRenderer,[{key:"setProps",value:function setProps(props){"layerFilter"in props&&this.layerFilter!==props.layerFilter&&(this.layerFilter=props.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in props&&this.drawPickingColors!==props.drawPickingColors&&(this.drawPickingColors=props.drawPickingColors,this._needsRedraw="drawPickingColors changed"),"onError"in props&&(this._onError=props.onError)}},{key:"renderLayers",value:function renderLayers(opts){var layerPass=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;opts.layerFilter=this.layerFilter,opts.onError=this._onError,opts.effects=opts.effects||[],opts.target=opts.target||framebuffer.a.getDefaultFramebuffer(this.gl),this._preRender(opts.effects,opts);var outputBuffer=this.lastPostProcessEffect?this.renderBuffers[0]:opts.target,renderStats=layerPass.render(function deck_renderer_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?deck_renderer_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):deck_renderer_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},opts,{target:outputBuffer}));this._postRender(opts.effects,opts),this.renderCount++,Object(esm_debug.a)("deckRenderer.renderLayers",this,renderStats,opts)}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}},{key:"finalize",value:function finalize(){var renderBuffers=this.renderBuffers,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=renderBuffers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.delete()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}renderBuffers.length=0}},{key:"_preRender",value:function _preRender(effects,opts){var lastPostProcessEffect=null,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=effects[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var effect=_step2.value;effect.preRender(this.gl,opts),effect.postRender&&(lastPostProcessEffect=effect)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}lastPostProcessEffect&&this._resizeRenderBuffers(),this.lastPostProcessEffect=lastPostProcessEffect}},{key:"_resizeRenderBuffers",value:function _resizeRenderBuffers(){var renderBuffers=this.renderBuffers;0===renderBuffers.length&&renderBuffers.push(new framebuffer.a(this.gl),new framebuffer.a(this.gl));var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=renderBuffers[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){_step3.value.resize()}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}},{key:"_postRender",value:function _postRender(effects,opts){var renderBuffers=this.renderBuffers,params={inputBuffer:renderBuffers[0],swapBuffer:renderBuffers[1],target:null},_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=effects[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var effect=_step4.value;if(effect.postRender){if(effect===this.lastPostProcessEffect){params.target=opts.target,effect.postRender(this.gl,params);break}var buffer=effect.postRender(this.gl,params);params.inputBuffer=buffer,params.swapBuffer=buffer===renderBuffers[0]?renderBuffers[1]:renderBuffers[0]}}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}}]),DeckRenderer}(),copy_and_blit=__webpack_require__(291),NO_PICKED_OBJECT={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function getClosestObject(_ref){var pickedColors=_ref.pickedColors,layers=_ref.layers,deviceX=_ref.deviceX,deviceY=_ref.deviceY,deviceRadius=_ref.deviceRadius,deviceRect=_ref.deviceRect;if(pickedColors){for(var x=deviceRect.x,y=deviceRect.y,width=deviceRect.width,height=deviceRect.height,minSquareDistanceToCenter=deviceRadius*deviceRadius,closestPixelIndex=-1,i=0,row=0;row<height;row++){var dy=row+y-deviceY,dy2=dy*dy;if(dy2>minSquareDistanceToCenter)i+=4*width;else for(var col=0;col<width;col++){if(pickedColors[i+3]-1>=0){var dx=col+x-deviceX,d2=dx*dx+dy2;d2<=minSquareDistanceToCenter&&(minSquareDistanceToCenter=d2,closestPixelIndex=i)}i+=4}}if(closestPixelIndex>=0){var _pickedLayerIndex=pickedColors[closestPixelIndex+3]-1,pickedColor=pickedColors.slice(closestPixelIndex,closestPixelIndex+4),pickedLayer=layers[_pickedLayerIndex];if(pickedLayer){var pickedObjectIndex=pickedLayer.decodePickingColor(pickedColor),_dy=Math.floor(closestPixelIndex/4/width);return{pickedColor:pickedColor,pickedLayer:pickedLayer,pickedObjectIndex:pickedObjectIndex,pickedX:x+(closestPixelIndex/4-_dy*width),pickedY:y+_dy}}log.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return NO_PICKED_OBJECT}function processPickInfo(_ref){var pickInfo=_ref.pickInfo,lastPickedInfo=_ref.lastPickedInfo,mode=_ref.mode,layers=_ref.layers,viewports=_ref.viewports,x=_ref.x,y=_ref.y,z=_ref.z,pixelRatio=_ref.pixelRatio,pickedColor=pickInfo.pickedColor,pickedLayer=pickInfo.pickedLayer,pickedObjectIndex=pickInfo.pickedObjectIndex,affectedLayers=pickedLayer?[pickedLayer]:[];if("hover"===mode){var lastPickedObjectIndex=lastPickedInfo.index,lastPickedLayerId=lastPickedInfo.layerId,pickedLayerId=pickedLayer&&pickedLayer.props.id;if(pickedLayerId!==lastPickedLayerId||pickedObjectIndex!==lastPickedObjectIndex){if(pickedLayerId!==lastPickedLayerId){var lastPickedLayer=layers.find((function(layer){return layer.props.id===lastPickedLayerId}));lastPickedLayer&&affectedLayers.unshift(lastPickedLayer)}lastPickedInfo.layerId=pickedLayerId,lastPickedInfo.index=pickedObjectIndex,lastPickedInfo.info=null}}var viewport=function getViewportFromCoordinates(_ref3){return _ref3.viewports[0]}({viewports:viewports}),coordinate=viewport&&viewport.unproject([x-viewport.x,y-viewport.y],{targetZ:z}),baseInfo={color:null,layer:null,index:-1,picked:!1,x:x,y:y,pixel:[x,y],coordinate:coordinate,lngLat:coordinate,devicePixel:[pickInfo.pickedX,pickInfo.pickedY],pixelRatio:pixelRatio},infos=new Map;return infos.set(null,baseInfo),affectedLayers.forEach((function(layer){var info=Object.assign({},baseInfo);if(layer===pickedLayer&&(info.color=pickedColor,info.index=pickedObjectIndex,info.picked=!0),info=getLayerPickingInfo({layer:layer,info:info,mode:mode}),layer===pickedLayer&&"hover"===mode&&(lastPickedInfo.info=info),info&&infos.set(info.layer.id,info),"hover"===mode&&layer.props.autoHighlight){var pickingModuleParameters={pickingSelectedColor:pickedLayer===layer?pickedColor:null},highlightColor=layer.props.highlightColor;pickedLayer===layer&&"function"==typeof highlightColor&&(pickingModuleParameters.pickingHighlightColor=highlightColor(info)),layer.setModuleParameters(pickingModuleParameters),layer.setNeedsRedraw()}})),infos}function getLayerPickingInfo(_ref2){for(var layer=_ref2.layer,info=_ref2.info,mode=_ref2.mode;layer&&info;){var sourceLayer=info.layer||layer;info.layer=layer,info=layer.getPickingInfo({info:info,mode:mode,sourceLayer:sourceLayer}),layer=layer.parent}return info}var deck_picker_DeckPicker=function(){function DeckPicker(gl){Object(classCallCheck.a)(this,DeckPicker),this.gl=gl,this.pickingFBO=null,this.pickLayersPass=new pick_layers_pass_PickLayersPass(gl),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null},this._onError=null}return Object(createClass.a)(DeckPicker,[{key:"setProps",value:function setProps(props){"layerFilter"in props&&(this.layerFilter=props.layerFilter),"onError"in props&&(this._onError=props.onError)}},{key:"finalize",value:function finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}},{key:"pickObject",value:function pickObject(opts){return this._pickClosestObject(opts)}},{key:"pickObjects",value:function pickObjects(opts){return this._pickVisibleObjects(opts)}},{key:"getLastPickedObject",value:function getLastPickedObject(_ref){var x=_ref.x,y=_ref.y,layers=_ref.layers,viewports=_ref.viewports,lastPickedInfo=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,lastPickedLayerId=lastPickedInfo&&lastPickedInfo.layer&&lastPickedInfo.layer.id,layer=lastPickedLayerId?layers.find((function(l){return l.id===lastPickedLayerId})):null,coordinate=viewports[0]&&viewports[0].unproject([x,y]),info={x:x,y:y,coordinate:coordinate,lngLat:coordinate,layer:layer};return layer?Object.assign({},lastPickedInfo,info):Object.assign(info,{color:null,object:null,index:-1})}},{key:"_resizeBuffer",value:function _resizeBuffer(){var gl=this.gl;return this.pickingFBO||(this.pickingFBO=new framebuffer.a(gl),framebuffer.a.isSupported(gl,{colorBufferFloat:!0})&&(this.depthFBO=new framebuffer.a(gl),this.depthFBO.attach(Object(defineProperty.a)({},36064,new texture_2d.a(gl,{format:Object(gltools_dist_esm.f)(gl)?34836:6408,type:5126}))))),this.pickingFBO.resize({width:gl.canvas.width,height:gl.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:gl.canvas.width,height:gl.canvas.height}),this.pickingFBO}},{key:"_getPickable",value:function _getPickable(layers){var pickableLayers=layers.filter((function(layer){return layer.isPickable()&&!layer.isComposite}));return pickableLayers.length>255?(log.a.warn("Too many pickable layers, only picking the first 255")(),pickableLayers.slice(0,255)):pickableLayers}},{key:"_pickClosestObject",value:function _pickClosestObject(_ref2){var layers=_ref2.layers,viewports=_ref2.viewports,x=_ref2.x,y=_ref2.y,_ref2$radius=_ref2.radius,radius=void 0===_ref2$radius?0:_ref2$radius,_ref2$depth=_ref2.depth,depth=void 0===_ref2$depth?1:_ref2$depth,_ref2$mode=_ref2.mode,mode=void 0===_ref2$mode?"query":_ref2$mode,unproject3D=_ref2.unproject3D,onViewportActive=_ref2.onViewportActive;layers=this._getPickable(layers),this._resizeBuffer();for(var infos,pixelRatio=Object(gltools_dist_esm.c)(this.gl),devicePixelRange=Object(gltools_dist_esm.b)(this.gl,[x,y],!0),devicePixel=[devicePixelRange.x+Math.floor(devicePixelRange.width/2),devicePixelRange.y+Math.floor(devicePixelRange.height/2)],deviceRadius=Math.round(radius*pixelRatio),_this$pickingFBO=this.pickingFBO,width=_this$pickingFBO.width,height=_this$pickingFBO.height,deviceRect=this._getPickingRect({deviceX:devicePixel[0],deviceY:devicePixel[1],deviceRadius:deviceRadius,deviceWidth:width,deviceHeight:height}),result=[],affectedLayers={},i=0;i<depth;i++){var pickInfo=getClosestObject({pickedColors:deviceRect&&this._drawAndSample({layers:layers,viewports:viewports,onViewportActive:onViewportActive,deviceRect:deviceRect,pass:"picking:".concat(mode),redrawReason:mode}),layers:layers,deviceX:devicePixel[0],deviceY:devicePixel[1],deviceRadius:deviceRadius,deviceRect:deviceRect}),z=void 0;if(pickInfo.pickedLayer&&unproject3D&&this.depthFBO)z=this._drawAndSample({layers:[pickInfo.pickedLayer],viewports:viewports,onViewportActive:onViewportActive,deviceRect:{x:pickInfo.pickedX,y:pickInfo.pickedY,width:1,height:1},pass:"picking:".concat(mode),redrawReason:"pick-z",pickZ:!0})[0]*viewports[0].distanceScales.metersPerUnit[2]+viewports[0].position[2];if(pickInfo.pickedColor&&i+1<depth){var layerId=pickInfo.pickedColor[3]-1;affectedLayers[layerId]=!0,layers[layerId].clearPickingColor(pickInfo.pickedColor)}infos=processPickInfo({pickInfo:pickInfo,lastPickedInfo:this.lastPickedInfo,mode:mode,layers:layers,viewports:viewports,x:x,y:y,z:z,pixelRatio:pixelRatio});var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=infos.values()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var info=_step.value;info.layer&&result.push(info)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}if(!pickInfo.pickedColor)break}for(var _layerId in affectedLayers)layers[_layerId].restorePickingColors();return{result:result,emptyInfo:infos&&infos.get(null)}}},{key:"_pickVisibleObjects",value:function _pickVisibleObjects(_ref3){var layers=_ref3.layers,viewports=_ref3.viewports,x=_ref3.x,y=_ref3.y,_ref3$width=_ref3.width,width=void 0===_ref3$width?1:_ref3$width,_ref3$height=_ref3.height,height=void 0===_ref3$height?1:_ref3$height,_ref3$mode=_ref3.mode,mode=void 0===_ref3$mode?"query":_ref3$mode,onViewportActive=_ref3.onViewportActive;layers=this._getPickable(layers),this._resizeBuffer();var pixelRatio=Object(gltools_dist_esm.c)(this.gl),leftTop=Object(gltools_dist_esm.b)(this.gl,[x,y],!0),deviceLeft=leftTop.x,deviceTop=leftTop.y+leftTop.height,rightBottom=Object(gltools_dist_esm.b)(this.gl,[x+width,y+height],!0),deviceRight=rightBottom.x+rightBottom.width,deviceBottom=rightBottom.y,deviceRect={x:deviceLeft,y:deviceBottom,width:deviceRight-deviceLeft,height:deviceTop-deviceBottom},pickInfos=function getUniqueObjects(_ref2){var pickedColors=_ref2.pickedColors,layers=_ref2.layers,uniqueColors=new Map;if(pickedColors)for(var i=0;i<pickedColors.length;i+=4){var pickedLayerIndex=pickedColors[i+3]-1;if(pickedLayerIndex>=0){var pickedColor=pickedColors.slice(i,i+4),colorKey=pickedColor.join(",");if(!uniqueColors.has(colorKey)){var pickedLayer=layers[pickedLayerIndex];pickedLayer?uniqueColors.set(colorKey,{pickedColor:pickedColor,pickedLayer:pickedLayer,pickedObjectIndex:pickedLayer.decodePickingColor(pickedColor)}):log.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(uniqueColors.values())}({pickedColors:this._drawAndSample({layers:layers,viewports:viewports,onViewportActive:onViewportActive,deviceRect:deviceRect,pass:"picking:".concat(mode),redrawReason:mode}),layers:layers}),uniqueInfos=new Map;return pickInfos.forEach((function(pickInfo){var info={color:pickInfo.pickedColor,layer:null,index:pickInfo.pickedObjectIndex,picked:!0,x:x,y:y,width:width,height:height,pixelRatio:pixelRatio};info=getLayerPickingInfo({layer:pickInfo.pickedLayer,info:info,mode:mode}),uniqueInfos.has(info.object)||uniqueInfos.set(info.object,info)})),Array.from(uniqueInfos.values())}},{key:"_drawAndSample",value:function _drawAndSample(_ref4){var layers=_ref4.layers,viewports=_ref4.viewports,onViewportActive=_ref4.onViewportActive,deviceRect=_ref4.deviceRect,pass=_ref4.pass,redrawReason=_ref4.redrawReason,pickZ=_ref4.pickZ;if(Object(assert.a)(deviceRect.width>0&&deviceRect.height>0),layers.length<1)return null;var pickingFBO=pickZ?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:layers,layerFilter:this.layerFilter,onError:this._onError,viewports:viewports,onViewportActive:onViewportActive,pickingFBO:pickingFBO,deviceRect:deviceRect,pass:pass,redrawReason:redrawReason,pickZ:pickZ});var x=deviceRect.x,y=deviceRect.y,width=deviceRect.width,height=deviceRect.height,pickedColors=new(pickZ?Float32Array:Uint8Array)(width*height*4);return Object(copy_and_blit.b)(pickingFBO,{sourceX:x,sourceY:y,sourceWidth:width,sourceHeight:height,target:pickedColors}),pickedColors}},{key:"_getPickingRect",value:function _getPickingRect(_ref5){var deviceX=_ref5.deviceX,deviceY=_ref5.deviceY,deviceRadius=_ref5.deviceRadius,deviceWidth=_ref5.deviceWidth,deviceHeight=_ref5.deviceHeight,x=Math.max(0,deviceX-deviceRadius),y=Math.max(0,deviceY-deviceRadius),width=Math.min(deviceWidth,deviceX+deviceRadius+1)-x,height=Math.min(deviceHeight,deviceY+deviceRadius+1)-y;return width<=0||height<=0?null:{x:x,y:y,width:width,height:height}}}]),DeckPicker}(),defaultStyle={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},tooltip_Tooltip=function(){function Tooltip(canvas){Object(classCallCheck.a)(this,Tooltip);var canvasParent=canvas.parentElement;canvasParent&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,defaultStyle),canvasParent.appendChild(this.el))}return Object(createClass.a)(Tooltip,[{key:"setTooltip",value:function setTooltip(displayInfo,x,y){var el=this.el;if("string"==typeof displayInfo)el.innerText=displayInfo;else{if(!displayInfo)return void(el.style.display="none");"text"in displayInfo&&(el.innerText=displayInfo.text),"html"in displayInfo&&(el.innerHTML=displayInfo.html),"className"in displayInfo&&(el.className=displayInfo.className),Object.assign(el.style,displayInfo.style)}el.style.display="block",el.style.transform="translate(".concat(x,"px, ").concat(y,"px)")}},{key:"remove",value:function remove(){this.el&&this.el.remove()}}]),Tooltip}(),register_loaders=__webpack_require__(414),regenerator=__webpack_require__(10),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(17);function assert_assert(condition,message){if(!condition)throw new Error(message)}var globals=__webpack_require__(178),image_type_parseImageNode=globals.a._parseImageNode,IMAGE_SUPPORTED="undefined"!=typeof Image,IMAGE_BITMAP_SUPPORTED="undefined"!=typeof ImageBitmap,NODE_IMAGE_SUPPORTED=Boolean(image_type_parseImageNode),DATA_SUPPORTED=!!globals.b||NODE_IMAGE_SUPPORTED;function getImageType(image){var format=getImageTypeOrNull(image);if(!format)throw new Error("Not an image");return format}function getImageData(image){switch(getImageType(image)){case"data":return image;case"image":case"imagebitmap":var canvas=document.createElement("canvas"),context=canvas.getContext("2d");return canvas.width=image.width,canvas.height=image.height,context.drawImage(image,0,0),context.getImageData(0,0,image.width,image.height);default:return assert_assert(!1)}}function getImageTypeOrNull(image){return"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&image instanceof Image?"image":image&&"object"===Object(esm_typeof.a)(image)&&image.data&&image.width&&image.height?"data":null}var SVG_DATA_URL_PATTERN=/^data:image\/svg\+xml/,SVG_URL_PATTERN=/\.svg((\?|#).*)?$/;function isSVG(url){return url&&(SVG_DATA_URL_PATTERN.test(url)||SVG_URL_PATTERN.test(url))}function getBlobOrSVGDataUrl(arrayBuffer,url){if(isSVG(url)){var xmlText=(new TextDecoder).decode(arrayBuffer);return"data:image/svg+xml;base64,".concat(btoa(xmlText))}return getBlob(arrayBuffer,url)}function getBlob(arrayBuffer,url){if(isSVG(url))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(arrayBuffer)])}function parseToImage(_x,_x2,_x3){return _parseToImage.apply(this,arguments)}function _parseToImage(){return(_parseToImage=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(arrayBuffer,options,url){var blobOrDataUrl,URL,objectUrl;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return blobOrDataUrl=getBlobOrSVGDataUrl(arrayBuffer,url),URL=self.URL||self.webkitURL,objectUrl="string"!=typeof blobOrDataUrl&&URL.createObjectURL(blobOrDataUrl),_context.prev=3,_context.next=6,loadToImage(objectUrl||blobOrDataUrl,options);case 6:return _context.abrupt("return",_context.sent);case 7:return _context.prev=7,objectUrl&&URL.revokeObjectURL(objectUrl),_context.finish(7);case 10:case"end":return _context.stop()}}),_callee,null,[[3,,7,10]])})))).apply(this,arguments)}function loadToImage(_x4,_x5){return _loadToImage.apply(this,arguments)}function _loadToImage(){return(_loadToImage=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(url,options){var image;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if((image=new Image).src=url,!(options.image&&options.image.decode&&image.decode)){_context2.next=6;break}return _context2.next=5,image.decode();case 5:return _context2.abrupt("return",image);case 6:return _context2.next=8,new Promise((function(resolve,reject){try{image.onload=function(){return resolve(image)},image.onerror=function(err){return reject(new Error("Could not load image ".concat(url,": ").concat(err)))}}catch(error){reject(error)}}));case 8:return _context2.abrupt("return",_context2.sent);case 9:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}var EMPTY_OBJECT={},imagebitmapOptionsSupported=!0;function parseToImageBitmap(_x,_x2,_x3){return _parseToImageBitmap.apply(this,arguments)}function _parseToImageBitmap(){return(_parseToImageBitmap=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(arrayBuffer,options,url){var blob,image,imagebitmapOptions;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!isSVG(url)){_context.next=7;break}return _context.next=3,parseToImage(arrayBuffer,options,url);case 3:image=_context.sent,blob=image,_context.next=8;break;case 7:blob=getBlob(arrayBuffer,url);case 8:return imagebitmapOptions=options&&options.imagebitmap,_context.next=11,safeCreateImageBitmap(blob,imagebitmapOptions);case 11:return _context.abrupt("return",_context.sent);case 12:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function safeCreateImageBitmap(_x4){return _safeCreateImageBitmap.apply(this,arguments)}function _safeCreateImageBitmap(){return(_safeCreateImageBitmap=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(blob){var imagebitmapOptions,_args2=arguments;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!isEmptyObject(imagebitmapOptions=_args2.length>1&&void 0!==_args2[1]?_args2[1]:null)&&imagebitmapOptionsSupported||(imagebitmapOptions=null),!imagebitmapOptions){_context2.next=13;break}return _context2.prev=3,_context2.next=6,createImageBitmap(blob,imagebitmapOptions);case 6:return _context2.abrupt("return",_context2.sent);case 9:_context2.prev=9,_context2.t0=_context2.catch(3),console.warn(_context2.t0),imagebitmapOptionsSupported=!1;case 13:return _context2.next=15,createImageBitmap(blob);case 15:return _context2.abrupt("return",_context2.sent);case 16:case"end":return _context2.stop()}}),_callee2,null,[[3,9]])})))).apply(this,arguments)}function isEmptyObject(object){for(var key in object||EMPTY_OBJECT)return!0;return!1}function getBinaryImageMetadata(binaryData){var dataView=toDataView(binaryData);return function getPngMetadata(binaryData){var dataView=toDataView(binaryData);if(!(dataView.byteLength>=24&&2303741511===dataView.getUint32(0,!1)))return null;return{mimeType:"image/png",width:dataView.getUint32(16,!1),height:dataView.getUint32(20,!1)}}(dataView)||function getJpegMetadata(binaryData){var dataView=toDataView(binaryData);if(!(dataView.byteLength>=3&&65496===dataView.getUint16(0,!1)&&255===dataView.getUint8(2)))return null;var _getJpegMarkers=function getJpegMarkers(){for(var tableMarkers=new Set([65499,65476,65484,65501,65534]),i=65504;i<65520;++i)tableMarkers.add(i);var sofMarkers=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:tableMarkers,sofMarkers:sofMarkers}}(),tableMarkers=_getJpegMarkers.tableMarkers,sofMarkers=_getJpegMarkers.sofMarkers,i=2;for(;i+9<dataView.byteLength;){var marker=dataView.getUint16(i,!1);if(sofMarkers.has(marker))return{mimeType:"image/jpeg",height:dataView.getUint16(i+5,!1),width:dataView.getUint16(i+7,!1)};if(!tableMarkers.has(marker))return null;i+=2,i+=dataView.getUint16(i,!1)}return null}(dataView)||function getGifMetadata(binaryData){var dataView=toDataView(binaryData);if(!(dataView.byteLength>=10&&1195984440===dataView.getUint32(0,!1)))return null;return{mimeType:"image/gif",width:dataView.getUint16(6,!0),height:dataView.getUint16(8,!0)}}(dataView)||function getBmpMetadata(binaryData){var dataView=toDataView(binaryData);if(!(dataView.byteLength>=14&&16973===dataView.getUint16(0,!1)&&dataView.getUint32(2,!0)===dataView.byteLength))return null;return{mimeType:"image/bmp",width:dataView.getUint32(18,!0),height:dataView.getUint32(22,!0)}}(dataView)}function toDataView(data){if(data instanceof DataView)return data;if(ArrayBuffer.isView(data))return new DataView(data.buffer);if(data instanceof ArrayBuffer)return new DataView(data);throw new Error("toDataView")}function parseToNodeImage(arrayBuffer,options){var mimeType=(getBinaryImageMetadata(arrayBuffer)||{}).mimeType,_parseImageNode=globals.a._parseImageNode;return assert_assert(_parseImageNode),_parseImageNode(arrayBuffer,mimeType,options)}function _parseImage(){return(_parseImage=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(arrayBuffer,options,context){var imageOptions,imageType,url,loadType,image;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:imageOptions=(options=options||{}).image||{},imageType=imageOptions.type||"auto",url=(context||{}).url,loadType=getLoadableImageType(imageType),_context.t0=loadType,_context.next="imagebitmap"===_context.t0?8:"image"===_context.t0?12:"data"===_context.t0?16:20;break;case 8:return _context.next=10,parseToImageBitmap(arrayBuffer,options,url);case 10:return image=_context.sent,_context.abrupt("break",21);case 12:return _context.next=14,parseToImage(arrayBuffer,options,url);case 14:return image=_context.sent,_context.abrupt("break",21);case 16:return _context.next=18,parseToNodeImage(arrayBuffer,options);case 18:return image=_context.sent,_context.abrupt("break",21);case 20:assert_assert(!1);case 21:return"data"===imageType&&(image=getImageData(image)),_context.abrupt("return",image);case 23:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function getLoadableImageType(type){switch(type){case"auto":case"data":return function getDefaultImageType(){if(IMAGE_BITMAP_SUPPORTED)return"imagebitmap";if(IMAGE_SUPPORTED)return"image";if(DATA_SUPPORTED)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function isImageTypeSupported(type){switch(type){case"auto":return IMAGE_BITMAP_SUPPORTED||IMAGE_SUPPORTED||DATA_SUPPORTED;case"imagebitmap":return IMAGE_BITMAP_SUPPORTED;case"image":return IMAGE_SUPPORTED;case"data":return DATA_SUPPORTED;case"html":return IMAGE_SUPPORTED;case"ndarray":return DATA_SUPPORTED;default:throw new Error("@loaders.gl/images: image ".concat(type," not supported in this environment"))}}(type),type}}var image_loader={id:"image",name:"Images",version:"2.2.8",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vndmicrosofticon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function parseImage(_x,_x2,_x3){return _parseImage.apply(this,arguments)},test:function test(arrayBuffer){return Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)))},options:{image:{type:"auto",decode:!0}}},env=__webpack_require__(27);var json_loader={name:"JSON",extensions:["json","geojson"],testText:function isJSON(text){var firstChar=text[0],lastChar=text[text.length-1];return"{"===firstChar&&"}"===lastChar||"["===firstChar&&"]"===lastChar},parseTextSync:JSON.parse},existingVersion=env.global.deck&&env.global.deck.VERSION;if(existingVersion&&"8.2.4"!==existingVersion)throw new Error("deck.gl - multiple versions detected: ".concat(existingVersion," vs ").concat("8.2.4"));existingVersion||(env.global.deck=Object.assign(env.global.deck||{},{VERSION:"8.2.4",version:"8.2.4",log:log.a,_registerLoggers:esm_debug.b}),Object(register_loaders.b)([json_loader,image_loader]));var init=env.global.deck,esm_init=__webpack_require__(180),utils_assert=__webpack_require__(23),resource=__webpack_require__(48),features=__webpack_require__(797),webgl_features_table=__webpack_require__(286),query_Query=function(_Resource){function Query(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Query),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Query).call(this,gl,opts))).target=null,_this._queryPending=!1,_this._pollingPromise=null,Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(Query,_Resource),Object(createClass.a)(Query,null,[{key:"isSupported",value:function isSupported(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],webgl2=Object(gltools_dist_esm.f)(gl),hasTimerQuery=Object(features.c)(gl,webgl_features_table.a.TIMER_QUERY),supported=webgl2||hasTimerQuery,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=opts[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;switch(key){case"queries":supported=supported&&webgl2;break;case"timers":supported=supported&&hasTimerQuery;break;default:Object(utils_assert.a)(!1)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return supported}}]),Object(createClass.a)(Query,[{key:"beginTimeElapsedQuery",value:function beginTimeElapsedQuery(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function beginOcclusionQuery(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$conservative=_ref.conservative,conservative=void 0!==_ref$conservative&&_ref$conservative;return this.begin(conservative?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function beginTransformFeedbackQuery(){return this.begin(35976)}},{key:"begin",value:function begin(target){return this._queryPending||(this.target=target,this.gl.beginQuery(this.target,this.handle)),this}},{key:"end",value:function end(){return this._queryPending||this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this}},{key:"isResultAvailable",value:function isResultAvailable(){if(!this._queryPending)return!1;var resultAvailable=this.gl.getQueryParameter(this.handle,34919);return resultAvailable&&(this._queryPending=!1),resultAvailable}},{key:"isTimerDisjoint",value:function isTimerDisjoint(){return this.gl.getParameter(36795)}},{key:"getResult",value:function getResult(){return this.gl.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function getTimerMilliseconds(){return this.getResult()/1e6}},{key:"createPoll",value:function createPoll(){var _this2=this,limit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var counter=0;return this._pollingPromise=new Promise((function(resolve,reject){requestAnimationFrame((function poll(){_this2.isResultAvailable()?(resolve(_this2.getResult()),_this2._pollingPromise=null):counter++>limit?(reject("Timed out"),_this2._pollingPromise=null):requestAnimationFrame(poll)}))})),this._pollingPromise}},{key:"_createHandle",value:function _createHandle(){return Query.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteQuery(this.handle)}}]),Query}(resource.a);function cancelAnimationFrame(timerId){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(timerId):clearTimeout(timerId)}var isPage=Object(env.isBrowser)()&&"undefined"!=typeof document,statIdCounter=0,animation_loop_AnimationLoop=function(){function AnimationLoop(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,AnimationLoop);var _props$onCreateContex=props.onCreateContext,onCreateContext=void 0===_props$onCreateContex?function(opts){return Object(gltools_dist_esm.a)(opts)}:_props$onCreateContex,_props$onAddHTML=props.onAddHTML,onAddHTML=void 0===_props$onAddHTML?null:_props$onAddHTML,_props$onInitialize=props.onInitialize,onInitialize=void 0===_props$onInitialize?function(){}:_props$onInitialize,_props$onRender=props.onRender,onRender=void 0===_props$onRender?function(){}:_props$onRender,_props$onFinalize=props.onFinalize,onFinalize=void 0===_props$onFinalize?function(){}:_props$onFinalize,onError=props.onError,_props$gl=props.gl,gl=void 0===_props$gl?null:_props$gl,_props$glOptions=props.glOptions,glOptions=void 0===_props$glOptions?{}:_props$glOptions,_props$debug=props.debug,debug=void 0!==_props$debug&&_props$debug,_props$createFramebuf=props.createFramebuffer,createFramebuffer=void 0!==_props$createFramebuf&&_props$createFramebuf,_props$autoResizeView=props.autoResizeViewport,autoResizeViewport=void 0===_props$autoResizeView||_props$autoResizeView,_props$autoResizeDraw=props.autoResizeDrawingBuffer,autoResizeDrawingBuffer=void 0===_props$autoResizeDraw||_props$autoResizeDraw,_props$stats=props.stats,stats=void 0===_props$stats?esm_init.a.get("animation-loop-".concat(statIdCounter++)):_props$stats,_props$useDevicePixel=props.useDevicePixels,useDevicePixels=void 0===_props$useDevicePixel||_props$useDevicePixel;"useDevicePixelRatio"in props&&(gltools_dist_esm.g.deprecated("useDevicePixelRatio","useDevicePixels")(),useDevicePixels=props.useDevicePixelRatio),this.props={onCreateContext:onCreateContext,onAddHTML:onAddHTML,onInitialize:onInitialize,onRender:onRender,onFinalize:onFinalize,onError:onError,gl:gl,glOptions:glOptions,debug:debug,createFramebuffer:createFramebuffer},this.gl=gl,this.needsRedraw=null,this.timeline=null,this.stats=stats,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:autoResizeViewport,autoResizeDrawingBuffer:autoResizeDrawingBuffer,useDevicePixels:useDevicePixels}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}var _toDataURL;return Object(createClass.a)(AnimationLoop,[{key:"delete",value:function _delete(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function setNeedsRedraw(reason){return Object(utils_assert.a)("string"==typeof reason),this.needsRedraw=this.needsRedraw||reason,this}},{key:"setProps",value:function setProps(props){return"autoResizeViewport"in props&&(this.autoResizeViewport=props.autoResizeViewport),"autoResizeDrawingBuffer"in props&&(this.autoResizeDrawingBuffer=props.autoResizeDrawingBuffer),"useDevicePixels"in props&&(this.useDevicePixels=props.useDevicePixels),this}},{key:"start",value:function start(){var _this=this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;var startPromise=this._getPageLoadPromise().then((function(){return!_this._running||_this._initialized?null:(_this._createWebGLContext(opts),_this._createFramebuffer(),_this._startEventHandling(),_this._initializeCallbackData(),_this._updateCallbackData(),_this._resizeCanvasDrawingBuffer(),_this._resizeViewport(),_this._gpuTimeQuery=query_Query.isSupported(_this.gl,["timers"])?new query_Query(_this.gl):null,_this._initialized=!0,_this.onInitialize(_this.animationProps))})).then((function(appContext){_this._running&&(_this._addCallbackData(appContext||{}),!1!==appContext&&_this._startLoop())}));return this.props.onError&&startPromise.catch(this.props.onError),this}},{key:"redraw",value:function redraw(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this}},{key:"stop",value:function stop(){return this._running&&(this._finalizeCallbackData(),cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function attachTimeline(timeline){return this.timeline=timeline,this.timeline}},{key:"detachTimeline",value:function detachTimeline(){this.timeline=null}},{key:"waitForRender",value:function waitForRender(){var _this2=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(resolve){_this2._resolveNextFrame=resolve}))),this._nextFramePromise}},{key:"toDataURL",value:(_toDataURL=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return this.setNeedsRedraw("toDataURL"),_context.next=3,this.waitForRender();case 3:return _context.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return _context.stop()}}),_callee,this)}))),function toDataURL(){return _toDataURL.apply(this,arguments)})},{key:"onCreateContext",value:function onCreateContext(){var _this$props;return(_this$props=this.props).onCreateContext.apply(_this$props,arguments)}},{key:"onInitialize",value:function onInitialize(){var _this$props2;return(_this$props2=this.props).onInitialize.apply(_this$props2,arguments)}},{key:"onRender",value:function onRender(){var _this$props3;return(_this$props3=this.props).onRender.apply(_this$props3,arguments)}},{key:"onFinalize",value:function onFinalize(){var _this$props4;return(_this$props4=this.props).onFinalize.apply(_this$props4,arguments)}},{key:"getHTMLControlValue",value:function getHTMLControlValue(id){var defaultValue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,element=document.getElementById(id);return element?Number(element.value):defaultValue}},{key:"setViewParameters",value:function setViewParameters(){return gltools_dist_esm.g.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function _startLoop(){var _this3=this;cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame((function renderFrame(){_this3._running&&(_this3.redraw(),_this3._animationFrameId=_this3._requestAnimationFrame(renderFrame))}))}},{key:"_getPageLoadPromise",value:function _getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=isPage?new Promise((function(resolve,reject){isPage&&"complete"===document.readyState?resolve(document):window.addEventListener("load",(function(){resolve(document)}))})):Promise.resolve({})),this._pageLoadPromise}},{key:"_setDisplay",value:function _setDisplay(display){this.display&&(this.display.delete(),this.display.animationLoop=null),display&&(display.animationLoop=this),this.display=display}},{key:"_requestAnimationFrame",value:function _requestAnimationFrame(renderFrameCallback){this.display&&this.display.requestAnimationFrame(renderFrameCallback)||function request_animation_frame_requestAnimationFrame(callback){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(callback):setTimeout(callback,1e3/60)}(renderFrameCallback)}},{key:"_renderFrame",value:function _renderFrame(){var _this$display;this.display?(_this$display=this.display)._renderFrame.apply(_this$display,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function _clearNeedsRedraw(){this.needsRedraw=null}},{key:"_setupFrame",value:function _setupFrame(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function _initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function _updateCallbackData(){var _this$_getSizeAndAspe=this._getSizeAndAspect(),width=_this$_getSizeAndAspe.width,height=_this$_getSizeAndAspe.height,aspect=_this$_getSizeAndAspe.aspect;width===this.animationProps.width&&height===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),aspect!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=width,this.animationProps.height=height,this.animationProps.aspect=aspect,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function _finalizeCallbackData(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function _addCallbackData(appContext){"object"===Object(esm_typeof.a)(appContext)&&null!==appContext&&(this.animationProps=Object.assign({},this.animationProps,appContext))}},{key:"_createWebGLContext",value:function _createWebGLContext(opts){if(this.offScreen=opts.canvas&&"undefined"!=typeof OffscreenCanvas&&opts.canvas instanceof OffscreenCanvas,opts=Object.assign({},opts,this.props.glOptions),this.gl=this.props.gl?Object(gltools_dist_esm.d)(this.props.gl,opts):this.onCreateContext(opts),!Object(gltools_dist_esm.e)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Object(gltools_dist_esm.h)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function _createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){var wrapperDiv=document.createElement("div");document.body.appendChild(wrapperDiv),wrapperDiv.style.position="relative";var div=document.createElement("div");div.style.position="absolute",div.style.left="10px",div.style.bottom="10px",div.style.width="300px",div.style.background="white",wrapperDiv.appendChild(this.gl.canvas),wrapperDiv.appendChild(div);var html=this.props.onAddHTML(div);html&&(div.innerHTML=html)}}},{key:"_getSizeAndAspect",value:function _getSizeAndAspect(){var width=this.gl.drawingBufferWidth,height=this.gl.drawingBufferHeight,aspect=1,canvas=this.gl.canvas;return canvas&&canvas.clientHeight?aspect=canvas.clientWidth/canvas.clientHeight:width>0&&height>0&&(aspect=width/height),{width:width,height:height,aspect:aspect}}},{key:"_resizeViewport",value:function _resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function _resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Object(gltools_dist_esm.i)(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function _createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new framebuffer.a(this.gl))}},{key:"_resizeFramebuffer",value:function _resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function _beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function _endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function _startEventHandling(){var canvas=this.gl.canvas;canvas&&(canvas.addEventListener("mousemove",this._onMousemove),canvas.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function _onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function _onMouseleave(e){this.animationProps._mousePosition=null}}]),AnimationLoop}(),mjolnir_js_dist_esm=__webpack_require__(221);function deck_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function deck_noop(){}var defaultProps={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",_framebuffer:null,_animate:!1,onWebGLInitialized:deck_noop,onResize:deck_noop,onViewStateChange:deck_noop,onBeforeRender:deck_noop,onAfterRender:deck_noop,onLoad:deck_noop,onError:null,_onMetrics:null,getCursor:function getCursor(_ref){return _ref.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},deck_Deck=function(){function Deck(props){Object(classCallCheck.a)(this,Deck),props=Object.assign({},defaultProps,props),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),props.viewState&&props.initialViewState&&log.a.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===Object(env.getBrowser)()&&log.a.warn("IE 11 support will be deprecated in v8.0")(),props.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(props)),this.animationLoop=this._createAnimationLoop(props),this.stats=new esm.a({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(props),this.animationLoop.start()}return Object(createClass.a)(Deck,[{key:"finalize",value:function finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function setProps(props){this.stats.get("setProps Time").timeStart(),"onLayerHover"in props&&log.a.removed("onLayerHover","onHover")(),"onLayerClick"in props&&log.a.removed("onLayerClick","onClick")(),props.initialViewState&&!deepEqual(this.props.initialViewState,props.initialViewState)&&(this.viewState=props.initialViewState),Object.assign(this.props,props),this._setCanvasSize(this.props);var resolvedProps=Object.create(this.props);Object.assign(resolvedProps,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(resolvedProps),this.layerManager&&(this.viewManager.setProps(resolvedProps),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(resolvedProps),this.effectManager.setProps(resolvedProps),this.deckRenderer.setProps(resolvedProps),this.deckPicker.setProps(resolvedProps)),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var redraw=this._needsRedraw;opts.clearRedrawFlags&&(this._needsRedraw=!1);var viewManagerNeedsRedraw=this.viewManager.needsRedraw(opts),layerManagerNeedsRedraw=this.layerManager.needsRedraw(opts),effectManagerNeedsRedraw=this.effectManager.needsRedraw(opts),deckRendererNeedsRedraw=this.deckRenderer.needsRedraw(opts);return redraw=redraw||viewManagerNeedsRedraw||layerManagerNeedsRedraw||effectManagerNeedsRedraw||deckRendererNeedsRedraw}},{key:"redraw",value:function redraw(force){if(this.layerManager){var redrawReason=force||this.needsRedraw({clearRedrawFlags:!0});redrawReason&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(redrawReason):this._drawLayers(redrawReason))}}},{key:"getViews",value:function getViews(){return this.viewManager.views}},{key:"getViewports",value:function getViewports(rect){return this.viewManager.getViewports(rect)}},{key:"pickObject",value:function pickObject(opts){var infos=this._pick("pickObject","pickObject Time",opts).result;return infos.length?infos[0]:null}},{key:"pickMultipleObjects",value:function pickMultipleObjects(opts){return opts.depth=opts.depth||10,this._pick("pickObject","pickMultipleObjects Time",opts).result}},{key:"pickObjects",value:function pickObjects(opts){return this._pick("pickObjects","pickObjects Time",opts)}},{key:"_addResources",value:function _addResources(resources){var forceUpdate=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var id in resources)this.layerManager.resourceManager.add({resourceId:id,data:resources[id],forceUpdate:forceUpdate})}},{key:"_removeResources",value:function _removeResources(resourceIds){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=resourceIds[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var id=_step.value;this.layerManager.resourceManager.remove(id)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"_pick",value:function _pick(method,statKey,opts){var stats=this.stats;stats.get("Pick Count").incrementCount(),stats.get(statKey).timeStart();var infos=this.deckPicker[method](Object.assign({layers:this.layerManager.getLayers(opts),viewports:this.getViewports(opts),onViewportActive:this.layerManager.activateViewport},opts));return stats.get(statKey).timeEnd(),infos}},{key:"_createCanvas",value:function _createCanvas(props){var canvas=props.canvas;("string"==typeof canvas&&(canvas=document.getElementById(canvas),Object(assert.a)(canvas)),canvas)||(canvas=document.createElement("canvas"),(props.parent||document.body).appendChild(canvas));var id=props.id,style=props.style;return canvas.id=id,Object.assign(canvas.style,style),canvas}},{key:"_setCanvasSize",value:function _setCanvasSize(props){if(this.canvas){var width=props.width,height=props.height;(width||0===width)&&(width=Number.isFinite(width)?"".concat(width,"px"):width,this.canvas.style.width=width),(height||0===height)&&(height=Number.isFinite(height)?"".concat(height,"px"):height,this.canvas.style.position="absolute",this.canvas.style.height=height)}}},{key:"_updateCanvasSize",value:function _updateCanvasSize(){if(this._checkForCanvasSizeChange()){var width=this.width,height=this.height;this.viewManager.setProps({width:width,height:height}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function _checkForCanvasSizeChange(){var canvas=this.canvas;if(!canvas)return!1;var newWidth=canvas.clientWidth||canvas.width,newHeight=canvas.clientHeight||canvas.height;return(newWidth!==this.width||newHeight!==this.height)&&(this.width=newWidth,this.height=newHeight,!0)}},{key:"_createAnimationLoop",value:function _createAnimationLoop(props){var _this=this,width=props.width,height=props.height,gl=props.gl,glOptions=props.glOptions,debug=props.debug,useDevicePixels=props.useDevicePixels,autoResizeDrawingBuffer=props.autoResizeDrawingBuffer;return new animation_loop_AnimationLoop({width:width,height:height,useDevicePixels:useDevicePixels,autoResizeDrawingBuffer:autoResizeDrawingBuffer,autoResizeViewport:!1,gl:gl,onCreateContext:function onCreateContext(opts){return Object(gltools_dist_esm.a)(Object.assign({},glOptions,opts,{canvas:_this.canvas,debug:debug}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:props.onBeforeRender,onAfterRender:props.onAfterRender})}},{key:"_getViewState",value:function _getViewState(){return this.props.viewState||this.viewState}},{key:"_getViews",value:function _getViews(){var views=this.props.views||[new map_view_MapView({id:"default-view"})];return(views=Array.isArray(views)?views:[views]).length&&this.props.controller&&(views[0].props.controller=this.props.controller),views}},{key:"_onPointerMove",value:function _onPointerMove(event){var _pickRequest=this._pickRequest;if("pointerleave"===event.type)_pickRequest.x=-1,_pickRequest.y=-1,_pickRequest.radius=0;else{if(event.leftButton||event.rightButton)return;var pos=event.offsetCenter;if(!pos)return;_pickRequest.x=pos.x,_pickRequest.y=pos.y,_pickRequest.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:_pickRequest.x,y:_pickRequest.y}),_pickRequest.event=event,_pickRequest.mode="hover"}},{key:"_pickAndCallback",value:function _pickAndCallback(){var _pickRequest=this._pickRequest;if(_pickRequest.event){var _this$_pick=this._pick("pickObject","pickObject Time",_pickRequest),result=_this$_pick.result,pickedInfo=_this$_pick.emptyInfo,handled=!1,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=result[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var info=_step2.value;pickedInfo=info,handled=info.layer.onHover(info,_pickRequest.event)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}if(!handled&&this.props.onHover&&this.props.onHover(pickedInfo,_pickRequest.event),this.props.getTooltip){var displayInfo=this.props.getTooltip(pickedInfo);this.tooltip.setTooltip(displayInfo,pickedInfo.x,pickedInfo.y)}_pickRequest.event=null}}},{key:"_updateCursor",value:function _updateCursor(){var container=this.props.parent||this.canvas;container&&(container.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function _setGLContext(gl){if(!this.layerManager){this.canvas||(this.canvas=gl.canvas,Object(gltools_dist_esm.d)(gl,{enable:!0,copyState:!0})),this.tooltip=new tooltip_Tooltip(this.canvas),Object(gltools_dist_esm.j)(gl,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(gl);var timeline=new timeline_Timeline;for(var eventType in timeline.play(),this.animationLoop.attachTimeline(timeline),this.eventManager=new mjolnir_js_dist_esm.a(this.props.parent||gl.canvas,{touchAction:this.props.touchAction,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),lib_constants.b)this.eventManager.on(eventType,this._onEvent);this.viewManager=new view_manager_ViewManager({timeline:timeline,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});var viewport=this.viewManager.getViewports()[0];this.layerManager=new layer_manager_LayerManager(gl,{deck:this,stats:this.stats,viewport:viewport,timeline:timeline}),this.effectManager=new effect_manager_EffectManager,this.deckRenderer=new deck_renderer_DeckRenderer(gl),this.deckPicker=new deck_picker_DeckPicker(gl),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function _drawLayers(redrawReason,renderOptions){var gl=this.layerManager.context.gl;Object(gltools_dist_esm.j)(gl,this.props.parameters),this.props.onBeforeRender({gl:gl}),this.deckRenderer.renderLayers(Object.assign({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:redrawReason,effects:this.effectManager.getEffects()},renderOptions)),this.props.onAfterRender({gl:gl})}},{key:"_onRendererInitialized",value:function _onRendererInitialized(_ref2){var gl=_ref2.gl;this._setGLContext(gl)}},{key:"_onRenderFrame",value:function _onRenderFrame(animationProps){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),log.a.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function _onViewStateChange(params){var viewState=this.props.onViewStateChange(params)||params.viewState;this.viewState&&(this.viewState=function deck_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?deck_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):deck_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},this.viewState,Object(defineProperty.a)({},params.viewId,viewState)),this.props.viewState||this.viewManager.setProps({viewState:this.viewState}))}},{key:"_onInteractiveStateChange",value:function _onInteractiveStateChange(_ref3){var _ref3$isDragging=_ref3.isDragging,isDragging=void 0!==_ref3$isDragging&&_ref3$isDragging;isDragging!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=isDragging)}},{key:"_onEvent",value:function _onEvent(event){var eventOptions=lib_constants.b[event.type],pos=event.offsetCenter;if(eventOptions&&pos){var layers=this.layerManager.getLayers(),info=this.deckPicker.getLastPickedObject({x:pos.x,y:pos.y,layers:layers,viewports:this.getViewports(pos)},this._lastPointerDownInfo),layer=info.layer,layerHandler=layer&&(layer[eventOptions.handler]||layer.props[eventOptions.handler]),rootHandler=this.props[eventOptions.handler],handled=!1;layerHandler&&(handled=layerHandler.call(layer,info,event)),!handled&&rootHandler&&rootHandler(info,event)}}},{key:"_onPointerDown",value:function _onPointerDown(event){var pos=event.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:pos.x,y:pos.y,radius:this.props.pickingRadius})}},{key:"_getFrameStats",value:function _getFrameStats(){var stats=this.stats;stats.get("frameRate").timeEnd(),stats.get("frameRate").timeStart();var animationLoopStats=this.animationLoop.stats;stats.get("GPU Time").addTime(animationLoopStats.get("GPU Time").lastTiming),stats.get("CPU Time").addTime(animationLoopStats.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function _getMetrics(){var metrics=this.metrics,stats=this.stats;metrics.fps=stats.get("frameRate").getHz(),metrics.setPropsTime=stats.get("setProps Time").time,metrics.updateAttributesTime=stats.get("Update Attributes").time,metrics.framesRedrawn=stats.get("Redraw Count").count,metrics.pickTime=stats.get("pickObject Time").time+stats.get("pickMultipleObjects Time").time+stats.get("pickObjects Time").time,metrics.pickCount=stats.get("Pick Count").count,metrics.gpuTime=stats.get("GPU Time").time,metrics.cpuTime=stats.get("CPU Time").time,metrics.gpuTimePerFrame=stats.get("GPU Time").getAverageTime(),metrics.cpuTimePerFrame=stats.get("CPU Time").getAverageTime();var memoryStats=esm_init.a.get("Memory Usage");metrics.bufferMemory=memoryStats.get("Buffer Memory").count,metrics.textureMemory=memoryStats.get("Texture Memory").count,metrics.renderbufferMemory=memoryStats.get("Renderbuffer Memory").count,metrics.gpuMemory=memoryStats.get("GPU Memory").count}}]),Deck}();function inheritsFrom(Type,ParentType){for(;Type;){if(Type===ParentType)return!0;Type=Object.getPrototypeOf(Type)}return!1}function wrapInView(node){return node?"function"==typeof node?Object(react.createElement)(view_View,{},node):Array.isArray(node)?node.map(wrapInView):node.type===react_default.a.Fragment?wrapInView(node.props.children):(inheritsFrom(node.type,view_View),node):node}function extractJSXLayers(_ref){var children=_ref.children,layers=_ref.layers,views=_ref.views,reactChildren=[],jsxLayers=[],jsxViews={};return react_default.a.Children.forEach(wrapInView(children),(function(reactElement){if(reactElement){var ElementType=reactElement.type;if(inheritsFrom(ElementType,lib_layer.a)){var layer=function createLayer(LayerType,reactProps){var props={},defaultProps=LayerType.defaultProps||{};for(var key in reactProps)defaultProps[key]!==reactProps[key]&&(props[key]=reactProps[key]);return new LayerType(props)}(ElementType,reactElement.props);jsxLayers.push(layer)}else reactChildren.push(reactElement);if(ElementType!==view_View&&inheritsFrom(ElementType,view_View)&&reactElement.props.id){var view=new ElementType(reactElement.props);jsxViews[view.id]=view}}})),Object.keys(jsxViews).length>0&&(Array.isArray(views)?views.forEach((function(view){jsxViews[view.id]=view})):views&&(jsxViews[views.id]=views),views=Object.values(jsxViews)),{layers:layers=jsxLayers.length>0?[].concat(jsxLayers,Object(toConsumableArray.a)(layers)):layers,children:reactChildren,views:views}}deck_Deck.getPropTypes=function getPropTypes(PropTypes){return{id:PropTypes.string,width:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),height:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),layers:PropTypes.oneOfType([PropTypes.object,PropTypes.array]),layerFilter:PropTypes.func,views:PropTypes.oneOfType([PropTypes.object,PropTypes.array]),viewState:PropTypes.object,effects:PropTypes.arrayOf(PropTypes.instanceOf(effect_Effect)),controller:PropTypes.oneOfType([PropTypes.func,PropTypes.bool,PropTypes.object]),gl:PropTypes.object,glOptions:PropTypes.object,parameters:PropTypes.object,pickingRadius:PropTypes.number,useDevicePixels:PropTypes.oneOfType([PropTypes.bool,PropTypes.number]),touchAction:PropTypes.string,onWebGLInitialized:PropTypes.func,onResize:PropTypes.func,onViewStateChange:PropTypes.func,onBeforeRender:PropTypes.func,onAfterRender:PropTypes.func,onLoad:PropTypes.func,onError:PropTypes.func,debug:PropTypes.bool,drawPickingColors:PropTypes.bool,_framebuffer:PropTypes.object,_animate:PropTypes.bool}},deck_Deck.defaultProps=defaultProps,deck_Deck.VERSION=init.VERSION;var MAP_STYLE={position:"absolute",zIndex:-1};function evaluateChildren(children,childProps){return children?"function"==typeof children?children(childProps):Array.isArray(children)?children.map((function(child){return evaluateChildren(child,childProps)})):function isReactMap(child){var componentClass=child&&child.type,componentProps=componentClass&&componentClass.defaultProps;return componentProps&&componentProps.mapStyle}(children)?(childProps.style=MAP_STYLE,Object(react.cloneElement)(children,childProps)):function needsDeckGLViewProps(child){var componentClass=child&&child.type;return componentClass&&componentClass.deckGLViewProps}(children)?Object(react.cloneElement)(children,childProps):children:children}function positionChildrenUnderViews(_ref){var children=_ref.children,deck=(_ref.viewports,_ref.deck),ContextProvider=_ref.ContextProvider,viewManager=(deck||{}).viewManager;if(!viewManager||!viewManager.views.length)return[];var views={},defaultViewId=viewManager.views[0].id,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=children[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var child=_step.value,viewId=defaultViewId,viewChildren=child;inheritsFrom(child.type,view_View)&&(viewId=child.props.id||defaultViewId,viewChildren=child.props.children);var viewport=viewManager.getViewport(viewId),viewState=viewManager.getViewState(viewId);if(viewport)viewChildren=evaluateChildren(viewChildren,{x:viewport.x,y:viewport.y,width:viewport.width,height:viewport.height,viewport:viewport,viewState:viewState}),views[viewId]||(views[viewId]={viewport:viewport,children:[]}),views[viewId].children.push(viewChildren)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return Object.keys(views).map((function(viewId){var _views$viewId=views[viewId],viewport=_views$viewId.viewport,viewChildren=_views$viewId.children,style={position:"absolute",left:viewport.x,top:viewport.y,width:viewport.width,height:viewport.height},key="view-".concat(viewId),viewElement=react.createElement.apply(void 0,["div",{key:key,id:key,style:style}].concat(Object(toConsumableArray.a)(viewChildren)));if(ContextProvider){var contextValue={viewport:viewport,container:deck.canvas.offsetParent,eventManager:deck.eventManager,onViewStateChange:function onViewStateChange(params){params.viewId=viewId,deck._onViewStateChange(params)}};return Object(react.createElement)(ContextProvider,{key:key,value:contextValue},viewElement)}return viewElement}))}var CANVAS_ONLY_STYLES={mixBlendMode:null};function extractStyles(_ref){var width=_ref.width,height=_ref.height,style=_ref.style,containerStyle={position:"absolute",zIndex:0,left:0,top:0,width:width,height:height},canvasStyle={left:0,top:0};if(style)for(var key in style)key in CANVAS_ONLY_STYLES?canvasStyle[key]=style[key]:containerStyle[key]=style[key];return{containerStyle:containerStyle,canvasStyle:canvasStyle}}var propTypes=deck_Deck.getPropTypes(prop_types_default.a),deckgl_defaultProps=deck_Deck.defaultProps,deckgl_DeckGL=function(_React$Component){function DeckGL(props){var _this;return Object(classCallCheck.a)(this,DeckGL),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(DeckGL).call(this,props))).viewports=null,_this.children=null,_this._needsRedraw=null,_this._containerRef=react_default.a.createRef(),_this._canvasRef=react_default.a.createRef(),_this.pickObject=_this.pickObject.bind(Object(assertThisInitialized.a)(_this)),_this.pickMultipleObjects=_this.pickMultipleObjects.bind(Object(assertThisInitialized.a)(_this)),_this.pickObjects=_this.pickObjects.bind(Object(assertThisInitialized.a)(_this)),_this._extractJSXLayers=Object(memoize.a)(extractJSXLayers),_this._positionChildrenUnderViews=Object(memoize.a)(positionChildrenUnderViews),_this._extractStyles=Object(memoize.a)(extractStyles),_this}return Object(inherits.a)(DeckGL,_React$Component),Object(createClass.a)(DeckGL,[{key:"componentDidMount",value:function componentDidMount(){var DeckClass=this.props.Deck||deck_Deck;this.deck=this.deck||new DeckClass(Object.assign({},this.props,{parent:this._containerRef.current,canvas:this._canvasRef.current,style:null,width:"100%",height:"100%",_customRender:this._customRender.bind(this)})),this._updateFromProps(this.props)}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps){this._updateFromProps(nextProps);var childrenChanged=this.children!==this._parseJSX(nextProps).children,viewsChanged=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return childrenChanged&&!viewsChanged}},{key:"componentDidUpdate",value:function componentDidUpdate(){this._redrawDeck()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.deck.finalize()}},{key:"pickObject",value:function pickObject(opts){return this.deck.pickObject(opts)}},{key:"pickMultipleObjects",value:function pickMultipleObjects(opts){return this.deck.pickMultipleObjects(opts)}},{key:"pickObjects",value:function pickObjects(opts){return this.deck.pickObjects(opts)}},{key:"_redrawDeck",value:function _redrawDeck(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:"_customRender",value:function _customRender(redrawReason){this._needsRedraw=redrawReason,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:"_parseJSX",value:function _parseJSX(props){return this._extractJSXLayers({layers:props.layers,views:props.views,children:props.children})}},{key:"_updateFromProps",value:function _updateFromProps(props){var _this$_parseJSX=this._parseJSX(props),layers=_this$_parseJSX.layers,views=_this$_parseJSX.views,deckProps=Object.assign({},props,{style:null,width:"100%",height:"100%",layers:layers,views:views});this.deck.setProps(deckProps)}},{key:"render",value:function render(){var _this$props=this.props,ContextProvider=_this$props.ContextProvider,width=_this$props.width,height=_this$props.height,style=_this$props.style,viewManager=(this.deck||{}).viewManager;this.viewports=viewManager&&viewManager.getViewports(),this.children=this._parseJSX(this.props).children;var children=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck,ContextProvider:ContextProvider}),_this$_extractStyles=this._extractStyles({width:width,height:height,style:style}),containerStyle=_this$_extractStyles.containerStyle,canvasStyle=_this$_extractStyles.canvasStyle,canvas=Object(react.createElement)("canvas",{key:"canvas",ref:this._canvasRef,style:canvasStyle});return Object(react.createElement)("div",{id:"deckgl-wrapper",ref:this._containerRef,style:containerStyle},[canvas,children])}}]),DeckGL}(react_default.a.Component);deckgl_DeckGL.propTypes=propTypes,deckgl_DeckGL.defaultProps=deckgl_defaultProps},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getOffsetOrigin})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getUniformsFromViewport}));var gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21),gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(95),_lib_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(18),_utils_memoize__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(126),_utils_assert__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(26),ZERO_VECTOR=[0,0,0,0],VECTOR_TO_POINT_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],IDENTITY_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],DEFAULT_PIXELS_PER_UNIT2=[0,0,0],DEFAULT_COORDINATE_ORIGIN=[0,0,0],getMemoizedViewportUniforms=Object(_utils_memoize__WEBPACK_IMPORTED_MODULE_3__.a)((function calculateViewportUniforms(_ref2){var viewport=_ref2.viewport,devicePixelRatio=_ref2.devicePixelRatio,coordinateSystem=_ref2.coordinateSystem,coordinateOrigin=_ref2.coordinateOrigin,_calculateMatrixAndOf=function calculateMatrixAndOffset(viewport,coordinateSystem,coordinateOrigin){var viewMatrixUncentered=viewport.viewMatrixUncentered,projectionMatrix=viewport.projectionMatrix,viewMatrix=viewport.viewMatrix,viewProjectionMatrix=viewport.viewProjectionMatrix,projectionCenter=ZERO_VECTOR,cameraPosCommon=viewport.cameraPosition,_getOffsetOrigin=getOffsetOrigin(viewport,coordinateSystem,coordinateOrigin),geospatialOrigin=_getOffsetOrigin.geospatialOrigin,shaderCoordinateOrigin=_getOffsetOrigin.shaderCoordinateOrigin;if(_getOffsetOrigin.offsetMode){var positionCommonSpace=viewport.projectPosition(geospatialOrigin||shaderCoordinateOrigin);cameraPosCommon=[cameraPosCommon[0]-positionCommonSpace[0],cameraPosCommon[1]-positionCommonSpace[1],cameraPosCommon[2]-positionCommonSpace[2]],positionCommonSpace[3]=1,projectionCenter=gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_1__.b([],positionCommonSpace,viewProjectionMatrix),viewMatrix=viewMatrixUncentered||viewMatrix,viewProjectionMatrix=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_0__.g([],projectionMatrix,viewMatrix),viewProjectionMatrix=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_0__.g([],viewProjectionMatrix,VECTOR_TO_POINT_MATRIX)}return{viewMatrix:viewMatrix,viewProjectionMatrix:viewProjectionMatrix,projectionCenter:projectionCenter,cameraPosCommon:cameraPosCommon,shaderCoordinateOrigin:shaderCoordinateOrigin,geospatialOrigin:geospatialOrigin}}(viewport,coordinateSystem,coordinateOrigin),projectionCenter=_calculateMatrixAndOf.projectionCenter,viewProjectionMatrix=_calculateMatrixAndOf.viewProjectionMatrix,cameraPosCommon=_calculateMatrixAndOf.cameraPosCommon,shaderCoordinateOrigin=_calculateMatrixAndOf.shaderCoordinateOrigin,geospatialOrigin=_calculateMatrixAndOf.geospatialOrigin,distanceScales=viewport.getDistanceScales(),viewportSize=[viewport.width*devicePixelRatio,viewport.height*devicePixelRatio],uniforms={project_uCoordinateSystem:coordinateSystem,project_uProjectionMode:viewport.projectionMode,project_uCoordinateOrigin:shaderCoordinateOrigin,project_uCenter:projectionCenter,project_uAntimeridian:(viewport.longitude||0)-180,project_uViewportSize:viewportSize,project_uDevicePixelRatio:devicePixelRatio,project_uFocalDistance:viewport.focalDistance||1,project_uCommonUnitsPerMeter:distanceScales.unitsPerMeter,project_uCommonUnitsPerWorldUnit:distanceScales.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:DEFAULT_PIXELS_PER_UNIT2,project_uScale:viewport.scale,project_uViewProjectionMatrix:viewProjectionMatrix,project_uCameraPosition:cameraPosCommon};if(geospatialOrigin){var distanceScalesAtOrigin=viewport.getDistanceScales(geospatialOrigin);switch(coordinateSystem){case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.METER_OFFSETS:uniforms.project_uCommonUnitsPerWorldUnit=distanceScalesAtOrigin.unitsPerMeter,uniforms.project_uCommonUnitsPerWorldUnit2=distanceScalesAtOrigin.unitsPerMeter2;break;case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.LNGLAT:case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.LNGLAT_OFFSETS:uniforms.project_uCommonUnitsPerWorldUnit=distanceScalesAtOrigin.unitsPerDegree,uniforms.project_uCommonUnitsPerWorldUnit2=distanceScalesAtOrigin.unitsPerDegree2;break;case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.CARTESIAN:uniforms.project_uCommonUnitsPerWorldUnit=[1,1,distanceScalesAtOrigin.unitsPerMeter[2]],uniforms.project_uCommonUnitsPerWorldUnit2=[0,0,distanceScalesAtOrigin.unitsPerMeter2[2]]}}return uniforms}));function getOffsetOrigin(viewport,coordinateSystem){var geospatialOrigin,coordinateOrigin=arguments.length>2&&void 0!==arguments[2]?arguments[2]:DEFAULT_COORDINATE_ORIGIN,shaderCoordinateOrigin=coordinateOrigin,offsetMode=!0;switch(geospatialOrigin=coordinateSystem===_lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.LNGLAT_OFFSETS||coordinateSystem===_lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.METER_OFFSETS?coordinateOrigin:viewport.isGeospatial?[Math.fround(viewport.longitude),Math.fround(viewport.latitude),0]:null,viewport.projectionMode){case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.c.WEB_MERCATOR:coordinateSystem!==_lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.LNGLAT&&coordinateSystem!==_lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.CARTESIAN||(offsetMode=!1);break;case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.c.WEB_MERCATOR_AUTO_OFFSET:coordinateSystem===_lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.LNGLAT?shaderCoordinateOrigin=geospatialOrigin:coordinateSystem===_lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.CARTESIAN&&(shaderCoordinateOrigin=[Math.fround(viewport.center[0]),Math.fround(viewport.center[1]),0],geospatialOrigin=viewport.unprojectPosition(shaderCoordinateOrigin),shaderCoordinateOrigin[0]-=coordinateOrigin[0],shaderCoordinateOrigin[1]-=coordinateOrigin[1],shaderCoordinateOrigin[2]-=coordinateOrigin[2]);break;case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.c.IDENTITY:shaderCoordinateOrigin=viewport.position.map(Math.fround);break;case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.c.GLOBE:offsetMode=!1;break;default:offsetMode=!1}return shaderCoordinateOrigin[2]=shaderCoordinateOrigin[2]||0,{geospatialOrigin:geospatialOrigin,shaderCoordinateOrigin:shaderCoordinateOrigin,offsetMode:offsetMode}}function getUniformsFromViewport(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},viewport=_ref.viewport,_ref$devicePixelRatio=_ref.devicePixelRatio,devicePixelRatio=void 0===_ref$devicePixelRatio?1:_ref$devicePixelRatio,_ref$modelMatrix=_ref.modelMatrix,modelMatrix=void 0===_ref$modelMatrix?null:_ref$modelMatrix,_ref$coordinateSystem=_ref.coordinateSystem,coordinateSystem=void 0===_ref$coordinateSystem?_lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.DEFAULT:_ref$coordinateSystem,coordinateOrigin=_ref.coordinateOrigin,_ref$autoWrapLongitud=_ref.autoWrapLongitude,autoWrapLongitude=void 0!==_ref$autoWrapLongitud&&_ref$autoWrapLongitud;_ref.projectionMode,_ref.positionOrigin;Object(_utils_assert__WEBPACK_IMPORTED_MODULE_4__.a)(viewport),coordinateSystem===_lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.DEFAULT&&(coordinateSystem=viewport.isGeospatial?_lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.LNGLAT:_lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.CARTESIAN);var uniforms=getMemoizedViewportUniforms({viewport:viewport,devicePixelRatio:devicePixelRatio,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin});return uniforms.project_uWrapLongitude=autoWrapLongitude,uniforms.project_uModelMatrix=modelMatrix||IDENTITY_MATRIX,uniforms}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return _unsupportedIterableToArray}));var _arrayLikeToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(176);function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return Object(_arrayLikeToArray__WEBPACK_IMPORTED_MODULE_0__.a)(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(_arrayLikeToArray__WEBPACK_IMPORTED_MODULE_0__.a)(o,minLen):void 0}}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"a",(function(){return isBrowser}));var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),_is_electron__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(215);function isBrowser(){return!("object"===(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))&&"[object process]"===String(process)&&!process.browser)||Object(_is_electron__WEBPACK_IMPORTED_MODULE_1__.a)()}}).call(this,__webpack_require__(58))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"a",(function(){return isElectron}));var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14);function isElectron(mockUserAgent){if("undefined"!=typeof window&&"object"===Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==process&&"object"===Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process.versions)&&Boolean(process.versions.electron))return!0;var realUserAgent="object"===("undefined"==typeof navigator?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,userAgent=mockUserAgent||realUserAgent;return!!(userAgent&&userAgent.indexOf("Electron")>=0)}}).call(this,__webpack_require__(58))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return _objectSpread}));var _defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?Object(arguments[i]):{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key){Object(_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(target,key,source[key])}))}return target}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _asyncIterator(iterable){var method;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(method=iterable[Symbol.asyncIterator]))return method.call(iterable);if(Symbol.iterator&&null!=(method=iterable[Symbol.iterator]))return method.call(iterable)}throw new TypeError("Object is not async iterable")}__webpack_require__.d(__webpack_exports__,"a",(function(){return _asyncIterator}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return WebMercatorViewport}));var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3),_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(8),_viewport__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(127),_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(29),gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(46),math_gl__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(19);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var WebMercatorViewport=function(_Viewport){function WebMercatorViewport(){var _this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,WebMercatorViewport);var _opts$latitude=opts.latitude,latitude=void 0===_opts$latitude?0:_opts$latitude,_opts$longitude=opts.longitude,longitude=void 0===_opts$longitude?0:_opts$longitude,_opts$zoom=opts.zoom,zoom=void 0===_opts$zoom?11:_opts$zoom,_opts$pitch=opts.pitch,pitch=void 0===_opts$pitch?0:_opts$pitch,_opts$bearing=opts.bearing,bearing=void 0===_opts$bearing?0:_opts$bearing,_opts$nearZMultiplier=opts.nearZMultiplier,nearZMultiplier=void 0===_opts$nearZMultiplier?.1:_opts$nearZMultiplier,_opts$farZMultiplier=opts.farZMultiplier,farZMultiplier=void 0===_opts$farZMultiplier?1.01:_opts$farZMultiplier,_opts$orthographic=opts.orthographic,orthographic=void 0!==_opts$orthographic&&_opts$orthographic,_opts$repeat=opts.repeat,repeat=void 0!==_opts$repeat&&_opts$repeat,_opts$worldOffset=opts.worldOffset,worldOffset=void 0===_opts$worldOffset?0:_opts$worldOffset,width=opts.width,height=opts.height,_opts$altitude=opts.altitude,altitude=void 0===_opts$altitude?1.5:_opts$altitude,scale=Math.pow(2,zoom);width=width||1,height=height||1,altitude=Math.max(.75,altitude);var _getProjectionParamet=Object(_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_8__.i)({width:width,height:height,pitch:pitch,altitude:altitude,nearZMultiplier:nearZMultiplier,farZMultiplier:farZMultiplier}),fov=_getProjectionParamet.fov,aspect=_getProjectionParamet.aspect,focalDistance=_getProjectionParamet.focalDistance,near=_getProjectionParamet.near,far=_getProjectionParamet.far,viewMatrixUncentered=Object(_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_8__.j)({height:height,pitch:pitch,bearing:bearing,scale:scale,altitude:altitude});if(worldOffset){var viewOffset=(new math_gl__WEBPACK_IMPORTED_MODULE_10__.a).translate([512*worldOffset,0,0]);viewMatrixUncentered=viewOffset.multiplyLeft(viewMatrixUncentered)}var viewportOpts=Object.assign({},opts,{width:width,height:height,viewMatrix:viewMatrixUncentered,longitude:longitude,latitude:latitude,zoom:zoom,orthographic:orthographic,fovyRadians:fov,aspect:aspect,focalDistance:orthographic?focalDistance:1,near:near,far:far});return(_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__.a)(WebMercatorViewport).call(this,viewportOpts))).latitude=latitude,_this.longitude=longitude,_this.zoom=zoom,_this.pitch=pitch,_this.bearing=bearing,_this.altitude=altitude,_this.orthographic=orthographic,_this._subViewports=repeat?[]:null,Object.freeze(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__.a)(_this)),_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__.a)(WebMercatorViewport,_Viewport),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(WebMercatorViewport,[{key:"addMetersToLngLat",value:function addMetersToLngLat(lngLatZ,xyz){return Object(_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_8__.b)(lngLatZ,xyz)}},{key:"getMapCenterByLngLatPosition",value:function getMapCenterByLngLatPosition(_ref){var lngLat=_ref.lngLat,pos=_ref.pos,fromLocation=Object(_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_8__.m)(pos,this.pixelUnprojectionMatrix),toLocation=this.projectFlat(lngLat),translate=gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_9__.a([],toLocation,gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_9__.d([],fromLocation)),newCenter=gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_9__.a([],this.center,translate);return this.unprojectFlat(newCenter)}},{key:"getBounds",value:function getBounds(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},corners=Object(_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_8__.e)(this,options.z||0);return[Math.min(corners[0][0],corners[1][0],corners[2][0],corners[3][0]),Math.min(corners[0][1],corners[1][1],corners[2][1],corners[3][1]),Math.max(corners[0][0],corners[1][0],corners[2][0],corners[3][0]),Math.max(corners[0][1],corners[1][1],corners[2][1],corners[3][1])]}},{key:"fitBounds",value:function fitBounds(bounds){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},width=this.width,height=this.height,_fitBounds2=Object(_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_8__.c)(Object.assign({width:width,height:height,bounds:bounds},options)),longitude=_fitBounds2.longitude,latitude=_fitBounds2.latitude,zoom=_fitBounds2.zoom;return new WebMercatorViewport({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom})}},{key:"subViewports",get:function get(){if(this._subViewports&&!this._subViewports.length)for(var bounds=this.getBounds(),minOffset=Math.floor((bounds[0]+180)/360),maxOffset=Math.ceil((bounds[2]-180)/360),x=minOffset;x<=maxOffset;x++){var offsetViewport=x?new WebMercatorViewport(_objectSpread({},this,{worldOffset:x})):this;this._subViewports.push(offsetViewport)}return this._subViewports}}]),WebMercatorViewport}(_viewport__WEBPACK_IMPORTED_MODULE_7__.a);WebMercatorViewport.displayName="WebMercatorViewport"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return layer_Layer}));var slicedToArray=__webpack_require__(11),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(7),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(8),constants=__webpack_require__(18),defineProperty=__webpack_require__(0),esm_get=__webpack_require__(22),features=__webpack_require__(797),webgl_features_table=__webpack_require__(286),classes_buffer=__webpack_require__(41);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var shader_attribute_ShaderAttribute=function(){function ShaderAttribute(dataColumn,opts){Object(classCallCheck.a)(this,ShaderAttribute),this.opts=opts,this.source=dataColumn}return Object(createClass.a)(ShaderAttribute,[{key:"getValue",value:function getValue(){var buffer=this.source.getBuffer(),accessor=this.getAccessor();if(buffer)return[buffer,accessor];var value=this.source.value,size=accessor.size,constantValue=value;if(value&&value.length!==size){constantValue=new Float32Array(size);for(var index=accessor.elementOffset||0,i=0;i<size;++i)constantValue[i]=value[index+i]}return constantValue}},{key:"getAccessor",value:function getAccessor(){return function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},this.source.getAccessor(),{},this.opts)}},{key:"value",get:function get(){return this.source.value}}]),ShaderAttribute}();var typed_array_manager=__webpack_require__(98),math_utils=__webpack_require__(67),log=__webpack_require__(20);function data_column_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function data_column_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?data_column_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):data_column_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function getStride(accessor){return accessor.stride||accessor.size*accessor.bytesPerElement}function resolveShaderAttribute(baseAccessor,shaderAttributeOptions){shaderAttributeOptions.offset&&log.a.removed("shaderAttribute.offset","vertexOffset, elementOffset")();var stride=getStride(baseAccessor);return data_column_objectSpread({},shaderAttributeOptions,{offset:("vertexOffset"in shaderAttributeOptions?shaderAttributeOptions.vertexOffset:baseAccessor.vertexOffset||0)*stride+(shaderAttributeOptions.elementOffset||0)*baseAccessor.bytesPerElement+(baseAccessor.offset||0),stride:stride})}var data_column_DataColumn=function(){function DataColumn(gl,opts){Object(classCallCheck.a)(this,DataColumn),this.gl=gl,this.id=opts.id,this.size=opts.size;var logicalType=opts.logicalType||opts.type,doublePrecision=5130===logicalType,defaultValue=opts.defaultValue;defaultValue=Number.isFinite(defaultValue)?[defaultValue]:defaultValue||new Array(this.size).fill(0),opts.defaultValue=defaultValue;var bufferType=logicalType;doublePrecision?bufferType=5126:!bufferType&&opts.isIndexed?bufferType=gl&&Object(features.b)(gl,webgl_features_table.a.ELEMENT_INDEX_UINT32)?5125:5123:bufferType||(bufferType=5126),opts.logicalType=logicalType,opts.type=bufferType;var defaultType=function glArrayFromType(glType){switch(glType){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(logicalType||bufferType||5126);this.shaderAttributes={},this.doublePrecision=doublePrecision,doublePrecision&&!1===opts.fp64&&(defaultType=Float32Array),opts.bytesPerElement=defaultType.BYTES_PER_ELEMENT,this.defaultType=defaultType,this.value=null,this.settings=opts,this.state={externalBuffer:null,bufferAccessor:opts,allocatedValue:null,constant:!1},this._buffer=null,this.setData(opts)}return Object(createClass.a)(DataColumn,[{key:"delete",value:function _delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),typed_array_manager.a.release(this.state.allocatedValue)}},{key:"getShaderAttributes",value:function getShaderAttributes(id,options){if(this.doublePrecision){var shaderAttributes={},isBuffer64Bit=this.value instanceof Float64Array,doubleShaderAttributeDefs=function resolveDoublePrecisionShaderAttributes(baseAccessor,shaderAttributeOptions){var resolvedOptions=resolveShaderAttribute(baseAccessor,shaderAttributeOptions);return{high:resolvedOptions,low:data_column_objectSpread({},resolvedOptions,{offset:resolvedOptions.offset+4*baseAccessor.size})}}(this.getAccessor(),options||{});return shaderAttributes[id]=new shader_attribute_ShaderAttribute(this,doubleShaderAttributeDefs.high),shaderAttributes["".concat(id,"64Low")]=isBuffer64Bit?new shader_attribute_ShaderAttribute(this,doubleShaderAttributeDefs.low):new Float32Array(this.size),shaderAttributes}if(options){var shaderAttributeDef=resolveShaderAttribute(this.getAccessor(),options);return Object(defineProperty.a)({},id,new shader_attribute_ShaderAttribute(this,shaderAttributeDef))}return Object(defineProperty.a)({},id,this)}},{key:"getBuffer",value:function getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}},{key:"getValue",value:function getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}},{key:"getAccessor",value:function getAccessor(){return this.state.bufferAccessor}},{key:"setData",value:function setData(opts){var state=this.state;ArrayBuffer.isView(opts)?opts={value:opts}:opts instanceof classes_buffer.a&&(opts={buffer:opts});var accessor=data_column_objectSpread({},this.settings,{},opts);if(state.bufferAccessor=accessor,opts.constant){var value=opts.value;if(value=this._normalizeValue(value,[],0),this.settings.normalized&&(value=this._normalizeConstant(value)),!(!state.constant||!this._areValuesEqual(value,this.value)))return!1;state.externalBuffer=null,state.constant=!0,this.value=value}else if(opts.buffer){var buffer=opts.buffer;state.externalBuffer=buffer,state.constant=!1,this.value=opts.value;var isBuffer64Bit=opts.value instanceof Float64Array;accessor.type=opts.type||buffer.accessor.type,accessor.bytesPerElement=buffer.accessor.BYTES_PER_ELEMENT*(isBuffer64Bit?2:1),accessor.stride=getStride(accessor)}else if(opts.value){this._checkExternalBuffer(opts);var _value=opts.value;state.externalBuffer=null,state.constant=!1,this.value=_value,accessor.bytesPerElement=_value.BYTES_PER_ELEMENT,accessor.stride=getStride(accessor);var _buffer=this.buffer,byteOffset=this.byteOffset;this.doublePrecision&&_value instanceof Float64Array&&(_value=Object(math_utils.d)(_value,accessor)),_buffer.byteLength<_value.byteLength+byteOffset&&_buffer.reallocate(2*(_value.byteLength+byteOffset)),_buffer.setAccessor(null),_buffer.subData({data:_value,offset:byteOffset}),accessor.type=opts.type||_buffer.accessor.type}return!0}},{key:"updateSubBuffer",value:function updateSubBuffer(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},value=this.value,_opts$startOffset=opts.startOffset,startOffset=void 0===_opts$startOffset?0:_opts$startOffset,endOffset=opts.endOffset;this.buffer.subData({data:this.doublePrecision&&value instanceof Float64Array?Object(math_utils.d)(value,{size:this.size,startIndex:startOffset,endIndex:endOffset}):value.subarray(startOffset,endOffset),offset:startOffset*value.BYTES_PER_ELEMENT+this.byteOffset})}},{key:"allocate",value:function allocate(_ref3){var numInstances=_ref3.numInstances,_ref3$copy=_ref3.copy,copy=void 0!==_ref3$copy&&_ref3$copy,state=this.state,oldValue=state.allocatedValue,value=typed_array_manager.a.allocate(oldValue,numInstances+1,{size:this.size,type:this.defaultType,copy:copy});this.value=value;var buffer=this.buffer,byteOffset=this.byteOffset;return buffer.byteLength<value.byteLength+byteOffset&&(buffer.reallocate(value.byteLength+byteOffset),copy&&oldValue&&buffer.subData({data:oldValue instanceof Float64Array?Object(math_utils.d)(oldValue,this):oldValue,offset:byteOffset})),state.allocatedValue=value,state.constant=!1,state.externalBuffer=null,state.bufferAccessor=this.settings,!0}},{key:"_checkExternalBuffer",value:function _checkExternalBuffer(opts){var value=opts.value;if(!opts.constant&&value){var ArrayType=this.defaultType,illegalArrayType=!1;if(this.doublePrecision&&(illegalArrayType=value.BYTES_PER_ELEMENT<4),illegalArrayType)throw new Error("Attribute ".concat(this.id," does not support ").concat(value.constructor.name));value instanceof ArrayType||!this.settings.normalized||"normalized"in opts||log.a.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"_normalizeConstant",value:function _normalizeConstant(value){switch(this.settings.type){case 5120:return new Float32Array(value).map((function(x){return(x+128)/255*2-1}));case 5122:return new Float32Array(value).map((function(x){return(x+32768)/65535*2-1}));case 5121:return new Float32Array(value).map((function(x){return x/255}));case 5123:return new Float32Array(value).map((function(x){return x/65535}));default:return value}}},{key:"_normalizeValue",value:function _normalizeValue(value,out,start){var _this$settings=this.settings,defaultValue=_this$settings.defaultValue,size=_this$settings.size;if(Number.isFinite(value))return out[start]=value,out;if(!value)return out[start]=defaultValue[0],out;switch(size){case 4:out[start+3]=Number.isFinite(value[3])?value[3]:defaultValue[3];case 3:out[start+2]=Number.isFinite(value[2])?value[2]:defaultValue[2];case 2:out[start+1]=Number.isFinite(value[1])?value[1]:defaultValue[1];case 1:out[start+0]=Number.isFinite(value[0])?value[0]:defaultValue[0];break;default:for(var i=size;--i>=0;)out[start+i]=Number.isFinite(value[i])?value[i]:defaultValue[i]}return out}},{key:"_areValuesEqual",value:function _areValuesEqual(value1,value2){if(!value1||!value2)return!1;for(var size=this.size,i=0;i<size;i++)if(value1[i]!==value2[i])return!1;return!0}},{key:"buffer",get:function get(){if(!this._buffer){var _this$settings2=this.settings,isIndexed=_this$settings2.isIndexed,type=_this$settings2.type;this._buffer=new classes_buffer.a(this.gl,{id:this.id,target:isIndexed?34963:34962,accessor:{type:type}})}return this._buffer}},{key:"byteOffset",get:function get(){var accessor=this.getAccessor();return accessor.vertexOffset?accessor.vertexOffset*getStride(accessor):0}}]),DataColumn}(),assert=__webpack_require__(26),iterable_utils=__webpack_require__(84),flatten=__webpack_require__(116),EMPTY=[],FULL=[[0,1/0]];function range_add(rangeList,range){if(rangeList===FULL)return rangeList;if(range[0]<0&&(range[0]=0),range[0]>=range[1])return rangeList;for(var newRangeList=[],len=rangeList.length,insertPosition=0,i=0;i<len;i++){var range0=rangeList[i];range0[1]<range[0]?(newRangeList.push(range0),insertPosition=i+1):range0[0]>range[1]?newRangeList.push(range0):range=[Math.min(range0[0],range[0]),Math.max(range0[1],range[1])]}return newRangeList.splice(insertPosition,0,range),newRangeList}function padArrayChunk(_ref){var source=_ref.source,target=_ref.target,_ref$start=_ref.start,start=void 0===_ref$start?0:_ref$start,end=_ref.end,getData=_ref.getData;end=end||target.length;var sourceLength=source.length,targetLength=end-start;if(sourceLength>targetLength)target.set(source.subarray(0,targetLength),start);else if(target.set(source,start),getData)for(var i=sourceLength;i<targetLength;)for(var datum=getData(i,source),j=0;j<datum.length;j++)target[start+i]=datum[j],i++}var DEFAULT_TRANSITION_SETTINGS={interpolation:{duration:0,easing:function easing(t){return t}},spring:{stiffness:.05,damping:.5}};function normalizeTransitionSettings(userSettings,layerSettings){return userSettings?(Number.isFinite(userSettings)&&(userSettings={duration:userSettings}),userSettings.type=userSettings.type||"interpolation",Object.assign({},DEFAULT_TRANSITION_SETTINGS[userSettings.type],layerSettings,userSettings)):null}function getSourceBufferAttribute(gl,attribute){return attribute.getBuffer()?[attribute.getBuffer(),{divisor:0,size:attribute.size,normalized:attribute.settings.normalized}]:attribute.value}function getAttributeTypeFromSize(size){switch(size){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(size,'"'))}}function cycleBuffers(buffers){buffers.push(buffers.shift())}function getAttributeBufferLength(attribute,numInstances){var doublePrecision=attribute.doublePrecision,settings=attribute.settings,value=attribute.value,size=attribute.size,multiplier=doublePrecision?2:1;return(settings.noAlloc?value.length:numInstances*size)*multiplier}function padBuffer(_ref){var buffer=_ref.buffer,numInstances=_ref.numInstances,attribute=_ref.attribute,fromLength=_ref.fromLength,fromStartIndices=_ref.fromStartIndices,_ref$getData=_ref.getData,getData=void 0===_ref$getData?function(x){return x}:_ref$getData,precisionMultiplier=attribute.doublePrecision?2:1,size=attribute.size*precisionMultiplier,byteOffset=attribute.byteOffset,toStartIndices=attribute.startIndices,hasStartIndices=fromStartIndices&&toStartIndices,toLength=getAttributeBufferLength(attribute,numInstances),isConstant=attribute.state.constant;if(hasStartIndices||!(fromLength>=toLength)){var toData=isConstant?attribute.value:attribute.getBuffer().getData({srcByteOffset:byteOffset});if(attribute.settings.normalized&&!isConstant){var getter=getData;getData=function getData(value,chunk){return attribute._normalizeConstant(getter(value,chunk))}}var getMissingData=isConstant?function(i,chunk){return getData(toData,chunk)}:function(i,chunk){return getData(toData.subarray(i,i+size),chunk)},source=buffer.getData({length:fromLength}),data=new Float32Array(toLength);!function padArray(_ref2){var source=_ref2.source,target=_ref2.target,size=_ref2.size,getData=_ref2.getData,sourceStartIndices=_ref2.sourceStartIndices,targetStartIndices=_ref2.targetStartIndices;if(!Array.isArray(targetStartIndices))return padArrayChunk({source:source,target:target,getData:getData}),target;for(var sourceIndex=0,targetIndex=0,getChunkData=getData&&function(i,chunk){return getData(i+targetIndex,chunk)},n=Math.min(sourceStartIndices.length,targetStartIndices.length),i=1;i<n;i++){var nextSourceIndex=sourceStartIndices[i]*size,nextTargetIndex=targetStartIndices[i]*size;padArrayChunk({source:source.subarray(sourceIndex,nextSourceIndex),target:target,start:targetIndex,end:nextTargetIndex,getData:getChunkData}),sourceIndex=nextSourceIndex,targetIndex=nextTargetIndex}return targetIndex<target.length&&padArrayChunk({source:[],target:target,start:targetIndex,getData:getChunkData}),target}({source:source,target:data,sourceStartIndices:fromStartIndices,targetStartIndices:toStartIndices,size:size,getData:getMissingData}),buffer.byteLength<data.byteLength+byteOffset&&buffer.reallocate(data.byteLength+byteOffset),buffer.subData({data:data,offset:byteOffset})}}var attribute_Attribute=function(_DataColumn){function Attribute(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,Attribute),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Attribute).call(this,gl,opts));var _opts$transition=opts.transition,transition=void 0!==_opts$transition&&_opts$transition,_opts$noAlloc=opts.noAlloc,noAlloc=void 0!==_opts$noAlloc&&_opts$noAlloc,_opts$update=opts.update,update=void 0===_opts$update?null:_opts$update,_opts$accessor=opts.accessor,accessor=void 0===_opts$accessor?null:_opts$accessor,_opts$transform=opts.transform,transform=void 0===_opts$transform?null:_opts$transform,_opts$startIndices=opts.startIndices,startIndices=void 0===_opts$startIndices?null:_opts$startIndices;return Object.assign(_this.settings,{transition:transition,noAlloc:noAlloc,update:update||accessor&&_this._autoUpdater,accessor:accessor,transform:transform}),Object.assign(_this.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:FULL,startIndices:startIndices}),Object.seal(_this.settings),Object.seal(_this.state),_this._validateAttributeUpdaters(),_this}return Object(inherits.a)(Attribute,_DataColumn),Object(createClass.a)(Attribute,[{key:"needsUpdate",value:function needsUpdate(){return this.state.needsUpdate}},{key:"needsRedraw",value:function needsRedraw(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$clearChangedFlag=_ref.clearChangedFlags,clearChangedFlags=void 0!==_ref$clearChangedFlag&&_ref$clearChangedFlag,needsRedraw=this.state.needsRedraw;return this.state.needsRedraw=needsRedraw&&!clearChangedFlags,needsRedraw}},{key:"getUpdateTriggers",value:function getUpdateTriggers(){var accessor=this.settings.accessor;return[this.id].concat("function"!=typeof accessor&&accessor||[])}},{key:"supportsTransition",value:function supportsTransition(){return Boolean(this.settings.transition)}},{key:"getTransitionSetting",value:function getTransitionSetting(opts){var accessor=this.settings.accessor,layerSettings=this.settings.transition;return this.supportsTransition()?normalizeTransitionSettings(Array.isArray(accessor)?opts[accessor.find((function(a){return opts[a]}))]:opts[accessor],layerSettings):null}},{key:"setNeedsUpdate",value:function setNeedsUpdate(){var reason=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,dataRange=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||reason,this.setNeedsRedraw(reason),dataRange){var _dataRange$startRow=dataRange.startRow,startRow=void 0===_dataRange$startRow?0:_dataRange$startRow,_dataRange$endRow=dataRange.endRow,endRow=void 0===_dataRange$endRow?1/0:_dataRange$endRow;this.state.updateRanges=range_add(this.state.updateRanges,[startRow,endRow])}else this.state.updateRanges=FULL}},{key:"clearNeedsUpdate",value:function clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=EMPTY}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var reason=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||reason}},{key:"update",value:function update(opts){this.setData(opts)}},{key:"allocate",value:function allocate(numInstances){var state=this.state,settings=this.settings;return!settings.noAlloc&&(!!settings.update&&(Object(assert.a)(Number.isFinite(numInstances)),Object(esm_get.a)(Object(getPrototypeOf.a)(Attribute.prototype),"allocate",this).call(this,{numInstances:numInstances,copy:state.updateRanges!==FULL}),!0))}},{key:"updateBuffer",value:function updateBuffer(_ref2){var numInstances=_ref2.numInstances,data=_ref2.data,props=_ref2.props,context=_ref2.context;if(!this.needsUpdate())return!1;var updateRanges=this.state.updateRanges,_this$settings=this.settings,update=_this$settings.update,noAlloc=_this$settings.noAlloc,updated=!0;if(update){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=updateRanges[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=Object(slicedToArray.a)(_step.value,2),_startRow=_step$value[0],_endRow=_step$value[1];update.call(context,this,{data:data,startRow:_startRow,endRow:_endRow,props:props,numInstances:numInstances})}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else{var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=updateRanges[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _step2$value=Object(slicedToArray.a)(_step2.value,2),startRow=_step2$value[0],endRow=_step2$value[1],startOffset=Number.isFinite(startRow)?this.getVertexOffset(startRow):0,endOffset=Number.isFinite(endRow)?this.getVertexOffset(endRow):noAlloc||!Number.isFinite(numInstances)?this.value.length:numInstances*this.size;Object(esm_get.a)(Object(getPrototypeOf.a)(Attribute.prototype),"updateSubBuffer",this).call(this,{startOffset:startOffset,endOffset:endOffset})}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}else;this._checkAttributeArray()}else updated=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),updated}},{key:"setConstantValue",value:function setConstantValue(value){return void 0!==value&&"function"!=typeof value&&(this.setData({constant:!0,value:value})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}},{key:"setExternalBuffer",value:function setExternalBuffer(buffer){var state=this.state;return buffer?(this.clearNeedsUpdate(),state.lastExternalBuffer===buffer||(state.lastExternalBuffer=buffer,this.setNeedsRedraw(),this.setData(buffer)),!0):(state.lastExternalBuffer=null,!1)}},{key:"setBinaryValue",value:function setBinaryValue(buffer){var startIndices=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,state=this.state,settings=this.settings;if(!buffer)return state.binaryValue=null,state.binaryAccessor=null,!1;if(settings.noAlloc)return!1;if(state.binaryValue===buffer)return this.clearNeedsUpdate(),!0;state.binaryValue=buffer,this.setNeedsRedraw(),ArrayBuffer.isView(buffer)&&(buffer={value:buffer});var needsUpdate=settings.transform||startIndices!==this.startIndices;if(needsUpdate){Object(assert.a)(ArrayBuffer.isView(buffer.value),"invalid ".concat(settings.accessor));var needsNormalize=buffer.size&&buffer.size!==this.size;return state.binaryAccessor=Object(iterable_utils.b)(buffer.value,{size:buffer.size||this.size,stride:buffer.stride,offset:buffer.offset,startIndices:startIndices,nested:needsNormalize}),!1}return this.clearNeedsUpdate(),this.setData(buffer),!0}},{key:"getVertexOffset",value:function getVertexOffset(row){var startIndices=this.startIndices;return(startIndices?startIndices[row]:row)*this.size}},{key:"getShaderAttributes",value:function getShaderAttributes(){var shaderAttributeDefs=this.settings.shaderAttributes||Object(defineProperty.a)({},this.id,null),shaderAttributes={};for(var shaderAttributeName in shaderAttributeDefs)Object.assign(shaderAttributes,Object(esm_get.a)(Object(getPrototypeOf.a)(Attribute.prototype),"getShaderAttributes",this).call(this,shaderAttributeName,shaderAttributeDefs[shaderAttributeName]));return shaderAttributes}},{key:"_autoUpdater",value:function _autoUpdater(attribute,_ref4){var data=_ref4.data,startRow=_ref4.startRow,endRow=_ref4.endRow,props=_ref4.props,numInstances=_ref4.numInstances,settings=attribute.settings,state=attribute.state,value=attribute.value,size=attribute.size,startIndices=attribute.startIndices,accessor=settings.accessor,transform=settings.transform,accessorFunc=state.binaryAccessor||("function"==typeof accessor?accessor:props[accessor]);Object(assert.a)("function"==typeof accessorFunc,'accessor "'.concat(accessor,'" is not a function'));var i=attribute.getVertexOffset(startRow),_createIterable=Object(iterable_utils.a)(data,startRow,endRow),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=iterable[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var object=_step3.value;objectInfo.index++;var objectValue=accessorFunc(object,objectInfo);if(transform&&(objectValue=transform.call(this,objectValue)),startIndices){var numVertices=(objectInfo.index<startIndices.length-1?startIndices[objectInfo.index+1]:numInstances)-startIndices[objectInfo.index];if(objectValue&&Array.isArray(objectValue[0])){var startIndex=i,_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=objectValue[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var item=_step4.value;attribute._normalizeValue(item,value,startIndex),startIndex+=size}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}else objectValue&&objectValue.length>size?value.set(objectValue,i):(attribute._normalizeValue(objectValue,objectInfo.target,0),Object(flatten.a)({target:value,source:objectInfo.target,start:i,count:numVertices}));i+=numVertices*size}else attribute._normalizeValue(objectValue,value,i),i+=size}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}attribute.constant=!1}},{key:"_validateAttributeUpdaters",value:function _validateAttributeUpdaters(){var settings=this.settings;if(!(settings.noAlloc||"function"==typeof settings.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function _checkAttributeArray(){var value=this.value,limit=Math.min(4,this.size);if(value&&value.length>=limit){var valid=!0;switch(limit){case 4:valid=valid&&Number.isFinite(value[3]);case 3:valid=valid&&Number.isFinite(value[2]);case 2:valid=valid&&Number.isFinite(value[1]);case 1:valid=valid&&Number.isFinite(value[0]);break;default:valid=!1}if(!valid)throw new Error("Illegal attribute generated for ".concat(this.id))}}},{key:"startIndices",get:function get(){return this.state.startIndices},set:function set(layout){this.state.startIndices=layout}}]),Attribute}(data_column_DataColumn),debug=__webpack_require__(36),utils_assert=__webpack_require__(223),FS100="void main() {gl_FragColor = vec4(0);}",FS_GLES="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",FS300="#version 300 es\n".concat(FS_GLES);function getQualifierDetails(line,qualifiers){qualifiers=Array.isArray(qualifiers)?qualifiers:[qualifiers];var words=line.replace(/^\s+/,"").split(/\s+/),_words=Object(slicedToArray.a)(words,3),qualifier=_words[0],type=_words[1],definition=_words[2];return qualifiers.includes(qualifier)&&type&&definition?{qualifier:qualifier,type:type,name:definition.split(";")[0]}:null}function getPassthroughFS(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$version=_ref.version,version=void 0===_ref$version?100:_ref$version,input=_ref.input,inputType=_ref.inputType,output=_ref.output;if(!input)return 300===version?FS300:version>300?"#version ".concat(version,"\n").concat(FS_GLES):FS100;var outputValue=convertToVec4(input,inputType);return version>=300?"#version ".concat(version," ").concat(300===version?"es":"","\nin ").concat(inputType," ").concat(input,";\nout vec4 ").concat(output,";\nvoid main() {\n  ").concat(output," = ").concat(outputValue,";\n}"):"varying ".concat(inputType," ").concat(input,";\nvoid main() {\n  gl_FragColor = ").concat(outputValue,";\n}")}function typeToChannelCount(type){switch(type){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Object(utils_assert.a)(!1),null}}function convertToVec4(variable,type){switch(type){case"float":return"vec4(".concat(variable,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(variable,", 0.0, 1.0)");case"vec3":return"vec4(".concat(variable,", 1.0)");case"vec4":return variable;default:return Object(utils_assert.a)(!1),null}}var esm=__webpack_require__(9),transform_feedback=__webpack_require__(805),esm_utils_assert=__webpack_require__(23),buffer_transform_BufferTransform=function(){function BufferTransform(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,BufferTransform),this.gl=gl,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(props),Object.seal(this)}return Object(createClass.a)(BufferTransform,[{key:"setupResources",value:function setupResources(opts){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.bindings[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var binding=_step.value;this._setupTransformFeedback(binding,opts)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"updateModelProps",value:function updateModelProps(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},varyings=this.varyings;return varyings.length>0&&(props=Object.assign({},props,{varyings:varyings})),props}},{key:"getDrawOptions",value:function getDrawOptions(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},binding=this.bindings[this.currentIndex],sourceBuffers=binding.sourceBuffers,transformFeedback=binding.transformFeedback,attributes=Object.assign({},sourceBuffers,opts.attributes);return{attributes:attributes,transformFeedback:transformFeedback}}},{key:"swap",value:function swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function update(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(opts)}},{key:"getBuffer",value:function getBuffer(varyingName){var feedbackBuffers=this.bindings[this.currentIndex].feedbackBuffers,bufferOrParams=varyingName?feedbackBuffers[varyingName]:null;return bufferOrParams?bufferOrParams instanceof classes_buffer.a?bufferOrParams:bufferOrParams.buffer:null}},{key:"getData",value:function getData(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},varyingName=_ref.varyingName,buffer=this.getBuffer(varyingName);return buffer?buffer.getData():null}},{key:"delete",value:function _delete(){for(var name in this.resources)this.resources[name].delete()}},{key:"_initialize",value:function _initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(props),this.varyings=props.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Object(esm_utils_assert.a)(Object(esm.f)(this.gl))}},{key:"_getFeedbackBuffers",value:function _getFeedbackBuffers(props){var _props$sourceBuffers=props.sourceBuffers,sourceBuffers=void 0===_props$sourceBuffers?{}:_props$sourceBuffers,feedbackBuffers={};if(this.bindings[this.currentIndex]&&Object.assign(feedbackBuffers,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var sourceName in this.feedbackMap){var feedbackName=this.feedbackMap[sourceName];sourceName in sourceBuffers&&(feedbackBuffers[feedbackName]=sourceName)}for(var bufferName in Object.assign(feedbackBuffers,props.feedbackBuffers),feedbackBuffers){var bufferOrRef=feedbackBuffers[bufferName];if("string"==typeof bufferOrRef){var sourceBuffer=sourceBuffers[bufferOrRef],byteLength=sourceBuffer.byteLength,usage=sourceBuffer.usage,accessor=sourceBuffer.accessor;feedbackBuffers[bufferName]=this._createNewBuffer(bufferName,{byteLength:byteLength,usage:usage,accessor:accessor})}}return feedbackBuffers}},{key:"_setupBuffers",value:function _setupBuffers(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_props$sourceBuffers2=props.sourceBuffers,sourceBuffers=void 0===_props$sourceBuffers2?null:_props$sourceBuffers2;Object.assign(this.feedbackMap,props.feedbackMap);var feedbackBuffers=this._getFeedbackBuffers(props);this._updateBindings({sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers})}},{key:"_setupTransformFeedback",value:function _setupTransformFeedback(binding,_ref2){var program=_ref2.model.program;binding.transformFeedback=new transform_feedback.a(this.gl,{program:program,buffers:binding.feedbackBuffers})}},{key:"_updateBindings",value:function _updateBindings(opts){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],opts),this.feedbackMap){var _this$_swapBuffers=this._swapBuffers(this.bindings[this.currentIndex]),sourceBuffers=_this$_swapBuffers.sourceBuffers,feedbackBuffers=_this$_swapBuffers.feedbackBuffers,nextIndex=this._getNextIndex();this.bindings[nextIndex]=this._updateBinding(this.bindings[nextIndex],{sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers})}}},{key:"_updateBinding",value:function _updateBinding(binding,opts){return binding?(Object.assign(binding.sourceBuffers,opts.sourceBuffers),Object.assign(binding.feedbackBuffers,opts.feedbackBuffers),binding.transformFeedback&&binding.transformFeedback.setBuffers(binding.feedbackBuffers),binding):{sourceBuffers:Object.assign({},opts.sourceBuffers),feedbackBuffers:Object.assign({},opts.feedbackBuffers)}}},{key:"_swapBuffers",value:function _swapBuffers(opts){if(!this.feedbackMap)return null;var sourceBuffers=Object.assign({},opts.sourceBuffers),feedbackBuffers=Object.assign({},opts.feedbackBuffers);for(var srcName in this.feedbackMap){var dstName=this.feedbackMap[srcName];sourceBuffers[srcName]=opts.feedbackBuffers[dstName],feedbackBuffers[dstName]=opts.sourceBuffers[srcName],Object(esm_utils_assert.a)(feedbackBuffers[dstName]instanceof classes_buffer.a)}return{sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers}}},{key:"_createNewBuffer",value:function _createNewBuffer(name,opts){var buffer=new classes_buffer.a(this.gl,opts);return this.resources[name]&&this.resources[name].delete(),this.resources[name]=buffer,buffer}},{key:"_getNextIndex",value:function _getNextIndex(){return(this.currentIndex+1)%2}}]),BufferTransform}(),copy_and_blit=__webpack_require__(291),texture_2d=__webpack_require__(148),classes_framebuffer=__webpack_require__(82),texture_utils=__webpack_require__(422);function getShaderVersion(source){var version=100,words=source.match(/[^\s]+/g);if(words.length>=2&&"#version"===words[0]){var v=parseInt(words[1],10);Number.isFinite(v)&&(version=v)}return version}var _SRC_TEX_PARAMETER_OV,inject_shader=__webpack_require__(225),transform_transform={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null};function updateForTextures(_ref){var vs=_ref.vs,sourceTextureMap=_ref.sourceTextureMap,targetTextureVarying=_ref.targetTextureVarying,targetTexture=_ref.targetTexture,sourceCount=Object.keys(sourceTextureMap).length,targetTextureType=null,samplerTextureMap={},updatedVs=vs,finalInject={};if(sourceCount>0||targetTextureVarying){var vsLines=updatedVs.split("\n"),updateVsLines=vsLines.slice();if(vsLines.forEach((function(line,index,lines){if(sourceCount>0){var updated=function processAttributeDefinition(line,textureMap){var samplerTextureMap={},attributeData=function getAttributeDefinition(line){return getQualifierDetails(line,["attribute","in"])}(line);if(!attributeData)return null;var type=attributeData.type,name=attributeData.name;if(name&&textureMap[name]){var updatedLine="// ".concat(line," => Replaced by Transform with a sampler"),_getSamplerDecleratio=function getSamplerDeclerations(textureName){var samplerName="".concat("transform_uSampler_").concat(textureName),sizeName="".concat("transform_uSize_").concat(textureName),uniformDeclerations="  uniform sampler2D ".concat(samplerName,";\n  uniform vec2 ").concat(sizeName,";");return{samplerName:samplerName,sizeName:sizeName,uniformDeclerations:uniformDeclerations}}(name),samplerName=_getSamplerDecleratio.samplerName,sizeName=_getSamplerDecleratio.sizeName,uniformDeclerations=_getSamplerDecleratio.uniformDeclerations,channels=function typeToChannelSuffix(type){switch(type){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Object(utils_assert.a)(!1),null}}(type),sampleInstruction="  ".concat(type," ").concat(name," = transform_getInput(").concat(samplerName,", ").concat(sizeName,").").concat(channels,";\n");return samplerTextureMap[samplerName]=name,{updatedLine:updatedLine,inject:{"vs:#decl":uniformDeclerations,"vs:#main-start":sampleInstruction},samplerTextureMap:samplerTextureMap}}return null}(line,sourceTextureMap);if(updated){var updatedLine=updated.updatedLine,inject=updated.inject;updateVsLines[index]=updatedLine,finalInject=Object(inject_shader.b)([finalInject,inject]),Object.assign(samplerTextureMap,updated.samplerTextureMap),sourceCount--}}targetTextureVarying&&!targetTextureType&&(targetTextureType=function getVaryingType(line,varying){var qualaiferDetails=getQualifierDetails(line,["varying","out"]);if(!qualaiferDetails)return null;return qualaiferDetails.name===varying?qualaiferDetails.type:null}(line,targetTextureVarying))})),targetTextureVarying){Object(esm_utils_assert.a)(targetTexture);var sizeName="".concat("transform_uSize_").concat(targetTextureVarying),inject={"vs:#decl":"uniform vec2 ".concat(sizeName,";\n"),"vs:#main-start":"     vec2 ".concat("transform_position"," = transform_getPos(").concat(sizeName,");\n     gl_Position = vec4(").concat("transform_position",", 0, 1.);\n")};finalInject=Object(inject_shader.b)([finalInject,inject])}updatedVs=updateVsLines.join("\n")}return{vs:updatedVs,targetTextureType:targetTextureType,inject:finalInject,samplerTextureMap:samplerTextureMap}}function getSizeUniforms(_ref2){var width,height,sourceTextureMap=_ref2.sourceTextureMap,targetTextureVarying=_ref2.targetTextureVarying,targetTexture=_ref2.targetTexture,uniforms={};for(var textureName in targetTextureVarying&&(width=targetTexture.width,height=targetTexture.height,uniforms["".concat("transform_uSize_").concat(targetTextureVarying)]=[width,height]),sourceTextureMap){var _sourceTextureMap$tex=sourceTextureMap[textureName];width=_sourceTextureMap$tex.width,height=_sourceTextureMap$tex.height,uniforms["".concat("transform_uSize_").concat(textureName)]=[width,height]}return uniforms}var SRC_TEX_PARAMETER_OVERRIDES=(_SRC_TEX_PARAMETER_OV={},Object(defineProperty.a)(_SRC_TEX_PARAMETER_OV,10241,9728),Object(defineProperty.a)(_SRC_TEX_PARAMETER_OV,10240,9728),Object(defineProperty.a)(_SRC_TEX_PARAMETER_OV,10242,33071),Object(defineProperty.a)(_SRC_TEX_PARAMETER_OV,10243,33071),_SRC_TEX_PARAMETER_OV),texture_transform_TextureTransform=function(){function TextureTransform(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,TextureTransform),this.gl=gl,this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(props),Object.seal(this)}return Object(createClass.a)(TextureTransform,[{key:"updateModelProps",value:function updateModelProps(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},updatedModelProps=this._processVertexShader(props);return Object.assign({},props,updatedModelProps)}},{key:"getDrawOptions",value:function getDrawOptions(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$bindings$this$c=this.bindings[this.currentIndex],sourceBuffers=_this$bindings$this$c.sourceBuffers,sourceTextures=_this$bindings$this$c.sourceTextures,framebuffer=_this$bindings$this$c.framebuffer,targetTexture=_this$bindings$this$c.targetTexture,attributes=Object.assign({},sourceBuffers,opts.attributes),uniforms=Object.assign({},opts.uniforms),parameters=Object.assign({},opts.parameters),discard=opts.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var sampler in attributes.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var textureName=this.samplerTextureMap[sampler];uniforms[sampler]=sourceTextures[textureName]}this._setSourceTextureParameters();var sizeUniforms=getSizeUniforms({sourceTextureMap:sourceTextures,targetTextureVarying:this.targetTextureVarying,targetTexture:targetTexture});Object.assign(uniforms,sizeUniforms)}return this.hasTargetTexture&&(discard=!1,parameters.viewport=[0,0,framebuffer.width,framebuffer.height]),{attributes:attributes,framebuffer:framebuffer,uniforms:uniforms,discard:discard,parameters:parameters}}},{key:"swap",value:function swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function update(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(opts)}},{key:"getTargetTexture",value:function getTargetTexture(){return this.bindings[this.currentIndex].targetTexture}},{key:"getData",value:function getData(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$packed=_ref.packed,packed=void 0!==_ref$packed&&_ref$packed,framebuffer=this.bindings[this.currentIndex].framebuffer,pixels=Object(copy_and_blit.b)(framebuffer);if(!packed)return pixels;for(var ArrayType=pixels.constructor,channelCount=typeToChannelCount(this.targetTextureType),packedPixels=new ArrayType(pixels.length*channelCount/4),packCount=0,i=0;i<pixels.length;i+=4)for(var j=0;j<channelCount;j++)packedPixels[packCount++]=pixels[i+j];return packedPixels}},{key:"getFramebuffer",value:function getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}},{key:"delete",value:function _delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function _initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_targetTextureVarying=props._targetTextureVarying,_swapTexture=props._swapTexture;this._swapTexture=_swapTexture,this.targetTextureVarying=_targetTextureVarying,this.hasTargetTexture=_targetTextureVarying,this._setupTextures(props)}},{key:"_createTargetTexture",value:function _createTargetTexture(props){var sourceTextures=props.sourceTextures,textureOrReference=props.textureOrReference;if(textureOrReference instanceof texture_2d.a)return textureOrReference;var refTexture=sourceTextures[textureOrReference];return refTexture?(this._targetRefTexName=textureOrReference,this._createNewTexture(refTexture)):null}},{key:"_setupTextures",value:function _setupTextures(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},sourceBuffers=props.sourceBuffers,_props$_sourceTexture=props._sourceTextures,_sourceTextures=void 0===_props$_sourceTexture?{}:_props$_sourceTexture,_targetTexture=props._targetTexture,targetTexture=this._createTargetTexture({sourceTextures:_sourceTextures,textureOrReference:_targetTexture});this.hasSourceTextures=this.hasSourceTextures||_sourceTextures&&Object.keys(_sourceTextures).length>0,this._updateBindings({sourceBuffers:sourceBuffers,sourceTextures:_sourceTextures,targetTexture:targetTexture}),"elementCount"in props&&this._updateElementIDBuffer(props.elementCount)}},{key:"_updateElementIDBuffer",value:function _updateElementIDBuffer(elementCount){if(!("number"!=typeof elementCount||this.elementCount>=elementCount)){var elementIds=new Float32Array(elementCount);elementIds.forEach((function(_,index,array){array[index]=index})),this.elementIDBuffer?this.elementIDBuffer.setData({data:elementIds}):this.elementIDBuffer=new classes_buffer.a(this.gl,{data:elementIds,accessor:{size:1}}),this.elementCount=elementCount}}},{key:"_updateBindings",value:function _updateBindings(opts){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],opts),this._swapTexture){var _this$_swapTextures=this._swapTextures(this.bindings[this.currentIndex]),sourceTextures=_this$_swapTextures.sourceTextures,targetTexture=_this$_swapTextures.targetTexture,nextIndex=this._getNextIndex();this.bindings[nextIndex]=this._updateBinding(this.bindings[nextIndex],{sourceTextures:sourceTextures,targetTexture:targetTexture})}}},{key:"_updateBinding",value:function _updateBinding(binding,opts){var sourceBuffers=opts.sourceBuffers,sourceTextures=opts.sourceTextures,targetTexture=opts.targetTexture;if(binding||(binding={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(binding.sourceTextures,sourceTextures),Object.assign(binding.sourceBuffers,sourceBuffers),targetTexture){binding.targetTexture=targetTexture;var width=targetTexture.width,height=targetTexture.height,framebuffer=binding.framebuffer;framebuffer?(framebuffer.update({attachments:Object(defineProperty.a)({},36064,targetTexture),resizeAttachments:!1}),framebuffer.resize({width:width,height:height})):binding.framebuffer=new classes_framebuffer.a(this.gl,{id:"".concat(this.id||"transform","-framebuffer"),width:width,height:height,attachments:Object(defineProperty.a)({},36064,targetTexture)})}return binding}},{key:"_setSourceTextureParameters",value:function _setSourceTextureParameters(){var index=this.currentIndex,sourceTextures=this.bindings[index].sourceTextures;for(var name in sourceTextures)sourceTextures[name].setParameters(SRC_TEX_PARAMETER_OVERRIDES)}},{key:"_swapTextures",value:function _swapTextures(opts){if(!this._swapTexture)return null;var sourceTextures=Object.assign({},opts.sourceTextures);return sourceTextures[this._swapTexture]=opts.targetTexture,{sourceTextures:sourceTextures,targetTexture:opts.sourceTextures[this._swapTexture]}}},{key:"_createNewTexture",value:function _createNewTexture(refTexture){var _parameters,texture=Object(texture_utils.a)(refTexture,{parameters:(_parameters={},Object(defineProperty.a)(_parameters,10241,9728),Object(defineProperty.a)(_parameters,10240,9728),Object(defineProperty.a)(_parameters,10242,33071),Object(defineProperty.a)(_parameters,10243,33071),_parameters),pixelStore:Object(defineProperty.a)({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=texture,texture}},{key:"_getNextIndex",value:function _getNextIndex(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function _processVertexShader(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$bindings$this$c2=this.bindings[this.currentIndex],sourceTextures=_this$bindings$this$c2.sourceTextures,targetTexture=_this$bindings$this$c2.targetTexture,_updateForTextures=updateForTextures({vs:props.vs,sourceTextureMap:sourceTextures,targetTextureVarying:this.targetTextureVarying,targetTexture:targetTexture}),vs=_updateForTextures.vs,uniforms=_updateForTextures.uniforms,targetTextureType=_updateForTextures.targetTextureType,inject=_updateForTextures.inject,samplerTextureMap=_updateForTextures.samplerTextureMap,combinedInject=Object(inject_shader.b)([props.inject||{},inject]);this.targetTextureType=targetTextureType,this.samplerTextureMap=samplerTextureMap;var fs=props._fs||getPassthroughFS({version:getShaderVersion(vs),input:this.targetTextureVarying,inputType:targetTextureType,output:"transform_output"}),modules=this.hasSourceTextures||this.targetTextureVarying?[transform_transform].concat(props.modules||[]):props.modules;return{vs:vs,fs:fs,modules:modules,uniforms:uniforms,inject:combinedInject}}}]),TextureTransform}(),utils=__webpack_require__(154),lib_model=__webpack_require__(419),transform_Transform=function(){function Transform(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,Transform),this.gl=gl,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(props),Object.seal(this)}return Object(createClass.a)(Transform,null,[{key:"isSupported",value:function isSupported(gl){return Object(esm.f)(gl)}}]),Object(createClass.a)(Transform,[{key:"delete",value:function _delete(){var model=this.model,bufferTransform=this.bufferTransform,textureTransform=this.textureTransform;model&&model.delete(),bufferTransform&&bufferTransform.delete(),textureTransform&&textureTransform.delete()}},{key:"run",value:function run(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_opts$clearRenderTarg=opts.clearRenderTarget,clearRenderTarget=void 0===_opts$clearRenderTarg||_opts$clearRenderTarg,updatedOpts=this._updateDrawOptions(opts);clearRenderTarget&&updatedOpts.framebuffer&&updatedOpts.framebuffer.clear({color:!0}),this.model.transform(updatedOpts)}},{key:"swap",value:function swap(){var swapped=!1,resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=resourceTransforms[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var resourceTransform=_step.value;swapped=swapped||resourceTransform.swap()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}Object(esm_utils_assert.a)(swapped,"Nothing to swap")}},{key:"getBuffer",value:function getBuffer(){var varyingName=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(varyingName)}},{key:"getData",value:function getData(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean),_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=resourceTransforms[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var resourceTransform=_step2.value,data=resourceTransform.getData(opts);if(data)return data}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return null}},{key:"getFramebuffer",value:function getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function update(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in opts&&this.model.setVertexCount(opts.elementCount);var resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean),_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=resourceTransforms[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var resourceTransform=_step3.value;resourceTransform.update(opts)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}},{key:"_initialize",value:function _initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},gl=this.gl;this._buildResourceTransforms(gl,props),props=this._updateModelProps(props),this.model=new lib_model.a(gl,Object.assign({},props,{fs:props.fs||getPassthroughFS({version:getShaderVersion(props.vs)}),id:props.id||"transform-model",drawMode:props.drawMode||0,vertexCount:props.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function _updateModelProps(props){var updatedProps=Object.assign({},props),resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean),_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=resourceTransforms[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){updatedProps=_step4.value.updateModelProps(updatedProps)}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}return updatedProps}},{key:"_buildResourceTransforms",value:function _buildResourceTransforms(gl,props){(function canCreateBufferTransform(props){if(!Object(utils.a)(props.feedbackBuffers)||!Object(utils.a)(props.feedbackMap)||props.varyings&&props.varyings.length>0)return!0;return!1})(props)&&(this.bufferTransform=new buffer_transform_BufferTransform(gl,props)),function canCreateTextureTransform(props){if(!Object(utils.a)(props._sourceTextures)||props._targetTexture||props._targetTextureVarying)return!0;return!1}(props)&&(this.textureTransform=new texture_transform_TextureTransform(gl,props)),Object(esm_utils_assert.a)(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function _updateDrawOptions(opts){var updatedOpts=Object.assign({},opts),resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean),_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=resourceTransforms[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var resourceTransform=_step5.value;updatedOpts=Object.assign(updatedOpts,resourceTransform.getDrawOptions(updatedOpts))}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{_iteratorNormalCompletion5||null==_iterator5.return||_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}return updatedOpts}}]),Transform}();var transitions_transition=__webpack_require__(83);function gpu_interpolation_transition_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function gpu_interpolation_transition_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?gpu_interpolation_transition_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):gpu_interpolation_transition_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var gpu_interpolation_transition_GPUInterpolationTransition=function(){function GPUInterpolationTransition(_ref){var gl=_ref.gl,attribute=_ref.attribute,timeline=_ref.timeline;Object(classCallCheck.a)(this,GPUInterpolationTransition),this.gl=gl,this.type="interpolation",this.transition=new transitions_transition.a(timeline),this.attribute=attribute,this.attributeInTransition=new attribute_Attribute(gl,attribute.settings),this.currentStartIndices=attribute.startIndices,this.currentLength=0,this.transform=function getTransform(gl,attribute){var attributeType=getAttributeTypeFromSize(attribute.size);return new transform_Transform(gl,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:attributeType},varyings:["vCurrent"]})}(gl,attribute);var bufferOpts={byteLength:0,usage:35050};this.buffers=[new classes_buffer.a(gl,bufferOpts),new classes_buffer.a(gl,bufferOpts)]}return Object(createClass.a)(GPUInterpolationTransition,[{key:"start",value:function start(transitionSettings,numInstances){if(transitionSettings.duration<=0)this.transition.cancel();else{this.gl;var buffers=this.buffers,attribute=this.attribute;cycleBuffers(buffers);var padBufferOpts={numInstances:numInstances,attribute:attribute,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:transitionSettings.enter},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=buffers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){padBuffer(gpu_interpolation_transition_objectSpread({buffer:_step.value},padBufferOpts))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.currentStartIndices=attribute.startIndices,this.currentLength=getAttributeBufferLength(attribute,numInstances),this.attributeInTransition.update({buffer:buffers[1],value:attribute.value}),this.transition.start(transitionSettings),this.transform.update({elementCount:Math.floor(this.currentLength/attribute.size),sourceBuffers:{aFrom:buffers[0],aTo:getSourceBufferAttribute(0,attribute)},feedbackBuffers:{vCurrent:buffers[1]}})}}},{key:"update",value:function update(){var updated=this.transition.update();if(updated){var _this$transition=this.transition,time=_this$transition.time,_this$transition$sett=_this$transition.settings,duration=_this$transition$sett.duration,t=(0,_this$transition$sett.easing)(time/duration);this.transform.run({uniforms:{time:t}})}return updated}},{key:"cancel",value:function cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},{key:"inProgress",get:function get(){return this.transition.inProgress}}]),GPUInterpolationTransition}();function gpu_spring_transition_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function gpu_spring_transition_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?gpu_spring_transition_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):gpu_spring_transition_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var TRANSITION_TYPES={interpolation:gpu_interpolation_transition_GPUInterpolationTransition,spring:function(){function GPUSpringTransition(_ref){var gl=_ref.gl,attribute=_ref.attribute,timeline=_ref.timeline;Object(classCallCheck.a)(this,GPUSpringTransition),this.gl=gl,this.type="spring",this.transition=new transitions_transition.a(timeline),this.attribute=attribute,this.attributeInTransition=new attribute_Attribute(gl,Object.assign({},attribute.settings,{normalized:!1})),this.currentStartIndices=attribute.startIndices,this.currentLength=0,this.texture=function getTexture(gl){return new texture_2d.a(gl,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(gl),this.framebuffer=function getFramebuffer(gl,texture){return new classes_framebuffer.a(gl,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:Object(defineProperty.a)({},36064,texture)})}(gl,this.texture),this.transform=function gpu_spring_transition_getTransform(gl,attribute,framebuffer){var attributeType=getAttributeTypeFromSize(attribute.size);return new transform_Transform(gl,{framebuffer:framebuffer,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:attributeType},varyings:["vNext"]})}(gl,attribute,this.framebuffer);var bufferOpts={byteLength:0,usage:35050};this.buffers=[new classes_buffer.a(gl,bufferOpts),new classes_buffer.a(gl,bufferOpts),new classes_buffer.a(gl,bufferOpts)]}return Object(createClass.a)(GPUSpringTransition,[{key:"start",value:function start(transitionSettings,numInstances){this.gl;var buffers=this.buffers,attribute=this.attribute,padBufferOpts={numInstances:numInstances,attribute:attribute,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:transitionSettings.enter},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=buffers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){padBuffer(gpu_spring_transition_objectSpread({buffer:_step.value},padBufferOpts))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.currentStartIndices=attribute.startIndices,this.currentLength=getAttributeBufferLength(attribute,numInstances),this.attributeInTransition.update({buffer:buffers[1],value:attribute.value}),this.transition.start(transitionSettings),this.transform.update({elementCount:Math.floor(this.currentLength/attribute.size),sourceBuffers:{aTo:getSourceBufferAttribute(0,attribute)}})}},{key:"update",value:function update(){var buffers=this.buffers,transform=this.transform,framebuffer=this.framebuffer,transition=this.transition;return!!transition.update()&&(transform.update({sourceBuffers:{aPrev:buffers[0],aCur:buffers[1]},feedbackBuffers:{vNext:buffers[2]}}),transform.run({framebuffer:framebuffer,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:transition.settings.stiffness,damping:transition.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),cycleBuffers(buffers),this.attributeInTransition.update({buffer:buffers[1],value:this.attribute.value}),Object(copy_and_blit.b)(framebuffer)[0]>0||transition.end(),!0)}},{key:"cancel",value:function cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}},{key:"inProgress",get:function get(){return this.transition.inProgress}}]),GPUSpringTransition}()},attribute_transition_manager_AttributeTransitionManager=function(){function AttributeTransitionManager(gl,_ref){var id=_ref.id,timeline=_ref.timeline;Object(classCallCheck.a)(this,AttributeTransitionManager),this.id=id,this.gl=gl,this.timeline=timeline,this.transitions={},this.needsRedraw=!1,this.numInstances=1,transform_Transform.isSupported(gl)?this.isSupported=!0:gl&&log.a.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}return Object(createClass.a)(AttributeTransitionManager,[{key:"finalize",value:function finalize(){for(var attributeName in this.transitions)this._removeTransition(attributeName)}},{key:"update",value:function update(_ref2){var attributes=_ref2.attributes,_ref2$transitions=_ref2.transitions,transitions=void 0===_ref2$transitions?{}:_ref2$transitions,numInstances=_ref2.numInstances;if(this.numInstances=numInstances||1,this.isSupported){for(var attributeName in attributes){var attribute=attributes[attributeName],settings=attribute.getTransitionSetting(transitions);settings&&this._updateAttribute(attributeName,attribute,settings)}for(var _attributeName in this.transitions){var _attribute=attributes[_attributeName];_attribute&&_attribute.getTransitionSetting(transitions)||this._removeTransition(_attributeName)}}}},{key:"hasAttribute",value:function hasAttribute(attributeName){var transition=this.transitions[attributeName];return transition&&transition.inProgress}},{key:"getAttributes",value:function getAttributes(){var animatedAttributes={};for(var attributeName in this.transitions){var transition=this.transitions[attributeName];transition.inProgress&&(animatedAttributes[attributeName]=transition.attributeInTransition)}return animatedAttributes}},{key:"run",value:function run(){if(!this.isSupported||0===this.numInstances)return!1;for(var attributeName in this.transitions){this.transitions[attributeName].update()&&(this.needsRedraw=!0)}var needsRedraw=this.needsRedraw;return this.needsRedraw=!1,needsRedraw}},{key:"_removeTransition",value:function _removeTransition(attributeName){this.transitions[attributeName].cancel(),delete this.transitions[attributeName]}},{key:"_updateAttribute",value:function _updateAttribute(attributeName,attribute,settings){var transition=this.transitions[attributeName],isNew=!transition||transition.type!==settings.type;if(isNew){transition&&this._removeTransition(attributeName);var TransitionType=TRANSITION_TYPES[settings.type];TransitionType?this.transitions[attributeName]=new TransitionType({attribute:attribute,timeline:this.timeline,gl:this.gl}):(log.a.error("unsupported transition type '".concat(settings.type,"'"))(),isNew=!1)}(isNew||attribute.needsRedraw())&&(this.needsRedraw=!0,this.transitions[attributeName].start(settings,this.numInstances))}}]),AttributeTransitionManager}(),attribute_manager_AttributeManager=function(){function AttributeManager(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$id=_ref.id,id=void 0===_ref$id?"attribute-manager":_ref$id,stats=_ref.stats,timeline=_ref.timeline;Object(classCallCheck.a)(this,AttributeManager),this.id=id,this.gl=gl,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=stats,this.attributeTransitionManager=new attribute_transition_manager_AttributeTransitionManager(gl,{id:"".concat(id,"-transitions"),timeline:timeline}),Object.seal(this)}return Object(createClass.a)(AttributeManager,[{key:"finalize",value:function finalize(){for(var attributeName in this.attributes)this.attributes[attributeName].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!opts.clearRedrawFlags,redraw&&this.id}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){return this.needsRedraw=!0,this}},{key:"add",value:function add(attributes,updaters){this._add(attributes,updaters)}},{key:"addInstanced",value:function addInstanced(attributes,updaters){this._add(attributes,updaters,{instanced:1})}},{key:"remove",value:function remove(attributeNameArray){for(var i=0;i<attributeNameArray.length;i++){var name=attributeNameArray[i];void 0!==this.attributes[name]&&(this.attributes[name].delete(),delete this.attributes[name])}}},{key:"invalidate",value:function invalidate(triggerName,dataRange){var invalidatedAttributes=this._invalidateTrigger(triggerName,dataRange);Object(debug.a)("attributeManager.invalidate",this,triggerName,invalidatedAttributes)}},{key:"invalidateAll",value:function invalidateAll(dataRange){for(var attributeName in this.attributes)this.attributes[attributeName].setNeedsUpdate(attributeName,dataRange);Object(debug.a)("attributeManager.invalidate",this,"all")}},{key:"update",value:function update(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},data=_ref2.data,numInstances=_ref2.numInstances,_ref2$startIndices=_ref2.startIndices,startIndices=void 0===_ref2$startIndices?null:_ref2$startIndices,transitions=_ref2.transitions,_ref2$props=_ref2.props,props=void 0===_ref2$props?{}:_ref2$props,_ref2$buffers=_ref2.buffers,buffers=void 0===_ref2$buffers?{}:_ref2$buffers,_ref2$context=_ref2.context,context=void 0===_ref2$context?{}:_ref2$context,updated=!1;for(var attributeName in Object(debug.a)("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var attribute=this.attributes[attributeName],accessorName=attribute.settings.accessor;attribute.startIndices=startIndices,props[attributeName]&&log.a.removed("props.".concat(attributeName),"data.attributes.".concat(attributeName))(),attribute.setExternalBuffer(buffers[attributeName])||attribute.setBinaryValue(buffers[accessorName],data.startIndices)||!buffers[accessorName]&&attribute.setConstantValue(props[accessorName])||attribute.needsUpdate()&&(updated=!0,this._updateAttribute({attribute:attribute,numInstances:numInstances,data:data,props:props,context:context})),this.needsRedraw|=attribute.needsRedraw()}updated&&Object(debug.a)("attributeManager.updateEnd",this,numInstances),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:numInstances,transitions:transitions})}},{key:"updateTransition",value:function updateTransition(){var transitionUpdated=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||transitionUpdated,transitionUpdated}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"getChangedAttributes",value:function getChangedAttributes(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},attributes=this.attributes,attributeTransitionManager=this.attributeTransitionManager,changedAttributes=Object.assign({},attributeTransitionManager.getAttributes());for(var attributeName in attributes){var attribute=attributes[attributeName];attribute.needsRedraw(opts)&&!attributeTransitionManager.hasAttribute(attributeName)&&(changedAttributes[attributeName]=attribute)}return changedAttributes}},{key:"getShaderAttributes",value:function getShaderAttributes(attributes){var excludeAttributes=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};attributes||(attributes=this.getAttributes());var shaderAttributes={};for(var attributeName in attributes)excludeAttributes[attributeName]||Object.assign(shaderAttributes,attributes[attributeName].getShaderAttributes());return shaderAttributes}},{key:"getAccessors",value:function getAccessors(){return this.updateTriggers}},{key:"_add",value:function _add(attributes,updaters){var extraProps=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};updaters&&log.a.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var newAttributes={};for(var attributeName in attributes){var attribute=attributes[attributeName],newAttribute=this._createAttribute(attributeName,attribute,extraProps);newAttributes[attributeName]=newAttribute}Object.assign(this.attributes,newAttributes),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function _createAttribute(name,attribute,extraProps){var props={id:name,constant:attribute.constant||!1,isIndexed:attribute.isIndexed||attribute.elements,size:attribute.elements?1:attribute.size,value:attribute.value||null,divisor:attribute.instanced||extraProps.instanced?1:attribute.divisor};return new attribute_Attribute(this.gl,Object.assign({},attribute,props))}},{key:"_mapUpdateTriggersToAttributes",value:function _mapUpdateTriggersToAttributes(){var _this=this,triggers={},_loop=function _loop(attributeName){_this.attributes[attributeName].getUpdateTriggers().forEach((function(triggerName){triggers[triggerName]||(triggers[triggerName]=[]),triggers[triggerName].push(attributeName)}))};for(var attributeName in this.attributes)_loop(attributeName);this.updateTriggers=triggers}},{key:"_invalidateTrigger",value:function _invalidateTrigger(triggerName,dataRange){var attributes=this.attributes,invalidatedAttributes=this.updateTriggers[triggerName];return invalidatedAttributes&&invalidatedAttributes.forEach((function(name){var attribute=attributes[name];attribute&&attribute.setNeedsUpdate(attribute.id,dataRange)})),invalidatedAttributes}},{key:"_updateAttribute",value:function _updateAttribute(opts){var attribute=opts.attribute,numInstances=opts.numInstances;Object(debug.a)("attribute.updateStart",attribute),attribute.allocate(numInstances)&&Object(debug.a)("attribute.allocate",attribute,numInstances),attribute.updateBuffer(opts)&&(this.needsRedraw=!0,Object(debug.a)("attribute.updateEnd",attribute,numInstances))}}]),AttributeManager}(),dist_esm=__webpack_require__(19),cpu_interpolation_transition_CPUInterpolationTransition=function(_Transition){function CPUInterpolationTransition(){return Object(classCallCheck.a)(this,CPUInterpolationTransition),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(CPUInterpolationTransition).apply(this,arguments))}return Object(inherits.a)(CPUInterpolationTransition,_Transition),Object(createClass.a)(CPUInterpolationTransition,[{key:"_onUpdate",value:function _onUpdate(){var time=this.time,_this$settings=this.settings,fromValue=_this$settings.fromValue,toValue=_this$settings.toValue,duration=_this$settings.duration,t=(0,_this$settings.easing)(time/duration);this._value=Object(dist_esm.e)(fromValue,toValue,t)}},{key:"value",get:function get(){return this._value}}]),CPUInterpolationTransition}(transitions_transition.a);function updateSpringElement(prev,cur,dest,damping,stiffness){var velocity=cur-prev;return(dest-cur)*stiffness+-velocity*damping+velocity+cur}function distance(value1,value2){if(Array.isArray(value1)){for(var distanceSquare=0,i=0;i<value1.length;i++){var d=value1[i]-value2[i];distanceSquare+=d*d}return Math.sqrt(distanceSquare)}return Math.abs(value1-value2)}function uniform_transition_manager_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var uniform_transition_manager_TRANSITION_TYPES={interpolation:cpu_interpolation_transition_CPUInterpolationTransition,spring:function(_Transition){function CPUSpringTransition(){return Object(classCallCheck.a)(this,CPUSpringTransition),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(CPUSpringTransition).apply(this,arguments))}return Object(inherits.a)(CPUSpringTransition,_Transition),Object(createClass.a)(CPUSpringTransition,[{key:"_onUpdate",value:function _onUpdate(){var _this$settings=this.settings,fromValue=_this$settings.fromValue,toValue=_this$settings.toValue,damping=_this$settings.damping,stiffness=_this$settings.stiffness,_this$_prevValue=this._prevValue,_prevValue=void 0===_this$_prevValue?fromValue:_this$_prevValue,_this$_currValue=this._currValue,_currValue=void 0===_this$_currValue?fromValue:_this$_currValue,nextValue=function updateSpring(prev,cur,dest,damping,stiffness){if(Array.isArray(dest)){for(var next=[],i=0;i<dest.length;i++)next[i]=updateSpringElement(prev[i],cur[i],dest[i],damping,stiffness);return next}return updateSpringElement(prev,cur,dest,damping,stiffness)}(_prevValue,_currValue,toValue,damping,stiffness),delta=distance(nextValue,toValue),velocity=distance(nextValue,_currValue);delta<1e-5&&velocity<1e-5&&(nextValue=toValue,this.end()),this._prevValue=_currValue,this._currValue=nextValue}},{key:"value",get:function get(){return this._currValue}}]),CPUSpringTransition}(transitions_transition.a)},uniform_transition_manager_UniformTransitionManager=function(){function UniformTransitionManager(timeline){Object(classCallCheck.a)(this,UniformTransitionManager),this.transitions=new Map,this.timeline=timeline}return Object(createClass.a)(UniformTransitionManager,[{key:"add",value:function add(key,fromValue,toValue,settings){var transitions=this.transitions;if(transitions.has(key)){var _transition=transitions.get(key),_transition$value=_transition.value;fromValue=void 0===_transition$value?_transition.settings.fromValue:_transition$value,this.remove(key)}if(settings=normalizeTransitionSettings(settings)){var TransitionType=uniform_transition_manager_TRANSITION_TYPES[settings.type];if(TransitionType){var transition=new TransitionType(this.timeline);transition.start(function uniform_transition_manager_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?uniform_transition_manager_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):uniform_transition_manager_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},settings,{fromValue:fromValue,toValue:toValue})),transitions.set(key,transition)}else log.a.error("unsupported transition type '".concat(settings.type,"'"))()}}},{key:"remove",value:function remove(key){var transitions=this.transitions;transitions.has(key)&&(transitions.get(key).cancel(),transitions.delete(key))}},{key:"update",value:function update(){var propsInTransition={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.transitions[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=Object(slicedToArray.a)(_step.value,2),key=_step$value[0],transition=_step$value[1];transition.update(),propsInTransition[key]=transition.value,transition.inProgress||this.remove(key)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return propsInTransition}},{key:"clear",value:function clear(){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.transitions.keys()[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var key=_step2.value;this.remove(key)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}},{key:"active",get:function get(){return this.transitions.size>0}}]),UniformTransitionManager}(),esm_typeof=__webpack_require__(14),lifecycle_constants=__webpack_require__(37),COMPONENT=lifecycle_constants.b.COMPONENT;function props_diffProps(props,oldProps){var propsChangedReason=compareProps({newProps:props,oldProps:oldProps,propTypes:getPropTypes(props),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),dataChangedReason=function diffDataProps(props,oldProps){if(null===oldProps)return"oldProps is null, initial diff";var dataChanged=null,dataComparator=props.dataComparator,_dataDiff=props._dataDiff;dataComparator?dataComparator(props.data,oldProps.data)||(dataChanged="Data comparator detected a change"):props.data!==oldProps.data&&(dataChanged="A new data container was supplied");dataChanged&&_dataDiff&&(dataChanged=_dataDiff(props.data,oldProps.data)||dataChanged);return dataChanged}(props,oldProps),updateTriggersChangedReason=!1;return dataChangedReason||(updateTriggersChangedReason=function diffUpdateTriggers(props,oldProps){if(null===oldProps)return"oldProps is null, initial diff";if("all"in props.updateTriggers){if(diffUpdateTrigger(props,oldProps,"all"))return{all:!0}}var triggerChanged={},reason=!1;for(var triggerName in props.updateTriggers){if("all"!==triggerName)diffUpdateTrigger(props,oldProps,triggerName)&&(triggerChanged[triggerName]=!0,reason=triggerChanged)}return reason}(props,oldProps)),{dataChanged:dataChangedReason,propsChanged:propsChangedReason,updateTriggersChanged:updateTriggersChangedReason,extensionsChanged:diffExtensions(props,oldProps),transitionsChanged:diffTransitions(props,oldProps)}}function diffTransitions(props,oldProps){if(!props.transitions)return null;var result={},propTypes=getPropTypes(props);for(var key in props.transitions){var propType=propTypes[key],type=propType&&propType.type;("number"===type||"color"===type||"array"===type)&&comparePropValues(props[key],oldProps[key],propType)&&(result[key]=!0)}return result}function compareProps(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},newProps=_ref.newProps,oldProps=_ref.oldProps,_ref$ignoreProps=_ref.ignoreProps,ignoreProps=void 0===_ref$ignoreProps?{}:_ref$ignoreProps,_ref$propTypes=_ref.propTypes,propTypes=void 0===_ref$propTypes?{}:_ref$propTypes,_ref$triggerName=_ref.triggerName,triggerName=void 0===_ref$triggerName?"props":_ref$triggerName;if(oldProps===newProps)return null;if("object"!==Object(esm_typeof.a)(newProps)||null===newProps)return"".concat(triggerName," changed shallowly");if("object"!==Object(esm_typeof.a)(oldProps)||null===oldProps)return"".concat(triggerName," changed shallowly");for(var _i=0,_Object$keys=Object.keys(newProps);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];if(!(key in ignoreProps)){if(!(key in oldProps))return"".concat(triggerName,".").concat(key," added");var changed=comparePropValues(newProps[key],oldProps[key],propTypes[key]);if(changed)return"".concat(triggerName,".").concat(key," ").concat(changed)}}for(var _i2=0,_Object$keys2=Object.keys(oldProps);_i2<_Object$keys2.length;_i2++){var _key=_Object$keys2[_i2];if(!(_key in ignoreProps)){if(!(_key in newProps))return"".concat(triggerName,".").concat(_key," dropped");if(!Object.hasOwnProperty.call(newProps,_key)){var _changed=comparePropValues(newProps[_key],oldProps[_key],propTypes[_key]);if(_changed)return"".concat(triggerName,".").concat(_key," ").concat(_changed)}}}return null}function comparePropValues(newProp,oldProp,propType){var equal=propType&&propType.equal;return equal&&!equal(newProp,oldProp,propType)?"changed deeply":equal||!(equal=newProp&&oldProp&&newProp.equals)||equal.call(newProp,oldProp)?equal||oldProp===newProp?null:"changed shallowly":"changed deeply"}function diffExtensions(props,oldProps){if(null===oldProps)return"oldProps is null, initial diff";var oldExtensions=oldProps.extensions,extensions=props.extensions;if(extensions===oldExtensions)return!1;if(extensions.length!==oldExtensions.length)return!0;for(var i=0;i<extensions.length;i++)if(!extensions[i].equals(oldExtensions[i]))return!0;return!1}function diffUpdateTrigger(props,oldProps,triggerName){var newTriggers=props.updateTriggers[triggerName];newTriggers=null==newTriggers?{}:newTriggers;var oldTriggers=oldProps.updateTriggers[triggerName];return compareProps({oldProps:oldTriggers=null==oldTriggers?{}:oldTriggers,newProps:newTriggers,triggerName:triggerName})}function getPropTypes(props){var layer=props[COMPONENT],LayerType=layer&&layer.constructor;return LayerType?LayerType._propTypes:{}}function count_count(container){if(!function isObject(value){return null!==value&&"object"===Object(esm_typeof.a)(value)}(container))throw new Error("count(): argument not an object");if("function"==typeof container.count)return container.count();if(Number.isFinite(container.size))return container.size;if(Number.isFinite(container.length))return container.length;if(function isPlainObject(value){return null!==value&&"object"===Object(esm_typeof.a)(value)&&value.constructor===Object}(container))return Object.keys(container).length;throw new Error("count(): argument not a container")}var memoize=__webpack_require__(126);function shader_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function mergeShaders(target,source){if(!source)return target;var result=Object.assign({},target,source);if("defines"in source&&(result.defines=Object.assign({},target.defines,source.defines)),"modules"in source&&(result.modules=(target.modules||[]).concat(source.modules),source.modules.some((function(module){return"project64"===module.name})))){var index=result.modules.findIndex((function(module){return"project32"===module.name}));index>=0&&result.modules.splice(index,1)}if("inject"in source)if(target.inject){var mergedInjection=function shader_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?shader_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):shader_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},target.inject);for(var key in source.inject)mergedInjection[key]=(mergedInjection[key]||"")+source.inject[key];result.inject=mergedInjection}else result.inject=source.inject;return result}var viewport_uniforms=__webpack_require__(212),web_mercator_viewport=__webpack_require__(218),vec4=__webpack_require__(95),vec3=__webpack_require__(53),web_mercator_dist_esm=__webpack_require__(29);function lngLatZToWorldPosition(lngLatZ,viewport){var offsetMode=arguments.length>2&&void 0!==arguments[2]&&arguments[2],p=viewport.projectPosition(lngLatZ);if(offsetMode&&viewport instanceof web_mercator_viewport.a){var _lngLatZ=Object(slicedToArray.a)(lngLatZ,3),longitude=_lngLatZ[0],latitude=_lngLatZ[1],_lngLatZ$=_lngLatZ[2],z=void 0===_lngLatZ$?0:_lngLatZ$,distanceScales=viewport.getDistanceScales([longitude,latitude]);p[2]=z*distanceScales.unitsPerMeter[2]}return p}function getWorldPosition(position,_ref){var viewport=_ref.viewport,modelMatrix=_ref.modelMatrix,coordinateSystem=_ref.coordinateSystem,coordinateOrigin=_ref.coordinateOrigin,offsetMode=_ref.offsetMode,_position=Object(slicedToArray.a)(position,3),x=_position[0],y=_position[1],z=_position[2];if(modelMatrix){var _vec4$transformMat=vec4.b([],[x,y,z,1],modelMatrix),_vec4$transformMat2=Object(slicedToArray.a)(_vec4$transformMat,3);x=_vec4$transformMat2[0],y=_vec4$transformMat2[1],z=_vec4$transformMat2[2]}switch(coordinateSystem){case constants.a.LNGLAT:return lngLatZToWorldPosition([x,y,z],viewport,offsetMode);case constants.a.LNGLAT_OFFSETS:return lngLatZToWorldPosition([x+coordinateOrigin[0],y+coordinateOrigin[1],z+(coordinateOrigin[2]||0)],viewport,offsetMode);case constants.a.METER_OFFSETS:return lngLatZToWorldPosition(Object(web_mercator_dist_esm.b)(coordinateOrigin,[x,y,z]),viewport,offsetMode);case constants.a.CARTESIAN:default:return viewport.isGeospatial?[x+coordinateOrigin[0],y+coordinateOrigin[1],z+coordinateOrigin[2]]:viewport.projectPosition([x,y,z])}}function project_functions_projectPosition(position,params){var _normalizeParameters=function normalizeParameters(opts){var normalizedParams=Object.assign({},opts),coordinateSystem=opts.coordinateSystem,viewport=opts.viewport,coordinateOrigin=opts.coordinateOrigin,fromCoordinateSystem=opts.fromCoordinateSystem,fromCoordinateOrigin=opts.fromCoordinateOrigin;return coordinateSystem===constants.a.DEFAULT&&(coordinateSystem=viewport.isGeospatial?constants.a.LNGLAT:constants.a.CARTESIAN),void 0===fromCoordinateSystem&&(normalizedParams.fromCoordinateSystem=coordinateSystem),void 0===fromCoordinateOrigin&&(normalizedParams.fromCoordinateOrigin=coordinateOrigin),normalizedParams.coordinateSystem=coordinateSystem,normalizedParams}(params),viewport=_normalizeParameters.viewport,coordinateSystem=_normalizeParameters.coordinateSystem,coordinateOrigin=_normalizeParameters.coordinateOrigin,modelMatrix=_normalizeParameters.modelMatrix,fromCoordinateSystem=_normalizeParameters.fromCoordinateSystem,fromCoordinateOrigin=_normalizeParameters.fromCoordinateOrigin,_getOffsetOrigin=Object(viewport_uniforms.a)(viewport,coordinateSystem,coordinateOrigin),geospatialOrigin=_getOffsetOrigin.geospatialOrigin,shaderCoordinateOrigin=_getOffsetOrigin.shaderCoordinateOrigin,offsetMode=_getOffsetOrigin.offsetMode,worldPosition=getWorldPosition(position,{viewport:viewport,modelMatrix:modelMatrix,coordinateSystem:fromCoordinateSystem,coordinateOrigin:fromCoordinateOrigin,offsetMode:offsetMode});if(offsetMode){var positionCommonSpace=viewport.projectPosition(geospatialOrigin||shaderCoordinateOrigin);vec3.g(worldPosition,worldPosition,positionCommonSpace)}return worldPosition}var TYPE_DEFINITIONS={boolean:{validate:function validate(value,propType){return!0},equal:function equal(value1,value2,propType){return Boolean(value1)===Boolean(value2)}},number:{validate:function validate(value,propType){return Number.isFinite(value)&&(!("max"in propType)||value<=propType.max)&&(!("min"in propType)||value>=propType.min)}},color:{validate:function validate(value,propType){return propType.optional&&!value||isArray(value)&&(3===value.length||4===value.length)},equal:function equal(value1,value2,propType){return arrayEqual(value1,value2)}},accessor:{validate:function validate(value,propType){var valueType=getTypeOf(value);return"function"===valueType||valueType===getTypeOf(propType.value)},equal:function equal(value1,value2,propType){return"function"==typeof value2||arrayEqual(value1,value2)}},array:{validate:function validate(value,propType){return propType.optional&&!value||isArray(value)},equal:function equal(value1,value2,propType){return propType.compare?arrayEqual(value1,value2):value1===value2}},function:{validate:function validate(value,propType){return propType.optional&&!value||"function"==typeof value},equal:function equal(value1,value2,propType){return!propType.compare||value1===value2}}};function arrayEqual(array1,array2){if(array1===array2)return!0;if(!isArray(array1)||!isArray(array2))return!1;var len=array1.length;if(len!==array2.length)return!1;for(var i=0;i<len;i++)if(array1[i]!==array2[i])return!1;return!0}function parsePropType(name,propDef){switch(getTypeOf(propDef)){case"object":return normalizePropDefinition(name,propDef);case"array":return normalizePropDefinition(name,{type:"array",value:propDef,compare:!1});case"boolean":return normalizePropDefinition(name,{type:"boolean",value:propDef});case"number":return normalizePropDefinition(name,{type:"number",value:propDef});case"function":return normalizePropDefinition(name,{type:"function",value:propDef,compare:!0});default:return{name:name,type:"unknown",value:propDef}}}function normalizePropDefinition(name,propDef){return"type"in propDef?Object.assign({name:name},TYPE_DEFINITIONS[propDef.type],propDef):"value"in propDef?Object.assign({name:name,type:getTypeOf(propDef.value)},propDef):{name:name,type:"object",value:propDef}}function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)}function getTypeOf(value){return isArray(value)?"array":null===value?"null":Object(esm_typeof.a)(value)}var create_props_COMPONENT=lifecycle_constants.b.COMPONENT,ASYNC_ORIGINAL=lifecycle_constants.b.ASYNC_ORIGINAL,ASYNC_RESOLVED=lifecycle_constants.b.ASYNC_RESOLVED,ASYNC_DEFAULTS=lifecycle_constants.b.ASYNC_DEFAULTS;function createProps(){var component=this,propsPrototype=getPropsPrototype(component.constructor),propsInstance=Object.create(propsPrototype);propsInstance[create_props_COMPONENT]=component,propsInstance[ASYNC_ORIGINAL]={},propsInstance[ASYNC_RESOLVED]={};for(var i=0;i<arguments.length;++i){var props=arguments[i];for(var key in props)propsInstance[key]=props[key]}return Object.freeze(propsInstance),propsInstance}function getPropsPrototype(componentClass){var defaultProps=getOwnProperty(componentClass,"_mergedDefaultProps");return defaultProps||(function createPropsPrototypeAndTypes(componentClass){if(!componentClass.prototype)return;var parentClass=Object.getPrototypeOf(componentClass),parentDefaultProps=getPropsPrototype(parentClass),componentPropDefs=function parsePropTypes(propDefs){for(var propTypes={},defaultProps={},deprecatedProps={},_i=0,_Object$entries=Object.entries(propDefs);_i<_Object$entries.length;_i++){var _Object$entries$_i=Object(slicedToArray.a)(_Object$entries[_i],2),propName=_Object$entries$_i[0],propDef=_Object$entries$_i[1];if(propDef&&propDef.deprecatedFor)deprecatedProps[propName]=Array.isArray(propDef.deprecatedFor)?propDef.deprecatedFor:[propDef.deprecatedFor];else{var propType=parsePropType(propName,propDef);propTypes[propName]=propType,defaultProps[propName]=propType.value}}return{propTypes:propTypes,defaultProps:defaultProps,deprecatedProps:deprecatedProps}}(getOwnProperty(componentClass,"defaultProps")||{}),defaultProps=function createPropsPrototype(props,parentProps,componentClass){var defaultProps=Object.create(null);Object.assign(defaultProps,parentProps,props);var id=function getComponentName(componentClass){var componentName=getOwnProperty(componentClass,"layerName")||getOwnProperty(componentClass,"componentName");componentName||log.a.once(0,"".concat(componentClass.name,".componentName not specified"))();return componentName||componentClass.name}(componentClass);return delete props.id,Object.defineProperties(defaultProps,{id:{writable:!0,value:id}}),defaultProps}(componentPropDefs.defaultProps,parentDefaultProps,componentClass),propTypes=Object.assign({},parentClass._propTypes,componentPropDefs.propTypes);!function addAsyncPropsToPropPrototype(defaultProps,propTypes){var defaultValues={},descriptors={};for(var propName in propTypes){var propType=propTypes[propName],name=propType.name,value=propType.value;propType.async&&(defaultValues[name]=value,descriptors[name]=getDescriptorForAsyncProp(name))}defaultProps[ASYNC_DEFAULTS]=defaultValues,defaultProps[ASYNC_ORIGINAL]={},Object.defineProperties(defaultProps,descriptors)}(defaultProps,propTypes);var deprecatedProps=Object.assign({},parentClass._deprecatedProps,componentPropDefs.deprecatedProps);(function addDeprecatedPropsToPropPrototype(defaultProps,deprecatedProps){var _loop=function _loop(propName){Object.defineProperty(defaultProps,propName,{enumerable:!1,set:function set(newValue){var nameStr="".concat(this.id,": ").concat(propName),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=deprecatedProps[propName][Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var newPropName=_step.value;create_props_hasOwnProperty(this,newPropName)||(this[newPropName]=newValue)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}log.a.deprecated(nameStr,deprecatedProps[propName].join("/"))()}})};for(var propName in deprecatedProps)_loop(propName)})(defaultProps,deprecatedProps),componentClass._mergedDefaultProps=defaultProps,componentClass._propTypes=propTypes,componentClass._deprecatedProps=deprecatedProps}(componentClass),componentClass._mergedDefaultProps)}function getDescriptorForAsyncProp(name){return{enumerable:!0,set:function set(newValue){"string"==typeof newValue||newValue instanceof Promise||Object(iterable_utils.c)(newValue)?this[ASYNC_ORIGINAL][name]=newValue:this[ASYNC_RESOLVED][name]=newValue},get:function get(){if(this[ASYNC_RESOLVED]){if(name in this[ASYNC_RESOLVED])return this[ASYNC_RESOLVED][name]||this[ASYNC_DEFAULTS][name];if(name in this[ASYNC_ORIGINAL]){var state=this[create_props_COMPONENT]&&this[create_props_COMPONENT].internalState;if(state&&state.hasAsyncProp(name))return state.getAsyncProp(name)||this[ASYNC_DEFAULTS][name]}}return this[ASYNC_DEFAULTS][name]}}}function create_props_hasOwnProperty(object,prop){return Object.prototype.hasOwnProperty.call(object,prop)}function getOwnProperty(object,prop){return create_props_hasOwnProperty(object,prop)&&object[prop]}var regenerator=__webpack_require__(10),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(17),asyncIterator=__webpack_require__(217),component_state_ASYNC_ORIGINAL=lifecycle_constants.b.ASYNC_ORIGINAL,component_state_ASYNC_RESOLVED=lifecycle_constants.b.ASYNC_RESOLVED,component_state_ASYNC_DEFAULTS=lifecycle_constants.b.ASYNC_DEFAULTS,EMPTY_PROPS=Object.freeze({}),component_state_ComponentState=function(){function ComponentState(){var component=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(classCallCheck.a)(this,ComponentState),this.component=component,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=EMPTY_PROPS,this.oldAsyncProps=null}var _resolveAsyncIterable2;return Object(createClass.a)(ComponentState,[{key:"getOldProps",value:function getOldProps(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function freezeAsyncOldProps(){if(!this.oldAsyncProps)for(var propName in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,propName,{enumerable:!0,value:this.oldProps[propName]})}},{key:"hasAsyncProp",value:function hasAsyncProp(propName){return propName in this.asyncProps}},{key:"getAsyncProp",value:function getAsyncProp(propName){var asyncProp=this.asyncProps[propName];return asyncProp&&asyncProp.resolvedValue}},{key:"isAsyncPropLoading",value:function isAsyncPropLoading(propName){if(propName){var asyncProp=this.asyncProps[propName];return Boolean(asyncProp&&asyncProp.pendingLoadCount>0&&asyncProp.pendingLoadCount!==asyncProp.resolvedLoadCount)}for(var key in this.asyncProps)if(this.isAsyncPropLoading(key))return!0;return!1}},{key:"reloadAsyncProp",value:function reloadAsyncProp(propName,value){this._watchPromise(propName,Promise.resolve(value))}},{key:"setAsyncProps",value:function setAsyncProps(props){var resolvedValues=props[component_state_ASYNC_RESOLVED]||{},originalValues=props[component_state_ASYNC_ORIGINAL]||props,defaultValues=props[component_state_ASYNC_DEFAULTS]||{};for(var propName in resolvedValues){var value=resolvedValues[propName];this._createAsyncPropData(propName,value,defaultValues[propName]),this._updateAsyncProp(propName,value)}for(var _propName in originalValues){var _value2=originalValues[_propName];this._createAsyncPropData(_propName,_value2,defaultValues[_propName]),this._updateAsyncProp(_propName,_value2)}}},{key:"_updateAsyncProp",value:function _updateAsyncProp(propName,value){if(this._didAsyncInputValueChange(propName,value)){if("string"==typeof value){var fetch=this.layer&&this.layer.props.fetch;fetch&&(value=fetch(value,{propName:propName,layer:this.layer}))}value instanceof Promise?this._watchPromise(propName,value):Object(iterable_utils.c)(value)?this._resolveAsyncIterable(propName,value):this._setPropValue(propName,value)}}},{key:"_didAsyncInputValueChange",value:function _didAsyncInputValueChange(propName,value){var asyncProp=this.asyncProps[propName];return value!==asyncProp.lastValue&&(asyncProp.lastValue=value,!0)}},{key:"_setPropValue",value:function _setPropValue(propName,value){var asyncProp=this.asyncProps[propName];asyncProp.value=value,asyncProp.resolvedValue=value,asyncProp.pendingLoadCount++,asyncProp.resolvedLoadCount=asyncProp.pendingLoadCount}},{key:"_setAsyncPropValue",value:function _setAsyncPropValue(propName,value,loadCount){var asyncProp=this.asyncProps[propName];asyncProp&&loadCount>=asyncProp.resolvedLoadCount&&void 0!==value&&(this.freezeAsyncOldProps(),asyncProp.resolvedValue=value,asyncProp.resolvedLoadCount=loadCount,this.onAsyncPropUpdated(propName,value))}},{key:"_watchPromise",value:function _watchPromise(propName,promise){var _this=this,asyncProp=this.asyncProps[propName];asyncProp.pendingLoadCount++;var loadCount=asyncProp.pendingLoadCount;promise.then((function(data){data=_this._postProcessValue(propName,data),_this._setAsyncPropValue(propName,data,loadCount);var onDataLoad=_this.layer&&_this.layer.props.onDataLoad;"data"===propName&&onDataLoad&&onDataLoad(data,{propName:propName,layer:_this.layer})})).catch((function(error){return log.a.error(error)()}))}},{key:"_resolveAsyncIterable",value:(_resolveAsyncIterable2=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(propName,iterable){var asyncProp,loadCount,data,count,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,_value,chunk,onDataLoad;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:"data"!==propName&&this._setPropValue(propName,iterable),(asyncProp=this.asyncProps[propName]).pendingLoadCount++,loadCount=asyncProp.pendingLoadCount,data=[],count=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_context.prev=8,_iterator=Object(asyncIterator.a)(iterable);case 10:return _context.next=12,_iterator.next();case 12:return _step=_context.sent,_iteratorNormalCompletion=_step.done,_context.next=16,_step.value;case 16:if(_value=_context.sent,_iteratorNormalCompletion){_context.next=26;break}chunk=_value,data=this._postProcessValue(propName,chunk,data),Object.defineProperty(data,"__diff",{enumerable:!1,value:[{startRow:count,endRow:data.length}]}),count=data.length,this._setAsyncPropValue(propName,data,loadCount);case 23:_iteratorNormalCompletion=!0,_context.next=10;break;case 26:_context.next=32;break;case 28:_context.prev=28,_context.t0=_context.catch(8),_didIteratorError=!0,_iteratorError=_context.t0;case 32:if(_context.prev=32,_context.prev=33,_iteratorNormalCompletion||null==_iterator.return){_context.next=37;break}return _context.next=37,_iterator.return();case 37:if(_context.prev=37,!_didIteratorError){_context.next=40;break}throw _iteratorError;case 40:return _context.finish(37);case 41:return _context.finish(32);case 42:(onDataLoad=this.layer&&this.layer.props.onDataLoad)&&onDataLoad(data,{propName:propName,layer:this.layer});case 44:case"end":return _context.stop()}}),_callee,this,[[8,28,32,42],[33,,37,41]])}))),function _resolveAsyncIterable(_x,_x2){return _resolveAsyncIterable2.apply(this,arguments)})},{key:"_postProcessValue",value:function _postProcessValue(propName,value,previousValue){var dataTransform=(this.component?this.component.props:{}).dataTransform;return"data"!==propName?value:dataTransform?dataTransform(value,previousValue):previousValue?previousValue.concat(value):value}},{key:"_createAsyncPropData",value:function _createAsyncPropData(propName,value,defaultValue){this.asyncProps[propName]||(this.asyncProps[propName]={lastValue:null,resolvedValue:defaultValue,pendingLoadCount:0,resolvedLoadCount:0})}}]),ComponentState}(),component_ASYNC_ORIGINAL=lifecycle_constants.b.ASYNC_ORIGINAL,component_ASYNC_RESOLVED=lifecycle_constants.b.ASYNC_RESOLVED,component_ASYNC_DEFAULTS=lifecycle_constants.b.ASYNC_DEFAULTS,counter=0,component_Component=function(){function Component(){Object(classCallCheck.a)(this,Component),this.props=createProps.apply(this,arguments),this.id=this.props.id,this.count=counter++,this.lifecycle=lifecycle_constants.a.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return Object(createClass.a)(Component,[{key:"clone",value:function clone(newProps){var props=this.props,asyncProps={};for(var key in props[component_ASYNC_DEFAULTS])key in props[component_ASYNC_RESOLVED]?asyncProps[key]=props[component_ASYNC_RESOLVED][key]:key in props[component_ASYNC_ORIGINAL]&&(asyncProps[key]=props[component_ASYNC_ORIGINAL][key]);return new this.constructor(Object.assign({},props,asyncProps,newProps))}},{key:"_initState",value:function _initState(){this.internalState=new component_state_ComponentState({})}},{key:"stats",get:function get(){return this.internalState.stats}}]),Component}();component_Component.componentName="Component",component_Component.defaultProps={};var layer_state_LayerState=function(_ComponentState){function LayerState(_ref){var _this,attributeManager=_ref.attributeManager,layer=_ref.layer;return Object(classCallCheck.a)(this,LayerState),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(LayerState).call(this,layer))).attributeManager=attributeManager,_this.model=null,_this.needsRedraw=!0,_this.subLayers=null,_this}return Object(inherits.a)(LayerState,_ComponentState),Object(createClass.a)(LayerState,[{key:"layer",get:function get(){return this.component},set:function set(layer){this.component=layer}}]),LayerState}(component_state_ComponentState),load=__webpack_require__(814),EMPTY_ARRAY=Object.freeze([]),areViewportsEqual=Object(memoize.a)((function(_ref){var oldViewport=_ref.oldViewport,viewport=_ref.viewport;return oldViewport.equals(viewport)})),pickingColorCache=new Uint8ClampedArray(0),layer_defaultProps={data:{type:"data",value:EMPTY_ARRAY,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function value(data){return data&&data.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function value(url,_ref2){var propName=_ref2.propName,layer=_ref2.layer,resourceManager=layer.context.resourceManager,loadOptions=layer.getLoadOptions(),inResourceManager=resourceManager.contains(url);return inResourceManager||loadOptions||(resourceManager.add({resourceId:url,data:url,persistent:!1}),inResourceManager=!0),inResourceManager?resourceManager.subscribe({resourceId:url,onChange:function onChange(data){return layer.internalState.reloadAsyncProp(propName,data)},consumerId:layer.id,requestId:propName}):Object(load.a)(url,loadOptions)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:constants.a.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},uniforms:{},extensions:[],getPolygonOffset:{type:"function",value:function value(_ref3){return[0,100*-_ref3.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},layer_Layer=function(_Component){function Layer(){return Object(classCallCheck.a)(this,Layer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Layer).apply(this,arguments))}return Object(inherits.a)(Layer,_Component),Object(createClass.a)(Layer,[{key:"toString",value:function toString(){var className=this.constructor.layerName||this.constructor.name;return"".concat(className,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function setState(updateObject){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,updateObject),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var redraw=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=redraw)}},{key:"setNeedsUpdate",value:function setNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(opts)}},{key:"needsUpdate",value:function needsUpdate(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function hasUniformTransition(){return this.internalState.uniformTransitions.active}},{key:"isPickable",value:function isPickable(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getAttributeManager",value:function getAttributeManager(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function getCurrentLayer(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function getLoadOptions(){return this.props.loadOptions}},{key:"project",value:function project(xyz){var viewport=this.context.viewport,worldPosition=getWorldPosition(xyz,{viewport:viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),_worldToPixels=Object(web_mercator_dist_esm.o)(worldPosition,viewport.pixelProjectionMatrix),_worldToPixels2=Object(slicedToArray.a)(_worldToPixels,3),x=_worldToPixels2[0],y=_worldToPixels2[1],z=_worldToPixels2[2];return 2===xyz.length?[x,y]:[x,y,z]}},{key:"unproject",value:function unproject(xy){return this.context.viewport.unproject(xy)}},{key:"projectPosition",value:function projectPosition(xyz){return project_functions_projectPosition(xyz,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"use64bitPositions",value:function use64bitPositions(){var coordinateSystem=this.props.coordinateSystem;return coordinateSystem===constants.a.DEFAULT||coordinateSystem===constants.a.LNGLAT||coordinateSystem===constants.a.CARTESIAN}},{key:"onHover",value:function onHover(info,pickingEvent){return!!this.props.onHover&&this.props.onHover(info,pickingEvent)}},{key:"onClick",value:function onClick(info,pickingEvent){return!!this.props.onClick&&this.props.onClick(info,pickingEvent)}},{key:"nullPickingColor",value:function nullPickingColor(){return[0,0,0]}},{key:"encodePickingColor",value:function encodePickingColor(i){var target=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return target[0]=i+1&255,target[1]=i+1>>8&255,target[2]=i+1>>8>>8&255,target}},{key:"decodePickingColor",value:function decodePickingColor(color){Object(assert.a)(color instanceof Uint8Array);var _color=Object(slicedToArray.a)(color,3);return _color[0]+256*_color[1]+65536*_color[2]-1}},{key:"initializeState",value:function initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function getShaders(shaders){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.props.extensions[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var extension=_step.value;shaders=mergeShaders(shaders,extension.getShaders.call(this,extension))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return shaders}},{key:"shouldUpdateState",value:function shouldUpdateState(_ref4){_ref4.oldProps,_ref4.props,_ref4.context;return _ref4.changeFlags.propsOrDataChanged}},{key:"updateState",value:function updateState(_ref5){_ref5.oldProps,_ref5.props,_ref5.context;var changeFlags=_ref5.changeFlags,attributeManager=this.getAttributeManager();if(changeFlags.dataChanged&&attributeManager){var dataChanged=changeFlags.dataChanged;if(Array.isArray(dataChanged)){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=dataChanged[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var dataRange=_step2.value;attributeManager.invalidateAll(dataRange)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}else attributeManager.invalidateAll()}}},{key:"finalizeState",value:function finalizeState(){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){_step3.value.delete()}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}var attributeManager=this.getAttributeManager();attributeManager&&attributeManager.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear()}},{key:"draw",value:function draw(opts){var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){_step4.value.draw(opts)}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}},{key:"getPickingInfo",value:function getPickingInfo(_ref6){var info=_ref6.info,index=(_ref6.mode,info.index);return index>=0&&Array.isArray(this.props.data)&&(info.object=this.props.data[index]),info}},{key:"activateViewport",value:function activateViewport(viewport){var oldViewport=this.internalState.viewport;this.internalState.viewport=viewport,oldViewport&&areViewportsEqual({oldViewport:oldViewport,viewport:viewport})||(this.setChangeFlags({viewportChanged:!0}),this._update())}},{key:"invalidateAttribute",value:function invalidateAttribute(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",attributeManager=this.getAttributeManager();attributeManager&&("all"===name?attributeManager.invalidateAll():attributeManager.invalidate(name))}},{key:"updateAttributes",value:function updateAttributes(changedAttributes){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var model=_step5.value;this._setModelAttributes(model,changedAttributes)}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{_iteratorNormalCompletion5||null==_iterator5.return||_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}},{key:"_updateAttributes",value:function _updateAttributes(props){var attributeManager=this.getAttributeManager();if(attributeManager){var numInstances=this.getNumInstances(props),startIndices=this.getStartIndices(props);attributeManager.update({data:props.data,numInstances:numInstances,startIndices:startIndices,props:props,transitions:props.transitions,buffers:props.data.attributes,context:this,ignoreUnknownAttributes:!0});var changedAttributes=attributeManager.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(changedAttributes)}}},{key:"_updateAttributeTransition",value:function _updateAttributeTransition(){var attributeManager=this.getAttributeManager();attributeManager&&attributeManager.updateTransition()}},{key:"_updateUniformTransition",value:function _updateUniformTransition(){var uniformTransitions=this.internalState.uniformTransitions;if(uniformTransitions.active){var propsInTransition=uniformTransitions.update(),props=Object.create(this.props);for(var key in propsInTransition)Object.defineProperty(props,key,{value:propsInTransition[key]});return props}return this.props}},{key:"calculateInstancePickingColors",value:function calculateInstancePickingColors(attribute,_ref7){var numInstances=_ref7.numInstances,cacheSize=pickingColorCache.length/3;if(cacheSize<numInstances){var newCacheSize=(pickingColorCache=typed_array_manager.a.allocate(pickingColorCache,numInstances,{size:3,copy:!0})).length/3,pickingColor=[];Object(assert.a)(newCacheSize<16777215,"index out of picking color range");for(var i=cacheSize;i<newCacheSize;i++)this.encodePickingColor(i,pickingColor),pickingColorCache[3*i+0]=pickingColor[0],pickingColorCache[3*i+1]=pickingColor[1],pickingColorCache[3*i+2]=pickingColor[2]}attribute.value=pickingColorCache.subarray(0,3*numInstances)}},{key:"_setModelAttributes",value:function _setModelAttributes(model,changedAttributes){var attributeManager=this.getAttributeManager(),excludeAttributes=model.userData.excludeAttributes||{},shaderAttributes=attributeManager.getShaderAttributes(changedAttributes,excludeAttributes);model.setAttributes(shaderAttributes)}},{key:"clearPickingColor",value:function clearPickingColor(color){var _this$getAttributeMan=this.getAttributeManager().attributes,pickingColors=_this$getAttributeMan.pickingColors,instancePickingColors=_this$getAttributeMan.instancePickingColors,colors=pickingColors||instancePickingColors,i=this.decodePickingColor(color),start=colors.getVertexOffset(i),end=colors.getVertexOffset(i+1);colors.buffer.subData({data:new Uint8Array(end-start),offset:start})}},{key:"restorePickingColors",value:function restorePickingColors(){var _this$getAttributeMan2=this.getAttributeManager().attributes,pickingColors=_this$getAttributeMan2.pickingColors,instancePickingColors=_this$getAttributeMan2.instancePickingColors;(pickingColors||instancePickingColors).updateSubBuffer({startOffset:0})}},{key:"getNumInstances",value:function getNumInstances(props){return void 0!==(props=props||this.props).numInstances?props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:count_count(props.data)}},{key:"getStartIndices",value:function getStartIndices(props){return void 0!==(props=props||this.props).startIndices?props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}},{key:"_initialize",value:function _initialize(){Object(debug.a)("layer.initialize",this),this._initState(),this.initializeState(this.context);var _iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=this.props.extensions[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var extension=_step6.value;extension.initializeState.call(this,this.context,extension)}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{_iteratorNormalCompletion6||null==_iterator6.return||_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}},{key:"_update",value:function _update(){var stateNeedsUpdate=this.needsUpdate();Object(debug.a)("layer.update",this,stateNeedsUpdate),stateNeedsUpdate&&this._updateState()}},{key:"_updateState",value:function _updateState(){var currentProps=this.props,currentViewport=this.context.viewport,propsInTransition=this._updateUniformTransition();this.internalState.propsInTransition=propsInTransition,this.context.viewport=this.internalState.viewport||currentViewport,this.props=propsInTransition;var updateParams=this._getUpdateParams();if(this.context.gl)this.updateState(updateParams);else try{this.updateState(updateParams)}catch(error){}var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=this.props.extensions[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){var extension=_step7.value;extension.updateState.call(this,updateParams,extension)}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{_iteratorNormalCompletion7||null==_iterator7.return||_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}this._updateModules(updateParams),this.isComposite?this._renderLayers(updateParams):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.context.viewport=currentViewport,this.props=currentProps,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}},{key:"_finalize",value:function _finalize(){Object(debug.a)("layer.finalize",this),Object(assert.a)(this.internalState&&this.state),this.finalizeState(this.context);var _iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _step8,_iterator8=this.props.extensions[Symbol.iterator]();!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){var extension=_step8.value;extension.finalizeState.call(this,extension)}}catch(err){_didIteratorError8=!0,_iteratorError8=err}finally{try{_iteratorNormalCompletion8||null==_iterator8.return||_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}}},{key:"drawLayer",value:function drawLayer(_ref8){var _this=this,_ref8$moduleParameter=_ref8.moduleParameters,moduleParameters=void 0===_ref8$moduleParameter?null:_ref8$moduleParameter,_ref8$uniforms=_ref8.uniforms,uniforms=void 0===_ref8$uniforms?{}:_ref8$uniforms,_ref8$parameters=_ref8.parameters,parameters=void 0===_ref8$parameters?{}:_ref8$parameters;this._updateAttributeTransition();var currentProps=this.props;this.props=this.internalState.propsInTransition||currentProps;var opacity=this.props.opacity;uniforms.opacity=Math.pow(opacity,1/2.2),moduleParameters&&this.setModuleParameters(moduleParameters);var getPolygonOffset=this.props.getPolygonOffset,offsets=getPolygonOffset&&getPolygonOffset(uniforms)||[0,0];Object(esm.j)(this.context.gl,{polygonOffset:offsets}),Object(esm.k)(this.context.gl,parameters,(function(){var opts={moduleParameters:moduleParameters,uniforms:uniforms,parameters:parameters,context:_this.context},_iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _step9,_iterator9=_this.props.extensions[Symbol.iterator]();!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=!0){var extension=_step9.value;extension.draw.call(_this,opts,extension)}}catch(err){_didIteratorError9=!0,_iteratorError9=err}finally{try{_iteratorNormalCompletion9||null==_iterator9.return||_iterator9.return()}finally{if(_didIteratorError9)throw _iteratorError9}}_this.draw(opts)})),this.props=currentProps}},{key:"getChangeFlags",value:function getChangeFlags(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function setChangeFlags(flags){var changeFlags=this.internalState.changeFlags;for(var key in changeFlags)flags[key]&&!changeFlags[key]&&(changeFlags[key]=flags[key],Object(debug.a)("layer.changeFlag",this,key,flags));var propsOrDataChanged=changeFlags.dataChanged||changeFlags.updateTriggersChanged||changeFlags.propsChanged||changeFlags.extensionsChanged;changeFlags.propsOrDataChanged=propsOrDataChanged,changeFlags.somethingChanged=propsOrDataChanged||flags.viewportChanged||flags.stateChanged}},{key:"clearChangeFlags",value:function clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"diffProps",value:function diffProps(newProps,oldProps){var changeFlags=props_diffProps(newProps,oldProps);if(changeFlags.updateTriggersChanged)for(var key in changeFlags.updateTriggersChanged)changeFlags.updateTriggersChanged[key]&&this.invalidateAttribute(key);if(changeFlags.transitionsChanged)for(var _key in changeFlags.transitionsChanged)this.internalState.uniformTransitions.add(_key,oldProps[_key],newProps[_key],newProps.transitions[_key]);return this.setChangeFlags(changeFlags)}},{key:"validateProps",value:function validateProps(){!function props_validateProps(props){var propTypes=getPropTypes(props);for(var propName in propTypes){var propType=propTypes[propName],validate=propType.validate;if(validate&&!validate(props[propName],propType))throw new Error("Invalid prop ".concat(propName,": ").concat(props[propName]))}}(this.props)}},{key:"setModuleParameters",value:function setModuleParameters(moduleParameters){var _iteratorNormalCompletion10=!0,_didIteratorError10=!1,_iteratorError10=void 0;try{for(var _step10,_iterator10=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=!0){_step10.value.updateModuleSettings(moduleParameters)}}catch(err){_didIteratorError10=!0,_iteratorError10=err}finally{try{_iteratorNormalCompletion10||null==_iterator10.return||_iterator10.return()}finally{if(_didIteratorError10)throw _iteratorError10}}}},{key:"_updateModules",value:function _updateModules(_ref9){var props=_ref9.props,oldProps=_ref9.oldProps,autoHighlight=props.autoHighlight,highlightedObjectIndex=props.highlightedObjectIndex,highlightColor=props.highlightColor;if(oldProps.autoHighlight!==autoHighlight||oldProps.highlightedObjectIndex!==highlightedObjectIndex||oldProps.highlightColor!==highlightColor){var parameters={};autoHighlight||(parameters.pickingSelectedColor=null),Array.isArray(highlightColor)&&(parameters.pickingHighlightColor=highlightColor),Number.isInteger(highlightedObjectIndex)&&(parameters.pickingSelectedColor=highlightedObjectIndex>=0?this.encodePickingColor(highlightedObjectIndex):null),this.setModuleParameters(parameters)}}},{key:"_getUpdateParams",value:function _getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function _getNeedsRedraw(opts){if(!this.internalState)return!1;var redraw=!1;redraw=redraw||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!opts.clearRedrawFlags;var attributeManager=this.getAttributeManager(),attributeManagerNeedsRedraw=attributeManager&&attributeManager.getNeedsRedraw(opts);return redraw=redraw||attributeManagerNeedsRedraw}},{key:"_getAttributeManager",value:function _getAttributeManager(){return new attribute_manager_AttributeManager(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function _initState(){Object(assert.a)(!this.internalState&&!this.state),Object(assert.a)(isFinite(this.props.coordinateSystem),"".concat(this.id,": invalid coordinateSystem"));var attributeManager=this._getAttributeManager();attributeManager&&attributeManager.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new layer_state_LayerState({attributeManager:attributeManager,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:function get(){return log.a.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),attributeManager}}),this.internalState.layer=this,this.internalState.uniformTransitions=new uniform_transition_manager_UniformTransitionManager(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function _transferState(oldLayer){Object(debug.a)("layer.matched",this,this===oldLayer);var state=oldLayer.state,internalState=oldLayer.internalState;Object(assert.a)(state&&internalState),this!==oldLayer&&(this.internalState=internalState,this.internalState.layer=this,this.state=state,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}},{key:"_onAsyncPropUpdated",value:function _onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}},{key:"isLoaded",get:function get(){return this.internalState&&!this.internalState.isAsyncPropLoading()}},{key:"wrapLongitude",get:function get(){return this.props.wrapLongitude}}]),Layer}(component_Component);layer_Layer.layerName="Layer",layer_Layer.defaultProps=layer_defaultProps},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return event_manager_EventManager}));var slicedToArray=__webpack_require__(11),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),hammer=__webpack_require__(182),hammer_default=__webpack_require__.n(hammer),MOUSE_INPUT_MAP={mousedown:1,mousemove:2,mouseup:4};!function enhancePointerEventInput(PointerEventInput){var oldHandler=PointerEventInput.prototype.handler;PointerEventInput.prototype.handler=function handler(ev){var store=this.store;ev.button>0&&(function some(array,predict){for(var i=0;i<array.length;i++)if(predict(array[i]))return!0;return!1}(store,(function(e){return e.pointerId===ev.pointerId}))||store.push(ev)),oldHandler.call(this,ev)}}(hammer_default.a.PointerEventInput),function enhanceMouseInput(MouseInput){MouseInput.prototype.handler=function handler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];1&eventType&&ev.button>=0&&(this.pressed=!0),2&eventType&&0===ev.which&&(eventType=4),this.pressed&&(4&eventType&&(this.pressed=!1),this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:"mouse",srcEvent:ev}))}}(hammer_default.a.MouseInput);var Manager=hammer_default.a.Manager,hammer_browser=hammer_default.a,RECOGNIZERS=hammer_browser?[[hammer_browser.Rotate,{enable:!1}],[hammer_browser.Pinch,{enable:!1}],[hammer_browser.Swipe,{enable:!1}],[hammer_browser.Pan,{threshold:0,enable:!1}],[hammer_browser.Press,{enable:!1}],[hammer_browser.Tap,{event:"doubletap",taps:2,enable:!1}],[hammer_browser.Tap,{event:"anytap",enable:!1}],[hammer_browser.Tap,{enable:!1}]]:null,RECOGNIZER_COMPATIBLE_MAP={rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},RECOGNIZER_FALLBACK_MAP={doubletap:["tap"]},BASIC_EVENT_ALIASES={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},INPUT_EVENT_TYPES_KEY_EVENTS=["keydown","keyup"],INPUT_EVENT_TYPES_MOUSE_EVENTS=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],INPUT_EVENT_TYPES_WHEEL_EVENTS=["wheel","mousewheel","DOMMouseScroll"],EVENT_RECOGNIZER_MAP={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},GESTURE_EVENT_ALIASES={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},globals=__webpack_require__(130),firefox=-1!==globals.b.indexOf("firefox"),WHEEL_EVENTS=INPUT_EVENT_TYPES_WHEEL_EVENTS,wheel_input_WheelInput=function(){function WheelInput(element,callback){var _this=this,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(classCallCheck.a)(this,WheelInput),this.element=element,this.callback=callback,this.options=Object.assign({enable:!0},options),this.events=WHEEL_EVENTS.concat(options.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(event){return element.addEventListener(event,_this.handleEvent,!!globals.a&&{passive:!1})}))}return Object(createClass.a)(WheelInput,[{key:"destroy",value:function destroy(){var _this2=this;this.events.forEach((function(event){return _this2.element.removeEventListener(event,_this2.handleEvent)}))}},{key:"enableEventType",value:function enableEventType(eventType,enabled){"wheel"===eventType&&(this.options.enable=enabled)}},{key:"handleEvent",value:function handleEvent(event){if(this.options.enable){var value=event.deltaY;globals.c.WheelEvent&&(firefox&&event.deltaMode===globals.c.WheelEvent.DOM_DELTA_PIXEL&&(value/=globals.c.devicePixelRatio),event.deltaMode===globals.c.WheelEvent.DOM_DELTA_LINE&&(value*=40));var wheelPosition={x:event.clientX,y:event.clientY};0!==value&&value%4.000244140625==0&&(value=Math.floor(value/4.000244140625)),event.shiftKey&&value&&(value*=.25),this._onWheel(event,-value,wheelPosition)}}},{key:"_onWheel",value:function _onWheel(srcEvent,delta,position){this.callback({type:"wheel",center:position,delta:delta,srcEvent:srcEvent,pointerType:"mouse",target:srcEvent.target})}}]),WheelInput}(),MOUSE_EVENTS=INPUT_EVENT_TYPES_MOUSE_EVENTS,move_input_MoveInput=function(){function MoveInput(element,callback){var _this=this,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(classCallCheck.a)(this,MoveInput),this.element=element,this.callback=callback,this.pressed=!1,this.options=Object.assign({enable:!0},options),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=MOUSE_EVENTS.concat(options.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(event){return element.addEventListener(event,_this.handleEvent)}))}return Object(createClass.a)(MoveInput,[{key:"destroy",value:function destroy(){var _this2=this;this.events.forEach((function(event){return _this2.element.removeEventListener(event,_this2.handleEvent)}))}},{key:"enableEventType",value:function enableEventType(eventType,enabled){"pointermove"===eventType&&(this.enableMoveEvent=enabled),"pointerover"===eventType&&(this.enableOverEvent=enabled),"pointerout"===eventType&&(this.enableOutEvent=enabled),"pointerleave"===eventType&&(this.enableLeaveEvent=enabled)}},{key:"handleEvent",value:function handleEvent(event){this.handleOverEvent(event),this.handleOutEvent(event),this.handleLeaveEvent(event),this.handleMoveEvent(event)}},{key:"handleOverEvent",value:function handleOverEvent(event){this.enableOverEvent&&"mouseover"===event.type&&this.callback({type:"pointerover",srcEvent:event,pointerType:"mouse",target:event.target})}},{key:"handleOutEvent",value:function handleOutEvent(event){this.enableOutEvent&&"mouseout"===event.type&&this.callback({type:"pointerout",srcEvent:event,pointerType:"mouse",target:event.target})}},{key:"handleLeaveEvent",value:function handleLeaveEvent(event){this.enableLeaveEvent&&"mouseleave"===event.type&&this.callback({type:"pointerleave",srcEvent:event,pointerType:"mouse",target:event.target})}},{key:"handleMoveEvent",value:function handleMoveEvent(event){if(this.enableMoveEvent)switch(event.type){case"mousedown":event.button>=0&&(this.pressed=!0);break;case"mousemove":0===event.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:event,pointerType:"mouse",target:event.target});break;case"mouseup":this.pressed=!1}}}]),MoveInput}(),KEY_EVENTS=INPUT_EVENT_TYPES_KEY_EVENTS,key_input_KeyInput=function(){function KeyInput(element,callback){var _this=this,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(classCallCheck.a)(this,KeyInput),this.element=element,this.callback=callback,this.options=Object.assign({enable:!0},options),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=KEY_EVENTS.concat(options.events||[]),this.handleEvent=this.handleEvent.bind(this),element.tabIndex=options.tabIndex||0,element.style.outline="none",this.events.forEach((function(event){return element.addEventListener(event,_this.handleEvent)}))}return Object(createClass.a)(KeyInput,[{key:"destroy",value:function destroy(){var _this2=this;this.events.forEach((function(event){return _this2.element.removeEventListener(event,_this2.handleEvent)}))}},{key:"enableEventType",value:function enableEventType(eventType,enabled){"keydown"===eventType&&(this.enableDownEvent=enabled),"keyup"===eventType&&(this.enableUpEvent=enabled)}},{key:"handleEvent",value:function handleEvent(event){var targetElement=event.target||event.srcElement;"INPUT"===targetElement.tagName&&"text"===targetElement.type||"TEXTAREA"===targetElement.tagName||(this.enableDownEvent&&"keydown"===event.type&&this.callback({type:"keydown",srcEvent:event,key:event.key,target:event.target}),this.enableUpEvent&&"keyup"===event.type&&this.callback({type:"keyup",srcEvent:event,key:event.key,target:event.target}))}}]),KeyInput}(),contextmenu_input_ContextmenuInput=function(){function ContextmenuInput(element,callback){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(classCallCheck.a)(this,ContextmenuInput),this.element=element,this.callback=callback,this.options=Object.assign({enable:!0},options),this.handleEvent=this.handleEvent.bind(this),element.addEventListener("contextmenu",this.handleEvent)}return Object(createClass.a)(ContextmenuInput,[{key:"destroy",value:function destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function enableEventType(eventType,enabled){"contextmenu"===eventType&&(this.options.enable=enabled)}},{key:"handleEvent",value:function handleEvent(event){this.options.enable&&this.callback({type:"contextmenu",center:{x:event.clientX,y:event.clientY},srcEvent:event,pointerType:"mouse",target:event.target})}}]),ContextmenuInput}(),esm_typeof=__webpack_require__(14),event_utils_MOUSE_EVENTS={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};var DEFAULT_OPTIONS={srcElement:"root",priority:0},event_registrar_EventRegistrar=function(){function EventRegistrar(eventManager){Object(classCallCheck.a)(this,EventRegistrar),this.eventManager=eventManager,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return Object(createClass.a)(EventRegistrar,[{key:"isEmpty",value:function isEmpty(){return!this._active}},{key:"add",value:function add(type,handler,opts){var once=arguments.length>3&&void 0!==arguments[3]&&arguments[3],passive=arguments.length>4&&void 0!==arguments[4]&&arguments[4],handlers=this.handlers,handlersByElement=this.handlersByElement;opts&&("object"!==Object(esm_typeof.a)(opts)||opts.addEventListener)&&(opts={srcElement:opts}),opts=opts?Object.assign({},DEFAULT_OPTIONS,opts):DEFAULT_OPTIONS;var entries=handlersByElement.get(opts.srcElement);entries||(entries=[],handlersByElement.set(opts.srcElement,entries));var entry={type:type,handler:handler,srcElement:opts.srcElement,priority:opts.priority};once&&(entry.once=!0),passive&&(entry.passive=!0),handlers.push(entry),this._active=this._active||!entry.passive;for(var insertPosition=entries.length-1;insertPosition>=0&&!(entries[insertPosition].priority>=entry.priority);)insertPosition--;entries.splice(insertPosition+1,0,entry)}},{key:"remove",value:function remove(type,handler){for(var handlers=this.handlers,handlersByElement=this.handlersByElement,i=handlers.length-1;i>=0;i--){var entry=handlers[i];if(entry.type===type&&entry.handler===handler){handlers.splice(i,1);var entries=handlersByElement.get(entry.srcElement);entries.splice(entries.indexOf(entry),1),0===entries.length&&handlersByElement.delete(entry.srcElement)}}this._active=handlers.some((function(entry){return!entry.passive}))}},{key:"handleEvent",value:function handleEvent(event){if(!this.isEmpty()){for(var mjolnirEvent=this._normalizeEvent(event),target=event.srcEvent.target;target&&target!==mjolnirEvent.rootElement;){if(this._emit(mjolnirEvent,target),mjolnirEvent.handled)return;target=target.parentNode}this._emit(mjolnirEvent,"root")}}},{key:"_emit",value:function _emit(event,srcElement){var entries=this.handlersByElement.get(srcElement);if(entries){for(var immediatePropagationStopped=!1,stopPropagation=function stopPropagation(){event.handled=!0},stopImmediatePropagation=function stopImmediatePropagation(){event.handled=!0,immediatePropagationStopped=!0},entriesToRemove=[],i=0;i<entries.length;i++){var _entries$i=entries[i],type=_entries$i.type,handler=_entries$i.handler,once=_entries$i.once;if(handler(Object.assign({},event,{type:type,stopPropagation:stopPropagation,stopImmediatePropagation:stopImmediatePropagation})),once&&entriesToRemove.push(entries[i]),immediatePropagationStopped)break}for(var _i=0;_i<entriesToRemove.length;_i++){var _entriesToRemove$_i=entriesToRemove[_i];type=_entriesToRemove$_i.type,handler=_entriesToRemove$_i.handler;this.remove(type,handler)}}}},{key:"_normalizeEvent",value:function _normalizeEvent(event){var rootElement=this.eventManager.element;return Object.assign({},event,function whichButtons(event){var eventType=event_utils_MOUSE_EVENTS[event.srcEvent.type];if(!eventType)return null;var _event$srcEvent=event.srcEvent,buttons=_event$srcEvent.buttons,button=_event$srcEvent.button,which=_event$srcEvent.which,leftButton=!1,middleButton=!1,rightButton=!1;return 4===eventType||2===eventType&&!Number.isFinite(buttons)?(leftButton=1===which,middleButton=2===which,rightButton=3===which):2===eventType?(leftButton=Boolean(1&buttons),middleButton=Boolean(4&buttons),rightButton=Boolean(2&buttons)):1===eventType&&(leftButton=0===button,middleButton=1===button,rightButton=2===button),{leftButton:leftButton,middleButton:middleButton,rightButton:rightButton}}(event),function getOffsetPosition(event,rootElement){var srcEvent=event.srcEvent;if(!event.center&&!Number.isFinite(srcEvent.clientX))return null;var center=event.center||{x:srcEvent.clientX,y:srcEvent.clientY},rect=rootElement.getBoundingClientRect(),scaleX=rect.width/rootElement.offsetWidth,scaleY=rect.height/rootElement.offsetHeight;return{center:center,offsetCenter:{x:(center.x-rect.left-rootElement.clientLeft)/scaleX,y:(center.y-rect.top-rootElement.clientTop)/scaleY}}}(event,rootElement),{handled:!1,rootElement:rootElement})}}]),EventRegistrar}(),event_manager_DEFAULT_OPTIONS={events:null,recognizers:null,recognizerOptions:{},Manager:Manager,touchAction:"none",tabIndex:0},event_manager_EventManager=function(){function EventManager(){var element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,EventManager),this.options=Object.assign({},event_manager_DEFAULT_OPTIONS,options),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(element);var events=options.events;events&&this.on(events)}return Object(createClass.a)(EventManager,[{key:"setElement",value:function setElement(element){var _this=this;if(this.element&&this.destroy(),this.element=element,element){var options=this.options,ManagerClass=options.Manager;for(var recognizerName in this.manager=new ManagerClass(element,{touchAction:options.touchAction,recognizers:options.recognizers||RECOGNIZERS}).on("hammer.input",this._onBasicInput),options.recognizers||Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach((function(name){var recognizer=_this.manager.get(name);recognizer&&RECOGNIZER_COMPATIBLE_MAP[name].forEach((function(otherName){recognizer.recognizeWith(otherName)}))})),options.recognizerOptions){var recognizer=this.manager.get(recognizerName);if(recognizer){var recognizerOption=options.recognizerOptions[recognizerName];delete recognizerOption.enable,recognizer.set(recognizerOption)}}this.wheelInput=new wheel_input_WheelInput(element,this._onOtherEvent,{enable:!1}),this.moveInput=new move_input_MoveInput(element,this._onOtherEvent,{enable:!1}),this.keyInput=new key_input_KeyInput(element,this._onOtherEvent,{enable:!1,tabIndex:options.tabIndex}),this.contextmenuInput=new contextmenu_input_ContextmenuInput(element,this._onOtherEvent,{enable:!1});var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.events[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=Object(slicedToArray.a)(_step.value,2),eventAlias=_step$value[0],eventRegistrar=_step$value[1];eventRegistrar.isEmpty()||(this._toggleRecognizer(eventRegistrar.recognizerName,!0),this.manager.on(eventAlias,eventRegistrar.handleEvent))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}},{key:"destroy",value:function destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function on(event,handler,opts){this._addEventHandler(event,handler,opts,!1)}},{key:"once",value:function once(event,handler,opts){this._addEventHandler(event,handler,opts,!0)}},{key:"watch",value:function watch(event,handler,opts){this._addEventHandler(event,handler,opts,!1,!0)}},{key:"off",value:function off(event,handler){this._removeEventHandler(event,handler)}},{key:"_toggleRecognizer",value:function _toggleRecognizer(name,enabled){var manager=this.manager;if(manager){var recognizer=manager.get(name);if(recognizer&&recognizer.options.enable!==enabled){recognizer.set({enable:enabled});var fallbackRecognizers=RECOGNIZER_FALLBACK_MAP[name];fallbackRecognizers&&!this.options.recognizers&&fallbackRecognizers.forEach((function(otherName){var otherRecognizer=manager.get(otherName);enabled?(otherRecognizer.requireFailure(name),recognizer.dropRequireFailure(otherName)):otherRecognizer.dropRequireFailure(name)}))}this.wheelInput.enableEventType(name,enabled),this.moveInput.enableEventType(name,enabled),this.keyInput.enableEventType(name,enabled),this.contextmenuInput.enableEventType(name,enabled)}}},{key:"_addEventHandler",value:function _addEventHandler(event,handler,opts,once,passive){if("string"==typeof event){var manager=this.manager,events=this.events,eventAlias=GESTURE_EVENT_ALIASES[event]||event,eventRegistrar=events.get(eventAlias);eventRegistrar||(eventRegistrar=new event_registrar_EventRegistrar(this),events.set(eventAlias,eventRegistrar),eventRegistrar.recognizerName=EVENT_RECOGNIZER_MAP[eventAlias]||eventAlias,manager&&manager.on(eventAlias,eventRegistrar.handleEvent)),eventRegistrar.add(event,handler,opts,once,passive),eventRegistrar.isEmpty()||this._toggleRecognizer(eventRegistrar.recognizerName,!0)}else for(var eventName in opts=handler,event)this._addEventHandler(eventName,event[eventName],opts,once,passive)}},{key:"_removeEventHandler",value:function _removeEventHandler(event,handler){if("string"==typeof event){var events=this.events,eventAlias=GESTURE_EVENT_ALIASES[event]||event,eventRegistrar=events.get(eventAlias);if(eventRegistrar&&(eventRegistrar.remove(event,handler),eventRegistrar.isEmpty())){var recognizerName=eventRegistrar.recognizerName,isRecognizerUsed=!1,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=events.values()[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var eh=_step2.value;if(eh.recognizerName===recognizerName&&!eh.isEmpty()){isRecognizerUsed=!0;break}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}isRecognizerUsed||this._toggleRecognizer(recognizerName,!1)}}else for(var eventName in event)this._removeEventHandler(eventName,event[eventName])}},{key:"_onBasicInput",value:function _onBasicInput(event){var srcEvent=event.srcEvent,alias=BASIC_EVENT_ALIASES[srcEvent.type];alias&&this.manager.emit(alias,event)}},{key:"_onOtherEvent",value:function _onOtherEvent(event){this.manager.emit(event.type,event)}}]),EventManager}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return math_array_MathArray}));var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(7),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(8),setPrototypeOf=__webpack_require__(146);var construct=__webpack_require__(149);function wrapNativeSuper_wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return(wrapNativeSuper_wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return Object(construct.a)(Class,arguments,Object(getPrototypeOf.a)(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),Object(setPrototypeOf.a)(Wrapper,Class)})(Class)}var common=__webpack_require__(24),assert=__webpack_require__(72),math_array_MathArray=function(_Array){function MathArray(){return Object(classCallCheck.a)(this,MathArray),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(MathArray).apply(this,arguments))}return Object(inherits.a)(MathArray,_Array),Object(createClass.a)(MathArray,[{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"from",value:function from(arrayOrObject){return Array.isArray(arrayOrObject)?this.copy(arrayOrObject):this.fromObject(arrayOrObject)}},{key:"fromArray",value:function fromArray(array){for(var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<this.ELEMENTS;++i)this[i]=array[i+offset];return this.check()}},{key:"to",value:function to(arrayOrObject){return arrayOrObject===this?this:Object(common.e)(arrayOrObject)?this.toArray(arrayOrObject):this.toObject(arrayOrObject)}},{key:"toTarget",value:function toTarget(target){return target?this.to(target):this}},{key:"toArray",value:function toArray(){for(var array=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<this.ELEMENTS;++i)array[offset+i]=this[i];return array}},{key:"toFloat32Array",value:function toFloat32Array(){return new Float32Array(this)}},{key:"toString",value:function toString(){return this.formatString(common.b)}},{key:"formatString",value:function formatString(opts){for(var string="",i=0;i<this.ELEMENTS;++i)string+=(i>0?", ":"")+Object(common.d)(this[i],opts);return"".concat(opts.printTypes?this.constructor.name:"","[").concat(string,"]")}},{key:"equals",value:function equals(array){if(!array||this.length!==array.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(!Object(common.c)(this[i],array[i]))return!1;return!0}},{key:"exactEquals",value:function exactEquals(array){if(!array||this.length!==array.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(this[i]!==array[i])return!1;return!0}},{key:"negate",value:function negate(){for(var i=0;i<this.ELEMENTS;++i)this[i]=-this[i];return this.check()}},{key:"lerp",value:function lerp(a,b,t){void 0===t&&(t=b,b=a,a=this);for(var i=0;i<this.ELEMENTS;++i){var ai=a[i];this[i]=ai+t*(b[i]-ai)}return this.check()}},{key:"min",value:function min(vector){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(vector[i],this[i]);return this.check()}},{key:"max",value:function max(vector){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.max(vector[i],this[i]);return this.check()}},{key:"clamp",value:function clamp(minVector,maxVector){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],minVector[i]),maxVector[i]);return this.check()}},{key:"add",value:function add(){for(var _len=arguments.length,vectors=new Array(_len),_key=0;_key<_len;_key++)vectors[_key]=arguments[_key];for(var _i=0,_vectors=vectors;_i<_vectors.length;_i++)for(var vector=_vectors[_i],i=0;i<this.ELEMENTS;++i)this[i]+=vector[i];return this.check()}},{key:"subtract",value:function subtract(){for(var _len2=arguments.length,vectors=new Array(_len2),_key2=0;_key2<_len2;_key2++)vectors[_key2]=arguments[_key2];for(var _i2=0,_vectors2=vectors;_i2<_vectors2.length;_i2++)for(var vector=_vectors2[_i2],i=0;i<this.ELEMENTS;++i)this[i]-=vector[i];return this.check()}},{key:"scale",value:function scale(_scale){if(Array.isArray(_scale))return this.multiply(_scale);for(var i=0;i<this.ELEMENTS;++i)this[i]*=_scale;return this.check()}},{key:"sub",value:function sub(a){return this.subtract(a)}},{key:"setScalar",value:function setScalar(a){for(var i=0;i<this.ELEMENTS;++i)this[i]=a;return this.check()}},{key:"addScalar",value:function addScalar(a){for(var i=0;i<this.ELEMENTS;++i)this[i]+=a;return this.check()}},{key:"subScalar",value:function subScalar(a){return this.addScalar(-a)}},{key:"multiplyScalar",value:function multiplyScalar(scalar){for(var i=0;i<this.ELEMENTS;++i)this[i]*=scalar;return this.check()}},{key:"divideScalar",value:function divideScalar(a){return this.scale(1/a)}},{key:"clampScalar",value:function clampScalar(min,max){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],min),max);return this.check()}},{key:"multiplyByScalar",value:function multiplyByScalar(scalar){return this.scale(scalar)}},{key:"check",value:function check(){if(common.b.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function validate(){for(var valid=this.length===this.ELEMENTS,i=0;i<this.ELEMENTS;++i)valid=valid&&Number.isFinite(this[i]);return valid}},{key:"ELEMENTS",get:function get(){return Object(assert.a)(!1),0}},{key:"RANK",get:function get(){return Object(assert.a)(!1),0}},{key:"elements",get:function get(){return this}}]),MathArray}(wrapNativeSuper_wrapNativeSuper(Array))},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"shadertools: assertion failed.")}__webpack_require__.d(__webpack_exports__,"a",(function(){return assert}))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"a",(function(){return Mapbox}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_utils_globals__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(62);var propTypes={container:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object,gl:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object,mapboxApiAccessToken:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,mapboxApiUrl:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,attributionControl:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,preserveDrawingBuffer:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,reuseMaps:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,transformRequest:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,mapOptions:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object,mapStyle:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object]),visible:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,asyncRender:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,onLoad:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,onError:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,width:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,height:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,viewState:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object,longitude:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,latitude:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,zoom:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,bearing:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,pitch:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,altitude:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number},defaultProps={container:_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.body,mapboxApiAccessToken:function getAccessToken(){var accessToken=null;if("undefined"!=typeof window&&window.location){var match=window.location.search.match(/access_token=([^&\/]*)/);accessToken=match&&match[1]}accessToken||void 0===process||(accessToken=accessToken||"pk.eyJ1IjoiaWx5YWJvLXRlcmFseXRpY3MiLCJhIjoiY2ppaW9wYzJ1MW8weTN2bnJkOHdsbTQ3dSJ9.VP2-bMLHPnmvqxkia-rM3g");return accessToken||"no-token"}(),mapboxApiUrl:"https://api.mapbox.com",preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"mapbox://styles/mapbox/light-v8",visible:!0,asyncRender:!1,onLoad:function noop(){},onError:function defaultOnError(event){event&&console.error(event.error)},width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0,altitude:1.5};function checkPropTypes(props){var component=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";props.debug&&prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.checkPropTypes(propTypes,props,"prop",component)}var Mapbox=function(){function Mapbox(props){var _this=this;if(Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Mapbox),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"mapboxgl",void 0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"props",defaultProps),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"_map",null),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"width",0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"height",0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"_fireLoadEvent",(function(){_this.props.onLoad({type:"load",target:_this._map})})),!props.mapboxgl)throw new Error("Mapbox not available");this.mapboxgl=props.mapboxgl,Mapbox.initialized||(Mapbox.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(props)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Mapbox,[{key:"finalize",value:function finalize(){return this._destroy(),this}},{key:"setProps",value:function setProps(props){return this._update(this.props,props),this}},{key:"resize",value:function resize(){return this._map.resize(),this}},{key:"redraw",value:function redraw(){var map=this._map;map.style&&(map._frame&&(map._frame.cancel(),map._frame=null),map._render())}},{key:"getMap",value:function getMap(){return this._map}},{key:"_reuse",value:function _reuse(props){this._map=Mapbox.savedMap;var oldContainer=this._map.getContainer(),newContainer=props.container;for(newContainer.classList.add("mapboxgl-map");oldContainer.childNodes.length>0;)newContainer.appendChild(oldContainer.childNodes[0]);this._map._container=newContainer,Mapbox.savedMap=null,props.mapStyle&&this._map.setStyle(props.mapStyle,{diff:!1}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function _create(props){if(props.reuseMaps&&Mapbox.savedMap)this._reuse(props);else{if(props.gl){var getContext=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=getContext,props.gl}}var mapOptions={container:props.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:props.mapStyle,interactive:!1,trackResize:!1,attributionControl:props.attributionControl,preserveDrawingBuffer:props.preserveDrawingBuffer};props.transformRequest&&(mapOptions.transformRequest=props.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},mapOptions,props.mapOptions)),this._map.once("load",props.onLoad),this._map.on("error",props.onError)}return this}},{key:"_destroy",value:function _destroy(){this._map&&(Mapbox.savedMap?this._map.remove():(Mapbox.savedMap=this._map,this._map.off("load",this.props.onLoad),this._map.off("error",this.props.onError),this._map.off("styledata",this._fireLoadEvent)),this._map=null)}},{key:"_initialize",value:function _initialize(props){var _this2=this;checkPropTypes(props=Object.assign({},defaultProps,props),"Mapbox"),this.mapboxgl.accessToken=props.mapboxApiAccessToken||defaultProps.mapboxApiAccessToken,this.mapboxgl.baseApiUrl=props.mapboxApiUrl,this._create(props);var container=props.container;Object.defineProperty(container,"offsetWidth",{get:function get(){return _this2.width}}),Object.defineProperty(container,"clientWidth",{get:function get(){return _this2.width}}),Object.defineProperty(container,"offsetHeight",{get:function get(){return _this2.height}}),Object.defineProperty(container,"clientHeight",{get:function get(){return _this2.height}});var canvas=this._map.getCanvas();canvas&&(canvas.style.outline="none"),this._updateMapViewport({},props),this._updateMapSize({},props),this.props=props}},{key:"_update",value:function _update(oldProps,newProps){if(this._map){checkPropTypes(newProps=Object.assign({},this.props,newProps),"Mapbox");var viewportChanged=this._updateMapViewport(oldProps,newProps),sizeChanged=this._updateMapSize(oldProps,newProps);newProps.asyncRender||!viewportChanged&&!sizeChanged||this.redraw(),this.props=newProps}}},{key:"_updateMapSize",value:function _updateMapSize(oldProps,newProps){var sizeChanged=oldProps.width!==newProps.width||oldProps.height!==newProps.height;return sizeChanged&&(this.width=newProps.width,this.height=newProps.height,this.resize()),sizeChanged}},{key:"_updateMapViewport",value:function _updateMapViewport(oldProps,newProps){var oldViewState=this._getViewState(oldProps),newViewState=this._getViewState(newProps),viewportChanged=newViewState.latitude!==oldViewState.latitude||newViewState.longitude!==oldViewState.longitude||newViewState.zoom!==oldViewState.zoom||newViewState.pitch!==oldViewState.pitch||newViewState.bearing!==oldViewState.bearing||newViewState.altitude!==oldViewState.altitude;return viewportChanged&&(this._map.jumpTo(this._viewStateToMapboxProps(newViewState)),newViewState.altitude!==oldViewState.altitude&&(this._map.transform.altitude=newViewState.altitude)),viewportChanged}},{key:"_getViewState",value:function _getViewState(props){var _ref=props.viewState||props,longitude=_ref.longitude,latitude=_ref.latitude,zoom=_ref.zoom,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?0:_ref$pitch,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?0:_ref$bearing,_ref$altitude=_ref.altitude;return{longitude:longitude,latitude:latitude,zoom:zoom,pitch:pitch,bearing:bearing,altitude:void 0===_ref$altitude?1.5:_ref$altitude}}},{key:"_checkStyleSheet",value:function _checkStyleSheet(){var mapboxVersion=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.47.0";if(void 0!==_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a)try{var testElement=_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.createElement("div");testElement.className="mapboxgl-map",testElement.style.display="none",_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.body.append(testElement);var isCssLoaded="static"!==window.getComputedStyle(testElement).position;if(!isCssLoaded){var link=_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.createElement("link");link.setAttribute("rel","stylesheet"),link.setAttribute("type","text/css"),link.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(mapboxVersion,"/mapbox-gl.css")),_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.head.append(link)}}catch(error){}}},{key:"_viewStateToMapboxProps",value:function _viewStateToMapboxProps(viewState){return{center:[viewState.longitude,viewState.latitude],zoom:viewState.zoom,bearing:viewState.bearing,pitch:viewState.pitch}}}]),Mapbox}();Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(Mapbox,"initialized",!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(Mapbox,"propTypes",propTypes),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(Mapbox,"defaultProps",defaultProps),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(Mapbox,"savedMap",null)}).call(this,__webpack_require__(58))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DECLARATION_INJECT_MARKER})),__webpack_require__.d(__webpack_exports__,"c",(function(){return injectShader})),__webpack_require__.d(__webpack_exports__,"b",(function(){return combineInjects}));var _MODULE_INJECTORS,defineProperty=__webpack_require__(0),constants=__webpack_require__(86),assert=__webpack_require__(223),MODULE_INJECTORS=(_MODULE_INJECTORS={},Object(defineProperty.a)(_MODULE_INJECTORS,constants.b,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(defineProperty.a)(_MODULE_INJECTORS,constants.a,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),_MODULE_INJECTORS),DECLARATION_INJECT_MARKER="__LUMA_INJECT_DECLARATIONS__",REGEX_START_OF_MAIN=/void\s+main\s*\([^)]*\)\s*\{\n?/,REGEX_END_OF_MAIN=/}\n?[^{}]*$/,fragments=[];function injectShader(source,type,inject,injectStandardStubs){var isVertex=type===constants.b,_loop=function _loop(key){var fragmentData=inject[key];fragmentData.sort((function(a,b){return a.order-b.order})),fragments.length=fragmentData.length;for(var i=0,len=fragmentData.length;i<len;++i)fragments[i]=fragmentData[i].injection;var fragmentString="".concat(fragments.join("\n"),"\n");switch(key){case"vs:#decl":isVertex&&(source=source.replace(DECLARATION_INJECT_MARKER,fragmentString));break;case"vs:#main-start":isVertex&&(source=source.replace(REGEX_START_OF_MAIN,(function(match){return match+fragmentString})));break;case"vs:#main-end":isVertex&&(source=source.replace(REGEX_END_OF_MAIN,(function(match){return fragmentString+match})));break;case"fs:#decl":isVertex||(source=source.replace(DECLARATION_INJECT_MARKER,fragmentString));break;case"fs:#main-start":isVertex||(source=source.replace(REGEX_START_OF_MAIN,(function(match){return match+fragmentString})));break;case"fs:#main-end":isVertex||(source=source.replace(REGEX_END_OF_MAIN,(function(match){return fragmentString+match})));break;default:source=source.replace(key,(function(match){return match+fragmentString}))}};for(var key in inject)_loop(key);return source=source.replace(DECLARATION_INJECT_MARKER,""),injectStandardStubs&&(source=source.replace(/\}\s*$/,(function(match){return match+MODULE_INJECTORS[type]}))),source}function combineInjects(injects){var result={};return Object(assert.a)(Array.isArray(injects)&&injects.length>1),injects.forEach((function(inject){for(var key in inject)result[key]=result[key]?"".concat(result[key],"\n").concat(inject[key]):inject[key]})),result}},,function(module,exports,__webpack_require__){"use strict";var badArrayLike,isCallableMarker,fnToStr=Function.prototype.toString,reflectApply="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof reflectApply&&"function"==typeof Object.defineProperty)try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={}}catch(_){reflectApply=null}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function isES6ClassFunction(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return!1}},toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=reflectApply?function isCallable(value){if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if("function"==typeof value&&!value.prototype)return!0;try{reflectApply(value,null,badArrayLike)}catch(e){if(e!==isCallableMarker)return!1}return!isES6ClassFn(value)}:function isCallable(value){if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if("function"==typeof value&&!value.prototype)return!0;if(hasToStringTag)return function tryFunctionToStr(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}}(value);if(isES6ClassFn(value))return!1;var strClass=toStr.call(value);return"[object Function]"===strClass||"[object GeneratorFunction]"===strClass}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(185),GetIntrinsic=__webpack_require__(13),$apply=GetIntrinsic("%Function.prototype.apply%"),$call=GetIntrinsic("%Function.prototype.call%"),$reflectApply=GetIntrinsic("%Reflect.apply%",!0)||bind.call($call,$apply);module.exports=function callBind(){return $reflectApply(bind,$call,arguments)},module.exports.apply=function applyBind(){return $reflectApply(bind,$apply,arguments)}},function(module,exports,__webpack_require__){"use strict";var $isNaN=Number.isNaN||function(a){return a!=a};module.exports=Number.isFinite||function(x){return"number"==typeof x&&!$isNaN(x)&&x!==1/0&&x!==-1/0}},function(module,exports,__webpack_require__){"use strict";module.exports=function isPrimitive(value){return null===value||"function"!=typeof value&&"object"!=typeof value}},function(module,exports,__webpack_require__){"use strict";var strValue=String.prototype.valueOf,toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function isString(value){return"string"==typeof value||"object"==typeof value&&(hasToStringTag?function tryStringObject(value){try{return strValue.call(value),!0}catch(e){return!1}}(value):"[object String]"===toStr.call(value))}},function(module,exports,__webpack_require__){"use strict";var $defineProperty=__webpack_require__(13)("%Object.defineProperty%",!0);if($defineProperty)try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}var $isEnumerable=__webpack_require__(32)("Object.prototype.propertyIsEnumerable");module.exports=function DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,O,P,desc){if(!$defineProperty){if(!IsDataDescriptor(desc))return!1;if(!desc["[[Configurable]]"]||!desc["[[Writable]]"])return!1;if(P in O&&$isEnumerable(O,P)!==!!desc["[[Enumerable]]"])return!1;var V=desc["[[Value]]"];return O[P]=V,SameValue(O[P],V)}return $defineProperty(O,P,FromPropertyDescriptor(desc)),!0}},function(module,exports,__webpack_require__){"use strict";module.exports=function ToBoolean(value){return!!value}},function(module,exports,__webpack_require__){"use strict";var $isNaN=__webpack_require__(133);module.exports=function SameValue(x,y){return x===y?0!==x||1/x==1/y:$isNaN(x)&&$isNaN(y)}},function(module,exports,__webpack_require__){"use strict";module.exports=function requirePromise(){if("function"!=typeof Promise)throw new TypeError("`Promise.prototype.finally` requires a global `Promise` be available.")}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),$Array=GetIntrinsic("%Array%"),$species=GetIntrinsic("%Symbol.species%",!0),$TypeError=GetIntrinsic("%TypeError%"),Get=__webpack_require__(59),IsArray=__webpack_require__(157),IsConstructor=__webpack_require__(315),IsInteger=__webpack_require__(316),Type=__webpack_require__(28);module.exports=function ArraySpeciesCreate(originalArray,length){if(!IsInteger(length)||length<0)throw new $TypeError("Assertion failed: length must be an integer >= 0");var C,len=0===length?0:length;if(IsArray(originalArray)&&(C=Get(originalArray,"constructor"),$species&&"Object"===Type(C)&&null===(C=Get(C,$species))&&(C=void 0)),void 0===C)return $Array(len);if(!IsConstructor(C))throw new $TypeError("C must be a constructor");return new C(len)}},function(module,exports,__webpack_require__){var hasMap="function"==typeof Map&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&"function"==typeof mapSizeDescriptor.get?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet="function"==typeof Set&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&"function"==typeof setSizeDescriptor.get?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,weakMapHas="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,weakSetHas="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,match=String.prototype.match,bigIntValueOf="function"==typeof BigInt?BigInt.prototype.valueOf:null,inspectCustom=__webpack_require__(501).custom,inspectSymbol=inspectCustom&&isSymbol(inspectCustom)?inspectCustom:null;function wrapQuotes(s,defaultStyle,opts){var quoteChar="double"===(opts.quoteStyle||defaultStyle)?'"':"'";return quoteChar+s+quoteChar}function quote(s){return String(s).replace(/"/g,"&quot;")}function isArray(obj){return"[object Array]"===toStr(obj)}function isSymbol(obj){return"[object Symbol]"===toStr(obj)}module.exports=function inspect_(obj,options,depth,seen){var opts=options||{};if(has(opts,"quoteStyle")&&"single"!==opts.quoteStyle&&"double"!==opts.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has(opts,"maxStringLength")&&("number"==typeof opts.maxStringLength?opts.maxStringLength<0&&opts.maxStringLength!==1/0:null!==opts.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var customInspect=!has(opts,"customInspect")||opts.customInspect;if("boolean"!=typeof customInspect)throw new TypeError('option "customInspect", if provided, must be `true` or `false`');if(has(opts,"indent")&&null!==opts.indent&&"\t"!==opts.indent&&!(parseInt(opts.indent,10)===opts.indent&&opts.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===obj)return"undefined";if(null===obj)return"null";if("boolean"==typeof obj)return obj?"true":"false";if("string"==typeof obj)return function inspectString(str,opts){if(str.length>opts.maxStringLength){var remaining=str.length-opts.maxStringLength,trailer="... "+remaining+" more character"+(remaining>1?"s":"");return inspectString(str.slice(0,opts.maxStringLength),opts)+trailer}return wrapQuotes(str.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,lowbyte),"single",opts)}(obj,opts);if("number"==typeof obj)return 0===obj?1/0/obj>0?"0":"-0":String(obj);if("bigint"==typeof obj)return String(obj)+"n";var maxDepth=void 0===opts.depth?5:opts.depth;if(void 0===depth&&(depth=0),depth>=maxDepth&&maxDepth>0&&"object"==typeof obj)return isArray(obj)?"[Array]":"[Object]";var indent=function getIndent(opts,depth){var baseIndent;if("\t"===opts.indent)baseIndent="\t";else{if(!("number"==typeof opts.indent&&opts.indent>0))return null;baseIndent=Array(opts.indent+1).join(" ")}return{base:baseIndent,prev:Array(depth+1).join(baseIndent)}}(opts,depth);if(void 0===seen)seen=[];else if(indexOf(seen,obj)>=0)return"[Circular]";function inspect(value,from,noIndent){if(from&&(seen=seen.slice()).push(from),noIndent){var newOpts={depth:opts.depth};return has(opts,"quoteStyle")&&(newOpts.quoteStyle=opts.quoteStyle),inspect_(value,newOpts,depth+1,seen)}return inspect_(value,opts,depth+1,seen)}if("function"==typeof obj){var name=function nameOf(f){if(f.name)return f.name;var m=match.call(functionToString.call(f),/^function\s*([\w$]+)/);if(m)return m[1];return null}(obj);return"[Function"+(name?": "+name:" (anonymous)")+"]"}if(isSymbol(obj)){var symString=Symbol.prototype.toString.call(obj);return"object"==typeof obj?markBoxed(symString):symString}if(function isElement(x){if(!x||"object"!=typeof x)return!1;if("undefined"!=typeof HTMLElement&&x instanceof HTMLElement)return!0;return"string"==typeof x.nodeName&&"function"==typeof x.getAttribute}(obj)){for(var s="<"+String(obj.nodeName).toLowerCase(),attrs=obj.attributes||[],i=0;i<attrs.length;i++)s+=" "+attrs[i].name+"="+wrapQuotes(quote(attrs[i].value),"double",opts);return s+=">",obj.childNodes&&obj.childNodes.length&&(s+="..."),s+="</"+String(obj.nodeName).toLowerCase()+">"}if(isArray(obj)){if(0===obj.length)return"[]";var xs=arrObjKeys(obj,inspect);return indent&&!function singleLineValues(xs){for(var i=0;i<xs.length;i++)if(indexOf(xs[i],"\n")>=0)return!1;return!0}(xs)?"["+indentedJoin(xs,indent)+"]":"[ "+xs.join(", ")+" ]"}if(function isError(obj){return"[object Error]"===toStr(obj)}(obj)){var parts=arrObjKeys(obj,inspect);return 0===parts.length?"["+String(obj)+"]":"{ ["+String(obj)+"] "+parts.join(", ")+" }"}if("object"==typeof obj&&customInspect){if(inspectSymbol&&"function"==typeof obj[inspectSymbol])return obj[inspectSymbol]();if("function"==typeof obj.inspect)return obj.inspect()}if(function isMap(x){if(!mapSize||!x||"object"!=typeof x)return!1;try{mapSize.call(x);try{setSize.call(x)}catch(s){return!0}return x instanceof Map}catch(e){}return!1}(obj)){var mapParts=[];return mapForEach.call(obj,(function(value,key){mapParts.push(inspect(key,obj,!0)+" => "+inspect(value,obj))})),collectionOf("Map",mapSize.call(obj),mapParts,indent)}if(function isSet(x){if(!setSize||!x||"object"!=typeof x)return!1;try{setSize.call(x);try{mapSize.call(x)}catch(m){return!0}return x instanceof Set}catch(e){}return!1}(obj)){var setParts=[];return setForEach.call(obj,(function(value){setParts.push(inspect(value,obj))})),collectionOf("Set",setSize.call(obj),setParts,indent)}if(function isWeakMap(x){if(!weakMapHas||!x||"object"!=typeof x)return!1;try{weakMapHas.call(x,weakMapHas);try{weakSetHas.call(x,weakSetHas)}catch(s){return!0}return x instanceof WeakMap}catch(e){}return!1}(obj))return weakCollectionOf("WeakMap");if(function isWeakSet(x){if(!weakSetHas||!x||"object"!=typeof x)return!1;try{weakSetHas.call(x,weakSetHas);try{weakMapHas.call(x,weakMapHas)}catch(s){return!0}return x instanceof WeakSet}catch(e){}return!1}(obj))return weakCollectionOf("WeakSet");if(function isNumber(obj){return"[object Number]"===toStr(obj)}(obj))return markBoxed(inspect(Number(obj)));if(function isBigInt(obj){return"[object BigInt]"===toStr(obj)}(obj))return markBoxed(inspect(bigIntValueOf.call(obj)));if(function isBoolean(obj){return"[object Boolean]"===toStr(obj)}(obj))return markBoxed(booleanValueOf.call(obj));if(function isString(obj){return"[object String]"===toStr(obj)}(obj))return markBoxed(inspect(String(obj)));if(!function isDate(obj){return"[object Date]"===toStr(obj)}(obj)&&!function isRegExp(obj){return"[object RegExp]"===toStr(obj)}(obj)){var ys=arrObjKeys(obj,inspect);return 0===ys.length?"{}":indent?"{"+indentedJoin(ys,indent)+"}":"{ "+ys.join(", ")+" }"}return String(obj)};var hasOwn=Object.prototype.hasOwnProperty||function(key){return key in this};function has(obj,key){return hasOwn.call(obj,key)}function toStr(obj){return objectToString.call(obj)}function indexOf(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}function lowbyte(c){var n=c.charCodeAt(0),x={8:"b",9:"t",10:"n",12:"f",13:"r"}[n];return x?"\\"+x:"\\x"+(n<16?"0":"")+n.toString(16)}function markBoxed(str){return"Object("+str+")"}function weakCollectionOf(type){return type+" { ? }"}function collectionOf(type,size,entries,indent){return type+" ("+size+") {"+(indent?indentedJoin(entries,indent):entries.join(", "))+"}"}function indentedJoin(xs,indent){if(0===xs.length)return"";var lineJoiner="\n"+indent.prev+indent.base;return lineJoiner+xs.join(","+lineJoiner)+"\n"+indent.prev}function arrObjKeys(obj,inspect){var isArr=isArray(obj),xs=[];if(isArr){xs.length=obj.length;for(var i=0;i<obj.length;i++)xs[i]=has(obj,i)?inspect(obj[i],obj):""}for(var key in obj)has(obj,key)&&(isArr&&String(Number(key))===key&&key<obj.length||(/[^\w$]/.test(key)?xs.push(inspect(key,obj)+": "+inspect(obj[key],obj)):xs.push(key+": "+inspect(obj[key],obj))));return xs}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),CreateDataProperty=__webpack_require__(306),IsPropertyKey=__webpack_require__(76),Type=__webpack_require__(28);module.exports=function CreateDataPropertyOrThrow(O,P,V){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var success=CreateDataProperty(O,P,V);if(!success)throw new $TypeError("unable to create data property");return success}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),GetV=__webpack_require__(321),IsCallable=__webpack_require__(87),IsPropertyKey=__webpack_require__(76);module.exports=function GetMethod(O,P){if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var func=GetV(O,P);if(null!=func){if(!IsCallable(func))throw new $TypeError(P+"is not a function");return func}}},function(module,exports,__webpack_require__){"use strict";module.exports=function requirePromise(){if("function"!=typeof Promise)throw new TypeError("`Promise.allSettled` requires a global `Promise` be available.")}},function(module,exports,__webpack_require__){var global=__webpack_require__(30),isObject=__webpack_require__(40),document=global.document,EXISTS=isObject(document)&&isObject(document.createElement);module.exports=function(it){return EXISTS?document.createElement(it):{}}},function(module,exports,__webpack_require__){var global=__webpack_require__(30),createNonEnumerableProperty=__webpack_require__(78);module.exports=function(key,value){try{createNonEnumerableProperty(global,key,value)}catch(error){global[key]=value}return value}},function(module,exports,__webpack_require__){var store=__webpack_require__(330),functionToString=Function.toString;"function"!=typeof store.inspectSource&&(store.inspectSource=function(it){return functionToString.call(it)}),module.exports=store.inspectSource},function(module,exports,__webpack_require__){var IS_PURE=__webpack_require__(162),store=__webpack_require__(330);(module.exports=function(key,value){return store[key]||(store[key]=void 0!==value?value:{})})("versions",[]).push({version:"3.6.5",mode:IS_PURE?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(module,exports,__webpack_require__){var global=__webpack_require__(30);module.exports=global},function(module,exports,__webpack_require__){var toIndexedObject=__webpack_require__(105),toLength=__webpack_require__(90),toAbsoluteIndex=__webpack_require__(334),createMethod=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIndexedObject($this),length=toLength(O.length),index=toAbsoluteIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if((value=O[index++])!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}};module.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},function(module,exports){module.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(module,exports){exports.f=Object.getOwnPropertySymbols},function(module,exports,__webpack_require__){"use strict";var toPrimitive=__webpack_require__(161),definePropertyModule=__webpack_require__(52),createPropertyDescriptor=__webpack_require__(160);module.exports=function(object,key,value){var propertyKey=toPrimitive(key);propertyKey in object?definePropertyModule.f(object,propertyKey,createPropertyDescriptor(0,value)):object[propertyKey]=value}},function(module,exports,__webpack_require__){var fails=__webpack_require__(35);module.exports=!!Object.getOwnPropertySymbols&&!fails((function(){return!String(Symbol())}))},function(module,exports,__webpack_require__){var match,version,global=__webpack_require__(30),userAgent=__webpack_require__(252),process=global.process,versions=process&&process.versions,v8=versions&&versions.v8;v8?version=(match=v8.split("."))[0]+match[1]:userAgent&&(!(match=userAgent.match(/Edge\/(\d+)/))||match[1]>=74)&&(match=userAgent.match(/Chrome\/(\d+)/))&&(version=match[1]),module.exports=version&&+version},function(module,exports,__webpack_require__){var getBuiltIn=__webpack_require__(135);module.exports=getBuiltIn("navigator","userAgent")||""},function(module,exports,__webpack_require__){var test={};test[__webpack_require__(39)("toStringTag")]="z",module.exports="[object z]"===String(test)},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),$find=__webpack_require__(108).find,addToUnscopables=__webpack_require__(255),arrayMethodUsesToLength=__webpack_require__(80),SKIPS_HOLES=!0,USES_TO_LENGTH=arrayMethodUsesToLength("find");"find"in[]&&Array(1).find((function(){SKIPS_HOLES=!1})),$({target:"Array",proto:!0,forced:SKIPS_HOLES||!USES_TO_LENGTH},{find:function find(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("find")},function(module,exports,__webpack_require__){var wellKnownSymbol=__webpack_require__(39),create=__webpack_require__(136),definePropertyModule=__webpack_require__(52),UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;null==ArrayPrototype[UNSCOPABLES]&&definePropertyModule.f(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:create(null)}),module.exports=function(key){ArrayPrototype[UNSCOPABLES][key]=!0}},function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(39)("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR]=function(){return this},Array.from(iteratorWithReturn,(function(){throw 2}))}catch(error){}module.exports=function(exec,SKIP_CLOSING){if(!SKIP_CLOSING&&!SAFE_CLOSING)return!1;var ITERATION_SUPPORT=!1;try{var object={};object[ITERATOR]=function(){return{next:function(){return{done:ITERATION_SUPPORT=!0}}}},exec(object)}catch(error){}return ITERATION_SUPPORT}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),createIteratorConstructor=__webpack_require__(598),getPrototypeOf=__webpack_require__(258),setPrototypeOf=__webpack_require__(259),setToStringTag=__webpack_require__(120),createNonEnumerableProperty=__webpack_require__(78),redefine=__webpack_require__(69),wellKnownSymbol=__webpack_require__(39),IS_PURE=__webpack_require__(162),Iterators=__webpack_require__(169),IteratorsCore=__webpack_require__(346),IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR=wellKnownSymbol("iterator"),returnThis=function(){return this};module.exports=function(Iterable,NAME,IteratorConstructor,next,DEFAULT,IS_SET,FORCED){createIteratorConstructor(IteratorConstructor,NAME,next);var CurrentIteratorPrototype,methods,KEY,getIterationMethod=function(KIND){if(KIND===DEFAULT&&defaultIterator)return defaultIterator;if(!BUGGY_SAFARI_ITERATORS&&KIND in IterablePrototype)return IterablePrototype[KIND];switch(KIND){case"keys":return function keys(){return new IteratorConstructor(this,KIND)};case"values":return function values(){return new IteratorConstructor(this,KIND)};case"entries":return function entries(){return new IteratorConstructor(this,KIND)}}return function(){return new IteratorConstructor(this)}},TO_STRING_TAG=NAME+" Iterator",INCORRECT_VALUES_NAME=!1,IterablePrototype=Iterable.prototype,nativeIterator=IterablePrototype[ITERATOR]||IterablePrototype["@@iterator"]||DEFAULT&&IterablePrototype[DEFAULT],defaultIterator=!BUGGY_SAFARI_ITERATORS&&nativeIterator||getIterationMethod(DEFAULT),anyNativeIterator="Array"==NAME&&IterablePrototype.entries||nativeIterator;if(anyNativeIterator&&(CurrentIteratorPrototype=getPrototypeOf(anyNativeIterator.call(new Iterable)),IteratorPrototype!==Object.prototype&&CurrentIteratorPrototype.next&&(IS_PURE||getPrototypeOf(CurrentIteratorPrototype)===IteratorPrototype||(setPrototypeOf?setPrototypeOf(CurrentIteratorPrototype,IteratorPrototype):"function"!=typeof CurrentIteratorPrototype[ITERATOR]&&createNonEnumerableProperty(CurrentIteratorPrototype,ITERATOR,returnThis)),setToStringTag(CurrentIteratorPrototype,TO_STRING_TAG,!0,!0),IS_PURE&&(Iterators[TO_STRING_TAG]=returnThis))),"values"==DEFAULT&&nativeIterator&&"values"!==nativeIterator.name&&(INCORRECT_VALUES_NAME=!0,defaultIterator=function values(){return nativeIterator.call(this)}),IS_PURE&&!FORCED||IterablePrototype[ITERATOR]===defaultIterator||createNonEnumerableProperty(IterablePrototype,ITERATOR,defaultIterator),Iterators[NAME]=defaultIterator,DEFAULT)if(methods={values:getIterationMethod("values"),keys:IS_SET?defaultIterator:getIterationMethod("keys"),entries:getIterationMethod("entries")},FORCED)for(KEY in methods)(BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME||!(KEY in IterablePrototype))&&redefine(IterablePrototype,KEY,methods[KEY]);else $({target:NAME,proto:!0,forced:BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME},methods);return methods}},function(module,exports,__webpack_require__){var has=__webpack_require__(50),toObject=__webpack_require__(70),sharedKey=__webpack_require__(189),CORRECT_PROTOTYPE_GETTER=__webpack_require__(347),IE_PROTO=sharedKey("IE_PROTO"),ObjectPrototype=Object.prototype;module.exports=CORRECT_PROTOTYPE_GETTER?Object.getPrototypeOf:function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectPrototype:null}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(51),aPossiblePrototype=__webpack_require__(599);module.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var setter,CORRECT_SETTER=!1,test={};try{(setter=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(test,[]),CORRECT_SETTER=test instanceof Array}catch(error){}return function setPrototypeOf(O,proto){return anObject(O),aPossiblePrototype(proto),CORRECT_SETTER?setter.call(O,proto):O.__proto__=proto,O}}():void 0)},function(module,exports,__webpack_require__){var $=__webpack_require__(25),$entries=__webpack_require__(349).entries;$({target:"Object",stat:!0},{entries:function entries(O){return $entries(O)}})},function(module,exports,__webpack_require__){var $=__webpack_require__(25),fails=__webpack_require__(35),toObject=__webpack_require__(70),nativeGetPrototypeOf=__webpack_require__(258),CORRECT_PROTOTYPE_GETTER=__webpack_require__(347);$({target:"Object",stat:!0,forced:fails((function(){nativeGetPrototypeOf(1)})),sham:!CORRECT_PROTOTYPE_GETTER},{getPrototypeOf:function getPrototypeOf(it){return nativeGetPrototypeOf(toObject(it))}})},function(module,exports,__webpack_require__){"use strict";var re1,re2,regexpFlags=__webpack_require__(350),stickyHelpers=__webpack_require__(603),nativeExec=RegExp.prototype.exec,nativeReplace=String.prototype.replace,patchedExec=nativeExec,UPDATES_LAST_INDEX_WRONG=(re1=/a/,re2=/b*/g,nativeExec.call(re1,"a"),nativeExec.call(re2,"a"),0!==re1.lastIndex||0!==re2.lastIndex),UNSUPPORTED_Y=stickyHelpers.UNSUPPORTED_Y||stickyHelpers.BROKEN_CARET,NPCG_INCLUDED=void 0!==/()??/.exec("")[1];(UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y)&&(patchedExec=function exec(str){var lastIndex,reCopy,match,i,re=this,sticky=UNSUPPORTED_Y&&re.sticky,flags=regexpFlags.call(re),source=re.source,charsAdded=0,strCopy=str;return sticky&&(-1===(flags=flags.replace("y","")).indexOf("g")&&(flags+="g"),strCopy=String(str).slice(re.lastIndex),re.lastIndex>0&&(!re.multiline||re.multiline&&"\n"!==str[re.lastIndex-1])&&(source="(?: "+source+")",strCopy=" "+strCopy,charsAdded++),reCopy=new RegExp("^(?:"+source+")",flags)),NPCG_INCLUDED&&(reCopy=new RegExp("^"+source+"$(?!\\s)",flags)),UPDATES_LAST_INDEX_WRONG&&(lastIndex=re.lastIndex),match=nativeExec.call(sticky?reCopy:re,strCopy),sticky?match?(match.input=match.input.slice(charsAdded),match[0]=match[0].slice(charsAdded),match.index=re.lastIndex,re.lastIndex+=match[0].length):re.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&match&&(re.lastIndex=re.global?match.index+match[0].length:lastIndex),NPCG_INCLUDED&&match&&match.length>1&&nativeReplace.call(match[0],reCopy,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)})),match}),module.exports=patchedExec},function(module,exports,__webpack_require__){"use strict";var fixRegExpWellKnownSymbolLogic=__webpack_require__(264),anObject=__webpack_require__(51),toLength=__webpack_require__(90),requireObjectCoercible=__webpack_require__(106),advanceStringIndex=__webpack_require__(352),regExpExec=__webpack_require__(265);fixRegExpWellKnownSymbolLogic("match",1,(function(MATCH,nativeMatch,maybeCallNative){return[function match(regexp){var O=requireObjectCoercible(this),matcher=null==regexp?void 0:regexp[MATCH];return void 0!==matcher?matcher.call(regexp,O):new RegExp(regexp)[MATCH](String(O))},function(regexp){var res=maybeCallNative(nativeMatch,regexp,this);if(res.done)return res.value;var rx=anObject(regexp),S=String(this);if(!rx.global)return regExpExec(rx,S);var fullUnicode=rx.unicode;rx.lastIndex=0;for(var result,A=[],n=0;null!==(result=regExpExec(rx,S));){var matchStr=String(result[0]);A[n]=matchStr,""===matchStr&&(rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode)),n++}return 0===n?null:A}]}))},function(module,exports,__webpack_require__){"use strict";__webpack_require__(141);var redefine=__webpack_require__(69),fails=__webpack_require__(35),wellKnownSymbol=__webpack_require__(39),regexpExec=__webpack_require__(262),createNonEnumerableProperty=__webpack_require__(78),SPECIES=wellKnownSymbol("species"),REPLACE_SUPPORTS_NAMED_GROUPS=!fails((function(){var re=/./;return re.exec=function(){var result=[];return result.groups={a:"7"},result},"7"!=="".replace(re,"$<a>")})),REPLACE_KEEPS_$0="$0"==="a".replace(/./,"$0"),REPLACE=wellKnownSymbol("replace"),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=!!/./[REPLACE]&&""===/./[REPLACE]("a","$0"),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!fails((function(){var re=/(?:)/,originalExec=re.exec;re.exec=function(){return originalExec.apply(this,arguments)};var result="ab".split(re);return 2!==result.length||"a"!==result[0]||"b"!==result[1]}));module.exports=function(KEY,length,exec,sham){var SYMBOL=wellKnownSymbol(KEY),DELEGATES_TO_SYMBOL=!fails((function(){var O={};return O[SYMBOL]=function(){return 7},7!=""[KEY](O)})),DELEGATES_TO_EXEC=DELEGATES_TO_SYMBOL&&!fails((function(){var execCalled=!1,re=/a/;return"split"===KEY&&((re={}).constructor={},re.constructor[SPECIES]=function(){return re},re.flags="",re[SYMBOL]=/./[SYMBOL]),re.exec=function(){return execCalled=!0,null},re[SYMBOL](""),!execCalled}));if(!DELEGATES_TO_SYMBOL||!DELEGATES_TO_EXEC||"replace"===KEY&&(!REPLACE_SUPPORTS_NAMED_GROUPS||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE)||"split"===KEY&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC){var nativeRegExpMethod=/./[SYMBOL],methods=exec(SYMBOL,""[KEY],(function(nativeMethod,regexp,str,arg2,forceStringMethod){return regexp.exec===regexpExec?DELEGATES_TO_SYMBOL&&!forceStringMethod?{done:!0,value:nativeRegExpMethod.call(regexp,str,arg2)}:{done:!0,value:nativeMethod.call(str,regexp,arg2)}:{done:!1}}),{REPLACE_KEEPS_$0:REPLACE_KEEPS_$0,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE}),stringMethod=methods[0],regexMethod=methods[1];redefine(String.prototype,KEY,stringMethod),redefine(RegExp.prototype,SYMBOL,2==length?function(string,arg){return regexMethod.call(string,this,arg)}:function(string){return regexMethod.call(string,this)})}sham&&createNonEnumerableProperty(RegExp.prototype[SYMBOL],"sham",!0)}},function(module,exports,__webpack_require__){var classof=__webpack_require__(89),regexpExec=__webpack_require__(262);module.exports=function(R,S){var exec=R.exec;if("function"==typeof exec){var result=exec.call(R,S);if("object"!=typeof result)throw TypeError("RegExp exec method returned something other than an Object or null");return result}if("RegExp"!==classof(R))throw TypeError("RegExp#exec called on incompatible receiver");return regexpExec.call(R,S)}},function(module,exports,__webpack_require__){(function(global){function config(name){try{if(!global.localStorage)return!1}catch(_){return!1}var val=global.localStorage[name];return null!=val&&"true"===String(val).toLowerCase()}module.exports=function deprecate(fn,msg){if(config("noDeprecation"))return fn;var warned=!1;return function deprecated(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);config("traceDeprecation")?console.trace(msg):console.warn(msg),warned=!0}return fn.apply(this,arguments)}}}).call(this,__webpack_require__(43))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={};exports.default=void 0;var _index=__webpack_require__(354);Object.keys(_index).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _index[key]}}))}));var _makeDecorator=__webpack_require__(611);Object.keys(_makeDecorator).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _makeDecorator[key]}}))}));var _types=__webpack_require__(358);Object.keys(_types).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _types[key]}}))}));var _storybookChannelMock=__webpack_require__(612);Object.keys(_storybookChannelMock).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _storybookChannelMock[key]}}))}));var _hooks=__webpack_require__(616);Object.keys(_hooks).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _hooks[key]}}))}));var _default=_index.addons;exports.default=_default},function(module,exports,__webpack_require__){var $=__webpack_require__(25),$values=__webpack_require__(349).values;$({target:"Object",stat:!0},{values:function values(O){return $values(O)}})},function(module,exports,__webpack_require__){var defer,channel,port,global=__webpack_require__(30),fails=__webpack_require__(35),classof=__webpack_require__(89),bind=__webpack_require__(166),html=__webpack_require__(339),createElement=__webpack_require__(241),IS_IOS=__webpack_require__(356),location=global.location,set=global.setImmediate,clear=global.clearImmediate,process=global.process,MessageChannel=global.MessageChannel,Dispatch=global.Dispatch,counter=0,queue={},run=function(id){if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},runner=function(id){return function(){run(id)}},listener=function(event){run(event.data)},post=function(id){global.postMessage(id+"",location.protocol+"//"+location.host)};set&&clear||(set=function setImmediate(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){("function"==typeof fn?fn:Function(fn)).apply(void 0,args)},defer(counter),counter},clear=function clearImmediate(id){delete queue[id]},"process"==classof(process)?defer=function(id){process.nextTick(runner(id))}:Dispatch&&Dispatch.now?defer=function(id){Dispatch.now(runner(id))}:MessageChannel&&!IS_IOS?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=listener,defer=bind(port.postMessage,port,1)):!global.addEventListener||"function"!=typeof postMessage||global.importScripts||fails(post)||"file:"===location.protocol?defer="onreadystatechange"in createElement("script")?function(id){html.appendChild(createElement("script")).onreadystatechange=function(){html.removeChild(this),run(id)}}:function(id){setTimeout(runner(id),0)}:(defer=post,global.addEventListener("message",listener,!1))),module.exports={set:set,clear:clear}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),$filter=__webpack_require__(108).filter,arrayMethodHasSpeciesSupport=__webpack_require__(194),arrayMethodUsesToLength=__webpack_require__(80),HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("filter"),USES_TO_LENGTH=arrayMethodUsesToLength("filter");$({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT||!USES_TO_LENGTH},{filter:function filter(callbackfn){return $filter(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),global=__webpack_require__(30),isForced=__webpack_require__(193),redefine=__webpack_require__(69),InternalMetadataModule=__webpack_require__(171),iterate=__webpack_require__(199),anInstance=__webpack_require__(198),isObject=__webpack_require__(40),fails=__webpack_require__(35),checkCorrectnessOfIteration=__webpack_require__(256),setToStringTag=__webpack_require__(120),inheritIfRequired=__webpack_require__(364);module.exports=function(CONSTRUCTOR_NAME,wrapper,common){var IS_MAP=-1!==CONSTRUCTOR_NAME.indexOf("Map"),IS_WEAK=-1!==CONSTRUCTOR_NAME.indexOf("Weak"),ADDER=IS_MAP?"set":"add",NativeConstructor=global[CONSTRUCTOR_NAME],NativePrototype=NativeConstructor&&NativeConstructor.prototype,Constructor=NativeConstructor,exported={},fixMethod=function(KEY){var nativeMethod=NativePrototype[KEY];redefine(NativePrototype,KEY,"add"==KEY?function add(value){return nativeMethod.call(this,0===value?0:value),this}:"delete"==KEY?function(key){return!(IS_WEAK&&!isObject(key))&&nativeMethod.call(this,0===key?0:key)}:"get"==KEY?function get(key){return IS_WEAK&&!isObject(key)?void 0:nativeMethod.call(this,0===key?0:key)}:"has"==KEY?function has(key){return!(IS_WEAK&&!isObject(key))&&nativeMethod.call(this,0===key?0:key)}:function set(key,value){return nativeMethod.call(this,0===key?0:key,value),this})};if(isForced(CONSTRUCTOR_NAME,"function"!=typeof NativeConstructor||!(IS_WEAK||NativePrototype.forEach&&!fails((function(){(new NativeConstructor).entries().next()})))))Constructor=common.getConstructor(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER),InternalMetadataModule.REQUIRED=!0;else if(isForced(CONSTRUCTOR_NAME,!0)){var instance=new Constructor,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails((function(){instance.has(1)})),ACCEPT_ITERABLES=checkCorrectnessOfIteration((function(iterable){new NativeConstructor(iterable)})),BUGGY_ZERO=!IS_WEAK&&fails((function(){for(var $instance=new NativeConstructor,index=5;index--;)$instance[ADDER](index,index);return!$instance.has(-0)}));ACCEPT_ITERABLES||((Constructor=wrapper((function(dummy,iterable){anInstance(dummy,Constructor,CONSTRUCTOR_NAME);var that=inheritIfRequired(new NativeConstructor,dummy,Constructor);return null!=iterable&&iterate(iterable,that[ADDER],that,IS_MAP),that}))).prototype=NativePrototype,NativePrototype.constructor=Constructor),(THROWS_ON_PRIMITIVES||BUGGY_ZERO)&&(fixMethod("delete"),fixMethod("has"),IS_MAP&&fixMethod("get")),(BUGGY_ZERO||HASNT_CHAINING)&&fixMethod(ADDER),IS_WEAK&&NativePrototype.clear&&delete NativePrototype.clear}return exported[CONSTRUCTOR_NAME]=Constructor,$({global:!0,forced:Constructor!=NativeConstructor},exported),setToStringTag(Constructor,CONSTRUCTOR_NAME),IS_WEAK||common.setStrong(Constructor,CONSTRUCTOR_NAME,IS_MAP),Constructor}},function(module,exports,__webpack_require__){var Map=__webpack_require__(124)(__webpack_require__(71),"Map");module.exports=Map},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(145),isObject=__webpack_require__(94);module.exports=function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return"[object Function]"==tag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(663),mapCacheDelete=__webpack_require__(670),mapCacheGet=__webpack_require__(672),mapCacheHas=__webpack_require__(673),mapCacheSet=__webpack_require__(674);function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(371);module.exports=function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}},function(module,exports){var objectProto=Object.prototype;module.exports=function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(71),stubFalse=__webpack_require__(686),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,isBuffer=(Buffer?Buffer.isBuffer:void 0)||stubFalse;module.exports=isBuffer}).call(this,__webpack_require__(167)(module))},function(module,exports,__webpack_require__){var baseIsTypedArray=__webpack_require__(688),baseUnary=__webpack_require__(689),nodeUtil=__webpack_require__(690),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"HooksContext",{enumerable:!0,get:function get(){return _addons.HooksContext}}),Object.defineProperty(exports,"applyHooks",{enumerable:!0,get:function get(){return _addons.applyHooks}}),Object.defineProperty(exports,"useMemo",{enumerable:!0,get:function get(){return _addons.useMemo}}),Object.defineProperty(exports,"useCallback",{enumerable:!0,get:function get(){return _addons.useCallback}}),Object.defineProperty(exports,"useRef",{enumerable:!0,get:function get(){return _addons.useRef}}),Object.defineProperty(exports,"useState",{enumerable:!0,get:function get(){return _addons.useState}}),Object.defineProperty(exports,"useReducer",{enumerable:!0,get:function get(){return _addons.useReducer}}),Object.defineProperty(exports,"useEffect",{enumerable:!0,get:function get(){return _addons.useEffect}}),Object.defineProperty(exports,"useChannel",{enumerable:!0,get:function get(){return _addons.useChannel}}),Object.defineProperty(exports,"useStoryContext",{enumerable:!0,get:function get(){return _addons.useStoryContext}}),Object.defineProperty(exports,"useParameter",{enumerable:!0,get:function get(){return _addons.useParameter}});var _addons=__webpack_require__(267)},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty,isArray=Array.isArray,hexTable=function(){for(var array=[],i=0;i<256;++i)array.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return array}(),arrayToObject=function arrayToObject(source,options){for(var obj=options&&options.plainObjects?Object.create(null):{},i=0;i<source.length;++i)void 0!==source[i]&&(obj[i]=source[i]);return obj};module.exports={arrayToObject:arrayToObject,assign:function assignSingleSource(target,source){return Object.keys(source).reduce((function(acc,key){return acc[key]=source[key],acc}),target)},combine:function combine(a,b){return[].concat(a,b)},compact:function compact(value){for(var queue=[{obj:{o:value},prop:"o"}],refs=[],i=0;i<queue.length;++i)for(var item=queue[i],obj=item.obj[item.prop],keys=Object.keys(obj),j=0;j<keys.length;++j){var key=keys[j],val=obj[key];"object"==typeof val&&null!==val&&-1===refs.indexOf(val)&&(queue.push({obj:obj,prop:key}),refs.push(val))}return function compactQueue(queue){for(;queue.length>1;){var item=queue.pop(),obj=item.obj[item.prop];if(isArray(obj)){for(var compacted=[],j=0;j<obj.length;++j)void 0!==obj[j]&&compacted.push(obj[j]);item.obj[item.prop]=compacted}}}(queue),value},decode:function(str,decoder,charset){var strWithoutPlus=str.replace(/\+/g," ");if("iso-8859-1"===charset)return strWithoutPlus.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(strWithoutPlus)}catch(e){return strWithoutPlus}},encode:function encode(str,defaultEncoder,charset){if(0===str.length)return str;var string=str;if("symbol"==typeof str?string=Symbol.prototype.toString.call(str):"string"!=typeof str&&(string=String(str)),"iso-8859-1"===charset)return escape(string).replace(/%u[0-9a-f]{4}/gi,(function($0){return"%26%23"+parseInt($0.slice(2),16)+"%3B"}));for(var out="",i=0;i<string.length;++i){var c=string.charCodeAt(i);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122?out+=string.charAt(i):c<128?out+=hexTable[c]:c<2048?out+=hexTable[192|c>>6]+hexTable[128|63&c]:c<55296||c>=57344?out+=hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|63&c]:(i+=1,c=65536+((1023&c)<<10|1023&string.charCodeAt(i)),out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|63&c])}return out},isBuffer:function isBuffer(obj){return!(!obj||"object"!=typeof obj)&&!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))},isRegExp:function isRegExp(obj){return"[object RegExp]"===Object.prototype.toString.call(obj)},maybeMap:function maybeMap(val,fn){if(isArray(val)){for(var mapped=[],i=0;i<val.length;i+=1)mapped.push(fn(val[i]));return mapped}return fn(val)},merge:function merge(target,source,options){if(!source)return target;if("object"!=typeof source){if(isArray(target))target.push(source);else{if(!target||"object"!=typeof target)return[target,source];(options&&(options.plainObjects||options.allowPrototypes)||!has.call(Object.prototype,source))&&(target[source]=!0)}return target}if(!target||"object"!=typeof target)return[target].concat(source);var mergeTarget=target;return isArray(target)&&!isArray(source)&&(mergeTarget=arrayToObject(target,options)),isArray(target)&&isArray(source)?(source.forEach((function(item,i){if(has.call(target,i)){var targetItem=target[i];targetItem&&"object"==typeof targetItem&&item&&"object"==typeof item?target[i]=merge(targetItem,item,options):target.push(item)}else target[i]=item})),target):Object.keys(source).reduce((function(acc,key){var value=source[key];return has.call(acc,key)?acc[key]=merge(acc[key],value,options):acc[key]=value,acc}),mergeTarget)}}},function(module,exports,__webpack_require__){"use strict";(function(process){var _interopRequireDefault=__webpack_require__(174);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function isElectron(mockUserAgent){if("undefined"!=typeof window&&"object"===(0,_typeof2.default)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==process&&"object"===(0,_typeof2.default)(process.versions)&&Boolean(process.versions.electron))return!0;var realUserAgent="object"===("undefined"==typeof navigator?"undefined":(0,_typeof2.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,userAgent=mockUserAgent||realUserAgent;if(userAgent&&userAgent.indexOf("Electron")>=0)return!0;return!1};var _typeof2=_interopRequireDefault(__webpack_require__(210))}).call(this,__webpack_require__(58))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var _lib_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(24),_classes_vector3__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(411);__webpack_require__.d(__webpack_exports__,"b",(function(){return _classes_vector3__WEBPACK_IMPORTED_MODULE_1__.a}));var _classes_matrix4__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(412);__webpack_require__.d(__webpack_exports__,"a",(function(){return _classes_matrix4__WEBPACK_IMPORTED_MODULE_2__.a})),__webpack_require__.d(__webpack_exports__,"d",(function(){return _lib_common__WEBPACK_IMPORTED_MODULE_0__.c})),__webpack_require__.d(__webpack_exports__,"c",(function(){return _lib_common__WEBPACK_IMPORTED_MODULE_0__.a})),__webpack_require__.d(__webpack_exports__,"e",(function(){return _lib_common__WEBPACK_IMPORTED_MODULE_0__.f}));var globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global&&global};(globals.global||globals.self||globals.window).mathgl={config:_lib_common__WEBPACK_IMPORTED_MODULE_0__.b}}).call(this,__webpack_require__(43))},function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"storiesOf",{enumerable:!0,get:function get(){return _preview.storiesOf}}),Object.defineProperty(exports,"setAddon",{enumerable:!0,get:function get(){return _preview.setAddon}}),Object.defineProperty(exports,"addDecorator",{enumerable:!0,get:function get(){return _preview.addDecorator}}),Object.defineProperty(exports,"DecoratorFn",{enumerable:!0,get:function get(){return _preview.DecoratorFn}}),Object.defineProperty(exports,"addParameters",{enumerable:!0,get:function get(){return _preview.addParameters}}),Object.defineProperty(exports,"configure",{enumerable:!0,get:function get(){return _preview.configure}}),Object.defineProperty(exports,"getStorybook",{enumerable:!0,get:function get(){return _preview.getStorybook}}),Object.defineProperty(exports,"raw",{enumerable:!0,get:function get(){return _preview.raw}}),Object.defineProperty(exports,"forceReRender",{enumerable:!0,get:function get(){return _preview.forceReRender}});var _preview=__webpack_require__(592);module&&module.hot&&module.hot.decline&&module.hot.decline()}).call(this,__webpack_require__(167)(module))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return interactive_map_InteractiveMap})),__webpack_require__.d(__webpack_exports__,"InteractiveMap",(function(){return interactive_map_InteractiveMap})),__webpack_require__.d(__webpack_exports__,"StaticMap",(function(){return static_map_StaticMap})),__webpack_require__.d(__webpack_exports__,"Source",(function(){return source_Source})),__webpack_require__.d(__webpack_exports__,"Layer",(function(){return layer_Layer})),__webpack_require__.d(__webpack_exports__,"BaseControl",(function(){return base_control_BaseControl})),__webpack_require__.d(__webpack_exports__,"Marker",(function(){return marker_Marker})),__webpack_require__.d(__webpack_exports__,"Popup",(function(){return popup_Popup})),__webpack_require__.d(__webpack_exports__,"FullscreenControl",(function(){return fullscreen_control_FullscreenControl})),__webpack_require__.d(__webpack_exports__,"GeolocateControl",(function(){return geolocate_control_GeolocateControl})),__webpack_require__.d(__webpack_exports__,"NavigationControl",(function(){return navigation_control_NavigationControl})),__webpack_require__.d(__webpack_exports__,"ScaleControl",(function(){return scale_control_ScaleControl})),__webpack_require__.d(__webpack_exports__,"CanvasOverlay",(function(){return canvas_overlay_CanvasOverlay})),__webpack_require__.d(__webpack_exports__,"HTMLOverlay",(function(){return html_overlay_HTMLOverlay})),__webpack_require__.d(__webpack_exports__,"SVGOverlay",(function(){return svg_overlay_SVGOverlay})),__webpack_require__.d(__webpack_exports__,"TRANSITION_EVENTS",(function(){return TRANSITION_EVENTS})),__webpack_require__.d(__webpack_exports__,"TransitionInterpolator",(function(){return transition_interpolator_TransitionInterpolator})),__webpack_require__.d(__webpack_exports__,"LinearInterpolator",(function(){return linear_interpolator_LinearInterpolator})),__webpack_require__.d(__webpack_exports__,"FlyToInterpolator",(function(){return viewport_fly_to_interpolator_ViewportFlyToInterpolator})),__webpack_require__.d(__webpack_exports__,"MapController",(function(){return map_controller_MapController})),__webpack_require__.d(__webpack_exports__,"WebMercatorViewport",(function(){return esm.a})),__webpack_require__.d(__webpack_exports__,"setRTLTextPlugin",(function(){return set_rtl_text_plugin})),__webpack_require__.d(__webpack_exports__,"_MapContext",(function(){return map_context}));var classCallCheck=__webpack_require__(2),assertThisInitialized=__webpack_require__(6),createClass=__webpack_require__(1),inherits=__webpack_require__(8),possibleConstructorReturn=__webpack_require__(7),getPrototypeOf=__webpack_require__(3),defineProperty=__webpack_require__(0),react=__webpack_require__(5),prop_types=__webpack_require__(4),prop_types_default=__webpack_require__.n(prop_types);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _createForOfIteratorHelper(o){if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(o=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))){var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var it,err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var refProps=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function normalizeStyle(style){if(!style)return null;if("string"==typeof style)return style;style.toJS&&(style=style.toJS());var _step,layerIndex={},_iterator=_createForOfIteratorHelper(style.layers);try{for(_iterator.s();!(_step=_iterator.n()).done;){var layer=_step.value;layerIndex[layer.id]=layer}}catch(err){_iterator.e(err)}finally{_iterator.f()}var layers=style.layers.map((function(layer){var layerRef=layerIndex[layer.ref],normalizedLayer=null;if("interactive"in layer&&delete(normalizedLayer=_objectSpread({},layer)).interactive,layerRef){delete(normalizedLayer=normalizedLayer||_objectSpread({},layer)).ref;var _step2,_iterator2=_createForOfIteratorHelper(refProps);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var propName=_step2.value;propName in layerRef&&(normalizedLayer[propName]=layerRef[propName])}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}return normalizedLayer||layer}));return _objectSpread(_objectSpread({},style),{},{layers:layers})}var esm=__webpack_require__(29),index_esm=__webpack_require__(418),mapbox=__webpack_require__(224),mapbox_gl=__webpack_require__(403),mapbox_gl_default=__webpack_require__.n(mapbox_gl),slicedToArray=__webpack_require__(11);function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)}function equals(a,b){if(a===b)return!0;if(isArray(a)&&isArray(b)){if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i)if(!equals(a[i],b[i]))return!1;return!0}return Math.abs(a-b)<=1e-7}function clamp(value,min,max){return Math.max(min,Math.min(max,value))}function lerp(a,b,t){return isArray(a)?a.map((function(ai,i){return lerp(ai,b[i],t)})):t*b+(1-t)*a}function assert(condition,message){if(!condition)throw new Error(message||"react-map-gl: assertion failed.")}function transition_interpolator_createForOfIteratorHelper(o){if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(o=function transition_interpolator_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return transition_interpolator_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return transition_interpolator_arrayLikeToArray(o,minLen)}(o))){var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var it,err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function transition_interpolator_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var transition_interpolator_TransitionInterpolator=function(){function TransitionInterpolator(){Object(classCallCheck.a)(this,TransitionInterpolator),Object(defineProperty.a)(this,"propNames",[])}return Object(createClass.a)(TransitionInterpolator,[{key:"arePropsEqual",value:function arePropsEqual(currentProps,nextProps){var _step,_iterator=transition_interpolator_createForOfIteratorHelper(this.propNames||[]);try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;if(!equals(currentProps[key],nextProps[key]))return!1}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!0}},{key:"initializeProps",value:function initializeProps(startProps,endProps){return{start:startProps,end:endProps}}},{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){assert(!1,"interpolateProps is not implemented")}},{key:"getDuration",value:function getDuration(startProps,endProps){return endProps.transitionDuration}}]),TransitionInterpolator}(),WRAPPED_ANGULAR_PROPS={longitude:1,bearing:1};function isValid(prop){return Number.isFinite(prop)||Array.isArray(prop)}function getEndValueByShortestPath(propName,startValue,endValue){return function isWrappedAngularProp(propName){return propName in WRAPPED_ANGULAR_PROPS}(propName)&&Math.abs(endValue-startValue)>180&&(endValue=endValue<0?endValue+360:endValue-360),endValue}function viewport_fly_to_interpolator_createForOfIteratorHelper(o){if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(o=function viewport_fly_to_interpolator_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return viewport_fly_to_interpolator_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return viewport_fly_to_interpolator_arrayLikeToArray(o,minLen)}(o))){var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var it,err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function viewport_fly_to_interpolator_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}var VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom","bearing","pitch"],REQUIRED_PROPS=["latitude","longitude","zoom","width","height"],LINEARLY_INTERPOLATED_PROPS=["bearing","pitch"],DEFAULT_OPTS={speed:1.2,curve:1.414},viewport_fly_to_interpolator_ViewportFlyToInterpolator=function(_TransitionInterpolat){Object(inherits.a)(ViewportFlyToInterpolator,_TransitionInterpolat);var _super=_createSuper(ViewportFlyToInterpolator);function ViewportFlyToInterpolator(){var _this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(classCallCheck.a)(this,ViewportFlyToInterpolator),_this=_super.call(this),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"speed",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"propNames",VIEWPORT_TRANSITION_PROPS),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"props",void 0),_this.props=Object.assign({},DEFAULT_OPTS,props),_this}return Object(createClass.a)(ViewportFlyToInterpolator,[{key:"initializeProps",value:function initializeProps(startProps,endProps){var _step,startViewportProps={},endViewportProps={},_iterator=viewport_fly_to_interpolator_createForOfIteratorHelper(REQUIRED_PROPS);try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value,startValue=startProps[key],endValue=endProps[key];assert(isValid(startValue)&&isValid(endValue),"".concat(key," must be supplied for transition")),startViewportProps[key]=startValue,endViewportProps[key]=getEndValueByShortestPath(key,startValue,endValue)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var _step2,_iterator2=viewport_fly_to_interpolator_createForOfIteratorHelper(LINEARLY_INTERPOLATED_PROPS);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _key=_step2.value,_startValue=startProps[_key]||0,_endValue=endProps[_key]||0;startViewportProps[_key]=_startValue,endViewportProps[_key]=getEndValueByShortestPath(_key,_startValue,_endValue)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return{start:startViewportProps,end:endViewportProps}}},{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){var _step3,viewport=Object(esm.d)(startProps,endProps,t,this.props),_iterator3=viewport_fly_to_interpolator_createForOfIteratorHelper(LINEARLY_INTERPOLATED_PROPS);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var key=_step3.value;viewport[key]=lerp(startProps[key],endProps[key],t)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return viewport}},{key:"getDuration",value:function getDuration(startProps,endProps){var transitionDuration=endProps.transitionDuration;return"auto"===transitionDuration&&(transitionDuration=Object(esm.g)(startProps,endProps,this.props)),transitionDuration}}]),ViewportFlyToInterpolator}(transition_interpolator_TransitionInterpolator);function linear_interpolator_createForOfIteratorHelper(o){if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(o=function linear_interpolator_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return linear_interpolator_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return linear_interpolator_arrayLikeToArray(o,minLen)}(o))){var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var it,err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function linear_interpolator_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function linear_interpolator_createSuper(Derived){var hasNativeReflectConstruct=function linear_interpolator_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}var linear_interpolator_VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom","bearing","pitch"],linear_interpolator_LinearInterpolator=function(_TransitionInterpolat){Object(inherits.a)(LinearInterpolator,_TransitionInterpolat);var _super=linear_interpolator_createSuper(LinearInterpolator);function LinearInterpolator(){var _this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(classCallCheck.a)(this,LinearInterpolator),_this=_super.call(this),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"around",void 0),Array.isArray(opts)&&(opts={transitionProps:opts}),_this.propNames=opts.transitionProps||linear_interpolator_VIEWPORT_TRANSITION_PROPS,opts.around&&(_this.around=opts.around),_this}return Object(createClass.a)(LinearInterpolator,[{key:"initializeProps",value:function initializeProps(startProps,endProps){var startViewportProps={},endViewportProps={};if(this.around){startViewportProps.around=this.around;var aroundLngLat=new esm.a(startProps).unproject(this.around);Object.assign(endViewportProps,endProps,{around:new esm.a(endProps).project(aroundLngLat),aroundLngLat:aroundLngLat})}var _step,_iterator=linear_interpolator_createForOfIteratorHelper(this.propNames);try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value,startValue=startProps[key],endValue=endProps[key];assert(isValid(startValue)&&isValid(endValue),"".concat(key," must be supplied for transition")),startViewportProps[key]=startValue,endViewportProps[key]=getEndValueByShortestPath(key,startValue,endValue)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return{start:startViewportProps,end:endViewportProps}}},{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){var _step2,viewport={},_iterator2=linear_interpolator_createForOfIteratorHelper(this.propNames);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;viewport[key]=lerp(startProps[key],endProps[key],t)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}if(endProps.around){var _WebMercatorViewport$=new esm.a(Object.assign({},endProps,viewport)).getMapCenterByLngLatPosition({lngLat:endProps.aroundLngLat,pos:lerp(startProps.around,endProps.around,t)}),_WebMercatorViewport$2=Object(slicedToArray.a)(_WebMercatorViewport$,2),longitude=_WebMercatorViewport$2[0],latitude=_WebMercatorViewport$2[1];viewport.longitude=longitude,viewport.latitude=latitude}return viewport}}]),LinearInterpolator}(transition_interpolator_TransitionInterpolator),MAPBOX_LIMITS={minZoom:0,maxZoom:24,minPitch:0,maxPitch:60},DEFAULT_STATE_pitch=0,DEFAULT_STATE_bearing=0,DEFAULT_STATE_altitude=1.5,map_state_MapState=function(){function MapState(_ref){var width=_ref.width,height=_ref.height,latitude=_ref.latitude,longitude=_ref.longitude,zoom=_ref.zoom,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?DEFAULT_STATE_bearing:_ref$bearing,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?DEFAULT_STATE_pitch:_ref$pitch,_ref$altitude=_ref.altitude,altitude=void 0===_ref$altitude?DEFAULT_STATE_altitude:_ref$altitude,_ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?MAPBOX_LIMITS.maxZoom:_ref$maxZoom,_ref$minZoom=_ref.minZoom,minZoom=void 0===_ref$minZoom?MAPBOX_LIMITS.minZoom:_ref$minZoom,_ref$maxPitch=_ref.maxPitch,maxPitch=void 0===_ref$maxPitch?MAPBOX_LIMITS.maxPitch:_ref$maxPitch,_ref$minPitch=_ref.minPitch,minPitch=void 0===_ref$minPitch?MAPBOX_LIMITS.minPitch:_ref$minPitch,transitionDuration=_ref.transitionDuration,transitionEasing=_ref.transitionEasing,transitionInterpolator=_ref.transitionInterpolator,transitionInterruption=_ref.transitionInterruption,startPanLngLat=_ref.startPanLngLat,startZoomLngLat=_ref.startZoomLngLat,startBearing=_ref.startBearing,startPitch=_ref.startPitch,startZoom=_ref.startZoom;Object(classCallCheck.a)(this,MapState),Object(defineProperty.a)(this,"_viewportProps",void 0),Object(defineProperty.a)(this,"_interactiveState",void 0),assert(Number.isFinite(width),"`width` must be supplied"),assert(Number.isFinite(height),"`height` must be supplied"),assert(Number.isFinite(longitude),"`longitude` must be supplied"),assert(Number.isFinite(latitude),"`latitude` must be supplied"),assert(Number.isFinite(zoom),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:width,height:height,latitude:latitude,longitude:longitude,zoom:zoom,bearing:bearing,pitch:pitch,altitude:altitude,maxZoom:maxZoom,minZoom:minZoom,maxPitch:maxPitch,minPitch:minPitch,transitionDuration:transitionDuration,transitionEasing:transitionEasing,transitionInterpolator:transitionInterpolator,transitionInterruption:transitionInterruption}),this._interactiveState={startPanLngLat:startPanLngLat,startZoomLngLat:startZoomLngLat,startBearing:startBearing,startPitch:startPitch,startZoom:startZoom}}return Object(createClass.a)(MapState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(_ref2){var pos=_ref2.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(pos)})}},{key:"pan",value:function pan(_ref3){var pos=_ref3.pos,startPos=_ref3.startPos,startPanLngLat=this._interactiveState.startPanLngLat||this._unproject(startPos);if(!startPanLngLat)return this;var _this$_calculateNewLn=this._calculateNewLngLat({startPanLngLat:startPanLngLat,pos:pos}),_this$_calculateNewLn2=Object(slicedToArray.a)(_this$_calculateNewLn,2),longitude=_this$_calculateNewLn2[0],latitude=_this$_calculateNewLn2[1];return this._getUpdatedMapState({longitude:longitude,latitude:latitude})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function rotateStart(_ref4){_ref4.pos;return this._getUpdatedMapState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function rotate(_ref5){var _ref5$deltaScaleX=_ref5.deltaScaleX,deltaScaleX=void 0===_ref5$deltaScaleX?0:_ref5$deltaScaleX,_ref5$deltaScaleY=_ref5.deltaScaleY,deltaScaleY=void 0===_ref5$deltaScaleY?0:_ref5$deltaScaleY,_this$_interactiveSta=this._interactiveState,startBearing=_this$_interactiveSta.startBearing,startPitch=_this$_interactiveSta.startPitch;if(!Number.isFinite(startBearing)||!Number.isFinite(startPitch))return this;var _this$_calculateNewPi=this._calculateNewPitchAndBearing({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY,startBearing:startBearing||0,startPitch:startPitch||0}),pitch=_this$_calculateNewPi.pitch,bearing=_this$_calculateNewPi.bearing;return this._getUpdatedMapState({bearing:bearing,pitch:pitch})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function zoomStart(_ref6){var pos=_ref6.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(pos),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(_ref7){var pos=_ref7.pos,startPos=_ref7.startPos,scale=_ref7.scale;assert(scale>0,"`scale` must be a positive number");var _this$_interactiveSta2=this._interactiveState,startZoom=_this$_interactiveSta2.startZoom,startZoomLngLat=_this$_interactiveSta2.startZoomLngLat;Number.isFinite(startZoom)||(startZoom=this._viewportProps.zoom,startZoomLngLat=this._unproject(startPos)||this._unproject(pos)),assert(startZoomLngLat,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var zoom=this._calculateNewZoom({scale:scale,startZoom:startZoom||0}),_zoomedViewport$getMa=new esm.a(Object.assign({},this._viewportProps,{zoom:zoom})).getMapCenterByLngLatPosition({lngLat:startZoomLngLat,pos:pos}),_zoomedViewport$getMa2=Object(slicedToArray.a)(_zoomedViewport$getMa,2),longitude=_zoomedViewport$getMa2[0],latitude=_zoomedViewport$getMa2[1];return this._getUpdatedMapState({zoom:zoom,longitude:longitude,latitude:latitude})}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function _getUpdatedMapState(newProps){return new MapState(Object.assign({},this._viewportProps,this._interactiveState,newProps))}},{key:"_applyConstraints",value:function _applyConstraints(props){var maxZoom=props.maxZoom,minZoom=props.minZoom,zoom=props.zoom;props.zoom=clamp(zoom,minZoom,maxZoom);var maxPitch=props.maxPitch,minPitch=props.minPitch,pitch=props.pitch;return props.pitch=clamp(pitch,minPitch,maxPitch),Object.assign(props,Object(esm.l)(props)),props}},{key:"_unproject",value:function _unproject(pos){var viewport=new esm.a(this._viewportProps);return pos&&viewport.unproject(pos)}},{key:"_calculateNewLngLat",value:function _calculateNewLngLat(_ref8){var startPanLngLat=_ref8.startPanLngLat,pos=_ref8.pos;return new esm.a(this._viewportProps).getMapCenterByLngLatPosition({lngLat:startPanLngLat,pos:pos})}},{key:"_calculateNewZoom",value:function _calculateNewZoom(_ref9){var scale=_ref9.scale,startZoom=_ref9.startZoom,_this$_viewportProps=this._viewportProps,maxZoom=_this$_viewportProps.maxZoom,minZoom=_this$_viewportProps.minZoom;return clamp(startZoom+Math.log2(scale),minZoom,maxZoom)}},{key:"_calculateNewPitchAndBearing",value:function _calculateNewPitchAndBearing(_ref10){var deltaScaleX=_ref10.deltaScaleX,deltaScaleY=_ref10.deltaScaleY,startBearing=_ref10.startBearing,startPitch=_ref10.startPitch;deltaScaleY=clamp(deltaScaleY,-1,1);var _this$_viewportProps2=this._viewportProps,minPitch=_this$_viewportProps2.minPitch,maxPitch=_this$_viewportProps2.maxPitch,pitch=startPitch;return deltaScaleY>0?pitch=startPitch+deltaScaleY*(maxPitch-startPitch):deltaScaleY<0&&(pitch=startPitch-deltaScaleY*(minPitch-startPitch)),{pitch:pitch,bearing:startBearing+180*deltaScaleX}}}]),MapState}();function decapitalize(s){return s[0].toLowerCase()+s.slice(1)}var map_context=Object(react.createContext)({viewport:null,map:null,mapContainer:null,onViewportChange:null,onViewStateChange:null,eventManager:null,isDragging:!1});function static_map_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function static_map_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?static_map_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):static_map_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function static_map_createSuper(Derived){var hasNativeReflectConstruct=function static_map_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}var NO_TOKEN_WARNING="A valid API access token is required to use Mapbox data";var CONTAINER_STYLE={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},propTypes=Object.assign({},mapbox.a.propTypes,{width:prop_types_default.a.oneOfType([prop_types_default.a.number,prop_types_default.a.string]),height:prop_types_default.a.oneOfType([prop_types_default.a.number,prop_types_default.a.string]),onResize:prop_types_default.a.func,preventStyleDiffing:prop_types_default.a.bool,disableTokenWarning:prop_types_default.a.bool,visible:prop_types_default.a.bool,className:prop_types_default.a.string,style:prop_types_default.a.object,visibilityConstraints:prop_types_default.a.object}),defaultProps=Object.assign({},mapbox.a.defaultProps,{preventStyleDiffing:!1,disableTokenWarning:!1,visible:!0,onResize:function noop(){},className:"",style:null,visibilityConstraints:MAPBOX_LIMITS}),static_map_StaticMap=function(_PureComponent){Object(inherits.a)(StaticMap,_PureComponent);var _super=static_map_createSuper(StaticMap);function StaticMap(){var _this;Object(classCallCheck.a)(this,StaticMap);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{accessTokenInvalid:!1}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_mapbox",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_map",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_mapboxMapRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_mapContainerRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_queryParams",{}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_width",0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_height",0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"getMap",(function(){return _this._map})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"queryRenderedFeatures",(function(geometry){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _this._map.queryRenderedFeatures(geometry,options)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_mapboxMapError",(function(evt){401!==(evt.error&&evt.error.status||evt.status)||_this.state.accessTokenInvalid||(console.error(NO_TOKEN_WARNING),_this.setState({accessTokenInvalid:!0})),_this.props.onError(evt)})),_this}return Object(createClass.a)(StaticMap,[{key:"componentDidMount",value:function componentDidMount(){if(StaticMap.supported()){var mapStyle=this.props.mapStyle;this._mapbox=new mapbox.a(Object.assign({},this.props,{mapboxgl:mapbox_gl_default.a,width:this._width,height:this._height,container:this._mapboxMapRef.current,onError:this._mapboxMapError,mapStyle:normalizeStyle(mapStyle)})),this._map=this._mapbox.getMap()}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){this._mapbox&&(this._updateMapStyle(prevProps,this.props),this._updateMapProps(this.props))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._mapbox&&(this._mapbox.finalize(),this._mapbox=null,this._map=null)}},{key:"_updateMapSize",value:function _updateMapSize(width,height){this._width===width&&this._height===height||(this._width=width,this._height=height,this._updateMapProps(this.props))}},{key:"_updateMapStyle",value:function _updateMapStyle(oldProps,newProps){var mapStyle=newProps.mapStyle;mapStyle!==oldProps.mapStyle&&mapStyle&&this._map.setStyle(normalizeStyle(mapStyle),{diff:!this.props.preventStyleDiffing})}},{key:"_updateMapProps",value:function _updateMapProps(props){this._mapbox&&this._mapbox.setProps(Object.assign({},props,{width:this._width,height:this._height}))}},{key:"_renderNoTokenWarning",value:function _renderNoTokenWarning(){if(this.state.accessTokenInvalid&&!this.props.disableTokenWarning){return react.createElement("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},react.createElement("h3",{key:"header"},"NO_TOKEN_WARNING"),react.createElement("div",{key:"text"},"For information on setting up your basemap, read"),react.createElement("a",{key:"link",href:"https://visgl.github.io/react-map-gl/docs/get-started/mapbox-tokens"},"Note on Map Tokens"))}return null}},{key:"_renderOverlays",value:function _renderOverlays(dimensions){var _this2=this,_dimensions$width=dimensions.width,width=void 0===_dimensions$width?Number(this.props.width):_dimensions$width,_dimensions$height=dimensions.height,height=void 0===_dimensions$height?Number(this.props.height):_dimensions$height;return this._updateMapSize(width,height),react.createElement(map_context.Consumer,null,(function(interactiveContext){var context=static_map_objectSpread(static_map_objectSpread({},interactiveContext),{},{viewport:new esm.a(static_map_objectSpread(static_map_objectSpread(static_map_objectSpread({},_this2.props),_this2.props.viewState),{},{width:width,height:height})),map:_this2._map,mapContainer:interactiveContext.mapContainer||_this2._mapContainerRef.current});return react.createElement(map_context.Provider,{value:context},react.createElement("div",{key:"map-overlays",className:"overlays",style:CONTAINER_STYLE},_this2.props.children))}))}},{key:"render",value:function render(){var _this$props=this.props,className=_this$props.className,width=_this$props.width,height=_this$props.height,style=_this$props.style,visibilityConstraints=_this$props.visibilityConstraints,mapContainerStyle=Object.assign({position:"relative"},style,{width:width,height:height}),visible=this.props.visible&&function checkVisibilityConstraints(props){var constraints=arguments.length>1&&void 0!==arguments[1]?arguments[1]:MAPBOX_LIMITS;for(var constraintName in constraints){var type=constraintName.slice(0,3),propName=decapitalize(constraintName.slice(3));if("min"===type&&props[propName]<constraints[constraintName])return!1;if("max"===type&&props[propName]>constraints[constraintName])return!1}return!0}(this.props.viewState||this.props,visibilityConstraints),mapStyle=Object.assign({},CONTAINER_STYLE,{visibility:visible?"inherit":"hidden"});return react.createElement("div",{key:"map-container",style:mapContainerStyle,ref:this._mapContainerRef},react.createElement("div",{key:"map-mapbox",ref:this._mapboxMapRef,style:mapStyle,className:className}),react.createElement(index_esm.a,{key:"autosizer",disableWidth:Number.isFinite(width),disableHeight:Number.isFinite(height),onResize:this.props.onResize},this._renderOverlays.bind(this)),this._renderNoTokenWarning())}}],[{key:"supported",value:function supported(){return mapbox_gl_default.a&&mapbox_gl_default.a.supported()}}]),StaticMap}(react.PureComponent);Object(defineProperty.a)(static_map_StaticMap,"propTypes",propTypes),Object(defineProperty.a)(static_map_StaticMap,"defaultProps",defaultProps);var transition_manager_noop=function noop(){};var TRANSITION_EVENTS={BREAK:1,SNAP_TO_END:2,IGNORE:3,UPDATE:4},DEFAULT_PROPS={transitionDuration:0,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new linear_interpolator_LinearInterpolator,transitionInterruption:TRANSITION_EVENTS.BREAK,onTransitionStart:transition_manager_noop,onTransitionInterrupt:transition_manager_noop,onTransitionEnd:transition_manager_noop,onViewportChange:transition_manager_noop,onStateChange:transition_manager_noop},transition_manager_TransitionManager=function(){function TransitionManager(props,getTime){var _this=this;Object(classCallCheck.a)(this,TransitionManager),Object(defineProperty.a)(this,"props",void 0),Object(defineProperty.a)(this,"state",void 0),Object(defineProperty.a)(this,"time",void 0),Object(defineProperty.a)(this,"_animationFrame",null),Object(defineProperty.a)(this,"_onTransitionFrame",(function(){_this._animationFrame=requestAnimationFrame(_this._onTransitionFrame),_this._updateViewport()})),props&&(this.props=props),this.time=getTime||Date.now}return Object(createClass.a)(TransitionManager,[{key:"getViewportInTransition",value:function getViewportInTransition(){return this._animationFrame?this.state.propsInTransition:null}},{key:"processViewportChange",value:function processViewportChange(nextProps){var currentProps=this.props;if(this.props=nextProps,this._shouldIgnoreViewportChange(currentProps,nextProps))return!1;if(this._isTransitionEnabled(nextProps)){var startProps=Object.assign({},currentProps),endProps=Object.assign({},nextProps);if(this._isTransitionInProgress()&&(currentProps.onTransitionInterrupt(),this.state.interruption===TRANSITION_EVENTS.SNAP_TO_END?Object.assign(startProps,this.state.endProps):Object.assign(startProps,this.state.propsInTransition),this.state.interruption===TRANSITION_EVENTS.UPDATE)){var currentTime=this.time(),x0=(currentTime-this.state.startTime)/this.state.duration;endProps.transitionDuration=this.state.duration-(currentTime-this.state.startTime),endProps.transitionEasing=function cropEasingFunction(easing,x0){var y0=easing(x0);return function(t){return 1/(1-y0)*(easing(t*(1-x0)+x0)-y0)}}(this.state.easing,x0),endProps.transitionInterpolator=startProps.transitionInterpolator}return endProps.onTransitionStart(),this._triggerTransition(startProps,endProps),!0}return this._isTransitionInProgress()&&(currentProps.onTransitionInterrupt(),this._endTransition()),!1}},{key:"_isTransitionInProgress",value:function _isTransitionInProgress(){return Boolean(this._animationFrame)}},{key:"_isTransitionEnabled",value:function _isTransitionEnabled(props){var transitionDuration=props.transitionDuration,transitionInterpolator=props.transitionInterpolator;return(transitionDuration>0||"auto"===transitionDuration)&&Boolean(transitionInterpolator)}},{key:"_isUpdateDueToCurrentTransition",value:function _isUpdateDueToCurrentTransition(props){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(props,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function _shouldIgnoreViewportChange(currentProps,nextProps){return!currentProps||(this._isTransitionInProgress()?this.state.interruption===TRANSITION_EVENTS.IGNORE||this._isUpdateDueToCurrentTransition(nextProps):!this._isTransitionEnabled(nextProps)||nextProps.transitionInterpolator.arePropsEqual(currentProps,nextProps))}},{key:"_triggerTransition",value:function _triggerTransition(startProps,endProps){assert(this._isTransitionEnabled(endProps)),this._animationFrame&&cancelAnimationFrame(this._animationFrame);var transitionInterpolator=endProps.transitionInterpolator,duration=transitionInterpolator.getDuration?transitionInterpolator.getDuration(startProps,endProps):endProps.transitionDuration;if(0!==duration){var initialProps=endProps.transitionInterpolator.initializeProps(startProps,endProps),interactionState={inTransition:!0,isZooming:startProps.zoom!==endProps.zoom,isPanning:startProps.longitude!==endProps.longitude||startProps.latitude!==endProps.latitude,isRotating:startProps.bearing!==endProps.bearing||startProps.pitch!==endProps.pitch};this.state={duration:duration,easing:endProps.transitionEasing,interpolator:endProps.transitionInterpolator,interruption:endProps.transitionInterruption,startTime:this.time(),startProps:initialProps.start,endProps:initialProps.end,animation:null,propsInTransition:{},interactionState:interactionState},this._onTransitionFrame(),this.props.onStateChange(interactionState)}}},{key:"_endTransition",value:function _endTransition(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this.props.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function _updateViewport(){var currentTime=this.time(),_this$state=this.state,startTime=_this$state.startTime,duration=_this$state.duration,easing=_this$state.easing,interpolator=_this$state.interpolator,startProps=_this$state.startProps,endProps=_this$state.endProps,shouldEnd=!1,t=(currentTime-startTime)/duration;t>=1&&(t=1,shouldEnd=!0),t=easing(t);var viewport=interpolator.interpolateProps(startProps,endProps,t),mapState=new map_state_MapState(Object.assign({},this.props,viewport));this.state.propsInTransition=mapState.getViewportProps(),this.props.onViewportChange(this.state.propsInTransition,this.state.interactionState,this.props),shouldEnd&&(this._endTransition(),this.props.onTransitionEnd())}}]),TransitionManager}();Object(defineProperty.a)(transition_manager_TransitionManager,"defaultProps",DEFAULT_PROPS);var dist_esm=__webpack_require__(221);var NO_TRANSITION_PROPS={transitionDuration:0},LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new linear_interpolator_LinearInterpolator,transitionInterruption:TRANSITION_EVENTS.BREAK},EVENT_TYPES_WHEEL=["wheel"],EVENT_TYPES_PAN=["panstart","panmove","panend"],EVENT_TYPES_PINCH=["pinchstart","pinchmove","pinchend","pinchcancel"],EVENT_TYPES_DOUBLE_TAP=["doubletap"],EVENT_TYPES_KEYBOARD=["keydown"],map_controller_MapController=function(){function MapController(){var _this=this;Object(classCallCheck.a)(this,MapController),Object(defineProperty.a)(this,"events",[]),Object(defineProperty.a)(this,"mapState",void 0),Object(defineProperty.a)(this,"onViewportChange",void 0),Object(defineProperty.a)(this,"onStateChange",void 0),Object(defineProperty.a)(this,"mapStateProps",void 0),Object(defineProperty.a)(this,"eventManager",void 0),Object(defineProperty.a)(this,"scrollZoom",!0),Object(defineProperty.a)(this,"dragPan",!0),Object(defineProperty.a)(this,"dragRotate",!0),Object(defineProperty.a)(this,"doubleClickZoom",!0),Object(defineProperty.a)(this,"touchZoom",!0),Object(defineProperty.a)(this,"touchRotate",!1),Object(defineProperty.a)(this,"keyboard",!0),Object(defineProperty.a)(this,"_state",{isDragging:!1}),Object(defineProperty.a)(this,"_events",{}),Object(defineProperty.a)(this,"_transitionManager",new transition_manager_TransitionManager),Object(defineProperty.a)(this,"setState",(function(newState){Object.assign(_this._state,newState),_this.onStateChange&&_this.onStateChange(_this._state)})),this.handleEvent=this.handleEvent.bind(this),this._onWheelEnd=function debounce(func,delay){var _this,_arguments,timeout,executeNow=function executeNow(){return timeout=null,func.apply(_this,_arguments)};return function(){_this=this,_arguments=arguments,timeout&&clearTimeout(timeout),timeout=setTimeout(executeNow,delay)}}(this._onWheelEnd,100)}return Object(createClass.a)(MapController,[{key:"handleEvent",value:function handleEvent(event){switch(this.mapState=this.getMapState(),event.type){case"panstart":return this._onPanStart(event);case"panmove":return this._onPan(event);case"panend":return this._onPanEnd(event);case"pinchstart":return this._onPinchStart(event);case"pinchmove":return this._onPinch(event);case"pinchcancel":case"pinchend":return this._onPinchEnd(event);case"doubletap":return this._onDoubleTap(event);case"wheel":return this._onWheel(event);case"keydown":return this._onKeyDown(event);default:return!1}}},{key:"getCenter",value:function getCenter(event){var _event$offsetCenter=event.offsetCenter;return[_event$offsetCenter.x,_event$offsetCenter.y]}},{key:"isFunctionKeyPressed",value:function isFunctionKeyPressed(event){var srcEvent=event.srcEvent;return Boolean(srcEvent.metaKey||srcEvent.altKey||srcEvent.ctrlKey||srcEvent.shiftKey)}},{key:"updateViewport",value:function updateViewport(newMapState){var extraProps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},extraState=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},oldViewport=this.mapState?this.mapState.getViewportProps():{},newViewport=Object.assign({},newMapState.getViewportProps(),extraProps),viewStateChanged=Object.keys(newViewport).some((function(key){return oldViewport[key]!==newViewport[key]}));viewStateChanged&&this.onViewportChange(newViewport,extraState,oldViewport),this.setState(Object.assign({},newMapState.getInteractiveState(),extraState))}},{key:"getMapState",value:function getMapState(overrides){return new map_state_MapState(Object.assign({},this.mapStateProps,this._state,overrides))}},{key:"setOptions",value:function setOptions(options){var onViewportChange=options.onViewportChange,onStateChange=options.onStateChange,_options$eventManager=options.eventManager,eventManager=void 0===_options$eventManager?this.eventManager:_options$eventManager,_options$isInteractiv=options.isInteractive,isInteractive=void 0===_options$isInteractiv||_options$isInteractiv,_options$scrollZoom=options.scrollZoom,scrollZoom=void 0===_options$scrollZoom?this.scrollZoom:_options$scrollZoom,_options$dragPan=options.dragPan,dragPan=void 0===_options$dragPan?this.dragPan:_options$dragPan,_options$dragRotate=options.dragRotate,dragRotate=void 0===_options$dragRotate?this.dragRotate:_options$dragRotate,_options$doubleClickZ=options.doubleClickZoom,doubleClickZoom=void 0===_options$doubleClickZ?this.doubleClickZoom:_options$doubleClickZ,_options$touchZoom=options.touchZoom,touchZoom=void 0===_options$touchZoom?this.touchZoom:_options$touchZoom,_options$touchRotate=options.touchRotate,touchRotate=void 0===_options$touchRotate?this.touchRotate:_options$touchRotate,_options$keyboard=options.keyboard,keyboard=void 0===_options$keyboard?this.keyboard:_options$keyboard;this.onViewportChange=onViewportChange,this.onStateChange=onStateChange;var dimensionChanged=!this.mapStateProps||this.mapStateProps.height!==options.height;this.mapStateProps=options,dimensionChanged&&this.updateViewport(new map_state_MapState(options)),this._transitionManager.processViewportChange(Object.assign({},options,{onStateChange:this.setState})),this.eventManager!==eventManager&&(this.eventManager=eventManager,this._events={},this.toggleEvents(this.events,!0)),this.toggleEvents(EVENT_TYPES_WHEEL,isInteractive&&scrollZoom),this.toggleEvents(EVENT_TYPES_PAN,isInteractive&&(dragPan||dragRotate)),this.toggleEvents(EVENT_TYPES_PINCH,isInteractive&&(touchZoom||touchRotate)),this.toggleEvents(EVENT_TYPES_DOUBLE_TAP,isInteractive&&doubleClickZoom),this.toggleEvents(EVENT_TYPES_KEYBOARD,isInteractive&&keyboard),this.scrollZoom=scrollZoom,this.dragPan=dragPan,this.dragRotate=dragRotate,this.doubleClickZoom=doubleClickZoom,this.touchZoom=touchZoom,this.touchRotate=touchRotate,this.keyboard=keyboard}},{key:"toggleEvents",value:function toggleEvents(eventNames,enabled){var _this2=this;this.eventManager&&eventNames.forEach((function(eventName){_this2._events[eventName]!==enabled&&(_this2._events[eventName]=enabled,enabled?_this2.eventManager.on(eventName,_this2.handleEvent):_this2.eventManager.off(eventName,_this2.handleEvent))}))}},{key:"_onPanStart",value:function _onPanStart(event){var pos=this.getCenter(event),newMapState=this.mapState.panStart({pos:pos}).rotateStart({pos:pos});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}},{key:"_onPan",value:function _onPan(event){return this.isFunctionKeyPressed(event)||event.rightButton?this._onPanRotate(event):this._onPanMove(event)}},{key:"_onPanEnd",value:function _onPanEnd(event){var newMapState=this.mapState.panEnd().rotateEnd();return this.updateViewport(newMapState,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function _onPanMove(event){if(!this.dragPan)return!1;var pos=this.getCenter(event),newMapState=this.mapState.pan({pos:pos});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isPanning:!0}),!0}},{key:"_onPanRotate",value:function _onPanRotate(event){if(!this.dragRotate)return!1;var deltaX=event.deltaX,deltaY=event.deltaY,_this$getCenter=this.getCenter(event),centerY=Object(slicedToArray.a)(_this$getCenter,2)[1],startY=centerY-deltaY,_this$mapState$getVie=this.mapState.getViewportProps(),width=_this$mapState$getVie.width,height=_this$mapState$getVie.height,deltaScaleX=deltaX/width,deltaScaleY=0;deltaY>0?Math.abs(height-startY)>5&&(deltaScaleY=deltaY/(startY-height)*1.2):deltaY<0&&startY>5&&(deltaScaleY=1-centerY/startY),deltaScaleY=Math.min(1,Math.max(-1,deltaScaleY));var newMapState=this.mapState.rotate({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isRotating:!0}),!0}},{key:"_onWheel",value:function _onWheel(event){if(!this.scrollZoom)return!1;event.preventDefault();var pos=this.getCenter(event),delta=event.delta,scale=2/(1+Math.exp(-Math.abs(.01*delta)));delta<0&&0!==scale&&(scale=1/scale);var newMapState=this.mapState.zoom({pos:pos,scale:scale});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isZooming:!0}),this._onWheelEnd(),!0}},{key:"_onWheelEnd",value:function _onWheelEnd(){this.setState({isZooming:!1})}},{key:"_onPinchStart",value:function _onPinchStart(event){var pos=this.getCenter(event),newMapState=this.mapState.zoomStart({pos:pos}).rotateStart({pos:pos});return this._state.startPinchRotation=event.rotation,this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}},{key:"_onPinch",value:function _onPinch(event){if(!this.touchZoom&&!this.touchRotate)return!1;var newMapState=this.mapState;if(this.touchZoom){var scale=event.scale,pos=this.getCenter(event);newMapState=newMapState.zoom({pos:pos,scale:scale})}if(this.touchRotate){var rotation=event.rotation,startPinchRotation=this._state.startPinchRotation;newMapState=newMapState.rotate({deltaScaleX:-(rotation-startPinchRotation)/180})}return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function _onPinchEnd(event){var newMapState=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(newMapState,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function _onDoubleTap(event){if(!this.doubleClickZoom)return!1;var pos=this.getCenter(event),isZoomOut=this.isFunctionKeyPressed(event),newMapState=this.mapState.zoom({pos:pos,scale:isZoomOut?.5:2});return this.updateViewport(newMapState,Object.assign({},LINEAR_TRANSITION_PROPS,{transitionInterpolator:new linear_interpolator_LinearInterpolator({around:pos})}),{isZooming:!0}),!0}},{key:"_onKeyDown",value:function _onKeyDown(event){if(!this.keyboard)return!1;var newMapState,funcKey=this.isFunctionKeyPressed(event),mapStateProps=this.mapStateProps;switch(event.srcEvent.keyCode){case 189:newMapState=funcKey?this.getMapState({zoom:mapStateProps.zoom-2}):this.getMapState({zoom:mapStateProps.zoom-1});break;case 187:newMapState=funcKey?this.getMapState({zoom:mapStateProps.zoom+2}):this.getMapState({zoom:mapStateProps.zoom+1});break;case 37:newMapState=funcKey?this.getMapState({bearing:mapStateProps.bearing-15}):this.mapState.pan({pos:[100,0],startPos:[0,0]});break;case 39:newMapState=funcKey?this.getMapState({bearing:mapStateProps.bearing+15}):this.mapState.pan({pos:[-100,0],startPos:[0,0]});break;case 38:newMapState=funcKey?this.getMapState({pitch:mapStateProps.pitch+10}):this.mapState.pan({pos:[0,100],startPos:[0,0]});break;case 40:newMapState=funcKey?this.getMapState({pitch:mapStateProps.pitch-10}):this.mapState.pan({pos:[0,-100],startPos:[0,0]});break;default:return!1}return this.updateViewport(newMapState,LINEAR_TRANSITION_PROPS)}}]),MapController}(),DEPRECATED_PROPS=[{old:"onChangeViewport",new:"onViewportChange"},{old:"perspectiveEnabled",new:"dragRotate"},{old:"onHoverFeatures",new:"onHover"},{old:"onClickFeatures",new:"onClick"},{old:"touchZoomRotate",new:"touchZoom, touchRotate"},{old:"mapControls",new:"controller"}];function getDeprecatedText(name){return"react-map-gl: `".concat(name,"` is removed.")}function getNewText(name){return"Use `".concat(name,"` instead.")}function checkDeprecatedProps(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};DEPRECATED_PROPS.forEach((function(depProp){if(props.hasOwnProperty(depProp.old)){var warnMessage=getDeprecatedText(depProp.old);depProp.new&&(warnMessage="".concat(warnMessage," ").concat(getNewText(depProp.new))),console.warn(warnMessage)}}))}function interactive_map_createSuper(Derived){var hasNativeReflectConstruct=function interactive_map_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}var interactive_map_propTypes=Object.assign({},static_map_StaticMap.propTypes,{maxZoom:prop_types_default.a.number,minZoom:prop_types_default.a.number,maxPitch:prop_types_default.a.number,minPitch:prop_types_default.a.number,onViewStateChange:prop_types_default.a.func,onViewportChange:prop_types_default.a.func,onInteractionStateChange:prop_types_default.a.func,transitionDuration:prop_types_default.a.oneOfType([prop_types_default.a.number,prop_types_default.a.string]),transitionInterpolator:prop_types_default.a.object,transitionInterruption:prop_types_default.a.number,transitionEasing:prop_types_default.a.func,onTransitionStart:prop_types_default.a.func,onTransitionInterrupt:prop_types_default.a.func,onTransitionEnd:prop_types_default.a.func,scrollZoom:prop_types_default.a.bool,dragPan:prop_types_default.a.bool,dragRotate:prop_types_default.a.bool,doubleClickZoom:prop_types_default.a.bool,touchZoom:prop_types_default.a.bool,touchRotate:prop_types_default.a.bool,keyboard:prop_types_default.a.bool,onHover:prop_types_default.a.func,onClick:prop_types_default.a.func,onDblClick:prop_types_default.a.func,onContextMenu:prop_types_default.a.func,onMouseDown:prop_types_default.a.func,onMouseMove:prop_types_default.a.func,onMouseUp:prop_types_default.a.func,onTouchStart:prop_types_default.a.func,onTouchMove:prop_types_default.a.func,onTouchEnd:prop_types_default.a.func,onMouseEnter:prop_types_default.a.func,onMouseLeave:prop_types_default.a.func,onMouseOut:prop_types_default.a.func,onWheel:prop_types_default.a.func,touchAction:prop_types_default.a.string,clickRadius:prop_types_default.a.number,interactiveLayerIds:prop_types_default.a.array,getCursor:prop_types_default.a.func,controller:prop_types_default.a.instanceOf(map_controller_MapController)}),interactive_map_defaultProps=Object.assign({},static_map_StaticMap.defaultProps,MAPBOX_LIMITS,transition_manager_TransitionManager.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onNativeClick:null,onHover:null,onContextMenu:function onContextMenu(event){return event.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoom:!0,touchRotate:!1,keyboard:!0,touchAction:"none",clickRadius:0,getCursor:function getDefaultCursor(_ref){var isDragging=_ref.isDragging,isHovering=_ref.isHovering;return isDragging?"grabbing":isHovering?"pointer":"grab"}}),interactive_map_InteractiveMap=function(_PureComponent){Object(inherits.a)(InteractiveMap,_PureComponent);var _super=interactive_map_createSuper(InteractiveMap);function InteractiveMap(props){var _this;return Object(classCallCheck.a)(this,InteractiveMap),_this=_super.call(this,props),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{isLoaded:!1,isDragging:!1,isHovering:!1}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_controller",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_eventManager",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_interactiveContext",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_width",0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_height",0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_eventCanvasRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_staticMapRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"getMap",(function(){return _this._staticMapRef.current?_this._staticMapRef.current.getMap():null})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"queryRenderedFeatures",(function(geometry){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},map=_this.getMap();return map&&map.queryRenderedFeatures(geometry,options)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onInteractionStateChange",(function(interactionState){var _interactionState$isD=interactionState.isDragging,isDragging=void 0!==_interactionState$isD&&_interactionState$isD;isDragging!==_this.state.isDragging&&(_this._updateInteractiveContext({isDragging:isDragging}),_this.setState({isDragging:isDragging}));var onInteractionStateChange=_this.props.onInteractionStateChange;onInteractionStateChange&&onInteractionStateChange(interactionState)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onResize",(function(_ref2){var width=_ref2.width,height=_ref2.height;_this._width=width,_this._height=height,_this._setControllerProps(_this.props),_this.props.onResize({width:width,height:height})})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onViewportChange",(function(viewState,interactionState,oldViewState){var _this$props=_this.props,onViewStateChange=_this$props.onViewStateChange,onViewportChange=_this$props.onViewportChange;onViewStateChange&&onViewStateChange({viewState:viewState,interactionState:interactionState,oldViewState:oldViewState}),onViewportChange&&onViewportChange(viewState,interactionState,oldViewState)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onLoad",(function(event){_this.setState({isLoaded:!0}),_this.props.onLoad(event)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onEvent",(function(callbackName,event){var func=_this.props[callbackName];func&&func(_this._normalizeEvent(event))})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onPointerDown",(function(event){switch(event.pointerType){case"touch":_this._onEvent("onTouchStart",event);break;default:_this._onEvent("onMouseDown",event)}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onPointerUp",(function(event){switch(event.pointerType){case"touch":_this._onEvent("onTouchEnd",event);break;default:_this._onEvent("onMouseUp",event)}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onPointerMove",(function(event){switch(event.pointerType){case"touch":_this._onEvent("onTouchMove",event);break;default:_this._onEvent("onMouseMove",event)}if(!_this.state.isDragging){var features,_this$props2=_this.props,onHover=_this$props2.onHover,interactiveLayerIds=_this$props2.interactiveLayerIds;event=_this._normalizeEvent(event),_this.state.isLoaded&&(interactiveLayerIds||onHover)&&(features=_this._getFeatures({pos:event.point,radius:_this.props.clickRadius})),onHover&&(event.features=features,onHover(event));var isHovering=Boolean(interactiveLayerIds&&features&&features.length>0),isEntering=isHovering&&!_this.state.isHovering,isExiting=!isHovering&&_this.state.isHovering;isEntering&&_this._onEvent("onMouseEnter",event),isExiting&&_this._onEvent("onMouseLeave",event),(isEntering||isExiting)&&_this.setState({isHovering:isHovering})}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onClick",(function(event){var _this$props3=_this.props,onClick=_this$props3.onClick,onNativeClick=_this$props3.onNativeClick,onDblClick=_this$props3.onDblClick,doubleClickZoom=_this$props3.doubleClickZoom,callbacks=[],isDoubleClickEnabled=onDblClick||doubleClickZoom;switch(event.type){case"anyclick":callbacks.push(onNativeClick),isDoubleClickEnabled||callbacks.push(onClick);break;case"click":isDoubleClickEnabled&&callbacks.push(onClick)}(callbacks=callbacks.filter(Boolean)).length&&((event=_this._normalizeEvent(event)).features=_this._getFeatures({pos:event.point,radius:_this.props.clickRadius}),callbacks.forEach((function(cb){return cb(event)})))})),checkDeprecatedProps(props),_this._controller=props.controller||new map_controller_MapController,_this._eventManager=new dist_esm.a(null,{touchAction:props.touchAction}),_this._updateInteractiveContext({isDragging:!1,eventManager:_this._eventManager}),_this}return Object(createClass.a)(InteractiveMap,null,[{key:"supported",value:function supported(){return static_map_StaticMap.supported()}}]),Object(createClass.a)(InteractiveMap,[{key:"componentDidMount",value:function componentDidMount(){var eventManager=this._eventManager,mapContainer=this._eventCanvasRef.current;eventManager.setElement(mapContainer),eventManager.on({pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerup:this._onPointerUp,pointerleave:this._onEvent.bind(this,"onMouseOut"),click:this._onClick,anyclick:this._onClick,dblclick:this._onEvent.bind(this,"onDblClick"),wheel:this._onEvent.bind(this,"onWheel"),contextmenu:this._onEvent.bind(this,"onContextMenu")}),this._setControllerProps(this.props),this._updateInteractiveContext({mapContainer:mapContainer})}},{key:"componentDidUpdate",value:function componentDidUpdate(){this._setControllerProps(this.props)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._eventManager.destroy()}},{key:"_setControllerProps",value:function _setControllerProps(props){props=Object.assign({},props,props.viewState,{isInteractive:Boolean(props.onViewStateChange||props.onViewportChange),onViewportChange:this._onViewportChange,onStateChange:this._onInteractionStateChange,eventManager:this._eventManager,width:this._width,height:this._height}),this._controller.setOptions(props);var context=this._interactiveContext;context.onViewportChange=props.onViewportChange,context.onViewStateChange=props.onViewStateChange}},{key:"_getFeatures",value:function _getFeatures(_ref3){var features,pos=_ref3.pos,radius=_ref3.radius,queryParams={},map=this.getMap();if(this.props.interactiveLayerIds&&(queryParams.layers=this.props.interactiveLayerIds),radius){var size=radius,bbox=[[pos[0]-size,pos[1]+size],[pos[0]+size,pos[1]-size]];features=map&&map.queryRenderedFeatures(bbox,queryParams)}else features=map&&map.queryRenderedFeatures(pos,queryParams);return features}},{key:"_updateInteractiveContext",value:function _updateInteractiveContext(updatedContext){this._interactiveContext=Object.assign({},this._interactiveContext,updatedContext)}},{key:"_normalizeEvent",value:function _normalizeEvent(event){if(event.lngLat)return event;var _event$offsetCenter=event.offsetCenter,pos=[_event$offsetCenter.x,_event$offsetCenter.y],viewport=new esm.a(Object.assign({},this.props,{width:this._width,height:this._height}));return event.point=pos,event.lngLat=viewport.unproject(pos),event}},{key:"render",value:function render(){var _this$props4=this.props,width=_this$props4.width,height=_this$props4.height,style=_this$props4.style,getCursor=_this$props4.getCursor,eventCanvasStyle=Object.assign({position:"relative"},style,{width:width,height:height,cursor:getCursor(this.state)});return react.createElement(map_context.Provider,{value:this._interactiveContext},react.createElement("div",{key:"event-canvas",ref:this._eventCanvasRef,style:eventCanvasStyle},react.createElement(static_map_StaticMap,_extends({},this.props,{width:"100%",height:"100%",style:null,onResize:this._onResize,onLoad:this._onLoad,ref:this._staticMapRef}),this.props.children)))}}]),InteractiveMap}(react.PureComponent);Object(defineProperty.a)(interactive_map_InteractiveMap,"propTypes",interactive_map_propTypes),Object(defineProperty.a)(interactive_map_InteractiveMap,"defaultProps",interactive_map_defaultProps);var esm_typeof=__webpack_require__(14);function deepEqual(a,b){if(a===b)return!0;if(!a||!b)return!1;if(Array.isArray(a)){if(!Array.isArray(b)||a.length!==b.length)return!1;for(var i=0;i<a.length;i++)if(!deepEqual(a[i],b[i]))return!1;return!0}if(Array.isArray(b))return!1;if("object"===Object(esm_typeof.a)(a)&&"object"===Object(esm_typeof.a)(b)){var aKeys=Object.keys(a),bKeys=Object.keys(b);if(aKeys.length!==bKeys.length)return!1;for(var _i=0,_aKeys=aKeys;_i<_aKeys.length;_i++){var key=_aKeys[_i];if(!b.hasOwnProperty(key))return!1;if(!deepEqual(a[key],b[key]))return!1}return!0}return!1}function source_createSuper(Derived){var hasNativeReflectConstruct=function source_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}var source_propTypes={type:prop_types_default.a.string.isRequired,id:prop_types_default.a.string},sourceCounter=0,source_Source=function(_PureComponent){Object(inherits.a)(Source,_PureComponent);var _super=source_createSuper(Source);function Source(_props){var _this;return Object(classCallCheck.a)(this,Source),_this=_super.call(this,_props),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"id",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"type",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_map",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_sourceOptions",{}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_updateSource",(function(){var _assertThisInitialize=Object(assertThisInitialized.a)(_this),type=_assertThisInitialize.type;if(_assertThisInitialize._map){var _assertThisInitialize2=Object(assertThisInitialized.a)(_this),sourceOptions=_assertThisInitialize2._sourceOptions,props=_assertThisInitialize2.props;assert(!props.id||props.id===_this.id,"source id changed"),assert(props.type===type,"source type changed");var changedKey="",changedKeyCount=0;for(var key in props)"children"===key||"id"===key||deepEqual(sourceOptions[key],props[key])||(sourceOptions[key]=props[key],changedKey=key,changedKeyCount++);var source=_this.getSource();source?changedKeyCount&&("geojson"===type?source.setData(sourceOptions.data):"image"===type?source.updateImage({url:sourceOptions.url,coordinates:sourceOptions.coordinates}):"canvas"!==type&&"video"!==type||1!==changedKeyCount||"coordinates"!==changedKey?console.warn("Unable to update <Source> prop: ".concat(changedKey)):source.setCoordinates(sourceOptions.coordinates)):_this._createSource(sourceOptions)}})),_this.id=_props.id||"jsx-source-".concat(sourceCounter++),_this.type=_props.type,_this}return Object(createClass.a)(Source,[{key:"componentWillUnmount",value:function componentWillUnmount(){var _this2=this,map=this._map;map&&(map.off("styledata",this._updateSource),requestAnimationFrame((function(){map.style&&map.style._loaded&&map.removeSource(_this2.id)})))}},{key:"getSource",value:function getSource(){var map=this._map;return map&&map.style&&map.getSource(this.id)}},{key:"_createSource",value:function _createSource(sourceOptions){var map=this._map;map.style&&map.style._loaded&&map.addSource(this.id,sourceOptions)}},{key:"_render",value:function _render(context){var _this3=this;return!this._map&&context.map&&(this._map=context.map,this._map.on("styledata",this._updateSource)),this._updateSource(),react.Children.map(this.props.children,(function(child){return Object(react.cloneElement)(child,{source:_this3.id})}))}},{key:"render",value:function render(){return react.createElement(map_context.Consumer,null,this._render.bind(this))}}]),Source}(react.PureComponent);function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function layer_createSuper(Derived){var hasNativeReflectConstruct=function layer_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}Object(defineProperty.a)(source_Source,"propTypes",source_propTypes);var layer_propTypes={type:prop_types_default.a.string.isRequired,id:prop_types_default.a.string,source:prop_types_default.a.string,beforeId:prop_types_default.a.string};var layerCounter=0,layer_Layer=function(_PureComponent){Object(inherits.a)(Layer,_PureComponent);var _super=layer_createSuper(Layer);function Layer(_props){var _this;return Object(classCallCheck.a)(this,Layer),_this=_super.call(this,_props),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"id",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"type",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_map",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_layerOptions",{}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_updateLayer",(function(){var map=_this._map;if(map){var _assertThisInitialize=Object(assertThisInitialized.a)(_this),props=_assertThisInitialize.props,layerOptions=_assertThisInitialize._layerOptions;if(assert(!props.id||props.id===_this.id,"layer id changed"),assert(props.type===_this.type,"layer type changed"),_this.getLayer())try{!function diffLayerStyles(map,id,props,prevProps){var _props$layout=props.layout,layout=void 0===_props$layout?{}:_props$layout,_props$paint=props.paint,paint=void 0===_props$paint?{}:_props$paint,filter=props.filter,minzoom=props.minzoom,maxzoom=props.maxzoom,beforeId=props.beforeId,otherProps=_objectWithoutProperties(props,["layout","paint","filter","minzoom","maxzoom","beforeId"]);if(beforeId!==prevProps.beforeId&&map.moveLayer(id,beforeId),layout!==prevProps.layout)for(var key in layout)deepEqual(layout[key],prevProps.layout[key])||map.setLayoutProperty(id,key,layout[key]);if(paint!==prevProps.paint)for(var _key in paint)deepEqual(paint[_key],prevProps.paint[_key])||map.setPaintProperty(id,_key,paint[_key]);for(var _key2 in deepEqual(filter,prevProps.filter)||map.setFilter(id,filter),minzoom===prevProps.minzoom&&maxzoom===prevProps.maxzoom||map.setLayerZoomRange(id,minzoom,maxzoom),otherProps)deepEqual(otherProps[_key2],prevProps[_key2])||map.setLayerProperty(id,_key2,otherProps[_key2])}(map,_this.id,props,layerOptions),Object.assign(layerOptions,props)}catch(error){console.warn(error)}else _this._createLayer()}})),_this.id=_props.id||"jsx-layer-".concat(layerCounter++),_this.type=_props.type,_this}return Object(createClass.a)(Layer,[{key:"componentDidMount",value:function componentDidMount(){this._updateLayer()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this._updateLayer()}},{key:"componentWillUnmount",value:function componentWillUnmount(){var map=this._map;map&&(map.off("styledata",this._updateLayer),map.style&&map.style._loaded&&map.removeLayer(this.id))}},{key:"getLayer",value:function getLayer(){var map=this._map;return map&&map.style&&map.getLayer(this.id)}},{key:"_createLayer",value:function _createLayer(){var map=this._map;if(map.style&&map.style._loaded){var options=Object.assign({},this.props);options.id=this.id,delete options.beforeId,map.addLayer(options,this.props.beforeId),this._layerOptions=options}}},{key:"_render",value:function _render(context){return!this._map&&context.map&&(this._map=context.map,this._map.on("styledata",this._updateLayer)),null}},{key:"render",value:function render(){return react.createElement(map_context.Consumer,null,this._render.bind(this))}}]),Layer}(react.PureComponent);function base_control_createSuper(Derived){var hasNativeReflectConstruct=function base_control_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}Object(defineProperty.a)(layer_Layer,"propTypes",layer_propTypes);var base_control_propTypes={captureScroll:prop_types_default.a.bool,captureDrag:prop_types_default.a.bool,captureClick:prop_types_default.a.bool,captureDoubleClick:prop_types_default.a.bool},base_control_BaseControl=function(_PureComponent){Object(inherits.a)(BaseControl,_PureComponent);var _super=base_control_createSuper(BaseControl);function BaseControl(){var _this;Object(classCallCheck.a)(this,BaseControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_context",{}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_events",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_containerRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onScroll",(function(evt){_this.props.captureScroll&&evt.stopPropagation()})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onDragStart",(function(evt){_this.props.captureDrag&&evt.stopPropagation()})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onDblClick",(function(evt){_this.props.captureDoubleClick&&evt.stopPropagation()})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onClick",(function(evt){_this.props.captureClick&&evt.stopPropagation()})),_this}return Object(createClass.a)(BaseControl,[{key:"componentDidMount",value:function componentDidMount(){var ref=this._containerRef.current;if(ref){var eventManager=this._context.eventManager;eventManager&&(this._events={wheel:this._onScroll,panstart:this._onDragStart,anyclick:this._onClick,click:this._onClick,dblclick:this._onDblClick},eventManager.watch(this._events,ref))}}},{key:"componentWillUnmount",value:function componentWillUnmount(){var eventManager=this._context.eventManager;eventManager&&this._events&&eventManager.off(this._events)}},{key:"_render",value:function _render(){throw new Error("_render() not implemented")}},{key:"render",value:function render(){var _this2=this;return react.createElement(map_context.Consumer,null,(function(context){return _this2._context=context,_this2._render()}))}}]),BaseControl}(react.PureComponent);Object(defineProperty.a)(base_control_BaseControl,"propTypes",base_control_propTypes),Object(defineProperty.a)(base_control_BaseControl,"defaultProps",{captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0});var get=__webpack_require__(22);function draggable_control_createSuper(Derived){var hasNativeReflectConstruct=function draggable_control_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}var draggable_control_propTypes=Object.assign({},base_control_BaseControl.propTypes,{draggable:prop_types_default.a.bool,onDrag:prop_types_default.a.func,onDragEnd:prop_types_default.a.func,onDragStart:prop_types_default.a.func,offsetLeft:prop_types_default.a.number,offsetTop:prop_types_default.a.number}),draggable_control_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{draggable:!1,offsetLeft:0,offsetTop:0}),draggable_control_DraggableControl=function(_BaseControl){Object(inherits.a)(DraggableControl,_BaseControl);var _super=draggable_control_createSuper(DraggableControl);function DraggableControl(){var _this;Object(classCallCheck.a)(this,DraggableControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{dragPos:null,dragOffset:null}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_dragEvents",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onDragStart",(function(event){var _this$props=_this.props,draggable=_this$props.draggable,captureDrag=_this$props.captureDrag;if((draggable||captureDrag)&&event.stopPropagation(),draggable){var dragPos=_this._getDragEventPosition(event),dragOffset=_this._getDragEventOffset(event);_this.setState({dragPos:dragPos,dragOffset:dragOffset}),_this._setupDragEvents();var onDragStart=_this.props.onDragStart;if(onDragStart&&dragOffset){var callbackEvent=Object.assign({},event);callbackEvent.lngLat=_this._getDragLngLat(dragPos,dragOffset),onDragStart(callbackEvent)}}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onDrag",(function(event){event.stopPropagation();var dragPos=_this._getDragEventPosition(event);_this.setState({dragPos:dragPos});var onDrag=_this.props.onDrag,dragOffset=_this.state.dragOffset;if(onDrag&&dragOffset){var callbackEvent=Object.assign({},event);callbackEvent.lngLat=_this._getDragLngLat(dragPos,dragOffset),onDrag(callbackEvent)}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onDragEnd",(function(event){var _this$state=_this.state,dragPos=_this$state.dragPos,dragOffset=_this$state.dragOffset;event.stopPropagation(),_this.setState({dragPos:null,dragOffset:null}),_this._removeDragEvents();var onDragEnd=_this.props.onDragEnd;if(onDragEnd&&dragPos&&dragOffset){var callbackEvent=Object.assign({},event);callbackEvent.lngLat=_this._getDragLngLat(dragPos,dragOffset),onDragEnd(callbackEvent)}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onDragCancel",(function(event){event.stopPropagation(),_this.setState({dragPos:null,dragOffset:null}),_this._removeDragEvents()})),_this}return Object(createClass.a)(DraggableControl,[{key:"componentWillUnmount",value:function componentWillUnmount(){Object(get.a)(Object(getPrototypeOf.a)(DraggableControl.prototype),"componentWillUnmount",this).call(this),this._removeDragEvents()}},{key:"_setupDragEvents",value:function _setupDragEvents(){var eventManager=this._context.eventManager;eventManager&&(this._dragEvents={panmove:this._onDrag,panend:this._onDragEnd,pancancel:this._onDragCancel},eventManager.on(this._dragEvents))}},{key:"_removeDragEvents",value:function _removeDragEvents(){var eventManager=this._context.eventManager;eventManager&&this._dragEvents&&(eventManager.off(this._dragEvents),this._dragEvents=null)}},{key:"_getDragEventPosition",value:function _getDragEventPosition(event){var _event$offsetCenter=event.offsetCenter;return[_event$offsetCenter.x,_event$offsetCenter.y]}},{key:"_getDragEventOffset",value:function _getDragEventOffset(event){var _event$center=event.center,x=_event$center.x,y=_event$center.y,container=this._containerRef.current;if(container){var rect=container.getBoundingClientRect();return[rect.left-x,rect.top-y]}return null}},{key:"_getDraggedPosition",value:function _getDraggedPosition(dragPos,dragOffset){return[dragPos[0]+dragOffset[0],dragPos[1]+dragOffset[1]]}},{key:"_getDragLngLat",value:function _getDragLngLat(dragPos,dragOffset){var _this$props2=this.props,offsetLeft=_this$props2.offsetLeft,offsetTop=_this$props2.offsetTop,_this$_getDraggedPosi=this._getDraggedPosition(dragPos,dragOffset),_this$_getDraggedPosi2=Object(slicedToArray.a)(_this$_getDraggedPosi,2),x=_this$_getDraggedPosi2[0],y=_this$_getDraggedPosi2[1];return this._context.viewport.unproject([x-offsetLeft,y-offsetTop])}}]),DraggableControl}(base_control_BaseControl);Object(defineProperty.a)(draggable_control_DraggableControl,"propTypes",draggable_control_propTypes),Object(defineProperty.a)(draggable_control_DraggableControl,"defaultProps",draggable_control_defaultProps);var crisp_pixel_pixelRatio="undefined"!=typeof window&&window.devicePixelRatio||1,crispPixel=function crispPixel(size){return Math.round(size*crisp_pixel_pixelRatio)/crisp_pixel_pixelRatio},crispPercentage=function crispPercentage(el,percentage){var dimension=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";if(null===el)return percentage;var origSize="x"===dimension?el.offsetWidth:el.offsetHeight;return crispPixel(percentage/100*origSize)/origSize*100};function marker_createSuper(Derived){var hasNativeReflectConstruct=function marker_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}var marker_propTypes=Object.assign({},draggable_control_DraggableControl.propTypes,{className:prop_types_default.a.string,longitude:prop_types_default.a.number.isRequired,latitude:prop_types_default.a.number.isRequired}),marker_defaultProps=Object.assign({},draggable_control_DraggableControl.defaultProps,{className:""}),marker_Marker=function(_DraggableControl){Object(inherits.a)(Marker,_DraggableControl);var _super=marker_createSuper(Marker);function Marker(){var _this;Object(classCallCheck.a)(this,Marker);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_control",null),_this}return Object(createClass.a)(Marker,[{key:"_getPosition",value:function _getPosition(){var _this$props=this.props,longitude=_this$props.longitude,latitude=_this$props.latitude,offsetLeft=_this$props.offsetLeft,offsetTop=_this$props.offsetTop,_this$state=this.state,dragPos=_this$state.dragPos,dragOffset=_this$state.dragOffset;if(dragPos&&dragOffset)return this._getDraggedPosition(dragPos,dragOffset);var _this$_context$viewpo=this._context.viewport.project([longitude,latitude]),_this$_context$viewpo2=Object(slicedToArray.a)(_this$_context$viewpo,2),x=_this$_context$viewpo2[0],y=_this$_context$viewpo2[1];return[x+=offsetLeft,y+=offsetTop]}},{key:"_render",value:function _render(){var _this$_getPosition=this._getPosition(),_this$_getPosition2=Object(slicedToArray.a)(_this$_getPosition,2),x=_this$_getPosition2[0],y=_this$_getPosition2[1],transform="translate(".concat(crispPixel(x),"px, ").concat(crispPixel(y),"px)"),div=this._containerRef.current;if(this._control&&div)div.style.transform=transform;else{var _this$props2=this.props,className=_this$props2.className,draggable=_this$props2.draggable,dragPos=this.state.dragPos,containerStyle={position:"absolute",left:0,top:0,transform:transform,cursor:draggable?dragPos?"grabbing":"grab":"auto"};this._control=react.createElement("div",{className:"mapboxgl-marker ".concat(className),ref:this._containerRef,style:containerStyle},this.props.children)}return this._control}},{key:"render",value:function render(){return this._control=null,Object(get.a)(Object(getPrototypeOf.a)(Marker.prototype),"render",this).call(this)}}]),Marker}(draggable_control_DraggableControl);Object(defineProperty.a)(marker_Marker,"propTypes",marker_propTypes),Object(defineProperty.a)(marker_Marker,"defaultProps",marker_defaultProps);var ANCHOR_POSITION={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}},ANCHOR_TYPES=Object.keys(ANCHOR_POSITION);function popup_createSuper(Derived){var hasNativeReflectConstruct=function popup_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}var popup_propTypes=Object.assign({},base_control_BaseControl.propTypes,{className:prop_types_default.a.string,longitude:prop_types_default.a.number.isRequired,latitude:prop_types_default.a.number.isRequired,altitude:prop_types_default.a.number,offsetLeft:prop_types_default.a.number,offsetTop:prop_types_default.a.number,tipSize:prop_types_default.a.number,closeButton:prop_types_default.a.bool,closeOnClick:prop_types_default.a.bool,anchor:prop_types_default.a.oneOf(Object.keys(ANCHOR_POSITION)),dynamicPosition:prop_types_default.a.bool,sortByDepth:prop_types_default.a.bool,onClose:prop_types_default.a.func}),popup_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{className:"",altitude:0,offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function onClose(){}}),popup_Popup=function(_BaseControl){Object(inherits.a)(Popup,_BaseControl);var _super=popup_createSuper(Popup);function Popup(){var _this;Object(classCallCheck.a)(this,Popup);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_closeOnClick",!1),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_contentRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onClick",(function(evt){if(_this.props.captureClick&&evt.stopPropagation(),_this.props.closeOnClick||"mapboxgl-popup-close-button"===evt.target.className){_this.props.onClose();var eventManager=_this._context.eventManager;eventManager&&eventManager.once("click",(function(e){return e.stopPropagation()}),evt.target)}})),_this}return Object(createClass.a)(Popup,[{key:"componentDidMount",value:function componentDidMount(){Object(get.a)(Object(getPrototypeOf.a)(Popup.prototype),"componentDidMount",this).call(this),this.forceUpdate()}},{key:"_getPosition",value:function _getPosition(x,y){var viewport=this._context.viewport,_this$props=this.props,anchor=_this$props.anchor,dynamicPosition=_this$props.dynamicPosition,tipSize=_this$props.tipSize,content=this._contentRef.current;return content&&dynamicPosition?function getDynamicPosition(_ref){var x=_ref.x,y=_ref.y,width=_ref.width,height=_ref.height,selfWidth=_ref.selfWidth,selfHeight=_ref.selfHeight,anchor=_ref.anchor,_ref$padding=_ref.padding,padding=void 0===_ref$padding?0:_ref$padding,_ANCHOR_POSITION$anch=ANCHOR_POSITION[anchor],anchorX=_ANCHOR_POSITION$anch.x,anchorY=_ANCHOR_POSITION$anch.y,top=y-anchorY*selfHeight,bottom=top+selfHeight;if(top<padding)for(;top<padding&&anchorY>=.5;)anchorY-=.5,top+=.5*selfHeight;else if(bottom>height-padding)for(;bottom>height-padding&&anchorY<=.5;)anchorY+=.5,bottom-=.5*selfHeight;var left=x-anchorX*selfWidth,right=left+selfWidth,xStep=.5;if(.5===anchorY&&(anchorX=Math.floor(anchorX),xStep=1),left<padding)for(;left<padding&&anchorX>=xStep;)anchorX-=xStep,left+=xStep*selfWidth;else if(right>width-padding)for(;right>width-padding&&anchorX<=1-xStep;)anchorX+=xStep,right-=xStep*selfWidth;return ANCHOR_TYPES.find((function(positionType){var anchorPosition=ANCHOR_POSITION[positionType];return anchorPosition.x===anchorX&&anchorPosition.y===anchorY}))||anchor}({x:x,y:y,anchor:anchor,padding:tipSize,width:viewport.width,height:viewport.height,selfWidth:content.clientWidth,selfHeight:content.clientHeight}):anchor}},{key:"_getContainerStyle",value:function _getContainerStyle(x,y,z,positionType){var viewport=this._context.viewport,_this$props2=this.props,offsetLeft=_this$props2.offsetLeft,offsetTop=_this$props2.offsetTop,sortByDepth=_this$props2.sortByDepth,anchorPosition=ANCHOR_POSITION[positionType],left=x+offsetLeft,top=y+offsetTop,el=this._containerRef.current,xPercentage=crispPercentage(el,100*-anchorPosition.x),yPercentage=crispPercentage(el,100*-anchorPosition.y,"y"),style={position:"absolute",transform:"\n        translate(".concat(xPercentage,"%, ").concat(yPercentage,"%)\n        translate(").concat(crispPixel(left),"px, ").concat(crispPixel(top),"px)\n      "),display:void 0,zIndex:void 0};return sortByDepth?(z>1||z<-1||x<0||x>viewport.width||y<0||y>viewport.height?style.display="none":style.zIndex=Math.floor((1-z)/2*1e5),style):style}},{key:"_renderTip",value:function _renderTip(positionType){var tipSize=this.props.tipSize;return react.createElement("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:tipSize}})}},{key:"_renderContent",value:function _renderContent(){var _this$props3=this.props,closeButton=_this$props3.closeButton,children=_this$props3.children,onClick=this._context.eventManager?null:this._onClick;return react.createElement("div",{key:"content",ref:this._contentRef,className:"mapboxgl-popup-content",onClick:onClick},closeButton&&react.createElement("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button"},""),children)}},{key:"_render",value:function _render(){var _this$props4=this.props,className=_this$props4.className,longitude=_this$props4.longitude,latitude=_this$props4.latitude,altitude=_this$props4.altitude,_this$_context$viewpo=this._context.viewport.project([longitude,latitude,altitude]),_this$_context$viewpo2=Object(slicedToArray.a)(_this$_context$viewpo,3),x=_this$_context$viewpo2[0],y=_this$_context$viewpo2[1],z=_this$_context$viewpo2[2],positionType=this._getPosition(x,y),containerStyle=this._getContainerStyle(x,y,z,positionType);return react.createElement("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(positionType," ").concat(className),style:containerStyle,ref:this._containerRef},this._renderTip(positionType),this._renderContent())}}]),Popup}(base_control_BaseControl);Object(defineProperty.a)(popup_Popup,"propTypes",popup_propTypes),Object(defineProperty.a)(popup_Popup,"defaultProps",popup_defaultProps);var globals=__webpack_require__(62);function fullscreen_control_createSuper(Derived){var hasNativeReflectConstruct=function fullscreen_control_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}var geolocate_utils_supported,fullscreen_control_propTypes=Object.assign({},base_control_BaseControl.propTypes,{className:prop_types_default.a.string,container:prop_types_default.a.object}),fullscreen_control_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{className:"",container:null}),fullscreen_control_FullscreenControl=function(_BaseControl){Object(inherits.a)(FullscreenControl,_BaseControl);var _super=fullscreen_control_createSuper(FullscreenControl);function FullscreenControl(){var _this;Object(classCallCheck.a)(this,FullscreenControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{isFullscreen:!1,showButton:!1}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_mapboxFullscreenControl",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onFullscreenChange",(function(){var nextState=!_this._mapboxFullscreenControl._fullscreen;_this._mapboxFullscreenControl._fullscreen=nextState,_this.setState({isFullscreen:nextState})})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onClickFullscreen",(function(){_this._mapboxFullscreenControl._onClickFullscreen()})),_this}return Object(createClass.a)(FullscreenControl,[{key:"componentDidMount",value:function componentDidMount(){var container=this.props.container||this._context.mapContainer;this._mapboxFullscreenControl=new mapbox_gl_default.a.FullscreenControl({container:container}),this.setState({showButton:this._mapboxFullscreenControl._checkFullscreenSupport()}),globals.a.addEventListener(this._mapboxFullscreenControl._fullscreenchange,this._onFullscreenChange)}},{key:"componentWillUnmount",value:function componentWillUnmount(){globals.a.removeEventListener(this._mapboxFullscreenControl._fullscreenchange,this._onFullscreenChange)}},{key:"_renderButton",value:function _renderButton(type,label,callback){return react.createElement("button",{key:type,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(type),type:"button",title:label,onClick:callback},react.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))}},{key:"_render",value:function _render(){if(!this.state.showButton)return null;var className=this.props.className,type=this.state.isFullscreen?"shrink":"fullscreen";return react.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(className),ref:this._containerRef},this._renderButton(type,"Toggle fullscreen",this._onClickFullscreen))}}]),FullscreenControl}(base_control_BaseControl);function geolocate_control_createSuper(Derived){var hasNativeReflectConstruct=function geolocate_control_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}Object(defineProperty.a)(fullscreen_control_FullscreenControl,"propTypes",fullscreen_control_propTypes),Object(defineProperty.a)(fullscreen_control_FullscreenControl,"defaultProps",fullscreen_control_defaultProps);var geolocate_control_LINEAR_TRANSITION_PROPS=Object.assign({},transition_manager_TransitionManager.defaultProps,{transitionDuration:500}),geolocate_control_noop=function noop(){},geolocate_control_propTypes=Object.assign({},base_control_BaseControl.propTypes,{className:prop_types_default.a.string,style:prop_types_default.a.object,label:prop_types_default.a.string,auto:prop_types_default.a.bool,positionOptions:prop_types_default.a.object,fitBoundsOptions:prop_types_default.a.object,trackUserLocation:prop_types_default.a.bool,showUserLocation:prop_types_default.a.bool,onViewStateChange:prop_types_default.a.func,onViewportChange:prop_types_default.a.func,onGeolocate:prop_types_default.a.func}),geolocate_control_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{className:"",style:{},label:"Geolocate",auto:!1,positionOptions:null,fitBoundsOptions:null,trackUserLocation:!1,showUserLocation:!0,onGeolocate:function onGeolocate(){}}),geolocate_control_GeolocateControl=function(_BaseControl){Object(inherits.a)(GeolocateControl,_BaseControl);var _super=geolocate_control_createSuper(GeolocateControl);function GeolocateControl(){var _this;Object(classCallCheck.a)(this,GeolocateControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{supportsGeolocation:!1,markerPosition:null}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_mapboxGeolocateControl",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_geolocateButtonRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_setupMapboxGeolocateControl",(function(supportsGeolocation){if(supportsGeolocation){var controlOptions={showUserLocation:!1};["positionOptions","fitBoundsOptions","trackUserLocation"].forEach((function(prop){prop in _this.props&&null!==_this.props[prop]&&(controlOptions[prop]=_this.props[prop])}));var control=new mapbox_gl_default.a.GeolocateControl(controlOptions);_this._mapboxGeolocateControl=control,control._watchState="OFF",control._geolocateButton=_this._geolocateButtonRef.current,control.options.trackUserLocation&&control._geolocateButton&&control._geolocateButton.setAttribute("aria-pressed","false"),control._updateMarker=_this._updateMarker,control._updateCamera=_this._updateCamera,control._setup=!0;var eventManager=_this._context.eventManager;control.options.trackUserLocation&&eventManager&&eventManager.on("panstart",(function(){"ACTIVE_LOCK"===control._watchState&&(control._watchState="BACKGROUND",control._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),control._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"))})),control.on("geolocate",_this.props.onGeolocate)}else console.warn("Geolocation support is not available, the GeolocateControl will not be visible.")})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_triggerGeolocate",(function(){var control=_this._mapboxGeolocateControl;return control._map=_this._context.map,_this.props.showUserLocation&&(control.on("geolocate",_this._updateMarker),control.on("trackuserlocationend",_this._updateMarker)),_this._mapboxGeolocateControl.trigger()})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_updateMarker",(function(position){position&&_this.setState({markerPosition:position.coords})})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_getBounds",(function(position){var center=new mapbox_gl_default.a.LngLat(position.coords.longitude,position.coords.latitude),radius=position.coords.accuracy,bounds=center.toBounds(radius);return[[bounds._ne.lng,bounds._ne.lat],[bounds._sw.lng,bounds._sw.lat]]})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_updateCamera",(function(position){var viewport=_this._context.viewport,bounds=_this._getBounds(position),_WebMercatorViewport$=new esm.a(viewport).fitBounds(bounds),longitude=_WebMercatorViewport$.longitude,latitude=_WebMercatorViewport$.latitude,zoom=_WebMercatorViewport$.zoom,newViewState=Object.assign({},viewport,{longitude:longitude,latitude:latitude,zoom:zoom}),mapState=new map_state_MapState(newViewState),viewState=Object.assign({},mapState.getViewportProps(),geolocate_control_LINEAR_TRANSITION_PROPS),onViewportChange=_this.props.onViewportChange||_this._context.onViewportChange||geolocate_control_noop;(_this.props.onViewStateChange||_this._context.onViewStateChange||geolocate_control_noop)({viewState:viewState}),onViewportChange(viewState)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_renderButton",(function(type,label,callback){return react.createElement("button",{key:type,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(type),ref:_this._geolocateButtonRef,type:"button",title:label,onClick:callback},react.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_renderMarker",(function(){var markerPosition=_this.state.markerPosition,showUserLocation=_this.props.showUserLocation;return markerPosition&&showUserLocation?react.createElement(marker_Marker,{key:"location-maker",className:"mapboxgl-user-location-dot",longitude:markerPosition.longitude,latitude:markerPosition.latitude,onContextMenu:function onContextMenu(e){return e.preventDefault()},captureDrag:!1,captureDoubleClick:!1}):null})),_this}return Object(createClass.a)(GeolocateControl,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;(function isGeolocationSupported(){return void 0!==geolocate_utils_supported?Promise.resolve(geolocate_utils_supported):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((function(p){return geolocate_utils_supported="denied"!==p.state})):(geolocate_utils_supported=Boolean(window.navigator.geolocation),Promise.resolve(geolocate_utils_supported))})().then((function(result){_this2.setState({supportsGeolocation:result}),_this2._setupMapboxGeolocateControl(result),result&&_this2.props.auto&&_this2._triggerGeolocate()}))}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){this.state.supportsGeolocation&&!prevProps.auto&&this.props.auto&&this._triggerGeolocate()}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this._mapboxGeolocateControl){var geolocationWatchID=this._mapboxGeolocateControl._geolocationWatchID;void 0!==geolocationWatchID&&(window.navigator.geolocation.clearWatch(geolocationWatchID),this._mapboxGeolocateControl._geolocationWatchID=void 0)}}},{key:"_render",value:function _render(){if(!this.state.supportsGeolocation)return null;var _this$props=this.props,className=_this$props.className,style=_this$props.style,label=_this$props.label;return react.createElement("div",null,this._renderMarker(),react.createElement("div",{key:"geolocate-control",className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(className),ref:this._containerRef,style:style,onContextMenu:function onContextMenu(e){return e.preventDefault()}},this._renderButton("geolocate",label,this._triggerGeolocate)))}}]),GeolocateControl}(base_control_BaseControl);function navigation_control_createSuper(Derived){var hasNativeReflectConstruct=function navigation_control_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}Object(defineProperty.a)(geolocate_control_GeolocateControl,"propTypes",geolocate_control_propTypes),Object(defineProperty.a)(geolocate_control_GeolocateControl,"defaultProps",geolocate_control_defaultProps);var navigation_control_noop=function noop(){},navigation_control_propTypes=Object.assign({},base_control_BaseControl.propTypes,{className:prop_types_default.a.string,onViewStateChange:prop_types_default.a.func,onViewportChange:prop_types_default.a.func,showCompass:prop_types_default.a.bool,showZoom:prop_types_default.a.bool,zoomInLabel:prop_types_default.a.string,zoomOutLabel:prop_types_default.a.string,compassLabel:prop_types_default.a.string}),navigation_control_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{className:"",showCompass:!0,showZoom:!0,zoomInLabel:"Zoom In",zoomOutLabel:"Zoom Out",compassLabel:"Reset North"});function getUIVersion(mapboxVersion){return function compareVersions(version1,version2){for(var v1=(version1||"").split(".").map(Number),v2=(version2||"").split(".").map(Number),i=0;i<3;i++){var part1=v1[i]||0,part2=v2[i]||0;if(part1<part2)return-1;if(part1>part2)return 1}return 0}(mapboxVersion,"1.6.0")>=0?2:1}var navigation_control_NavigationControl=function(_BaseControl){Object(inherits.a)(NavigationControl,_BaseControl);var _super=navigation_control_createSuper(NavigationControl);function NavigationControl(props){var _this;return Object(classCallCheck.a)(this,NavigationControl),_this=_super.call(this,props),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_uiVersion",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onZoomIn",(function(){_this._updateViewport({zoom:_this._context.viewport.zoom+1})})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onZoomOut",(function(){_this._updateViewport({zoom:_this._context.viewport.zoom-1})})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onResetNorth",(function(){_this._updateViewport({bearing:0,pitch:0})})),checkDeprecatedProps(props),_this}return Object(createClass.a)(NavigationControl,[{key:"_updateViewport",value:function _updateViewport(opts){var viewport=this._context.viewport,mapState=new map_state_MapState(Object.assign({},viewport,opts)),viewState=Object.assign({},mapState.getViewportProps(),LINEAR_TRANSITION_PROPS),onViewportChange=this.props.onViewportChange||this._context.onViewportChange||navigation_control_noop;(this.props.onViewStateChange||this._context.onViewStateChange||navigation_control_noop)({viewState:viewState}),onViewportChange(viewState)}},{key:"_renderCompass",value:function _renderCompass(){var bearing=this._context.viewport.bearing,style={transform:"rotate(".concat(-bearing,"deg)")};return 2===this._uiVersion?react.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true",style:style}):react.createElement("span",{className:"mapboxgl-ctrl-compass-arrow",style:style})}},{key:"_renderButton",value:function _renderButton(type,label,callback,children){return react.createElement("button",{key:type,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(type),type:"button",title:label,onClick:callback},children||react.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))}},{key:"_render",value:function _render(){var _this$props=this.props,className=_this$props.className,showCompass=_this$props.showCompass,showZoom=_this$props.showZoom,zoomInLabel=_this$props.zoomInLabel,zoomOutLabel=_this$props.zoomOutLabel,compassLabel=_this$props.compassLabel;if(!this._uiVersion){var map=this._context.map;this._uiVersion=map?getUIVersion(map.version):2}return react.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(className),ref:this._containerRef},showZoom&&this._renderButton("zoom-in",zoomInLabel,this._onZoomIn),showZoom&&this._renderButton("zoom-out",zoomOutLabel,this._onZoomOut),showCompass&&this._renderButton("compass",compassLabel,this._onResetNorth,this._renderCompass()))}}]),NavigationControl}(base_control_BaseControl);function scale_control_createSuper(Derived){var hasNativeReflectConstruct=function scale_control_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}Object(defineProperty.a)(navigation_control_NavigationControl,"propTypes",navigation_control_propTypes),Object(defineProperty.a)(navigation_control_NavigationControl,"defaultProps",navigation_control_defaultProps);var scale_control_propTypes=Object.assign({},base_control_BaseControl.propTypes,{maxWidth:prop_types_default.a.number,unit:prop_types_default.a.oneOf(["imperial","metric","nautical"])}),scale_control_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{maxWidth:100,unit:"metric"}),scale_control_ScaleControl=function(_BaseControl){Object(inherits.a)(ScaleControl,_BaseControl);var _super=scale_control_createSuper(ScaleControl);function ScaleControl(){var _this;Object(classCallCheck.a)(this,ScaleControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_control",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_mapboxScaleControl",null),_this}return Object(createClass.a)(ScaleControl,[{key:"componentDidMount",value:function componentDidMount(){var mapboxScaleControl=new mapbox_gl_default.a.ScaleControl;mapboxScaleControl._map=this._context.map,mapboxScaleControl._container=this._containerRef.current,this._mapboxScaleControl=mapboxScaleControl,this._update()}},{key:"_update",value:function _update(){var mapboxScaleControl=this._mapboxScaleControl;mapboxScaleControl&&(mapboxScaleControl.options=this.props,mapboxScaleControl._onMove())}},{key:"_render",value:function _render(){return this._control=this._control||react.createElement("div",{ref:this._containerRef,className:"mapboxgl-ctrl mapboxgl-ctrl-scale"}),this._update(),this._control}}]),ScaleControl}(base_control_BaseControl);function canvas_overlay_createSuper(Derived){var hasNativeReflectConstruct=function canvas_overlay_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}Object(defineProperty.a)(scale_control_ScaleControl,"propTypes",scale_control_propTypes),Object(defineProperty.a)(scale_control_ScaleControl,"defaultProps",scale_control_defaultProps);var canvas_overlay_propTypes=Object.assign({},base_control_BaseControl.propTypes,{redraw:prop_types_default.a.func.isRequired}),canvas_overlay_CanvasOverlay=function(_BaseControl){Object(inherits.a)(CanvasOverlay,_BaseControl);var _super=canvas_overlay_createSuper(CanvasOverlay);function CanvasOverlay(){var _this;Object(classCallCheck.a)(this,CanvasOverlay);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_canvas",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_ctx",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_redraw",(function(){var ctx=_this._ctx;if(ctx){var pixelRatio=globals.b.devicePixelRatio||1;ctx.save(),ctx.scale(pixelRatio,pixelRatio);var _this$_context=_this._context,viewport=_this$_context.viewport,isDragging=_this$_context.isDragging;_this.props.redraw({width:viewport.width,height:viewport.height,ctx:ctx,isDragging:isDragging,project:viewport.project.bind(viewport),unproject:viewport.unproject.bind(viewport)}),ctx.restore()}})),_this}return Object(createClass.a)(CanvasOverlay,[{key:"componentDidMount",value:function componentDidMount(){var canvas=this._containerRef.current;canvas&&(this._canvas=canvas,this._ctx=canvas.getContext("2d")),this._redraw()}},{key:"_render",value:function _render(){var pixelRatio=globals.b.devicePixelRatio||1,_this$_context$viewpo=this._context.viewport,width=_this$_context$viewpo.width,height=_this$_context$viewpo.height;return this._redraw(),react.createElement("canvas",{ref:this._containerRef,width:width*pixelRatio,height:height*pixelRatio,style:{width:"".concat(width,"px"),height:"".concat(height,"px"),position:"absolute",left:0,top:0}})}}]),CanvasOverlay}(base_control_BaseControl);function html_overlay_createSuper(Derived){var hasNativeReflectConstruct=function html_overlay_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}Object(defineProperty.a)(canvas_overlay_CanvasOverlay,"propTypes",canvas_overlay_propTypes),Object(defineProperty.a)(canvas_overlay_CanvasOverlay,"defaultProps",{captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1});var html_overlay_propTypes=Object.assign({},base_control_BaseControl.propTypes,{redraw:prop_types_default.a.func.isRequired,style:prop_types_default.a.object}),html_overlay_HTMLOverlay=function(_BaseControl){Object(inherits.a)(HTMLOverlay,_BaseControl);var _super=html_overlay_createSuper(HTMLOverlay);function HTMLOverlay(){return Object(classCallCheck.a)(this,HTMLOverlay),_super.apply(this,arguments)}return Object(createClass.a)(HTMLOverlay,[{key:"_render",value:function _render(){var _this$_context=this._context,viewport=_this$_context.viewport,isDragging=_this$_context.isDragging,style=Object.assign({position:"absolute",left:0,top:0,width:viewport.width,height:viewport.height},this.props.style);return react.createElement("div",{ref:this._containerRef,style:style},this.props.redraw({width:viewport.width,height:viewport.height,isDragging:isDragging,project:viewport.project.bind(viewport),unproject:viewport.unproject.bind(viewport)}))}}]),HTMLOverlay}(base_control_BaseControl);function svg_overlay_createSuper(Derived){var hasNativeReflectConstruct=function svg_overlay_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(hasNativeReflectConstruct){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}Object(defineProperty.a)(html_overlay_HTMLOverlay,"propTypes",html_overlay_propTypes),Object(defineProperty.a)(html_overlay_HTMLOverlay,"defaultProps",{captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1});var svg_overlay_propTypes=Object.assign({},base_control_BaseControl.propTypes,{redraw:prop_types_default.a.func.isRequired,style:prop_types_default.a.object}),svg_overlay_SVGOverlay=function(_BaseControl){Object(inherits.a)(SVGOverlay,_BaseControl);var _super=svg_overlay_createSuper(SVGOverlay);function SVGOverlay(){return Object(classCallCheck.a)(this,SVGOverlay),_super.apply(this,arguments)}return Object(createClass.a)(SVGOverlay,[{key:"_render",value:function _render(){var _this$_context=this._context,viewport=_this$_context.viewport,isDragging=_this$_context.isDragging,style=Object.assign({position:"absolute",left:0,top:0},this.props.style);return react.createElement("svg",{width:viewport.width,height:viewport.height,ref:this._containerRef,style:style},this.props.redraw({width:viewport.width,height:viewport.height,isDragging:isDragging,project:viewport.project.bind(viewport),unproject:viewport.unproject.bind(viewport)}))}}]),SVGOverlay}(base_control_BaseControl);Object(defineProperty.a)(svg_overlay_SVGOverlay,"propTypes",svg_overlay_propTypes),Object(defineProperty.a)(svg_overlay_SVGOverlay,"defaultProps",{captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1});var set_rtl_text_plugin=mapbox_gl_default.a?mapbox_gl_default.a.setRTLTextPlugin:function(){}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return clear})),__webpack_require__.d(__webpack_exports__,"b",(function(){return clearBuffer}));var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_webgl_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(102),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(23);function clear(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$framebuffer=_ref.framebuffer,framebuffer=void 0===_ref$framebuffer?null:_ref$framebuffer,_ref$color=_ref.color,color=void 0===_ref$color?null:_ref$color,_ref$depth=_ref.depth,depth=void 0===_ref$depth?null:_ref$depth,_ref$stencil=_ref.stencil,stencil=void 0===_ref$stencil?null:_ref$stencil,parameters={};framebuffer&&(parameters.framebuffer=framebuffer);var clearFlags=0;color&&(clearFlags|=16384,!0!==color&&(parameters.clearColor=color)),depth&&(clearFlags|=256,!0!==depth&&(parameters.clearDepth=depth)),stencil&&(clearFlags|=1024,!0!==depth&&(parameters.clearStencil=depth)),Object(_utils__WEBPACK_IMPORTED_MODULE_3__.a)(0!==clearFlags,"clear: bad arguments"),Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_1__.k)(gl,parameters,(function(){gl.clear(clearFlags)}))}function clearBuffer(gl){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$framebuffer=_ref2.framebuffer,framebuffer=void 0===_ref2$framebuffer?null:_ref2$framebuffer,_ref2$buffer=_ref2.buffer,buffer=void 0===_ref2$buffer?6144:_ref2$buffer,_ref2$drawBuffer=_ref2.drawBuffer,drawBuffer=void 0===_ref2$drawBuffer?0:_ref2$drawBuffer,_ref2$value=_ref2.value,value=void 0===_ref2$value?[0,0,0,0]:_ref2$value;Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_2__.a)(gl),Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_1__.k)(gl,{framebuffer:framebuffer},(function(){switch(buffer){case 6144:switch(value.constructor){case Int32Array:gl.clearBufferiv(buffer,drawBuffer,value);break;case Uint32Array:gl.clearBufferuiv(buffer,drawBuffer,value);break;case Float32Array:default:gl.clearBufferfv(buffer,drawBuffer,value)}break;case 6145:gl.clearBufferfv(6145,0,[value]);break;case 6146:gl.clearBufferiv(6146,0,[value]);break;case 34041:var _value=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(value,2),depth=_value[0],stencil=_value[1];gl.clearBufferfi(34041,0,depth,stencil);break;default:Object(_utils__WEBPACK_IMPORTED_MODULE_3__.a)(!1,"clear: bad arguments")}}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FEATURES}));var _FEATURES$WEBGL2$FEAT,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_classes_framebuffer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(82),_classes_texture_2d__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(148),FEATURES={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};__webpack_exports__.b=(_FEATURES$WEBGL2$FEAT={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.WEBGL2,[!1,!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.FLOAT_BLEND,["EXT_float_blend"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FLOAT,["OES_texture_float",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ATTACHMENT_RGBA32F,[function checkFloat32ColorAttachment(gl){var testTexture=new _classes_texture_2d__WEBPACK_IMPORTED_MODULE_2__.a(gl,{format:6408,type:5126,dataFormat:6408}),testFb=new _classes_framebuffer__WEBPACK_IMPORTED_MODULE_1__.a(gl,{id:"test-framebuffer",check:!1,attachments:Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},36064,testTexture)}),status=testFb.getStatus();return testTexture.delete(),testFb.delete(),36053===status},"EXT_color_buffer_float"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ATTACHMENT_HALF_FLOAT,["EXT_color_buffer_half_float"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),_FEATURES$WEBGL2$FEAT)},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return formatSpecifier}));var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier(specifier){this.fill=void 0===specifier.fill?" ":specifier.fill+"",this.align=void 0===specifier.align?">":specifier.align+"",this.sign=void 0===specifier.sign?"-":specifier.sign+"",this.symbol=void 0===specifier.symbol?"":specifier.symbol+"",this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":specifier.type+""}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},function(module,__webpack_exports__,__webpack_require__){"use strict";function sortKD(ids,coords,nodeSize,left,right,depth){if(right-left<=nodeSize)return;const m=left+right>>1;!function sort_select(ids,coords,k,left,right,inc){for(;right>left;){if(right-left>600){const n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1),newLeft=Math.max(left,Math.floor(k-m*s/n+sd)),newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));sort_select(ids,coords,k,newLeft,newRight,inc)}const t=coords[2*k+inc];let i=left,j=right;for(swapItem(ids,coords,left,k),coords[2*right+inc]>t&&swapItem(ids,coords,left,right);i<j;){for(swapItem(ids,coords,i,j),i++,j--;coords[2*i+inc]<t;)i++;for(;coords[2*j+inc]>t;)j--}coords[2*left+inc]===t?swapItem(ids,coords,left,j):(j++,swapItem(ids,coords,j,right)),j<=k&&(left=j+1),k<=j&&(right=j-1)}}(ids,coords,m,left,right,depth%2),sortKD(ids,coords,nodeSize,left,m-1,depth+1),sortKD(ids,coords,nodeSize,m+1,right,depth+1)}function swapItem(ids,coords,i,j){swap(ids,i,j),swap(coords,2*i,2*j),swap(coords,2*i+1,2*j+1)}function swap(arr,i,j){const tmp=arr[i];arr[i]=arr[j],arr[j]=tmp}function sqDist(ax,ay,bx,by){const dx=ax-bx,dy=ay-by;return dx*dx+dy*dy}__webpack_require__.d(__webpack_exports__,"a",(function(){return src_KDBush}));const defaultGetX=p=>p[0],defaultGetY=p=>p[1];class src_KDBush{constructor(points,getX=defaultGetX,getY=defaultGetY,nodeSize=64,ArrayType=Float64Array){this.nodeSize=nodeSize,this.points=points;const IndexArrayType=points.length<65536?Uint16Array:Uint32Array,ids=this.ids=new IndexArrayType(points.length),coords=this.coords=new ArrayType(2*points.length);for(let i=0;i<points.length;i++)ids[i]=i,coords[2*i]=getX(points[i]),coords[2*i+1]=getY(points[i]);sortKD(ids,coords,nodeSize,0,ids.length-1,0)}range(minX,minY,maxX,maxY){return function range(ids,coords,minX,minY,maxX,maxY,nodeSize){const stack=[0,ids.length-1,0],result=[];let x,y;for(;stack.length;){const axis=stack.pop(),right=stack.pop(),left=stack.pop();if(right-left<=nodeSize){for(let i=left;i<=right;i++)x=coords[2*i],y=coords[2*i+1],x>=minX&&x<=maxX&&y>=minY&&y<=maxY&&result.push(ids[i]);continue}const m=Math.floor((left+right)/2);x=coords[2*m],y=coords[2*m+1],x>=minX&&x<=maxX&&y>=minY&&y<=maxY&&result.push(ids[m]);const nextAxis=(axis+1)%2;(0===axis?minX<=x:minY<=y)&&(stack.push(left),stack.push(m-1),stack.push(nextAxis)),(0===axis?maxX>=x:maxY>=y)&&(stack.push(m+1),stack.push(right),stack.push(nextAxis))}return result}(this.ids,this.coords,minX,minY,maxX,maxY,this.nodeSize)}within(x,y,r){return function within(ids,coords,qx,qy,r,nodeSize){const stack=[0,ids.length-1,0],result=[],r2=r*r;for(;stack.length;){const axis=stack.pop(),right=stack.pop(),left=stack.pop();if(right-left<=nodeSize){for(let i=left;i<=right;i++)sqDist(coords[2*i],coords[2*i+1],qx,qy)<=r2&&result.push(ids[i]);continue}const m=Math.floor((left+right)/2),x=coords[2*m],y=coords[2*m+1];sqDist(x,y,qx,qy)<=r2&&result.push(ids[m]);const nextAxis=(axis+1)%2;(0===axis?qx-r<=x:qy-r<=y)&&(stack.push(left),stack.push(m-1),stack.push(nextAxis)),(0===axis?qx+r>=x:qy+r>=y)&&(stack.push(m+1),stack.push(right),stack.push(nextAxis))}return result}(this.ids,this.coords,x,y,r,this.nodeSize)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return rgbBasis}));var src_color=__webpack_require__(54);function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}var d3_interpolate_src_color=__webpack_require__(100);__webpack_exports__.a=function rgbGamma(y){var color=Object(d3_interpolate_src_color.b)(y);function rgb(start,end){var r=color((start=Object(src_color.f)(start)).r,(end=Object(src_color.f)(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=Object(d3_interpolate_src_color.a)(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=Object(src_color.f)(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}var rgbBasis=rgbSpline((function(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}}));rgbSpline((function(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return readPixelsToArray})),__webpack_require__.d(__webpack_exports__,"a",(function(){return copyToDataUrl}));__webpack_require__(41);var classes_framebuffer=__webpack_require__(82),typed_array_utils=(__webpack_require__(60),__webpack_require__(9),__webpack_require__(102),__webpack_require__(101)),assert=__webpack_require__(23);function glFormatToComponents(format){switch(format){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(assert.a)(!1),0}}var texture_utils=__webpack_require__(422);function readPixelsToArray(source){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$sourceX=_ref.sourceX,sourceX=void 0===_ref$sourceX?0:_ref$sourceX,_ref$sourceY=_ref.sourceY,sourceY=void 0===_ref$sourceY?0:_ref$sourceY,_ref$sourceFormat=_ref.sourceFormat,sourceFormat=void 0===_ref$sourceFormat?6408:_ref$sourceFormat,_ref$sourceAttachment=_ref.sourceAttachment,sourceAttachment=void 0===_ref$sourceAttachment?36064:_ref$sourceAttachment,_ref$target=_ref.target,target=void 0===_ref$target?null:_ref$target,sourceWidth=_ref.sourceWidth,sourceHeight=_ref.sourceHeight,sourceType=_ref.sourceType,_getFramebuffer=getFramebuffer(source),framebuffer=_getFramebuffer.framebuffer,deleteFramebuffer=_getFramebuffer.deleteFramebuffer;Object(assert.a)(framebuffer);var gl=framebuffer.gl,handle=framebuffer.handle,attachments=framebuffer.attachments;sourceWidth=sourceWidth||framebuffer.width,sourceHeight=sourceHeight||framebuffer.height,36064===sourceAttachment&&null===handle&&(sourceAttachment=1028),Object(assert.a)(attachments[sourceAttachment]),target=getPixelArray(target,sourceType=sourceType||attachments[sourceAttachment].type,sourceFormat,sourceWidth,sourceHeight),sourceType=sourceType||Object(typed_array_utils.b)(target);var prevHandle=gl.bindFramebuffer(36160,handle);return gl.readPixels(sourceX,sourceY,sourceWidth,sourceHeight,sourceFormat,sourceType,target),gl.bindFramebuffer(36160,prevHandle||null),deleteFramebuffer&&framebuffer.delete(),target}function copyToDataUrl(source){for(var _ref3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref3$sourceAttachmen=_ref3.sourceAttachment,sourceAttachment=void 0===_ref3$sourceAttachmen?36064:_ref3$sourceAttachmen,_ref3$targetMaxHeight=_ref3.targetMaxHeight,targetMaxHeight=void 0===_ref3$targetMaxHeight?Number.MAX_SAFE_INTEGER:_ref3$targetMaxHeight,data=readPixelsToArray(source,{sourceAttachment:sourceAttachment}),width=source.width,height=source.height;height>targetMaxHeight;){var _scalePixels=Object(typed_array_utils.d)({data:data,width:width,height:height});data=_scalePixels.data,width=_scalePixels.width,height=_scalePixels.height}Object(typed_array_utils.a)({data:data,width:width,height:height});var canvas=document.createElement("canvas");canvas.width=width,canvas.height=height;var context=canvas.getContext("2d"),imageData=context.createImageData(width,height);return imageData.data.set(data),context.putImageData(imageData,0,0),canvas.toDataURL()}function getFramebuffer(source){return source instanceof classes_framebuffer.a?{framebuffer:source,deleteFramebuffer:!1}:{framebuffer:Object(texture_utils.b)(source),deleteFramebuffer:!0}}function getPixelArray(pixelArray,type,format,width,height){return pixelArray||(type=type||5121,new(Object(typed_array_utils.c)(type,{clamped:!1}))(width*height*glFormatToComponents(format)))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return checkProps}));var _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9);function checkProps(className,props,propChecks){var _propChecks$removedPr=propChecks.removedProps,removedProps=void 0===_propChecks$removedPr?{}:_propChecks$removedPr,_propChecks$deprecate=propChecks.deprecatedProps,deprecatedProps=void 0===_propChecks$deprecate?{}:_propChecks$deprecate,_propChecks$replacedP=propChecks.replacedProps,replacedProps=void 0===_propChecks$replacedP?{}:_propChecks$replacedP;for(var propName in removedProps)if(propName in props){var replacement=removedProps[propName]?"".concat(className,".").concat(removedProps[propName]):"N/A";_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.g.removed("".concat(className,".").concat(propName),replacement)()}for(var _propName in deprecatedProps)if(_propName in props){var _replacementProp=deprecatedProps[_propName];_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.g.deprecated("".concat(className,".").concat(_propName),"".concat(className,".").concat(_replacementProp))()}var newProps=null;for(var _propName2 in replacedProps)if(_propName2 in props){var _replacementProp2=replacedProps[_propName2];_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.g.deprecated("".concat(className,".").concat(_propName2),"".concat(className,".").concat(_replacementProp2))(),(newProps=newProps||Object.assign({},props))[_replacementProp2]=props[_propName2],delete newProps[_propName2]}return newProps||props}},,function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString;module.exports=function isArguments(value){var str=toStr.call(value),isArgs="[object Arguments]"===str;return isArgs||(isArgs="[object Array]"!==str&&null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Function]"===toStr.call(value.callee)),isArgs}},function(module,exports,__webpack_require__){"use strict";var functionsHaveNames=function functionsHaveNames(){return"string"==typeof function f(){}.name},gOPD=Object.getOwnPropertyDescriptor;if(gOPD)try{gOPD([],"length")}catch(e){gOPD=null}functionsHaveNames.functionsHaveConfigurableNames=function functionsHaveConfigurableNames(){return functionsHaveNames()&&gOPD&&!!gOPD((function(){}),"name").configurable};var $bind=Function.prototype.bind;functionsHaveNames.boundFunctionsHaveNames=function boundFunctionsHaveNames(){return functionsHaveNames()&&"function"==typeof $bind&&""!==function f(){}.bind().name},module.exports=functionsHaveNames},function(module,exports,__webpack_require__){"use strict";module.exports=function hasSymbols(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var obj={},sym=Symbol("test"),symObj=Object(sym);if("string"==typeof sym)return!1;if("[object Symbol]"!==Object.prototype.toString.call(sym))return!1;if("[object Symbol]"!==Object.prototype.toString.call(symObj))return!1;for(sym in obj[sym]=42,obj)return!1;if("function"==typeof Object.keys&&0!==Object.keys(obj).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(obj).length)return!1;var syms=Object.getOwnPropertySymbols(obj);if(1!==syms.length||syms[0]!==sym)return!1;if(!Object.prototype.propertyIsEnumerable.call(obj,sym))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(42!==descriptor.value||!0!==descriptor.enumerable)return!1}return!0}},function(module,exports,__webpack_require__){"use strict";var ES5ToInteger=__webpack_require__(298),ToNumber=__webpack_require__(454);module.exports=function ToInteger(value){var number=ToNumber(value);return ES5ToInteger(number)}},function(module,exports,__webpack_require__){"use strict";var $Math=__webpack_require__(13)("%Math%"),ToNumber=__webpack_require__(452),$isNaN=__webpack_require__(133),$isFinite=__webpack_require__(229),$sign=__webpack_require__(453),$floor=$Math.floor,$abs=$Math.abs;module.exports=function ToInteger(value){var number=ToNumber(value);return $isNaN(number)?0:0!==number&&$isFinite(number)?$sign(number)*$floor($abs(number)):number}},function(module,exports,__webpack_require__){"use strict";var $test=__webpack_require__(13)("RegExp.prototype.test"),callBind=__webpack_require__(228);module.exports=function regexTester(regex){return callBind($test,regex)}},function(module,exports,__webpack_require__){"use strict";var hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,isPrimitive=__webpack_require__(456),isCallable=__webpack_require__(227),isDate=__webpack_require__(457),isSymbol=__webpack_require__(301),ordinaryToPrimitive=function OrdinaryToPrimitive(O,hint){if(null==O)throw new TypeError("Cannot call method on "+O);if("string"!=typeof hint||"number"!==hint&&"string"!==hint)throw new TypeError('hint must be "string" or "number"');var method,result,i,methodNames="string"===hint?["toString","valueOf"]:["valueOf","toString"];for(i=0;i<methodNames.length;++i)if(method=O[methodNames[i]],isCallable(method)&&(result=method.call(O),isPrimitive(result)))return result;throw new TypeError("No default value")},GetMethod=function GetMethod(O,P){var func=O[P];if(null!=func){if(!isCallable(func))throw new TypeError(func+" returned for property "+P+" of object "+O+" is not a function");return func}};module.exports=function ToPrimitive(input){if(isPrimitive(input))return input;var exoticToPrim,hint="default";if(arguments.length>1&&(arguments[1]===String?hint="string":arguments[1]===Number&&(hint="number")),hasSymbols&&(Symbol.toPrimitive?exoticToPrim=GetMethod(input,Symbol.toPrimitive):isSymbol(input)&&(exoticToPrim=Symbol.prototype.valueOf)),void 0!==exoticToPrim){var result=exoticToPrim.call(input,hint);if(isPrimitive(result))return result;throw new TypeError("unable to convert exotic object to primitive")}return"default"===hint&&(isDate(input)||isSymbol(input))&&(hint="string"),ordinaryToPrimitive(input,"default"===hint?"number":hint)}},function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString;if(__webpack_require__(68)()){var symToStr=Symbol.prototype.toString,symStringRegex=/^Symbol\(.*\)$/;module.exports=function isSymbol(value){if("symbol"==typeof value)return!0;if("[object Symbol]"!==toStr.call(value))return!1;try{return function isRealSymbolObject(value){return"symbol"==typeof value.valueOf()&&symStringRegex.test(symToStr.call(value))}(value)}catch(e){return!1}}}else module.exports=function isSymbol(value){return!1}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%");module.exports=function CheckObjectCoercible(value,optMessage){if(null==value)throw new $TypeError(optMessage||"Cannot call method on "+value);return value}},function(module,exports,__webpack_require__){"use strict";var ES5ToInteger=__webpack_require__(298),ToNumber=__webpack_require__(304);module.exports=function ToInteger(value){var number=ToNumber(value);return ES5ToInteger(number)}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),$TypeError=GetIntrinsic("%TypeError%"),$Number=GetIntrinsic("%Number%"),$RegExp=GetIntrinsic("%RegExp%"),$parseInteger=GetIntrinsic("%parseInt%"),callBound=__webpack_require__(32),regexTester=__webpack_require__(299),isPrimitive=__webpack_require__(230),$strSlice=callBound("String.prototype.slice"),isBinary=regexTester(/^0b[01]+$/i),isOctal=regexTester(/^0o[0-7]+$/i),isInvalidHexLiteral=regexTester(/^[-+]0x[0-9a-f]+$/i),hasNonWS=regexTester(new $RegExp("["+["","",""].join("")+"]","g")),ws=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),trimRegex=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),$replace=callBound("String.prototype.replace"),ToPrimitive=__webpack_require__(305);module.exports=function ToNumber(argument){var value=isPrimitive(argument)?argument:ToPrimitive(argument,$Number);if("symbol"==typeof value)throw new $TypeError("Cannot convert a Symbol value to a number");if("string"==typeof value){if(isBinary(value))return ToNumber($parseInteger($strSlice(value,2),2));if(isOctal(value))return ToNumber($parseInteger($strSlice(value,2),8));if(hasNonWS(value)||isInvalidHexLiteral(value))return NaN;var trimmed=function(value){return $replace(value,trimRegex,"")}(value);if(trimmed!==value)return ToNumber(trimmed)}return $Number(value)}},function(module,exports,__webpack_require__){"use strict";var toPrimitive=__webpack_require__(300);module.exports=function ToPrimitive(input){return arguments.length>1?toPrimitive(input,arguments[1]):toPrimitive(input)}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),DefineOwnProperty=__webpack_require__(232),FromPropertyDescriptor=__webpack_require__(307),OrdinaryGetOwnProperty=__webpack_require__(478),IsDataDescriptor=__webpack_require__(312),IsExtensible=__webpack_require__(480),IsPropertyKey=__webpack_require__(76),SameValue=__webpack_require__(234),Type=__webpack_require__(28);module.exports=function CreateDataProperty(O,P,V){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var oldDesc=OrdinaryGetOwnProperty(O,P),extensible=!oldDesc||IsExtensible(O);return!(oldDesc&&(!oldDesc["[[Writable]]"]||!oldDesc["[[Configurable]]"])||!extensible)&&DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,O,P,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":V,"[[Writable]]":!0})}},function(module,exports,__webpack_require__){"use strict";var assertRecord=__webpack_require__(134),Type=__webpack_require__(28);module.exports=function FromPropertyDescriptor(Desc){if(void 0===Desc)return Desc;assertRecord(Type,"Property Descriptor","Desc",Desc);var obj={};return"[[Value]]"in Desc&&(obj.value=Desc["[[Value]]"]),"[[Writable]]"in Desc&&(obj.writable=Desc["[[Writable]]"]),"[[Get]]"in Desc&&(obj.get=Desc["[[Get]]"]),"[[Set]]"in Desc&&(obj.set=Desc["[[Set]]"]),"[[Enumerable]]"in Desc&&(obj.enumerable=Desc["[[Enumerable]]"]),"[[Configurable]]"in Desc&&(obj.configurable=Desc["[[Configurable]]"]),obj}},function(module,exports,__webpack_require__){"use strict";module.exports=function Type(x){return null===x?"Null":void 0===x?"Undefined":"function"==typeof x||"object"==typeof x?"Object":"number"==typeof x?"Number":"boolean"==typeof x?"Boolean":"string"==typeof x?"String":void 0}},function(module,exports,__webpack_require__){"use strict";var $match=__webpack_require__(13)("%Symbol.match%",!0),hasRegExpMatcher=__webpack_require__(310),ToBoolean=__webpack_require__(233);module.exports=function IsRegExp(argument){if(!argument||"object"!=typeof argument)return!1;if($match){var isRegExp=argument[$match];if(void 0!==isRegExp)return ToBoolean(isRegExp)}return hasRegExpMatcher(argument)}},function(module,exports,__webpack_require__){"use strict";var regexExec,isRegexMarker,badStringifier,hasToStringTag=__webpack_require__(68)()&&"symbol"==typeof Symbol.toStringTag;if(hasToStringTag){regexExec=Function.call.bind(RegExp.prototype.exec),isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},"symbol"==typeof Symbol.toPrimitive&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker)}var toStr=Object.prototype.toString;module.exports=hasToStringTag?function isRegex(value){if(!value||"object"!=typeof value)return!1;try{regexExec(value,badStringifier)}catch(e){return e===isRegexMarker}}:function isRegex(value){return!(!value||"object"!=typeof value&&"function"!=typeof value)&&"[object RegExp]"===toStr.call(value)}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(63),$TypeError=__webpack_require__(13)("%TypeError%"),Type=__webpack_require__(28),ToBoolean=__webpack_require__(233),IsCallable=__webpack_require__(87);module.exports=function ToPropertyDescriptor(Obj){if("Object"!==Type(Obj))throw new $TypeError("ToPropertyDescriptor requires an object");var desc={};if(has(Obj,"enumerable")&&(desc["[[Enumerable]]"]=ToBoolean(Obj.enumerable)),has(Obj,"configurable")&&(desc["[[Configurable]]"]=ToBoolean(Obj.configurable)),has(Obj,"value")&&(desc["[[Value]]"]=Obj.value),has(Obj,"writable")&&(desc["[[Writable]]"]=ToBoolean(Obj.writable)),has(Obj,"get")){var getter=Obj.get;if(void 0!==getter&&!IsCallable(getter))throw new TypeError("getter must be a function");desc["[[Get]]"]=getter}if(has(Obj,"set")){var setter=Obj.set;if(void 0!==setter&&!IsCallable(setter))throw new $TypeError("setter must be a function");desc["[[Set]]"]=setter}if((has(desc,"[[Get]]")||has(desc,"[[Set]]"))&&(has(desc,"[[Value]]")||has(desc,"[[Writable]]")))throw new $TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return desc}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(63),assertRecord=__webpack_require__(134),Type=__webpack_require__(28);module.exports=function IsDataDescriptor(Desc){return void 0!==Desc&&(assertRecord(Type,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Value]]")&&!has(Desc,"[[Writable]]")))}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(227)},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),has=__webpack_require__(63),$TypeError=GetIntrinsic("%TypeError%");module.exports=function IsPropertyDescriptor(ES,Desc){if("Object"!==ES.Type(Desc))return!1;var allowed={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var key in Desc)if(has(Desc,key)&&!allowed[key])return!1;if(ES.IsDataDescriptor(Desc)&&ES.IsAccessorDescriptor(Desc))throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0}},function(module,exports,__webpack_require__){"use strict";var $construct=__webpack_require__(13)("%Reflect.construct%",!0),DefinePropertyOrThrow=__webpack_require__(502);try{DefinePropertyOrThrow({},"",{"[[Get]]":function(){}})}catch(e){DefinePropertyOrThrow=null}if(DefinePropertyOrThrow&&$construct){var isConstructorMarker={},badArrayLike={};DefinePropertyOrThrow(badArrayLike,"length",{"[[Get]]":function(){throw isConstructorMarker},"[[Enumerable]]":!0}),module.exports=function IsConstructor(argument){try{$construct(argument,badArrayLike)}catch(err){return err===isConstructorMarker}}}else module.exports=function IsConstructor(argument){return"function"==typeof argument&&!!argument.prototype}},function(module,exports,__webpack_require__){"use strict";var $Math=__webpack_require__(13)("%Math%"),$floor=$Math.floor,$abs=$Math.abs,$isNaN=__webpack_require__(133),$isFinite=__webpack_require__(229);module.exports=function IsInteger(argument){if("number"!=typeof argument||$isNaN(argument)||!$isFinite(argument))return!1;var abs=$abs(argument);return $floor(abs)===abs}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),MAX_SAFE_INTEGER=__webpack_require__(186),Call=__webpack_require__(104),CreateDataPropertyOrThrow=__webpack_require__(238),Get=__webpack_require__(59),HasProperty=__webpack_require__(318),IsArray=__webpack_require__(157),ToLength=__webpack_require__(118),ToString=__webpack_require__(103);module.exports=function FlattenIntoArray(target,source,sourceLen,start,depth){var mapperFunction;arguments.length>5&&(mapperFunction=arguments[5]);for(var targetIndex=start,sourceIndex=0;sourceIndex<sourceLen;){var P=ToString(sourceIndex),exists=HasProperty(source,P);if(!0===exists){var element=Get(source,P);if(void 0!==mapperFunction){if(arguments.length<=6)throw new $TypeError("Assertion failed: thisArg is required when mapperFunction is provided");element=Call(mapperFunction,arguments[6],[element,sourceIndex,source])}var shouldFlatten=!1;if(depth>0&&(shouldFlatten=IsArray(element)),shouldFlatten){var elementLen=ToLength(Get(element,"length"));targetIndex=FlattenIntoArray(target,element,elementLen,targetIndex,depth-1)}else{if(targetIndex>=MAX_SAFE_INTEGER)throw new $TypeError("index too large");CreateDataPropertyOrThrow(target,ToString(targetIndex),element),targetIndex+=1}}sourceIndex+=1}return targetIndex}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),IsPropertyKey=__webpack_require__(76),Type=__webpack_require__(28);module.exports=function HasProperty(O,P){if("Object"!==Type(O))throw new $TypeError("Assertion failed: `O` must be an Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: `P` must be a Property Key");return P in O}},function(module,exports,__webpack_require__){"use strict";var getInferredName;try{getInferredName=Function("s","return { [s]() {} }[s].name;")}catch(e){}module.exports=getInferredName&&"inferred"===function(){}.name?getInferredName:null},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),IsInteger=__webpack_require__(316),Type=__webpack_require__(28),MAX_SAFE_INTEGER=__webpack_require__(186),$TypeError=GetIntrinsic("%TypeError%"),$charCodeAt=__webpack_require__(32)("String.prototype.charCodeAt");module.exports=function AdvanceStringIndex(S,index,unicode){if("String"!==Type(S))throw new $TypeError("Assertion failed: `S` must be a String");if(!IsInteger(index)||index<0||index>MAX_SAFE_INTEGER)throw new $TypeError("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if("Boolean"!==Type(unicode))throw new $TypeError("Assertion failed: `unicode` must be a Boolean");if(!unicode)return index+1;if(index+1>=S.length)return index+1;var first=$charCodeAt(S,index);if(first<55296||first>56319)return index+1;var second=$charCodeAt(S,index+1);return second<56320||second>57343?index+1:index+2}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),IsPropertyKey=__webpack_require__(76),ToObject=__webpack_require__(158);module.exports=function GetV(V,P){if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return ToObject(V)[P]}},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(44),callBind=__webpack_require__(228),implementation=__webpack_require__(323),getPolyfill=__webpack_require__(324),shim=__webpack_require__(532),flagsBound=callBind(implementation);define(flagsBound,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=flagsBound},function(module,exports,__webpack_require__){"use strict";var $Object=Object,$TypeError=TypeError;module.exports=function flags(){if(null!=this&&this!==$Object(this))throw new $TypeError("RegExp.prototype.flags getter called on non-object");var result="";return this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.dotAll&&(result+="s"),this.unicode&&(result+="u"),this.sticky&&(result+="y"),result}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(323),supportsDescriptors=__webpack_require__(44).supportsDescriptors,$gOPD=Object.getOwnPropertyDescriptor,$TypeError=TypeError;module.exports=function getPolyfill(){if(!supportsDescriptors)throw new $TypeError("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var descriptor=$gOPD(RegExp.prototype,"flags");if(descriptor&&"function"==typeof descriptor.get&&"boolean"==typeof/a/.dotAll)return descriptor.get}return implementation}},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(68)(),regexpMatchAll=__webpack_require__(533);module.exports=function getRegExpMatchAllPolyfill(){return hasSymbols&&"symbol"==typeof Symbol.matchAll&&"function"==typeof RegExp.prototype[Symbol.matchAll]?RegExp.prototype[Symbol.matchAll]:regexpMatchAll}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),IsPropertyKey=__webpack_require__(76),SameValue=__webpack_require__(234),Type=__webpack_require__(28),noThrowOnStrictViolation=function(){try{return delete[].length,!0}catch(e){return!1}}();module.exports=function Set(O,P,V,Throw){if("Object"!==Type(O))throw new $TypeError("Assertion failed: `O` must be an Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: `P` must be a Property Key");if("Boolean"!==Type(Throw))throw new $TypeError("Assertion failed: `Throw` must be a Boolean");if(Throw){if(O[P]=V,noThrowOnStrictViolation&&!SameValue(O[P],V))throw new $TypeError("Attempted to assign to readonly property.");return!0}try{return O[P]=V,!noThrowOnStrictViolation||SameValue(O[P],V)}catch(e){return!1}}},function(module,exports,__webpack_require__){"use strict";var ArraySpeciesCreate=__webpack_require__(236),Call=__webpack_require__(104),CreateDataPropertyOrThrow=__webpack_require__(238),Get=__webpack_require__(59),HasProperty=__webpack_require__(318),IsCallable=__webpack_require__(87),ToUint32=__webpack_require__(558),ToObject=__webpack_require__(158),ToString=__webpack_require__(103),callBound=__webpack_require__(32),isString=__webpack_require__(231),boxedString=Object("a"),splitString="a"!==boxedString[0]||!(0 in boxedString),strSplit=callBound("String.prototype.split");module.exports=function map(callbackfn){var T,O=ToObject(this),self=splitString&&isString(O)?strSplit(O,""):O,len=ToUint32(self.length);if(!IsCallable(callbackfn))throw new TypeError("Array.prototype.map callback must be a function");arguments.length>1&&(T=arguments[1]);for(var A=ArraySpeciesCreate(O,len),k=0;k<len;){var Pk=ToString(k),kPresent=HasProperty(O,Pk);if(kPresent){var kValue=Get(O,Pk),mappedValue=Call(callbackfn,T,[kValue,k,O]);CreateDataPropertyOrThrow(A,Pk,mappedValue)}k+=1}return A}},function(module,exports,__webpack_require__){"use strict";var arrayMethodBoxesProperly=__webpack_require__(559),implementation=__webpack_require__(327);module.exports=function getPolyfill(){var method=Array.prototype.map;return arrayMethodBoxesProperly(method)?method:implementation}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),fails=__webpack_require__(35),createElement=__webpack_require__(241);module.exports=!DESCRIPTORS&&!fails((function(){return 7!=Object.defineProperty(createElement("div"),"a",{get:function(){return 7}}).a}))},function(module,exports,__webpack_require__){var global=__webpack_require__(30),setGlobal=__webpack_require__(242),store=global["__core-js_shared__"]||setGlobal("__core-js_shared__",{});module.exports=store},function(module,exports,__webpack_require__){var global=__webpack_require__(30),inspectSource=__webpack_require__(243),WeakMap=global.WeakMap;module.exports="function"==typeof WeakMap&&/native code/.test(inspectSource(WeakMap))},function(module,exports,__webpack_require__){var has=__webpack_require__(50),ownKeys=__webpack_require__(563),getOwnPropertyDescriptorModule=__webpack_require__(159),definePropertyModule=__webpack_require__(52);module.exports=function(target,source){for(var keys=ownKeys(source),defineProperty=definePropertyModule.f,getOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,i=0;i<keys.length;i++){var key=keys[i];has(target,key)||defineProperty(target,key,getOwnPropertyDescriptor(source,key))}}},function(module,exports,__webpack_require__){var has=__webpack_require__(50),toIndexedObject=__webpack_require__(105),indexOf=__webpack_require__(246).indexOf,hiddenKeys=__webpack_require__(163);module.exports=function(object,names){var key,O=toIndexedObject(object),i=0,result=[];for(key in O)!has(hiddenKeys,key)&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~indexOf(result,key)||result.push(key));return result}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(192),max=Math.max,min=Math.min;module.exports=function(index,length){var integer=toInteger(index);return integer<0?max(integer+length,0):min(integer,length)}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40),isArray=__webpack_require__(164),SPECIES=__webpack_require__(39)("species");module.exports=function(originalArray,length){var C;return isArray(originalArray)&&("function"!=typeof(C=originalArray.constructor)||C!==Array&&!isArray(C.prototype)?isObject(C)&&null===(C=C[SPECIES])&&(C=void 0):C=void 0),new(void 0===C?Array:C)(0===length?0:length)}},function(module,exports,__webpack_require__){var NATIVE_SYMBOL=__webpack_require__(250);module.exports=NATIVE_SYMBOL&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(module,exports,__webpack_require__){var TO_STRING_TAG_SUPPORT=__webpack_require__(253),classofRaw=__webpack_require__(89),TO_STRING_TAG=__webpack_require__(39)("toStringTag"),CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}());module.exports=TO_STRING_TAG_SUPPORT?classofRaw:function(it){var O,tag,result;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(tag=function(it,key){try{return it[key]}catch(error){}}(O=Object(it),TO_STRING_TAG))?tag:CORRECT_ARGUMENTS?classofRaw(O):"Object"==(result=classofRaw(O))&&"function"==typeof O.callee?"Arguments":result}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),definePropertyModule=__webpack_require__(52),anObject=__webpack_require__(51),objectKeys=__webpack_require__(165);module.exports=DESCRIPTORS?Object.defineProperties:function defineProperties(O,Properties){anObject(O);for(var key,keys=objectKeys(Properties),length=keys.length,index=0;length>index;)definePropertyModule.f(O,key=keys[index++],Properties[key]);return O}},function(module,exports,__webpack_require__){var getBuiltIn=__webpack_require__(135);module.exports=getBuiltIn("document","documentElement")},function(module,exports,__webpack_require__){var wellKnownSymbol=__webpack_require__(39);exports.f=wellKnownSymbol},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={ClientApi:!0,defaultDecorateStory:!0,addDecorator:!0,addParameters:!0,StoryStore:!0,ConfigApi:!0,subscriptionsStore:!0,pathToId:!0,getQueryParams:!0,getQueryParam:!0};Object.defineProperty(exports,"ClientApi",{enumerable:!0,get:function get(){return _client_api.default}}),Object.defineProperty(exports,"defaultDecorateStory",{enumerable:!0,get:function get(){return _client_api.defaultDecorateStory}}),Object.defineProperty(exports,"addDecorator",{enumerable:!0,get:function get(){return _client_api.addDecorator}}),Object.defineProperty(exports,"addParameters",{enumerable:!0,get:function get(){return _client_api.addParameters}}),Object.defineProperty(exports,"StoryStore",{enumerable:!0,get:function get(){return _story_store.default}}),Object.defineProperty(exports,"ConfigApi",{enumerable:!0,get:function get(){return _config_api.default}}),Object.defineProperty(exports,"subscriptionsStore",{enumerable:!0,get:function get(){return _subscriptions_store.default}}),Object.defineProperty(exports,"pathToId",{enumerable:!0,get:function get(){return _pathToId.default}}),Object.defineProperty(exports,"getQueryParams",{enumerable:!0,get:function get(){return _queryparams.getQueryParams}}),Object.defineProperty(exports,"getQueryParam",{enumerable:!0,get:function get(){return _queryparams.getQueryParam}});var _client_api=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(596)),_story_store=_interopRequireDefault(__webpack_require__(739)),_config_api=_interopRequireDefault(__webpack_require__(750)),_subscriptions_store=_interopRequireDefault(__webpack_require__(384)),_pathToId=_interopRequireDefault(__webpack_require__(751)),_queryparams=__webpack_require__(752),_hooks=__webpack_require__(279);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return cache},cache}Object.keys(_hooks).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _hooks[key]}}))}))},function(module,exports,__webpack_require__){"use strict";var $forEach=__webpack_require__(108).forEach,arrayMethodIsStrict=__webpack_require__(137),arrayMethodUsesToLength=__webpack_require__(80),STRICT_METHOD=arrayMethodIsStrict("forEach"),USES_TO_LENGTH=arrayMethodUsesToLength("forEach");module.exports=STRICT_METHOD&&USES_TO_LENGTH?[].forEach:function forEach(callbackfn){return $forEach(this,callbackfn,arguments.length>1?arguments[1]:void 0)}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(51);module.exports=function(iterator,fn,value,ENTRIES){try{return ENTRIES?fn(anObject(value)[0],value[1]):fn(value)}catch(error){var returnMethod=iterator.return;throw void 0!==returnMethod&&anObject(returnMethod.call(iterator)),error}}},function(module,exports,__webpack_require__){var wellKnownSymbol=__webpack_require__(39),Iterators=__webpack_require__(169),ITERATOR=wellKnownSymbol("iterator"),ArrayPrototype=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayPrototype[ITERATOR]===it)}},function(module,exports,__webpack_require__){var classof=__webpack_require__(337),Iterators=__webpack_require__(169),ITERATOR=__webpack_require__(39)("iterator");module.exports=function(it){if(null!=it)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},function(module,exports,__webpack_require__){"use strict";var IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator,getPrototypeOf=__webpack_require__(258),createNonEnumerableProperty=__webpack_require__(78),has=__webpack_require__(50),wellKnownSymbol=__webpack_require__(39),IS_PURE=__webpack_require__(162),ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1;[].keys&&("next"in(arrayIterator=[].keys())?(PrototypeOfArrayIteratorPrototype=getPrototypeOf(getPrototypeOf(arrayIterator)))!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype):BUGGY_SAFARI_ITERATORS=!0),null==IteratorPrototype&&(IteratorPrototype={}),IS_PURE||has(IteratorPrototype,ITERATOR)||createNonEnumerableProperty(IteratorPrototype,ITERATOR,(function(){return this})),module.exports={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS}},function(module,exports,__webpack_require__){var fails=__webpack_require__(35);module.exports=!fails((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),$reduce=__webpack_require__(600).left,arrayMethodIsStrict=__webpack_require__(137),arrayMethodUsesToLength=__webpack_require__(80),STRICT_METHOD=arrayMethodIsStrict("reduce"),USES_TO_LENGTH=arrayMethodUsesToLength("reduce",{1:0});$({target:"Array",proto:!0,forced:!STRICT_METHOD||!USES_TO_LENGTH},{reduce:function reduce(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),objectKeys=__webpack_require__(165),toIndexedObject=__webpack_require__(105),propertyIsEnumerable=__webpack_require__(187).f,createMethod=function(TO_ENTRIES){return function(it){for(var key,O=toIndexedObject(it),keys=objectKeys(O),length=keys.length,i=0,result=[];length>i;)key=keys[i++],DESCRIPTORS&&!propertyIsEnumerable.call(O,key)||result.push(TO_ENTRIES?[key,O[key]]:O[key]);return result}};module.exports={entries:createMethod(!0),values:createMethod(!1)}},function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(51);module.exports=function(){var that=anObject(this),result="";return that.global&&(result+="g"),that.ignoreCase&&(result+="i"),that.multiline&&(result+="m"),that.dotAll&&(result+="s"),that.unicode&&(result+="u"),that.sticky&&(result+="y"),result}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(192),requireObjectCoercible=__webpack_require__(106),createMethod=function(CONVERT_TO_STRING){return function($this,pos){var first,second,S=String(requireObjectCoercible($this)),position=toInteger(pos),size=S.length;return position<0||position>=size?CONVERT_TO_STRING?"":void 0:(first=S.charCodeAt(position))<55296||first>56319||position+1===size||(second=S.charCodeAt(position+1))<56320||second>57343?CONVERT_TO_STRING?S.charAt(position):first:CONVERT_TO_STRING?S.slice(position,position+2):second-56320+(first-55296<<10)+65536}};module.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},function(module,exports,__webpack_require__){"use strict";var charAt=__webpack_require__(351).charAt;module.exports=function(S,index,unicode){return index+(unicode?charAt(S,index).length:1)}},function(module,exports){module.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(111),__webpack_require__(170),__webpack_require__(79),__webpack_require__(268),__webpack_require__(196),__webpack_require__(113),Object.defineProperty(exports,"__esModule",{value:!0}),exports.addons=exports.AddonStore=void 0;var _global=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(92)),_clientLogger=__webpack_require__(143),_types=__webpack_require__(358);var AddonStore=function AddonStore(){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AddonStore),this.loaders={},this.elements={},this.config={},this.channel=void 0,this.promise=void 0,this.resolve=void 0,this.getChannel=function(){if(!_this.channel)throw new Error("Accessing non-existent addons channel, see https://storybook.js.org/basics/faq/#why-is-there-no-addons-channel");return _this.channel},this.ready=function(){return _this.promise},this.hasChannel=function(){return!!_this.channel},this.setChannel=function(channel){_this.channel=channel,_this.resolve()},this.getElements=function(type){return _this.elements[type]||(_this.elements[type]={}),_this.elements[type]},this.addPanel=function(name,options){_this.add(name,Object.assign({type:_types.types.PANEL},options))},this.add=function(name,addon){var type=addon.type;_this.getElements(type)[name]=Object.assign({id:name},addon)},this.setConfig=function(value){Object.assign(_this.config,value)},this.getConfig=function(){return _this.config},this.register=function(name,registerCallback){_this.loaders[name]&&_clientLogger.logger.warn("".concat(name," was loaded twice, this could have bad side-effects")),_this.loaders[name]=registerCallback},this.loadAddons=function(api){Object.values(_this.loaders).forEach((function(value){return value(api)}))},this.promise=new Promise((function(res){_this.resolve=function(){return res(_this.getChannel())}}))};exports.AddonStore=AddonStore;var KEY="__STORYBOOK_ADDONS";var addons=function getAddonsStore(){return _global.default[KEY]||(_global.default[KEY]=new AddonStore),_global.default[KEY]}();exports.addons=addons},function(module,exports,__webpack_require__){"use strict";var getBuiltIn=__webpack_require__(135),definePropertyModule=__webpack_require__(52),wellKnownSymbol=__webpack_require__(39),DESCRIPTORS=__webpack_require__(49),SPECIES=wellKnownSymbol("species");module.exports=function(CONSTRUCTOR_NAME){var Constructor=getBuiltIn(CONSTRUCTOR_NAME),defineProperty=definePropertyModule.f;DESCRIPTORS&&Constructor&&!Constructor[SPECIES]&&defineProperty(Constructor,SPECIES,{configurable:!0,get:function(){return this}})}},function(module,exports,__webpack_require__){var userAgent=__webpack_require__(252);module.exports=/(iphone|ipod|ipad).*applewebkit/i.test(userAgent)},function(module,exports,__webpack_require__){"use strict";var aFunction=__webpack_require__(121),PromiseCapability=function(C){var resolve,reject;this.promise=new C((function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject})),this.resolve=aFunction(resolve),this.reject=aFunction(reject)};module.exports.f=function(C){return new PromiseCapability(C)}},function(module,exports,__webpack_require__){"use strict";var types;__webpack_require__(254),__webpack_require__(268),Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSupportedType=function isSupportedType(type){return!!Object.values(types).find((function(typeVal){return typeVal===type}))},exports.types=void 0,exports.types=types,function(types){types.TAB="tab",types.PANEL="panel",types.TOOL="tool",types.PREVIEW="preview",types.NOTES_ELEMENT="notes-element"}(types||(exports.types=types={}))},function(module,exports,__webpack_require__){"use strict";(function(setImmediate){function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__(91),__webpack_require__(109),__webpack_require__(110),__webpack_require__(270),__webpack_require__(111),__webpack_require__(168),__webpack_require__(138),__webpack_require__(93),__webpack_require__(360),__webpack_require__(139),__webpack_require__(144),__webpack_require__(140),__webpack_require__(79),__webpack_require__(142),__webpack_require__(112),__webpack_require__(113),__webpack_require__(114),__webpack_require__(615),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Channel=void 0;var generateRandomId=function generateRandomId(){return Math.random().toString(16).slice(2)},Channel=function(){function Channel(){var _this=this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},transport=_ref.transport,_ref$async=_ref.async,async=void 0!==_ref$async&&_ref$async;_classCallCheck(this,Channel),this.isAsync=void 0,this.sender=generateRandomId(),this.events={},this.transport=void 0,this.isAsync=async,transport&&(this.transport=transport,this.transport.setHandler((function(event){return _this.handleEvent(event)})))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Channel,[{key:"addListener",value:function addListener(eventName,listener){this.events[eventName]=this.events[eventName]||[],this.events[eventName].push(listener)}},{key:"addPeerListener",value:function addPeerListener(eventName,listener){var peerListener=listener;peerListener.ignorePeer=!0,this.addListener(eventName,peerListener)}},{key:"emit",value:function emit(eventName){for(var _this2=this,_len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var event={type:eventName,args:args,from:this.sender},options={};args.length>=1&&args[0]&&args[0].options&&(options=args[0].options);var handler=function handler(){_this2.transport&&_this2.transport.send(event,options),_this2.handleEvent(event,!0)};this.isAsync?setImmediate(handler):handler()}},{key:"eventNames",value:function eventNames(){return Object.keys(this.events)}},{key:"listenerCount",value:function listenerCount(eventName){var listeners=this.listeners(eventName);return listeners?listeners.length:0}},{key:"listeners",value:function listeners(eventName){var listeners=this.events[eventName];return listeners||void 0}},{key:"once",value:function once(eventName,listener){var onceListener=this.onceListener(eventName,listener);this.addListener(eventName,onceListener)}},{key:"removeAllListeners",value:function removeAllListeners(eventName){eventName?this.events[eventName]&&delete this.events[eventName]:this.events={}}},{key:"removeListener",value:function removeListener(eventName,listener){var listeners=this.listeners(eventName);listeners&&(this.events[eventName]=listeners.filter((function(l){return l!==listener})))}},{key:"on",value:function on(eventName,listener){this.addListener(eventName,listener)}},{key:"off",value:function off(eventName,listener){this.removeListener(eventName,listener)}},{key:"handleEvent",value:function handleEvent(event){var isPeer=arguments.length>1&&void 0!==arguments[1]&&arguments[1],listeners=this.listeners(event.type);listeners&&(isPeer||event.from!==this.sender)&&listeners.forEach((function(fn){return!(isPeer&&fn.ignorePeer)&&fn.apply(void 0,_toConsumableArray(event.args))}))}},{key:"onceListener",value:function onceListener(eventName,listener){var _this3=this,onceListener=function onceListener(){return _this3.removeListener(eventName,onceListener),listener.apply(void 0,arguments)};return onceListener}},{key:"hasTransport",get:function get(){return!!this.transport}}]),Channel}();exports.Channel=Channel;var _default=Channel;exports.default=_default}).call(this,__webpack_require__(613).setImmediate)},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),isObject=__webpack_require__(40),isArray=__webpack_require__(164),toAbsoluteIndex=__webpack_require__(334),toLength=__webpack_require__(90),toIndexedObject=__webpack_require__(105),createProperty=__webpack_require__(249),wellKnownSymbol=__webpack_require__(39),arrayMethodHasSpeciesSupport=__webpack_require__(194),arrayMethodUsesToLength=__webpack_require__(80),HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("slice"),USES_TO_LENGTH=arrayMethodUsesToLength("slice",{ACCESSORS:!0,0:0,1:2}),SPECIES=wellKnownSymbol("species"),nativeSlice=[].slice,max=Math.max;$({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT||!USES_TO_LENGTH},{slice:function slice(start,end){var Constructor,result,n,O=toIndexedObject(this),length=toLength(O.length),k=toAbsoluteIndex(start,length),fin=toAbsoluteIndex(void 0===end?length:end,length);if(isArray(O)&&("function"!=typeof(Constructor=O.constructor)||Constructor!==Array&&!isArray(Constructor.prototype)?isObject(Constructor)&&null===(Constructor=Constructor[SPECIES])&&(Constructor=void 0):Constructor=void 0,Constructor===Array||void 0===Constructor))return nativeSlice.call(O,k,fin);for(result=new(void 0===Constructor?Array:Constructor)(max(fin-k,0)),n=0;k<fin;k++,n++)k in O&&createProperty(result,n,O[k]);return result.length=n,result}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),$every=__webpack_require__(108).every,arrayMethodIsStrict=__webpack_require__(137),arrayMethodUsesToLength=__webpack_require__(80),STRICT_METHOD=arrayMethodIsStrict("every"),USES_TO_LENGTH=arrayMethodUsesToLength("every");$({target:"Array",proto:!0,forced:!STRICT_METHOD||!USES_TO_LENGTH},{every:function every(callbackfn){return $every(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){__webpack_require__(25)({target:"Function",proto:!0},{bind:__webpack_require__(618)})},function(module,exports,__webpack_require__){var fails=__webpack_require__(35);module.exports=!fails((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40),setPrototypeOf=__webpack_require__(259);module.exports=function($this,dummy,Wrapper){var NewTarget,NewTargetPrototype;return setPrototypeOf&&"function"==typeof(NewTarget=dummy.constructor)&&NewTarget!==Wrapper&&isObject(NewTargetPrototype=NewTarget.prototype)&&NewTargetPrototype!==Wrapper.prototype&&setPrototypeOf($this,NewTargetPrototype),$this}},function(module,exports,__webpack_require__){"use strict";var defineProperty=__webpack_require__(52).f,create=__webpack_require__(136),redefineAll=__webpack_require__(197),bind=__webpack_require__(166),anInstance=__webpack_require__(198),iterate=__webpack_require__(199),defineIterator=__webpack_require__(257),setSpecies=__webpack_require__(355),DESCRIPTORS=__webpack_require__(49),fastKey=__webpack_require__(171).fastKey,InternalStateModule=__webpack_require__(107),setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor;module.exports={getConstructor:function(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var C=wrapper((function(that,iterable){anInstance(that,C,CONSTRUCTOR_NAME),setInternalState(that,{type:CONSTRUCTOR_NAME,index:create(null),first:void 0,last:void 0,size:0}),DESCRIPTORS||(that.size=0),null!=iterable&&iterate(iterable,that[ADDER],that,IS_MAP)})),getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME),define=function(that,key,value){var previous,index,state=getInternalState(that),entry=getEntry(that,key);return entry?entry.value=value:(state.last=entry={index:index=fastKey(key,!0),key:key,value:value,previous:previous=state.last,next:void 0,removed:!1},state.first||(state.first=entry),previous&&(previous.next=entry),DESCRIPTORS?state.size++:that.size++,"F"!==index&&(state.index[index]=entry)),that},getEntry=function(that,key){var entry,state=getInternalState(that),index=fastKey(key);if("F"!==index)return state.index[index];for(entry=state.first;entry;entry=entry.next)if(entry.key==key)return entry};return redefineAll(C.prototype,{clear:function clear(){for(var state=getInternalState(this),data=state.index,entry=state.first;entry;)entry.removed=!0,entry.previous&&(entry.previous=entry.previous.next=void 0),delete data[entry.index],entry=entry.next;state.first=state.last=void 0,DESCRIPTORS?state.size=0:this.size=0},delete:function(key){var state=getInternalState(this),entry=getEntry(this,key);if(entry){var next=entry.next,prev=entry.previous;delete state.index[entry.index],entry.removed=!0,prev&&(prev.next=next),next&&(next.previous=prev),state.first==entry&&(state.first=next),state.last==entry&&(state.last=prev),DESCRIPTORS?state.size--:this.size--}return!!entry},forEach:function forEach(callbackfn){for(var entry,state=getInternalState(this),boundFunction=bind(callbackfn,arguments.length>1?arguments[1]:void 0,3);entry=entry?entry.next:state.first;)for(boundFunction(entry.value,entry.key,this);entry&&entry.removed;)entry=entry.previous},has:function has(key){return!!getEntry(this,key)}}),redefineAll(C.prototype,IS_MAP?{get:function get(key){var entry=getEntry(this,key);return entry&&entry.value},set:function set(key,value){return define(this,0===key?0:key,value)}}:{add:function add(value){return define(this,value=0===value?0:value,value)}}),DESCRIPTORS&&defineProperty(C.prototype,"size",{get:function(){return getInternalState(this).size}}),C},setStrong:function(C,CONSTRUCTOR_NAME,IS_MAP){var ITERATOR_NAME=CONSTRUCTOR_NAME+" Iterator",getInternalCollectionState=internalStateGetterFor(CONSTRUCTOR_NAME),getInternalIteratorState=internalStateGetterFor(ITERATOR_NAME);defineIterator(C,CONSTRUCTOR_NAME,(function(iterated,kind){setInternalState(this,{type:ITERATOR_NAME,target:iterated,state:getInternalCollectionState(iterated),kind:kind,last:void 0})}),(function(){for(var state=getInternalIteratorState(this),kind=state.kind,entry=state.last;entry&&entry.removed;)entry=entry.previous;return state.target&&(state.last=entry=entry?entry.next:state.state.first)?"keys"==kind?{value:entry.key,done:!1}:"values"==kind?{value:entry.value,done:!1}:{value:[entry.key,entry.value],done:!1}:(state.target=void 0,{value:void 0,done:!0})}),IS_MAP?"entries":"values",!IS_MAP,!0),setSpecies(CONSTRUCTOR_NAME)}}},function(module,exports,__webpack_require__){(function(global){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,__webpack_require__(43))},function(module,exports){var reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");module.exports=function hasUnicode(string){return reHasUnicode.test(string)}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(205),stackClear=__webpack_require__(654),stackDelete=__webpack_require__(655),stackGet=__webpack_require__(656),stackHas=__webpack_require__(657),stackSet=__webpack_require__(658);function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},function(module,exports){var funcToString=Function.prototype.toString;module.exports=function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(275),eq=__webpack_require__(173);module.exports=function assignMergeValue(object,key,value){(void 0!==value&&!eq(object[key],value)||void 0===value&&!(key in object))&&baseAssignValue(object,key,value)}},function(module,exports,__webpack_require__){var getNative=__webpack_require__(124),defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();module.exports=defineProperty},function(module,exports,__webpack_require__){var Uint8Array=__webpack_require__(71).Uint8Array;module.exports=Uint8Array},function(module,exports,__webpack_require__){var getPrototype=__webpack_require__(374)(Object.getPrototypeOf,Object);module.exports=getPrototype},function(module,exports){module.exports=function overArg(func,transform){return function(arg){return func(transform(arg))}}},function(module,exports,__webpack_require__){var baseIsArguments=__webpack_require__(684),isObjectLike=__webpack_require__(123),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},function(module,exports){module.exports=function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}},function(module,exports){module.exports=function safeGet(object,key){if(("constructor"!==key||"function"!=typeof object[key])&&"__proto__"!=key)return object[key]}},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(379),baseKeysIn=__webpack_require__(695),isArrayLike=__webpack_require__(209);module.exports=function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}},function(module,exports,__webpack_require__){var baseTimes=__webpack_require__(694),isArguments=__webpack_require__(375),isArray=__webpack_require__(122),isBuffer=__webpack_require__(277),isIndex=__webpack_require__(380),isTypedArray=__webpack_require__(278),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}},function(module,exports){var reIsUint=/^(?:0|[1-9]\d*)$/;module.exports=function isIndex(value,length){var type=typeof value;return!!(length=null==length?9007199254740991:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}},function(module,exports){module.exports=function identity(value){return value}},function(module,exports,__webpack_require__){var SetCache=__webpack_require__(709),arraySome=__webpack_require__(712),cacheHas=__webpack_require__(713);module.exports=function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}},function(module,exports,__webpack_require__){var baseGet=__webpack_require__(732);module.exports=function get(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(111),__webpack_require__(93),__webpack_require__(385),__webpack_require__(79),__webpack_require__(112),__webpack_require__(113),__webpack_require__(114),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.createSubscriptionsStore=void 0;var createSubscriptionsStore=function createSubscriptionsStore(){var subscriptions=new Map;return{register:function register(subscribe){var subscription=subscriptions.get(subscribe);subscription||(subscription={unsubscribe:subscribe()},subscriptions.set(subscribe,subscription)),subscription.used=!0},markAllAsUnused:function markAllAsUnused(){subscriptions.forEach((function(subscription){subscription.used=!1}))},clearUnused:function clearUnused(){subscriptions.forEach((function(subscription,key){subscription.used||(subscription.unsubscribe(),subscriptions.delete(key))}))}}};exports.createSubscriptionsStore=createSubscriptionsStore;var _default=createSubscriptionsStore();exports.default=_default},function(module,exports,__webpack_require__){"use strict";var collection=__webpack_require__(271),collectionStrong=__webpack_require__(365);module.exports=collection("Map",(function(init){return function Map(){return init(this,arguments.length?arguments[0]:void 0)}}),collectionStrong)},function(module,exports,__webpack_require__){__webpack_require__(25)({target:"Object",stat:!0,sham:!__webpack_require__(49)},{create:__webpack_require__(136)})},function(module,exports,__webpack_require__){__webpack_require__(25)({target:"Object",stat:!0},{setPrototypeOf:__webpack_require__(259)})},function(module,exports,__webpack_require__){var $=__webpack_require__(25),global=__webpack_require__(30),userAgent=__webpack_require__(252),slice=[].slice,wrap=function(scheduler){return function(handler,timeout){var boundArgs=arguments.length>2,args=boundArgs?slice.call(arguments,2):void 0;return scheduler(boundArgs?function(){("function"==typeof handler?handler:Function(handler)).apply(this,args)}:handler,timeout)}};$({global:!0,bind:!0,forced:/MSIE .\./.test(userAgent)},{setTimeout:wrap(global.setTimeout),setInterval:wrap(global.setInterval)})},function(module,exports,__webpack_require__){module.exports=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){module.exports=function(forceSimilar){return"function"!=typeof Map||forceSimilar?new(_dereq_("./similar")):new Map}},{"./similar":2}],2:[function(_dereq_,module,exports){function Similar(){return this.list=[],this.lastItem=void 0,this.size=0,this}Similar.prototype.get=function(key){var index;return this.lastItem&&this.isEqual(this.lastItem.key,key)?this.lastItem.val:(index=this.indexOf(key))>=0?(this.lastItem=this.list[index],this.list[index].val):void 0},Similar.prototype.set=function(key,val){var index;return this.lastItem&&this.isEqual(this.lastItem.key,key)?(this.lastItem.val=val,this):(index=this.indexOf(key))>=0?(this.lastItem=this.list[index],this.list[index].val=val,this):(this.lastItem={key:key,val:val},this.list.push(this.lastItem),this.size++,this)},Similar.prototype.delete=function(key){var index;if(this.lastItem&&this.isEqual(this.lastItem.key,key)&&(this.lastItem=void 0),(index=this.indexOf(key))>=0)return this.size--,this.list.splice(index,1)[0]},Similar.prototype.has=function(key){var index;return!(!this.lastItem||!this.isEqual(this.lastItem.key,key))||(index=this.indexOf(key))>=0&&(this.lastItem=this.list[index],!0)},Similar.prototype.forEach=function(callback,thisArg){var i;for(i=0;i<this.size;i++)callback.call(thisArg||this,this.list[i].val,this.list[i].key,this)},Similar.prototype.indexOf=function(key){var i;for(i=0;i<this.size;i++)if(this.isEqual(this.list[i].key,key))return i;return-1},Similar.prototype.isEqual=function(val1,val2){return val1===val2||val1!=val1&&val2!=val2},module.exports=Similar},{}],3:[function(_dereq_,module,exports){var MapOrSimilar=_dereq_("map-or-similar");function moveToMostRecentLru(lru,lruPath){var isMatch,i,ii,val1,val2,lruLen=lru.length,lruPathLen=lruPath.length;for(i=0;i<lruLen;i++){for(isMatch=!0,ii=0;ii<lruPathLen;ii++)if(val1=lru[i][ii].arg,val2=lruPath[ii].arg,val1!==val2&&(val1==val1||val2==val2)){isMatch=!1;break}if(isMatch)break}lru.push(lru.splice(i,1)[0])}function removeCachedResult(removedLru){var tmp,i,removedLruLen=removedLru.length,currentLru=removedLru[removedLruLen-1];for(currentLru.cacheItem.delete(currentLru.arg),i=removedLruLen-2;i>=0&&(!(tmp=(currentLru=removedLru[i]).cacheItem.get(currentLru.arg))||!tmp.size);i--)currentLru.cacheItem.delete(currentLru.arg)}module.exports=function(limit){var cache=new MapOrSimilar(!1),lru=[];return function(fn){var memoizerific=function(){var newMap,fnResult,i,currentCache=cache,argsLengthMinusOne=arguments.length-1,lruPath=Array(argsLengthMinusOne+1),isMemoized=!0;if((memoizerific.numArgs||0===memoizerific.numArgs)&&memoizerific.numArgs!==argsLengthMinusOne+1)throw new Error("Memoizerific functions should always be called with the same number of arguments");for(i=0;i<argsLengthMinusOne;i++)lruPath[i]={cacheItem:currentCache,arg:arguments[i]},currentCache.has(arguments[i])?currentCache=currentCache.get(arguments[i]):(isMemoized=!1,newMap=new MapOrSimilar(!1),currentCache.set(arguments[i],newMap),currentCache=newMap);return isMemoized&&(currentCache.has(arguments[argsLengthMinusOne])?fnResult=currentCache.get(arguments[argsLengthMinusOne]):isMemoized=!1),isMemoized||(fnResult=fn.apply(null,arguments),currentCache.set(arguments[argsLengthMinusOne],fnResult)),limit>0&&(lruPath[argsLengthMinusOne]={cacheItem:currentCache,arg:arguments[argsLengthMinusOne]},isMemoized?moveToMostRecentLru(lru,lruPath):lru.push(lruPath),lru.length>limit&&removeCachedResult(lru.shift())),memoizerific.wasMemoized=isMemoized,memoizerific.numArgs=argsLengthMinusOne+1,fnResult};return memoizerific.limit=limit,memoizerific.wasMemoized=!1,memoizerific.cache=cache,memoizerific.lru=lru,memoizerific}}},{"map-or-similar":1}]},{},[3])(3)},function(module,exports,__webpack_require__){"use strict";var fixRegExpWellKnownSymbolLogic=__webpack_require__(264),anObject=__webpack_require__(51),requireObjectCoercible=__webpack_require__(106),sameValue=__webpack_require__(753),regExpExec=__webpack_require__(265);fixRegExpWellKnownSymbolLogic("search",1,(function(SEARCH,nativeSearch,maybeCallNative){return[function search(regexp){var O=requireObjectCoercible(this),searcher=null==regexp?void 0:regexp[SEARCH];return void 0!==searcher?searcher.call(regexp,O):new RegExp(regexp)[SEARCH](String(O))},function(regexp){var res=maybeCallNative(nativeSearch,regexp,this);if(res.done)return res.value;var rx=anObject(regexp),S=String(this),previousLastIndex=rx.lastIndex;sameValue(previousLastIndex,0)||(rx.lastIndex=0);var result=regExpExec(rx,S);return sameValue(rx.lastIndex,previousLastIndex)||(rx.lastIndex=previousLastIndex),null===result?-1:result.index}]}))},function(module,exports,__webpack_require__){"use strict";var stringify=__webpack_require__(754),parse=__webpack_require__(755),formats=__webpack_require__(392);module.exports={formats:formats,parse:parse,stringify:stringify}},function(module,exports,__webpack_require__){"use strict";var replace=String.prototype.replace,percentTwenties=/%20/g,util=__webpack_require__(280),Format={RFC1738:"RFC1738",RFC3986:"RFC3986"};module.exports=util.assign({default:Format.RFC3986,formatters:{RFC1738:function(value){return replace.call(value,percentTwenties,"+")},RFC3986:function(value){return String(value)}}},Format)},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),$indexOf=__webpack_require__(246).indexOf,arrayMethodIsStrict=__webpack_require__(137),arrayMethodUsesToLength=__webpack_require__(80),nativeIndexOf=[].indexOf,NEGATIVE_ZERO=!!nativeIndexOf&&1/[1].indexOf(1,-0)<0,STRICT_METHOD=arrayMethodIsStrict("indexOf"),USES_TO_LENGTH=arrayMethodUsesToLength("indexOf",{ACCESSORS:!0,1:0});$({target:"Array",proto:!0,forced:NEGATIVE_ZERO||!STRICT_METHOD||!USES_TO_LENGTH},{indexOf:function indexOf(searchElement){return NEGATIVE_ZERO?nativeIndexOf.apply(this,arguments)||0:$indexOf(this,searchElement,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}module.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map((function(n){return test2[n]})).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach((function(letter){test3[letter]=letter})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}()?Object.assign:function(target,source){for(var from,symbols,to=toObject(target),s=1;s<arguments.length;s++){for(var key in from=Object(arguments[s]))hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},function(module,exports,__webpack_require__){"use strict";!function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(err){console.error(err)}}}(),module.exports=__webpack_require__(758)},function(module){module.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},function(module){module.exports=JSON.parse('{"Aacute":"","aacute":"","Abreve":"","abreve":"","ac":"","acd":"","acE":"","Acirc":"","acirc":"","acute":"","Acy":"","acy":"","AElig":"","aelig":"","af":"","Afr":"","afr":"","Agrave":"","agrave":"","alefsym":"","aleph":"","Alpha":"","alpha":"","Amacr":"","amacr":"","amalg":"","amp":"&","AMP":"&","andand":"","And":"","and":"","andd":"","andslope":"","andv":"","ang":"","ange":"","angle":"","angmsdaa":"","angmsdab":"","angmsdac":"","angmsdad":"","angmsdae":"","angmsdaf":"","angmsdag":"","angmsdah":"","angmsd":"","angrt":"","angrtvb":"","angrtvbd":"","angsph":"","angst":"","angzarr":"","Aogon":"","aogon":"","Aopf":"","aopf":"","apacir":"","ap":"","apE":"","ape":"","apid":"","apos":"\'","ApplyFunction":"","approx":"","approxeq":"","Aring":"","aring":"","Ascr":"","ascr":"","Assign":"","ast":"*","asymp":"","asympeq":"","Atilde":"","atilde":"","Auml":"","auml":"","awconint":"","awint":"","backcong":"","backepsilon":"","backprime":"","backsim":"","backsimeq":"","Backslash":"","Barv":"","barvee":"","barwed":"","Barwed":"","barwedge":"","bbrk":"","bbrktbrk":"","bcong":"","Bcy":"","bcy":"","bdquo":"","becaus":"","because":"","Because":"","bemptyv":"","bepsi":"","bernou":"","Bernoullis":"","Beta":"","beta":"","beth":"","between":"","Bfr":"","bfr":"","bigcap":"","bigcirc":"","bigcup":"","bigodot":"","bigoplus":"","bigotimes":"","bigsqcup":"","bigstar":"","bigtriangledown":"","bigtriangleup":"","biguplus":"","bigvee":"","bigwedge":"","bkarow":"","blacklozenge":"","blacksquare":"","blacktriangle":"","blacktriangledown":"","blacktriangleleft":"","blacktriangleright":"","blank":"","blk12":"","blk14":"","blk34":"","block":"","bne":"=","bnequiv":"","bNot":"","bnot":"","Bopf":"","bopf":"","bot":"","bottom":"","bowtie":"","boxbox":"","boxdl":"","boxdL":"","boxDl":"","boxDL":"","boxdr":"","boxdR":"","boxDr":"","boxDR":"","boxh":"","boxH":"","boxhd":"","boxHd":"","boxhD":"","boxHD":"","boxhu":"","boxHu":"","boxhU":"","boxHU":"","boxminus":"","boxplus":"","boxtimes":"","boxul":"","boxuL":"","boxUl":"","boxUL":"","boxur":"","boxuR":"","boxUr":"","boxUR":"","boxv":"","boxV":"","boxvh":"","boxvH":"","boxVh":"","boxVH":"","boxvl":"","boxvL":"","boxVl":"","boxVL":"","boxvr":"","boxvR":"","boxVr":"","boxVR":"","bprime":"","breve":"","Breve":"","brvbar":"","bscr":"","Bscr":"","bsemi":"","bsim":"","bsime":"","bsolb":"","bsol":"\\\\","bsolhsub":"","bull":"","bullet":"","bump":"","bumpE":"","bumpe":"","Bumpeq":"","bumpeq":"","Cacute":"","cacute":"","capand":"","capbrcup":"","capcap":"","cap":"","Cap":"","capcup":"","capdot":"","CapitalDifferentialD":"","caps":"","caret":"","caron":"","Cayleys":"","ccaps":"","Ccaron":"","ccaron":"","Ccedil":"","ccedil":"","Ccirc":"","ccirc":"","Cconint":"","ccups":"","ccupssm":"","Cdot":"","cdot":"","cedil":"","Cedilla":"","cemptyv":"","cent":"","centerdot":"","CenterDot":"","cfr":"","Cfr":"","CHcy":"","chcy":"","check":"","checkmark":"","Chi":"","chi":"","circ":"","circeq":"","circlearrowleft":"","circlearrowright":"","circledast":"","circledcirc":"","circleddash":"","CircleDot":"","circledR":"","circledS":"","CircleMinus":"","CirclePlus":"","CircleTimes":"","cir":"","cirE":"","cire":"","cirfnint":"","cirmid":"","cirscir":"","ClockwiseContourIntegral":"","CloseCurlyDoubleQuote":"","CloseCurlyQuote":"","clubs":"","clubsuit":"","colon":":","Colon":"","Colone":"","colone":"","coloneq":"","comma":",","commat":"@","comp":"","compfn":"","complement":"","complexes":"","cong":"","congdot":"","Congruent":"","conint":"","Conint":"","ContourIntegral":"","copf":"","Copf":"","coprod":"","Coproduct":"","copy":"","COPY":"","copysr":"","CounterClockwiseContourIntegral":"","crarr":"","cross":"","Cross":"","Cscr":"","cscr":"","csub":"","csube":"","csup":"","csupe":"","ctdot":"","cudarrl":"","cudarrr":"","cuepr":"","cuesc":"","cularr":"","cularrp":"","cupbrcap":"","cupcap":"","CupCap":"","cup":"","Cup":"","cupcup":"","cupdot":"","cupor":"","cups":"","curarr":"","curarrm":"","curlyeqprec":"","curlyeqsucc":"","curlyvee":"","curlywedge":"","curren":"","curvearrowleft":"","curvearrowright":"","cuvee":"","cuwed":"","cwconint":"","cwint":"","cylcty":"","dagger":"","Dagger":"","daleth":"","darr":"","Darr":"","dArr":"","dash":"","Dashv":"","dashv":"","dbkarow":"","dblac":"","Dcaron":"","dcaron":"","Dcy":"","dcy":"","ddagger":"","ddarr":"","DD":"","dd":"","DDotrahd":"","ddotseq":"","deg":"","Del":"","Delta":"","delta":"","demptyv":"","dfisht":"","Dfr":"","dfr":"","dHar":"","dharl":"","dharr":"","DiacriticalAcute":"","DiacriticalDot":"","DiacriticalDoubleAcute":"","DiacriticalGrave":"`","DiacriticalTilde":"","diam":"","diamond":"","Diamond":"","diamondsuit":"","diams":"","die":"","DifferentialD":"","digamma":"","disin":"","div":"","divide":"","divideontimes":"","divonx":"","DJcy":"","djcy":"","dlcorn":"","dlcrop":"","dollar":"$","Dopf":"","dopf":"","Dot":"","dot":"","DotDot":"","doteq":"","doteqdot":"","DotEqual":"","dotminus":"","dotplus":"","dotsquare":"","doublebarwedge":"","DoubleContourIntegral":"","DoubleDot":"","DoubleDownArrow":"","DoubleLeftArrow":"","DoubleLeftRightArrow":"","DoubleLeftTee":"","DoubleLongLeftArrow":"","DoubleLongLeftRightArrow":"","DoubleLongRightArrow":"","DoubleRightArrow":"","DoubleRightTee":"","DoubleUpArrow":"","DoubleUpDownArrow":"","DoubleVerticalBar":"","DownArrowBar":"","downarrow":"","DownArrow":"","Downarrow":"","DownArrowUpArrow":"","DownBreve":"","downdownarrows":"","downharpoonleft":"","downharpoonright":"","DownLeftRightVector":"","DownLeftTeeVector":"","DownLeftVectorBar":"","DownLeftVector":"","DownRightTeeVector":"","DownRightVectorBar":"","DownRightVector":"","DownTeeArrow":"","DownTee":"","drbkarow":"","drcorn":"","drcrop":"","Dscr":"","dscr":"","DScy":"","dscy":"","dsol":"","Dstrok":"","dstrok":"","dtdot":"","dtri":"","dtrif":"","duarr":"","duhar":"","dwangle":"","DZcy":"","dzcy":"","dzigrarr":"","Eacute":"","eacute":"","easter":"","Ecaron":"","ecaron":"","Ecirc":"","ecirc":"","ecir":"","ecolon":"","Ecy":"","ecy":"","eDDot":"","Edot":"","edot":"","eDot":"","ee":"","efDot":"","Efr":"","efr":"","eg":"","Egrave":"","egrave":"","egs":"","egsdot":"","el":"","Element":"","elinters":"","ell":"","els":"","elsdot":"","Emacr":"","emacr":"","empty":"","emptyset":"","EmptySmallSquare":"","emptyv":"","EmptyVerySmallSquare":"","emsp13":"","emsp14":"","emsp":"","ENG":"","eng":"","ensp":"","Eogon":"","eogon":"","Eopf":"","eopf":"","epar":"","eparsl":"","eplus":"","epsi":"","Epsilon":"","epsilon":"","epsiv":"","eqcirc":"","eqcolon":"","eqsim":"","eqslantgtr":"","eqslantless":"","Equal":"","equals":"=","EqualTilde":"","equest":"","Equilibrium":"","equiv":"","equivDD":"","eqvparsl":"","erarr":"","erDot":"","escr":"","Escr":"","esdot":"","Esim":"","esim":"","Eta":"","eta":"","ETH":"","eth":"","Euml":"","euml":"","euro":"","excl":"!","exist":"","Exists":"","expectation":"","exponentiale":"","ExponentialE":"","fallingdotseq":"","Fcy":"","fcy":"","female":"","ffilig":"","fflig":"","ffllig":"","Ffr":"","ffr":"","filig":"","FilledSmallSquare":"","FilledVerySmallSquare":"","fjlig":"fj","flat":"","fllig":"","fltns":"","fnof":"","Fopf":"","fopf":"","forall":"","ForAll":"","fork":"","forkv":"","Fouriertrf":"","fpartint":"","frac12":"","frac13":"","frac14":"","frac15":"","frac16":"","frac18":"","frac23":"","frac25":"","frac34":"","frac35":"","frac38":"","frac45":"","frac56":"","frac58":"","frac78":"","frasl":"","frown":"","fscr":"","Fscr":"","gacute":"","Gamma":"","gamma":"","Gammad":"","gammad":"","gap":"","Gbreve":"","gbreve":"","Gcedil":"","Gcirc":"","gcirc":"","Gcy":"","gcy":"","Gdot":"","gdot":"","ge":"","gE":"","gEl":"","gel":"","geq":"","geqq":"","geqslant":"","gescc":"","ges":"","gesdot":"","gesdoto":"","gesdotol":"","gesl":"","gesles":"","Gfr":"","gfr":"","gg":"","Gg":"","ggg":"","gimel":"","GJcy":"","gjcy":"","gla":"","gl":"","glE":"","glj":"","gnap":"","gnapprox":"","gne":"","gnE":"","gneq":"","gneqq":"","gnsim":"","Gopf":"","gopf":"","grave":"`","GreaterEqual":"","GreaterEqualLess":"","GreaterFullEqual":"","GreaterGreater":"","GreaterLess":"","GreaterSlantEqual":"","GreaterTilde":"","Gscr":"","gscr":"","gsim":"","gsime":"","gsiml":"","gtcc":"","gtcir":"","gt":">","GT":">","Gt":"","gtdot":"","gtlPar":"","gtquest":"","gtrapprox":"","gtrarr":"","gtrdot":"","gtreqless":"","gtreqqless":"","gtrless":"","gtrsim":"","gvertneqq":"","gvnE":"","Hacek":"","hairsp":"","half":"","hamilt":"","HARDcy":"","hardcy":"","harrcir":"","harr":"","hArr":"","harrw":"","Hat":"^","hbar":"","Hcirc":"","hcirc":"","hearts":"","heartsuit":"","hellip":"","hercon":"","hfr":"","Hfr":"","HilbertSpace":"","hksearow":"","hkswarow":"","hoarr":"","homtht":"","hookleftarrow":"","hookrightarrow":"","hopf":"","Hopf":"","horbar":"","HorizontalLine":"","hscr":"","Hscr":"","hslash":"","Hstrok":"","hstrok":"","HumpDownHump":"","HumpEqual":"","hybull":"","hyphen":"","Iacute":"","iacute":"","ic":"","Icirc":"","icirc":"","Icy":"","icy":"","Idot":"","IEcy":"","iecy":"","iexcl":"","iff":"","ifr":"","Ifr":"","Igrave":"","igrave":"","ii":"","iiiint":"","iiint":"","iinfin":"","iiota":"","IJlig":"","ijlig":"","Imacr":"","imacr":"","image":"","ImaginaryI":"","imagline":"","imagpart":"","imath":"","Im":"","imof":"","imped":"","Implies":"","incare":"","in":"","infin":"","infintie":"","inodot":"","intcal":"","int":"","Int":"","integers":"","Integral":"","intercal":"","Intersection":"","intlarhk":"","intprod":"","InvisibleComma":"","InvisibleTimes":"","IOcy":"","iocy":"","Iogon":"","iogon":"","Iopf":"","iopf":"","Iota":"","iota":"","iprod":"","iquest":"","iscr":"","Iscr":"","isin":"","isindot":"","isinE":"","isins":"","isinsv":"","isinv":"","it":"","Itilde":"","itilde":"","Iukcy":"","iukcy":"","Iuml":"","iuml":"","Jcirc":"","jcirc":"","Jcy":"","jcy":"","Jfr":"","jfr":"","jmath":"","Jopf":"","jopf":"","Jscr":"","jscr":"","Jsercy":"","jsercy":"","Jukcy":"","jukcy":"","Kappa":"","kappa":"","kappav":"","Kcedil":"","kcedil":"","Kcy":"","kcy":"","Kfr":"","kfr":"","kgreen":"","KHcy":"","khcy":"","KJcy":"","kjcy":"","Kopf":"","kopf":"","Kscr":"","kscr":"","lAarr":"","Lacute":"","lacute":"","laemptyv":"","lagran":"","Lambda":"","lambda":"","lang":"","Lang":"","langd":"","langle":"","lap":"","Laplacetrf":"","laquo":"","larrb":"","larrbfs":"","larr":"","Larr":"","lArr":"","larrfs":"","larrhk":"","larrlp":"","larrpl":"","larrsim":"","larrtl":"","latail":"","lAtail":"","lat":"","late":"","lates":"","lbarr":"","lBarr":"","lbbrk":"","lbrace":"{","lbrack":"[","lbrke":"","lbrksld":"","lbrkslu":"","Lcaron":"","lcaron":"","Lcedil":"","lcedil":"","lceil":"","lcub":"{","Lcy":"","lcy":"","ldca":"","ldquo":"","ldquor":"","ldrdhar":"","ldrushar":"","ldsh":"","le":"","lE":"","LeftAngleBracket":"","LeftArrowBar":"","leftarrow":"","LeftArrow":"","Leftarrow":"","LeftArrowRightArrow":"","leftarrowtail":"","LeftCeiling":"","LeftDoubleBracket":"","LeftDownTeeVector":"","LeftDownVectorBar":"","LeftDownVector":"","LeftFloor":"","leftharpoondown":"","leftharpoonup":"","leftleftarrows":"","leftrightarrow":"","LeftRightArrow":"","Leftrightarrow":"","leftrightarrows":"","leftrightharpoons":"","leftrightsquigarrow":"","LeftRightVector":"","LeftTeeArrow":"","LeftTee":"","LeftTeeVector":"","leftthreetimes":"","LeftTriangleBar":"","LeftTriangle":"","LeftTriangleEqual":"","LeftUpDownVector":"","LeftUpTeeVector":"","LeftUpVectorBar":"","LeftUpVector":"","LeftVectorBar":"","LeftVector":"","lEg":"","leg":"","leq":"","leqq":"","leqslant":"","lescc":"","les":"","lesdot":"","lesdoto":"","lesdotor":"","lesg":"","lesges":"","lessapprox":"","lessdot":"","lesseqgtr":"","lesseqqgtr":"","LessEqualGreater":"","LessFullEqual":"","LessGreater":"","lessgtr":"","LessLess":"","lesssim":"","LessSlantEqual":"","LessTilde":"","lfisht":"","lfloor":"","Lfr":"","lfr":"","lg":"","lgE":"","lHar":"","lhard":"","lharu":"","lharul":"","lhblk":"","LJcy":"","ljcy":"","llarr":"","ll":"","Ll":"","llcorner":"","Lleftarrow":"","llhard":"","lltri":"","Lmidot":"","lmidot":"","lmoustache":"","lmoust":"","lnap":"","lnapprox":"","lne":"","lnE":"","lneq":"","lneqq":"","lnsim":"","loang":"","loarr":"","lobrk":"","longleftarrow":"","LongLeftArrow":"","Longleftarrow":"","longleftrightarrow":"","LongLeftRightArrow":"","Longleftrightarrow":"","longmapsto":"","longrightarrow":"","LongRightArrow":"","Longrightarrow":"","looparrowleft":"","looparrowright":"","lopar":"","Lopf":"","lopf":"","loplus":"","lotimes":"","lowast":"","lowbar":"_","LowerLeftArrow":"","LowerRightArrow":"","loz":"","lozenge":"","lozf":"","lpar":"(","lparlt":"","lrarr":"","lrcorner":"","lrhar":"","lrhard":"","lrm":"","lrtri":"","lsaquo":"","lscr":"","Lscr":"","lsh":"","Lsh":"","lsim":"","lsime":"","lsimg":"","lsqb":"[","lsquo":"","lsquor":"","Lstrok":"","lstrok":"","ltcc":"","ltcir":"","lt":"<","LT":"<","Lt":"","ltdot":"","lthree":"","ltimes":"","ltlarr":"","ltquest":"","ltri":"","ltrie":"","ltrif":"","ltrPar":"","lurdshar":"","luruhar":"","lvertneqq":"","lvnE":"","macr":"","male":"","malt":"","maltese":"","Map":"","map":"","mapsto":"","mapstodown":"","mapstoleft":"","mapstoup":"","marker":"","mcomma":"","Mcy":"","mcy":"","mdash":"","mDDot":"","measuredangle":"","MediumSpace":"","Mellintrf":"","Mfr":"","mfr":"","mho":"","micro":"","midast":"*","midcir":"","mid":"","middot":"","minusb":"","minus":"","minusd":"","minusdu":"","MinusPlus":"","mlcp":"","mldr":"","mnplus":"","models":"","Mopf":"","mopf":"","mp":"","mscr":"","Mscr":"","mstpos":"","Mu":"","mu":"","multimap":"","mumap":"","nabla":"","Nacute":"","nacute":"","nang":"","nap":"","napE":"","napid":"","napos":"","napprox":"","natural":"","naturals":"","natur":"","nbsp":"","nbump":"","nbumpe":"","ncap":"","Ncaron":"","ncaron":"","Ncedil":"","ncedil":"","ncong":"","ncongdot":"","ncup":"","Ncy":"","ncy":"","ndash":"","nearhk":"","nearr":"","neArr":"","nearrow":"","ne":"","nedot":"","NegativeMediumSpace":"","NegativeThickSpace":"","NegativeThinSpace":"","NegativeVeryThinSpace":"","nequiv":"","nesear":"","nesim":"","NestedGreaterGreater":"","NestedLessLess":"","NewLine":"\\n","nexist":"","nexists":"","Nfr":"","nfr":"","ngE":"","nge":"","ngeq":"","ngeqq":"","ngeqslant":"","nges":"","nGg":"","ngsim":"","nGt":"","ngt":"","ngtr":"","nGtv":"","nharr":"","nhArr":"","nhpar":"","ni":"","nis":"","nisd":"","niv":"","NJcy":"","njcy":"","nlarr":"","nlArr":"","nldr":"","nlE":"","nle":"","nleftarrow":"","nLeftarrow":"","nleftrightarrow":"","nLeftrightarrow":"","nleq":"","nleqq":"","nleqslant":"","nles":"","nless":"","nLl":"","nlsim":"","nLt":"","nlt":"","nltri":"","nltrie":"","nLtv":"","nmid":"","NoBreak":"","NonBreakingSpace":"","nopf":"","Nopf":"","Not":"","not":"","NotCongruent":"","NotCupCap":"","NotDoubleVerticalBar":"","NotElement":"","NotEqual":"","NotEqualTilde":"","NotExists":"","NotGreater":"","NotGreaterEqual":"","NotGreaterFullEqual":"","NotGreaterGreater":"","NotGreaterLess":"","NotGreaterSlantEqual":"","NotGreaterTilde":"","NotHumpDownHump":"","NotHumpEqual":"","notin":"","notindot":"","notinE":"","notinva":"","notinvb":"","notinvc":"","NotLeftTriangleBar":"","NotLeftTriangle":"","NotLeftTriangleEqual":"","NotLess":"","NotLessEqual":"","NotLessGreater":"","NotLessLess":"","NotLessSlantEqual":"","NotLessTilde":"","NotNestedGreaterGreater":"","NotNestedLessLess":"","notni":"","notniva":"","notnivb":"","notnivc":"","NotPrecedes":"","NotPrecedesEqual":"","NotPrecedesSlantEqual":"","NotReverseElement":"","NotRightTriangleBar":"","NotRightTriangle":"","NotRightTriangleEqual":"","NotSquareSubset":"","NotSquareSubsetEqual":"","NotSquareSuperset":"","NotSquareSupersetEqual":"","NotSubset":"","NotSubsetEqual":"","NotSucceeds":"","NotSucceedsEqual":"","NotSucceedsSlantEqual":"","NotSucceedsTilde":"","NotSuperset":"","NotSupersetEqual":"","NotTilde":"","NotTildeEqual":"","NotTildeFullEqual":"","NotTildeTilde":"","NotVerticalBar":"","nparallel":"","npar":"","nparsl":"","npart":"","npolint":"","npr":"","nprcue":"","nprec":"","npreceq":"","npre":"","nrarrc":"","nrarr":"","nrArr":"","nrarrw":"","nrightarrow":"","nRightarrow":"","nrtri":"","nrtrie":"","nsc":"","nsccue":"","nsce":"","Nscr":"","nscr":"","nshortmid":"","nshortparallel":"","nsim":"","nsime":"","nsimeq":"","nsmid":"","nspar":"","nsqsube":"","nsqsupe":"","nsub":"","nsubE":"","nsube":"","nsubset":"","nsubseteq":"","nsubseteqq":"","nsucc":"","nsucceq":"","nsup":"","nsupE":"","nsupe":"","nsupset":"","nsupseteq":"","nsupseteqq":"","ntgl":"","Ntilde":"","ntilde":"","ntlg":"","ntriangleleft":"","ntrianglelefteq":"","ntriangleright":"","ntrianglerighteq":"","Nu":"","nu":"","num":"#","numero":"","numsp":"","nvap":"","nvdash":"","nvDash":"","nVdash":"","nVDash":"","nvge":"","nvgt":">","nvHarr":"","nvinfin":"","nvlArr":"","nvle":"","nvlt":"<","nvltrie":"","nvrArr":"","nvrtrie":"","nvsim":"","nwarhk":"","nwarr":"","nwArr":"","nwarrow":"","nwnear":"","Oacute":"","oacute":"","oast":"","Ocirc":"","ocirc":"","ocir":"","Ocy":"","ocy":"","odash":"","Odblac":"","odblac":"","odiv":"","odot":"","odsold":"","OElig":"","oelig":"","ofcir":"","Ofr":"","ofr":"","ogon":"","Ograve":"","ograve":"","ogt":"","ohbar":"","ohm":"","oint":"","olarr":"","olcir":"","olcross":"","oline":"","olt":"","Omacr":"","omacr":"","Omega":"","omega":"","Omicron":"","omicron":"","omid":"","ominus":"","Oopf":"","oopf":"","opar":"","OpenCurlyDoubleQuote":"","OpenCurlyQuote":"","operp":"","oplus":"","orarr":"","Or":"","or":"","ord":"","order":"","orderof":"","ordf":"","ordm":"","origof":"","oror":"","orslope":"","orv":"","oS":"","Oscr":"","oscr":"","Oslash":"","oslash":"","osol":"","Otilde":"","otilde":"","otimesas":"","Otimes":"","otimes":"","Ouml":"","ouml":"","ovbar":"","OverBar":"","OverBrace":"","OverBracket":"","OverParenthesis":"","para":"","parallel":"","par":"","parsim":"","parsl":"","part":"","PartialD":"","Pcy":"","pcy":"","percnt":"%","period":".","permil":"","perp":"","pertenk":"","Pfr":"","pfr":"","Phi":"","phi":"","phiv":"","phmmat":"","phone":"","Pi":"","pi":"","pitchfork":"","piv":"","planck":"","planckh":"","plankv":"","plusacir":"","plusb":"","pluscir":"","plus":"+","plusdo":"","plusdu":"","pluse":"","PlusMinus":"","plusmn":"","plussim":"","plustwo":"","pm":"","Poincareplane":"","pointint":"","popf":"","Popf":"","pound":"","prap":"","Pr":"","pr":"","prcue":"","precapprox":"","prec":"","preccurlyeq":"","Precedes":"","PrecedesEqual":"","PrecedesSlantEqual":"","PrecedesTilde":"","preceq":"","precnapprox":"","precneqq":"","precnsim":"","pre":"","prE":"","precsim":"","prime":"","Prime":"","primes":"","prnap":"","prnE":"","prnsim":"","prod":"","Product":"","profalar":"","profline":"","profsurf":"","prop":"","Proportional":"","Proportion":"","propto":"","prsim":"","prurel":"","Pscr":"","pscr":"","Psi":"","psi":"","puncsp":"","Qfr":"","qfr":"","qint":"","qopf":"","Qopf":"","qprime":"","Qscr":"","qscr":"","quaternions":"","quatint":"","quest":"?","questeq":"","quot":"\\"","QUOT":"\\"","rAarr":"","race":"","Racute":"","racute":"","radic":"","raemptyv":"","rang":"","Rang":"","rangd":"","range":"","rangle":"","raquo":"","rarrap":"","rarrb":"","rarrbfs":"","rarrc":"","rarr":"","Rarr":"","rArr":"","rarrfs":"","rarrhk":"","rarrlp":"","rarrpl":"","rarrsim":"","Rarrtl":"","rarrtl":"","rarrw":"","ratail":"","rAtail":"","ratio":"","rationals":"","rbarr":"","rBarr":"","RBarr":"","rbbrk":"","rbrace":"}","rbrack":"]","rbrke":"","rbrksld":"","rbrkslu":"","Rcaron":"","rcaron":"","Rcedil":"","rcedil":"","rceil":"","rcub":"}","Rcy":"","rcy":"","rdca":"","rdldhar":"","rdquo":"","rdquor":"","rdsh":"","real":"","realine":"","realpart":"","reals":"","Re":"","rect":"","reg":"","REG":"","ReverseElement":"","ReverseEquilibrium":"","ReverseUpEquilibrium":"","rfisht":"","rfloor":"","rfr":"","Rfr":"","rHar":"","rhard":"","rharu":"","rharul":"","Rho":"","rho":"","rhov":"","RightAngleBracket":"","RightArrowBar":"","rightarrow":"","RightArrow":"","Rightarrow":"","RightArrowLeftArrow":"","rightarrowtail":"","RightCeiling":"","RightDoubleBracket":"","RightDownTeeVector":"","RightDownVectorBar":"","RightDownVector":"","RightFloor":"","rightharpoondown":"","rightharpoonup":"","rightleftarrows":"","rightleftharpoons":"","rightrightarrows":"","rightsquigarrow":"","RightTeeArrow":"","RightTee":"","RightTeeVector":"","rightthreetimes":"","RightTriangleBar":"","RightTriangle":"","RightTriangleEqual":"","RightUpDownVector":"","RightUpTeeVector":"","RightUpVectorBar":"","RightUpVector":"","RightVectorBar":"","RightVector":"","ring":"","risingdotseq":"","rlarr":"","rlhar":"","rlm":"","rmoustache":"","rmoust":"","rnmid":"","roang":"","roarr":"","robrk":"","ropar":"","ropf":"","Ropf":"","roplus":"","rotimes":"","RoundImplies":"","rpar":")","rpargt":"","rppolint":"","rrarr":"","Rrightarrow":"","rsaquo":"","rscr":"","Rscr":"","rsh":"","Rsh":"","rsqb":"]","rsquo":"","rsquor":"","rthree":"","rtimes":"","rtri":"","rtrie":"","rtrif":"","rtriltri":"","RuleDelayed":"","ruluhar":"","rx":"","Sacute":"","sacute":"","sbquo":"","scap":"","Scaron":"","scaron":"","Sc":"","sc":"","sccue":"","sce":"","scE":"","Scedil":"","scedil":"","Scirc":"","scirc":"","scnap":"","scnE":"","scnsim":"","scpolint":"","scsim":"","Scy":"","scy":"","sdotb":"","sdot":"","sdote":"","searhk":"","searr":"","seArr":"","searrow":"","sect":"","semi":";","seswar":"","setminus":"","setmn":"","sext":"","Sfr":"","sfr":"","sfrown":"","sharp":"","SHCHcy":"","shchcy":"","SHcy":"","shcy":"","ShortDownArrow":"","ShortLeftArrow":"","shortmid":"","shortparallel":"","ShortRightArrow":"","ShortUpArrow":"","shy":"","Sigma":"","sigma":"","sigmaf":"","sigmav":"","sim":"","simdot":"","sime":"","simeq":"","simg":"","simgE":"","siml":"","simlE":"","simne":"","simplus":"","simrarr":"","slarr":"","SmallCircle":"","smallsetminus":"","smashp":"","smeparsl":"","smid":"","smile":"","smt":"","smte":"","smtes":"","SOFTcy":"","softcy":"","solbar":"","solb":"","sol":"/","Sopf":"","sopf":"","spades":"","spadesuit":"","spar":"","sqcap":"","sqcaps":"","sqcup":"","sqcups":"","Sqrt":"","sqsub":"","sqsube":"","sqsubset":"","sqsubseteq":"","sqsup":"","sqsupe":"","sqsupset":"","sqsupseteq":"","square":"","Square":"","SquareIntersection":"","SquareSubset":"","SquareSubsetEqual":"","SquareSuperset":"","SquareSupersetEqual":"","SquareUnion":"","squarf":"","squ":"","squf":"","srarr":"","Sscr":"","sscr":"","ssetmn":"","ssmile":"","sstarf":"","Star":"","star":"","starf":"","straightepsilon":"","straightphi":"","strns":"","sub":"","Sub":"","subdot":"","subE":"","sube":"","subedot":"","submult":"","subnE":"","subne":"","subplus":"","subrarr":"","subset":"","Subset":"","subseteq":"","subseteqq":"","SubsetEqual":"","subsetneq":"","subsetneqq":"","subsim":"","subsub":"","subsup":"","succapprox":"","succ":"","succcurlyeq":"","Succeeds":"","SucceedsEqual":"","SucceedsSlantEqual":"","SucceedsTilde":"","succeq":"","succnapprox":"","succneqq":"","succnsim":"","succsim":"","SuchThat":"","sum":"","Sum":"","sung":"","sup1":"","sup2":"","sup3":"","sup":"","Sup":"","supdot":"","supdsub":"","supE":"","supe":"","supedot":"","Superset":"","SupersetEqual":"","suphsol":"","suphsub":"","suplarr":"","supmult":"","supnE":"","supne":"","supplus":"","supset":"","Supset":"","supseteq":"","supseteqq":"","supsetneq":"","supsetneqq":"","supsim":"","supsub":"","supsup":"","swarhk":"","swarr":"","swArr":"","swarrow":"","swnwar":"","szlig":"","Tab":"\\t","target":"","Tau":"","tau":"","tbrk":"","Tcaron":"","tcaron":"","Tcedil":"","tcedil":"","Tcy":"","tcy":"","tdot":"","telrec":"","Tfr":"","tfr":"","there4":"","therefore":"","Therefore":"","Theta":"","theta":"","thetasym":"","thetav":"","thickapprox":"","thicksim":"","ThickSpace":"","ThinSpace":"","thinsp":"","thkap":"","thksim":"","THORN":"","thorn":"","tilde":"","Tilde":"","TildeEqual":"","TildeFullEqual":"","TildeTilde":"","timesbar":"","timesb":"","times":"","timesd":"","tint":"","toea":"","topbot":"","topcir":"","top":"","Topf":"","topf":"","topfork":"","tosa":"","tprime":"","trade":"","TRADE":"","triangle":"","triangledown":"","triangleleft":"","trianglelefteq":"","triangleq":"","triangleright":"","trianglerighteq":"","tridot":"","trie":"","triminus":"","TripleDot":"","triplus":"","trisb":"","tritime":"","trpezium":"","Tscr":"","tscr":"","TScy":"","tscy":"","TSHcy":"","tshcy":"","Tstrok":"","tstrok":"","twixt":"","twoheadleftarrow":"","twoheadrightarrow":"","Uacute":"","uacute":"","uarr":"","Uarr":"","uArr":"","Uarrocir":"","Ubrcy":"","ubrcy":"","Ubreve":"","ubreve":"","Ucirc":"","ucirc":"","Ucy":"","ucy":"","udarr":"","Udblac":"","udblac":"","udhar":"","ufisht":"","Ufr":"","ufr":"","Ugrave":"","ugrave":"","uHar":"","uharl":"","uharr":"","uhblk":"","ulcorn":"","ulcorner":"","ulcrop":"","ultri":"","Umacr":"","umacr":"","uml":"","UnderBar":"_","UnderBrace":"","UnderBracket":"","UnderParenthesis":"","Union":"","UnionPlus":"","Uogon":"","uogon":"","Uopf":"","uopf":"","UpArrowBar":"","uparrow":"","UpArrow":"","Uparrow":"","UpArrowDownArrow":"","updownarrow":"","UpDownArrow":"","Updownarrow":"","UpEquilibrium":"","upharpoonleft":"","upharpoonright":"","uplus":"","UpperLeftArrow":"","UpperRightArrow":"","upsi":"","Upsi":"","upsih":"","Upsilon":"","upsilon":"","UpTeeArrow":"","UpTee":"","upuparrows":"","urcorn":"","urcorner":"","urcrop":"","Uring":"","uring":"","urtri":"","Uscr":"","uscr":"","utdot":"","Utilde":"","utilde":"","utri":"","utrif":"","uuarr":"","Uuml":"","uuml":"","uwangle":"","vangrt":"","varepsilon":"","varkappa":"","varnothing":"","varphi":"","varpi":"","varpropto":"","varr":"","vArr":"","varrho":"","varsigma":"","varsubsetneq":"","varsubsetneqq":"","varsupsetneq":"","varsupsetneqq":"","vartheta":"","vartriangleleft":"","vartriangleright":"","vBar":"","Vbar":"","vBarv":"","Vcy":"","vcy":"","vdash":"","vDash":"","Vdash":"","VDash":"","Vdashl":"","veebar":"","vee":"","Vee":"","veeeq":"","vellip":"","verbar":"|","Verbar":"","vert":"|","Vert":"","VerticalBar":"","VerticalLine":"|","VerticalSeparator":"","VerticalTilde":"","VeryThinSpace":"","Vfr":"","vfr":"","vltri":"","vnsub":"","vnsup":"","Vopf":"","vopf":"","vprop":"","vrtri":"","Vscr":"","vscr":"","vsubnE":"","vsubne":"","vsupnE":"","vsupne":"","Vvdash":"","vzigzag":"","Wcirc":"","wcirc":"","wedbar":"","wedge":"","Wedge":"","wedgeq":"","weierp":"","Wfr":"","wfr":"","Wopf":"","wopf":"","wp":"","wr":"","wreath":"","Wscr":"","wscr":"","xcap":"","xcirc":"","xcup":"","xdtri":"","Xfr":"","xfr":"","xharr":"","xhArr":"","Xi":"","xi":"","xlarr":"","xlArr":"","xmap":"","xnis":"","xodot":"","Xopf":"","xopf":"","xoplus":"","xotime":"","xrarr":"","xrArr":"","Xscr":"","xscr":"","xsqcup":"","xuplus":"","xutri":"","xvee":"","xwedge":"","Yacute":"","yacute":"","YAcy":"","yacy":"","Ycirc":"","ycirc":"","Ycy":"","ycy":"","yen":"","Yfr":"","yfr":"","YIcy":"","yicy":"","Yopf":"","yopf":"","Yscr":"","yscr":"","YUcy":"","yucy":"","yuml":"","Yuml":"","Zacute":"","zacute":"","Zcaron":"","zcaron":"","Zcy":"","zcy":"","Zdot":"","zdot":"","zeetrf":"","ZeroWidthSpace":"","Zeta":"","zeta":"","zfr":"","Zfr":"","ZHcy":"","zhcy":"","zigrarr":"","zopf":"","Zopf":"","Zscr":"","zscr":"","zwj":"","zwnj":""}')},,function(module,__webpack_exports__,__webpack_require__){"use strict";var _project_project__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(125);__webpack_exports__.a={name:"project32",dependencies:[_project_project__WEBPACK_IMPORTED_MODULE_0__.a],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var _polyfill_vertex_array_object__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(413),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(16),_polyfill_table__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(153);function polyfillExtension(gl,_ref2){var extension=_ref2.extension,target=_ref2.target,target2=_ref2.target2,defaults=_polyfill_table__WEBPACK_IMPORTED_MODULE_2__.b[extension];Object(_utils__WEBPACK_IMPORTED_MODULE_1__.a)(defaults);for(var _defaults$meta=defaults.meta,_meta$suffix=(void 0===_defaults$meta?{}:_defaults$meta).suffix,suffix=void 0===_meta$suffix?"":_meta$suffix,ext=gl.getExtension(extension),_loop=function _loop(){var key=_Object$keys[_i],extKey="".concat(key).concat(suffix),polyfill=null;"meta"===key||"function"==typeof gl[key]||(ext&&"function"==typeof ext[extKey]?polyfill=function polyfill(){return ext[extKey].apply(ext,arguments)}:"function"==typeof defaults[key]&&(polyfill=defaults[key].bind(target))),polyfill&&(target[key]=polyfill,target2[key]=polyfill)},_i=0,_Object$keys=Object.keys(defaults);_i<_Object$keys.length;_i++)_loop()}(void 0!==global?global:window).polyfillContext=function polyfillContext(gl){return gl.luma=gl.luma||{},gl.luma.polyfilled||(Object(_polyfill_vertex_array_object__WEBPACK_IMPORTED_MODULE_0__.a)(gl),function initializeExtensions(gl){gl.luma.extensions={};var EXTENSIONS=gl.getSupportedExtensions()||[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=EXTENSIONS[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var extension=_step.value;gl.luma[extension]=gl.getExtension(extension)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}(gl),function installPolyfills(gl,polyfills){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=Object.getOwnPropertyNames(polyfills)[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var extension=_step2.value;"overrides"!==extension&&polyfillExtension(gl,{extension:extension,target:gl.luma,target2:gl})}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}(gl,_polyfill_table__WEBPACK_IMPORTED_MODULE_2__.b),function installOverrides(gl,_ref){var target=_ref.target,target2=_ref.target2;Object.keys(_polyfill_table__WEBPACK_IMPORTED_MODULE_2__.a).forEach((function(key){if("function"==typeof _polyfill_table__WEBPACK_IMPORTED_MODULE_2__.a[key]){var originalFunc=gl[key]?gl[key].bind(gl):function(){},polyfill=_polyfill_table__WEBPACK_IMPORTED_MODULE_2__.a[key].bind(null,gl,originalFunc);target[key]=polyfill,target2[key]=polyfill}}))}(gl,{target:gl.luma,target2:gl}),gl.luma.polyfilled=!0),gl}}).call(this,__webpack_require__(43))},function(module,exports,__webpack_require__){"use strict";(function(global,process){var _interopRequireDefault=__webpack_require__(174);Object.defineProperty(exports,"__esModule",{value:!0}),exports.console=exports.process=exports.document=exports.global=exports.window=exports.self=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(210)),globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global&&global,document:"undefined"!=typeof document&&document,process:"object"===(void 0===process?"undefined":(0,_typeof2.default)(process))&&process},self_=globals.self||globals.window||globals.global;exports.self=self_;var window_=globals.window||globals.self||globals.global;exports.window=window_;var global_=globals.global||globals.self||globals.window;exports.global=global_;var document_=globals.document||{};exports.document=document_;var process_=globals.process||{};exports.process=process_;var console_=console;exports.console=console_}).call(this,__webpack_require__(43),__webpack_require__(58))},function(module,exports,__webpack_require__){"use strict";(function(process){var _interopRequireDefault=__webpack_require__(174);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=isBrowser,exports.isBrowserMainThread=function isBrowserMainThread(){return isBrowser()&&"undefined"!=typeof document};var _typeof2=_interopRequireDefault(__webpack_require__(210)),_isElectron=_interopRequireDefault(__webpack_require__(281));function isBrowser(){return!("object"===(void 0===process?"undefined":(0,_typeof2.default)(process))&&"[object process]"===String(process)&&!process.browser)||(0,_isElectron.default)()}}).call(this,__webpack_require__(58))},function(module,exports,__webpack_require__){module.exports=function(){"use strict";var shared,worker,mapboxgl;function define(_,chunk){if(shared)if(worker){var workerBundleString="var sharedChunk = {}; ("+shared+")(sharedChunk); ("+worker+")(sharedChunk);",sharedChunk={};shared(sharedChunk),mapboxgl=chunk(sharedChunk),"undefined"!=typeof window&&(mapboxgl.workerUrl=window.URL.createObjectURL(new Blob([workerBundleString],{type:"text/javascript"})))}else worker=chunk;else shared=chunk}return define(0,(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=n;function n(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var r,n,i,a,o;for(void 0===e&&(e=1e-6),i=t,o=0;o<8;o++){if(a=this.sampleCurveX(i)-t,Math.abs(a)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=a/s}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(a=this.sampleCurveX(i),Math.abs(a-t)<e)return i;t>a?r=i:n=i,i=.5*(n-r)+r}return i},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i=a;function a(t,e){this.x=t,this.y=e}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=n,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-n*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(t){return t instanceof a?t:Array.isArray(t)?new a(t[0],t[1]):t};var o="undefined"!=typeof self?self:{};function s(t,e,n,i){var a=new r(t,e,n,i);return function(t){return a.solve(t)}}var u=s(.25,.1,.25,1);function l(t,e,r){return Math.min(r,Math.max(e,t))}function p(t,e,r){var n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i}function c(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var a=i[n];for(var o in a)t[o]=a[o]}return t}var h=1;function f(){return h++}function y(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function d(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function m(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function v(t,e){return-1!==t.indexOf(e,t.length-e.length)}function g(t,e,r){var n={};for(var i in t)n[i]=e.call(r||this,t[i],i,t);return n}function x(t,e,r){var n={};for(var i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n}function b(t){return Array.isArray(t)?t.map(b):"object"==typeof t&&t?g(t,b):t}var w={};function _(t){w[t]||("undefined"!=typeof console&&console.warn(t),w[t]=!0)}function A(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function S(t){for(var e=0,r=0,n=t.length,i=n-1,a=void 0,o=void 0;r<n;i=r++)e+=((o=t[i]).x-(a=t[r]).x)*(a.y+o.y);return e}function k(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function I(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,r,n,i){var a=n||i;return e[r]=!a||a.toLowerCase(),""})),e["max-age"]){var r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}var z=null;function C(t){if(null==z){var e=t.navigator?t.navigator.userAgent:null;z=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return z}function M(t){try{var e=o[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var E,T,P,B,V=o.performance&&o.performance.now?o.performance.now.bind(o.performance):Date.now.bind(Date),F=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame,D=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||o.msCancelAnimationFrame,L={now:V,frame:function(t){var e=F(t);return{cancel:function(){return D(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var r=o.document.createElement("canvas"),n=r.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return r.width=t.width,r.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return E||(E=o.document.createElement("a")),E.href=t,E.href},hardwareConcurrency:o.navigator&&o.navigator.hardwareConcurrency||4,get devicePixelRatio(){return o.devicePixelRatio},get prefersReducedMotion(){return!!o.matchMedia&&(null==T&&(T=o.matchMedia("(prefers-reduced-motion: reduce)")),T.matches)}},R={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},O={supported:!1,testSupport:function(t){!U&&B&&(j?q(t):P=t)}},U=!1,j=!1;function q(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,B),t.isContextLost())return;O.supported=!0}catch(t){}t.deleteTexture(e),U=!0}o.document&&((B=o.document.createElement("img")).onload=function(){P&&q(P),P=null,j=!0},B.onerror=function(){U=!0,P=null},B.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var N="01",K=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function G(t){return 0===t.indexOf("mapbox:")}K.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",N,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},K.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},K.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},K.prototype.normalizeStyleURL=function(t,e){if(!G(t))return t;var r=H(t);return r.path="/styles/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},K.prototype.normalizeGlyphsURL=function(t,e){if(!G(t))return t;var r=H(t);return r.path="/fonts/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},K.prototype.normalizeSourceURL=function(t,e){if(!G(t))return t;var r=H(t);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),this._makeAPIURL(r,this._customAccessToken||e)},K.prototype.normalizeSpriteURL=function(t,e,r,n){var i=H(t);return G(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+r,this._makeAPIURL(i,this._customAccessToken||n)):(i.path+=""+e+r,Y(i))},K.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!G(t))return t;var r=H(t);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,(L.devicePixelRatio>=2||512===e?"@2x":"")+(O.supported?".webp":"$1")),r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/v4"+r.path;var n=this._customAccessToken||function(t){for(var e=0,r=t;e<r.length;e+=1){var n=r[e].match(/^access_token=(.*)$/);if(n)return n[1]}return null}(r.params)||R.ACCESS_TOKEN;return R.REQUIRE_ACCESS_TOKEN&&n&&this._skuToken&&r.params.push("sku="+this._skuToken),this._makeAPIURL(r,n)},K.prototype.canonicalizeTileURL=function(t,e){var r=H(t);if(!r.path.match(/(^\/v4\/)/)||!r.path.match(/\.[\w]+$/))return t;var n="mapbox://tiles/";n+=r.path.replace("/v4/","");var i=r.params;return e&&(i=i.filter((function(t){return!t.match(/^access_token=/)}))),i.length&&(n+="?"+i.join("&")),n},K.prototype.canonicalizeTileset=function(t,e){for(var r=!!e&&G(e),n=[],i=0,a=t.tiles||[];i<a.length;i+=1){var o=a[i];X(o)?n.push(this.canonicalizeTileURL(o,r)):n.push(o)}return n},K.prototype._makeAPIURL=function(t,e){var r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=H(R.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!R.REQUIRE_ACCESS_TOKEN)return Y(t);if(!(e=e||R.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+r);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+r);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),Y(t)};var Z=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function X(t){return Z.test(t)}var J=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function H(t){var e=t.match(J);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Y(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function $(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(o.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var W=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};W.prototype.getStorageKey=function(t){var e,r=$(R.ACCESS_TOKEN);return e=r&&r.u?o.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):R.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},W.prototype.fetchEventData=function(){var t=M("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{var n=o.localStorage.getItem(e);n&&(this.eventData=JSON.parse(n));var i=o.localStorage.getItem(r);i&&(this.anonId=i)}catch(t){_("Unable to read from LocalStorage")}},W.prototype.saveEventData=function(){var t=M("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{o.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&o.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){_("Unable to write to LocalStorage")}},W.prototype.processRequests=function(t){},W.prototype.postEvent=function(t,e,r,n){var i=this;if(R.EVENTS_URL){var a=H(R.EVENTS_URL);a.params.push("access_token="+(n||R.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.11.1",skuId:N,userId:this.anonId},s=e?c(o,e):o,u={url:Y(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=bt(u,(function(t){i.pendingRequest=null,r(t),i.saveEventData(),i.processRequests(n)}))}},W.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var Q,tt,et=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,r,n){this.skuToken=r,(R.EVENTS_URL&&n||R.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return G(t)||X(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},n)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var r=this.queue.shift(),n=r.id,i=r.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),d(this.anonId)||(this.anonId=y()),this.postEvent(i,{skuToken:this.skuToken},(function(t){t||n&&(e.success[n]=!0)}),t))}},e}(W),rt=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){R.EVENTS_URL&&R.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return G(t)||X(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var r=$(R.ACCESS_TOKEN),n=r?r.u:R.ACCESS_TOKEN,i=n!==this.eventData.tokenU;d(this.anonId)||(this.anonId=y(),i=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),u=(a-this.eventData.lastSuccess)/864e5;i=i||u>=1||u<-1||o.getDate()!==s.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(a,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=a,e.eventData.tokenU=n)}),t)}},e}(W)),nt=rt.postTurnstileEvent.bind(rt),it=new et,at=it.postMapLoadEvent.bind(it),ot=500,st=50;function ut(){o.caches&&!Q&&(Q=o.caches.open("mapbox-tiles"))}function lt(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var pt,ct=1/0;function ht(){return null==pt&&(pt=o.OffscreenCanvas&&new o.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof o.createImageBitmap),pt}var ft={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ft);var mt,vt,yt=function(t){function e(e,r,n){401===r&&X(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=r,this.url=n,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),dt=k()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===o.location.protocol?o.parent:o).location.href},gt=function(t,e){if(!(/^file:/.test(r=t.url)||/^file:/.test(dt())&&!/^\w+:/.test(r))){if(o.fetch&&o.Request&&o.AbortController&&o.Request.prototype.hasOwnProperty("signal"))return function(t,e){var r,n=new o.AbortController,i=new o.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:dt(),signal:n.signal}),a=!1,s=!1,u=(r=i.url).indexOf("sku=")>0&&X(r);"json"===t.type&&i.headers.set("Accept","application/json");var l=function(r,n,a){if(!s){if(r&&"SecurityError"!==r.message&&_(r),n&&a)return p(n);var l=Date.now();o.fetch(i).then((function(r){if(r.ok){var n=u?r.clone():null;return p(r,n,l)}return e(new yt(r.statusText,r.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},p=function(r,n,u){("arrayBuffer"===t.type?r.arrayBuffer():"json"===t.type?r.json():r.text()).then((function(t){s||(n&&u&&function(t,e,r){if(ut(),Q){var n={status:e.status,statusText:e.statusText,headers:new o.Headers};e.headers.forEach((function(t,e){return n.headers.set(e,t)}));var i=I(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&n.headers.set("Expires",new Date(r+1e3*i["max-age"]).toUTCString()),new Date(n.headers.get("Expires")).getTime()-r<42e4||function(t,e){if(void 0===tt)try{new Response(new ReadableStream),tt=!0}catch(t){tt=!1}tt?e(t.body):t.blob().then(e)}(e,(function(e){var r=new o.Response(e,n);ut(),Q&&Q.then((function(e){return e.put(lt(t.url),r)})).catch((function(t){return _(t.message)}))})))}}(i,n,u),a=!0,e(null,t,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((function(t){s||e(new Error(t.message))}))};return u?function(t,e){if(ut(),!Q)return e(null);var r=lt(t.url);Q.then((function(t){t.match(r).then((function(n){var i=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),r=I(t.headers.get("Cache-Control")||"");return e>Date.now()&&!r["no-cache"]}(n);t.delete(r),i&&t.put(r,n.clone()),e(null,n,i)})).catch(e)})).catch(e)}(i,l):l(null,null),{cancel:function(){s=!0,a||n.abort()}}}(t,e);if(k()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var r;return function(t,e){var r=new o.XMLHttpRequest;for(var n in r.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(r.responseType="arraybuffer"),t.headers)r.setRequestHeader(n,t.headers[n]);return"json"===t.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===t.credentials,r.onerror=function(){e(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){var n=r.response;if("json"===t.type)try{n=JSON.parse(r.response)}catch(t){return e(t)}e(null,n,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else e(new yt(r.statusText,r.status,t.url))},r.send(t.body),{cancel:function(){return r.abort()}}}(t,e)},xt=function(t,e){return gt(c(t,{type:"arrayBuffer"}),e)},bt=function(t,e){return gt(c(t,{method:"POST"}),e)};mt=[],vt=0;var wt=function(t,e){if(O.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),vt>=R.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return mt.push(r),r}vt++;var n=!1,i=function(){if(!n)for(n=!0,vt--;mt.length&&vt<R.MAX_PARALLEL_IMAGE_REQUESTS;){var t=mt.shift();t.cancelled||(t.cancel=wt(t.requestParameters,t.callback).cancel)}},a=xt(t,(function(t,r,n,a){i(),t?e(t):r&&(ht()?function(t,e){var r=new o.Blob([new Uint8Array(t)],{type:"image/png"});o.createImageBitmap(r).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(r,e):function(t,e,r,n){var i=new o.Image,a=o.URL;i.onload=function(){e(null,i),a.revokeObjectURL(i.src)},i.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new o.Blob([new Uint8Array(t)],{type:"image/png"});i.cacheControl=r,i.expires=n,i.src=t.byteLength?a.createObjectURL(s):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(r,e,n,a))}));return{cancel:function(){a.cancel(),i()}}};function _t(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e))}function At(t,e,r){if(r&&r[t]){var n=r[t].indexOf(e);-1!==n&&r[t].splice(n,1)}}var St=function(t,e){void 0===e&&(e={}),c(this,e),this.type=t},kt=function(t){function e(e,r){void 0===r&&(r={}),t.call(this,"error",c({error:e},r))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(St),It=function(){};It.prototype.on=function(t,e){return this._listeners=this._listeners||{},_t(t,e,this._listeners),this},It.prototype.off=function(t,e){return At(t,e,this._listeners),At(t,e,this._oneTimeListeners),this},It.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},_t(t,e,this._oneTimeListeners),this},It.prototype.fire=function(t,e){"string"==typeof t&&(t=new St(t,e||{}));var r=t.type;if(this.listens(r)){t.target=this;for(var n=0,i=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];n<i.length;n+=1)i[n].call(this,t);for(var a=0,o=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];a<o.length;a+=1){var s=o[a];At(r,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(c(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof kt&&console.error(t.error);return this},It.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},It.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var zt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ct=function(t,e,r,n){this.message=(t?t+": ":"")+r,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)};function Mt(t){var e=t.value;return e?[new Ct(t.key,e,"constants have been deprecated as of v8")]:[]}function Et(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var a=i[n];for(var o in a)t[o]=a[o]}return t}function Tt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Pt(t){if(Array.isArray(t))return t.map(Pt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var r in t)e[r]=Pt(t[r]);return e}return Tt(t)}var Bt=function(t){function e(e,r){t.call(this,r),this.message=r,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Vt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,n=e;r<n.length;r+=1){var i=n[r];this.bindings[i[0]]=i[1]}};Vt.prototype.concat=function(t){return new Vt(this,t)},Vt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Vt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Ft={kind:"null"},Dt={kind:"number"},Lt={kind:"string"},Rt={kind:"boolean"},Ot={kind:"color"},Ut={kind:"object"},jt={kind:"value"},qt={kind:"collator"},Nt={kind:"formatted"},Kt={kind:"resolvedImage"};function Gt(t,e){return{kind:"array",itemType:t,N:e}}function Zt(t){if("array"===t.kind){var e=Zt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Xt=[Ft,Dt,Lt,Rt,Ot,Nt,Ut,Gt(jt),Kt];function Jt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Jt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var r=0,n=Xt;r<n.length;r+=1)if(!Jt(n[r],e))return null}return"Expected "+Zt(t)+" but found "+Zt(e)+" instead."}function Ht(t,e){return e.some((function(e){return e.kind===t.kind}))}function Yt(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var $t=e((function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function a(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function o(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in r)return r[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=s.indexOf("("),l=s.indexOf(")");if(-1!==u&&l+1===s.length){var p=s.substr(0,u),c=s.substr(u+1,l-(u+1)).split(","),h=1;switch(p){case"rgba":if(4!==c.length)return null;h=a(c.pop());case"rgb":return 3!==c.length?null:[i(c[0]),i(c[1]),i(c[2]),h];case"hsla":if(4!==c.length)return null;h=a(c.pop());case"hsl":if(3!==c.length)return null;var f=(parseFloat(c[0])%360+360)%360/360,y=a(c[1]),d=a(c[2]),m=d<=.5?d*(y+1):d+y-d*y,v=2*d-m;return[n(255*o(v,m,f+1/3)),n(255*o(v,m,f)),n(255*o(v,m,f-1/3)),h];default:return null}}return null}}catch(t){}})).parseCSSColor,Wt=function(t,e,r,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=r,this.a=n};Wt.parse=function(t){if(t){if(t instanceof Wt)return t;if("string"==typeof t){var e=$t(t);if(e)return new Wt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Wt.prototype.toString=function(){var t=this.toArray(),e=t[1],r=t[2],n=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(r)+","+n+")"},Wt.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},Wt.black=new Wt(0,0,0,1),Wt.white=new Wt(1,1,1,1),Wt.transparent=new Wt(0,0,0,0),Wt.red=new Wt(1,0,0,1);var Qt=function(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Qt.prototype.compare=function(t,e){return this.collator.compare(t,e)},Qt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var te=function(t,e,r,n,i){this.text=t,this.image=e,this.scale=r,this.fontStack=n,this.textColor=i},ee=function(t){this.sections=t};ee.fromString=function(t){return new ee([new te(t,null,null,null,null)])},ee.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},ee.factory=function(t){return t instanceof ee?t:ee.fromString(t)},ee.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},ee.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];if(n.image)t.push(["image",n.image.name]);else{t.push(n.text);var i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),n.textColor&&(i["text-color"]=["rgba"].concat(n.textColor.toArray())),t.push(i)}}return t};var re=function(t){this.name=t.name,this.available=t.available};function ne(t,e,r,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,r,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ie(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Wt)return!0;if(t instanceof Qt)return!0;if(t instanceof ee)return!0;if(t instanceof re)return!0;if(Array.isArray(t)){for(var e=0,r=t;e<r.length;e+=1)if(!ie(r[e]))return!1;return!0}if("object"==typeof t){for(var n in t)if(!ie(t[n]))return!1;return!0}return!1}function ae(t){if(null===t)return Ft;if("string"==typeof t)return Lt;if("boolean"==typeof t)return Rt;if("number"==typeof t)return Dt;if(t instanceof Wt)return Ot;if(t instanceof Qt)return qt;if(t instanceof ee)return Nt;if(t instanceof re)return Kt;if(Array.isArray(t)){for(var e,r=t.length,n=0,i=t;n<i.length;n+=1){var a=ae(i[n]);if(e){if(e===a)continue;e=jt;break}e=a}return Gt(e||jt,r)}return Ut}function oe(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Wt||t instanceof ee||t instanceof re?t.toString():JSON.stringify(t)}re.prototype.toString=function(){return this.name},re.fromString=function(t){return t?new re({name:t,available:!1}):null},re.prototype.serialize=function(){return["image",this.name]};var se=function(t,e){this.type=t,this.value=e};se.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!ie(t[1]))return e.error("invalid value");var r=t[1],n=ae(r),i=e.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new se(n,r)},se.prototype.evaluate=function(){return this.value},se.prototype.eachChild=function(){},se.prototype.outputDefined=function(){return!0},se.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Wt?["rgba"].concat(this.value.toArray()):this.value instanceof ee?this.value.serialize():this.value};var ue=function(t){this.name="ExpressionEvaluationError",this.message=t};ue.prototype.toJSON=function(){return this.message};var le={string:Lt,number:Dt,boolean:Rt,object:Ut},pe=function(t,e){this.type=t,this.args=e};pe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r,n=1,i=t[0];if("array"===i){var a,o;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in le)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=le[s],n++}else a=jt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],n++}r=Gt(a,o)}else r=le[i];for(var u=[];n<t.length;n++){var l=e.parse(t[n],n,jt);if(!l)return null;u.push(l)}return new pe(r,u)},pe.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!Jt(this.type,ae(r)))return r;if(e===this.args.length-1)throw new ue("Expected value to be of type "+Zt(this.type)+", but found "+Zt(ae(r))+" instead.")}return null},pe.prototype.eachChild=function(t){this.args.forEach(t)},pe.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},pe.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);var n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var ce=function(t){this.type=Nt,this.sections=t};ce.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return e.error("First argument must be an image or text section.");for(var n=[],i=!1,a=1;a<=t.length-1;++a){var o=t[a];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;var s=null;if(o["font-scale"]&&!(s=e.parse(o["font-scale"],1,Dt)))return null;var u=null;if(o["text-font"]&&!(u=e.parse(o["text-font"],1,Gt(Lt))))return null;var l=null;if(o["text-color"]&&!(l=e.parse(o["text-color"],1,Ot)))return null;var p=n[n.length-1];p.scale=s,p.font=u,p.textColor=l}else{var c=e.parse(t[a],1,jt);if(!c)return null;var h=c.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:c,scale:null,font:null,textColor:null})}}return new ce(n)},ce.prototype.evaluate=function(t){return new ee(this.sections.map((function(e){var r=e.content.evaluate(t);return ae(r)===Kt?new te("",r,null,null,null):new te(oe(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},ce.prototype.eachChild=function(t){for(var e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}},ce.prototype.outputDefined=function(){return!1},ce.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t.push(n.content.serialize());var i={};n.scale&&(i["font-scale"]=n.scale.serialize()),n.font&&(i["text-font"]=n.font.serialize()),n.textColor&&(i["text-color"]=n.textColor.serialize()),t.push(i)}return t};var he=function(t){this.type=Kt,this.input=t};he.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,Lt);return r?new he(r):e.error("No image name provided.")},he.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=re.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r},he.prototype.eachChild=function(t){t(this.input)},he.prototype.outputDefined=function(){return!1},he.prototype.serialize=function(){return["image",this.input.serialize()]};var fe={"to-boolean":Rt,"to-color":Ot,"to-number":Dt,"to-string":Lt},ye=function(t,e){this.type=t,this.args=e};ye.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");for(var n=fe[r],i=[],a=1;a<t.length;a++){var o=e.parse(t[a],a,jt);if(!o)return null;i.push(o)}return new ye(n,i)},ye.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,r,n=0,i=this.args;n<i.length;n+=1){if(r=null,(e=i[n].evaluate(t))instanceof Wt)return e;if("string"==typeof e){var a=t.parseColor(e);if(a)return a}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ne(e[0],e[1],e[2],e[3])))return new Wt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ue(r||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var o=null,s=0,u=this.args;s<u.length;s+=1){if(null===(o=u[s].evaluate(t)))return 0;var l=Number(o);if(!isNaN(l))return l}throw new ue("Could not convert "+JSON.stringify(o)+" to number.")}return"formatted"===this.type.kind?ee.fromString(oe(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?re.fromString(oe(this.args[0].evaluate(t))):oe(this.args[0].evaluate(t))},ye.prototype.eachChild=function(t){this.args.forEach(t)},ye.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ye.prototype.serialize=function(){if("formatted"===this.type.kind)return new ce([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new he(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var de=["Unknown","Point","LineString","Polygon"],me=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};me.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},me.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?de[this.feature.type]:this.feature.type:null},me.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},me.prototype.canonicalID=function(){return this.canonical},me.prototype.properties=function(){return this.feature&&this.feature.properties||{}},me.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Wt.parse(t)),e};var ve=function(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n};ve.prototype.evaluate=function(t){return this._evaluate(t,this.args)},ve.prototype.eachChild=function(t){this.args.forEach(t)},ve.prototype.outputDefined=function(){return!1},ve.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},ve.parse=function(t,e){var r,n=t[0],i=ve.definitions[n];if(!i)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var a=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=o.filter((function(e){var r=e[0];return!Array.isArray(r)||r.length===t.length-1})),u=null,l=0,p=s;l<p.length;l+=1){var c=p[l],h=c[0],f=c[1];u=new Oe(e.registry,e.path,null,e.scope);for(var y=[],d=!1,m=1;m<t.length;m++){var v=t[m],g=Array.isArray(h)?h[m-1]:h.type,x=u.parse(v,1+y.length,g);if(!x){d=!0;break}y.push(x)}if(!d)if(Array.isArray(h)&&h.length!==y.length)u.error("Expected "+h.length+" arguments, but found "+y.length+" instead.");else{for(var b=0;b<y.length;b++){var w=Array.isArray(h)?h[b]:h.type,_=y[b];u.concat(b+1).checkSubtype(w,_.type)}if(0===u.errors.length)return new ve(n,a,f,y)}}if(1===s.length)(r=e.errors).push.apply(r,u.errors);else{for(var A=(s.length?s:o).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Zt).join(", ")+")":"("+Zt(e.type)+"...)"})).join(" | "),S=[],k=1;k<t.length;k++){var I=e.parse(t[k],1+S.length);if(!I)return null;S.push(Zt(I.type))}e.error("Expected arguments of type "+A+", but found ("+S.join(", ")+") instead.")}return null},ve.register=function(t,e){for(var r in ve.definitions=e,e)t[r]=ve};var ge=function(t,e,r){this.type=qt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e};function xe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function be(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function we(t,e){var r=(180+t[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(r*i*8192),Math.round(n*i*8192)]}function _e(t,e,r){return e[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-e[0])*(t[1]-e[1])/(r[1]-e[1])+e[0]}function Ae(t,e){for(var r,n,i,a,o,s,u,l=!1,p=0,c=e.length;p<c;p++)for(var h=e[p],f=0,y=h.length;f<y-1;f++){if((a=(r=t)[0]-(n=h[f])[0])*(u=r[1]-(i=h[f+1])[1])-(s=r[0]-i[0])*(o=r[1]-n[1])==0&&a*s<=0&&o*u<=0)return!1;_e(t,h[f],h[f+1])&&(l=!l)}return l}function Se(t,e){for(var r=0;r<e.length;r++)if(Ae(t,e[r]))return!0;return!1}function ke(t,e,r,n){var i=n[0]-r[0],a=n[1]-r[1],o=(t[0]-r[0])*a-i*(t[1]-r[1]),s=(e[0]-r[0])*a-i*(e[1]-r[1]);return o>0&&s<0||o<0&&s>0}function Ie(t,e,r){for(var n=0,i=r;n<i.length;n+=1)for(var a=i[n],o=0;o<a.length-1;++o)if(0!=(c=[(p=a[o+1])[0]-(l=a[o])[0],p[1]-l[1]])[0]*(h=[(u=e)[0]-(s=t)[0],u[1]-s[1]])[1]-c[1]*h[0]&&ke(s,u,l,p)&&ke(l,p,s,u))return!0;var s,u,l,p,c,h;return!1}function ze(t,e){for(var r=0;r<t.length;++r)if(!Ae(t[r],e))return!1;for(var n=0;n<t.length-1;++n)if(Ie(t[n],t[n+1],e))return!1;return!0}function Ce(t,e){for(var r=0;r<e.length;r++)if(ze(t,e[r]))return!0;return!1}function Me(t,e,r){for(var n=[],i=0;i<t.length;i++){for(var a=[],o=0;o<t[i].length;o++){var s=we(t[i][o],r);xe(e,s),a.push(s)}n.push(a)}return n}function Ee(t,e,r){for(var n=[],i=0;i<t.length;i++){var a=Me(t[i],e,r);n.push(a)}return n}function Te(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){var i=.5*n,a=t[0]-r[0]>i?-n:r[0]-t[0]>i?n:0;0===a&&(a=t[0]-r[2]>i?-n:r[2]-t[0]>i?n:0),t[0]+=a}xe(e,t)}function Pe(t,e,r,n){for(var i=8192*Math.pow(2,n.z),a=[8192*n.x,8192*n.y],o=[],s=0,u=t;s<u.length;s+=1)for(var l=0,p=u[s];l<p.length;l+=1){var c=p[l],h=[c.x+a[0],c.y+a[1]];Te(h,e,r,i),o.push(h)}return o}function Be(t,e,r,n){for(var i,a=8192*Math.pow(2,n.z),o=[8192*n.x,8192*n.y],s=[],u=0,l=t;u<l.length;u+=1){for(var p=[],c=0,h=l[u];c<h.length;c+=1){var f=h[c],y=[f.x+o[0],f.y+o[1]];xe(e,y),p.push(y)}s.push(p)}if(e[2]-e[0]<=a/2){(i=e)[0]=i[1]=1/0,i[2]=i[3]=-1/0;for(var d=0,m=s;d<m.length;d+=1)for(var v=0,g=m[d];v<g.length;v+=1)Te(g[v],e,r,a)}return s}ge.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Rt);if(!n)return null;var i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Rt);if(!i)return null;var a=null;return r.locale&&!(a=e.parse(r.locale,1,Lt))?null:new ge(n,i,a)},ge.prototype.evaluate=function(t){return new Qt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ge.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ge.prototype.outputDefined=function(){return!1},ge.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Ve=function(t,e){this.type=Rt,this.geojson=t,this.geometries=e};function Fe(t){if(t instanceof ve){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Ve)return!1;var e=!0;return t.eachChild((function(t){e&&!Fe(t)&&(e=!1)})),e}function De(t){if(t instanceof ve&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!De(t)&&(e=!1)})),e}function Le(t,e){if(t instanceof ve&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild((function(t){r&&!Le(t,e)&&(r=!1)})),r}Ve.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(ie(t[1])){var r=t[1];if("FeatureCollection"===r.type)for(var n=0;n<r.features.length;++n){var i=r.features[n].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Ve(r,r.features[n].geometry)}else if("Feature"===r.type){var a=r.geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new Ve(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new Ve(r,r)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ve.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var a=Me(e.coordinates,n,i),o=Pe(t.geometry(),r,n,i);if(!be(r,n))return!1;for(var s=0,u=o;s<u.length;s+=1)if(!Ae(u[s],a))return!1}if("MultiPolygon"===e.type){var l=Ee(e.coordinates,n,i),p=Pe(t.geometry(),r,n,i);if(!be(r,n))return!1;for(var c=0,h=p;c<h.length;c+=1)if(!Se(h[c],l))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var a=Me(e.coordinates,n,i),o=Be(t.geometry(),r,n,i);if(!be(r,n))return!1;for(var s=0,u=o;s<u.length;s+=1)if(!ze(u[s],a))return!1}if("MultiPolygon"===e.type){var l=Ee(e.coordinates,n,i),p=Be(t.geometry(),r,n,i);if(!be(r,n))return!1;for(var c=0,h=p;c<h.length;c+=1)if(!Ce(h[c],l))return!1}return!0}(t,this.geometries)}return!1},Ve.prototype.eachChild=function(){},Ve.prototype.outputDefined=function(){return!0},Ve.prototype.serialize=function(){return["within",this.geojson]};var Re=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Re.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var r=t[1];return e.scope.has(r)?new Re(r,e.scope.get(r)):e.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},Re.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Re.prototype.eachChild=function(){},Re.prototype.outputDefined=function(){return!1},Re.prototype.serialize=function(){return["var",this.name]};var Oe=function(t,e,r,n,i){void 0===e&&(e=[]),void 0===n&&(n=new Vt),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=n,this.errors=i,this.expectedType=r};function Ue(t,e){for(var r,n=t.length-1,i=0,a=n,o=0;i<=a;)if((r=t[o=Math.floor((i+a)/2)])<=e){if(o===n||e<t[o+1])return o;i=o+1}else{if(!(r>e))throw new ue("Input is not a number.");a=o-1}return 0}Oe.prototype.parse=function(t,e,r,n,i){return void 0===i&&(i={}),e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)},Oe.prototype._parse=function(t,e){function r(t,e,r){return"assert"===r?new pe(e,[t]):"coerce"===r?new ye(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n];if(i){var a=i.parse(t,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=r(a,o,e.typeAnnotation||"coerce");else a=r(a,o,e.typeAnnotation||"assert")}if(!(a instanceof se)&&"resolvedImage"!==a.type.kind&&function t(e){if(e instanceof Re)return t(e.boundExpression);if(e instanceof ve&&"error"===e.name)return!1;if(e instanceof ge)return!1;if(e instanceof Ve)return!1;var r=e instanceof ye||e instanceof pe,n=!0;return e.eachChild((function(e){n=r?n&&t(e):n&&e instanceof se})),!!n&&Fe(e)&&Le(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(a)){var u=new me;try{a=new se(a.type,a.evaluate(u))}catch(t){return this.error(t.message),null}}return a}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Oe.prototype.concat=function(t,e,r){var n="number"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new Oe(this.registry,n,e||null,i,this.errors)},Oe.prototype.error=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var n=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Bt(n,t))},Oe.prototype.checkSubtype=function(t,e){var r=Jt(t,e);return r&&this.error(r),r};var je=function(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var n=0,i=r;n<i.length;n+=1){var a=i[n],o=a[1];this.labels.push(a[0]),this.outputs.push(o)}};function qe(t,e,r){return t*(1-r)+e*r}je.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var r=e.parse(t[1],1,Dt);if(!r)return null;var n=[],i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var a=1;a<t.length;a+=2){var o=1===a?-1/0:t[a],s=t[a+1],u=a,l=a+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(n.length&&n[n.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var p=e.parse(s,l,i);if(!p)return null;i=i||p.type,n.push([o,p])}return new je(i,r,n)},je.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[Ue(e,n)].evaluate(t)},je.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},je.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},je.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Ne=Object.freeze({__proto__:null,number:qe,color:function(t,e,r){return new Wt(qe(t.r,e.r,r),qe(t.g,e.g,r),qe(t.b,e.b,r),qe(t.a,e.a,r))},array:function(t,e,r){return t.map((function(t,n){return qe(t,e[n],r)}))}}),Ke=6/29*3*(6/29),Ge=Math.PI/180,Ze=180/Math.PI;function Xe(t){return t>.008856451679035631?Math.pow(t,1/3):t/Ke+4/29}function Je(t){return t>6/29?t*t*t:Ke*(t-4/29)}function He(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ye(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $e(t){var e=Ye(t.r),r=Ye(t.g),n=Ye(t.b),i=Xe((.4124564*e+.3575761*r+.1804375*n)/.95047),a=Xe((.2126729*e+.7151522*r+.072175*n)/1);return{l:116*a-16,a:500*(i-a),b:200*(a-Xe((.0193339*e+.119192*r+.9503041*n)/1.08883)),alpha:t.a}}function We(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*Je(e),r=.95047*Je(r),n=1.08883*Je(n),new Wt(He(3.2404542*r-1.5371385*e-.4985314*n),He(-.969266*r+1.8760108*e+.041556*n),He(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function Qe(t,e,r){var n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}var tr={forward:$e,reverse:We,interpolate:function(t,e,r){return{l:qe(t.l,e.l,r),a:qe(t.a,e.a,r),b:qe(t.b,e.b,r),alpha:qe(t.alpha,e.alpha,r)}}},er={forward:function(t){var e=$e(t),r=e.l,n=e.a,i=e.b,a=Math.atan2(i,n)*Ze;return{h:a<0?a+360:a,c:Math.sqrt(n*n+i*i),l:r,alpha:t.a}},reverse:function(t){var e=t.h*Ge,r=t.c;return We({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:Qe(t.h,e.h,r),c:qe(t.c,e.c,r),l:qe(t.l,e.l,r),alpha:qe(t.alpha,e.alpha,r)}}},rr=Object.freeze({__proto__:null,lab:tr,hcl:er}),nr=function(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(var a=0,o=i;a<o.length;a+=1){var s=o[a],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};function ir(t,e,r,n){var i=n-r,a=t-r;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}nr.interpolationFactor=function(t,e,n,i){var a=0;if("exponential"===t.name)a=ir(e,t.base,n,i);else if("linear"===t.name)a=ir(e,1,n,i);else if("cubic-bezier"===t.name){var o=t.controlPoints;a=new r(o[0],o[1],o[2],o[3]).solve(ir(e,1,n,i))}return a},nr.parse=function(t,e){var r=t[0],n=t[1],i=t[2],a=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,Dt)))return null;var u=[],l=null;"interpolate-hcl"===r||"interpolate-lab"===r?l=Ot:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var p=0;p<a.length;p+=2){var c=a[p],h=a[p+1],f=p+3,y=p+4;if("number"!=typeof c)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(u.length&&u[u.length-1][0]>=c)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var d=e.parse(h,y,l);if(!d)return null;l=l||d.type,u.push([c,d])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new nr(l,r,n,i,u):e.error("Type "+Zt(l)+" is not interpolatable.")},nr.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);var a=Ue(e,n),o=nr.interpolationFactor(this.interpolation,n,e[a],e[a+1]),s=r[a].evaluate(t),u=r[a+1].evaluate(t);return"interpolate"===this.operator?Ne[this.type.kind.toLowerCase()](s,u,o):"interpolate-hcl"===this.operator?er.reverse(er.interpolate(er.forward(s),er.forward(u),o)):tr.reverse(tr.interpolate(tr.forward(s),tr.forward(u),o))},nr.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},nr.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},nr.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e};var ar=function(t,e){this.type=t,this.args=e};ar.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var r=null,n=e.expectedType;n&&"value"!==n.kind&&(r=n);for(var i=[],a=0,o=t.slice(1);a<o.length;a+=1){var s=e.parse(o[a],1+i.length,r,void 0,{typeAnnotation:"omit"});if(!s)return null;r=r||s.type,i.push(s)}var u=n&&i.some((function(t){return Jt(n,t.type)}));return new ar(u?jt:r,i)},ar.prototype.evaluate=function(t){for(var e,r=null,n=0,i=0,a=this.args;i<a.length&&(n++,(r=a[i].evaluate(t))&&r instanceof re&&!r.available&&(e||(e=r.name),r=null,n===this.args.length&&(r=e)),null===r);i+=1);return r},ar.prototype.eachChild=function(t){this.args.forEach(t)},ar.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ar.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var or=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};or.prototype.evaluate=function(t){return this.result.evaluate(t)},or.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1)t(r[e][1]);t(this.result)},or.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],n=1;n<t.length-1;n+=2){var i=t[n];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var a=e.parse(t[n+1],n+1);if(!a)return null;r.push([i,a])}var o=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return o?new or(r,o):null},or.prototype.outputDefined=function(){return this.result.outputDefined()},or.prototype.serialize=function(){for(var t=["let"],e=0,r=this.bindings;e<r.length;e+=1){var n=r[e];t.push(n[0],n[1].serialize())}return t.push(this.result.serialize()),t};var sr=function(t,e,r){this.type=t,this.index=e,this.input=r};sr.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,Dt),n=e.parse(t[2],2,Gt(e.expectedType||jt));return r&&n?new sr(n.type.itemType,r,n):null},sr.prototype.evaluate=function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new ue("Array index out of bounds: "+e+" < 0.");if(e>=r.length)throw new ue("Array index out of bounds: "+e+" > "+(r.length-1)+".");if(e!==Math.floor(e))throw new ue("Array index must be an integer, but found "+e+" instead.");return r[e]},sr.prototype.eachChild=function(t){t(this.index),t(this.input)},sr.prototype.outputDefined=function(){return!1},sr.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ur=function(t,e){this.type=Rt,this.needle=t,this.haystack=e};ur.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,jt),n=e.parse(t[2],2,jt);return r&&n?Ht(r.type,[Rt,Lt,Dt,Ft,jt])?new ur(r,n):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(r.type)+" instead"):null},ur.prototype.evaluate=function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!r)return!1;if(!Yt(e,["boolean","string","number","null"]))throw new ue("Expected first argument to be of type boolean, string, number or null, but found "+Zt(ae(e))+" instead.");if(!Yt(r,["string","array"]))throw new ue("Expected second argument to be of type array or string, but found "+Zt(ae(r))+" instead.");return r.indexOf(e)>=0},ur.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},ur.prototype.outputDefined=function(){return!0},ur.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var lr=function(t,e,r){this.type=Dt,this.needle=t,this.haystack=e,this.fromIndex=r};lr.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,jt),n=e.parse(t[2],2,jt);if(!r||!n)return null;if(!Ht(r.type,[Rt,Lt,Dt,Ft,jt]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(r.type)+" instead");if(4===t.length){var i=e.parse(t[3],3,Dt);return i?new lr(r,n,i):null}return new lr(r,n)},lr.prototype.evaluate=function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!Yt(e,["boolean","string","number","null"]))throw new ue("Expected first argument to be of type boolean, string, number or null, but found "+Zt(ae(e))+" instead.");if(!Yt(r,["string","array"]))throw new ue("Expected second argument to be of type array or string, but found "+Zt(ae(r))+" instead.");if(this.fromIndex){var n=this.fromIndex.evaluate(t);return r.indexOf(e,n)}return r.indexOf(e)},lr.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},lr.prototype.outputDefined=function(){return!1},lr.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var pr=function(t,e,r,n,i,a){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=a};pr.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i={},a=[],o=2;o<t.length-1;o+=2){var s=t[o],u=t[o+1];Array.isArray(s)||(s=[s]);var l=e.concat(o);if(0===s.length)return l.error("Expected at least one branch label.");for(var p=0,c=s;p<c.length;p+=1){var h=c[p];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(r){if(l.checkSubtype(r,ae(h)))return null}else r=ae(h);if(void 0!==i[String(h)])return l.error("Branch labels must be unique.");i[String(h)]=a.length}var f=e.parse(u,o,n);if(!f)return null;n=n||f.type,a.push(f)}var y=e.parse(t[1],1,jt);if(!y)return null;var d=e.parse(t[t.length-1],t.length-1,n);return d?"value"!==y.type.kind&&e.concat(1).checkSubtype(r,y.type)?null:new pr(r,n,y,i,a,d):null},pr.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(ae(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},pr.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},pr.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},pr.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],r=[],n={},i=0,a=Object.keys(this.cases).sort();i<a.length;i+=1){var o=a[i];void 0===(c=n[this.cases[o]])?(n[this.cases[o]]=r.length,r.push([this.cases[o],[o]])):r[c][1].push(o)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,l=r;u<l.length;u+=1){var p=l[u],c=p[0],h=p[1];e.push(1===h.length?s(h[0]):h.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var cr=function(t,e,r){this.type=t,this.branches=e,this.otherwise=r};cr.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n=[],i=1;i<t.length-1;i+=2){var a=e.parse(t[i],i,Rt);if(!a)return null;var o=e.parse(t[i+1],i+1,r);if(!o)return null;n.push([a,o]),r=r||o.type}var s=e.parse(t[t.length-1],t.length-1,r);return s?new cr(r,n,s):null},cr.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[1];if(n[0].evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)},cr.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[1];t(n[0]),t(i)}t(this.otherwise)},cr.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},cr.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var hr=function(t,e,r,n){this.type=t,this.input=e,this.beginIndex=r,this.endIndex=n};function fr(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function yr(t,e,r,n){return 0===n.compare(e,r)}function dr(t,e,r){var n="=="!==t&&"!="!==t;return function(){function i(t,e,r){this.type=Rt,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=t[0],a=e.parse(t[1],1,jt);if(!a)return null;if(!fr(r,a.type))return e.concat(1).error('"'+r+"\" comparisons are not supported for type '"+Zt(a.type)+"'.");var o=e.parse(t[2],2,jt);if(!o)return null;if(!fr(r,o.type))return e.concat(2).error('"'+r+"\" comparisons are not supported for type '"+Zt(o.type)+"'.");if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot compare types '"+Zt(a.type)+"' and '"+Zt(o.type)+"'.");n&&("value"===a.type.kind&&"value"!==o.type.kind?a=new pe(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new pe(a.type,[o])));var s=null;if(4===t.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,qt)))return null}return new i(a,o,s)},i.prototype.evaluate=function(i){var a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){var s=ae(a),u=ae(o);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new ue('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var l=ae(a),p=ae(o);if("string"!==l.kind||"string"!==p.kind)return e(i,a,o)}return this.collator?r(i,a,o,this.collator.evaluate(i)):e(i,a,o)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.outputDefined=function(){return!0},i.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},i}()}hr.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,jt),n=e.parse(t[2],2,Dt);if(!r||!n)return null;if(!Ht(r.type,[Gt(jt),Lt,jt]))return e.error("Expected first argument to be of type array or string, but found "+Zt(r.type)+" instead");if(4===t.length){var i=e.parse(t[3],3,Dt);return i?new hr(r.type,r,n,i):null}return new hr(r.type,r,n)},hr.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!Yt(e,["string","array"]))throw new ue("Expected first argument to be of type array or string, but found "+Zt(ae(e))+" instead.");if(this.endIndex){var n=this.endIndex.evaluate(t);return e.slice(r,n)}return e.slice(r)},hr.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},hr.prototype.outputDefined=function(){return!1},hr.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var mr=dr("==",(function(t,e,r){return e===r}),yr),vr=dr("!=",(function(t,e,r){return e!==r}),(function(t,e,r,n){return!yr(0,e,r,n)})),gr=dr("<",(function(t,e,r){return e<r}),(function(t,e,r,n){return n.compare(e,r)<0})),xr=dr(">",(function(t,e,r){return e>r}),(function(t,e,r,n){return n.compare(e,r)>0})),br=dr("<=",(function(t,e,r){return e<=r}),(function(t,e,r,n){return n.compare(e,r)<=0})),wr=dr(">=",(function(t,e,r){return e>=r}),(function(t,e,r,n){return n.compare(e,r)>=0})),_r=function(t,e,r,n,i){this.type=Lt,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=i};_r.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,Dt);if(!r)return null;var n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");var i=null;if(n.locale&&!(i=e.parse(n.locale,1,Lt)))return null;var a=null;if(n.currency&&!(a=e.parse(n.currency,1,Lt)))return null;var o=null;if(n["min-fraction-digits"]&&!(o=e.parse(n["min-fraction-digits"],1,Dt)))return null;var s=null;return n["max-fraction-digits"]&&!(s=e.parse(n["max-fraction-digits"],1,Dt))?null:new _r(r,i,a,o,s)},_r.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},_r.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},_r.prototype.outputDefined=function(){return!1},_r.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Ar=function(t){this.type=Dt,this.input=t};Ar.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error("Expected argument of type string or array, but found "+Zt(r.type)+" instead."):new Ar(r):null},Ar.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ue("Expected value to be of type string or array, but found "+Zt(ae(e))+" instead.")},Ar.prototype.eachChild=function(t){t(this.input)},Ar.prototype.outputDefined=function(){return!1},Ar.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Sr={"==":mr,"!=":vr,">":xr,"<":gr,">=":wr,"<=":br,array:pe,at:sr,boolean:pe,case:cr,coalesce:ar,collator:ge,format:ce,image:he,in:ur,"index-of":lr,interpolate:nr,"interpolate-hcl":nr,"interpolate-lab":nr,length:Ar,let:or,literal:se,match:pr,number:pe,"number-format":_r,object:pe,slice:hr,step:je,string:pe,"to-boolean":ye,"to-color":ye,"to-number":ye,"to-string":ye,var:Re,within:Ve};function kr(t,e){var r=e[0],n=e[1],i=e[2],a=e[3];r=r.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);var o=a?a.evaluate(t):1,s=ne(r,n,i,o);if(s)throw new ue(s);return new Wt(r/255*o,n/255*o,i/255*o,o)}function Ir(t,e){return t in e}function zr(t,e){var r=e[t];return void 0===r?null:r}function Cr(t){return{type:t}}function Mr(t){return{result:"success",value:t}}function Er(t){return{result:"error",value:t}}function Tr(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Pr(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Br(t){return!!t.expression&&t.expression.interpolated}function Vr(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Fr(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Dr(t){return t}function Lr(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function Rr(t,e,r,n,i){return Lr(typeof r===i?n[r]:void 0,t.default,e.default)}function Or(t,e,r){if("number"!==Vr(r))return Lr(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];var i=Ue(t.stops.map((function(t){return t[0]})),r);return t.stops[i][1]}function Ur(t,e,r){var n=void 0!==t.base?t.base:1;if("number"!==Vr(r))return Lr(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];var a=Ue(t.stops.map((function(t){return t[0]})),r),o=function(t,e,r,n){var i=n-r,a=t-r;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}(r,n,t.stops[a][0],t.stops[a+1][0]),s=t.stops[a][1],u=t.stops[a+1][1],l=Ne[e.type]||Dr;if(t.colorSpace&&"rgb"!==t.colorSpace){var p=rr[t.colorSpace];l=function(t,e){return p.reverse(p.interpolate(p.forward(t),p.forward(e),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=s.evaluate.apply(void 0,t),n=u.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==n)return l(r,n,o)}}:l(s,u,o)}function jr(t,e,r){return"color"===e.type?r=Wt.parse(r):"formatted"===e.type?r=ee.fromString(r.toString()):"resolvedImage"===e.type?r=re.fromString(r.toString()):Vr(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),Lr(r,t.default,e.default)}ve.register(Sr,{error:[{kind:"error"},[Lt],function(t,e){throw new ue(e[0].evaluate(t))}],typeof:[Lt,[jt],function(t,e){return Zt(ae(e[0].evaluate(t)))}],"to-rgba":[Gt(Dt,4),[Ot],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Ot,[Dt,Dt,Dt],kr],rgba:[Ot,[Dt,Dt,Dt,Dt],kr],has:{type:Rt,overloads:[[[Lt],function(t,e){return Ir(e[0].evaluate(t),t.properties())}],[[Lt,Ut],function(t,e){var r=e[1];return Ir(e[0].evaluate(t),r.evaluate(t))}]]},get:{type:jt,overloads:[[[Lt],function(t,e){return zr(e[0].evaluate(t),t.properties())}],[[Lt,Ut],function(t,e){var r=e[1];return zr(e[0].evaluate(t),r.evaluate(t))}]]},"feature-state":[jt,[Lt],function(t,e){return zr(e[0].evaluate(t),t.featureState||{})}],properties:[Ut,[],function(t){return t.properties()}],"geometry-type":[Lt,[],function(t){return t.geometryType()}],id:[jt,[],function(t){return t.id()}],zoom:[Dt,[],function(t){return t.globals.zoom}],"heatmap-density":[Dt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Dt,[],function(t){return t.globals.lineProgress||0}],accumulated:[jt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Dt,Cr(Dt),function(t,e){for(var r=0,n=0,i=e;n<i.length;n+=1)r+=i[n].evaluate(t);return r}],"*":[Dt,Cr(Dt),function(t,e){for(var r=1,n=0,i=e;n<i.length;n+=1)r*=i[n].evaluate(t);return r}],"-":{type:Dt,overloads:[[[Dt,Dt],function(t,e){var r=e[1];return e[0].evaluate(t)-r.evaluate(t)}],[[Dt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Dt,[Dt,Dt],function(t,e){var r=e[1];return e[0].evaluate(t)/r.evaluate(t)}],"%":[Dt,[Dt,Dt],function(t,e){var r=e[1];return e[0].evaluate(t)%r.evaluate(t)}],ln2:[Dt,[],function(){return Math.LN2}],pi:[Dt,[],function(){return Math.PI}],e:[Dt,[],function(){return Math.E}],"^":[Dt,[Dt,Dt],function(t,e){var r=e[1];return Math.pow(e[0].evaluate(t),r.evaluate(t))}],sqrt:[Dt,[Dt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Dt,[Dt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Dt,[Dt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Dt,[Dt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Dt,[Dt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Dt,[Dt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Dt,[Dt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Dt,[Dt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Dt,[Dt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Dt,[Dt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Dt,Cr(Dt),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Dt,Cr(Dt),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Dt,[Dt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Dt,[Dt],function(t,e){var r=e[0].evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[Dt,[Dt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Dt,[Dt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Rt,[Lt,jt],function(t,e){var r=e[0],n=e[1];return t.properties()[r.value]===n.value}],"filter-id-==":[Rt,[jt],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[Rt,[Lt],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[Rt,[Lt,jt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i<a}],"filter-id-<":[Rt,[jt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<i}],"filter->":[Rt,[Lt,jt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i>a}],"filter-id->":[Rt,[jt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n>i}],"filter-<=":[Rt,[Lt,jt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i<=a}],"filter-id-<=":[Rt,[jt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<=i}],"filter->=":[Rt,[Lt,jt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i>=a}],"filter-id->=":[Rt,[jt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n>=i}],"filter-has":[Rt,[jt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Rt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Rt,[Gt(Lt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Rt,[Gt(jt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Rt,[Lt,Gt(jt)],function(t,e){var r=e[0];return e[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[Rt,[Lt,Gt(jt)],function(t,e){var r=e[0],n=e[1];return function(t,e,r,n){for(;r<=n;){var i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}(t.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:Rt,overloads:[[[Rt,Rt],function(t,e){var r=e[1];return e[0].evaluate(t)&&r.evaluate(t)}],[Cr(Rt),function(t,e){for(var r=0,n=e;r<n.length;r+=1)if(!n[r].evaluate(t))return!1;return!0}]]},any:{type:Rt,overloads:[[[Rt,Rt],function(t,e){var r=e[1];return e[0].evaluate(t)||r.evaluate(t)}],[Cr(Rt),function(t,e){for(var r=0,n=e;r<n.length;r+=1)if(n[r].evaluate(t))return!0;return!1}]]},"!":[Rt,[Rt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Rt,[Lt],function(t,e){var r=t.globals&&t.globals.isSupportedScript;return!r||r(e[0].evaluate(t))}],upcase:[Lt,[Lt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Lt,[Lt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Lt,Cr(jt),function(t,e){return e.map((function(e){return oe(e.evaluate(t))})).join("")}],"resolved-locale":[Lt,[qt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var qr=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new me,this._defaultValue=e?function(t){return"color"===t.type&&Fr(t.default)?new Wt(0,0,0,0):"color"===t.type?Wt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Nr(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Sr}function Kr(t,e){var r=new Oe(Sr,[],e?function(t){var e={color:Ot,string:Lt,number:Dt,enum:Lt,boolean:Rt,formatted:Nt,resolvedImage:Kt};return"array"===t.type?Gt(e[t.value]||jt,t.length):e[t.type]}(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Mr(new qr(n,e)):Er(r.errors)}qr.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)},qr.prototype.evaluate=function(t,e,r,n,i,a){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a||null;try{var o=this.expression.evaluate(this._evaluator);if(null==o||"number"==typeof o&&o!=o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new ue("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(o)+" instead.");return o}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Gr=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!De(e.expression)};Gr.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,a)},Gr.prototype.evaluate=function(t,e,r,n,i,a){return this._styleExpression.evaluate(t,e,r,n,i,a)};var Zr=function(t,e,r,n){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!De(e.expression),this.interpolationType=n};function Xr(t,e){if("error"===(t=Kr(t,e)).result)return t;var r=t.value.expression,n=Fe(r);if(!n&&!Tr(e))return Er([new Bt("","data expressions not supported")]);var i=Le(r,["zoom"]);if(!i&&!Pr(e))return Er([new Bt("","zoom expressions not supported")]);var a=function t(e){var r=null;if(e instanceof or)r=t(e.result);else if(e instanceof ar)for(var n=0,i=e.args;n<i.length&&!(r=t(i[n]));n+=1);else(e instanceof je||e instanceof nr)&&e.input instanceof ve&&"zoom"===e.input.name&&(r=e);return r instanceof Bt||e.eachChild((function(e){var n=t(e);n instanceof Bt?r=n:!r&&n?r=new Bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&n&&r!==n&&(r=new Bt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),r}(r);return a||i?a instanceof Bt?Er([a]):a instanceof nr&&!Br(e)?Er([new Bt("",'"interpolate" expressions cannot be used with this property')]):Mr(a?new Zr(n?"camera":"composite",t.value,a.labels,a instanceof nr?a.interpolation:void 0):new Gr(n?"constant":"source",t.value)):Er([new Bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Zr.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,a)},Zr.prototype.evaluate=function(t,e,r,n,i,a){return this._styleExpression.evaluate(t,e,r,n,i,a)},Zr.prototype.interpolationFactor=function(t,e,r){return this.interpolationType?nr.interpolationFactor(this.interpolationType,t,e,r):0};var Jr=function(t,e){this._parameters=t,this._specification=e,Et(this,function t(e,r){var n,i,a,o="color"===r.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),l=e.type||(Br(r)?"exponential":"interval");if(o&&((e=Et({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],Wt.parse(t[1])]}))),e.default=Wt.parse(e.default?e.default:r.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!rr[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===l)n=Ur;else if("interval"===l)n=Or;else if("categorical"===l){n=Rr,i=Object.create(null);for(var p=0,c=e.stops;p<c.length;p+=1){var h=c[p];i[h[0]]=h[1]}a=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');n=jr}if(s){for(var f={},y=[],d=0;d<e.stops.length;d++){var m=e.stops[d],v=m[0].zoom;void 0===f[v]&&(f[v]={zoom:v,type:e.type,property:e.property,default:e.default,stops:[]},y.push(v)),f[v].stops.push([m[0].value,m[1]])}for(var g=[],x=0,b=y;x<b.length;x+=1){var w=b[x];g.push([f[w].zoom,t(f[w],r)])}var _={name:"linear"};return{kind:"composite",interpolationType:_,interpolationFactor:nr.interpolationFactor.bind(void 0,_),zoomStops:g.map((function(t){return t[0]})),evaluate:function(t,n){var i=t.zoom;return Ur({stops:g,base:e.base},r,i).evaluate(i,n)}}}if(u){var A="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:A,interpolationFactor:nr.interpolationFactor.bind(void 0,A),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return n(e,r,t.zoom,i,a)}}}return{kind:"source",evaluate:function(t,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?Lr(e.default,r.default):n(e,r,s,i,a)}}}(this._parameters,this._specification))};function Hr(t){var e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},a=t.style,o=t.styleSpec,s=[],u=Vr(r);if("object"!==u)return[new Ct(e,r,"object expected, "+u+" found")];for(var l in r){var p=l.split(".")[0],c=n[p]||n["*"],h=void 0;if(i[p])h=i[p];else if(n[p])h=wn;else if(i["*"])h=i["*"];else{if(!n["*"]){s.push(new Ct(e,r[l],'unknown property "'+l+'"'));continue}h=wn}s=s.concat(h({key:(e?e+".":e)+l,value:r[l],valueSpec:c,style:a,styleSpec:o,object:r,objectKey:l},r))}for(var f in n)i[f]||n[f].required&&void 0===n[f].default&&void 0===r[f]&&s.push(new Ct(e,r,'missing required property "'+f+'"'));return s}function Yr(t){var e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,a=t.key,o=t.arrayElementValidator||wn;if("array"!==Vr(e))return[new Ct(a,e,"array expected, "+Vr(e)+" found")];if(r.length&&e.length!==r.length)return[new Ct(a,e,"array length "+r.length+" expected, length "+e.length+" found")];if(r["min-length"]&&e.length<r["min-length"])return[new Ct(a,e,"array length at least "+r["min-length"]+" expected, length "+e.length+" found")];var s={type:r.value,values:r.values};i.$version<7&&(s.function=r.function),"object"===Vr(r.value)&&(s=r.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(o({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:n,styleSpec:i,key:a+"["+l+"]"}));return u}function $r(t){var e=t.key,r=t.value,n=t.valueSpec,i=Vr(r);return"number"===i&&r!=r&&(i="NaN"),"number"!==i?[new Ct(e,r,"number expected, "+i+" found")]:"minimum"in n&&r<n.minimum?[new Ct(e,r,r+" is less than the minimum value "+n.minimum)]:"maximum"in n&&r>n.maximum?[new Ct(e,r,r+" is greater than the maximum value "+n.maximum)]:[]}function Wr(t){var e,r,n,i=t.valueSpec,a=Tt(t.value.type),o={},s="categorical"!==a&&void 0===t.value.property,u=!s,l="array"===Vr(t.value.stops)&&"array"===Vr(t.value.stops[0])&&"object"===Vr(t.value.stops[0][0]),p=Hr({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===a)return[new Ct(t.key,t.value,'identity function may not have a "stops" property')];var e=[],r=t.value;return e=e.concat(Yr({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:c})),"array"===Vr(r)&&0===r.length&&e.push(new Ct(t.key,r,"array must have at least one stop")),e},default:function(t){return wn({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===a&&s&&p.push(new Ct(t.key,t.value,'missing required property "property"')),"identity"===a||t.value.stops||p.push(new Ct(t.key,t.value,'missing required property "stops"')),"exponential"===a&&t.valueSpec.expression&&!Br(t.valueSpec)&&p.push(new Ct(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!Tr(t.valueSpec)?p.push(new Ct(t.key,t.value,"property functions not supported")):s&&!Pr(t.valueSpec)&&p.push(new Ct(t.key,t.value,"zoom functions not supported"))),"categorical"!==a&&!l||void 0!==t.value.property||p.push(new Ct(t.key,t.value,'"property" property is required')),p;function c(t){var e=[],a=t.value,s=t.key;if("array"!==Vr(a))return[new Ct(s,a,"array expected, "+Vr(a)+" found")];if(2!==a.length)return[new Ct(s,a,"array length 2 expected, length "+a.length+" found")];if(l){if("object"!==Vr(a[0]))return[new Ct(s,a,"object expected, "+Vr(a[0])+" found")];if(void 0===a[0].zoom)return[new Ct(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new Ct(s,a,"object stop key must have value")];if(n&&n>Tt(a[0].zoom))return[new Ct(s,a[0].zoom,"stop zoom values must appear in ascending order")];Tt(a[0].zoom)!==n&&(n=Tt(a[0].zoom),r=void 0,o={}),e=e.concat(Hr({key:s+"[0]",value:a[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:$r,value:h}}))}else e=e.concat(h({key:s+"[0]",value:a[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},a));return Nr(Pt(a[1]))?e.concat([new Ct(s+"[1]",a[1],"expressions are not allowed in function stops.")]):e.concat(wn({key:s+"[1]",value:a[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function h(t,n){var s=Vr(t.value),u=Tt(t.value),l=null!==t.value?t.value:n;if(e){if(s!==e)return[new Ct(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Ct(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var p="number expected, "+s+" found";return Tr(i)&&void 0===a&&(p+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ct(t.key,l,p)]}return"categorical"!==a||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==a&&"number"===s&&void 0!==r&&u<r?[new Ct(t.key,l,"stop domain values must appear in ascending order")]:(r=u,"categorical"===a&&u in o?[new Ct(t.key,l,"stop domain values must be unique")]:(o[u]=!0,[])):[new Ct(t.key,l,"integer expected, found "+u)]}}function Qr(t){var e=("property"===t.expressionContext?Xr:Kr)(Pt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new Ct(""+t.key+e.key,t.value,e.message)}));var r=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!r.outputDefined())return[new Ct(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!De(r))return[new Ct(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!De(r))return[new Ct(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Le(r,["zoom","feature-state"]))return[new Ct(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Fe(r))return[new Ct(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tn(t){var e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(Tt(r))&&i.push(new Ct(e,r,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(n.values).indexOf(Tt(r))&&i.push(new Ct(e,r,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(r)+" found")),i}function en(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var n=r[e];if(!en(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}Jr.deserialize=function(t){return new Jr(t._parameters,t._specification)},Jr.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var rn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function nn(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};en(t)||(t=on(t));var e=Kr(t,rn);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,r,n){return e.value.evaluate(t,r,{},n)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var r=1;r<e.length;r++)if(t(e[r]))return!0;return!1}(t)}}function an(t,e){return t<e?-1:t>e?1:0}function on(t){if(!t)return!0;var e,r=t[0];return t.length<=1?"any"!==r:"=="===r?sn(t[1],t[2],"=="):"!="===r?pn(sn(t[1],t[2],"==")):"<"===r||">"===r||"<="===r||">="===r?sn(t[1],t[2],r):"any"===r?(e=t.slice(1),["any"].concat(e.map(on))):"all"===r?["all"].concat(t.slice(1).map(on)):"none"===r?["all"].concat(t.slice(1).map(on).map(pn)):"in"===r?un(t[1],t.slice(2)):"!in"===r?pn(un(t[1],t.slice(2))):"has"===r?ln(t[1]):"!has"===r?pn(ln(t[1])):"within"!==r||t}function sn(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function un(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(an)]]:["filter-in-small",t,["literal",e]]}}function ln(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function pn(t){return["!",t]}function cn(t){return en(Pt(t.value))?Qr(Et({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var r=e.value,n=e.key;if("array"!==Vr(r))return[new Ct(n,r,"array expected, "+Vr(r)+" found")];var i,a=e.styleSpec,o=[];if(r.length<1)return[new Ct(n,r,"filter array must have at least 1 element")];switch(o=o.concat(tn({key:n+"[0]",value:r[0],valueSpec:a.filter_operator,style:e.style,styleSpec:e.styleSpec})),Tt(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===Tt(r[1])&&o.push(new Ct(n,r,'"$type" cannot be use with operator "'+r[0]+'"'));case"==":case"!=":3!==r.length&&o.push(new Ct(n,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case"in":case"!in":r.length>=2&&"string"!==(i=Vr(r[1]))&&o.push(new Ct(n+"[1]",r[1],"string expected, "+i+" found"));for(var s=2;s<r.length;s++)i=Vr(r[s]),"$type"===Tt(r[1])?o=o.concat(tn({key:n+"["+s+"]",value:r[s],valueSpec:a.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new Ct(n+"["+s+"]",r[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<r.length;u++)o=o.concat(t({key:n+"["+u+"]",value:r[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Vr(r[1]),2!==r.length?o.push(new Ct(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==i&&o.push(new Ct(n+"[1]",r[1],"string expected, "+i+" found"));break;case"within":i=Vr(r[1]),2!==r.length?o.push(new Ct(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"object"!==i&&o.push(new Ct(n+"[1]",r[1],"object expected, "+i+" found"))}return o}(t)}function hn(t,e){var r=t.key,n=t.style,i=t.styleSpec,a=t.value,o=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=o.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return wn({key:r,value:a,valueSpec:i.transition,style:n,styleSpec:i});var l,p=t.valueSpec||s[o];if(!p)return[new Ct(r,a,'unknown property "'+o+'"')];if("string"===Vr(a)&&Tr(p)&&!p.tokens&&(l=/^{([^}]+)}$/.exec(a)))return[new Ct(r,a,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var c=[];return"symbol"===t.layerType&&("text-field"===o&&n&&!n.glyphs&&c.push(new Ct(r,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Fr(Pt(a))&&"identity"===Tt(a.type)&&c.push(new Ct(r,a,'"text-font" does not support identity functions'))),c.concat(wn({key:t.key,value:a,valueSpec:p,style:n,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:o}))}function fn(t){return hn(t,"paint")}function yn(t){return hn(t,"layout")}function dn(t){var e=[],r=t.value,n=t.key,i=t.style,a=t.styleSpec;r.type||r.ref||e.push(new Ct(n,r,'either "type" or "ref" is required'));var o,s=Tt(r.type),u=Tt(r.ref);if(r.id)for(var l=Tt(r.id),p=0;p<t.arrayIndex;p++){var c=i.layers[p];Tt(c.id)===l&&e.push(new Ct(n,r.id,'duplicate layer id "'+r.id+'", previously used at line '+c.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach((function(t){t in r&&e.push(new Ct(n,r[t],'"'+t+'" is prohibited for ref layers'))})),i.layers.forEach((function(t){Tt(t.id)===u&&(o=t)})),o?o.ref?e.push(new Ct(n,r.ref,"ref cannot reference another ref layer")):s=Tt(o.type):e.push(new Ct(n,r.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(r.source){var h=i.sources&&i.sources[r.source],f=h&&Tt(h.type);h?"vector"===f&&"raster"===s?e.push(new Ct(n,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new Ct(n,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==f||r["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new Ct(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new Ct(n,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Ct(n,r,'layer "'+r.id+'" must specify a "source-layer"')):e.push(new Ct(n,r.source,'source "'+r.source+'" not found'))}else e.push(new Ct(n,r,'missing required property "source"'));return e=e.concat(Hr({key:n,value:r,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return wn({key:n+".type",value:r.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"})},filter:cn,layout:function(t){return Hr({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return yn(Et({layerType:s},t))}}})},paint:function(t){return Hr({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return fn(Et({layerType:s},t))}}})}}}))}function mn(t){var e=t.value,r=t.key,n=Vr(e);return"string"!==n?[new Ct(r,e,"string expected, "+n+" found")]:[]}var vn={promoteId:function(t){var e=t.key,r=t.value;if("string"===Vr(r))return mn({key:e,value:r});var n=[];for(var i in r)n.push.apply(n,mn({key:e+"."+i,value:r[i]}));return n}};function gn(t){var e=t.value,r=t.key,n=t.styleSpec,i=t.style;if(!e.type)return[new Ct(r,e,'"type" is required')];var a,o=Tt(e.type);switch(o){case"vector":case"raster":case"raster-dem":return Hr({key:r,value:e,valueSpec:n["source_"+o.replace("-","_")],style:t.style,styleSpec:n,objectElementValidators:vn});case"geojson":if(a=Hr({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n,objectElementValidators:vn}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],l=u[0],p="string"==typeof l?[l,["accumulated"],["get",s]]:l;a.push.apply(a,Qr({key:r+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),a.push.apply(a,Qr({key:r+"."+s+".reduce",value:p,expressionContext:"cluster-reduce"}))}return a;case"video":return Hr({key:r,value:e,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return Hr({key:r,value:e,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return[new Ct(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tn({key:r+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function xn(t){var e=t.value,r=t.styleSpec,n=r.light,i=t.style,a=[],o=Vr(e);if(void 0===e)return a;if("object"!==o)return a.concat([new Ct("light",e,"object expected, "+o+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);a=a.concat(u&&n[u[1]]&&n[u[1]].transition?wn({key:s,value:e[s],valueSpec:r.transition,style:i,styleSpec:r}):n[s]?wn({key:s,value:e[s],valueSpec:n[s],style:i,styleSpec:r}):[new Ct(s,e[s],'unknown property "'+s+'"')])}return a}var bn={"*":function(){return[]},array:Yr,boolean:function(t){var e=t.value,r=t.key,n=Vr(e);return"boolean"!==n?[new Ct(r,e,"boolean expected, "+n+" found")]:[]},number:$r,color:function(t){var e=t.key,r=t.value,n=Vr(r);return"string"!==n?[new Ct(e,r,"color expected, "+n+" found")]:null===$t(r)?[new Ct(e,r,'color expected, "'+r+'" found')]:[]},constants:Mt,enum:tn,filter:cn,function:Wr,layer:dn,object:Hr,source:gn,light:xn,string:mn,formatted:function(t){return 0===mn(t).length?[]:Qr(t)},resolvedImage:function(t){return 0===mn(t).length?[]:Qr(t)}};function wn(t){var e=t.value,r=t.valueSpec,n=t.styleSpec;return r.expression&&Fr(Tt(e))?Wr(t):r.expression&&Nr(Pt(e))?Qr(t):r.type&&bn[r.type]?bn[r.type](t):Hr(Et({},t,{valueSpec:r.type?n[r.type]:r}))}function _n(t){var e=t.value,r=t.key,n=mn(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new Ct(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new Ct(r,e,'"glyphs" url must include a "{range}" token'))),n}function An(t,e){void 0===e&&(e=zt);var r=[];return r=r.concat(wn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:_n,"*":function(){return[]}}})),t.constants&&(r=r.concat(Mt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Sn(r)}function Sn(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function kn(t){return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return Sn(t.apply(this,e))}}An.source=kn(gn),An.light=kn(xn),An.layer=kn(dn),An.filter=kn(cn),An.paintProperty=kn(fn),An.layoutProperty=kn(yn);var In=An,zn=In.light,Cn=In.paintProperty,Mn=In.layoutProperty;function En(t,e){var r=!1;if(e&&e.length)for(var n=0,i=e;n<i.length;n+=1)t.fire(new kt(new Error(i[n].message))),r=!0;return r}var Tn=Pn;function Pn(t,e,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(r=i[2]);for(var a=0;a<this.d*this.d;a++){var o=i[3+a],s=i[3+a+1];n.push(o===s?null:i.subarray(o,s))}var u=i[3+n.length+1];this.keys=i.subarray(i[3+n.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var l=0;l<this.d*this.d;l++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var p=r/e*t;this.min=-p,this.max=t+p}Pn.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},Pn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Pn.prototype._insertCell=function(t,e,r,n,i,a){this.cells[i].push(a)},Pn.prototype.query=function(t,e,r,n,i){var a=this.min,o=this.max;if(t<=a&&e<=a&&o<=r&&o<=n&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,r,n,this._queryCell,s,{},i),s},Pn.prototype._queryCell=function(t,e,r,n,i,a,o,s){var u=this.cells[i];if(null!==u)for(var l=this.keys,p=this.bboxes,c=0;c<u.length;c++){var h=u[c];if(void 0===o[h]){var f=4*h;(s?s(p[f+0],p[f+1],p[f+2],p[f+3]):t<=p[f+2]&&e<=p[f+3]&&r>=p[f+0]&&n>=p[f+1])?(o[h]=!0,a.push(l[h])):o[h]=!1}}},Pn.prototype._forEachCell=function(t,e,r,n,i,a,o,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),p=this._convertToCellCoord(r),c=this._convertToCellCoord(n),h=u;h<=p;h++)for(var f=l;f<=c;f++){var y=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,r,n,y,a,o,s))return}},Pn.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Pn.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Pn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(e+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=e,o=0;o<t.length;o++){var s=t[o];i[3+o]=a,i.set(s,a),a+=s.length}return i[3+t.length]=a,i.set(this.keys,a),i[3+t.length+1]=a+=this.keys.length,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var Bn=o.ImageData,Vn=o.ImageBitmap,Fn={};function Dn(t,e,r){void 0===r&&(r={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Fn[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}for(var Ln in Dn("Object",Object),Tn.serialize=function(t,e){var r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},Tn.deserialize=function(t){return new Tn(t.buffer)},Dn("Grid",Tn),Dn("Color",Wt),Dn("Error",Error),Dn("ResolvedImage",re),Dn("StylePropertyFunction",Jr),Dn("StyleExpression",qr,{omit:["_evaluator"]}),Dn("ZoomDependentExpression",Zr),Dn("ZoomConstantExpression",Gr),Dn("CompoundExpression",ve,{omit:["_evaluate"]}),Sr)Sr[Ln]._classRegistryKey||Dn("Expression_"+Ln,Sr[Ln]);function Rn(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function On(t){return Vn&&t instanceof Vn}function Un(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Rn(t)||On(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var r=t;return e&&e.push(r.buffer),r}if(t instanceof Bn)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],i=0,a=t;i<a.length;i+=1)n.push(Un(a[i],e));return n}if("object"==typeof t){var o=t.constructor,s=o._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=o.serialize?o.serialize(t,e):{};if(!o.serialize){for(var l in t)if(t.hasOwnProperty(l)&&!(Fn[s].omit.indexOf(l)>=0)){var p=t[l];u[l]=Fn[s].shallow.indexOf(l)>=0?p:Un(p,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function jn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Rn(t)||On(t)||ArrayBuffer.isView(t)||t instanceof Bn)return t;if(Array.isArray(t))return t.map(jn);if("object"==typeof t){var e=t.$name||"Object",r=Fn[e].klass;if(!r)throw new Error("can't deserialize unregistered class "+e);if(r.deserialize)return r.deserialize(t);for(var n=Object.create(r.prototype),i=0,a=Object.keys(t);i<a.length;i+=1){var o=a[i];if("$name"!==o){var s=t[o];n[o]=Fn[e].shallow.indexOf(o)>=0?s:jn(s)}}return n}throw new Error("can't deserialize object of type "+typeof t)}var qn=function(){this.first=!0};qn.prototype.update=function(t,e){var r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))};var Nn={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Kn(t){for(var e=0,r=t;e<r.length;e+=1)if(Gn(r[e].charCodeAt(0)))return!0;return!1}function Gn(t){return!(746!==t&&747!==t&&(t<4352||!(Nn["Bopomofo Extended"](t)||Nn.Bopomofo(t)||Nn["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Nn["CJK Compatibility Ideographs"](t)||Nn["CJK Compatibility"](t)||Nn["CJK Radicals Supplement"](t)||Nn["CJK Strokes"](t)||!(!Nn["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Nn["CJK Unified Ideographs Extension A"](t)||Nn["CJK Unified Ideographs"](t)||Nn["Enclosed CJK Letters and Months"](t)||Nn["Hangul Compatibility Jamo"](t)||Nn["Hangul Jamo Extended-A"](t)||Nn["Hangul Jamo Extended-B"](t)||Nn["Hangul Jamo"](t)||Nn["Hangul Syllables"](t)||Nn.Hiragana(t)||Nn["Ideographic Description Characters"](t)||Nn.Kanbun(t)||Nn["Kangxi Radicals"](t)||Nn["Katakana Phonetic Extensions"](t)||Nn.Katakana(t)&&12540!==t||!(!Nn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Nn["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Nn["Unified Canadian Aboriginal Syllabics"](t)||Nn["Unified Canadian Aboriginal Syllabics Extended"](t)||Nn["Vertical Forms"](t)||Nn["Yijing Hexagram Symbols"](t)||Nn["Yi Syllables"](t)||Nn["Yi Radicals"](t))))}function Zn(t){return!(Gn(t)||function(t){return!!(Nn["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Nn["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Nn["Letterlike Symbols"](t)||Nn["Number Forms"](t)||Nn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Nn["Control Pictures"](t)&&9251!==t||Nn["Optical Character Recognition"](t)||Nn["Enclosed Alphanumerics"](t)||Nn["Geometric Shapes"](t)||Nn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Nn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Nn["CJK Symbols and Punctuation"](t)||Nn.Katakana(t)||Nn["Private Use Area"](t)||Nn["CJK Compatibility Forms"](t)||Nn["Small Form Variants"](t)||Nn["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Xn(t){return t>=1424&&t<=2303||Nn["Arabic Presentation Forms-A"](t)||Nn["Arabic Presentation Forms-B"](t)}function Jn(t,e){return!(!e&&Xn(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Nn.Khmer(t))}function Hn(t){for(var e=0,r=t;e<r.length;e+=1)if(Xn(r[e].charCodeAt(0)))return!0;return!1}var Yn=null,$n="unavailable",Wn=null,Qn=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&($n="error"),Yn&&Yn(t)};function ti(){ei.fire(new St("pluginStateChange",{pluginStatus:$n,pluginURL:Wn}))}var ei=new It,ri=function(){return $n},ni=function(){if("deferred"!==$n||!Wn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");$n="loading",ti(),Wn&&xt({url:Wn},(function(t){t?Qn(t):($n="loaded",ti())}))},ii={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===$n||null!=ii.applyArabicShaping},isLoading:function(){return"loading"===$n},setState:function(t){$n=t.pluginStatus,Wn=t.pluginURL},isParsed:function(){return null!=ii.applyArabicShaping&&null!=ii.processBidirectionalText&&null!=ii.processStyledBidirectionalText},getPluginURL:function(){return Wn}},ai=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qn,this.transition={})};ai.prototype.isSupportedScript=function(t){return function(t,e){for(var r=0,n=t;r<n.length;r+=1)if(!Jn(n[r].charCodeAt(0),e))return!1;return!0}(t,ii.isLoaded())},ai.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ai.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),r=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*e}};var oi=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Fr(t))return new Jr(t,e);if(Nr(t)){var r=Xr(t,e);if("error"===r.result)throw new Error(r.value.map((function(t){return t.key+": "+t.message})).join(", "));return r.value}var n=t;return"string"==typeof t&&"color"===e.type&&(n=Wt.parse(t)),{kind:"constant",evaluate:function(){return n}}}(void 0===e?t.specification.default:e,t.specification)};oi.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},oi.prototype.possiblyEvaluate=function(t,e,r){return this.property.possiblyEvaluate(this,t,e,r)};var si=function(t){this.property=t,this.value=new oi(t,void 0)};si.prototype.transitioned=function(t,e){return new li(this.property,this.value,e,c({},t.transition,this.transition),t.now)},si.prototype.untransitioned=function(){return new li(this.property,this.value,null,{},0)};var ui=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};ui.prototype.getValue=function(t){return b(this._values[t].value.value)},ui.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new si(this._values[t].property)),this._values[t].value=new oi(this._values[t].property,null===e?void 0:b(e))},ui.prototype.getTransition=function(t){return b(this._values[t].transition)},ui.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new si(this._values[t].property)),this._values[t].transition=b(e)||void 0},ui.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i);var a=this.getTransition(n);void 0!==a&&(t[n+"-transition"]=a)}return t},ui.prototype.transitioned=function(t,e){for(var r=new pi(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n];r._values[a]=this._values[a].transitioned(t,e._values[a])}return r},ui.prototype.untransitioned=function(){for(var t=new pi(this._properties),e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e];t._values[n]=this._values[n].untransitioned()}return t};var li=function(t,e,r,n,i){this.property=t,this.value=e,this.begin=i+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=r)};li.prototype.possiblyEvaluate=function(t,e,r){var n=t.now||0,i=this.value.possiblyEvaluate(t,e,r),a=this.prior;if(a){if(n>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(n<this.begin)return a.possiblyEvaluate(t,e,r);var o=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(t,e,r),i,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}(o))}return i};var pi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};pi.prototype.possiblyEvaluate=function(t,e,r){for(var n=new fi(this._properties),i=0,a=Object.keys(this._values);i<a.length;i+=1){var o=a[i];n._values[o]=this._values[o].possiblyEvaluate(t,e,r)}return n},pi.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var ci=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};ci.prototype.getValue=function(t){return b(this._values[t].value)},ci.prototype.setValue=function(t,e){this._values[t]=new oi(this._values[t].property,null===e?void 0:b(e))},ci.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i)}return t},ci.prototype.possiblyEvaluate=function(t,e,r){for(var n=new fi(this._properties),i=0,a=Object.keys(this._values);i<a.length;i+=1){var o=a[i];n._values[o]=this._values[o].possiblyEvaluate(t,e,r)}return n};var hi=function(t,e,r){this.property=t,this.value=e,this.parameters=r};hi.prototype.isConstant=function(){return"constant"===this.value.kind},hi.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},hi.prototype.evaluate=function(t,e,r,n){return this.property.evaluate(this.value,this.parameters,t,e,r,n)};var fi=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};fi.prototype.get=function(t){return this._values[t]};var yi=function(t){this.specification=t};yi.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},yi.prototype.interpolate=function(t,e,r){var n=Ne[this.specification.type];return n?n(t,e,r):t};var di=function(t,e){this.specification=t,this.overrides=e};di.prototype.possiblyEvaluate=function(t,e,r,n){return new hi(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},r,n)}:t.expression,e)},di.prototype.interpolate=function(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new hi(this,{kind:"constant",value:void 0},t.parameters);var n=Ne[this.specification.type];return n?new hi(this,{kind:"constant",value:n(t.value.value,e.value.value,r)},t.parameters):t},di.prototype.evaluate=function(t,e,r,n,i,a){return"constant"===t.kind?t.value:t.evaluate(e,r,n,i,a)};var mi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,r,n){if(void 0===t.value)return new hi(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},r,n),a="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,o=this._calculate(a,a,a,e);return new hi(this,{kind:"constant",value:o},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new hi(this,{kind:"constant",value:s},e)}return new hi(this,t.expression,e)},e.prototype.evaluate=function(t,e,r,n,i,a){if("source"===t.kind){var o=t.evaluate(e,r,n,i,a);return this._calculate(o,o,o,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},r,n),t.evaluate({zoom:Math.floor(e.zoom)},r,n),t.evaluate({zoom:Math.floor(e.zoom)+1},r,n),e):t.value},e.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},e.prototype.interpolate=function(t){return t},e}(di),vi=function(t){this.specification=t};vi.prototype.possiblyEvaluate=function(t,e,r,n){if(void 0!==t.value){if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},r,n);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new ai(Math.floor(e.zoom-1),e)),t.expression.evaluate(new ai(Math.floor(e.zoom),e)),t.expression.evaluate(new ai(Math.floor(e.zoom+1),e)),e)}},vi.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},vi.prototype.interpolate=function(t){return t};var gi=function(t){this.specification=t};gi.prototype.possiblyEvaluate=function(t,e,r,n){return!!t.expression.evaluate(e,null,{},r,n)},gi.prototype.interpolate=function(){return!1};var xi=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var r=t[e];r.specification.overridable&&this.overridableProperties.push(e);var n=this.defaultPropertyValues[e]=new oi(r,void 0),i=this.defaultTransitionablePropertyValues[e]=new si(r);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}};Dn("DataDrivenProperty",di),Dn("DataConstantProperty",yi),Dn("CrossFadedDataDrivenProperty",mi),Dn("CrossFadedProperty",vi),Dn("ColorRampProperty",gi);var bi=function(t){function e(e,r){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new ci(r.layout)),r.paint)){for(var n in this._transitionablePaint=new ui(r.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fi(r.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,r){void 0===r&&(r={}),null!=e&&this._validate(Mn,"layers."+this.id+".layout."+t,t,e,r)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return v(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e&&this._validate(Cn,"layers."+this.id+".paint."+t,t,e,r))return!1;if(v(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var n=this._transitionablePaint._values[t],i="cross-faded-data-driven"===n.property.specification["property-type"],a=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||a||i||this._handleOverridablePaintPropertyUpdate(t,o,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,r){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),x(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,r,n,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&En(this,t.call(In,{key:e,layerType:this.type,objectKey:r,value:n,styleSpec:zt,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof hi&&Tr(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(It),wi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},_i=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ai=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Si(t,e){void 0===e&&(e=1);var r=0,n=0;return{members:t.map((function(t){var i=wi[t.type].BYTES_PER_ELEMENT,a=r=ki(r,Math.max(e,i)),o=t.components||1;return n=Math.max(n,i),r+=i*o,{name:t.name,type:t.type,components:o,offset:a}})),size:ki(r,Math.max(n,e)),alignment:e}}function ki(t,e){return Math.ceil(t/e)*e}Ai.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Ai.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Ai.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ai.prototype.clear=function(){this.length=0},Ai.prototype.resize=function(t){this.reserve(t),this.length=t},Ai.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Ai.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.int16[n+0]=e,this.int16[n+1]=r,t},e}(Ai);Ii.prototype.bytesPerElement=4,Dn("StructArrayLayout2i4",Ii);var zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var a=4*t;return this.int16[a+0]=e,this.int16[a+1]=r,this.int16[a+2]=n,this.int16[a+3]=i,t},e}(Ai);zi.prototype.bytesPerElement=8,Dn("StructArrayLayout4i8",zi);var Ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,a)},e.prototype.emplace=function(t,e,r,n,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(Ai);Ci.prototype.bytesPerElement=12,Dn("StructArrayLayout2i4i12",Ci);var Mi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,a)},e.prototype.emplace=function(t,e,r,n,i,a,o){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.uint8[u+4]=n,this.uint8[u+5]=i,this.uint8[u+6]=a,this.uint8[u+7]=o,t},e}(Ai);Mi.prototype.bytesPerElement=8,Dn("StructArrayLayout2i4ub8",Mi);var Ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,r,n,i,a,o,s,u,l)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p){var c=10*t;return this.uint16[c+0]=e,this.uint16[c+1]=r,this.uint16[c+2]=n,this.uint16[c+3]=i,this.uint16[c+4]=a,this.uint16[c+5]=o,this.uint16[c+6]=s,this.uint16[c+7]=u,this.uint16[c+8]=l,this.uint16[c+9]=p,t},e}(Ai);Ei.prototype.bytesPerElement=20,Dn("StructArrayLayout10ui20",Ei);var Ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p,c){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,r,n,i,a,o,s,u,l,p,c)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c,h){var f=12*t;return this.int16[f+0]=e,this.int16[f+1]=r,this.int16[f+2]=n,this.int16[f+3]=i,this.uint16[f+4]=a,this.uint16[f+5]=o,this.uint16[f+6]=s,this.uint16[f+7]=u,this.int16[f+8]=l,this.int16[f+9]=p,this.int16[f+10]=c,this.int16[f+11]=h,t},e}(Ai);Ti.prototype.bytesPerElement=24,Dn("StructArrayLayout4i4ui4i24",Ti);var Pi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=r,this.float32[i+2]=n,t},e}(Ai);Pi.prototype.bytesPerElement=12,Dn("StructArrayLayout3f12",Pi);var Bi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Ai);Bi.prototype.bytesPerElement=4,Dn("StructArrayLayout1ul4",Bi);var Vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,r,n,i,a,o,s,u)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l){var p=10*t,c=5*t;return this.int16[p+0]=e,this.int16[p+1]=r,this.int16[p+2]=n,this.int16[p+3]=i,this.int16[p+4]=a,this.int16[p+5]=o,this.uint32[c+3]=s,this.uint16[p+8]=u,this.uint16[p+9]=l,t},e}(Ai);Vi.prototype.bytesPerElement=20,Dn("StructArrayLayout6i1ul2ui20",Vi);var Fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,a)},e.prototype.emplace=function(t,e,r,n,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(Ai);Fi.prototype.bytesPerElement=12,Dn("StructArrayLayout2i2i2i12",Fi);var Di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i)},e.prototype.emplace=function(t,e,r,n,i,a){var o=4*t,s=8*t;return this.float32[o+0]=e,this.float32[o+1]=r,this.float32[o+2]=n,this.int16[s+6]=i,this.int16[s+7]=a,t},e}(Ai);Di.prototype.bytesPerElement=16,Dn("StructArrayLayout2f1f2i16",Di);var Li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var a=12*t,o=3*t;return this.uint8[a+0]=e,this.uint8[a+1]=r,this.float32[o+1]=n,this.float32[o+2]=i,t},e}(Ai);Li.prototype.bytesPerElement=12,Dn("StructArrayLayout2ub2f12",Li);var Ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,this.uint16[i+2]=n,t},e}(Ai);Ri.prototype.bytesPerElement=6,Dn("StructArrayLayout3ui6",Ri);var Oi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m){var v=this.length;return this.resize(v+1),this.emplace(v,t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v){var g=24*t,x=12*t,b=48*t;return this.int16[g+0]=e,this.int16[g+1]=r,this.uint16[g+2]=n,this.uint16[g+3]=i,this.uint32[x+2]=a,this.uint32[x+3]=o,this.uint32[x+4]=s,this.uint16[g+10]=u,this.uint16[g+11]=l,this.uint16[g+12]=p,this.float32[x+7]=c,this.float32[x+8]=h,this.uint8[b+36]=f,this.uint8[b+37]=y,this.uint8[b+38]=d,this.uint32[x+10]=m,this.int16[g+22]=v,t},e}(Ai);Oi.prototype.bytesPerElement=48,Dn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Oi);var Ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,w,_,A,S,k,I,z){var C=this.length;return this.resize(C+1),this.emplace(C,t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,w,_,A,S,k,I,z)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,w,_,A,S,k,I,z,C){var M=34*t,E=17*t;return this.int16[M+0]=e,this.int16[M+1]=r,this.int16[M+2]=n,this.int16[M+3]=i,this.int16[M+4]=a,this.int16[M+5]=o,this.int16[M+6]=s,this.int16[M+7]=u,this.uint16[M+8]=l,this.uint16[M+9]=p,this.uint16[M+10]=c,this.uint16[M+11]=h,this.uint16[M+12]=f,this.uint16[M+13]=y,this.uint16[M+14]=d,this.uint16[M+15]=m,this.uint16[M+16]=v,this.uint16[M+17]=g,this.uint16[M+18]=x,this.uint16[M+19]=b,this.uint16[M+20]=w,this.uint16[M+21]=_,this.uint16[M+22]=A,this.uint32[E+12]=S,this.float32[E+13]=k,this.float32[E+14]=I,this.float32[E+15]=z,this.float32[E+16]=C,t},e}(Ai);Ui.prototype.bytesPerElement=68,Dn("StructArrayLayout8i15ui1ul4f68",Ui);var ji=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Ai);ji.prototype.bytesPerElement=4,Dn("StructArrayLayout1f4",ji);var qi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=r,this.int16[i+2]=n,t},e}(Ai);qi.prototype.bytesPerElement=6,Dn("StructArrayLayout3i6",qi);var Ni=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=r,this.uint16[i+3]=n,t},e}(Ai);Ni.prototype.bytesPerElement=8,Dn("StructArrayLayout1ul2ui8",Ni);var Ki=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,t},e}(Ai);Ki.prototype.bytesPerElement=4,Dn("StructArrayLayout2ui4",Ki);var Gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Ai);Gi.prototype.bytesPerElement=2,Dn("StructArrayLayout1ui2",Gi);var Zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.float32[n+0]=e,this.float32[n+1]=r,t},e}(Ai);Zi.prototype.bytesPerElement=8,Dn("StructArrayLayout2f8",Zi);var Xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var a=4*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=i,t},e}(Ai);Xi.prototype.bytesPerElement=16,Dn("StructArrayLayout4f16",Xi);var Ji=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}(_i);Ji.prototype.size=20;var Hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Ji(this,t)},e}(Vi);Dn("CollisionBoxArray",Hi);var Yi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},r.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},r.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},r.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},r.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,r),e}(_i);Yi.prototype.size=48;var $i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Yi(this,t)},e}(Oi);Dn("PlacedSymbolArray",$i);var Wi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},r.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},r.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},r.key.get=function(){return this._structArray.uint16[this._pos2+8]},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},r.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},r.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},r.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},r.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},r.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},r.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},r.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},r.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},r.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},r.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},r.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,r),e}(_i);Wi.prototype.size=68;var Qi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Wi(this,t)},e}(Ui);Dn("SymbolInstanceArray",Qi);var ta=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(ji);Dn("GlyphOffsetArray",ta);var ea=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(qi);Dn("SymbolLineVertexArray",ea);var ra=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,r),e}(_i);ra.prototype.size=8;var na=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new ra(this,t)},e}(Ni);Dn("FeatureIndexArray",na);var ia=Si([{name:"a_pos",components:2,type:"Int16"}],4).members,aa=function(t){void 0===t&&(t=[]),this.segments=t};function oa(t,e){return 256*(t=l(Math.floor(t),0,255))+l(Math.floor(e),0,255)}aa.prototype.prepareSegment=function(t,e,r,n){var i=this.segments[this.segments.length-1];return t>aa.MAX_VERTEX_ARRAY_LENGTH&&_("Max vertices per segment is "+aa.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>aa.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i},aa.prototype.get=function(){return this.segments},aa.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var r=e[t];for(var n in r.vaos)r.vaos[n].destroy()}},aa.simpleSegment=function(t,e,r,n){return new aa([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])},aa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Dn("SegmentVector",aa);var sa=Si([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ua=e((function(t){t.exports=function(t,e){var r,n,i,a,o,s,u,l;for(n=t.length-(r=3&t.length),i=e,o=3432918353,s=461845907,l=0;l<n;)u=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,i=27492+(65535&(a=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(u=0,r){case 3:u^=(255&t.charCodeAt(l+2))<<16;case 2:u^=(255&t.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(l)))*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),la=e((function(t){t.exports=function(t,e){for(var r,n=t.length,i=e^n,a=0;n>=4;)r=1540483477*(65535&(r=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++a;switch(n){case 3:i^=(255&t.charCodeAt(a+2))<<16;case 2:i^=(255&t.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),pa=ua,ca=la;pa.murmur3=ua,pa.murmur2=ca;var ha=function(){this.ids=[],this.positions=[],this.indexed=!1};ha.prototype.add=function(t,e,r,n){this.ids.push(ya(t)),this.positions.push(e,r,n)},ha.prototype.getPositions=function(t){for(var e=ya(t),r=0,n=this.ids.length-1;r<n;){var i=r+n>>1;this.ids[i]>=e?n=i:r=i+1}for(var a=[];this.ids[r]===e;)a.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return a},ha.serialize=function(t,e){var r=new Float64Array(t.ids),n=new Uint32Array(t.positions);return function t(e,r,n,i){for(;n<i;){for(var a=e[n+i>>1],o=n-1,s=i+1;;){do{o++}while(e[o]<a);do{s--}while(e[s]>a);if(o>=s)break;da(e,o,s),da(r,3*o,3*s),da(r,3*o+1,3*s+1),da(r,3*o+2,3*s+2)}s-n<i-s?(t(e,r,n,s),n=s+1):(t(e,r,s+1,i),i=s)}}(r,n,0,r.length-1),e&&e.push(r.buffer,n.buffer),{ids:r,positions:n}},ha.deserialize=function(t){var e=new ha;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var fa=Math.pow(2,53)-1;function ya(t){var e=+t;return!isNaN(e)&&e<=fa?e:pa(String(t))}function da(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}Dn("FeaturePositionMap",ha);var ma=function(t,e){this.gl=t.gl,this.location=e},va=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(ma),ga=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(ma),xa=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(ma),ba=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(ma),wa=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(ma),_a=function(t){function e(e,r){t.call(this,e,r),this.current=Wt.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(ma),Aa=new Float32Array(16),Sa=function(t){function e(e,r){t.call(this,e,r),this.current=Aa}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(ma);function ka(t){return[oa(255*t.r,255*t.g),oa(255*t.b,255*t.a)]}var Ia=function(t,e,r){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=r};Ia.prototype.setUniform=function(t,e,r){t.set(r.constantOr(this.value))},Ia.prototype.getBinding=function(t,e,r){return"color"===this.type?new _a(t,e):new ga(t,e)};var za=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};za.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},za.prototype.setUniform=function(t,e,r,n){var i="u_pattern_to"===n?this.patternTo:"u_pattern_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;i&&t.set(i)},za.prototype.getBinding=function(t,e,r){return"u_pattern"===r.substr(0,9)?new wa(t,e):new ga(t,e)};var Ca=function(t,e,r,n){this.expression=t,this.type=r,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new n};Ca.prototype.populatePaintArray=function(t,e,r,n,i){var a=this.paintVertexArray.length,o=this.expression.evaluate(new ai(0),e,{},n,[],i);this.paintVertexArray.resize(t),this._setPaintValue(a,t,o)},Ca.prototype.updatePaintArray=function(t,e,r,n){var i=this.expression.evaluate({zoom:0},r,n);this._setPaintValue(t,e,i)},Ca.prototype._setPaintValue=function(t,e,r){if("color"===this.type)for(var n=ka(r),i=t;i<e;i++)this.paintVertexArray.emplace(i,n[0],n[1]);else{for(var a=t;a<e;a++)this.paintVertexArray.emplace(a,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}},Ca.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ca.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ma=function(t,e,r,n,i,a){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new a};Ma.prototype.populatePaintArray=function(t,e,r,n,i){var a=this.expression.evaluate(new ai(this.zoom),e,{},n,[],i),o=this.expression.evaluate(new ai(this.zoom+1),e,{},n,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,a,o)},Ma.prototype.updatePaintArray=function(t,e,r,n){var i=this.expression.evaluate({zoom:this.zoom},r,n),a=this.expression.evaluate({zoom:this.zoom+1},r,n);this._setPaintValue(t,e,i,a)},Ma.prototype._setPaintValue=function(t,e,r,n){if("color"===this.type)for(var i=ka(r),a=ka(n),o=t;o<e;o++)this.paintVertexArray.emplace(o,i[0],i[1],a[0],a[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n))}},Ma.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ma.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ma.prototype.setUniform=function(t,e){var r=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,n=l(this.expression.interpolationFactor(r,this.zoom,this.zoom+1),0,1);t.set(n)},Ma.prototype.getBinding=function(t,e,r){return new ga(t,e)};var Ea=function(t,e,r,n,i,a){this.expression=t,this.type=e,this.useIntegerZoom=r,this.zoom=n,this.layerId=a,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i};Ea.prototype.populatePaintArray=function(t,e,r){var n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(n,t,e.patterns&&e.patterns[this.layerId],r)},Ea.prototype.updatePaintArray=function(t,e,r,n,i){this._setPaintValues(t,e,r.patterns&&r.patterns[this.layerId],i)},Ea.prototype._setPaintValues=function(t,e,r,n){if(n&&r){var i=n[r.min],a=n[r.mid],o=n[r.max];if(i&&a&&o)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,a.tl[0],a.tl[1],a.br[0],a.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],a.pixelRatio,i.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,a.tl[0],a.tl[1],a.br[0],a.br[1],o.tl[0],o.tl[1],o.br[0],o.br[1],a.pixelRatio,o.pixelRatio)}},Ea.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,sa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,sa.members,this.expression.isStateDependent))},Ea.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ta=function(t,e,r){this.binders={},this._buffers=[];var n=[];for(var i in t.paint._values)if(r(i)){var a=t.paint.get(i);if(a instanceof hi&&Tr(a.property.specification)){var o=Ba(i,t.type),s=a.value,u=a.property.specification.type,l=a.property.useIntegerZoom,p=a.property.specification["property-type"],c="cross-faded"===p||"cross-faded-data-driven"===p;if("constant"===s.kind)this.binders[i]=c?new za(s.value,o):new Ia(s.value,o,u),n.push("/u_"+i);else if("source"===s.kind||c){var h=Va(i,u,"source");this.binders[i]=c?new Ea(s,u,l,e,h,t.id):new Ca(s,o,u,h),n.push("/a_"+i)}else{var f=Va(i,u,"composite");this.binders[i]=new Ma(s,o,u,l,e,f),n.push("/z_"+i)}}}this.cacheKey=n.sort().join("")};Ta.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof Ca||e instanceof Ma?e.maxValue:0},Ta.prototype.populatePaintArrays=function(t,e,r,n,i){for(var a in this.binders){var o=this.binders[a];(o instanceof Ca||o instanceof Ma||o instanceof Ea)&&o.populatePaintArray(t,e,r,n,i)}},Ta.prototype.setConstantPatternPositions=function(t,e){for(var r in this.binders){var n=this.binders[r];n instanceof za&&n.setConstantPatternPositions(t,e)}},Ta.prototype.updatePaintArrays=function(t,e,r,n,i){var a=!1;for(var o in t)for(var s=0,u=e.getPositions(o);s<u.length;s+=1){var l=u[s],p=r.feature(l.index);for(var c in this.binders){var h=this.binders[c];if((h instanceof Ca||h instanceof Ma||h instanceof Ea)&&!0===h.expression.isStateDependent){var f=n.paint.get(c);h.expression=f.value,h.updatePaintArray(l.start,l.end,p,t[o],i),a=!0}}}return a},Ta.prototype.defines=function(){var t=[];for(var e in this.binders){var r=this.binders[e];(r instanceof Ia||r instanceof za)&&t.push.apply(t,r.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},Ta.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var r=this.binders[e];if(r instanceof Ca||r instanceof Ma)for(var n=0;n<r.paintVertexAttributes.length;n++)t.push(r.paintVertexAttributes[n].name);else if(r instanceof Ea)for(var i=0;i<sa.members.length;i++)t.push(sa.members[i].name)}return t},Ta.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var r=this.binders[e];if(r instanceof Ia||r instanceof za||r instanceof Ma)for(var n=0,i=r.uniformNames;n<i.length;n+=1)t.push(i[n])}return t},Ta.prototype.getPaintVertexBuffers=function(){return this._buffers},Ta.prototype.getUniforms=function(t,e){var r=[];for(var n in this.binders){var i=this.binders[n];if(i instanceof Ia||i instanceof za||i instanceof Ma)for(var a=0,o=i.uniformNames;a<o.length;a+=1){var s=o[a];if(e[s]){var u=i.getBinding(t,e[s],s);r.push({name:s,property:n,binding:u})}}}return r},Ta.prototype.setUniforms=function(t,e,r,n){for(var i=0,a=e;i<a.length;i+=1){var o=a[i],s=o.name,u=o.property;this.binders[u].setUniform(o.binding,n,r.get(u),s)}},Ta.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var r=this.binders[e];if(t&&r instanceof Ea){var n=2===t.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;n&&this._buffers.push(n)}else(r instanceof Ca||r instanceof Ma)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}},Ta.prototype.upload=function(t){for(var e in this.binders){var r=this.binders[e];(r instanceof Ca||r instanceof Ma||r instanceof Ea)&&r.upload(t)}this.updatePaintBuffers()},Ta.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Ca||e instanceof Ma||e instanceof Ea)&&e.destroy()}};var Pa=function(t,e,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var n=0,i=t;n<i.length;n+=1){var a=i[n];this.programConfigurations[a.id]=new Ta(a,e,r)}this.needsUpload=!1,this._featureMap=new ha,this._bufferOffset=0};function Ba(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Va(t,e,r){var n={color:{source:Zi,composite:Xi},number:{source:ji,composite:Zi}},i=function(t){return{"line-pattern":{source:Ei,composite:Ei},"fill-pattern":{source:Ei,composite:Ei},"fill-extrusion-pattern":{source:Ei,composite:Ei}}[t]}(t);return i&&i[r]||n[e][r]}Pa.prototype.populatePaintArrays=function(t,e,r,n,i,a){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(t,e,n,i,a);void 0!==e.id&&this._featureMap.add(e.id,r,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Pa.prototype.updatePaintArrays=function(t,e,r,n){for(var i=0,a=r;i<a.length;i+=1){var o=a[i];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,this._featureMap,e,o,n)||this.needsUpload}},Pa.prototype.get=function(t){return this.programConfigurations[t]},Pa.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Pa.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Dn("ConstantBinder",Ia),Dn("CrossFadedConstantBinder",za),Dn("SourceExpressionBinder",Ca),Dn("CrossFadedCompositeBinder",Ea),Dn("CompositeExpressionBinder",Ma),Dn("ProgramConfiguration",Ta,{omit:["_buffers"]}),Dn("ProgramConfigurationSet",Pa);var Fa=Math.pow(2,14)-1,Da=-Fa-1;function La(t){for(var e=8192/t.extent,r=t.loadGeometry(),n=0;n<r.length;n++)for(var i=r[n],a=0;a<i.length;a++){var o=i[a],s=Math.round(o.x*e),u=Math.round(o.y*e);o.x=l(s,Da,Fa),o.y=l(u,Da,Fa),(s<o.x||s>o.x+1||u<o.y||u>o.y+1)&&_("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return r}function Ra(t,e,r,n,i){t.emplaceBack(2*e+(n+1)/2,2*r+(i+1)/2)}var Oa=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ii,this.indexArray=new Ri,this.segments=new aa,this.programConfigurations=new Pa(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Ua(t,e){for(var r=0;r<t.length;r++)if(Ha(e,t[r]))return!0;for(var n=0;n<e.length;n++)if(Ha(t,e[n]))return!0;return!!Ka(t,e)}function ja(t,e,r){return!!Ha(t,e)||!!Za(e,t,r)}function qa(t,e){if(1===t.length)return Ja(e,t[0]);for(var r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++)if(Ha(t,n[i]))return!0;for(var a=0;a<t.length;a++)if(Ja(e,t[a]))return!0;for(var o=0;o<e.length;o++)if(Ka(t,e[o]))return!0;return!1}function Na(t,e,r){if(t.length>1){if(Ka(t,e))return!0;for(var n=0;n<e.length;n++)if(Za(e[n],t,r))return!0}for(var i=0;i<t.length;i++)if(Za(t[i],e,r))return!0;return!1}function Ka(t,e){if(0===t.length||0===e.length)return!1;for(var r=0;r<t.length-1;r++)for(var n=t[r],i=t[r+1],a=0;a<e.length-1;a++)if(Ga(n,i,e[a],e[a+1]))return!0;return!1}function Ga(t,e,r,n){return A(t,r,n)!==A(e,r,n)&&A(t,e,r)!==A(t,e,n)}function Za(t,e,r){var n=r*r;if(1===e.length)return t.distSqr(e[0])<n;for(var i=1;i<e.length;i++)if(Xa(t,e[i-1],e[i])<n)return!0;return!1}function Xa(t,e,r){var n=e.distSqr(r);if(0===n)return t.distSqr(e);var i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return t.distSqr(i<0?e:i>1?r:r.sub(e)._mult(i)._add(e))}function Ja(t,e){for(var r,n,i,a=!1,o=0;o<t.length;o++)for(var s=0,u=(r=t[o]).length-1;s<r.length;u=s++)(n=r[s]).y>e.y!=(i=r[u]).y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(a=!a);return a}function Ha(t,e){for(var r=!1,n=0,i=t.length-1;n<t.length;i=n++){var a=t[n],o=t[i];a.y>e.y!=o.y>e.y&&e.x<(o.x-a.x)*(e.y-a.y)/(o.y-a.y)+a.x&&(r=!r)}return r}function Ya(t,e,r){var n=r[0],i=r[2];if(t.x<n.x&&e.x<n.x||t.x>i.x&&e.x>i.x||t.y<n.y&&e.y<n.y||t.y>i.y&&e.y>i.y)return!1;var a=A(t,e,r[0]);return a!==A(t,e,r[1])||a!==A(t,e,r[2])||a!==A(t,e,r[3])}function $a(t,e,r){var n=e.paint.get(t).value;return"constant"===n.kind?n.value:r.programConfigurations.get(e.id).getMaxValue(t)}function Wa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Qa(t,e,r,n,a){if(!e[0]&&!e[1])return t;var o=i.convert(e)._mult(a);"viewport"===r&&o._rotate(-n);for(var s=[],u=0;u<t.length;u++)s.push(t[u].sub(o));return s}Oa.prototype.populate=function(t,e,r){var n=this.layers[0],i=[],a=null;"circle"===n.type&&(a=n.layout.get("circle-sort-key"));for(var o=0,s=t;o<s.length;o+=1){var u=s[o],l=u.feature,p=u.id,c=u.index,h=u.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,y={type:l.type,id:p,properties:l.properties,geometry:f?La(l):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),y,r)){f||(y.geometry=La(l));var d=a?a.evaluate(y,{},r):void 0;i.push({id:p,properties:l.properties,type:l.type,sourceLayerIndex:h,index:c,geometry:y.geometry,patterns:{},sortKey:d})}}a&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,v=i;m<v.length;m+=1){var g=v[m],x=g.geometry,b=g.index,w=g.sourceLayerIndex,_=t[b].feature;this.addFeature(g,x,b,r),e.featureIndex.insert(_,x,b,w,this.index)}},Oa.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Oa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Oa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Oa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ia),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Oa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Oa.prototype.addFeature=function(t,e,r,n){for(var i=0,a=e;i<a.length;i+=1)for(var o=0,s=a[i];o<s.length;o+=1){var u=s[o],l=u.x,p=u.y;if(!(l<0||l>=8192||p<0||p>=8192)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),h=c.vertexLength;Ra(this.layoutVertexArray,l,p,-1,-1),Ra(this.layoutVertexArray,l,p,1,-1),Ra(this.layoutVertexArray,l,p,1,1),Ra(this.layoutVertexArray,l,p,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{},n)},Dn("CircleBucket",Oa,{omit:["layers"]});var to=new xi({"circle-sort-key":new di(zt.layout_circle["circle-sort-key"])}),eo={paint:new xi({"circle-radius":new di(zt.paint_circle["circle-radius"]),"circle-color":new di(zt.paint_circle["circle-color"]),"circle-blur":new di(zt.paint_circle["circle-blur"]),"circle-opacity":new di(zt.paint_circle["circle-opacity"]),"circle-translate":new yi(zt.paint_circle["circle-translate"]),"circle-translate-anchor":new yi(zt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yi(zt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yi(zt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new di(zt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new di(zt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new di(zt.paint_circle["circle-stroke-opacity"])}),layout:to},ro="undefined"!=typeof Float32Array?Float32Array:Array;function no(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function io(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],h=e[9],f=e[10],y=e[11],d=e[12],m=e[13],v=e[14],g=e[15],x=r[0],b=r[1],w=r[2],_=r[3];return t[0]=x*n+b*s+w*c+_*d,t[1]=x*i+b*u+w*h+_*m,t[2]=x*a+b*l+w*f+_*v,t[3]=x*o+b*p+w*y+_*g,t[4]=(x=r[4])*n+(b=r[5])*s+(w=r[6])*c+(_=r[7])*d,t[5]=x*i+b*u+w*h+_*m,t[6]=x*a+b*l+w*f+_*v,t[7]=x*o+b*p+w*y+_*g,t[8]=(x=r[8])*n+(b=r[9])*s+(w=r[10])*c+(_=r[11])*d,t[9]=x*i+b*u+w*h+_*m,t[10]=x*a+b*l+w*f+_*v,t[11]=x*o+b*p+w*y+_*g,t[12]=(x=r[12])*n+(b=r[13])*s+(w=r[14])*c+(_=r[15])*d,t[13]=x*i+b*u+w*h+_*m,t[14]=x*a+b*l+w*f+_*v,t[15]=x*o+b*p+w*y+_*g,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,r=arguments.length;r--;)e+=t[r]*t[r];return Math.sqrt(e)});var ao,oo=io;function so(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}ao=new ro(3),ro!=Float32Array&&(ao[0]=0,ao[1]=0,ao[2]=0),function(){var t=new ro(4);ro!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var uo=(function(){var t=new ro(2);ro!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,eo)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Oa(t)},e.prototype.queryRadius=function(t){var e=t;return $a("circle-radius",this,e)+$a("circle-stroke-width",this,e)+Wa(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,a,o,s){for(var u=Qa(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),l=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r),p="map"===this.paint.get("circle-pitch-alignment"),c=p?u:function(t,e){return t.map((function(t){return lo(t,e)}))}(u,s),h=p?l*o:l,f=0,y=n;f<y.length;f+=1)for(var d=0,m=y[f];d<m.length;d+=1){var v=m[d],g=p?v:lo(v,s),x=h,b=so([],[v.x,v.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?x*=b[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(x*=a.cameraToCenterDistance/b[3]),ja(c,g,x))return!0}return!1},e}(bi));function lo(t,e){var r=so([],[t.x,t.y,0,1],e);return new i(r[0]/r[3],r[1]/r[3])}var po=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Oa);function co(t,e,r,n){var i=e.width,a=e.height;if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==i*a*r)throw new RangeError("mismatched image size")}else n=new Uint8Array(i*a*r);return t.width=i,t.height=a,t.data=n,t}function ho(t,e,r){var n=e.width,i=e.height;if(n!==t.width||i!==t.height){var a=co({},{width:n,height:i},r);fo(t,a,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,i)},r),t.width=n,t.height=i,t.data=a.data}}function fo(t,e,r,n,i,a){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((r.y+u)*t.width+r.x)*a,p=((n.y+u)*e.width+n.x)*a,c=0;c<i.width*a;c++)s[p+c]=o[l+c];return e}Dn("HeatmapBucket",po,{omit:["layers"]});var yo=function(t,e){co(this,t,1,e)};yo.prototype.resize=function(t){ho(this,t,1)},yo.prototype.clone=function(){return new yo({width:this.width,height:this.height},new Uint8Array(this.data))},yo.copy=function(t,e,r,n,i){fo(t,e,r,n,i,1)};var mo=function(t,e){co(this,t,4,e)};mo.prototype.resize=function(t){ho(this,t,4)},mo.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},mo.prototype.clone=function(){return new mo({width:this.width,height:this.height},new Uint8Array(this.data))},mo.copy=function(t,e,r,n,i){fo(t,e,r,n,i,4)},Dn("AlphaImage",yo),Dn("RGBAImage",mo);var vo={paint:new xi({"heatmap-radius":new di(zt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new di(zt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yi(zt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new gi(zt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yi(zt.paint_heatmap["heatmap-opacity"])})};function go(t,e){for(var r=new Uint8Array(1024),n={},i=0,a=0;i<256;i++,a+=4){n[e]=i/255;var o=t.evaluate(n);r[a+0]=Math.floor(255*o.r/o.a),r[a+1]=Math.floor(255*o.g/o.a),r[a+2]=Math.floor(255*o.b/o.a),r[a+3]=Math.floor(255*o.a)}return new mo({width:256,height:1},r)}var xo=function(t){function e(e){t.call(this,e,vo),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new po(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=go(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(bi),bo={paint:new xi({"hillshade-illumination-direction":new yi(zt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new yi(zt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yi(zt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yi(zt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yi(zt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yi(zt.paint_hillshade["hillshade-accent-color"])})},wo=function(t){function e(e){t.call(this,e,bo)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(bi),_o=Si([{name:"a_pos",components:2,type:"Int16"}],4).members,Ao=ko,So=ko;function ko(t,e,r){r=r||2;var n,i,a,o,s,u,l,p=e&&e.length,c=p?e[0]*r:t.length,h=Io(t,0,c,r,!0),f=[];if(!h||h.next===h.prev)return f;if(p&&(h=function(t,e,r,n){var i,a,o,s=[];for(i=0,a=e.length;i<a;i++)(o=Io(t,e[i]*n,i<a-1?e[i+1]*n:t.length,n,!1))===o.next&&(o.steiner=!0),s.push(Lo(o));for(s.sort(Bo),i=0;i<s.length;i++)Vo(s[i],r),r=zo(r,r.next);return r}(t,e,h,r)),t.length>80*r){n=a=t[0],i=o=t[1];for(var y=r;y<c;y+=r)(s=t[y])<n&&(n=s),(u=t[y+1])<i&&(i=u),s>a&&(a=s),u>o&&(o=u);l=0!==(l=Math.max(a-n,o-i))?1/l:0}return Co(h,f,r,n,i,l),f}function Io(t,e,r,n,i){var a,o;if(i===Yo(t,e,r,n)>0)for(a=e;a<r;a+=n)o=Xo(a,t[a],t[a+1],o);else for(a=r-n;a>=e;a-=n)o=Xo(a,t[a],t[a+1],o);return o&&jo(o,o.next)&&(Jo(o),o=o.next),o}function zo(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!jo(n,n.next)&&0!==Uo(n.prev,n,n.next))n=n.next;else{if(Jo(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function Co(t,e,r,n,i,a,o){if(t){!o&&a&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=Do(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,a,o,s,u,l=1;do{for(r=t,t=null,a=null,o=0;r;){for(o++,n=r,s=0,e=0;e<l&&(s++,n=n.nextZ);e++);for(u=l;s>0||u>0&&n;)0!==s&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;r=n}a.nextZ=null,l*=2}while(o>1)}(i)}(t,n,i,a);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,a?Eo(t,n,i,a):Mo(t))e.push(s.i/r),e.push(t.i/r),e.push(u.i/r),Jo(t),t=u.next,l=u.next;else if((t=u)===l){o?1===o?Co(t=To(zo(t),e,r),e,r,n,i,a,2):2===o&&Po(t,e,r,n,i,a):Co(zo(t),e,r,n,i,a,1);break}}}function Mo(t){var e=t.prev,r=t,n=t.next;if(Uo(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Ro(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&Uo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Eo(t,e,r,n){var i=t.prev,a=t,o=t.next;if(Uo(i,a,o)>=0)return!1;for(var s=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,u=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,l=Do(i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,e,r,n),p=Do(s,u,e,r,n),c=t.prevZ,h=t.nextZ;c&&c.z>=l&&h&&h.z<=p;){if(c!==t.prev&&c!==t.next&&Ro(i.x,i.y,a.x,a.y,o.x,o.y,c.x,c.y)&&Uo(c.prev,c,c.next)>=0)return!1;if(c=c.prevZ,h!==t.prev&&h!==t.next&&Ro(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&Uo(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;c&&c.z>=l;){if(c!==t.prev&&c!==t.next&&Ro(i.x,i.y,a.x,a.y,o.x,o.y,c.x,c.y)&&Uo(c.prev,c,c.next)>=0)return!1;c=c.prevZ}for(;h&&h.z<=p;){if(h!==t.prev&&h!==t.next&&Ro(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&Uo(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function To(t,e,r){var n=t;do{var i=n.prev,a=n.next.next;!jo(i,a)&&qo(i,n,n.next,a)&&Go(i,a)&&Go(a,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(a.i/r),Jo(n),Jo(n.next),n=t=a),n=n.next}while(n!==t);return zo(n)}function Po(t,e,r,n,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Oo(o,s)){var u=Zo(o,s);return o=zo(o,o.next),u=zo(u,u.next),Co(o,e,r,n,i,a),void Co(u,e,r,n,i,a)}s=s.next}o=o.next}while(o!==t)}function Bo(t,e){return t.x-e.x}function Vo(t,e){if(e=function(t,e){var r,n=e,i=t.x,a=t.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===o)return r;var u,l=r,p=r.x,c=r.y,h=1/0;n=r;do{i>=n.x&&n.x>=p&&i!==n.x&&Ro(a<c?i:o,a,p,c,a<c?o:i,a,n.x,n.y)&&(u=Math.abs(a-n.y)/(i-n.x),Go(n,t)&&(u<h||u===h&&(n.x>r.x||n.x===r.x&&Fo(r,n)))&&(r=n,h=u)),n=n.next}while(n!==l);return r}(t,e)){var r=Zo(e,t);zo(e,e.next),zo(r,r.next)}}function Fo(t,e){return Uo(t.prev,t,e.prev)<0&&Uo(e.next,t,t.next)<0}function Do(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Lo(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function Ro(t,e,r,n,i,a,o,s){return(i-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(n-s)-(r-o)*(e-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function Oo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&qo(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(Go(t,e)&&Go(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(Uo(t.prev,t,e.prev)||Uo(t,e.prev,e))||jo(t,e)&&Uo(t.prev,t,t.next)>0&&Uo(e.prev,e,e.next)>0)}function Uo(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function jo(t,e){return t.x===e.x&&t.y===e.y}function qo(t,e,r,n){var i=Ko(Uo(t,e,r)),a=Ko(Uo(t,e,n)),o=Ko(Uo(r,n,t)),s=Ko(Uo(r,n,e));return i!==a&&o!==s||!(0!==i||!No(t,r,e))||!(0!==a||!No(t,n,e))||!(0!==o||!No(r,t,n))||!(0!==s||!No(r,e,n))}function No(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ko(t){return t>0?1:t<0?-1:0}function Go(t,e){return Uo(t.prev,t,t.next)<0?Uo(t,e,t.next)>=0&&Uo(t,t.prev,e)>=0:Uo(t,e,t.prev)<0||Uo(t,t.next,e)<0}function Zo(t,e){var r=new Ho(t.i,t.x,t.y),n=new Ho(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function Xo(t,e,r,n){var i=new Ho(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Jo(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ho(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yo(t,e,r,n){for(var i=0,a=e,o=r-n;a<r;a+=n)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}function $o(t,e,r,n,i){!function t(e,r,n,i,a){for(;i>n;){if(i-n>600){var o=i-n+1,s=r-n+1,u=Math.log(o),l=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*l*(o-l)/o)*(s-o/2<0?-1:1);t(e,r,Math.max(n,Math.floor(r-s*l/o+p)),Math.min(i,Math.floor(r+(o-s)*l/o+p)),a)}var c=e[r],h=n,f=i;for(Wo(e,n,r),a(e[i],c)>0&&Wo(e,n,i);h<f;){for(Wo(e,h,f),h++,f--;a(e[h],c)<0;)h++;for(;a(e[f],c)>0;)f--}0===a(e[n],c)?Wo(e,n,f):Wo(e,++f,i),f<=r&&(n=f+1),r<=f&&(i=f-1)}}(t,e,r||0,n||t.length-1,i||Qo)}function Wo(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Qo(t,e){return t<e?-1:t>e?1:0}function ts(t,e){var r=t.length;if(r<=1)return[t];for(var n,i,a=[],o=0;o<r;o++){var s=S(t[o]);0!==s&&(t[o].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(n&&a.push(n),n=[t[o]]):n.push(t[o]))}if(n&&a.push(n),e>1)for(var u=0;u<a.length;u++)a[u].length<=e||($o(a[u],e,1,a[u].length-1,es),a[u]=a[u].slice(0,e));return a}function es(t,e){return e.area-t.area}function rs(t,e,r){for(var n=r.patternDependencies,i=!1,a=0,o=e;a<o.length;a+=1){var s=o[a].paint.get(t+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,n[u.to]=!0,n[u.from]=!0)}return i}function ns(t,e,r,n,i){for(var a=i.patternDependencies,o=0,s=e;o<s.length;o+=1){var u=s[o],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var p=l.evaluate({zoom:n-1},r,{},i.availableImages),c=l.evaluate({zoom:n},r,{},i.availableImages),h=l.evaluate({zoom:n+1},r,{},i.availableImages);c=c&&c.name?c.name:c,h=h&&h.name?h.name:h,a[p=p&&p.name?p.name:p]=!0,a[c]=!0,a[h]=!0,r.patterns[u.id]={min:p,mid:c,max:h}}}return r}ko.deviation=function(t,e,r,n){var i=e&&e.length,a=Math.abs(Yo(t,0,i?e[0]*r:t.length,r));if(i)for(var o=0,s=e.length;o<s;o++)a-=Math.abs(Yo(t,e[o]*r,o<s-1?e[o+1]*r:t.length,r));var u=0;for(o=0;o<n.length;o+=3){var l=n[o]*r,p=n[o+1]*r,c=n[o+2]*r;u+=Math.abs((t[l]-t[c])*(t[p+1]-t[l+1])-(t[l]-t[p])*(t[c+1]-t[l+1]))}return 0===a&&0===u?0:Math.abs((u-a)/a)},ko.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<e;o++)r.vertices.push(t[i][a][o]);i>0&&r.holes.push(n+=t[i-1].length)}return r},Ao.default=So;var is=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ii,this.indexArray=new Ri,this.indexArray2=new Ki,this.programConfigurations=new Pa(t.layers,t.zoom),this.segments=new aa,this.segments2=new aa,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};is.prototype.populate=function(t,e,r){this.hasPattern=rs("fill",this.layers,e);for(var n=this.layers[0].layout.get("fill-sort-key"),i=[],a=0,o=t;a<o.length;a+=1){var s=o[a],u=s.feature,l=s.id,p=s.index,c=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f={type:u.type,id:l,properties:u.properties,geometry:h?La(u):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),f,r)){h||(f.geometry=La(u));var y=n?n.evaluate(f,{},r,e.availableImages):void 0;i.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:c,index:p,geometry:f.geometry,patterns:{},sortKey:y})}}n&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var d=0,m=i;d<m.length;d+=1){var v=m[d],g=v.geometry,x=v.index,b=v.sourceLayerIndex;if(this.hasPattern){var w=ns("fill",this.layers,v,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(v,g,x,r,{});e.featureIndex.insert(t[x].feature,g,x,b,this.index)}},is.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},is.prototype.addFeatures=function(t,e,r){for(var n=0,i=this.patternFeatures;n<i.length;n+=1){var a=i[n];this.addFeature(a,a.geometry,a.index,e,r)}},is.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},is.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},is.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_o),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},is.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},is.prototype.addFeature=function(t,e,r,n,i){for(var a=0,o=ts(e,500);a<o.length;a+=1){for(var s=o[a],u=0,l=0,p=s;l<p.length;l+=1)u+=p[l].length;for(var c=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),h=c.vertexLength,f=[],y=[],d=0,m=s;d<m.length;d+=1){var v=m[d];if(0!==v.length){v!==s[0]&&y.push(f.length/2);var g=this.segments2.prepareSegment(v.length,this.layoutVertexArray,this.indexArray2),x=g.vertexLength;this.layoutVertexArray.emplaceBack(v[0].x,v[0].y),this.indexArray2.emplaceBack(x+v.length-1,x),f.push(v[0].x),f.push(v[0].y);for(var b=1;b<v.length;b++)this.layoutVertexArray.emplaceBack(v[b].x,v[b].y),this.indexArray2.emplaceBack(x+b-1,x+b),f.push(v[b].x),f.push(v[b].y);g.vertexLength+=v.length,g.primitiveLength+=v.length}}for(var w=Ao(f,y),_=0;_<w.length;_+=3)this.indexArray.emplaceBack(h+w[_],h+w[_+1],h+w[_+2]);c.vertexLength+=u,c.primitiveLength+=w.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,n)},Dn("FillBucket",is,{omit:["layers","patternFeatures"]});var as=new xi({"fill-sort-key":new di(zt.layout_fill["fill-sort-key"])}),os={paint:new xi({"fill-antialias":new yi(zt.paint_fill["fill-antialias"]),"fill-opacity":new di(zt.paint_fill["fill-opacity"]),"fill-color":new di(zt.paint_fill["fill-color"]),"fill-outline-color":new di(zt.paint_fill["fill-outline-color"]),"fill-translate":new yi(zt.paint_fill["fill-translate"]),"fill-translate-anchor":new yi(zt.paint_fill["fill-translate-anchor"]),"fill-pattern":new mi(zt.paint_fill["fill-pattern"])}),layout:as},ss=function(t){function e(e){t.call(this,e,os)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new is(t)},e.prototype.queryRadius=function(){return Wa(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,a,o){return qa(Qa(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),n)},e.prototype.isTileClipped=function(){return!0},e}(bi),us=Si([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ls=ps;function ps(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(cs,this,e)}function cs(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function hs(t){for(var e,r,n=0,i=0,a=t.length,o=a-1;i<a;o=i++)n+=((r=t[o]).x-(e=t[i]).x)*(e.y+r.y);return n}ps.types=["Unknown","Point","LineString","Polygon"],ps.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,a=0,o=0,s=0,u=[];t.pos<r;){if(a<=0){var l=t.readVarint();n=7&l,a=l>>3}if(a--,1===n||2===n)o+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&u.push(e),e=[]),e.push(new i(o,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&u.push(e),u},ps.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,a=0,o=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(n<=0){var p=t.readVarint();r=7&p,n=p>>3}if(n--,1===r||2===r)(i+=t.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=t.readSVarint())<u&&(u=a),a>l&&(l=a);else if(7!==r)throw new Error("unknown command "+r)}return[o,u,s,l]},ps.prototype.toGeoJSON=function(t,e,r){var n,i,a=this.extent*Math.pow(2,r),o=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=ps.types[this.type];function p(t){for(var e=0;e<t.length;e++){var r=t[e];t[e]=[360*(r.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(n=0;n<u.length;n++)c[n]=u[n][0];p(u=c);break;case 2:for(n=0;n<u.length;n++)p(u[n]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],a=0;a<e;a++){var o=hs(t[a]);0!==o&&(void 0===n&&(n=o<0),n===o<0?(r&&i.push(r),r=[t[a]]):r.push(t[a]))}return r&&i.push(r),i}(u),n=0;n<u.length;n++)for(i=0;i<u[n].length;i++)p(u[n][i])}1===u.length?u=u[0]:l="Multi"+l;var h={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var fs=ys;function ys(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ds,this,e),this.length=this._features.length}function ds(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(r))}function ms(t,e,r){if(3===t){var n=new fs(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}ys.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new ls(this._pbf,e,this.extent,this._keys,this._values)};var vs={VectorTile:function(t,e){this.layers=t.readFields(ms,{},e)},VectorTileFeature:ls,VectorTileLayer:fs},gs=vs.VectorTileFeature.types,xs=Math.pow(2,13);function bs(t,e,r,n,i,a,o,s){t.emplaceBack(e,r,2*Math.floor(n*xs)+o,i*xs*2,a*xs*2,Math.round(s))}var ws=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ci,this.indexArray=new Ri,this.programConfigurations=new Pa(t.layers,t.zoom),this.segments=new aa,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function _s(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}ws.prototype.populate=function(t,e,r){this.features=[],this.hasPattern=rs("fill-extrusion",this.layers,e);for(var n=0,i=t;n<i.length;n+=1){var a=i[n],o=a.feature,s=a.id,u=a.index,l=a.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,c={type:o.type,id:s,properties:o.properties,geometry:p?La(o):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),c,r)){var h={id:s,sourceLayerIndex:l,index:u,geometry:p?c.geometry:La(o),properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(h.id=o.id),this.hasPattern?this.features.push(ns("fill-extrusion",this.layers,h,this.zoom,e)):this.addFeature(h,h.geometry,u,r,{}),e.featureIndex.insert(o,h.geometry,u,l,this.index,!0)}}},ws.prototype.addFeatures=function(t,e,r){for(var n=0,i=this.features;n<i.length;n+=1){var a=i[n];this.addFeature(a,a.geometry,a.index,e,r)}},ws.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},ws.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ws.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ws.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,us),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ws.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ws.prototype.addFeature=function(t,e,r,n,i){for(var a=0,o=ts(e,500);a<o.length;a+=1){for(var s=o[a],u=0,l=0,p=s;l<p.length;l+=1)u+=p[l].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,f=s;h<f.length;h+=1){var y=f[h];if(0!==y.length&&!((P=y).every((function(t){return t.x<0}))||P.every((function(t){return t.x>8192}))||P.every((function(t){return t.y<0}))||P.every((function(t){return t.y>8192}))))for(var d=0,m=0;m<y.length;m++){var v=y[m];if(m>=1){var g=y[m-1];if(!_s(v,g)){c.vertexLength+4>aa.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var x=v.sub(g)._perp()._unit(),b=g.dist(v);d+b>32768&&(d=0),bs(this.layoutVertexArray,v.x,v.y,x.x,x.y,0,0,d),bs(this.layoutVertexArray,v.x,v.y,x.x,x.y,0,1,d),bs(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,0,d+=b),bs(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,1,d);var w=c.vertexLength;this.indexArray.emplaceBack(w,w+2,w+1),this.indexArray.emplaceBack(w+1,w+2,w+3),c.vertexLength+=4,c.primitiveLength+=2}}}}if(c.vertexLength+u>aa.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===gs[t.type]){for(var _=[],A=[],S=c.vertexLength,k=0,I=s;k<I.length;k+=1){var z=I[k];if(0!==z.length){z!==s[0]&&A.push(_.length/2);for(var C=0;C<z.length;C++){var M=z[C];bs(this.layoutVertexArray,M.x,M.y,0,0,1,1,0),_.push(M.x),_.push(M.y)}}}for(var E=Ao(_,A),T=0;T<E.length;T+=3)this.indexArray.emplaceBack(S+E[T],S+E[T+2],S+E[T+1]);c.primitiveLength+=E.length/3,c.vertexLength+=u}}var P;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,n)},Dn("FillExtrusionBucket",ws,{omit:["layers","features"]});var As={paint:new xi({"fill-extrusion-opacity":new yi(zt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new di(zt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yi(zt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yi(zt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mi(zt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new di(zt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new di(zt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yi(zt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Ss=function(t){function e(e){t.call(this,e,As)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new ws(t)},e.prototype.queryRadius=function(){return Wa(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,r,n,a,o,s,u){var l=Qa(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),p=this.paint.get("fill-extrusion-height").evaluate(e,r),c=this.paint.get("fill-extrusion-base").evaluate(e,r),h=function(t,e,r,n){for(var a=[],o=0,s=t;o<s.length;o+=1){var u=s[o],l=[u.x,u.y,0,1];so(l,l,e),a.push(new i(l[0]/l[3],l[1]/l[3]))}return a}(l,u),f=function(t,e,r,n){for(var a=[],o=[],s=n[8]*e,u=n[9]*e,l=n[10]*e,p=n[11]*e,c=n[8]*r,h=n[9]*r,f=n[10]*r,y=n[11]*r,d=0,m=t;d<m.length;d+=1){for(var v=[],g=[],x=0,b=m[d];x<b.length;x+=1){var w=b[x],_=w.x,A=w.y,S=n[0]*_+n[4]*A+n[12],k=n[1]*_+n[5]*A+n[13],I=n[2]*_+n[6]*A+n[14],z=n[3]*_+n[7]*A+n[15],C=I+l,M=z+p,E=S+c,T=k+h,P=I+f,B=z+y,V=new i((S+s)/M,(k+u)/M);V.z=C/M,v.push(V);var F=new i(E/B,T/B);F.z=P/B,g.push(F)}a.push(v),o.push(g)}return[a,o]}(n,c,p,u);return function(t,e,r){var n=1/0;qa(r,e)&&(n=Is(r,e[0]));for(var i=0;i<e.length;i++)for(var a=e[i],o=t[i],s=0;s<a.length-1;s++){var u=a[s],l=[u,a[s+1],o[s+1],o[s],u];Ua(r,l)&&(n=Math.min(n,Is(r,l)))}return n!==1/0&&n}(f[0],f[1],h)},e}(bi);function ks(t,e){return t.x*e.x+t.y*e.y}function Is(t,e){if(1===t.length){for(var r,n=0,i=e[n++];!r||i.equals(r);)if(!(r=e[n++]))return 1/0;for(;n<e.length;n++){var a=e[n],o=t[0],s=r.sub(i),u=a.sub(i),l=o.sub(i),p=ks(s,s),c=ks(s,u),h=ks(u,u),f=ks(l,s),y=ks(l,u),d=p*h-c*c,m=(h*f-c*y)/d,v=(p*y-c*f)/d,g=i.z*(1-m-v)+r.z*m+a.z*v;if(isFinite(g))return g}return 1/0}for(var x=1/0,b=0,w=e;b<w.length;b+=1)x=Math.min(x,w[b].z);return x}var zs=Si([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Cs=vs.VectorTileFeature.types,Ms=Math.cos(Math.PI/180*37.5),Es=Math.pow(2,14)/.5,Ts=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Mi,this.indexArray=new Ri,this.programConfigurations=new Pa(t.layers,t.zoom),this.segments=new aa,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Ts.prototype.populate=function(t,e,r){this.hasPattern=rs("line",this.layers,e);for(var n=this.layers[0].layout.get("line-sort-key"),i=[],a=0,o=t;a<o.length;a+=1){var s=o[a],u=s.feature,l=s.id,p=s.index,c=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f={type:u.type,id:l,properties:u.properties,geometry:h?La(u):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),f,r)){h||(f.geometry=La(u));var y=n?n.evaluate(f,{},r):void 0;i.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:c,index:p,geometry:f.geometry,patterns:{},sortKey:y})}}n&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var d=0,m=i;d<m.length;d+=1){var v=m[d],g=v.geometry,x=v.index,b=v.sourceLayerIndex;if(this.hasPattern){var w=ns("line",this.layers,v,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(v,g,x,r,{});e.featureIndex.insert(t[x].feature,g,x,b,this.index)}},Ts.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Ts.prototype.addFeatures=function(t,e,r){for(var n=0,i=this.patternFeatures;n<i.length;n+=1){var a=i[n];this.addFeature(a,a.geometry,a.index,e,r)}},Ts.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ts.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ts.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,zs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ts.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ts.prototype.addFeature=function(t,e,r,n,i){for(var a=this.layers[0].layout,o=a.get("line-join").evaluate(t,{}),s=a.get("line-cap"),u=a.get("line-miter-limit"),l=a.get("line-round-limit"),p=0,c=e;p<c.length;p+=1)this.addLine(c[p],t,o,s,u,l);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,n)},Ts.prototype.addLine=function(t,e,r,n,i,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties.mapbox_clip_start,this.clipEnd=+e.properties.mapbox_clip_end;for(var o=0;o<t.length-1;o++)this.totalDistance+=t[o].dist(t[o+1]);this.updateScaledDistance()}for(var s="Polygon"===Cs[e.type],u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var l=0;l<u-1&&t[l].equals(t[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===r&&(i=1.05);var p,c=this.overscaling<=16?122880/(512*this.overscaling):0,h=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),f=void 0,y=void 0,d=void 0,m=void 0;this.e1=this.e2=-1,s&&(m=t[l].sub(p=t[u-2])._unit()._perp());for(var v=l;v<u;v++)if(!(y=v===u-1?s?t[l+1]:void 0:t[v+1])||!t[v].equals(y)){m&&(d=m),p&&(f=p),p=t[v],m=y?y.sub(p)._unit()._perp():d;var g=(d=d||m).add(m);0===g.x&&0===g.y||g._unit();var x=d.x*m.x+d.y*m.y,b=g.x*m.x+g.y*m.y,w=0!==b?1/b:1/0,_=2*Math.sqrt(2-2*b),A=b<Ms&&f&&y,S=d.x*m.y-d.y*m.x>0;if(A&&v>l){var k=p.dist(f);if(k>2*c){var I=p.sub(p.sub(f)._mult(c/k)._round());this.updateDistance(f,I),this.addCurrentVertex(I,d,0,0,h),f=I}}var z=f&&y,C=z?r:s?"butt":n;if(z&&"round"===C&&(w<a?C="miter":w<=2&&(C="fakeround")),"miter"===C&&w>i&&(C="bevel"),"bevel"===C&&(w>2&&(C="flipbevel"),w<i&&(C="miter")),f&&this.updateDistance(f,p),"miter"===C)g._mult(w),this.addCurrentVertex(p,g,0,0,h);else if("flipbevel"===C){if(w>100)g=m.mult(-1);else{var M=w*d.add(m).mag()/d.sub(m).mag();g._perp()._mult(M*(S?-1:1))}this.addCurrentVertex(p,g,0,0,h),this.addCurrentVertex(p,g.mult(-1),0,0,h)}else if("bevel"===C||"fakeround"===C){var E=-Math.sqrt(w*w-1),T=S?E:0,P=S?0:E;if(f&&this.addCurrentVertex(p,d,T,P,h),"fakeround"===C)for(var B=Math.round(180*_/Math.PI/20),V=1;V<B;V++){var F=V/B;if(.5!==F){var D=F-.5;F+=F*D*(F-1)*((1.0904+x*(x*(3.55645-1.43519*x)-3.2452))*D*D+(.848013+x*(.215638*x-1.06021)))}var L=m.sub(d)._mult(F)._add(d)._unit()._mult(S?-1:1);this.addHalfVertex(p,L.x,L.y,!1,S,0,h)}y&&this.addCurrentVertex(p,m,-T,-P,h)}else if("butt"===C)this.addCurrentVertex(p,g,0,0,h);else if("square"===C){var R=f?1:-1;this.addCurrentVertex(p,g,R,R,h)}else"round"===C&&(f&&(this.addCurrentVertex(p,d,0,0,h),this.addCurrentVertex(p,d,1,1,h,!0)),y&&(this.addCurrentVertex(p,m,-1,-1,h,!0),this.addCurrentVertex(p,m,0,0,h)));if(A&&v<u-1){var O=p.dist(y);if(O>2*c){var U=p.add(y.sub(p)._mult(c/O)._round());this.updateDistance(p,U),this.addCurrentVertex(U,m,0,0,h),p=U}}}}},Ts.prototype.addCurrentVertex=function(t,e,r,n,i,a){void 0===a&&(a=!1);var o=e.y*n-e.x,s=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*r,e.y-e.x*r,a,!1,r,i),this.addHalfVertex(t,o,s,a,!0,-n,i),this.distance>Es/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,r,n,i,a))},Ts.prototype.addHalfVertex=function(t,e,r,n,i,a,o){var s=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((t.x<<1)+(n?1:0),(t.y<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1)|(63&s)<<2,s>>6);var u=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),o.primitiveLength++),i?this.e2=u:this.e1=u},Ts.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Es-1):this.distance},Ts.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Dn("LineBucket",Ts,{omit:["layers","patternFeatures"]});var Ps=new xi({"line-cap":new yi(zt.layout_line["line-cap"]),"line-join":new di(zt.layout_line["line-join"]),"line-miter-limit":new yi(zt.layout_line["line-miter-limit"]),"line-round-limit":new yi(zt.layout_line["line-round-limit"]),"line-sort-key":new di(zt.layout_line["line-sort-key"])}),Bs={paint:new xi({"line-opacity":new di(zt.paint_line["line-opacity"]),"line-color":new di(zt.paint_line["line-color"]),"line-translate":new yi(zt.paint_line["line-translate"]),"line-translate-anchor":new yi(zt.paint_line["line-translate-anchor"]),"line-width":new di(zt.paint_line["line-width"]),"line-gap-width":new di(zt.paint_line["line-gap-width"]),"line-offset":new di(zt.paint_line["line-offset"]),"line-blur":new di(zt.paint_line["line-blur"]),"line-dasharray":new vi(zt.paint_line["line-dasharray"]),"line-pattern":new mi(zt.paint_line["line-pattern"]),"line-gradient":new gi(zt.paint_line["line-gradient"])}),layout:Ps},Vs=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,r){return r=new ai(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),t.prototype.possiblyEvaluate.call(this,e,r)},e.prototype.evaluate=function(e,r,n,i){return r=c({},r,{zoom:Math.floor(r.zoom)}),t.prototype.evaluate.call(this,e,r,n,i)},e}(di))(Bs.paint.properties["line-width"].specification);Vs.useIntegerZoom=!0;var Fs=function(t){function e(e){t.call(this,e,Bs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){this.gradient=go(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r),this.paint._values["line-floorwidth"]=Vs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Ts(t)},e.prototype.queryRadius=function(t){var e=t,r=Ds($a("line-width",this,e),$a("line-gap-width",this,e)),n=$a("line-offset",this,e);return r/2+Math.abs(n)+Wa(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,a,o,s){var u=Qa(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),l=s/2*Ds(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),p=this.paint.get("line-offset").evaluate(e,r);return p&&(n=function(t,e){for(var r=[],n=new i(0,0),a=0;a<t.length;a++){for(var o=t[a],s=[],u=0;u<o.length;u++){var l=o[u],p=o[u+1],c=0===u?n:l.sub(o[u-1])._unit()._perp(),h=u===o.length-1?n:p.sub(l)._unit()._perp(),f=c._add(h)._unit();f._mult(1/(f.x*h.x+f.y*h.y)),s.push(f._mult(e)._add(l))}r.push(s)}return r}(n,p*s)),function(t,e,r){for(var n=0;n<e.length;n++){var i=e[n];if(t.length>=3)for(var a=0;a<i.length;a++)if(Ha(t,i[a]))return!0;if(Na(t,i,r))return!0}return!1}(u,n,l)},e.prototype.isTileClipped=function(){return!0},e}(bi);function Ds(t,e){return e>0?e+2*t:t}var Ls=Si([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Rs=Si([{name:"a_projected_pos",components:3,type:"Float32"}],4),Os=(Si([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Si([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Us=(Si([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Si([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),js=Si([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function qs(t,e,r){return t.sections.forEach((function(t){t.text=function(t,e,r){var n=e.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),ii.applyArabicShaping&&(t=ii.applyArabicShaping(t)),t}(t.text,e,r)})),t}Si([{name:"triangle",components:3,type:"Uint16"}]),Si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Si([{type:"Float32",name:"offsetX"}]),Si([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ns={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Ks=function(t,e,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,l=u>>1,p=-7,c=r?i-1:0,h=r?-1:1,f=t[e+c];for(c+=h,a=f&(1<<-p)-1,f>>=-p,p+=s;p>0;a=256*a+t[e+c],c+=h,p-=8);for(o=a&(1<<-p)-1,a>>=-p,p+=n;p>0;o=256*o+t[e+c],c+=h,p-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),a-=l}return(f?-1:1)*o*Math.pow(2,a-n)},Gs=function(t,e,r,n,i,a){var o,s,u,l=8*a-i-1,p=(1<<l)-1,c=p>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:a-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=p):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+c>=1?h/u:h*Math.pow(2,1-c))*u>=2&&(o++,u/=2),o+c>=p?(s=0,o=p):o+c>=1?(s=(e*u-1)*Math.pow(2,i),o+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;t[r+f]=255&s,f+=y,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[r+f]=255&o,f+=y,o/=256,l-=8);t[r+f-y]|=128*d},Zs=Xs;function Xs(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Xs.Varint=0,Xs.Fixed64=1,Xs.Bytes=2,Xs.Fixed32=5;var Js="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Hs(t){return t.type===Xs.Bytes?t.readVarint()+t.pos:t.pos+1}function Ys(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function $s(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function Ws(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function Qs(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function tu(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function eu(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function ru(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function nu(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function iu(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function au(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function ou(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function su(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function uu(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function lu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function pu(t,e,r){1===t&&r.readMessage(cu,e)}function cu(t,e,r){if(3===t){var n=r.readMessage(hu,{}),i=n.width,a=n.height,o=n.left,s=n.top,u=n.advance;e.push({id:n.id,bitmap:new yo({width:i+6,height:a+6},n.bitmap),metrics:{width:i,height:a,left:o,top:s,advance:u}})}}function hu(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint())}function fu(t){for(var e=0,r=0,n=0,i=t;n<i.length;n+=1){var a=i[n];e+=a.w*a.h,r=Math.max(r,a.w)}t.sort((function(t,e){return e.h-t.h}));for(var o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}],s=0,u=0,l=0,p=t;l<p.length;l+=1)for(var c=p[l],h=o.length-1;h>=0;h--){var f=o[h];if(!(c.w>f.w||c.h>f.h)){if(c.x=f.x,c.y=f.y,u=Math.max(u,c.y+c.h),s=Math.max(s,c.x+c.w),c.w===f.w&&c.h===f.h){var y=o.pop();h<o.length&&(o[h]=y)}else c.h===f.h?(f.x+=c.w,f.w-=c.w):c.w===f.w?(f.y+=c.h,f.h-=c.h):(o.push({x:f.x+c.w,y:f.y,w:f.w-c.w,h:c.h}),f.y+=c.h,f.h-=c.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}Xs.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,a=this.pos;this.type=7&n,t(i,e,this),this.pos===a&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=su(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=lu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=su(this.buf,this.pos)+4294967296*su(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=su(this.buf,this.pos)+4294967296*lu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Ks(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Ks(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,a=r.buf;if(n=(112&(i=a[r.pos++]))>>4,i<128)return Ys(t,n,e);if(n|=(127&(i=a[r.pos++]))<<3,i<128)return Ys(t,n,e);if(n|=(127&(i=a[r.pos++]))<<10,i<128)return Ys(t,n,e);if(n|=(127&(i=a[r.pos++]))<<17,i<128)return Ys(t,n,e);if(n|=(127&(i=a[r.pos++]))<<24,i<128)return Ys(t,n,e);if(n|=(1&(i=a[r.pos++]))<<31,i<128)return Ys(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Js?function(t,e,r){return Js.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){for(var n="",i=e;i<r;){var a,o,s,u=t[i],l=null,p=u>239?4:u>223?3:u>191?2:1;if(i+p>r)break;1===p?u<128&&(l=u):2===p?128==(192&(a=t[i+1]))&&(l=(31&u)<<6|63&a)<=127&&(l=null):3===p?(o=t[i+2],128==(192&(a=t[i+1]))&&128==(192&o)&&((l=(15&u)<<12|(63&a)<<6|63&o)<=2047||l>=55296&&l<=57343)&&(l=null)):4===p&&(o=t[i+2],s=t[i+3],128==(192&(a=t[i+1]))&&128==(192&o)&&128==(192&s)&&((l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,p=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),i+=p}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Xs.Bytes)return t.push(this.readVarint(e));var r=Hs(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Xs.Bytes)return t.push(this.readSVarint());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Xs.Bytes)return t.push(this.readBoolean());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Xs.Bytes)return t.push(this.readFloat());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Xs.Bytes)return t.push(this.readDouble());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Xs.Bytes)return t.push(this.readFixed32());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Xs.Bytes)return t.push(this.readSFixed32());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Xs.Bytes)return t.push(this.readFixed64());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Xs.Bytes)return t.push(this.readSFixed64());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Xs.Varint)for(;this.buf[this.pos++]>127;);else if(e===Xs.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Xs.Fixed32)this.pos+=4;else{if(e!==Xs.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),uu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),uu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),uu(this.buf,-1&t,this.pos),uu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),uu(this.buf,-1&t,this.pos),uu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,r.buf[r.pos]=127&(t>>>=7)}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,a=0;a<e.length;a++){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){n>56319||a+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&$s(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),Gs(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Gs(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&$s(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,Xs.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Ws,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Qs,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,ru,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,tu,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,eu,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,nu,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,iu,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,au,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,ou,e)},writeBytesField:function(t,e){this.writeTag(t,Xs.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Xs.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Xs.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Xs.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Xs.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Xs.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Xs.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Xs.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Xs.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Xs.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var yu=function(t,e){var r=e.pixelRatio,n=e.version,i=e.stretchX,a=e.stretchY,o=e.content;this.paddedRect=t,this.pixelRatio=r,this.stretchX=i,this.stretchY=a,this.content=o,this.version=n},du={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};du.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},du.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},du.tlbr.get=function(){return this.tl.concat(this.br)},du.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(yu.prototype,du);var mu=function(t,e){var r={},n={};this.haveRenderCallbacks=[];var i=[];this.addImages(t,r,i),this.addImages(e,n,i);var a=fu(i),o=new mo({width:a.w||1,height:a.h||1});for(var s in t){var u=t[s],l=r[s].paddedRect;mo.copy(u.data,o,{x:0,y:0},{x:l.x+1,y:l.y+1},u.data)}for(var p in e){var c=e[p],h=n[p].paddedRect,f=h.x+1,y=h.y+1,d=c.data.width,m=c.data.height;mo.copy(c.data,o,{x:0,y:0},{x:f,y:y},c.data),mo.copy(c.data,o,{x:0,y:m-1},{x:f,y:y-1},{width:d,height:1}),mo.copy(c.data,o,{x:0,y:0},{x:f,y:y+m},{width:d,height:1}),mo.copy(c.data,o,{x:d-1,y:0},{x:f-1,y:y},{width:1,height:m}),mo.copy(c.data,o,{x:0,y:0},{x:f+d,y:y},{width:1,height:m})}this.image=o,this.iconPositions=r,this.patternPositions=n};mu.prototype.addImages=function(t,e,r){for(var n in t){var i=t[n],a={x:0,y:0,w:i.data.width+2,h:i.data.height+2};r.push(a),e[n]=new yu(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n)}},mu.prototype.patchUpdatedImages=function(t,e){for(var r in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[r],t.getImage(r),e),this.patchUpdatedImage(this.patternPositions[r],t.getImage(r),e)},mu.prototype.patchUpdatedImage=function(t,e,r){if(t&&e&&t.version!==e.version){t.version=e.version;var n=t.tl;r.update(e.data,void 0,{x:n[0],y:n[1]})}},Dn("ImagePosition",yu),Dn("ImageAtlas",mu);var vu={horizontal:1,vertical:2,horizontalOnly:3},gu=function(){this.scale=1,this.fontStack="",this.imageName=null};gu.forText=function(t,e){var r=new gu;return r.scale=t||1,r.fontStack=e,r},gu.forImage=function(t){var e=new gu;return e.imageName=t,e};var xu=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function bu(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d){var m,v=xu.fromFeature(t,i);c===vu.vertical&&v.verticalizePunctuation();var g=ii.processBidirectionalText,x=ii.processStyledBidirectionalText;if(g&&1===v.sections.length){m=[];for(var b=0,w=g(v.toString(),zu(v,l,a,e,n,f,y));b<w.length;b+=1){var _=w[b],A=new xu;A.text=_,A.sections=v.sections;for(var S=0;S<_.length;S++)A.sectionIndex.push(0);m.push(A)}}else if(x){m=[];for(var k=0,I=x(v.text,v.sectionIndex,zu(v,l,a,e,n,f,y));k<I.length;k+=1){var z=I[k],C=new xu;C.text=z[0],C.sectionIndex=z[1],C.sections=v.sections,m.push(C)}}else m=function(t,e){for(var r=[],n=t.text,i=0,a=0,o=e;a<o.length;a+=1){var s=o[a];r.push(t.substring(i,s)),i=s}return i<n.length&&r.push(t.substring(i,n.length)),r}(v,zu(v,l,a,e,n,f,y));var M=[],E={positionedLines:M,text:v.toString(),top:p[1],bottom:p[1],left:p[0],right:p[0],writingMode:c,iconsInText:!1,verticalizable:!1};return function(t,e,r,n,i,a,o,s,u,l,p,c){for(var h=0,f=-17,y=0,d=0,m="right"===s?1:"left"===s?0:.5,v=0,g=0,x=i;g<x.length;g+=1){var b=x[g];b.trim();var w=b.getMaxScale(),_=24*(w-1),A={positionedGlyphs:[],lineOffset:0};t.positionedLines[v]=A;var S=A.positionedGlyphs,k=0;if(b.length()){for(var I=0;I<b.length();I++){var z=b.getSection(I),C=b.getSectionIndex(I),M=b.getCharCode(I),E=0,T=null,P=null,B=null,V=24,F=!(u===vu.horizontal||!p&&!Gn(M)||p&&(wu[M]||(K=M,Nn.Arabic(K)||Nn["Arabic Supplement"](K)||Nn["Arabic Extended-A"](K)||Nn["Arabic Presentation Forms-A"](K)||Nn["Arabic Presentation Forms-B"](K))));if(z.imageName){var D=n[z.imageName];if(!D)continue;B=z.imageName,t.iconsInText=t.iconsInText||!0,P=D.paddedRect;var L=D.displaySize;z.scale=24*z.scale/c,E=_+(24-L[1]*z.scale),V=(T={width:L[0],height:L[1],left:1,top:-3,advance:F?L[1]:L[0]}).advance;var R=F?L[0]*z.scale-24*w:L[1]*z.scale-24*w;R>0&&R>k&&(k=R)}else{var O=r[z.fontStack],U=O&&O[M];if(U&&U.rect)P=U.rect,T=U.metrics;else{var j=e[z.fontStack],q=j&&j[M];if(!q)continue;T=q.metrics}E=24*(w-z.scale)}F?(t.verticalizable=!0,S.push({glyph:M,imageName:B,x:h,y:f+E,vertical:F,scale:z.scale,fontStack:z.fontStack,sectionIndex:C,metrics:T,rect:P}),h+=V*z.scale+l):(S.push({glyph:M,imageName:B,x:h,y:f+E,vertical:F,scale:z.scale,fontStack:z.fontStack,sectionIndex:C,metrics:T,rect:P}),h+=T.advance*z.scale+l)}0!==S.length&&(y=Math.max(h-l,y),Mu(S,0,S.length-1,m,k)),h=0;var N=a*w+k;A.lineOffset=Math.max(k,_),f+=N,d=Math.max(N,d),++v}else f+=a,++v}var K,G=f- -17,Z=Cu(o),X=Z.horizontalAlign,J=Z.verticalAlign;(function(t,e,r,n,i,a,o,s,u){var l,p=(e-r)*i;l=a!==o?-s*n- -17:(-n*u+.5)*o;for(var c=0,h=t;c<h.length;c+=1)for(var f=0,y=h[c].positionedGlyphs;f<y.length;f+=1){var d=y[f];d.x+=p,d.y+=l}})(t.positionedLines,m,X,J,y,d,a,G,i.length),t.top+=-J*G,t.bottom=t.top+G,t.left+=-X*y,t.right=t.left+y}(E,e,r,n,m,o,s,u,c,l,h,d),!function(t){for(var e=0,r=t;e<r.length;e+=1)if(0!==r[e].positionedGlyphs.length)return!1;return!0}(M)&&E}xu.fromFeature=function(t,e){for(var r=new xu,n=0;n<t.sections.length;n++){var i=t.sections[n];i.image?r.addImageSection(i):r.addTextSection(i,e)}return r},xu.prototype.length=function(){return this.text.length},xu.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},xu.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},xu.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},xu.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r+1)||null,i=t.charCodeAt(r-1)||null;e+=n&&Zn(n)&&!Ns[t[r+1]]||i&&Zn(i)&&!Ns[t[r-1]]||!Ns[t[r]]?t[r]:Ns[t[r]]}return e}(this.text)},xu.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&wu[this.text.charCodeAt(e)];e++)t++;for(var r=this.text.length,n=this.text.length-1;n>=0&&n>=t&&wu[this.text.charCodeAt(n)];n--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)},xu.prototype.substring=function(t,e){var r=new xu;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r},xu.prototype.toString=function(){return this.text},xu.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,r){return Math.max(e,t.sections[r].scale)}),0)},xu.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(gu.forText(t.scale,t.fontStack||e));for(var r=this.sections.length-1,n=0;n<t.text.length;++n)this.sectionIndex.push(r)},xu.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(gu.forImage(e)),this.sectionIndex.push(this.sections.length-1)):_("Reached maximum number of images 6401")}else _("Can't add FormattedSection with an empty image.")},xu.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var wu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_u={};function Au(t,e,r,n,i,a){if(e.imageName){var o=n[e.imageName];return o?o.displaySize[0]*e.scale*24/a+i:0}var s=r[e.fontStack],u=s&&s[t];return u?u.metrics.advance*e.scale+i:0}function Su(t,e,r,n){var i=Math.pow(t-e,2);return n?t<e?i/2:2*i:i+Math.abs(r)*r}function ku(t,e,r){var n=0;return 10===t&&(n-=1e4),r&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Iu(t,e,r,n,i,a){for(var o=null,s=Su(e,r,i,a),u=0,l=n;u<l.length;u+=1){var p=l[u],c=Su(e-p.x,r,i,a)+p.badness;c<=s&&(o=p,s=c)}return{index:t,x:e,priorBreak:o,badness:s}}function zu(t,e,r,n,i,a,o){if("point"!==a)return[];if(!t)return[];for(var s,u=[],l=function(t,e,r,n,i,a){for(var o=0,s=0;s<t.length();s++){var u=t.getSection(s);o+=Au(t.getCharCode(s),u,n,i,e,a)}return o/Math.max(1,Math.ceil(o/r))}(t,e,r,n,i,o),p=t.text.indexOf("")>=0,c=0,h=0;h<t.length();h++){var f=t.getSection(h),y=t.getCharCode(h);if(wu[y]||(c+=Au(y,f,n,i,e,o)),h<t.length()-1){var d=!((s=y)<11904||!(Nn["Bopomofo Extended"](s)||Nn.Bopomofo(s)||Nn["CJK Compatibility Forms"](s)||Nn["CJK Compatibility Ideographs"](s)||Nn["CJK Compatibility"](s)||Nn["CJK Radicals Supplement"](s)||Nn["CJK Strokes"](s)||Nn["CJK Symbols and Punctuation"](s)||Nn["CJK Unified Ideographs Extension A"](s)||Nn["CJK Unified Ideographs"](s)||Nn["Enclosed CJK Letters and Months"](s)||Nn["Halfwidth and Fullwidth Forms"](s)||Nn.Hiragana(s)||Nn["Ideographic Description Characters"](s)||Nn["Kangxi Radicals"](s)||Nn["Katakana Phonetic Extensions"](s)||Nn.Katakana(s)||Nn["Vertical Forms"](s)||Nn["Yi Radicals"](s)||Nn["Yi Syllables"](s)));(_u[y]||d||f.imageName)&&u.push(Iu(h+1,c,l,u,ku(y,t.getCharCode(h+1),d&&p),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Iu(t.length(),c,l,u,0,!0))}function Cu(t){var e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Mu(t,e,r,n,i){if(n||i)for(var a=t[r],o=(t[r].x+a.metrics.advance*a.scale)*n,s=e;s<=r;s++)t[s].x-=o,t[s].y+=i}function Eu(t,e,r,n,i,a){var o,s=t.image;if(s.content){var u=s.content,l=s.pixelRatio||1;o=[u[0]/l,u[1]/l,s.displaySize[0]-u[2]/l,s.displaySize[1]-u[3]/l]}var p,c,h,f,y=e.left*a,d=e.right*a;"width"===r||"both"===r?(f=i[0]+y-n[3],c=i[0]+d+n[1]):c=(f=i[0]+(y+d-s.displaySize[0])/2)+s.displaySize[0];var m=e.top*a,v=e.bottom*a;return"height"===r||"both"===r?(p=i[1]+m-n[0],h=i[1]+v+n[2]):h=(p=i[1]+(m+v-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:p,right:c,bottom:h,left:f,collisionPadding:o}}_u[10]=!0,_u[32]=!0,_u[38]=!0,_u[40]=!0,_u[41]=!0,_u[43]=!0,_u[45]=!0,_u[47]=!0,_u[173]=!0,_u[183]=!0,_u[8203]=!0,_u[8208]=!0,_u[8211]=!0,_u[8231]=!0;var Tu=function(t){function e(e,r,n,i){t.call(this,e,r),this.angle=n,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);function Pu(t,e){var r=e.expression;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new ai(t+1))};if("source"===r.kind)return{kind:"source"};for(var n=r.zoomStops,i=r.interpolationType,a=0;a<n.length&&n[a]<=t;)a++;for(var o=a=Math.max(0,a-1);o<n.length&&n[o]<t+1;)o++;o=Math.min(n.length-1,o);var s=n[a],u=n[o];return"composite"===r.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:u,minSize:r.evaluate(new ai(s)),maxSize:r.evaluate(new ai(u)),interpolationType:i}}function Bu(t,e,r){var n=e.uSize,i=r.lowerSize;return"source"===t.kind?i/128:"composite"===t.kind?qe(i/128,r.upperSize/128,e.uSizeT):n}function Vu(t,e){var r=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType,a=i?l(nr.interpolationFactor(i,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?n=qe(t.minSize,t.maxSize,a):r=a}return{uSizeT:r,uSize:n}}Dn("Anchor",Tu);var Fu=Object.freeze({__proto__:null,getSizeData:Pu,evaluateSizeForFeature:Bu,evaluateSizeForZoom:Vu,SIZE_PACK_FACTOR:128});function Du(t,e,r,n,i){if(void 0===e.segment)return!0;for(var a=e,o=e.segment+1,s=0;s>-r/2;){if(--o<0)return!1;s-=t[o].dist(a),a=t[o]}s+=t[o].dist(t[o+1]),o++;for(var u=[],l=0;s<r/2;){var p=t[o],c=t[o+1];if(!c)return!1;var h=t[o-1].angleTo(p)-p.angleTo(c);for(h=Math.abs((h+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:h}),l+=h;s-u[0].distance>n;)l-=u.shift().angleDelta;if(l>i)return!1;o++,s+=p.dist(c)}return!0}function Lu(t){for(var e=0,r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function Ru(t,e,r){return t?.6*e*r:0}function Ou(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Uu(t,e,r,n,i,a){for(var o=Ru(r,i,a),s=Ou(r,n)*a,u=0,l=Lu(t)/2,p=0;p<t.length-1;p++){var c=t[p],h=t[p+1],f=c.dist(h);if(u+f>l){var y=(l-u)/f,d=qe(c.x,h.x,y),m=qe(c.y,h.y,y),v=new Tu(d,m,h.angleTo(c),p);return v._round(),!o||Du(t,v,s,o,e)?v:void 0}u+=f}}function ju(t,e,r,n,i,a,o,s,u){var l=Ru(n,a,o),p=Ou(n,i),c=p*o,h=0===t[0].x||t[0].x===u||0===t[0].y||t[0].y===u;return e-c<e/4&&(e=c+e/4),function t(e,r,n,i,a,o,s,u,l){for(var p=o/2,c=Lu(e),h=0,f=r-n,y=[],d=0;d<e.length-1;d++){for(var m=e[d],v=e[d+1],g=m.dist(v),x=v.angleTo(m);f+n<h+g;){var b=((f+=n)-h)/g,w=qe(m.x,v.x,b),_=qe(m.y,v.y,b);if(w>=0&&w<l&&_>=0&&_<l&&f-p>=0&&f+p<=c){var A=new Tu(w,_,x,d);A._round(),i&&!Du(e,A,o,i,a)||y.push(A)}}h+=g}return u||y.length||s||(y=t(e,h/2,n,i,a,o,s,!0,l)),y}(t,h?e/2*s%e:(p/2+2*a)*o*s%e,e,l,r,c,h,!1,u)}function qu(t,e,r,n,a){for(var o=[],s=0;s<t.length;s++)for(var u=t[s],l=void 0,p=0;p<u.length-1;p++){var c=u[p],h=u[p+1];c.x<e&&h.x<e||(c.x<e?c=new i(e,c.y+(e-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x<e&&(h=new i(e,c.y+(e-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y<r&&h.y<r||(c.y<r?c=new i(c.x+(r-c.y)/(h.y-c.y)*(h.x-c.x),r)._round():h.y<r&&(h=new i(c.x+(r-c.y)/(h.y-c.y)*(h.x-c.x),r)._round()),c.x>=n&&h.x>=n||(c.x>=n?c=new i(n,c.y+(n-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x>=n&&(h=new i(n,c.y+(n-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y>=a&&h.y>=a||(c.y>=a?c=new i(c.x+(a-c.y)/(h.y-c.y)*(h.x-c.x),a)._round():h.y>=a&&(h=new i(c.x+(a-c.y)/(h.y-c.y)*(h.x-c.x),a)._round()),l&&c.equals(l[l.length-1])||o.push(l=[c]),l.push(h)))))}return o}function Nu(t,e,r,n){var a=[],o=t.image,s=o.pixelRatio,u=o.paddedRect.w-2,l=o.paddedRect.h-2,p=t.right-t.left,c=t.bottom-t.top,h=o.stretchX||[[0,u]],f=o.stretchY||[[0,l]],y=function(t,e){return t+e[1]-e[0]},d=h.reduce(y,0),m=f.reduce(y,0),v=u-d,g=l-m,x=0,b=d,w=0,_=m,A=0,S=v,k=0,I=g;if(o.content&&n){var z=o.content;x=Ku(h,0,z[0]),w=Ku(f,0,z[1]),b=Ku(h,z[0],z[2]),_=Ku(f,z[1],z[3]),A=z[0]-x,k=z[1]-w,S=z[2]-z[0]-b,I=z[3]-z[1]-_}var C=function(n,a,u,l){var h=Zu(n.stretch-x,b,p,t.left),f=Xu(n.fixed-A,S,n.stretch,d),y=Zu(a.stretch-w,_,c,t.top),v=Xu(a.fixed-k,I,a.stretch,m),g=Zu(u.stretch-x,b,p,t.left),z=Xu(u.fixed-A,S,u.stretch,d),C=Zu(l.stretch-w,_,c,t.top),M=Xu(l.fixed-k,I,l.stretch,m),E=new i(h,y),T=new i(g,y),P=new i(g,C),B=new i(h,C),V=new i(f/s,v/s),F=new i(z/s,M/s),D=e*Math.PI/180;if(D){var L=Math.sin(D),R=Math.cos(D),O=[R,-L,L,R];E._matMult(O),T._matMult(O),B._matMult(O),P._matMult(O)}var U=n.stretch+n.fixed,j=a.stretch+a.fixed;return{tl:E,tr:T,bl:B,br:P,tex:{x:o.paddedRect.x+1+U,y:o.paddedRect.y+1+j,w:u.stretch+u.fixed-U,h:l.stretch+l.fixed-j},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:V,pixelOffsetBR:F,minFontScaleX:S/s/p,minFontScaleY:I/s/c,isSDF:r}};if(n&&(o.stretchX||o.stretchY))for(var M=Gu(h,v,d),E=Gu(f,g,m),T=0;T<M.length-1;T++)for(var P=M[T],B=M[T+1],V=0;V<E.length-1;V++)a.push(C(P,E[V],B,E[V+1]));else a.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:u+1},{fixed:0,stretch:l+1}));return a}function Ku(t,e,r){for(var n=0,i=0,a=t;i<a.length;i+=1){var o=a[i];n+=Math.max(e,Math.min(r,o[1]))-Math.max(e,Math.min(r,o[0]))}return n}function Gu(t,e,r){for(var n=[{fixed:-1,stretch:0}],i=0,a=t;i<a.length;i+=1){var o=a[i],s=o[0],u=o[1],l=n[n.length-1];n.push({fixed:s-l.stretch,stretch:l.stretch}),n.push({fixed:s-l.stretch,stretch:l.stretch+(u-s)})}return n.push({fixed:e+1,stretch:r}),n}function Zu(t,e,r,n){return t/e*r+n}function Xu(t,e,r,n){return t-e*r/n}var Ju=function(t,e,r,n,a,o,s,u,l,p){if(this.boxStartIndex=t.length,l){var c=o.top,h=o.bottom,f=o.collisionPadding;f&&(c-=f[1],h+=f[3]);var y=h-c;y>0&&(y=Math.max(10,y),this.circleDiameter=y)}else{var d=o.top*s-u,m=o.bottom*s+u,v=o.left*s-u,g=o.right*s+u,x=o.collisionPadding;if(x&&(v-=x[0]*s,d-=x[1]*s,g+=x[2]*s,m+=x[3]*s),p){var b=new i(v,d),w=new i(g,d),_=new i(v,m),A=new i(g,m),S=p*Math.PI/180;b._rotate(S),w._rotate(S),_._rotate(S),A._rotate(S),v=Math.min(b.x,w.x,_.x,A.x),g=Math.max(b.x,w.x,_.x,A.x),d=Math.min(b.y,w.y,_.y,A.y),m=Math.max(b.y,w.y,_.y,A.y)}t.emplaceBack(e.x,e.y,v,d,g,m,r,n,a)}this.boxEndIndex=t.length},Hu=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Yu),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)};function Yu(t,e){return t<e?-1:t>e?1:0}function $u(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1);for(var n=1/0,a=1/0,o=-1/0,s=-1/0,u=t[0],l=0;l<u.length;l++){var p=u[l];(!l||p.x<n)&&(n=p.x),(!l||p.y<a)&&(a=p.y),(!l||p.x>o)&&(o=p.x),(!l||p.y>s)&&(s=p.y)}var c=Math.min(o-n,s-a),h=c/2,f=new Hu([],Wu);if(0===c)return new i(n,a);for(var y=n;y<o;y+=c)for(var d=a;d<s;d+=c)f.push(new Qu(y+h,d+h,h,t));for(var m=function(t){for(var e=0,r=0,n=0,i=t[0],a=0,o=i.length,s=o-1;a<o;s=a++){var u=i[a],l=i[s],p=u.x*l.y-l.x*u.y;r+=(u.x+l.x)*p,n+=(u.y+l.y)*p,e+=3*p}return new Qu(r/e,n/e,0,t)}(t),v=f.length;f.length;){var g=f.pop();(g.d>m.d||!m.d)&&(m=g,r&&console.log("found best %d after %d probes",Math.round(1e4*g.d)/1e4,v)),g.max-m.d<=e||(f.push(new Qu(g.p.x-(h=g.h/2),g.p.y-h,h,t)),f.push(new Qu(g.p.x+h,g.p.y-h,h,t)),f.push(new Qu(g.p.x-h,g.p.y+h,h,t)),f.push(new Qu(g.p.x+h,g.p.y+h,h,t)),v+=4)}return r&&(console.log("num probes: "+v),console.log("best distance: "+m.d)),m.p}function Wu(t,e){return e.max-t.max}function Qu(t,e,r,n){this.p=new i(t,e),this.h=r,this.d=function(t,e){for(var r=!1,n=1/0,i=0;i<e.length;i++)for(var a=e[i],o=0,s=a.length,u=s-1;o<s;u=o++){var l=a[o],p=a[u];l.y>t.y!=p.y>t.y&&t.x<(p.x-l.x)*(t.y-l.y)/(p.y-l.y)+l.x&&(r=!r),n=Math.min(n,Xa(t,l,p))}return(r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}Hu.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Hu.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Hu.prototype.peek=function(){return this.data[0]},Hu.prototype._up=function(t){for(var e=this.data,r=this.compare,n=e[t];t>0;){var i=t-1>>1,a=e[i];if(r(n,a)>=0)break;e[t]=a,t=i}e[t]=n},Hu.prototype._down=function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var a=1+(t<<1),o=e[a],s=a+1;if(s<this.length&&r(e[s],o)<0&&(a=s,o=e[s]),r(o,i)>=0)break;e[t]=o,t=a}e[t]=i};var tl=Number.POSITIVE_INFINITY;function el(t,e){return e[1]!==tl?function(t,e,r){var n=0,i=0;switch(e=Math.abs(e),r=Math.abs(r),t){case"top-right":case"top-left":case"top":i=r-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-r}switch(t){case"top-right":case"bottom-right":case"right":n=-e;break;case"top-left":case"bottom-left":case"left":n=e}return[n,i]}(t,e[0],e[1]):function(t,e){var r=0,n=0;e<0&&(e=0);var i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":n=i-7;break;case"bottom-right":case"bottom-left":n=7-i;break;case"bottom":n=7-e;break;case"top":n=e-7}switch(t){case"top-right":case"bottom-right":r=-i;break;case"top-left":case"bottom-left":r=i;break;case"left":r=e;break;case"right":r=-e}return[r,n]}(t,e[0])}function rl(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function nl(t,e,r,n,a,o,s,u,l,p,c,h,f,y,d){var m=function(t,e,r,n,a,o,s,u){for(var l=n.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,p=[],c=0,h=e.positionedLines;c<h.length;c+=1)for(var f=h[c],y=0,d=f.positionedGlyphs;y<d.length;y+=1){var m=d[y];if(m.rect){var v=m.rect||{},g=4,x=!0,b=1,w=0,_=(a||u)&&m.vertical,A=m.metrics.advance*m.scale/2;if(u&&e.verticalizable&&(w=f.lineOffset/2-(m.imageName?-(24-m.metrics.width*m.scale)/2:24*(m.scale-1))),m.imageName){var S=s[m.imageName];x=S.sdf,g=1/(b=S.pixelRatio)}var k=a?[m.x+A,m.y]:[0,0],I=a?[0,0]:[m.x+A+r[0],m.y+r[1]-w],z=[0,0];_&&(z=I,I=[0,0]);var C=(m.metrics.left-g)*m.scale-A+I[0],M=(-m.metrics.top-g)*m.scale+I[1],E=C+v.w*m.scale/b,T=M+v.h*m.scale/b,P=new i(C,M),B=new i(E,M),V=new i(C,T),F=new i(E,T);if(_){var D=new i(-A,A- -17),L=-Math.PI/2,R=12-A,O=new i(22-R,-(m.imageName?R:0)),U=new(Function.prototype.bind.apply(i,[null].concat(z)));P._rotateAround(L,D)._add(O)._add(U),B._rotateAround(L,D)._add(O)._add(U),V._rotateAround(L,D)._add(O)._add(U),F._rotateAround(L,D)._add(O)._add(U)}if(l){var j=Math.sin(l),q=Math.cos(l),N=[q,-j,j,q];P._matMult(N),B._matMult(N),V._matMult(N),F._matMult(N)}var K=new i(0,0),G=new i(0,0);p.push({tl:P,tr:B,bl:V,br:F,tex:v,writingMode:e.writingMode,glyphOffset:k,sectionIndex:m.sectionIndex,isSDF:x,pixelOffsetTL:K,pixelOffsetBR:G,minFontScaleX:0,minFontScaleY:0})}}return p}(0,r,u,a,o,s,n,t.allowVerticalPlacement),v=t.textSizeData,g=null;"source"===v.kind?(g=[128*a.layout.get("text-size").evaluate(s,{})])[0]>32640&&_(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===v.kind&&((g=[128*y.compositeTextSizes[0].evaluate(s,{},d),128*y.compositeTextSizes[1].evaluate(s,{},d)])[0]>32640||g[1]>32640)&&_(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,m,g,u,o,s,p,e,l.lineStartIndex,l.lineLength,f,d);for(var x=0,b=c;x<b.length;x+=1)h[b[x]]=t.text.placedSymbolArray.length-1;return 4*m.length}function il(t){for(var e in t)return t[e];return null}function al(t,e,r,n){var i=t.compareText;if(e in i){for(var a=i[e],o=a.length-1;o>=0;o--)if(n.dist(a[o])<r)return!0}else i[e]=[];return i[e].push(n),!1}var ol=vs.VectorTileFeature.types,sl=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ul(t,e,r,n,i,a,o,s,u,l,p,c,h){var f=s?Math.min(32640,Math.round(s[0])):0,y=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,r,Math.round(32*n),Math.round(32*i),a,o,(f<<1)+(u?1:0),y,16*l,16*p,256*c,256*h)}function ll(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r)}function pl(t){for(var e=0,r=t.sections;e<r.length;e+=1)if(Hn(r[e].text))return!0;return!1}var cl=function(t){this.layoutVertexArray=new Ti,this.indexArray=new Ri,this.programConfigurations=t,this.segments=new aa,this.dynamicLayoutVertexArray=new Pi,this.opacityVertexArray=new Bi,this.placedSymbolArray=new $i};cl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},cl.prototype.upload=function(t,e,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ls.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Rs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,sl,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(t))},cl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Dn("SymbolBuffers",cl);var hl=function(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new aa,this.collisionVertexArray=new Li};hl.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Os.members,!0)},hl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Dn("CollisionBuffers",hl);var fl=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=no([]),this.placementViewportMatrix=no([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Pu(this.zoom,e["text-size"]),this.iconSizeData=Pu(this.zoom,e["icon-size"]);var r=this.layers[0].layout,n=r.get("symbol-sort-key"),i=r.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==n.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&(r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")),"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((function(t){return vu[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};fl.prototype.createArrays=function(){this.text=new cl(new Pa(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new cl(new Pa(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new ta,this.lineVertexArray=new ea,this.symbolInstances=new Qi},fl.prototype.calculateGlyphDependencies=function(t,e,r,n,i){for(var a=0;a<t.length;a++)if(e[t.charCodeAt(a)]=!0,(r||n)&&i){var o=Ns[t.charAt(a)];o&&(e[o.charCodeAt(0)]=!0)}},fl.prototype.populate=function(t,e,r){var n=this.layers[0],i=n.layout,a=i.get("text-font"),o=i.get("text-field"),s=i.get("icon-image"),u=("constant"!==o.value.kind||o.value.value instanceof ee&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),l="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,p=i.get("symbol-sort-key");if(this.features=[],u||l){for(var c=e.iconDependencies,h=e.glyphDependencies,f=e.availableImages,y=new ai(this.zoom),d=0,m=t;d<m.length;d+=1){var v=m[d],g=v.feature,x=v.id,b=v.index,w=v.sourceLayerIndex,_=n._featureFilter.needGeometry,A={type:g.type,id:x,properties:g.properties,geometry:_?La(g):[]};if(n._featureFilter.filter(y,A,r)){_||(A.geometry=La(g));var S=void 0;if(u){var k=n.getValueAndResolveTokens("text-field",A,r,f),I=ee.factory(k);pl(I)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ri()||this.hasRTLText&&ii.isParsed())&&(S=qs(I,n,A))}var z=void 0;if(l){var C=n.getValueAndResolveTokens("icon-image",A,r,f);z=C instanceof re?C:re.fromString(C)}if(S||z){var M=this.sortFeaturesByKey?p.evaluate(A,{},r):void 0,E={id:x,text:S,icon:z,index:b,sourceLayerIndex:w,geometry:La(g),properties:g.properties,type:ol[g.type],sortKey:M};if(this.features.push(E),z&&(c[z.name]=!0),S){var T=a.evaluate(A,{},r).join(","),P="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(vu.vertical)>=0;for(var B=0,V=S.sections;B<V.length;B+=1){var F=V[B];if(F.image)c[F.image.name]=!0;else{var D=Kn(S.toString()),L=F.fontStack||T,R=h[L]=h[L]||{};this.calculateGlyphDependencies(F.text,R,P,this.allowVerticalPlacement,D)}}}}}}"line"===i.get("symbol-placement")&&(this.features=function(t){var e={},r={},n=[],i=0;function a(e){n.push(t[e]),i++}function o(t,e,i){var a=r[t];return delete r[t],r[e]=a,n[a].geometry[0].pop(),n[a].geometry[0]=n[a].geometry[0].concat(i[0]),a}function s(t,r,i){var a=e[r];return delete e[r],e[t]=a,n[a].geometry[0].shift(),n[a].geometry[0]=i[0].concat(n[a].geometry[0]),a}function u(t,e,r){var n=r?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}for(var l=0;l<t.length;l++){var p=t[l],c=p.geometry,h=p.text?p.text.toString():null;if(h){var f=u(h,c),y=u(h,c,!0);if(f in r&&y in e&&r[f]!==e[y]){var d=s(f,y,c),m=o(f,y,n[d].geometry);delete e[f],delete r[y],r[u(h,n[m].geometry,!0)]=m,n[d].geometry=null}else f in r?o(f,y,c):y in e?s(f,y,c):(a(l),e[f]=i-1,r[y]=i-1)}else a(l)}return n.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},fl.prototype.update=function(t,e,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r))},fl.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},fl.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},fl.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},fl.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},fl.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},fl.prototype.addToLineVertexArray=function(t,e){var r=this.lineVertexArray.length;if(void 0!==t.segment){for(var n=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),a={},o=t.segment+1;o<e.length;o++)a[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:n},o<e.length-1&&(n+=e[o+1].dist(e[o]));for(var s=t.segment||0;s>=0;s--)a[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=a[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},fl.prototype.addSymbols=function(t,e,r,n,i,a,o,s,u,l,p,c){for(var h=t.indexArray,f=t.layoutVertexArray,y=t.segments.prepareSegment(4*e.length,f,h,a.sortKey),d=this.glyphOffsetArray.length,m=y.vertexLength,v=this.allowVerticalPlacement&&o===vu.vertical?Math.PI/2:0,g=a.text&&a.text.sections,x=0;x<e.length;x++){var b=e[x],w=b.tl,_=b.tr,A=b.bl,S=b.br,k=b.tex,I=b.pixelOffsetTL,z=b.pixelOffsetBR,C=b.minFontScaleX,M=b.minFontScaleY,E=b.glyphOffset,T=b.isSDF,P=b.sectionIndex,B=y.vertexLength,V=E[1];ul(f,s.x,s.y,w.x,V+w.y,k.x,k.y,r,T,I.x,I.y,C,M),ul(f,s.x,s.y,_.x,V+_.y,k.x+k.w,k.y,r,T,z.x,I.y,C,M),ul(f,s.x,s.y,A.x,V+A.y,k.x,k.y+k.h,r,T,I.x,z.y,C,M),ul(f,s.x,s.y,S.x,V+S.y,k.x+k.w,k.y+k.h,r,T,z.x,z.y,C,M),ll(t.dynamicLayoutVertexArray,s,v),h.emplaceBack(B,B+1,B+2),h.emplaceBack(B+1,B+2,B+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(E[0]),x!==e.length-1&&P===e[x+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,a,a.index,{},c,g&&g[P])}t.placedSymbolArray.emplaceBack(s.x,s.y,d,this.glyphOffsetArray.length-d,m,u,l,s.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],o,0,!1,0,p)},fl.prototype._addCollisionDebugVertex=function(t,e,r,n,i,a){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,n,i,Math.round(a.x),Math.round(a.y))},fl.prototype.addCollisionDebugVertices=function(t,e,r,n,a,o,s){var u=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),l=u.vertexLength,p=a.layoutVertexArray,c=a.collisionVertexArray,h=s.anchorX,f=s.anchorY;this._addCollisionDebugVertex(p,c,o,h,f,new i(t,e)),this._addCollisionDebugVertex(p,c,o,h,f,new i(r,e)),this._addCollisionDebugVertex(p,c,o,h,f,new i(r,n)),this._addCollisionDebugVertex(p,c,o,h,f,new i(t,n)),u.vertexLength+=4;var y=a.indexArray;y.emplaceBack(l,l+1),y.emplaceBack(l+1,l+2),y.emplaceBack(l+2,l+3),y.emplaceBack(l+3,l),u.primitiveLength+=4},fl.prototype.addDebugCollisionBoxes=function(t,e,r,n){for(var i=t;i<e;i++){var a=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(a.x1,a.y1,a.x2,a.y2,n?this.textCollisionBox:this.iconCollisionBox,a.anchorPoint,r)}},fl.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hl(Fi,Us.members,Ki),this.iconCollisionBox=new hl(Fi,Us.members,Ki);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},fl.prototype._deserializeCollisionBoxesForSymbol=function(t,e,r,n,i,a,o,s,u){for(var l={},p=e;p<r;p++){var c=t.get(p);l.textBox={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,anchorPointX:c.anchorPointX,anchorPointY:c.anchorPointY},l.textFeatureIndex=c.featureIndex;break}for(var h=n;h<i;h++){var f=t.get(h);l.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},l.verticalTextFeatureIndex=f.featureIndex;break}for(var y=a;y<o;y++){var d=t.get(y);l.iconBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},l.iconFeatureIndex=d.featureIndex;break}for(var m=s;m<u;m++){var v=t.get(m);l.verticalIconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},l.verticalIconFeatureIndex=v.featureIndex;break}return l},fl.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}},fl.prototype.hasTextData=function(){return this.text.segments.get().length>0},fl.prototype.hasIconData=function(){return this.icon.segments.get().length>0},fl.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},fl.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},fl.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},fl.prototype.addIndicesForPlacedSymbol=function(t,e){for(var r=t.placedSymbolArray.get(e),n=r.vertexStartIndex+4*r.numGlyphs,i=r.vertexStartIndex;i<n;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)},fl.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),r=Math.cos(t),n=[],i=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);n.push(0|Math.round(e*s.anchorX+r*s.anchorY)),i.push(s.featureIndex)}return a.sort((function(t,e){return n[t]-n[e]||i[e]-i[t]})),a},fl.prototype.addToSortKeyRanges=function(t,e){var r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===e?r.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},fl.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var r=0,n=this.symbolInstanceIndexes;r<n.length;r+=1){var i=this.symbolInstances.get(n[r]);this.featureSortOrder.push(i.featureIndex),[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((function(t,r,n){t>=0&&n.indexOf(t)===r&&e.addIndicesForPlacedSymbol(e.text,t)})),i.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,i.verticalPlacedTextSymbolIndex),i.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.placedIconSymbolIndex),i.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Dn("SymbolBucket",fl,{omit:["layers","collisionBoxArray","features","compareText"]}),fl.MAX_GLYPHS=65535,fl.addDynamicAttributes=ll;var yl=new xi({"symbol-placement":new yi(zt.layout_symbol["symbol-placement"]),"symbol-spacing":new yi(zt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yi(zt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new di(zt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yi(zt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yi(zt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new yi(zt.layout_symbol["icon-ignore-placement"]),"icon-optional":new yi(zt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yi(zt.layout_symbol["icon-rotation-alignment"]),"icon-size":new di(zt.layout_symbol["icon-size"]),"icon-text-fit":new yi(zt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yi(zt.layout_symbol["icon-text-fit-padding"]),"icon-image":new di(zt.layout_symbol["icon-image"]),"icon-rotate":new di(zt.layout_symbol["icon-rotate"]),"icon-padding":new yi(zt.layout_symbol["icon-padding"]),"icon-keep-upright":new yi(zt.layout_symbol["icon-keep-upright"]),"icon-offset":new di(zt.layout_symbol["icon-offset"]),"icon-anchor":new di(zt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yi(zt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yi(zt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yi(zt.layout_symbol["text-rotation-alignment"]),"text-field":new di(zt.layout_symbol["text-field"]),"text-font":new di(zt.layout_symbol["text-font"]),"text-size":new di(zt.layout_symbol["text-size"]),"text-max-width":new di(zt.layout_symbol["text-max-width"]),"text-line-height":new yi(zt.layout_symbol["text-line-height"]),"text-letter-spacing":new di(zt.layout_symbol["text-letter-spacing"]),"text-justify":new di(zt.layout_symbol["text-justify"]),"text-radial-offset":new di(zt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yi(zt.layout_symbol["text-variable-anchor"]),"text-anchor":new di(zt.layout_symbol["text-anchor"]),"text-max-angle":new yi(zt.layout_symbol["text-max-angle"]),"text-writing-mode":new yi(zt.layout_symbol["text-writing-mode"]),"text-rotate":new di(zt.layout_symbol["text-rotate"]),"text-padding":new yi(zt.layout_symbol["text-padding"]),"text-keep-upright":new yi(zt.layout_symbol["text-keep-upright"]),"text-transform":new di(zt.layout_symbol["text-transform"]),"text-offset":new di(zt.layout_symbol["text-offset"]),"text-allow-overlap":new yi(zt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new yi(zt.layout_symbol["text-ignore-placement"]),"text-optional":new yi(zt.layout_symbol["text-optional"])}),dl={paint:new xi({"icon-opacity":new di(zt.paint_symbol["icon-opacity"]),"icon-color":new di(zt.paint_symbol["icon-color"]),"icon-halo-color":new di(zt.paint_symbol["icon-halo-color"]),"icon-halo-width":new di(zt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new di(zt.paint_symbol["icon-halo-blur"]),"icon-translate":new yi(zt.paint_symbol["icon-translate"]),"icon-translate-anchor":new yi(zt.paint_symbol["icon-translate-anchor"]),"text-opacity":new di(zt.paint_symbol["text-opacity"]),"text-color":new di(zt.paint_symbol["text-color"],{runtimeType:Ot,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new di(zt.paint_symbol["text-halo-color"]),"text-halo-width":new di(zt.paint_symbol["text-halo-width"]),"text-halo-blur":new di(zt.paint_symbol["text-halo-blur"]),"text-translate":new yi(zt.paint_symbol["text-translate"]),"text-translate-anchor":new yi(zt.paint_symbol["text-translate-anchor"])}),layout:yl},ml=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Ft,this.defaultValue=t};ml.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},ml.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},ml.prototype.outputDefined=function(){return!1},ml.prototype.serialize=function(){return null},Dn("FormatSectionOverride",ml,{omit:["defaultValue"]});var vl=function(t){function e(e){t.call(this,e,dl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,r){if(t.prototype.recalculate.call(this,e,r),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var n=this.layout.get("text-writing-mode");if(n){for(var i=[],a=0,o=n;a<o.length;a+=1){var s=o[a];i.indexOf(s)<0&&i.push(s)}this.layout._values["text-writing-mode"]=i}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,r,n){var i=this.layout.get(t).evaluate(e,{},r,n),a=this._unevaluatedLayout._values[t];return a.isDataDriven()||Nr(a.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,r){return r in t?String(t[r]):""}))}(e.properties,i)},e.prototype.createBucket=function(t){return new fl(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,r=dl.paint.overridableProperties;t<r.length;t+=1){var n=r[t];if(e.hasPaintOverride(this.layout,n)){var i,a=this.paint.get(n),o=new ml(a),s=new qr(o,a.property.specification);i="constant"===a.value.kind||"source"===a.value.kind?new Gr("source",s):new Zr("composite",s,a.value.zoomStops,a.value._interpolationType),this.paint._values[n]=new hi(a.property,i,a.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,r,n){return!(!this.layout||r.isDataDriven()||n.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var r=t.get("text-field"),n=dl.paint.properties[e],i=!1,a=function(t){for(var e=0,r=t;e<r.length;e+=1)if(n.overrides&&n.overrides.hasOverride(r[e]))return void(i=!0)};if("constant"===r.value.kind&&r.value.value instanceof ee)a(r.value.value.sections);else if("source"===r.value.kind){var o=function(t){i||(t instanceof se&&ae(t.value)===Nt?a(t.value.sections):t instanceof ce?a(t.sections):t.eachChild(o))},s=r.value;s._styleExpression&&o(s._styleExpression.expression)}return i},e}(bi),gl={paint:new xi({"background-color":new yi(zt.paint_background["background-color"]),"background-pattern":new vi(zt.paint_background["background-pattern"]),"background-opacity":new yi(zt.paint_background["background-opacity"])})},xl=function(t){function e(e){t.call(this,e,gl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(bi),bl={paint:new xi({"raster-opacity":new yi(zt.paint_raster["raster-opacity"]),"raster-hue-rotate":new yi(zt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yi(zt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yi(zt.paint_raster["raster-brightness-max"]),"raster-saturation":new yi(zt.paint_raster["raster-saturation"]),"raster-contrast":new yi(zt.paint_raster["raster-contrast"]),"raster-resampling":new yi(zt.paint_raster["raster-resampling"]),"raster-fade-duration":new yi(zt.paint_raster["raster-fade-duration"])})},wl=function(t){function e(e){t.call(this,e,bl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(bi),_l=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(bi),Al={circle:uo,heatmap:xo,hillshade:wo,fill:ss,"fill-extrusion":Ss,line:Fs,symbol:vl,background:xl,raster:wl},Sl=o.HTMLImageElement,kl=o.HTMLCanvasElement,Il=o.HTMLVideoElement,zl=o.ImageData,Cl=o.ImageBitmap,Ml=function(t,e,r,n){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,n)};Ml.prototype.update=function(t,e,r){var n=t.width,i=t.height,a=!(this.size&&this.size[0]===n&&this.size[1]===i||r),o=this.context,s=o.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),a)this.size=[n,i],t instanceof Sl||t instanceof kl||t instanceof Il||t instanceof zl||Cl&&t instanceof Cl?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,n,i,0,this.format,s.UNSIGNED_BYTE,t.data);else{var u=r||{x:0,y:0},l=u.x,p=u.y;t instanceof Sl||t instanceof kl||t instanceof Il||t instanceof zl||Cl&&t instanceof Cl?s.texSubImage2D(s.TEXTURE_2D,0,l,p,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,l,p,n,i,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Ml.prototype.bind=function(t,e,r){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),r!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)},Ml.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ml.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var El=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};El.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},El.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Tl=function(t,e,r){this.target=t,this.parent=e,this.mapId=r,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},m(["receive","process"],this),this.invoker=new El(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=k()?t:o};function Pl(t,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}Tl.prototype.send=function(t,e,r,n,i){var a=this;void 0===i&&(i=!1);var o=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(this.callbacks[o]=r);var s=C(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:t,hasCallback:!!r,targetMapId:n,mustQueue:i,sourceMapId:this.mapId,data:Un(e,s)},s),{cancel:function(){r&&delete a.callbacks[o],a.target.postMessage({id:o,type:"<cancel>",targetMapId:n,sourceMapId:a.mapId})}}},Tl.prototype.receive=function(t){var e=t.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[r];var n=this.cancelCallbacks[r];delete this.cancelCallbacks[r],n&&n()}else k()||e.mustQueue?(this.tasks[r]=e,this.taskQueue.push(r),this.invoker.trigger()):this.processTask(r,e)},Tl.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Tl.prototype.processTask=function(t,e){var r=this;if("<response>"===e.type){var n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(jn(e.error)):n(null,jn(e.data)))}else{var i=!1,a=C(this.globalScope)?void 0:[],o=e.hasCallback?function(e,n){i=!0,delete r.cancelCallbacks[t],r.target.postMessage({id:t,type:"<response>",sourceMapId:r.mapId,error:e?Un(e):null,data:Un(n,a)},a)}:function(t){i=!0},s=null,u=jn(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,u,o);else if(this.parent.getWorkerSource){var l=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,l[0],u.source)[l[1]](u,o)}else o(new Error("Could not find function "+e.type));!i&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Tl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Bl=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Bl.prototype.setNorthEast=function(t){return this._ne=t instanceof Vl?new Vl(t.lng,t.lat):Vl.convert(t),this},Bl.prototype.setSouthWest=function(t){return this._sw=t instanceof Vl?new Vl(t.lng,t.lat):Vl.convert(t),this},Bl.prototype.extend=function(t){var e,r,n=this._sw,i=this._ne;if(t instanceof Vl)e=t,r=t;else{if(!(t instanceof Bl))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Bl.convert(t)):this.extend(Vl.convert(t)):this;if(r=t._ne,!(e=t._sw)||!r)return this}return n||i?(n.lng=Math.min(e.lng,n.lng),n.lat=Math.min(e.lat,n.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new Vl(e.lng,e.lat),this._ne=new Vl(r.lng,r.lat)),this},Bl.prototype.getCenter=function(){return new Vl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Bl.prototype.getSouthWest=function(){return this._sw},Bl.prototype.getNorthEast=function(){return this._ne},Bl.prototype.getNorthWest=function(){return new Vl(this.getWest(),this.getNorth())},Bl.prototype.getSouthEast=function(){return new Vl(this.getEast(),this.getSouth())},Bl.prototype.getWest=function(){return this._sw.lng},Bl.prototype.getSouth=function(){return this._sw.lat},Bl.prototype.getEast=function(){return this._ne.lng},Bl.prototype.getNorth=function(){return this._ne.lat},Bl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Bl.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Bl.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Bl.prototype.contains=function(t){var e=Vl.convert(t),r=e.lng,n=e.lat,i=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&i},Bl.convert=function(t){return!t||t instanceof Bl?t:new Bl(t)};var Vl=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Vl.prototype.wrap=function(){return new Vl(p(this.lng,-180,180),this.lat)},Vl.prototype.toArray=function(){return[this.lng,this.lat]},Vl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Vl.prototype.distanceTo=function(t){var e=Math.PI/180,r=this.lat*e,n=t.lat*e,i=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(i,1))},Vl.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return new Bl(new Vl(this.lng-r,this.lat-e),new Vl(this.lng+r,this.lat+e))},Vl.convert=function(t){if(t instanceof Vl)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Vl(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Vl(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Fl=2*Math.PI*6371008.8;function Dl(t){return Fl*Math.cos(t*Math.PI/180)}function Ll(t){return(180+t)/360}function Rl(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Ol(t,e){return t/Dl(e)}function Ul(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var jl=function(t,e,r){void 0===r&&(r=0),this.x=+t,this.y=+e,this.z=+r};jl.fromLngLat=function(t,e){void 0===e&&(e=0);var r=Vl.convert(t);return new jl(Ll(r.lng),Rl(r.lat),Ol(e,r.lat))},jl.prototype.toLngLat=function(){return new Vl(360*this.x-180,Ul(this.y))},jl.prototype.toAltitude=function(){return this.z*Dl(Ul(this.y))},jl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Fl*(t=Ul(this.y),1/Math.cos(t*Math.PI/180));var t};var ql=function(t,e,r){this.z=t,this.x=e,this.y=r,this.key=Gl(0,t,t,e,r)};ql.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},ql.prototype.url=function(t,e){var r,n,i,a,o,s=(n=this.y,i=this.z,a=Pl(256*(r=this.x),256*(n=Math.pow(2,i)-n-1),i),o=Pl(256*(r+1),256*(n+1),i),a[0]+","+a[1]+","+o[0]+","+o[1]),u=function(t,e,r){for(var n,i="",a=t;a>0;a--)i+=(e&(n=1<<a-1)?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},ql.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new i(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},ql.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Nl=function(t,e){this.wrap=t,this.canonical=e,this.key=Gl(t,e.z,e.z,e.x,e.y)},Kl=function(t,e,r,n,i){this.overscaledZ=t,this.wrap=e,this.canonical=new ql(r,+n,+i),this.key=Gl(e,t,r,n,i)};function Gl(t,e,r,n,i){(t*=2)<0&&(t=-1*t-1);var a=1<<r;return(a*a*t+a*i+n).toString(36)+r.toString(36)+e.toString(36)}Kl.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Kl.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Kl(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Kl(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Kl.prototype.calculateScaledKey=function(t,e){var r=this.canonical.z-t;return t>this.canonical.z?Gl(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Gl(this.wrap*+e,t,t,this.canonical.x>>r,this.canonical.y>>r)},Kl.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Kl.prototype.children=function(t){if(this.overscaledZ>=t)return[new Kl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new Kl(e,this.wrap,e,r,n),new Kl(e,this.wrap,e,r+1,n),new Kl(e,this.wrap,e,r,n+1),new Kl(e,this.wrap,e,r+1,n+1)]},Kl.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Kl.prototype.wrapped=function(){return new Kl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Kl.prototype.unwrapTo=function(t){return new Kl(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Kl.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Kl.prototype.toUnwrapped=function(){return new Nl(this.wrap,this.canonical)},Kl.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Kl.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new jl(t.x-this.wrap,t.y))},Dn("CanonicalTileID",ql),Dn("OverscaledTileID",Kl,{omit:["posMatrix"]});var Zl=function(t,e,r){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return _('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var n=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=r||"mapbox";for(var i=0;i<n;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(n,i)]=this.data[this._idx(n-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,n)]=this.data[this._idx(i,n-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(n,-1)]=this.data[this._idx(n-1,0)],this.data[this._idx(-1,n)]=this.data[this._idx(0,n-1)],this.data[this._idx(n,n)]=this.data[this._idx(n-1,n-1)]};Zl.prototype.get=function(t,e){var r=new Uint8Array(this.data.buffer),n=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(r[n],r[n+1],r[n+2])},Zl.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Zl.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Zl.prototype._unpackMapbox=function(t,e,r){return(256*t*256+256*e+r)/10-1e4},Zl.prototype._unpackTerrarium=function(t,e,r){return 256*t+e+r/256-32768},Zl.prototype.getPixels=function(){return new mo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Zl.prototype.backfillBorder=function(t,e,r){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var n=e*this.dim,i=e*this.dim+this.dim,a=r*this.dim,o=r*this.dim+this.dim;switch(e){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:a=o-1;break;case 1:o=a+1}for(var s=-e*this.dim,u=-r*this.dim,l=a;l<o;l++)for(var p=n;p<i;p++)this.data[this._idx(p,l)]=t.data[this._idx(p+s,l+u)]},Dn("DEMData",Zl);var Xl=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r}};Xl.prototype.encode=function(t){return this._stringToNumber[t]},Xl.prototype.decode=function(t){return this._numberToString[t]};var Jl=function(t,e,r,n,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=r,t._y=n,this.properties=t.properties,this.id=i},Hl={geometry:{configurable:!0}};Hl.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Hl.geometry.set=function(t){this._geometry=t},Jl.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Jl.prototype,Hl);var Yl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Yl.prototype.updateState=function(t,e,r){var n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},c(this.stateChanges[t][n],r),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==n&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][n])for(var a in this.deletedStates[t][n]={},this.state[t][n])r[a]||(this.deletedStates[t][n][a]=null);else for(var o in r)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][o]&&delete this.deletedStates[t][n][o]},Yl.prototype.removeFeatureState=function(t,e,r){if(null!==this.deletedStates[t]){var n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&void 0!==e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][r]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(r in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][r]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}},Yl.prototype.getState=function(t,e){var r=String(e),n=c({},(this.state[t]||{})[r],(this.stateChanges[t]||{})[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var i=this.deletedStates[t][e];if(null===i)return{};for(var a in i)delete n[a]}return n},Yl.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Yl.prototype.coalesceChanges=function(t,e){var r={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var i={};for(var a in this.stateChanges[n])this.state[n][a]||(this.state[n][a]={}),c(this.state[n][a],this.stateChanges[n][a]),i[a]=this.state[n][a];r[n]=i}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var u in this.state[o])s[u]={},this.state[o][u]={};else for(var l in this.deletedStates[o]){if(null===this.deletedStates[o][l])this.state[o][l]={};else for(var p=0,h=Object.keys(this.deletedStates[o][l]);p<h.length;p+=1)delete this.state[o][l][h[p]];s[l]=this.state[o][l]}r[o]=r[o]||{},c(r[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var f in t)t[f].setFeatureState(r,e)};var $l=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Tn(8192,16,0),this.grid3D=new Tn(8192,16,0),this.featureIndexArray=new na,this.promoteId=e};function Wl(t,e,r,n,i){return g(t,(function(t,a){var o=e instanceof fi?e.get(a):null;return o&&o.evaluate?o.evaluate(r,n,i):o}))}function Ql(t){for(var e=1/0,r=1/0,n=-1/0,i=-1/0,a=0,o=t;a<o.length;a+=1){var s=o[a];e=Math.min(e,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),i=Math.max(i,s.y)}return{minX:e,minY:r,maxX:n,maxY:i}}function tp(t,e){return e-t}$l.prototype.insert=function(t,e,r,n,i,a){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i);for(var s=a?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],p=[1/0,1/0,-1/0,-1/0],c=0;c<l.length;c++){var h=l[c];p[0]=Math.min(p[0],h.x),p[1]=Math.min(p[1],h.y),p[2]=Math.max(p[2],h.x),p[3]=Math.max(p[3],h.y)}p[0]<8192&&p[1]<8192&&p[2]>=0&&p[3]>=0&&s.insert(o,p[0],p[1],p[2],p[3])}},$l.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new vs.VectorTile(new Zs(this.rawTileData)).layers,this.sourceLayerCoder=new Xl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},$l.prototype.query=function(t,e,r,n){var a=this;this.loadVTLayers();for(var o=t.params||{},s=8192/t.tileSize/t.scale,u=nn(o.filter),l=t.queryGeometry,p=t.queryPadding*s,c=Ql(l),h=this.grid.query(c.minX-p,c.minY-p,c.maxX+p,c.maxY+p),f=Ql(t.cameraQueryGeometry),d=0,m=this.grid3D.query(f.minX-p,f.minY-p,f.maxX+p,f.maxY+p,(function(e,r,n,a){return function(t,e,r,n,a){for(var o=0,s=t;o<s.length;o+=1){var u=s[o];if(e<=u.x&&r<=u.y&&n>=u.x&&a>=u.y)return!0}var l=[new i(e,r),new i(e,a),new i(n,a),new i(n,r)];if(t.length>2)for(var p=0,c=l;p<c.length;p+=1)if(Ha(t,c[p]))return!0;for(var h=0;h<t.length-1;h++)if(Ya(t[h],t[h+1],l))return!0;return!1}(t.cameraQueryGeometry,e-p,r-p,n+p,a+p)}));d<m.length;d+=1)h.push(m[d]);h.sort(tp);for(var v,g={},x=function(i){var p=h[i];if(p!==v){v=p;var c=a.featureIndexArray.get(p),f=null;a.loadMatchingFeature(g,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,u,o.layers,o.availableImages,e,r,n,(function(e,r,n){return f||(f=La(e)),r.queryIntersectsFeature(l,e,n,f,a.z,t.transform,s,t.pixelPosMatrix)}))}},b=0;b<h.length;b++)x(b);return g},$l.prototype.loadMatchingFeature=function(t,e,r,n,i,a,o,s,u,l,p){var c=this.bucketLayerIDs[e];if(!a||function(t,e){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!1}(a,c)){var h=this.sourceLayerCoder.decode(r),f=this.vtLayers[h].feature(n);if(i.filter(new ai(this.tileID.overscaledZ),f))for(var y=this.getId(f,h),d=0;d<c.length;d++){var m=c[d];if(!(a&&a.indexOf(m)<0)){var v=s[m];if(v){var g={};void 0!==y&&l&&(g=l.getState(v.sourceLayer||"_geojsonTileLayer",y));var x=u[m];x.paint=Wl(x.paint,v.paint,f,g,o),x.layout=Wl(x.layout,v.layout,f,g,o);var b=!p||p(f,v,g);if(b){var w=new Jl(f,this.z,this.x,this.y,y);w.layer=x;var _=t[m];void 0===_&&(_=t[m]=[]),_.push({featureIndex:n,feature:w,intersectionZ:b})}}}}}},$l.prototype.lookupSymbolFeatures=function(t,e,r,n,i,a,o,s){var u={};this.loadVTLayers();for(var l=nn(i),p=0,c=t;p<c.length;p+=1)this.loadMatchingFeature(u,r,n,c[p],l,a,o,s,e);return u},$l.prototype.hasLayer=function(t){for(var e=0,r=this.bucketLayerIDs;e<r.length;e+=1)for(var n=0,i=r[e];n<i.length;n+=1)if(t===i[n])return!0;return!1},$l.prototype.getId=function(t,e){var r=t.id;return this.promoteId&&"boolean"==typeof(r=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(r=Number(r)),r},Dn("FeatureIndex",$l,{omit:["rawTileData","sourceLayerCoder"]});var ep=function(t,e){this.tileID=t,this.uid=f(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ep.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<L.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},ep.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ep.prototype.loadVectorData=function(t,e,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var n in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var r={};if(!e)return r;for(var n=function(){var t=a[i],n=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==n.length){t.layers=n,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return n.filter((function(e){return e.id===t}))[0]})));for(var o=0,s=n;o<s.length;o+=1)r[s[o].id]=t}},i=0,a=t;i<a.length;i+=1)n();return r}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[n];if(i instanceof fl){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a in this.buckets){var o=this.buckets[a];if(o instanceof fl&&o.hasRTLText){this.hasRTLText=!0,ii.isLoading()||ii.isLoaded()||"deferred"!==ri()||ni();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Hi},ep.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ep.prototype.getBucket=function(t){return this.buckets[t.id]},ep.prototype.upload=function(t){for(var e in this.buckets){var r=this.buckets[e];r.uploadPending()&&r.upload(t)}var n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ml(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ml(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},ep.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},ep.prototype.queryRenderedFeatures=function(t,e,r,n,i,a,o,s,u,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:i,scale:a,tileSize:this.tileSize,pixelPosMatrix:l,transform:s,params:o,queryPadding:this.queryPadding*u},t,e,r):{}},ep.prototype.querySourceFeatures=function(t,e){var r=this.latestFeatureIndex;if(r&&r.rawTileData){var n=r.loadVTLayers(),i=e?e.sourceLayer:"",a=n._geojsonTileLayer||n[i];if(a)for(var o=nn(e&&e.filter),s=this.tileID.canonical,u=s.z,l=s.x,p=s.y,c={z:u,x:l,y:p},h=0;h<a.length;h++){var f=a.feature(h);if(o.filter(new ai(this.tileID.overscaledZ),f)){var y=r.getId(f,i),d=new Jl(f,u,l,p,y);d.tile=c,t.push(d)}}}},ep.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ep.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ep.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var r=I(t.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),i=!1;if(this.expirationTime>n)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var a=this.expirationTime-e;a?this.expirationTime=n+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ep.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ep.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var r=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets)if(e.style.hasLayer(n)){var i=this.buckets[n],a=i.layers[0].sourceLayer||"_geojsonTileLayer",o=r[a],s=t[a];if(o&&s&&0!==Object.keys(s).length){i.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=e&&e.style&&e.style.getLayer(n);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(i)))}}}},ep.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ep.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<L.now()},ep.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ep.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=L.now()+t},ep.prototype.setDependencies=function(t,e){for(var r={},n=0,i=e;n<i.length;n+=1)r[i[n]]=!0;this.dependencies[t]=r},ep.prototype.hasDependency=function(t,e){for(var r=0,n=t;r<n.length;r+=1){var i=this.dependencies[n[r]];if(i)for(var a=0,o=e;a<o.length;a+=1)if(i[o[a]])return!0}return!1};var rp=o.performance,np=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},rp.mark(this._marks.start)};np.prototype.finish=function(){rp.mark(this._marks.end);var t=rp.getEntriesByName(this._marks.measure);return 0===t.length&&(rp.measure(this._marks.measure,this._marks.start,this._marks.end),t=rp.getEntriesByName(this._marks.measure),rp.clearMarks(this._marks.start),rp.clearMarks(this._marks.end),rp.clearMeasures(this._marks.measure)),t},t.Actor=Tl,t.AlphaImage=yo,t.CanonicalTileID=ql,t.CollisionBoxArray=Hi,t.Color=Wt,t.DEMData=Zl,t.DataConstantProperty=yi,t.DictionaryCoder=Xl,t.EXTENT=8192,t.ErrorEvent=kt,t.EvaluationParameters=ai,t.Event=St,t.Evented=It,t.FeatureIndex=$l,t.FillBucket=is,t.FillExtrusionBucket=ws,t.ImageAtlas=mu,t.ImagePosition=yu,t.LineBucket=Ts,t.LngLat=Vl,t.LngLatBounds=Bl,t.MercatorCoordinate=jl,t.ONE_EM=24,t.OverscaledTileID=Kl,t.Point=i,t.Point$1=i,t.Properties=xi,t.Protobuf=Zs,t.RGBAImage=mo,t.RequestManager=K,t.RequestPerformance=np,t.ResourceType=ft,t.SegmentVector=aa,t.SourceFeatureState=Yl,t.StructArrayLayout1ui2=Gi,t.StructArrayLayout2f1f2i16=Di,t.StructArrayLayout2i4=Ii,t.StructArrayLayout3ui6=Ri,t.StructArrayLayout4i8=zi,t.SymbolBucket=fl,t.Texture=Ml,t.Tile=ep,t.Transitionable=ui,t.Uniform1f=ga,t.Uniform1i=va,t.Uniform2f=xa,t.Uniform3f=ba,t.Uniform4f=wa,t.UniformColor=_a,t.UniformMatrix4f=Sa,t.UnwrappedTileID=Nl,t.ValidationError=Ct,t.WritingMode=vu,t.ZoomHistory=qn,t.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},t.addDynamicAttributes=ll,t.asyncAll=function(t,e,r){if(!t.length)return r(null,[]);var n=t.length,i=new Array(t.length),a=null;t.forEach((function(t,o){e(t,(function(t,e){t&&(a=t),i[o]=e,0==--n&&r(a,i)}))}))},t.bezier=s,t.bindAll=m,t.browser=L,t.cacheEntryPossiblyAdded=function(t){++ct>st&&(t.getActor().send("enforceCacheSizeLimit",ot),ct=0)},t.clamp=l,t.clearTileCache=function(t){var e=o.caches.delete("mapbox-tiles");t&&e.catch(t).then((function(){return t()}))},t.clipLine=qu,t.clone=function(t){var e=new ro(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=b,t.clone$2=function(t){var e=new ro(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=js,t.config=R,t.create=function(){var t=new ro(16);return ro!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new ro(9);return ro!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new ro(4);return ro!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Kr,t.createLayout=Si,t.createStyleLayer=function(t){return"custom"===t.type?new _l(t):new Al[t.type](t)},t.cross=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],u=r[2];return t[0]=i*u-a*s,t[1]=a*o-n*u,t[2]=n*s-i*o,t},t.deepEqual=function t(e,r){if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(var n=0;n<e.length;n++)if(!t(e[n],r[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==r){if("object"!=typeof r)return!1;if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var i in e)if(!t(e[i],r[i]))return!1;return!0}return e===r},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=u,t.emitValidationErrors=En,t.endsWith=v,t.enforceCacheSizeLimit=function(t){ut(),Q&&Q.then((function(e){e.keys().then((function(r){for(var n=0;n<r.length-t;n++)e.delete(r[n])}))}))},t.evaluateSizeForFeature=Bu,t.evaluateSizeForZoom=Vu,t.evaluateVariableOffset=el,t.evented=ei,t.extend=c,t.featureFilter=nn,t.filterObject=x,t.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Cu,t.getAnchorJustification=rl,t.getArrayBuffer=xt,t.getImage=wt,t.getJSON=function(t,e){return gt(c(t,{type:"json"}),e)},t.getRTLTextPluginStatus=ri,t.getReferrer=dt,t.getVideo=function(t,e){var r,n,i=o.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var a=0;a<t.length;a++){var s=o.document.createElement("source");r=t[a],n=void 0,(n=o.document.createElement("a")).href=r,(n.protocol!==o.document.location.protocol||n.host!==o.document.location.host)&&(i.crossOrigin="Anonymous"),s.src=t[a],i.appendChild(s)}return{cancel:function(){}}},t.identity=no,t.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],p=e[8],c=e[9],h=e[10],f=e[11],y=e[12],d=e[13],m=e[14],v=e[15],g=r*s-n*o,x=r*u-i*o,b=r*l-a*o,w=n*u-i*s,_=n*l-a*s,A=i*l-a*u,S=p*d-c*y,k=p*m-h*y,I=p*v-f*y,z=c*m-h*d,C=c*v-f*d,M=h*v-f*m,E=g*M-x*C+b*z+w*I-_*k+A*S;return E?(t[0]=(s*M-u*C+l*z)*(E=1/E),t[1]=(i*C-n*M-a*z)*E,t[2]=(d*A-m*_+v*w)*E,t[3]=(h*_-c*A-f*w)*E,t[4]=(u*I-o*M-l*k)*E,t[5]=(r*M-i*I+a*k)*E,t[6]=(m*b-y*A-v*x)*E,t[7]=(p*A-h*b+f*x)*E,t[8]=(o*C-s*I+l*S)*E,t[9]=(n*I-r*C-a*S)*E,t[10]=(y*_-d*b+v*g)*E,t[11]=(c*b-p*_-f*g)*E,t[12]=(s*k-o*z-u*S)*E,t[13]=(r*z-n*k+i*S)*E,t[14]=(d*x-y*w-m*g)*E,t[15]=(p*w-c*x+h*g)*E,t):null},t.isChar=Nn,t.isMapboxURL=G,t.keysDifference=function(t,e){var r=[];for(var n in t)n in e||r.push(n);return r},t.makeRequest=gt,t.mapObject=g,t.mercatorXfromLng=Ll,t.mercatorYfromLat=Rl,t.mercatorZfromAltitude=Ol,t.mul=oo,t.multiply=io,t.mvt=vs,t.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t},t.number=qe,t.offscreenCanvasSupported=ht,t.ortho=function(t,e,r,n,i,a,o){var s=1/(e-r),u=1/(n-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(o+a)*l,t[15]=1,t},t.parseGlyphPBF=function(t){return new Zs(t).readFields(pu,[])},t.pbf=Zs,t.performSymbolLayout=function(t,e,r,n,i,a,o){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,l={};if("composite"===t.textSizeData.kind){var p=t.textSizeData,c=p.maxZoom;l.compositeTextSizes=[u["text-size"].possiblyEvaluate(new ai(p.minZoom),o),u["text-size"].possiblyEvaluate(new ai(c),o)]}if("composite"===t.iconSizeData.kind){var h=t.iconSizeData,f=h.maxZoom;l.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new ai(h.minZoom),o),u["icon-size"].possiblyEvaluate(new ai(f),o)]}l.layoutTextSize=u["text-size"].possiblyEvaluate(new ai(t.zoom+1),o),l.layoutIconSize=u["icon-size"].possiblyEvaluate(new ai(t.zoom+1),o),l.textMaxSize=u["text-size"].possiblyEvaluate(new ai(18));for(var y=24*s.get("text-line-height"),d="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),m=s.get("text-keep-upright"),v=s.get("text-size"),g=function(){var a=b[x],u=s.get("text-font").evaluate(a,{},o).join(","),p=v.evaluate(a,{},o),c=l.layoutTextSize.evaluate(a,{},o),h=l.layoutIconSize.evaluate(a,{},o),f={horizontal:{},vertical:void 0},g=a.text,w=[0,0];if(g){var A=g.toString(),S=24*s.get("text-letter-spacing").evaluate(a,{},o),k=function(t){for(var e=0,r=t;e<r.length;e+=1)if(n=r[e].charCodeAt(0),Nn.Arabic(n)||Nn["Arabic Supplement"](n)||Nn["Arabic Extended-A"](n)||Nn["Arabic Presentation Forms-A"](n)||Nn["Arabic Presentation Forms-B"](n))return!1;var n;return!0}(A)?S:0,I=s.get("text-anchor").evaluate(a,{},o),z=s.get("text-variable-anchor");if(!z){var C=s.get("text-radial-offset").evaluate(a,{},o);w=C?el(I,[24*C,tl]):s.get("text-offset").evaluate(a,{},o).map((function(t){return 24*t}))}var M=d?"center":s.get("text-justify").evaluate(a,{},o),E=s.get("symbol-placement"),T="point"===E?24*s.get("text-max-width").evaluate(a,{},o):0,P=function(){t.allowVerticalPlacement&&Kn(A)&&(f.vertical=bu(g,e,r,i,u,T,y,I,"left",k,w,vu.vertical,!0,E,c,p))};if(!d&&z){for(var B="auto"===M?z.map((function(t){return rl(t)})):[M],V=!1,F=0;F<B.length;F++){var D=B[F];if(!f.horizontal[D])if(V)f.horizontal[D]=f.horizontal[0];else{var L=bu(g,e,r,i,u,T,y,"center",D,k,w,vu.horizontal,!1,E,c,p);L&&(f.horizontal[D]=L,V=1===L.positionedLines.length)}}P()}else{"auto"===M&&(M=rl(I));var R=bu(g,e,r,i,u,T,y,I,M,k,w,vu.horizontal,!1,E,c,p);R&&(f.horizontal[M]=R),P(),Kn(A)&&d&&m&&(f.vertical=bu(g,e,r,i,u,T,y,I,M,k,w,vu.vertical,!1,E,c,p))}}var O=void 0,U=!1;if(a.icon&&a.icon.name){var j=n[a.icon.name];j&&(O=function(t,e,r){var n=Cu(r),i=e[0]-t.displaySize[0]*n.horizontalAlign,a=e[1]-t.displaySize[1]*n.verticalAlign;return{image:t,top:a,bottom:a+t.displaySize[1],left:i,right:i+t.displaySize[0]}}(i[a.icon.name],s.get("icon-offset").evaluate(a,{},o),s.get("icon-anchor").evaluate(a,{},o)),U=j.sdf,void 0===t.sdfIcons?t.sdfIcons=j.sdf:t.sdfIcons!==j.sdf&&_("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(j.pixelRatio!==t.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var q=il(f.horizontal)||f.vertical;t.iconsInText=!!q&&q.iconsInText,(q||O)&&function(t,e,r,n,i,a,o,s,u,l,p){var c=a.textMaxSize.evaluate(e,{});void 0===c&&(c=o);var h,f=t.layers[0].layout,y=f.get("icon-offset").evaluate(e,{},p),d=il(r.horizontal),m=o/24,v=t.tilePixelRatio*m,g=t.tilePixelRatio*c/24,x=t.tilePixelRatio*s,b=t.tilePixelRatio*f.get("symbol-spacing"),w=f.get("text-padding")*t.tilePixelRatio,A=f.get("icon-padding")*t.tilePixelRatio,S=f.get("text-max-angle")/180*Math.PI,k="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),I="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),z=f.get("symbol-placement"),C=b/2,M=f.get("icon-text-fit");n&&"none"!==M&&(t.allowVerticalPlacement&&r.vertical&&(h=Eu(n,r.vertical,M,f.get("icon-text-fit-padding"),y,m)),d&&(n=Eu(n,d,M,f.get("icon-text-fit-padding"),y,m)));var E=function(s,c){c.x<0||c.x>=8192||c.y<0||c.y>=8192||function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,w,A,S,k){var I,z,C,M,E,T=t.addToLineVertexArray(e,r),P=0,B=0,V=0,F=0,D=-1,L=-1,R={},O=pa(""),U=0,j=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(U=(I=s.layout.get("text-offset").evaluate(b,{},S).map((function(t){return 24*t})))[0],j=I[1]):(U=24*s.layout.get("text-radial-offset").evaluate(b,{},S),j=tl),t.allowVerticalPlacement&&n.vertical){var q=s.layout.get("text-rotate").evaluate(b,{},S)+90;M=new Ju(u,e,l,p,c,n.vertical,h,f,y,q),o&&(E=new Ju(u,e,l,p,c,o,m,v,y,q))}if(i){var N=s.layout.get("icon-rotate").evaluate(b,{}),K="none"!==s.layout.get("icon-text-fit"),G=Nu(i,N,A,K),Z=o?Nu(o,N,A,K):void 0;C=new Ju(u,e,l,p,c,i,m,v,!1,N),P=4*G.length;var X=t.iconSizeData,J=null;"source"===X.kind?(J=[128*s.layout.get("icon-size").evaluate(b,{})])[0]>32640&&_(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===X.kind&&((J=[128*w.compositeIconSizes[0].evaluate(b,{},S),128*w.compositeIconSizes[1].evaluate(b,{},S)])[0]>32640||J[1]>32640)&&_(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,G,J,x,g,b,!1,e,T.lineStartIndex,T.lineLength,-1,S),D=t.icon.placedSymbolArray.length-1,Z&&(B=4*Z.length,t.addSymbols(t.icon,Z,J,x,g,b,vu.vertical,e,T.lineStartIndex,T.lineLength,-1,S),L=t.icon.placedSymbolArray.length-1)}for(var H in n.horizontal){var Y=n.horizontal[H];if(!z){O=pa(Y.text);var $=s.layout.get("text-rotate").evaluate(b,{},S);z=new Ju(u,e,l,p,c,Y,h,f,y,$)}var W=1===Y.positionedLines.length;if(V+=nl(t,e,Y,a,s,y,b,d,T,n.vertical?vu.horizontal:vu.horizontalOnly,W?Object.keys(n.horizontal):[H],R,D,w,S),W)break}n.vertical&&(F+=nl(t,e,n.vertical,a,s,y,b,d,T,vu.vertical,["vertical"],R,L,w,S));var Q=z?z.boxStartIndex:t.collisionBoxArray.length,tt=z?z.boxEndIndex:t.collisionBoxArray.length,et=M?M.boxStartIndex:t.collisionBoxArray.length,rt=M?M.boxEndIndex:t.collisionBoxArray.length,nt=C?C.boxStartIndex:t.collisionBoxArray.length,it=C?C.boxEndIndex:t.collisionBoxArray.length,at=E?E.boxStartIndex:t.collisionBoxArray.length,ot=E?E.boxEndIndex:t.collisionBoxArray.length,st=-1,ut=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};st=ut(z,st),st=ut(M,st),st=ut(C,st);var lt=(st=ut(E,st))>-1?1:0;lt&&(st*=k/24),t.glyphOffsetArray.length>=fl.MAX_GLYPHS&&_("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,R.right>=0?R.right:-1,R.center>=0?R.center:-1,R.left>=0?R.left:-1,R.vertical||-1,D,L,O,Q,tt,et,rt,nt,it,at,ot,l,V,F,P,B,lt,0,h,U,j,st)}(t,c,s,r,n,i,h,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,v,w,k,u,x,A,I,y,e,a,l,p,o)};if("line"===z)for(var T=0,P=qu(e.geometry,0,0,8192,8192);T<P.length;T+=1)for(var B=P[T],V=0,F=ju(B,b,S,r.vertical||d,n,24,g,t.overscaling,8192);V<F.length;V+=1){var D=F[V];d&&al(t,d.text,C,D)||E(B,D)}else if("line-center"===z)for(var L=0,R=e.geometry;L<R.length;L+=1){var O=R[L];if(O.length>1){var U=Uu(O,S,r.vertical||d,n,24,g);U&&E(O,U)}}else if("Polygon"===e.type)for(var j=0,q=ts(e.geometry,0);j<q.length;j+=1){var N=q[j],K=$u(N,16);E(N[0],new Tu(K.x,K.y,0))}else if("LineString"===e.type)for(var G=0,Z=e.geometry;G<Z.length;G+=1){var X=Z[G];E(X,new Tu(X[0].x,X[0].y,0))}else if("Point"===e.type)for(var J=0,H=e.geometry;J<H.length;J+=1)for(var Y=0,$=H[J];Y<$.length;Y+=1){var W=$[Y];E([W],new Tu(W.x,W.y,0))}}(t,a,f,O,n,l,c,h,w,U,o)},x=0,b=t.features;x<b.length;x+=1)g();a&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,r,n,i){var a,o=1/Math.tan(e/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+n)*(a=1/(n-i)),t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n];i in t&&(r[i]=t[i])}return r},t.plugin=ii,t.polygonIntersectsPolygon=Ua,t.postMapLoadEvent=at,t.postTurnstileEvent=nt,t.potpack=fu,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Dn,t.registerForPluginStateChange=function(t){return t({pluginStatus:$n,pluginURL:Wn}),ei.on("pluginStateChange",t),t},t.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=i*u+o*s,t[2]=n*-s+a*u,t[3]=i*-s+o*u,t},t.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],p=e[9],c=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+l*n,t[5]=o*i+p*n,t[6]=s*i+c*n,t[7]=u*i+h*n,t[8]=l*i-a*n,t[9]=p*i-o*n,t[10]=c*i-s*n,t[11]=h*i-u*n,t},t.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],u=e[3],l=e[4],p=e[5],c=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+l*n,t[1]=o*i+p*n,t[2]=s*i+c*n,t[3]=u*i+h*n,t[4]=l*i-a*n,t[5]=p*i-o*n,t[6]=c*i-s*n,t[7]=h*i-u*n,t},t.scale=function(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},t.scale$2=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},t.setCacheLimits=function(t,e){ot=t,st=e},t.setRTLTextPlugin=function(t,e,r){if(void 0===r&&(r=!1),"deferred"===$n||"loading"===$n||"loaded"===$n)throw new Error("setRTLTextPlugin cannot be called multiple times.");Wn=L.resolveURL(t),$n="deferred",Yn=e,ti(),r||ni()},t.sphericalToCartesian=function(t){var e=t[0],r=t[1],n=t[2];return r+=90,r*=Math.PI/180,n*=Math.PI/180,{x:e*Math.cos(r)*Math.sin(n),y:e*Math.sin(r)*Math.sin(n),z:e*Math.cos(n)}},t.sqrLen=function(t){var e=t[0],r=t[1];return e*e+r*r},t.styleSpec=zt,t.sub=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},t.symbolSize=Fu,t.transformMat3=function(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t},t.transformMat4=so,t.translate=function(t,e,r){var n,i,a,o,s,u,l,p,c,h,f,y,d=r[0],m=r[1],v=r[2];return e===t?(t[12]=e[0]*d+e[4]*m+e[8]*v+e[12],t[13]=e[1]*d+e[5]*m+e[9]*v+e[13],t[14]=e[2]*d+e[6]*m+e[10]*v+e[14],t[15]=e[3]*d+e[7]*m+e[11]*v+e[15]):(i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],h=e[9],f=e[10],y=e[11],t[0]=n=e[0],t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=l,t[7]=p,t[8]=c,t[9]=h,t[10]=f,t[11]=y,t[12]=n*d+s*m+c*v+e[12],t[13]=i*d+u*m+h*v+e[13],t[14]=a*d+l*m+f*v+e[14],t[15]=o*d+p*m+y*v+e[15]),t},t.triggerPluginCompletionEvent=Qn,t.uniqueId=f,t.validateCustomStyleLayer=function(t){var e=[],r=t.id;return void 0===r&&e.push({message:"layers."+r+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+r+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=zn,t.validateStyle=In,t.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},t.vectorTile=vs,t.version="1.11.1",t.warnOnce=_,t.webpSupported=O,t.window=o,t.wrap=p})),define(0,(function(e){function t(e){var r=typeof e;if("number"===r||"boolean"===r||"string"===r||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var i="[",o=0,n=e;o<n.length;o+=1)i+=t(n[o])+",";return i+"]"}for(var s=Object.keys(e).sort(),a="{",l=0;l<s.length;l++)a+=JSON.stringify(s[l])+":"+t(e[s[l]])+",";return a+"}"}function r(r){for(var i="",o=0,n=e.refProperties;o<n.length;o+=1)i+="/"+t(r[n[o]]);return i}var i=function(e){this.keyCache={},e&&this.replace(e)};i.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},i.prototype.update=function(t,i){for(var o=this,n=0,s=t;n<s.length;n+=1){var a=s[n];this._layerConfigs[a.id]=a;var l=this._layers[a.id]=e.createStyleLayer(a);l._featureFilter=e.featureFilter(l.filter),this.keyCache[a.id]&&delete this.keyCache[a.id]}for(var u=0,h=i;u<h.length;u+=1){var c=h[u];delete this.keyCache[c],delete this._layerConfigs[c],delete this._layers[c]}this.familiesBySource={};for(var p=0,f=function(e,t){for(var i={},o=0;o<e.length;o++){var n=t&&t[e[o].id]||r(e[o]);t&&(t[e[o].id]=n);var s=i[n];s||(s=i[n]=[]),s.push(e[o])}var a=[];for(var l in i)a.push(i[l]);return a}(e.values(this._layerConfigs),this.keyCache);p<f.length;p+=1){var d=f[p].map((function(e){return o._layers[e.id]})),g=d[0];if("none"!==g.visibility){var m=g.source||"",v=this.familiesBySource[m];v||(v=this.familiesBySource[m]={});var y=g.sourceLayer||"_geojsonTileLayer",x=v[y];x||(x=v[y]=[]),x.push(d)}}};var o=function(t){var r={},i=[];for(var o in t){var n=t[o],s=r[o]={};for(var a in n){var l=n[+a];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};i.push(u),s[a]={rect:u,metrics:l.metrics}}}}var h=e.potpack(i),c=new e.AlphaImage({width:h.w||1,height:h.h||1});for(var p in t){var f=t[p];for(var d in f){var g=f[+d];if(g&&0!==g.bitmap.width&&0!==g.bitmap.height){var m=r[p][d].rect;e.AlphaImage.copy(g.bitmap,c,{x:0,y:0},{x:m.x+1,y:m.y+1},g.bitmap)}}}this.image=c,this.positions=r};e.register("GlyphAtlas",o);var n=function(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId};function s(t,r,i){for(var o=new e.EvaluationParameters(r),n=0,s=t;n<s.length;n+=1)s[n].recalculate(o,i)}function a(t,r){var i=e.getArrayBuffer(t.request,(function(t,i,o,n){t?r(t):i&&r(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(i)),rawData:i,cacheControl:o,expires:n})}));return function(){i.cancel(),r()}}n.prototype.parse=function(t,r,i,n,a){var l=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var u=new e.DictionaryCoder(Object.keys(t.layers).sort()),h=new e.FeatureIndex(this.tileID,this.promoteId);h.bucketLayerIDs=[];var c,p,f,d,g={},m={featureIndex:h,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},v=r.familiesBySource[this.source];for(var y in v){var x=t.layers[y];if(x){1===x.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=u.encode(y),S=[],I=0;I<x.length;I++){var M=x.feature(I),b=h.getId(M,y);S.push({feature:M,id:b,index:I,sourceLayerIndex:w})}for(var _=0,k=v[y];_<k.length;_+=1){var P=k[_],T=P[0];T.minzoom&&this.zoom<Math.floor(T.minzoom)||T.maxzoom&&this.zoom>=T.maxzoom||"none"!==T.visibility&&(s(P,this.zoom,i),(g[T.id]=T.createBucket({index:h.bucketLayerIDs.length,layers:P,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:w,sourceID:this.source})).populate(S,m,this.tileID.canonical),h.bucketLayerIDs.push(P.map((function(e){return e.id}))))}}}var C=e.mapObject(m.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(C).length?n.send("getGlyphs",{uid:this.uid,stacks:C},(function(e,t){c||(c=e,p=t,z.call(l))})):p={};var D=Object.keys(m.iconDependencies);D.length?n.send("getImages",{icons:D,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){c||(c=e,f=t,z.call(l))})):f={};var L=Object.keys(m.patternDependencies);function z(){if(c)return a(c);if(p&&f&&d){var t=new o(p),r=new e.ImageAtlas(f,d);for(var n in g){var l=g[n];l instanceof e.SymbolBucket?(s(l.layers,this.zoom,i),e.performSymbolLayout(l,p,t.positions,f,r.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):l.hasPattern&&(l instanceof e.LineBucket||l instanceof e.FillBucket||l instanceof e.FillExtrusionBucket)&&(s(l.layers,this.zoom,i),l.addFeatures(m,this.tileID.canonical,r.patternPositions))}this.status="done",a(null,{buckets:e.values(g).filter((function(e){return!e.isEmpty()})),featureIndex:h,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:r,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?t.positions:null})}}L.length?n.send("getImages",{icons:L,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){c||(c=e,d=t,z.call(l))})):d={},z.call(this)};var l=function(e,t,r,i){this.actor=e,this.layerIndex=t,this.availableImages=r,this.loadVectorData=i||a,this.loading={},this.loaded={}};l.prototype.loadTile=function(t,r){var i=this,o=t.uid;this.loading||(this.loading={});var s=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request),a=this.loading[o]=new n(t);a.abort=this.loadVectorData(t,(function(t,n){if(delete i.loading[o],t||!n)return a.status="done",i.loaded[o]=a,r(t);var l=n.rawData,u={};n.expires&&(u.expires=n.expires),n.cacheControl&&(u.cacheControl=n.cacheControl);var h={};if(s){var c=s.finish();c&&(h.resourceTiming=JSON.parse(JSON.stringify(c)))}a.vectorTile=n.vectorTile,a.parse(n.vectorTile,i.layerIndex,i.availableImages,i.actor,(function(t,i){if(t||!i)return r(t);r(null,e.extend({rawTileData:l.slice(0)},i,u,h))})),i.loaded=i.loaded||{},i.loaded[o]=a}))},l.prototype.reloadTile=function(e,t){var r=this,i=this.loaded,o=e.uid,n=this;if(i&&i[o]){var s=i[o];s.showCollisionBoxes=e.showCollisionBoxes;var a=function(e,i){var o=s.reloadCallback;o&&(delete s.reloadCallback,s.parse(s.vectorTile,n.layerIndex,r.availableImages,n.actor,o)),t(e,i)};"parsing"===s.status?s.reloadCallback=a:"done"===s.status&&(s.vectorTile?s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}},l.prototype.abortTile=function(e,t){var r=this.loading,i=e.uid;r&&r[i]&&r[i].abort&&(r[i].abort(),delete r[i]),t()},l.prototype.removeTile=function(e,t){var r=this.loaded,i=e.uid;r&&r[i]&&delete r[i],t()};var u=e.window.ImageBitmap,h=function(){this.loaded={}};function c(e,t){if(0!==e.length){p(e[0],t);for(var r=1;r<e.length;r++)p(e[r],!t)}}function p(e,t){for(var r=0,i=0,o=e.length,n=o-1;i<o;n=i++)r+=(e[i][0]-e[n][0])*(e[n][1]+e[i][1]);r>=0!=!!t&&e.reverse()}h.prototype.loadTile=function(t,r){var i=t.uid,o=t.encoding,n=t.rawImageData,s=u&&n instanceof u?this.getImageData(n):n,a=new e.DEMData(i,s,o);this.loaded=this.loaded||{},this.loaded[i]=a,r(null,a)},h.prototype.getImageData=function(t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);var r=this.offscreenCanvasContext.getImageData(-1,-1,t.width+2,t.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:r.width,height:r.height},r.data)},h.prototype.removeTile=function(e){var t=this.loaded,r=e.uid;t&&t[r]&&delete t[r]};var f=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,d=function(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};d.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],r=0,i=this._feature.geometry;r<i.length;r+=1){var o=i[r];t.push([new e.Point$1(o[0],o[1])])}return t}for(var n=[],s=0,a=this._feature.geometry;s<a.length;s+=1){for(var l=[],u=0,h=a[s];u<h.length;u+=1){var c=h[u];l.push(new e.Point$1(c[0],c[1]))}n.push(l)}return n},d.prototype.toGeoJSON=function(e,t,r){return f.call(this,e,t,r)};var g=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t};g.prototype.feature=function(e){return new d(this._features[e])};var m=e.vectorTile.VectorTileFeature,v=y;function y(e,t){this.options=t||{},this.features=e,this.length=e.length}function x(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}y.prototype.feature=function(e){return new x(this.features[e],this.options.extent)},x.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var r=0;r<t.length;r++){for(var i=t[r],o=[],n=0;n<i.length;n++)o.push(new e.Point$1(i[n][0],i[n][1]));this.geometry.push(o)}return this.geometry},x.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,i=1/0,o=-1/0,n=0;n<e.length;n++)for(var s=e[n],a=0;a<s.length;a++){var l=s[a];t=Math.min(t,l.x),r=Math.max(r,l.x),i=Math.min(i,l.y),o=Math.max(o,l.y)}return[t,i,r,o]},x.prototype.toGeoJSON=m.prototype.toGeoJSON;var w=I,S=v;function I(t){var r=new e.pbf;return function(e,t){for(var r in e.layers)t.writeMessage(3,M,e.layers[r])}(t,r),r.finish()}function M(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)i.feature=e.feature(r),t.writeMessage(2,b,i);var o=i.keys;for(r=0;r<o.length;r++)t.writeStringField(3,o[r]);var n=i.values;for(r=0;r<n.length;r++)t.writeMessage(4,C,n[r])}function b(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,_,e),t.writeVarintField(3,r.type),t.writeMessage(4,T,r)}function _(e,t){var r=e.feature,i=e.keys,o=e.values,n=e.keycache,s=e.valuecache;for(var a in r.properties){var l=n[a];void 0===l&&(i.push(a),n[a]=l=i.length-1),t.writeVarint(l);var u=r.properties[a],h=typeof u;"string"!==h&&"boolean"!==h&&"number"!==h&&(u=JSON.stringify(u));var c=h+":"+u,p=s[c];void 0===p&&(o.push(u),s[c]=p=o.length-1),t.writeVarint(p)}}function k(e,t){return(t<<3)+(7&e)}function P(e){return e<<1^e>>31}function T(e,t){for(var r=e.loadGeometry(),i=e.type,o=0,n=0,s=r.length,a=0;a<s;a++){var l=r[a],u=1;1===i&&(u=l.length),t.writeVarint(k(1,u));for(var h=3===i?l.length-1:l.length,c=0;c<h;c++){1===c&&1!==i&&t.writeVarint(k(2,h-1));var p=l[c].x-o,f=l[c].y-n;t.writeVarint(P(p)),t.writeVarint(P(f)),o+=p,n+=f}3===i&&t.writeVarint(k(7,1))}}function C(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function D(e,t,r,i){L(e,r,i),L(t,2*r,2*i),L(t,2*r+1,2*i+1)}function L(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function z(e,t,r,i){var o=e-r,n=t-i;return o*o+n*n}w.fromVectorTileJs=I,w.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var i in e)r[i]=new v(e[i].features,t),r[i].name=i,r[i].version=t.version,r[i].extent=t.extent;return I({layers:r})},w.GeoJSONWrapper=S;var O=function(e){return e[0]},E=function(e){return e[1]},F=function(e,t,r,i,o){void 0===t&&(t=O),void 0===r&&(r=E),void 0===i&&(i=64),void 0===o&&(o=Float64Array),this.nodeSize=i,this.points=e;for(var n=e.length<65536?Uint16Array:Uint32Array,s=this.ids=new n(e.length),a=this.coords=new o(2*e.length),l=0;l<e.length;l++)s[l]=l,a[2*l]=t(e[l]),a[2*l+1]=r(e[l]);!function e(t,r,i,o,n,s){if(!(n-o<=i)){var a=o+n>>1;!function e(t,r,i,o,n,s){for(;n>o;){if(n-o>600){var a=n-o+1,l=i-o+1,u=Math.log(a),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(a-h)/a)*(l-a/2<0?-1:1);e(t,r,i,Math.max(o,Math.floor(i-l*h/a+c)),Math.min(n,Math.floor(i+(a-l)*h/a+c)),s)}var p=r[2*i+s],f=o,d=n;for(D(t,r,o,i),r[2*n+s]>p&&D(t,r,o,n);f<d;){for(D(t,r,f,d),f++,d--;r[2*f+s]<p;)f++;for(;r[2*d+s]>p;)d--}r[2*o+s]===p?D(t,r,o,d):D(t,r,++d,n),d<=i&&(o=d+1),i<=d&&(n=d-1)}}(t,r,a,o,n,s%2),e(t,r,i,o,a-1,s+1),e(t,r,i,a+1,n,s+1)}}(s,a,i,0,s.length-1,0)};F.prototype.range=function(e,t,r,i){return function(e,t,r,i,o,n,s){for(var a,l,u=[0,e.length-1,0],h=[];u.length;){var c=u.pop(),p=u.pop(),f=u.pop();if(p-f<=s)for(var d=f;d<=p;d++)l=t[2*d+1],(a=t[2*d])>=r&&a<=o&&l>=i&&l<=n&&h.push(e[d]);else{var g=Math.floor((f+p)/2);l=t[2*g+1],(a=t[2*g])>=r&&a<=o&&l>=i&&l<=n&&h.push(e[g]);var m=(c+1)%2;(0===c?r<=a:i<=l)&&(u.push(f),u.push(g-1),u.push(m)),(0===c?o>=a:n>=l)&&(u.push(g+1),u.push(p),u.push(m))}}return h}(this.ids,this.coords,e,t,r,i,this.nodeSize)},F.prototype.within=function(e,t,r){return function(e,t,r,i,o,n){for(var s=[0,e.length-1,0],a=[],l=o*o;s.length;){var u=s.pop(),h=s.pop(),c=s.pop();if(h-c<=n)for(var p=c;p<=h;p++)z(t[2*p],t[2*p+1],r,i)<=l&&a.push(e[p]);else{var f=Math.floor((c+h)/2),d=t[2*f],g=t[2*f+1];z(d,g,r,i)<=l&&a.push(e[f]);var m=(u+1)%2;(0===u?r-o<=d:i-o<=g)&&(s.push(c),s.push(f-1),s.push(m)),(0===u?r+o>=d:i+o>=g)&&(s.push(f+1),s.push(h),s.push(m))}}return a}(this.ids,this.coords,e,t,r,this.nodeSize)};var N={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},J=function(e){this.options=V(Object.create(N),e),this.trees=new Array(this.options.maxZoom+1)};function Z(e,t,r,i,o){return{x:e,y:t,zoom:1/0,id:r,parentId:-1,numPoints:i,properties:o}}function A(e,t){var r=e.geometry.coordinates,i=r[1];return{x:Y(r[0]),y:j(i),zoom:1/0,index:t,parentId:-1}}function B(e){return{type:"Feature",id:e.id,properties:G(e),geometry:{type:"Point",coordinates:[(i=e.x,360*(i-.5)),(t=e.y,r=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var t,r,i}function G(e){var t=e.numPoints,r=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return V(V({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function Y(e){return e/360+.5}function j(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function V(e,t){for(var r in t)e[r]=t[r];return e}function X(e){return e.x}function W(e){return e.y}function R(e,t,r,i,o,n){var s=o-r,a=n-i;if(0!==s||0!==a){var l=((e-r)*s+(t-i)*a)/(s*s+a*a);l>1?(r=o,i=n):l>0&&(r+=s*l,i+=a*l)}return(s=e-r)*s+(a=t-i)*a}function q(e,t,r,i){var o={id:void 0===e?null:e,type:t,geometry:r,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)U(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var i=0;i<t.length;i++)U(e,t[i]);else if("MultiPolygon"===r)for(i=0;i<t.length;i++)for(var o=0;o<t[i].length;o++)U(e,t[i][o])}(o),o}function U(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function $(e,t,r,i){if(t.geometry){var o=t.geometry.coordinates,n=t.geometry.type,s=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),a=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=i||0),"Point"===n)H(o,a);else if("MultiPoint"===n)for(var u=0;u<o.length;u++)H(o[u],a);else if("LineString"===n)K(o,a,s,!1);else if("MultiLineString"===n){if(r.lineMetrics){for(u=0;u<o.length;u++)K(o[u],a=[],s,!1),e.push(q(l,"LineString",a,t.properties));return}Q(o,a,s,!1)}else if("Polygon"===n)Q(o,a,s,!0);else{if("MultiPolygon"!==n){if("GeometryCollection"===n){for(u=0;u<t.geometry.geometries.length;u++)$(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},r,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<o.length;u++){var h=[];Q(o[u],h,s,!0),a.push(h)}}e.push(q(l,n,a,t.properties))}}function H(e,t){t.push(ee(e[0])),t.push(te(e[1])),t.push(0)}function K(e,t,r,i){for(var o,n,s=0,a=0;a<e.length;a++){var l=ee(e[a][0]),u=te(e[a][1]);t.push(l),t.push(u),t.push(0),a>0&&(s+=i?(o*u-l*n)/2:Math.sqrt(Math.pow(l-o,2)+Math.pow(u-n,2))),o=l,n=u}var h=t.length-3;t[2]=1,function e(t,r,i,o){for(var n,s=o,a=i-r>>1,l=i-r,u=t[r],h=t[r+1],c=t[i],p=t[i+1],f=r+3;f<i;f+=3){var d=R(t[f],t[f+1],u,h,c,p);if(d>s)n=f,s=d;else if(d===s){var g=Math.abs(f-a);g<l&&(n=f,l=g)}}s>o&&(n-r>3&&e(t,r,n,o),t[n+2]=s,i-n>3&&e(t,n,i,o))}(t,0,h,r),t[h+2]=1,t.size=Math.abs(s),t.start=0,t.end=t.size}function Q(e,t,r,i){for(var o=0;o<e.length;o++){var n=[];K(e[o],n,r,i),t.push(n)}}function ee(e){return e/360+.5}function te(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function re(e,t,r,i,o,n,s,a){if(i/=t,n>=(r/=t)&&s<i)return e;if(s<r||n>=i)return null;for(var l=[],u=0;u<e.length;u++){var h=e[u],c=h.geometry,p=h.type,f=0===o?h.minX:h.minY,d=0===o?h.maxX:h.maxY;if(f>=r&&d<i)l.push(h);else if(!(d<r||f>=i)){var g=[];if("Point"===p||"MultiPoint"===p)ie(c,g,r,i,o);else if("LineString"===p)oe(c,g,r,i,o,!1,a.lineMetrics);else if("MultiLineString"===p)se(c,g,r,i,o,!1);else if("Polygon"===p)se(c,g,r,i,o,!0);else if("MultiPolygon"===p)for(var m=0;m<c.length;m++){var v=[];se(c[m],v,r,i,o,!0),v.length&&g.push(v)}if(g.length){if(a.lineMetrics&&"LineString"===p){for(m=0;m<g.length;m++)l.push(q(h.id,p,g[m],h.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===g.length?(p="LineString",g=g[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===g.length?"Point":"MultiPoint"),l.push(q(h.id,p,g,h.tags))}}}return l.length?l:null}function ie(e,t,r,i,o){for(var n=0;n<e.length;n+=3){var s=e[n+o];s>=r&&s<=i&&(t.push(e[n]),t.push(e[n+1]),t.push(e[n+2]))}}function oe(e,t,r,i,o,n,s){for(var a,l,u=ne(e),h=0===o?le:ue,c=e.start,p=0;p<e.length-3;p+=3){var f=e[p],d=e[p+1],g=e[p+2],m=e[p+3],v=e[p+4],y=0===o?f:d,x=0===o?m:v,w=!1;s&&(a=Math.sqrt(Math.pow(f-m,2)+Math.pow(d-v,2))),y<r?x>r&&(l=h(u,f,d,m,v,r),s&&(u.start=c+a*l)):y>i?x<i&&(l=h(u,f,d,m,v,i),s&&(u.start=c+a*l)):ae(u,f,d,g),x<r&&y>=r&&(l=h(u,f,d,m,v,r),w=!0),x>i&&y<=i&&(l=h(u,f,d,m,v,i),w=!0),!n&&w&&(s&&(u.end=c+a*l),t.push(u),u=ne(e)),s&&(c+=a)}var S=e.length-3;f=e[S],d=e[S+1],g=e[S+2],(y=0===o?f:d)>=r&&y<=i&&ae(u,f,d,g),S=u.length-3,n&&S>=3&&(u[S]!==u[0]||u[S+1]!==u[1])&&ae(u,u[0],u[1],u[2]),u.length&&t.push(u)}function ne(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function se(e,t,r,i,o,n){for(var s=0;s<e.length;s++)oe(e[s],t,r,i,o,n,!1)}function ae(e,t,r,i){e.push(t),e.push(r),e.push(i)}function le(e,t,r,i,o,n){var s=(n-t)/(i-t);return e.push(n),e.push(r+(o-r)*s),e.push(1),s}function ue(e,t,r,i,o,n){var s=(n-r)/(o-r);return e.push(t+(i-t)*s),e.push(n),e.push(1),s}function he(e,t){for(var r=[],i=0;i<e.length;i++){var o,n=e[i],s=n.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)o=ce(n.geometry,t);else if("MultiLineString"===s||"Polygon"===s){o=[];for(var a=0;a<n.geometry.length;a++)o.push(ce(n.geometry[a],t))}else if("MultiPolygon"===s)for(o=[],a=0;a<n.geometry.length;a++){for(var l=[],u=0;u<n.geometry[a].length;u++)l.push(ce(n.geometry[a][u],t));o.push(l)}r.push(q(n.id,s,o,n.tags))}return r}function ce(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var i=0;i<e.length;i+=3)r.push(e[i]+t,e[i+1],e[i+2]);return r}function pe(e,t){if(e.transformed)return e;var r,i,o,n=1<<e.z,s=e.x,a=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],u=l.geometry,h=l.type;if(l.geometry=[],1===h)for(i=0;i<u.length;i+=2)l.geometry.push(fe(u[i],u[i+1],t,n,s,a));else for(i=0;i<u.length;i++){var c=[];for(o=0;o<u[i].length;o+=2)c.push(fe(u[i][o],u[i][o+1],t,n,s,a));l.geometry.push(c)}}return e.transformed=!0,e}function fe(e,t,r,i,o,n){return[Math.round(r*(e*i-o)),Math.round(r*(t*i-n))]}function de(e,t,r,i,o){for(var n=t===o.maxZoom?0:o.tolerance/((1<<t)*o.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:i,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<e.length;a++){s.numFeatures++,ge(s,e[a],n,o);var l=e[a].minX,u=e[a].minY,h=e[a].maxX,c=e[a].maxY;l<s.minX&&(s.minX=l),u<s.minY&&(s.minY=u),h>s.maxX&&(s.maxX=h),c>s.maxY&&(s.maxY=c)}return s}function ge(e,t,r,i){var o=t.geometry,n=t.type,s=[];if("Point"===n||"MultiPoint"===n)for(var a=0;a<o.length;a+=3)s.push(o[a]),s.push(o[a+1]),e.numPoints++,e.numSimplified++;else if("LineString"===n)me(s,o,e,r,!1,!1);else if("MultiLineString"===n||"Polygon"===n)for(a=0;a<o.length;a++)me(s,o[a],e,r,"Polygon"===n,0===a);else if("MultiPolygon"===n)for(var l=0;l<o.length;l++){var u=o[l];for(a=0;a<u.length;a++)me(s,u[a],e,r,!0,0===a)}if(s.length){var h=t.tags||null;if("LineString"===n&&i.lineMetrics){for(var c in h={},t.tags)h[c]=t.tags[c];h.mapbox_clip_start=o.start/o.size,h.mapbox_clip_end=o.end/o.size}var p={geometry:s,type:"Polygon"===n||"MultiPolygon"===n?3:"LineString"===n||"MultiLineString"===n?2:1,tags:h};null!==t.id&&(p.id=t.id),e.features.push(p)}}function me(e,t,r,i,o,n){var s=i*i;if(i>0&&t.size<(o?s:i))r.numPoints+=t.length/3;else{for(var a=[],l=0;l<t.length;l+=3)(0===i||t[l+2]>s)&&(r.numSimplified++,a.push(t[l]),a.push(t[l+1])),r.numPoints++;o&&function(e,t){for(var r=0,i=0,o=e.length,n=o-2;i<o;n=i,i+=2)r+=(e[i]-e[n])*(e[i+1]+e[n+1]);if(r>0===t)for(i=0,o=e.length;i<o/2;i+=2){var s=e[i],a=e[i+1];e[i]=e[o-2-i],e[i+1]=e[o-1-i],e[o-2-i]=s,e[o-1-i]=a}}(a,n),e.push(a)}}function ve(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var i=0;i<e.features.length;i++)$(r,e.features[i],t,i);else $(r,"Feature"===e.type?e:{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(e,t){var r=t.buffer/t.extent,i=e,o=re(e,1,-1-r,r,0,-1,2,t),n=re(e,1,1-r,2+r,0,-1,2,t);return(o||n)&&(i=re(e,1,-r,1+r,0,-1,2,t)||[],o&&(i=he(o,1).concat(i)),n&&(i=i.concat(he(n,-1)))),i}(i,t)).length&&this.splitTile(i,0,0,0),r&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ye(e,t,r){return 32*((1<<e)*r+t)+e}function xe(e,t){var r=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return t(null,null);var o=new g(i.features),n=w(o);0===n.byteOffset&&n.byteLength===n.buffer.byteLength||(n=new Uint8Array(n)),t(null,{vectorTile:o,rawData:n.buffer})}J.prototype.load=function(e){var t=this.options,r=t.log,i=t.minZoom,o=t.maxZoom,n=t.nodeSize;r&&console.time("total time");var s="prepare "+e.length+" points";r&&console.time(s),this.points=e;for(var a=[],l=0;l<e.length;l++)e[l].geometry&&a.push(A(e[l],l));this.trees[o+1]=new F(a,X,W,n,Float32Array),r&&console.timeEnd(s);for(var u=o;u>=i;u--){var h=+Date.now();a=this._cluster(a,u),this.trees[u]=new F(a,X,W,n,Float32Array),r&&console.log("z%d: %d clusters in %dms",u,a.length,+Date.now()-h)}return r&&console.timeEnd("total time"),this},J.prototype.getClusters=function(e,t){var r=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),o=180===e[2]?180:((e[2]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,o=180;else if(r>o){var s=this.getClusters([r,i,180,n],t),a=this.getClusters([-180,i,o,n],t);return s.concat(a)}for(var l=this.trees[this._limitZoom(t)],u=[],h=0,c=l.range(Y(r),j(n),Y(o),j(i));h<c.length;h+=1){var p=l.points[c[h]];u.push(p.numPoints?B(p):this.points[p.index])}return u},J.prototype.getChildren=function(e){var t=this._getOriginId(e),r=this._getOriginZoom(e),i="No cluster with the specified id.",o=this.trees[r];if(!o)throw new Error(i);var n=o.points[t];if(!n)throw new Error(i);for(var s=this.options.radius/(this.options.extent*Math.pow(2,r-1)),a=[],l=0,u=o.within(n.x,n.y,s);l<u.length;l+=1){var h=o.points[u[l]];h.parentId===e&&a.push(h.numPoints?B(h):this.points[h.index])}if(0===a.length)throw new Error(i);return a},J.prototype.getLeaves=function(e,t,r){var i=[];return this._appendLeaves(i,e,t=t||10,r=r||0,0),i},J.prototype.getTile=function(e,t,r){var i=this.trees[this._limitZoom(e)],o=Math.pow(2,e),n=this.options,s=n.radius/n.extent,a=(r-s)/o,l=(r+1+s)/o,u={features:[]};return this._addTileFeatures(i.range((t-s)/o,a,(t+1+s)/o,l),i.points,t,r,o,u),0===t&&this._addTileFeatures(i.range(1-s/o,a,1,l),i.points,o,r,o,u),t===o-1&&this._addTileFeatures(i.range(0,a,s/o,l),i.points,-1,r,o,u),u.features.length?u:null},J.prototype.getClusterExpansionZoom=function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t},J.prototype._appendLeaves=function(e,t,r,i,o){for(var n=0,s=this.getChildren(t);n<s.length;n+=1){var a=s[n],l=a.properties;if(l&&l.cluster?o+l.point_count<=i?o+=l.point_count:o=this._appendLeaves(e,l.cluster_id,r,i,o):o<i?o++:e.push(a),e.length===r)break}return o},J.prototype._addTileFeatures=function(e,t,r,i,o,n){for(var s=0,a=e;s<a.length;s+=1){var l=t[a[s]],u=l.numPoints,h={type:1,geometry:[[Math.round(this.options.extent*(l.x*o-r)),Math.round(this.options.extent*(l.y*o-i))]],tags:u?G(l):this.points[l.index].properties},c=void 0;u?c=l.id:this.options.generateId?c=l.index:this.points[l.index].id&&(c=this.points[l.index].id),void 0!==c&&(h.id=c),n.features.push(h)}},J.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))},J.prototype._cluster=function(e,t){for(var r=[],i=this.options,o=i.reduce,n=i.minPoints,s=i.radius/(i.extent*Math.pow(2,t)),a=0;a<e.length;a++){var l=e[a];if(!(l.zoom<=t)){l.zoom=t;for(var u=this.trees[t+1],h=u.within(l.x,l.y,s),c=l.numPoints||1,p=c,f=0,d=h;f<d.length;f+=1){var g=u.points[d[f]];g.zoom>t&&(p+=g.numPoints||1)}if(p>=n){for(var m=l.x*c,v=l.y*c,y=o&&c>1?this._map(l,!0):null,x=(a<<5)+(t+1)+this.points.length,w=0,S=h;w<S.length;w+=1){var I=u.points[S[w]];if(!(I.zoom<=t)){I.zoom=t;var M=I.numPoints||1;m+=I.x*M,v+=I.y*M,I.parentId=x,o&&(y||(y=this._map(l,!0)),o(y,this._map(I)))}}l.parentId=x,r.push(Z(m/p,v/p,x,p,y))}else if(r.push(l),p>1)for(var b=0,_=h;b<_.length;b+=1){var k=u.points[_[b]];k.zoom<=t||(k.zoom=t,r.push(k))}}}return r},J.prototype._getOriginId=function(e){return e-this.points.length>>5},J.prototype._getOriginZoom=function(e){return(e-this.points.length)%32},J.prototype._map=function(e,t){if(e.numPoints)return t?V({},e.properties):e.properties;var r=this.points[e.index].properties,i=this.options.map(r);return t&&i===r?V({},i):i},ve.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ve.prototype.splitTile=function(e,t,r,i,o,n,s){for(var a=[e,t,r,i],l=this.options,u=l.debug;a.length;){i=a.pop(),r=a.pop(),t=a.pop(),e=a.pop();var h=1<<t,c=ye(t,r,i),p=this.tiles[c];if(!p&&(u>1&&console.time("creation"),p=this.tiles[c]=de(e,t,r,i,l),this.tileCoords.push({z:t,x:r,y:i}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,i,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(p.source=e,o){if(t===l.maxZoom||t===o)continue;var d=1<<o-t;if(r!==Math.floor(n/d)||i!==Math.floor(s/d))continue}else if(t===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==e.length){u>1&&console.time("clipping");var g,m,v,y,x,w,S=.5*l.buffer/l.extent,I=.5-S,M=.5+S,b=1+S;g=m=v=y=null,x=re(e,h,r-S,r+M,0,p.minX,p.maxX,l),w=re(e,h,r+I,r+b,0,p.minX,p.maxX,l),e=null,x&&(g=re(x,h,i-S,i+M,1,p.minY,p.maxY,l),m=re(x,h,i+I,i+b,1,p.minY,p.maxY,l),x=null),w&&(v=re(w,h,i-S,i+M,1,p.minY,p.maxY,l),y=re(w,h,i+I,i+b,1,p.minY,p.maxY,l),w=null),u>1&&console.timeEnd("clipping"),a.push(g||[],t+1,2*r,2*i),a.push(m||[],t+1,2*r,2*i+1),a.push(v||[],t+1,2*r+1,2*i),a.push(y||[],t+1,2*r+1,2*i+1)}}},ve.prototype.getTile=function(e,t,r){var i=this.options,o=i.extent,n=i.debug;if(e<0||e>24)return null;var s=1<<e,a=ye(e,t=(t%s+s)%s,r);if(this.tiles[a])return pe(this.tiles[a],o);n>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,u=e,h=t,c=r;!l&&u>0;)u--,h=Math.floor(h/2),c=Math.floor(c/2),l=this.tiles[ye(u,h,c)];return l&&l.source?(n>1&&console.log("found parent tile z%d-%d-%d",u,h,c),n>1&&console.time("drilling down"),this.splitTile(l.source,u,h,c,e,t,r),n>1&&console.timeEnd("drilling down"),this.tiles[a]?pe(this.tiles[a],o):null):null};var we=function(t){function r(e,r,i,o){t.call(this,e,r,i,xe),o&&(this.loadGeoJSON=o)}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},r.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var r=this._pendingCallback,i=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var o=!!(i&&i.request&&i.request.collectResourceTiming)&&new e.RequestPerformance(i.request);this.loadGeoJSON(i,(function(n,s){if(n||!s)return r(n);if("object"!=typeof s)return r(new Error("Input data given to '"+i.source+"' is not a valid GeoJSON object."));!function e(t,r){var i,o=t&&t.type;if("FeatureCollection"===o)for(i=0;i<t.features.length;i++)e(t.features[i],r);else if("GeometryCollection"===o)for(i=0;i<t.geometries.length;i++)e(t.geometries[i],r);else if("Feature"===o)e(t.geometry,r);else if("Polygon"===o)c(t.coordinates,r);else if("MultiPolygon"===o)for(i=0;i<t.coordinates.length;i++)c(t.coordinates[i],r);return t}(s,!0);try{t._geoJSONIndex=i.cluster?new J(function(t){var r=t.superclusterOptions,i=t.clusterProperties;if(!i||!r)return r;for(var o={},n={},s={accumulated:null,zoom:0},a={properties:null},l=Object.keys(i),u=0,h=l;u<h.length;u+=1){var c=h[u],p=i[c],f=p[0],d=e.createExpression(p[1]),g=e.createExpression("string"==typeof f?[f,["accumulated"],["get",c]]:f);o[c]=d.value,n[c]=g.value}return r.map=function(e){a.properties=e;for(var t={},r=0,i=l;r<i.length;r+=1){var n=i[r];t[n]=o[n].evaluate(s,a)}return t},r.reduce=function(e,t){a.properties=t;for(var r=0,i=l;r<i.length;r+=1){var o=i[r];s.accumulated=e[o],e[o]=n[o].evaluate(s,a)}},r}(i)).load(s.features):function(e,t){return new ve(e,t)}(s,i.geojsonVtOptions)}catch(n){return r(n)}t.loaded={};var a={};if(o){var l=o.finish();l&&(a.resourceTiming={},a.resourceTiming[i.source]=JSON.parse(JSON.stringify(l)))}r(null,a)}))}},r.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},r.prototype.reloadTile=function(e,r){var i=this.loaded;return i&&i[e.uid]?t.prototype.reloadTile.call(this,e,r):this.loadTile(e,r)},r.prototype.loadGeoJSON=function(t,r){if(t.request)e.getJSON(t.request,r);else{if("string"!=typeof t.data)return r(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."));try{return r(null,JSON.parse(t.data))}catch(e){return r(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."))}}},r.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},r.prototype.getClusterExpansionZoom=function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}},r.prototype.getClusterChildren=function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}},r.prototype.getClusterLeaves=function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}},r}(l),Se=function(t){var r=this;this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:we},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(r.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');r.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}};return Se.prototype.setReferrer=function(e,t){this.referrer=t},Se.prototype.setImages=function(e,t,r){for(var i in this.availableImages[e]=t,this.workerSources[e]){var o=this.workerSources[e][i];for(var n in o)o[n].availableImages=t}r()},Se.prototype.setLayers=function(e,t,r){this.getLayerIndex(e).replace(t),r()},Se.prototype.updateLayers=function(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r()},Se.prototype.loadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).loadTile(t,r)},Se.prototype.loadDEMTile=function(e,t,r){this.getDEMWorkerSource(e,t.source).loadTile(t,r)},Se.prototype.reloadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).reloadTile(t,r)},Se.prototype.abortTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r)},Se.prototype.removeTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r)},Se.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},Se.prototype.removeSource=function(e,t,r){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var i=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==i.removeSource?i.removeSource(t,r):r()}},Se.prototype.loadWorkerSource=function(e,t,r){try{this.self.importScripts(t.url),r()}catch(e){r(e.toString())}},Se.prototype.syncRTLPluginState=function(t,r,i){try{e.plugin.setState(r);var o=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=o){this.self.importScripts(o);var n=e.plugin.isParsed();i(n?void 0:new Error("RTL Text Plugin failed to import scripts from "+o),n)}}catch(e){i(e.toString())}},Se.prototype.getAvailableImages=function(e){var t=this.availableImages[e];return t||(t=[]),t},Se.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new i),t},Se.prototype.getWorkerSource=function(e,t,r){var i=this;return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][r]||(this.workerSources[e][t][r]=new this.workerSourceTypes[t]({send:function(t,r,o){i.actor.send(t,r,o,e)}},this.getLayerIndex(e),this.getAvailableImages(e))),this.workerSources[e][t][r]},Se.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new h),this.demWorkerSources[e][t]},Se.prototype.enforceCacheSizeLimit=function(t,r){e.enforceCacheSizeLimit(r)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Se(self)),Se})),define(0,(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!i(t)}function i(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),o=URL.createObjectURL(i);try{e=new Worker(o),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(o),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()?(void 0===o[i=t&&t.failIfMajorPerformanceCaveat]&&(o[i]=function(t){var i=function(t){var i=document.createElement("canvas"),o=Object.create(e.webGLContextAttributes);return o.failIfMajorPerformanceCaveat=t,i.probablySupportsContext?i.probablySupportsContext("webgl",o)||i.probablySupportsContext("experimental-webgl",o):i.supportsContext?i.supportsContext("webgl",o)||i.supportsContext("experimental-webgl",o):i.getContext("webgl",o)||i.getContext("experimental-webgl",o)}(t);if(!i)return!1;var o=i.createShader(i.VERTEX_SHADER);return!(!o||i.isContextLost())&&(i.shaderSource(o,"void main() {}"),i.compileShader(o),!0===i.getShaderParameter(o,i.COMPILE_STATUS))}(i)),o[i]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=i);var o={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),i={create:function(e,i,o){var r=t.window.document.createElement(e);return void 0!==i&&(r.className=i),o&&o.appendChild(r),r},createNS:function(e,i){return t.window.document.createElementNS(e,i)}},o=t.window.document&&t.window.document.documentElement.style;function r(t){if(!o)return t[0];for(var e=0;e<t.length;e++)if(t[e]in o)return t[e];return t[0]}var a,n=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){o&&n&&(a=o[n],o[n]="none")},i.enableDrag=function(){o&&n&&(o[n]=a)};var s=r(["transform","WebkitTransform"]);i.setTransform=function(t,e){t.style[s]=e};var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});t.window.addEventListener("test",c,c),t.window.removeEventListener("test",c,c)}catch(t){l=!1}i.addEventListener=function(t,e,i,o){void 0===o&&(o={}),t.addEventListener(e,i,"passive"in o&&l?o:o.capture)},i.removeEventListener=function(t,e,i,o){void 0===o&&(o={}),t.removeEventListener(e,i,"passive"in o&&l?o:o.capture)};var u=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",u,!0)};function h(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}i.suppressClick=function(){t.window.addEventListener("click",u,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",u,!0)}),0)},i.mousePos=function(e,i){var o=e.getBoundingClientRect();return new t.Point(i.clientX-o.left-e.clientLeft,i.clientY-o.top-e.clientTop)},i.touchPos=function(e,i){for(var o=e.getBoundingClientRect(),r=[],a=0;a<i.length;a++)r.push(new t.Point(i[a].clientX-o.left-e.clientLeft,i[a].clientY-o.top-e.clientTop));return r},i.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},i.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var p=function(e){function i(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.isLoaded=function(){return this.loaded},i.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var o=i[e];this._notify(o.ids,o.callback)}this.requestors=[]}},i.prototype.getImage=function(t){return this.images[t]},i.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},i.prototype._validate=function(e,i){var o=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),o=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),o=!1),this._validateContent(i.content,i)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),o=!1),o},i.prototype._validateStretch=function(t,e){if(!t)return!0;for(var i=0,o=0,r=t;o<r.length;o+=1){var a=r[o];if(a[0]<i||a[1]<a[0]||e<a[1])return!1;i=a[1]}return!0},i.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},i.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},i.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},i.prototype.listImages=function(){return Object.keys(this.images)},i.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var o=0,r=t;o<r.length;o+=1)this.images[r[o]]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},i.prototype._notify=function(e,i){for(var o={},r=0,a=e;r<a.length;r+=1){var n=a[r];this.images[n]||this.fire(new t.Event("styleimagemissing",{id:n}));var s=this.images[n];s?o[n]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+n+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}i(null,o)},i.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},i.prototype.getPattern=function(e){var i=this.patterns[e],o=this.getImage(e);if(!o)return null;if(i&&i.position.version===o.version)return i.position;if(i)i.position.version=o.version;else{var r={w:o.data.width+2,h:o.data.height+2,x:0,y:0},a=new t.ImagePosition(r,o);this.patterns[e]={bin:r,position:a}}return this._updatePatternAtlas(),this.patterns[e].position},i.prototype.bind=function(e){var i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},i.prototype._updatePatternAtlas=function(){var e=[];for(var i in this.patterns)e.push(this.patterns[i].bin);var o=t.potpack(e),r=o.w,a=o.h,n=this.atlasImage;for(var s in n.resize({width:r||1,height:a||1}),this.patterns){var l=this.patterns[s].bin,c=l.x+1,u=l.y+1,h=this.images[s].data,p=h.width,d=h.height;t.RGBAImage.copy(h,n,{x:0,y:0},{x:c,y:u},{width:p,height:d}),t.RGBAImage.copy(h,n,{x:0,y:d-1},{x:c,y:u-1},{width:p,height:1}),t.RGBAImage.copy(h,n,{x:0,y:0},{x:c,y:u+d},{width:p,height:1}),t.RGBAImage.copy(h,n,{x:p-1,y:0},{x:c-1,y:u},{width:1,height:d}),t.RGBAImage.copy(h,n,{x:0,y:0},{x:c+p,y:u},{width:1,height:d})}this.dirty=!0},i.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},i.prototype.dispatchRenderCallbacks=function(t){for(var e=0,i=t;e<i.length;e+=1){var o=i[e];if(!this.callbackDispatchedThisFrame[o]){this.callbackDispatchedThisFrame[o]=!0;var r=this.images[o];h(r)&&this.updateImage(o,r)}}},i}(t.Evented),d=m,_=m,f=1e20;function m(t,e,i,o,r,a){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=o||.25,this.fontFamily=r||"sans-serif",this.fontWeight=a||"normal",this.radius=i||8;var n=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=n,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(n*n),this.gridInner=new Float64Array(n*n),this.f=new Float64Array(n),this.d=new Float64Array(n),this.z=new Float64Array(n+1),this.v=new Int16Array(n),this.middle=Math.round(n/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(t,e,i,o,r,a,n){for(var s=0;s<e;s++){for(var l=0;l<i;l++)o[l]=t[l*e+s];for(v(o,r,a,n,i),l=0;l<i;l++)t[l*e+s]=r[l]}for(l=0;l<i;l++){for(s=0;s<e;s++)o[s]=t[l*e+s];for(v(o,r,a,n,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(r[s])}}function v(t,e,i,o,r){i[0]=0,o[0]=-f,o[1]=+f;for(var a=1,n=0;a<r;a++){for(var s=(t[a]+a*a-(t[i[n]]+i[n]*i[n]))/(2*a-2*i[n]);s<=o[n];)n--,s=(t[a]+a*a-(t[i[n]]+i[n]*i[n]))/(2*a-2*i[n]);i[++n]=a,o[n]=s,o[n+1]=+f}for(a=0,n=0;a<r;a++){for(;o[n+1]<a;)n++;e[a]=(a-i[n])*(a-i[n])+t[i[n]]}}m.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),o=0;o<this.size*this.size;o++){var r=e.data[4*o+3]/255;this.gridOuter[o]=1===r?0:0===r?f:Math.pow(Math.max(0,.5-r),2),this.gridInner[o]=1===r?f:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),o=0;o<this.size*this.size;o++)i[o]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[o]-this.gridInner[o])/this.radius+this.cutoff))));return i},d.default=_;var y=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};y.prototype.setURL=function(t){this.url=t},y.prototype.getGlyphs=function(e,i){var o=this,r=[];for(var a in e)for(var n=0,s=e[a];n<s.length;n+=1)r.push({stack:a,id:s[n]});t.asyncAll(r,(function(t,e){var i=t.stack,r=t.id,a=o.entries[i];a||(a=o.entries[i]={glyphs:{},requests:{},ranges:{}});var n=a.glyphs[r];if(void 0===n){if(n=o._tinySDF(a,i,r))return a.glyphs[r]=n,void e(null,{stack:i,id:r,glyph:n});var s=Math.floor(r/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(a.ranges[s])e(null,{stack:i,id:r,glyph:n});else{var l=a.requests[s];l||(l=a.requests[s]=[],y.loadGlyphRange(i,s,o.url,o.requestManager,(function(t,e){if(e){for(var i in e)o._doesCharSupportLocalGlyph(+i)||(a.glyphs[+i]=e[+i]);a.ranges[s]=!0}for(var r=0,n=l;r<n.length;r+=1)(0,n[r])(t,e);delete a.requests[s]}))),l.push((function(t,o){t?e(t):o&&e(null,{stack:i,id:r,glyph:o[r]||null})}))}}else e(null,{stack:i,id:r,glyph:n})}),(function(t,e){if(t)i(t);else if(e){for(var o={},r=0,a=e;r<a.length;r+=1){var n=a[r],s=n.stack,l=n.id,c=n.glyph;(o[s]||(o[s]={}))[l]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}i(null,o)}}))},y.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},y.prototype._tinySDF=function(e,i,o){var r=this.localIdeographFontFamily;if(r&&this._doesCharSupportLocalGlyph(o)){var a=e.tinySDF;if(!a){var n="400";/bold/i.test(i)?n="900":/medium/i.test(i)?n="500":/light/i.test(i)&&(n="200"),a=e.tinySDF=new y.TinySDF(24,3,8,.25,r,n)}return{id:o,bitmap:new t.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(e,i,o,r,a){var n=256*i,s=n+255,l=r.transformRequest(r.normalizeGlyphsURL(o).replace("{fontstack}",e).replace("{range}",n+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,(function(e,i){if(e)a(e);else if(i){for(var o={},r=0,n=t.parseGlyphPBF(i);r<n.length;r+=1){var s=n[r];o[s.id]=s}a(null,o)}}))},y.TinySDF=d;var x=function(){this.specification=t.styleSpec.light.position};x.prototype.possiblyEvaluate=function(e,i){return t.sphericalToCartesian(e.expression.evaluate(i))},x.prototype.interpolate=function(e,i,o){return{x:t.number(e.x,i.x,o),y:t.number(e.y,i.y,o),z:t.number(e.z,i.z,o)}};var b=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new x,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),w=function(e){function i(i){e.call(this),this._transitionable=new t.Transitionable(b),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(e,i){if(void 0===i&&(i={}),!this._validate(t.validateLight,e,i))for(var o in e){var r=e[o];t.endsWith(o,"-transition")?this._transitionable.setTransition(o.slice(0,-"-transition".length),r):this._transitionable.setValue(o,r)}},i.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},i.prototype._validate=function(e,i,o){return(!o||!1!==o.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},i}(t.Evented),T=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};T.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]},T.prototype.getDashRanges=function(t,e,i){var o=[],r=t.length%2==1?-t[t.length-1]*i:0,a=t[0]*i,n=!0;o.push({left:r,right:a,isDash:n,zeroLength:0===t[0]});for(var s=t[0],l=1;l<t.length;l++){var c=t[l];o.push({left:r=s*i,right:a=(s+=c)*i,isDash:n=!n,zeroLength:0===c})}return o},T.prototype.addRoundDash=function(t,e,i){for(var o=e/2,r=-i;r<=i;r++)for(var a=this.width*(this.nextRow+i+r),n=0,s=t[n],l=0;l<this.width;l++){l/s.right>1&&(s=t[++n]);var c=Math.abs(l-s.left),u=Math.abs(l-s.right),h=Math.min(c,u),p=void 0,d=r/i*(o+1);if(s.isDash){var _=o-Math.abs(d);p=Math.sqrt(h*h+_*_)}else p=o-Math.sqrt(h*h+d*d);this.data[a+l]=Math.max(0,Math.min(255,p+128))}},T.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var i=t[e],o=t[e+1];i.zeroLength?t.splice(e,1):o&&o.isDash===i.isDash&&(o.left=i.left,t.splice(e,1))}var r=t[0],a=t[t.length-1];r.isDash===a.isDash&&(r.left=a.left-this.width,a.right=r.right+this.width);for(var n=this.width*this.nextRow,s=0,l=t[s],c=0;c<this.width;c++){c/l.right>1&&(l=t[++s]);var u=Math.abs(c-l.left),h=Math.abs(c-l.right),p=Math.min(u,h);this.data[n+c]=Math.max(0,Math.min(255,(l.isDash?p:-p)+128))}},T.prototype.addDash=function(e,i){var o=i?7:0,r=2*o+1;if(this.nextRow+r>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var a=0,n=0;n<e.length;n++)a+=e[n];if(0!==a){var s=this.width/a,l=this.getDashRanges(e,this.width,s);i?this.addRoundDash(l,s,o):this.addRegularDash(l)}var c={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:a};return this.nextRow+=r,this.dirty=!0,c},T.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var E=function e(i,o){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var r=this.workerPool.acquire(this.id),a=0;a<r.length;a++){var n=new e.Actor(r[a],o,this.id);n.name="Worker "+a,this.actors.push(n)}};function I(e,i,o){var r=function(r,a){if(r)return o(r);if(a){var n=t.pick(t.extend(a,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);a.vector_layers&&(n.vectorLayers=a.vector_layers,n.vectorLayerIds=n.vectorLayers.map((function(t){return t.id}))),n.tiles=i.canonicalizeTileset(n,e.url),o(null,n)}};return e.url?t.getJSON(i.transformRequest(i.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.browser.frame((function(){return r(null,e)}))}E.prototype.broadcast=function(e,i,o){t.asyncAll(this.actors,(function(t,o){t.send(e,i,o)}),o=o||function(){})},E.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},E.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},E.Actor=t.Actor;var P=function(e,i,o){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=o||24};P.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},P.prototype.contains=function(e){var i=Math.pow(2,e.z),o=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),a=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),n=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=o&&e.x<a&&e.y>=r&&e.y<n};var S=function(e){function i(i,o,r,a){if(e.call(this),this.id=i,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(o,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,(function(i,o){e._tileJSONRequest=null,e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):o&&(t.extend(e,o),o.bounds&&(e.tileBounds=new P(o.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(o.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(o.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.loadTile=function(e,i){var o=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(o,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function a(o,r){return delete e.request,e.aborted?i(null):o&&404!==o.status?i(o):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=i:e.request=e.actor.send("reloadTile",r,a.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",r,a.bind(this)))},i.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i.prototype.hasTransition=function(){return!1},i}(t.Evented),C=function(e){function i(i,o,r,a){e.call(this),this.id=i,this.dispatcher=r,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},o),t.extend(this,t.pick(o,["url","scheme","tileSize"]))}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,(function(i,o){e._tileJSONRequest=null,e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):o&&(t.extend(e,o),o.bounds&&(e.tileBounds=new P(o.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(o.tiles),t.postMapLoadEvent(o.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.loadTile=function(e,i){var o=this,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),(function(r,a){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(r)e.state="errored",i(r);else if(a){o.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;var n=o.map.painter.context,s=n.gl;e.texture=o.map.painter.getTileTexture(a.width),e.texture?e.texture.update(a,{useMipmap:!0}):(e.texture=new t.Texture(n,a,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),n.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(o.dispatcher),i(null)}}))},i.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},i.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},i.prototype.hasTransition=function(){return!1},i}(t.Evented),z=function(e){function i(i,o,r,a){e.call(this,i,o,r,a),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(e,i){var o=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function r(t,o){t&&(e.state="errored",i(t)),o&&(e.dem=o,e.needsHillshadePrepare=!0,e.state="loaded",i(null))}e.request=t.getImage(this.map._requestManager.transformRequest(o,t.ResourceType.Tile),function(o,a){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(o)e.state="errored",i(o);else if(a){this.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;var n=t.window.ImageBitmap&&a instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?a:t.browser.getImageData(a,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:n,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,r.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},i.prototype._getNeighboringTiles=function(e){var i=e.canonical,o=Math.pow(2,i.z),r=(i.x-1+o)%o,a=0===i.x?e.wrap-1:e.wrap,n=(i.x+1+o)%o,s=i.x+1===o?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y-1).key]={backfilled:!1}),i.y+1<o&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y+1).key]={backfilled:!1}),l},i.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},i}(C),D=function(e){function i(i,o,r,a){e.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(a),this._data=o.data,this._options=t.extend({},o),this._collectResourceTiming=o.collectResourceTiming,this._resourceTiming=[],void 0!==o.maxzoom&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;var n=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(void 0!==o.buffer?o.buffer:128)*n,tolerance:(void 0!==o.tolerance?o.tolerance:.375)*n,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:void 0!==o.clusterMaxZoom?Math.min(o.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:t.EXTENT,radius:(o.clusterRadius||50)*n,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties},o.workerOptions)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(i){if(i)e.fire(new t.ErrorEvent(i));else{var o={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(o.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",o))}}))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setData=function(e){var i=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)i.fire(new t.ErrorEvent(e));else{var o={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(o.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new t.Event("data",o))}})),this},i.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},i.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},i.prototype.getClusterLeaves=function(t,e,i,o){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},o),this},i.prototype._updateWorkerData=function(e){var i=this;this._loaded=!1;var o=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(o.request=this.map._requestManager.transformRequest(t.browser.resolveURL(r),t.ResourceType.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(r),this.actor.send(this.type+".loadData",o,(function(t,r){i._removed||r&&r.abandoned||(i._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[i.id]&&(i._resourceTiming=r.resourceTiming[i.id].slice(0)),i.actor.send(i.type+".coalesce",{source:o.source},null),e(t))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.loadTile=function(e,i){var o=this,r=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(r,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,a){return delete e.request,e.unloadVectorData(),e.aborted?i(null):t?i(t):(e.loadVectorData(a,o.map.painter,"reloadTile"===r),i(null))}))},i.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},i.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},i.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},i.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(t.Evented),M=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),L=function(e){function i(t,i,o,r){e.call(this),this.id=t,this.dispatcher=o,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=i}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(e,i){var o=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(r,a){o._loaded=!0,r?o.fire(new t.ErrorEvent(r)):a&&(o.image=a,e&&(o.coordinates=e),i&&i(),o._finishLoading())}))},i.prototype.loaded=function(){return this._loaded},i.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setCoordinates=function(e){var i=this;this.coordinates=e;var o=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var i=1/0,o=1/0,r=-1/0,a=-1/0,n=0,s=e;n<s.length;n+=1){var l=s[n];i=Math.min(i,l.x),o=Math.min(o,l.y),r=Math.max(r,l.x),a=Math.max(a,l.y)}var c=Math.max(r-i,a-o),u=Math.max(0,Math.floor(-Math.log(c)/Math.LN2)),h=Math.pow(2,u);return new t.CanonicalTileID(u,Math.floor((i+r)/2*h),Math.floor((o+a)/2*h))}(o),this.minzoom=this.maxzoom=this.tileID.z;var r=o.map((function(t){return i.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,i=e.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[o];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},i.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(t.Evented),A=function(e){function i(t,i,o,r){e.call(this,t,i,o,r),this.roundZoom=!0,this.type="video",this.options=i}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1;var i=this.options;this.urls=[];for(var o=0,r=i.urls;o<r.length;o+=1)this.urls.push(this.map._requestManager.transformRequest(r[o],t.ResourceType.Source).url);t.getVideo(this.urls,(function(i,o){e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):o&&(e.video=o,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},i.prototype.pause=function(){this.video&&this.video.pause()},i.prototype.play=function(){this.video&&this.video.play()},i.prototype.seek=function(e){if(this.video){var i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+i.start(0)+" and "+i.end(0)+"-second mark."))):this.video.currentTime=e}},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,i=e.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[o];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(L),R=function(e){function i(i,o,r,a){e.call(this,i,o,r,a),o.coordinates?Array.isArray(o.coordinates)&&4===o.coordinates.length&&!o.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "coordinates"'))),o.animate&&"boolean"!=typeof o.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value'))),o.canvas?"string"==typeof o.canvas||o.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "canvas"'))),this.options=o,this.animate=void 0===o.animate||o.animate}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,o=i.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(i,this.canvas,o.RGBA,{premultiply:!0}),this.tiles){var a=this.tiles[r];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},i}(L),k={vector:S,raster:C,"raster-dem":z,geojson:D,video:A,image:L,canvas:R};function B(e,i){var o=t.identity([]);return t.translate(o,o,[1,1,0]),t.scale(o,o,[.5*e.width,.5*e.height,1]),t.multiply(o,o,e.calculatePosMatrix(i.toUnwrapped()))}function O(t,e,i,o,r,a){var n=function(t,e,i){if(t)for(var o=0,r=t;o<r.length;o+=1){var a=e[r[o]];if(a&&a.source===i&&"fill-extrusion"===a.type)return!0}else for(var n in e){var s=e[n];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(r&&r.layers,e,t.id),s=a.maxPitchScaleFactor(),l=t.tilesIn(o,s,n);l.sort(F);for(var c=[],u=0,h=l;u<h.length;u+=1){var p=h[u];c.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(e,i,t._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,r,a,s,B(t.transform,p.tileID))})}var d=function(t){for(var e={},i={},o=0,r=t;o<r.length;o+=1){var a=r[o],n=a.queryResults,s=a.wrappedTileID,l=i[s]=i[s]||{};for(var c in n)for(var u=n[c],h=l[c]=l[c]||{},p=e[c]=e[c]||[],d=0,_=u;d<_.length;d+=1){var f=_[d];h[f.featureIndex]||(h[f.featureIndex]=!0,p.push(f))}}return e}(c);for(var _ in d)d[_].forEach((function(e){var i=e.feature,o=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}));return d}function F(t,e){var i=t.tileID,o=e.tileID;return i.overscaledZ-o.overscaledZ||i.canonical.y-o.canonical.y||i.wrap-o.wrap||i.canonical.x-o.canonical.x}var U=function(t,e){this.max=t,this.onRemove=e,this.reset()};U.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var o=i[e];o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value)}return this.data={},this.order=[],this},U.prototype.add=function(t,e,i){var o=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var a={value:e,timeout:void 0};if(void 0!==i&&(a.timeout=setTimeout((function(){o.remove(t,a)}),i)),this.data[r].push(a),this.order.push(r),this.order.length>this.max){var n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this},U.prototype.has=function(t){return t.wrapped().key in this.data},U.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},U.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},U.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},U.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},U.prototype.remove=function(t,e){if(!this.has(t))return this;var i=t.wrapped().key,o=void 0===e?0:this.data[i].indexOf(e),r=this.data[i][o];return this.data[i].splice(o,1),r.timeout&&clearTimeout(r.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(r.value),this.order.splice(this.order.indexOf(i),1),this},U.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},U.prototype.filter=function(t){var e=[];for(var i in this.data)for(var o=0,r=this.data[i];o<r.length;o+=1){var a=r[o];t(a.value)||e.push(a)}for(var n=0,s=e;n<s.length;n+=1){var l=s[n];this.remove(l.value.tileID,l)}};var N=function(t,e,i){this.context=t;var o=t.gl;this.buffer=o.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),o.bufferData(o.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};N.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},N.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},N.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Z={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},j=function(t,e,i,o){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=o,this.context=t;var r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};j.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},j.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},j.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var o=e.attributes[this.attributes[i].name];void 0!==o&&t.enableVertexAttribArray(o)}},j.prototype.setVertexAttribPointers=function(t,e,i){for(var o=0;o<this.attributes.length;o++){var r=this.attributes[o],a=e.attributes[r.name];void 0!==a&&t.vertexAttribPointer(a,r.components,t[Z[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0))}},j.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var q=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};q.prototype.get=function(){return this.current},q.prototype.set=function(t){},q.prototype.getDefault=function(){return this.default},q.prototype.setDefault=function(){this.set(this.default)};var V=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(q),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(q),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(q),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(q),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(q),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(q),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(q),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(q),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(q),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(q),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(q),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(q),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(q),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(q),rt=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(q),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(q),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(q),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(q),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(q),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(q),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(q),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(q),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(q),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(q),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(q),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(q),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(q),gt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(q),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(q),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(q),xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(q),bt=function(t){function e(e,i){t.call(this,e),this.context=e,this.parent=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(q),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(bt),Tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(bt),Et=function(t,e,i,o){this.context=t,this.width=e,this.height=i;var r=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new wt(t,r),o&&(this.depthAttachment=new Tt(t,r))};Et.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var i=this.depthAttachment.get();i&&t.deleteRenderbuffer(i)}t.deleteFramebuffer(this.framebuffer)};var It=function(t,e,i){this.func=t,this.mask=e,this.range=i};It.ReadOnly=!1,It.ReadWrite=!0,It.disabled=new It(519,It.ReadOnly,[0,1]);var Pt=function(t,e,i,o,r,a){this.test=t,this.ref=e,this.mask=i,this.fail=o,this.depthFail=r,this.pass=a};Pt.disabled=new Pt({func:519,mask:0},0,0,7680,7680,7680);var St=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i};St.disabled=new St(St.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),St.unblended=new St(St.Replace,t.Color.transparent,[!0,!0,!0,!0]),St.alphaBlended=new St([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Ct=function(t,e,i){this.enable=t,this.mode=e,this.frontFace=i};Ct.disabled=new Ct(!1,1029,2305),Ct.backCCW=new Ct(!0,1029,2305);var zt=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new V(this),this.clearDepth=new G(this),this.clearStencil=new W(this),this.colorMask=new X(this),this.depthMask=new H(this),this.stencilMask=new K(this),this.stencilFunc=new Y(this),this.stencilOp=new J(this),this.stencilTest=new Q(this),this.depthRange=new $(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new it(this),this.blendFunc=new ot(this),this.blendColor=new rt(this),this.blendEquation=new at(this),this.cullFace=new nt(this),this.cullFaceSide=new st(this),this.frontFace=new lt(this),this.program=new ct(this),this.activeTexture=new ut(this),this.viewport=new ht(this),this.bindFramebuffer=new pt(this),this.bindRenderbuffer=new dt(this),this.bindTexture=new _t(this),this.bindVertexBuffer=new ft(this),this.bindElementBuffer=new mt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new gt(this),this.pixelStoreUnpack=new vt(this),this.pixelStoreUnpackPremultiplyAlpha=new yt(this),this.pixelStoreUnpackFlipY=new xt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query")};zt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},zt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},zt.prototype.createIndexBuffer=function(t,e){return new N(this,t,e)},zt.prototype.createVertexBuffer=function(t,e,i){return new j(this,t,e,i)},zt.prototype.createRenderbuffer=function(t,e,i){var o=this.gl,r=o.createRenderbuffer();return this.bindRenderbuffer.set(r),o.renderbufferStorage(o.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),r},zt.prototype.createFramebuffer=function(t,e,i){return new Et(this,t,e,i)},zt.prototype.clear=function(t){var e=t.color,i=t.depth,o=this.gl,r=0;e&&(r|=o.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(r|=o.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),o.clear(r)},zt.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},zt.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},zt.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},zt.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,St.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},zt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Dt=function(e){function i(i,o,r){var a=this;e.call(this),this.id=i,this.dispatcher=r,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(a._sourceLoaded=!0),a._sourceLoaded&&!a._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))})),this.on("error",(function(){a._sourceErrored=!0})),this._source=function(e,i,o,r){var a=new k[i.type](e,i,o,r);if(a.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+a.id);return t.bindAll(["load","abort","unload","serialize","prepare"],a),a}(i,o,r,this),this._tiles={},this._cache=new U(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},i.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},i.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},i.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}},i.prototype.getIds=function(){return t.values(this._tiles).map((function(t){return t.tileID})).sort(Mt).map((function(t){return t.key}))},i.prototype.getRenderableIds=function(e){var i=this,o=[];for(var r in this._tiles)this._isIdRenderable(r,e)&&o.push(this._tiles[r]);return e?o.sort((function(e,o){var r=e.tileID,a=o.tileID,n=new t.Point(r.canonical.x,r.canonical.y)._rotate(i.transform.angle),s=new t.Point(a.canonical.x,a.canonical.y)._rotate(i.transform.angle);return r.overscaledZ-a.overscaledZ||s.y-n.y||s.x-n.x})).map((function(t){return t.tileID.key})):o.map((function(t){return t.tileID})).sort(Mt).map((function(t){return t.key}))},i.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},i.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},i.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},i.prototype._tileLoaded=function(e,i,o,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new t.ErrorEvent(r,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===o&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},i.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),i=0;i<e.length;i++){var o=e[i];if(t.neighboringTiles&&t.neighboringTiles[o]){var r=this.getTileByID(o);a(t,r),a(r,t)}}function a(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,o=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),a=e.tileID.key;0===i&&0===o||Math.abs(o)>1||(Math.abs(i)>1&&(1===Math.abs(i+r)?i+=r:1===Math.abs(i-r)&&(i-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,o),t.neighboringTiles&&t.neighboringTiles[a]&&(t.neighboringTiles[a].backfilled=!0)))}},i.prototype.getTile=function(t){return this.getTileByID(t.key)},i.prototype.getTileByID=function(t){return this._tiles[t]},i.prototype._retainLoadedChildren=function(t,e,i,o){for(var r in this._tiles){var a=this._tiles[r];if(!(o[r]||!a.hasData()||a.tileID.overscaledZ<=e||a.tileID.overscaledZ>i)){for(var n=a.tileID;a&&a.tileID.overscaledZ>e+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(n=s)}for(var l=n;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){o[n.key]=n;break}}}},i.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(var o=t.overscaledZ-1;o>=e;o--){var r=t.scaledTo(o),a=this._getLoadedTile(r);if(a)return a}},i.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},i.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,o=Math.floor(e*i*5),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(r)},i.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var i={};for(var o in this._tiles){var r=this._tiles[o];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),i[r.tileID.key]=r}for(var a in this._tiles=i,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var n in this._tiles)this._setTileReloadTimer(n,this._tiles[n])}},i.prototype.update=function(e){var o=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter((function(t){return o._source.hasTile(t)})))):r=[];var a=e.coveringZoomLevel(this._source),n=Math.max(a-i.maxOverzooming,this._source.minzoom),s=Math.max(a+i.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(r,a);if(Lt(this._source.type)){for(var c={},u={},h=0,p=Object.keys(l);h<p.length;h+=1){var d=p[h],_=l[d],f=this._tiles[d];if(f&&!(f.fadeEndTime&&f.fadeEndTime<=t.browser.now())){var m=this.findLoadedParent(_,n);m&&(this._addTile(m.tileID),c[m.tileID.key]=m.tileID),u[d]=_}}for(var g in this._retainLoadedChildren(u,a,s,l),c)l[g]||(this._coveredTiles[g]=!0,l[g]=c[g])}for(var v in l)this._tiles[v].clearFadeHold();for(var y=0,x=t.keysDifference(this._tiles,l);y<x.length;y+=1){var b=x[y],w=this._tiles[b];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(b)}this._updateLoadedParentTileCache()}},i.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},i.prototype._updateRetainedTiles=function(t,e){for(var o={},r={},a=Math.max(e-i.maxOverzooming,this._source.minzoom),n=Math.max(e+i.maxUnderzooming,this._source.minzoom),s={},l=0,c=t;l<c.length;l+=1){var u=c[l],h=this._addTile(u);o[u.key]=u,h.hasData()||e<this._source.maxzoom&&(s[u.key]=u)}this._retainLoadedChildren(s,e,n,o);for(var p=0,d=t;p<d.length;p+=1){var _=d[p],f=this._tiles[_.key];if(!f.hasData()){if(e+1>this._source.maxzoom){var m=_.children(this._source.maxzoom)[0],g=this.getTile(m);if(g&&g.hasData()){o[m.key]=m;continue}}else{var v=_.children(this._source.maxzoom);if(o[v[0].key]&&o[v[1].key]&&o[v[2].key]&&o[v[3].key])continue}for(var y=f.wasRequested(),x=_.overscaledZ-1;x>=a;--x){var b=_.scaledTo(x);if(r[b.key])break;if(r[b.key]=!0,!(f=this.getTile(b))&&y&&(f=this._addTile(b)),f&&(o[b.key]=b,y=f.wasRequested(),f.hasData()))break}}}return o},i.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],i=void 0,o=this._tiles[t].tileID;o.overscaledZ>0;){if(o.key in this._loadedParentTiles){i=this._loadedParentTiles[o.key];break}e.push(o.key);var r=o.scaledTo(o.overscaledZ-1);if(i=this._getLoadedTile(r))break;o=r}for(var a=0,n=e;a<n.length;a+=1)this._loadedParentTiles[n[a]]=i}},i.prototype._addTile=function(e){var i=this._tiles[e.key];if(i)return i;(i=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));var o=Boolean(i);return o||(i=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))),i?(i.uses++,this._tiles[e.key]=i,o||this._source.fire(new t.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var o=e.getExpiryTimeout();o&&(this._timers[t]=setTimeout((function(){i._reloadTile(t,"expired"),delete i._timers[t]}),o))},i.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},i.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},i.prototype.tilesIn=function(e,i,o){var r=this,a=[],n=this.transform;if(!n)return a;for(var s=o?n.getCameraQueryGeometry(e):e,l=e.map((function(t){return n.pointCoordinate(t)})),c=s.map((function(t){return n.pointCoordinate(t)})),u=this.getIds(),h=1/0,p=1/0,d=-1/0,_=-1/0,f=0,m=c;f<m.length;f+=1){var g=m[f];h=Math.min(h,g.x),p=Math.min(p,g.y),d=Math.max(d,g.x),_=Math.max(_,g.y)}for(var v=function(e){var o=r._tiles[u[e]];if(!o.holdingForFade()){var s=o.tileID,f=Math.pow(2,n.zoom-o.tileID.overscaledZ),m=i*o.queryPadding*t.EXTENT/o.tileSize/f,g=[s.getTilePoint(new t.MercatorCoordinate(h,p)),s.getTilePoint(new t.MercatorCoordinate(d,_))];if(g[0].x-m<t.EXTENT&&g[0].y-m<t.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){var v=l.map((function(t){return s.getTilePoint(t)})),y=c.map((function(t){return s.getTilePoint(t)}));a.push({tile:o,tileID:s,queryGeometry:v,cameraQueryGeometry:y,scale:f})}}},y=0;y<u.length;y++)v(y);return a},i.prototype.getVisibleCoordinates=function(t){for(var e=this,i=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),o=0,r=i;o<r.length;o+=1){var a=r[o];a.posMatrix=this.transform.calculatePosMatrix(a.toUnwrapped())}return i},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Lt(this._source.type))for(var e in this._tiles){var i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=t.browser.now())return!0}return!1},i.prototype.setFeatureState=function(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)},i.prototype.removeFeatureState=function(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)},i.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},i.prototype.setDependencies=function(t,e,i){var o=this._tiles[t];o&&o.setDependencies(e,i)},i.prototype.reloadTilesForDependencies=function(t,e){for(var i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(i,"reloading");this._cache.filter((function(i){return!i.hasDependency(t,e)}))},i}(t.Evented);function Mt(t,e){var i=Math.abs(2*t.wrap)-+(t.wrap<0),o=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||o-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Lt(t){return"raster"===t||"image"===t||"video"===t}function At(){return new t.window.Worker(Hr.workerUrl)}Dt.maxOverzooming=10,Dt.maxUnderzooming=3;var Rt="mapboxgl_preloaded_worker_pool",kt=function(){this.active={}};kt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<kt.workerCount;)this.workers.push(new At);return this.active[t]=!0,this.workers.slice()},kt.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},kt.prototype.isPreloaded=function(){return!!this.active[Rt]},kt.prototype.numActive=function(){return Object.keys(this.active).length};var Bt,Ot=Math.floor(t.browser.hardwareConcurrency/2);function Ft(){return Bt||(Bt=new kt),Bt}function Ut(e,i){var o={};for(var r in e)"ref"!==r&&(o[r]=e[r]);return t.refProperties.forEach((function(t){t in i&&(o[t]=i[t])})),o}function Nt(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var o=0;o<t.length;o++)"ref"in t[o]&&(t[o]=Ut(t[o],e[t[o].ref]));return t}kt.workerCount=Math.max(Math.min(Ot,6),1);var Zt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function jt(t,e,i){i.push({command:Zt.addSource,args:[t,e[t]]})}function qt(t,e,i){e.push({command:Zt.removeSource,args:[t]}),i[t]=!0}function Vt(t,e,i,o){qt(t,i,o),jt(t,e,i)}function Gt(e,i,o){var r;for(r in e[o])if(e[o].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[o][r],i[o][r]))return!1;for(r in i[o])if(i[o].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[o][r],i[o][r]))return!1;return!0}function Wt(e,i,o,r,a,n){var s;for(s in i=i||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],i[s])||o.push({command:n,args:[r,s,i[s],a]}));for(s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],i[s])||o.push({command:n,args:[r,s,i[s],a]}))}function Xt(t){return t.id}function Ht(t,e){return t[e.id]=e,t}var Kt=function(t,e){this.reset(t,e)};Kt.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Kt.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var i=1,o=this._distances[i],r=e*this.paddedLength+this.padding;o<r&&i<this._distances.length;)o=this._distances[++i];var a=i-1,n=this._distances[a],s=o-n,l=s>0?(r-n)/s:0;return this.points[a].mult(1-l).add(this.points[i].mult(l))};var Yt=function(t,e,i){var o=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var a=0;a<this.xCellCount*this.yCellCount;a++)o.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Jt(e,i,o,r,a){var n=t.create();return i?(t.scale(n,n,[1/a,1/a,1]),o||t.rotateZ(n,n,r.angle)):t.multiply(n,r.labelPlaneMatrix,e),n}function Qt(e,i,o,r,a){if(i){var n=t.clone(e);return t.scale(n,n,[a,a,1]),o||t.rotateZ(n,n,-r.angle),n}return r.glCoordMatrix}function $t(e,i){var o=[e.x,e.y,0,1];ue(o,o,i);var r=o[3];return{point:new t.Point(o[0]/r,o[1]/r),signedDistanceFromCamera:r}}function te(t,e){return.5+t/e*.5}function ee(t,e){var i=t[0]/t[3],o=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&o>=-e[1]&&o<=e[1]}function ie(e,i,o,r,a,n,s,l){var c=r?e.textSizeData:e.iconSizeData,u=t.evaluateSizeForZoom(c,o.transform.zoom),h=[256/o.width*2+1,256/o.height*2+1],p=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var d=e.lineVertexArray,_=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,f=o.transform.width/o.transform.height,m=!1,g=0;g<_.length;g++){var v=_.get(g);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!m)ce(v.numGlyphs,p);else{m=!1;var y=[v.anchorX,v.anchorY,0,1];if(t.transformMat4(y,y,i),ee(y,h)){var x=te(o.transform.cameraToCenterDistance,y[3]),b=t.evaluateSizeForFeature(c,u,v),w=s?b/x:b*x,T=new t.Point(v.anchorX,v.anchorY),E=$t(T,a).point,I={},P=ae(v,w,!1,l,i,a,n,e.glyphOffsetArray,d,p,E,T,I,f);m=P.useVertical,(P.notEnoughRoom||m||P.needsFlipping&&ae(v,w,!0,l,i,a,n,e.glyphOffsetArray,d,p,E,T,I,f).notEnoughRoom)&&ce(v.numGlyphs,p)}else ce(v.numGlyphs,p)}}r?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function oe(t,e,i,o,r,a,n,s,l,c,u){var h=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,_=e.getoffsetX(s.glyphStartIndex),f=e.getoffsetX(h-1),m=se(t*_,i,o,r,a,n,s.segment,p,d,l,c,u);if(!m)return null;var g=se(t*f,i,o,r,a,n,s.segment,p,d,l,c,u);return g?{first:m,last:g}:null}function re(e,i,o,r){return e===t.WritingMode.horizontal&&Math.abs(o.y-i.y)>Math.abs(o.x-i.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?i.y<o.y:i.x>o.x)?{needsFlipping:!0}:null}function ae(e,i,o,r,a,n,s,l,c,u,h,p,d,_){var f,m=i/24,g=e.lineOffsetX*m,v=e.lineOffsetY*m;if(e.numGlyphs>1){var y=e.glyphStartIndex+e.numGlyphs,x=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,w=oe(m,l,g,v,o,h,p,e,c,n,d);if(!w)return{notEnoughRoom:!0};var T=$t(w.first.point,s).point,E=$t(w.last.point,s).point;if(r&&!o){var I=re(e.writingMode,T,E,_);if(I)return I}f=[w.first];for(var P=e.glyphStartIndex+1;P<y-1;P++)f.push(se(m*l.getoffsetX(P),g,v,o,h,p,e.segment,x,b,c,n,d));f.push(w.last)}else{if(r&&!o){var S=$t(p,a).point,C=e.lineStartIndex+e.segment+1,z=new t.Point(c.getx(C),c.gety(C)),D=$t(z,a),M=D.signedDistanceFromCamera>0?D.point:ne(p,z,S,1,a),L=re(e.writingMode,S,M,_);if(L)return L}var A=se(m*l.getoffsetX(e.glyphStartIndex),g,v,o,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,n,d);if(!A)return{notEnoughRoom:!0};f=[A]}for(var R=0,k=f;R<k.length;R+=1){var B=k[R];t.addDynamicAttributes(u,B.point,B.angle)}return{}}function ne(t,e,i,o,r){var a=$t(t.add(t.sub(e)._unit()),r).point,n=i.sub(a);return i.add(n._mult(o/n.mag()))}function se(e,i,o,r,a,n,s,l,c,u,h,p){var d=r?e-i:e+i,_=d>0?1:-1,f=0;r&&(_*=-1,f=Math.PI),_<0&&(f+=Math.PI);for(var m=_>0?l+s:l+s+1,g=a,v=a,y=0,x=0,b=Math.abs(d),w=[];y+x<=b;){if((m+=_)<l||m>=c)return null;if(v=g,w.push(g),void 0===(g=p[m])){var T=new t.Point(u.getx(m),u.gety(m)),E=$t(T,h);if(E.signedDistanceFromCamera>0)g=p[m]=E.point;else{var I=m-_;g=ne(0===y?n:new t.Point(u.getx(I),u.gety(I)),T,v,b-y+1,h)}}y+=x,x=v.dist(g)}var P=(b-y)/x,S=g.sub(v),C=S.mult(P)._add(v);C._add(S._unit()._perp()._mult(o*_));var z=f+Math.atan2(g.y-v.y,g.x-v.x);return w.push(C),{point:C,angle:z,path:w}}Yt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Yt.prototype.insert=function(t,e,i,o,r){this._forEachCell(e,i,o,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(o),this.bboxes.push(r)},Yt.prototype.insertCircle=function(t,e,i,o){this._forEachCell(e-o,i-o,e+o,i+o,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(o)},Yt.prototype._insertBoxCell=function(t,e,i,o,r,a){this.boxCells[r].push(a)},Yt.prototype._insertCircleCell=function(t,e,i,o,r,a){this.circleCells[r].push(a)},Yt.prototype._query=function(t,e,i,o,r,a){if(i<0||t>this.width||o<0||e>this.height)return!r&&[];var n=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=o){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)n.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var c=this.circles[3*l],u=this.circles[3*l+1],h=this.circles[3*l+2];n.push({key:this.circleKeys[l],x1:c-h,y1:u-h,x2:c+h,y2:u+h})}return a?n.filter(a):n}return this._forEachCell(t,e,i,o,this._queryCell,n,{hitTest:r,seenUids:{box:{},circle:{}}},a),r?n.length>0:n},Yt.prototype._queryCircle=function(t,e,i,o,r){var a=t-i,n=t+i,s=e-i,l=e+i;if(n<0||a>this.width||l<0||s>this.height)return!o&&[];var c=[];return this._forEachCell(a,s,n,l,this._queryCellCircle,c,{hitTest:o,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},r),o?c.length>0:c},Yt.prototype.query=function(t,e,i,o,r){return this._query(t,e,i,o,!1,r)},Yt.prototype.hitTest=function(t,e,i,o,r){return this._query(t,e,i,o,!0,r)},Yt.prototype.hitTestCircle=function(t,e,i,o){return this._queryCircle(t,e,i,!0,o)},Yt.prototype._queryCell=function(t,e,i,o,r,a,n,s){var l=n.seenUids,c=this.boxCells[r];if(null!==c)for(var u=this.bboxes,h=0,p=c;h<p.length;h+=1){var d=p[h];if(!l.box[d]){l.box[d]=!0;var _=4*d;if(t<=u[_+2]&&e<=u[_+3]&&i>=u[_+0]&&o>=u[_+1]&&(!s||s(this.boxKeys[d]))){if(n.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:u[_],y1:u[_+1],x2:u[_+2],y2:u[_+3]})}}}var f=this.circleCells[r];if(null!==f)for(var m=this.circles,g=0,v=f;g<v.length;g+=1){var y=v[g];if(!l.circle[y]){l.circle[y]=!0;var x=3*y;if(this._circleAndRectCollide(m[x],m[x+1],m[x+2],t,e,i,o)&&(!s||s(this.circleKeys[y]))){if(n.hitTest)return a.push(!0),!0;var b=m[x],w=m[x+1],T=m[x+2];a.push({key:this.circleKeys[y],x1:b-T,y1:w-T,x2:b+T,y2:w+T})}}}},Yt.prototype._queryCellCircle=function(t,e,i,o,r,a,n,s){var l=n.circle,c=n.seenUids,u=this.boxCells[r];if(null!==u)for(var h=this.bboxes,p=0,d=u;p<d.length;p+=1){var _=d[p];if(!c.box[_]){c.box[_]=!0;var f=4*_;if(this._circleAndRectCollide(l.x,l.y,l.radius,h[f+0],h[f+1],h[f+2],h[f+3])&&(!s||s(this.boxKeys[_])))return a.push(!0),!0}}var m=this.circleCells[r];if(null!==m)for(var g=this.circles,v=0,y=m;v<y.length;v+=1){var x=y[v];if(!c.circle[x]){c.circle[x]=!0;var b=3*x;if(this._circlesCollide(g[b],g[b+1],g[b+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[x])))return a.push(!0),!0}}},Yt.prototype._forEachCell=function(t,e,i,o,r,a,n,s){for(var l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(o),p=l;p<=u;p++)for(var d=c;d<=h;d++)if(r.call(this,t,e,i,o,this.xCellCount*d+p,a,n,s))return},Yt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Yt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Yt.prototype._circlesCollide=function(t,e,i,o,r,a){var n=o-t,s=r-e,l=i+a;return l*l>n*n+s*s},Yt.prototype._circleAndRectCollide=function(t,e,i,o,r,a,n){var s=(a-o)/2,l=Math.abs(t-(o+s));if(l>s+i)return!1;var c=(n-r)/2,u=Math.abs(e-(r+c));if(u>c+i)return!1;if(l<=s||u<=c)return!0;var h=l-s,p=u-c;return h*h+p*p<=i*i};var le=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ce(t,e){for(var i=0;i<t;i++){var o=e.length;e.resize(o+4),e.float32.set(le,3*o)}}function ue(t,e,i){var o=e[0],r=e[1];return t[0]=i[0]*o+i[4]*r+i[12],t[1]=i[1]*o+i[5]*r+i[13],t[3]=i[3]*o+i[7]*r+i[15],t}var he=function(t,e,i){void 0===e&&(e=new Yt(t.width+200,t.height+200,25)),void 0===i&&(i=new Yt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function pe(e,i,o){return i*(t.EXTENT/(e.tileSize*Math.pow(2,o-e.tileID.overscaledZ)))}he.prototype.placeCollisionBox=function(t,e,i,o,r){var a=this.projectAndGetPerspectiveRatio(o,t.anchorPointX,t.anchorPointY),n=i*a.perspectiveRatio,s=t.x1*n+a.point.x,l=t.y1*n+a.point.y,c=t.x2*n+a.point.x,u=t.y2*n+a.point.y;return!this.isInsideGrid(s,l,c,u)||!e&&this.grid.hitTest(s,l,c,u,r)?{box:[],offscreen:!1}:{box:[s,l,c,u],offscreen:this.isOffscreen(s,l,c,u)}},he.prototype.placeCollisionCircles=function(e,i,o,r,a,n,s,l,c,u,h,p,d){var _=[],f=new t.Point(i.anchorX,i.anchorY),m=$t(f,n),g=te(this.transform.cameraToCenterDistance,m.signedDistanceFromCamera),v=(u?a/g:a*g)/t.ONE_EM,y=$t(f,s).point,x=oe(v,r,i.lineOffsetX*v,i.lineOffsetY*v,!1,y,f,i,o,s,{}),b=!1,w=!1,T=!0;if(x){for(var E=.5*p*g+d,I=new t.Point(-100,-100),P=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),S=new Kt,C=x.first,z=x.last,D=[],M=C.path.length-1;M>=1;M--)D.push(C.path[M]);for(var L=1;L<z.path.length;L++)D.push(z.path[L]);var A=2.5*E;if(l){var R=D.map((function(t){return $t(t,l)}));D=R.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:R.map((function(t){return t.point}))}var k=[];if(D.length>0){for(var B=D[0].clone(),O=D[0].clone(),F=1;F<D.length;F++)B.x=Math.min(B.x,D[F].x),B.y=Math.min(B.y,D[F].y),O.x=Math.max(O.x,D[F].x),O.y=Math.max(O.y,D[F].y);k=B.x>=I.x&&O.x<=P.x&&B.y>=I.y&&O.y<=P.y?[D]:O.x<I.x||B.x>P.x||O.y<I.y||B.y>P.y?[]:t.clipLine([D],I.x,I.y,P.x,P.y)}for(var U=0,N=k;U<N.length;U+=1){var Z;S.reset(N[U],.25*E),Z=S.length<=.5*E?1:Math.ceil(S.paddedLength/A)+1;for(var j=0;j<Z;j++){var q=j/Math.max(Z-1,1),V=S.lerp(q),G=V.x+100,W=V.y+100;_.push(G,W,E,0);var X=G-E,H=W-E,K=G+E,Y=W+E;if(T=T&&this.isOffscreen(X,H,K,Y),w=w||this.isInsideGrid(X,H,K,Y),!e&&this.grid.hitTestCircle(G,W,E,h)&&(b=!0,!c))return{circles:[],offscreen:!1,collisionDetected:b}}}}return{circles:!c&&b||!w?[]:_,offscreen:T,collisionDetected:b}},he.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],o=1/0,r=1/0,a=-1/0,n=-1/0,s=0,l=e;s<l.length;s+=1){var c=l[s],u=new t.Point(c.x+100,c.y+100);o=Math.min(o,u.x),r=Math.min(r,u.y),a=Math.max(a,u.x),n=Math.max(n,u.y),i.push(u)}for(var h={},p={},d=0,_=this.grid.query(o,r,a,n).concat(this.ignoredGrid.query(o,r,a,n));d<_.length;d+=1){var f=_[d],m=f.key;if(void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]={}),!h[m.bucketInstanceId][m.featureIndex]){var g=[new t.Point(f.x1,f.y1),new t.Point(f.x2,f.y1),new t.Point(f.x2,f.y2),new t.Point(f.x1,f.y2)];t.polygonIntersectsPolygon(i,g)&&(h[m.bucketInstanceId][m.featureIndex]=!0,void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]=[]),p[m.bucketInstanceId].push(m.featureIndex))}}return p},he.prototype.insertCollisionBox=function(t,e,i,o,r){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:o,collisionGroupID:r},t[0],t[1],t[2],t[3])},he.prototype.insertCollisionCircles=function(t,e,i,o,r){for(var a=e?this.ignoredGrid:this.grid,n={bucketInstanceId:i,featureIndex:o,collisionGroupID:r},s=0;s<t.length;s+=4)a.insertCircle(n,t[s],t[s+1],t[s+2])},he.prototype.projectAndGetPerspectiveRatio=function(e,i,o){var r=[i,o,0,1];return ue(r,r,e),{point:new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},he.prototype.isOffscreen=function(t,e,i,o){return i<100||t>=this.screenRightBoundary||o<100||e>this.screenBottomBoundary},he.prototype.isInsideGrid=function(t,e,i,o){return i>=0&&t<this.gridRightBoundary&&o>=0&&e<this.gridBottomBoundary},he.prototype.getViewportMatrix=function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e};var de=function(t,e,i,o){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):o&&i?1:0,this.placed=i};de.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var _e=function(t,e,i,o,r){this.text=new de(t?t.text:null,e,i,r),this.icon=new de(t?t.icon:null,e,o,r)};_e.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var fe=function(t,e,i){this.text=t,this.icon=e,this.skipFade=i},me=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},ge=function(t,e,i,o,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=o,this.tileID=r},ve=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function ye(e,i,o,r,a){var n=t.getAnchorAlignment(e),s=-(n.horizontalAlign-.5)*i,l=-(n.verticalAlign-.5)*o,c=t.evaluateVariableOffset(e,r);return new t.Point(s+c[0]*a,l+c[1]*a)}function xe(e,i,o,r,a,n){var s=e.x1,l=e.x2,c=e.y1,u=e.y2,h=e.anchorPointX,p=e.anchorPointY,d=new t.Point(i,o);return r&&d._rotate(a?n:-n),{x1:s+d.x,y1:c+d.y,x2:l+d.x,y2:u+d.y,anchorPointX:h,anchorPointY:p}}ve.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var be=function(t,e,i,o){this.transform=t.clone(),this.collisionIndex=new he(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ve(i),this.collisionCircleArrays={},this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={}};function we(t,e,i,o,r){t.emplaceBack(e?1:0,i?1:0,o||0,r||0),t.emplaceBack(e?1:0,i?1:0,o||0,r||0),t.emplaceBack(e?1:0,i?1:0,o||0,r||0),t.emplaceBack(e?1:0,i?1:0,o||0,r||0)}be.prototype.getBucketParts=function(e,i,o,r){var a=o.getBucket(i),n=o.latestFeatureIndex;if(a&&n&&i.id===a.layerIds[0]){var s=o.collisionBoxArray,l=a.layers[0].layout,c=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),u=o.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),p="map"===l.get("text-pitch-alignment"),d="map"===l.get("text-rotation-alignment"),_=pe(o,1,this.transform.zoom),f=Jt(h,p,d,this.transform,_),m=null;if(p){var g=Qt(h,p,d,this.transform,_);m=t.multiply([],this.transform.labelPlaneMatrix,g)}this.retainedQueryData[a.bucketInstanceId]=new ge(a.bucketInstanceId,n,a.sourceLayerIndex,a.index,o.tileID);var v={bucket:a,layout:l,posMatrix:h,textLabelPlaneMatrix:f,labelToScreenMatrix:m,scale:c,textPixelRatio:u,holdingForFade:o.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(r)for(var y=0,x=a.sortKeyRanges;y<x.length;y+=1){var b=x[y];e.push({sortKey:b.sortKey,symbolInstanceStart:b.symbolInstanceStart,symbolInstanceEnd:b.symbolInstanceEnd,parameters:v})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:v})}},be.prototype.attemptAnchorPlacement=function(t,e,i,o,r,a,n,s,l,c,u,h,p,d,_){var f,m=[h.textOffset0,h.textOffset1],g=ye(t,i,o,m,r),v=this.collisionIndex.placeCollisionBox(xe(e,g.x,g.y,a,n,this.transform.angle),u,s,l,c.predicate);if(!_||0!==this.collisionIndex.placeCollisionBox(xe(_,g.x,g.y,a,n,this.transform.angle),u,s,l,c.predicate).box.length)return v.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(f=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:m,width:i,height:o,anchor:t,textBoxScale:r,prevAnchor:f},this.markUsedJustification(p,t,h,d),p.allowVerticalPlacement&&(this.markUsedOrientation(p,d,h),this.placedOrientations[h.crossTileID]=d),{shift:g,placedGlyphBoxes:v}):void 0},be.prototype.placeLayerBucketPart=function(e,i,o){var r=this,a=e.parameters,n=a.bucket,s=a.layout,l=a.posMatrix,c=a.textLabelPlaneMatrix,u=a.labelToScreenMatrix,h=a.textPixelRatio,p=a.holdingForFade,d=a.collisionBoxArray,_=a.partiallyEvaluatedTextSize,f=a.collisionGroup,m=s.get("text-optional"),g=s.get("icon-optional"),v=s.get("text-allow-overlap"),y=s.get("icon-allow-overlap"),x="map"===s.get("text-rotation-alignment"),b="map"===s.get("text-pitch-alignment"),w="none"!==s.get("icon-text-fit"),T="viewport-y"===s.get("symbol-z-order"),E=v&&(y||!n.hasIconData()||g),I=y&&(v||!n.hasTextData()||m);!n.collisionArrays&&d&&n.deserializeCollisionBoxes(d);var P=function(e,a){if(!i[e.crossTileID])if(p)r.placements[e.crossTileID]=new fe(!1,!1,!1);else{var d,T=!1,P=!1,S=!0,C=null,z={box:null,offscreen:null},D={box:null,offscreen:null},M=null,L=null,A=0,R=0,k=0;a.textFeatureIndex?A=a.textFeatureIndex:e.useRuntimeCollisionCircles&&(A=e.featureIndex),a.verticalTextFeatureIndex&&(R=a.verticalTextFeatureIndex);var B=a.textBox;if(B){var O=function(i){var o=t.WritingMode.horizontal;if(n.allowVerticalPlacement&&!i&&r.prevPlacement){var a=r.prevPlacement.placedOrientations[e.crossTileID];a&&(r.placedOrientations[e.crossTileID]=a,r.markUsedOrientation(n,o=a,e))}return o},F=function(i,o){if(n.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&a.verticalTextBox)for(var r=0,s=n.writingModes;r<s.length&&(s[r]===t.WritingMode.vertical?(z=o(),D=z):z=i(),!(z&&z.box&&z.box.length));r+=1);else z=i()};if(s.get("text-variable-anchor")){var U=s.get("text-variable-anchor");if(r.prevPlacement&&r.prevPlacement.variableOffsets[e.crossTileID]){var N=r.prevPlacement.variableOffsets[e.crossTileID];U.indexOf(N.anchor)>0&&(U=U.filter((function(t){return t!==N.anchor}))).unshift(N.anchor)}var Z=function(t,i,o){for(var a=t.x2-t.x1,s=t.y2-t.y1,c=e.textBoxScale,u=w&&!y?i:null,p={box:[],offscreen:!1},d=v?2*U.length:U.length,_=0;_<d;++_){var m=r.attemptAnchorPlacement(U[_%U.length],t,a,s,c,x,b,h,l,f,_>=U.length,e,n,o,u);if(m&&(p=m.placedGlyphBoxes)&&p.box&&p.box.length){T=!0,C=m.shift;break}}return p};F((function(){return Z(B,a.iconBox,t.WritingMode.horizontal)}),(function(){var i=a.verticalTextBox;return n.allowVerticalPlacement&&!(z&&z.box&&z.box.length)&&e.numVerticalGlyphVertices>0&&i?Z(i,a.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),z&&(T=z.box,S=z.offscreen);var j=O(z&&z.box);if(!T&&r.prevPlacement){var q=r.prevPlacement.variableOffsets[e.crossTileID];q&&(r.variableOffsets[e.crossTileID]=q,r.markUsedJustification(n,q.anchor,e,j))}}else{var V=function(t,i){var o=r.collisionIndex.placeCollisionBox(t,v,h,l,f.predicate);return o&&o.box&&o.box.length&&(r.markUsedOrientation(n,i,e),r.placedOrientations[e.crossTileID]=i),o};F((function(){return V(B,t.WritingMode.horizontal)}),(function(){var i=a.verticalTextBox;return n.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&i?V(i,t.WritingMode.vertical):{box:null,offscreen:null}})),O(z&&z.box&&z.box.length)}}if(T=(d=z)&&d.box&&d.box.length>0,S=d&&d.offscreen,e.useRuntimeCollisionCircles){var G=n.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),W=t.evaluateSizeForFeature(n.textSizeData,_,G),X=s.get("text-padding");M=r.collisionIndex.placeCollisionCircles(v,G,n.lineVertexArray,n.glyphOffsetArray,W,l,c,u,o,b,f.predicate,e.collisionCircleDiameter,X),T=v||M.circles.length>0&&!M.collisionDetected,S=S&&M.offscreen}if(a.iconFeatureIndex&&(k=a.iconFeatureIndex),a.iconBox){var H=function(t){var e=w&&C?xe(t,C.x,C.y,x,b,r.transform.angle):t;return r.collisionIndex.placeCollisionBox(e,y,h,l,f.predicate)};P=D&&D.box&&D.box.length&&a.verticalIconBox?(L=H(a.verticalIconBox)).box.length>0:(L=H(a.iconBox)).box.length>0,S=S&&L.offscreen}var K=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,Y=g||0===e.numIconVertices;if(K||Y?Y?K||(P=P&&T):T=P&&T:P=T=P&&T,T&&d&&d.box&&r.collisionIndex.insertCollisionBox(d.box,s.get("text-ignore-placement"),n.bucketInstanceId,D&&D.box&&R?R:A,f.ID),P&&L&&r.collisionIndex.insertCollisionBox(L.box,s.get("icon-ignore-placement"),n.bucketInstanceId,k,f.ID),M&&(T&&r.collisionIndex.insertCollisionCircles(M.circles,s.get("text-ignore-placement"),n.bucketInstanceId,A,f.ID),o)){var J=n.bucketInstanceId,Q=r.collisionCircleArrays[J];void 0===Q&&(Q=r.collisionCircleArrays[J]=new me);for(var $=0;$<M.circles.length;$+=4)Q.circles.push(M.circles[$+0]),Q.circles.push(M.circles[$+1]),Q.circles.push(M.circles[$+2]),Q.circles.push(M.collisionDetected?1:0)}r.placements[e.crossTileID]=new fe(T||E,P||I,S||n.justReloaded),i[e.crossTileID]=!0}};if(T)for(var S=n.getSortedSymbolIndexes(this.transform.angle),C=S.length-1;C>=0;--C){var z=S[C];P(n.symbolInstances.get(z),n.collisionArrays[z])}else for(var D=e.symbolInstanceStart;D<e.symbolInstanceEnd;D++)P(n.symbolInstances.get(D),n.collisionArrays[D]);if(o&&n.bucketInstanceId in this.collisionCircleArrays){var M=this.collisionCircleArrays[n.bucketInstanceId];t.invert(M.invProjMatrix,l),M.viewportMatrix=this.collisionIndex.getViewportMatrix()}n.justReloaded=!1},be.prototype.markUsedJustification=function(e,i,o,r){var a;a=r===t.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(i)];for(var n=0,s=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];n<s.length;n+=1){var l=s[n];l>=0&&(e.text.placedSymbolArray.get(l).crossTileID=a>=0&&l!==a?0:o.crossTileID)}},be.prototype.markUsedOrientation=function(e,i,o){for(var r=i===t.WritingMode.horizontal||i===t.WritingMode.horizontalOnly?i:0,a=i===t.WritingMode.vertical?i:0,n=0,s=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];n<s.length;n+=1)e.text.placedSymbolArray.get(s[n]).placedOrientation=r;o.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=a)},be.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var o=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},a=e?e.variableOffsets:{},n=e?e.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],c=r[s];c?(this.opacities[s]=new _e(c,o,l.text,l.icon),i=i||l.text!==c.text.placed||l.icon!==c.icon.placed):(this.opacities[s]=new _e(null,o,l.text,l.icon,l.skipFade),i=i||l.text||l.icon)}for(var u in r){var h=r[u];if(!this.opacities[u]){var p=new _e(h,o,!1,!1);p.isHidden()||(this.opacities[u]=p,i=i||h.text.placed||h.icon.placed)}}for(var d in a)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=a[d]);for(var _ in n)this.placedOrientations[_]||!this.opacities[_]||this.opacities[_].isHidden()||(this.placedOrientations[_]=n[_]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},be.prototype.updateLayerOpacities=function(t,e){for(var i={},o=0,r=e;o<r.length;o+=1){var a=r[o],n=a.getBucket(t);n&&a.latestFeatureIndex&&t.id===n.layerIds[0]&&this.updateBucketOpacities(n,i,a.collisionBoxArray)}},be.prototype.updateBucketOpacities=function(e,i,o){var r=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var a=e.layers[0].layout,n=new _e(null,0,!1,!1,!0),s=a.get("text-allow-overlap"),l=a.get("icon-allow-overlap"),c=a.get("text-variable-anchor"),u="map"===a.get("text-rotation-alignment"),h="map"===a.get("text-pitch-alignment"),p="none"!==a.get("icon-text-fit"),d=new _e(null,0,s&&(l||!e.hasIconData()||a.get("icon-optional")),l&&(s||!e.hasTextData()||a.get("text-optional")),!0);!e.collisionArrays&&o&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(o);for(var _=function(t,e,i){for(var o=0;o<e/4;o++)t.opacityVertexArray.emplaceBack(i)},f=function(o){var a=e.symbolInstances.get(o),s=a.numHorizontalGlyphVertices,l=a.numVerticalGlyphVertices,f=a.crossTileID,m=r.opacities[f];i[f]?m=n:m||(r.opacities[f]=m=d),i[f]=!0;var g=a.numIconVertices>0,v=r.placedOrientations[a.crossTileID],y=v===t.WritingMode.vertical,x=v===t.WritingMode.horizontal||v===t.WritingMode.horizontalOnly;if(s>0||l>0){var b=De(m.text);_(e.text,s,y?Me:b),_(e.text,l,x?Me:b);var w=m.text.isHidden();[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=w||y?1:0)})),a.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden=w||x?1:0);var T=r.variableOffsets[a.crossTileID];T&&r.markUsedJustification(e,T.anchor,a,v);var E=r.placedOrientations[a.crossTileID];E&&(r.markUsedJustification(e,"left",a,E),r.markUsedOrientation(e,E,a))}if(g){var I=De(m.icon),P=!(p&&a.verticalPlacedIconSymbolIndex&&y);a.placedIconSymbolIndex>=0&&(_(e.icon,a.numIconVertices,P?I:Me),e.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden=m.icon.isHidden()),a.verticalPlacedIconSymbolIndex>=0&&(_(e.icon,a.numVerticalIconVertices,P?Me:I),e.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var S=e.collisionArrays[o];if(S){var C=new t.Point(0,0);if(S.textBox||S.verticalTextBox){var z=!0;if(c){var D=r.variableOffsets[f];D?(C=ye(D.anchor,D.width,D.height,D.textOffset,D.textBoxScale),u&&C._rotate(h?r.transform.angle:-r.transform.angle)):z=!1}S.textBox&&we(e.textCollisionBox.collisionVertexArray,m.text.placed,!z||y,C.x,C.y),S.verticalTextBox&&we(e.textCollisionBox.collisionVertexArray,m.text.placed,!z||x,C.x,C.y)}var M=Boolean(!x&&S.verticalIconBox);S.iconBox&&we(e.iconCollisionBox.collisionVertexArray,m.icon.placed,M,p?C.x:0,p?C.y:0),S.verticalIconBox&&we(e.iconCollisionBox.collisionVertexArray,m.icon.placed,!M,p?C.x:0,p?C.y:0)}}},m=0;m<e.symbolInstances.length;m++)f(m);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var g=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=g.invProjMatrix,e.placementViewportMatrix=g.viewportMatrix,e.collisionCircleArray=g.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}},be.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},be.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},be.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},be.prototype.stillRecent=function(t,e){var i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t},be.prototype.setStale=function(){this.stale=!0};var Te=Math.pow(2,25),Ee=Math.pow(2,24),Ie=Math.pow(2,17),Pe=Math.pow(2,16),Se=Math.pow(2,9),Ce=Math.pow(2,8),ze=Math.pow(2,1);function De(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*Te+e*Ee+i*Ie+e*Pe+i*Se+e*Ce+i*ze+e}var Me=0,Le=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Le.prototype.continuePlacement=function(t,e,i,o,r){for(var a=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(a,o,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<a.length;)if(e.placeLayerBucketPart(a[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,r())return!0;return!1};var Ae=function(t,e,i,o,r,a,n){this.placement=new be(t,r,a,n),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=o,this._done=!1};Ae.prototype.isDone=function(){return this._done},Ae.prototype.continuePlacement=function(e,i,o){for(var r=this,a=t.browser.now(),n=function(){var e=t.browser.now()-a;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=i[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Le(s)),this._inProgressLayer.continuePlacement(o[s.source],this.placement,this._showCollisionBoxes,s,n))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ae.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Re=512/t.EXTENT/2,ke=function(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var o=0;o<e.length;o++){var r=e.get(o),a=r.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}};ke.prototype.getScaledCoordinates=function(e,i){var o=Re/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*t.EXTENT+e.anchorX)*o),y:Math.floor((i.canonical.y*t.EXTENT+e.anchorY)*o)}},ke.prototype.findMatches=function(t,e,i){for(var o=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0;r<t.length;r++){var a=t.get(r);if(!a.crossTileID){var n=this.indexedSymbolInstances[a.key];if(n)for(var s=this.getScaledCoordinates(a,e),l=0,c=n;l<c.length;l+=1){var u=c[l];if(Math.abs(u.coord.x-s.x)<=o&&Math.abs(u.coord.y-s.y)<=o&&!i[u.crossTileID]){i[u.crossTileID]=!0,a.crossTileID=u.crossTileID;break}}}}};var Be=function(){this.maxCrossTileID=0};Be.prototype.generate=function(){return++this.maxCrossTileID};var Oe=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Oe.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var o=this.indexes[i],r={};for(var a in o){var n=o[a];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),r[n.tileID.key]=n}this.indexes[i]=r}this.lng=t},Oe.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var o=0;o<e.symbolInstances.length;o++)e.symbolInstances.get(o).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var n=this.indexes[a];if(Number(a)>t.overscaledZ)for(var s in n){var l=n[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,r)}else{var c=n[t.scaledTo(Number(a)).key];c&&c.findMatches(e.symbolInstances,t,r)}}for(var u=0;u<e.symbolInstances.length;u++){var h=e.symbolInstances.get(u);h.crossTileID||(h.crossTileID=i.generate(),r[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new ke(t,e.symbolInstances,e.bucketInstanceId),!0},Oe.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var o=0,r=e.indexedSymbolInstances[i];o<r.length;o+=1)delete this.usedCrossTileIDs[t][r[o].crossTileID]},Oe.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var o=this.indexes[i];for(var r in o)t[o[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,o[r]),delete o[r],e=!0)}return e};var Fe=function(){this.layerIndexes={},this.crossTileIDs=new Be,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Fe.prototype.addLayer=function(t,e,i){var o=this.layerIndexes[t.id];void 0===o&&(o=this.layerIndexes[t.id]=new Oe);var r=!1,a={};o.handleWrapJump(i);for(var n=0,s=e;n<s.length;n+=1){var l=s[n],c=l.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),o.addBucket(l.tileID,c,this.crossTileIDs)&&(r=!0),a[c.bucketInstanceId]=!0)}return o.removeStaleBuckets(a)&&(r=!0),r},Fe.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[i]||delete this.layerIndexes[i]};var Ue=function(e,i){return t.emitValidationErrors(e,i&&i.filter((function(t){return"source.canvas"!==t.identifier})))},Ne=t.pick(Zt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ze=t.pick(Zt,["setCenter","setZoom","setBearing","setPitch"]),je=function(){var e={},i=t.styleSpec.$version;for(var o in t.styleSpec.$root){var r,a=t.styleSpec.$root[o];a.required&&null!=(r="version"===o?i:"array"===a.type?[]:{})&&(e[o]=r)}return e}(),qe=function(e){function i(o,r){var a=this;void 0===r&&(r={}),e.call(this),this.map=o,this.dispatcher=new E(Ft(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new y(o._requestManager,r.localIdeographFontFamily),this.lineAtlas=new T(256,512),this.crossTileSymbolIndex=new Fe,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var n=this;this._rtlTextPluginCallback=i.registerForPluginStateChange((function(e){n.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,i){if(t.triggerPluginCompletionEvent(e),i&&i.every((function(t){return t})))for(var o in n.sourceCaches)n.sourceCaches[o].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=a.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var o in a._layers){var r=a._layers[o];r.source===i.id&&a._validateLayer(r)}}}}))}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.loadURL=function(e,i){var o=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof i.validate?i.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,i.accessToken);var a=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(a,(function(e,i){o._request=null,e?o.fire(new t.ErrorEvent(e)):i&&o._load(i,r)}))},i.prototype.loadJSON=function(e,i){var o=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){o._request=null,o._load(e,!1!==i.validate)}))},i.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(je,!1)},i.prototype._load=function(e,i){if(!i||!Ue(this,t.validateStyle(e))){for(var o in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(o,e.sources[o],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var r=Nt(this.stylesheet.layers);this._order=r.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var a=0,n=r;a<n.length;a+=1){var s=n[a];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},i.prototype._loadSprite=function(e){var i=this;this._spriteRequest=function(e,i,o){var r,a,n,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(i.transformRequest(i.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){l=null,n||(n=t,r=e,u())})),c=t.getImage(i.transformRequest(i.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){c=null,n||(n=t,a=e,u())}));function u(){if(n)o(n);else if(r&&a){var e=t.browser.getImageData(a),i={};for(var s in r){var l=r[s],c=l.width,u=l.height,h=l.x,p=l.y,d=l.sdf,_=l.pixelRatio,f=l.stretchX,m=l.stretchY,g=l.content,v=new t.RGBAImage({width:c,height:u});t.RGBAImage.copy(e,v,{x:h,y:p},{x:0,y:0},{width:c,height:u}),i[s]={data:v,pixelRatio:_,sdf:d,stretchX:f,stretchY:m,content:g}}o(null,i)}}return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,(function(e,o){if(i._spriteRequest=null,e)i.fire(new t.ErrorEvent(e));else if(o)for(var r in o)i.imageManager.addImage(r,o[r]);i.imageManager.setLoaded(!0),i._availableImages=i.imageManager.listImages(),i.dispatcher.broadcast("setImages",i._availableImages),i.fire(new t.Event("data",{dataType:"style"}))}))},i.prototype._validateLayer=function(e){var i=this.sourceCaches[e.source];if(i){var o=e.sourceLayer;if(o){var r=i.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(o))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+o+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(t){for(var e=[],i=0,o=t;i<o.length;i+=1){var r=this._layers[o[i]];"custom"!==r.type&&e.push(r.serialize())}return e},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(e){if(this._loaded){var i=this._changed;if(this._changed){var o=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var a in(o.length||r.length)&&this._updateWorkerLayers(o,r),this._updatedSources){var n=this._updatedSources[a];"reload"===n?this._reloadSource(a):"clear"===n&&this._clearSource(a)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var c=0,u=this._order;c<u.length;c+=1){var h=this._layers[u[c]];h.recalculate(e,this._availableImages),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,i&&this.fire(new t.Event("data",{dataType:"style"}))}},i.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},i.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},i.prototype.setState=function(e){var i=this;if(this._checkLoaded(),Ue(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=Nt(e.layers);var o=function(e,i){if(!e)return[{command:Zt.setStyle,args:[i]}];var o=[];try{if(!t.deepEqual(e.version,i.version))return[{command:Zt.setStyle,args:[i]}];t.deepEqual(e.center,i.center)||o.push({command:Zt.setCenter,args:[i.center]}),t.deepEqual(e.zoom,i.zoom)||o.push({command:Zt.setZoom,args:[i.zoom]}),t.deepEqual(e.bearing,i.bearing)||o.push({command:Zt.setBearing,args:[i.bearing]}),t.deepEqual(e.pitch,i.pitch)||o.push({command:Zt.setPitch,args:[i.pitch]}),t.deepEqual(e.sprite,i.sprite)||o.push({command:Zt.setSprite,args:[i.sprite]}),t.deepEqual(e.glyphs,i.glyphs)||o.push({command:Zt.setGlyphs,args:[i.glyphs]}),t.deepEqual(e.transition,i.transition)||o.push({command:Zt.setTransition,args:[i.transition]}),t.deepEqual(e.light,i.light)||o.push({command:Zt.setLight,args:[i.light]});var r={},a=[];!function(e,i,o,r){var a;for(a in i=i||{},e=e||{})e.hasOwnProperty(a)&&(i.hasOwnProperty(a)||qt(a,o,r));for(a in i)i.hasOwnProperty(a)&&(e.hasOwnProperty(a)?t.deepEqual(e[a],i[a])||("geojson"===e[a].type&&"geojson"===i[a].type&&Gt(e,i,a)?o.push({command:Zt.setGeoJSONSourceData,args:[a,i[a].data]}):Vt(a,i,o,r)):jt(a,i,o))}(e.sources,i.sources,a,r);var n=[];e.layers&&e.layers.forEach((function(t){r[t.source]?o.push({command:Zt.removeLayer,args:[t.id]}):n.push(t)})),o=o.concat(a),function(e,i,o){i=i||[];var r,a,n,s,l,c,u,h=(e=e||[]).map(Xt),p=i.map(Xt),d=e.reduce(Ht,{}),_=i.reduce(Ht,{}),f=h.slice(),m=Object.create(null);for(r=0,a=0;r<h.length;r++)_.hasOwnProperty(n=h[r])?a++:(o.push({command:Zt.removeLayer,args:[n]}),f.splice(f.indexOf(n,a),1));for(r=0,a=0;r<p.length;r++)f[f.length-1-r]!==(n=p[p.length-1-r])&&(d.hasOwnProperty(n)?(o.push({command:Zt.removeLayer,args:[n]}),f.splice(f.lastIndexOf(n,f.length-a),1)):a++,o.push({command:Zt.addLayer,args:[_[n],c=f[f.length-r]]}),f.splice(f.length-r,0,n),m[n]=!0);for(r=0;r<p.length;r++)if(s=d[n=p[r]],l=_[n],!m[n]&&!t.deepEqual(s,l))if(t.deepEqual(s.source,l.source)&&t.deepEqual(s["source-layer"],l["source-layer"])&&t.deepEqual(s.type,l.type)){for(u in Wt(s.layout,l.layout,o,n,null,Zt.setLayoutProperty),Wt(s.paint,l.paint,o,n,null,Zt.setPaintProperty),t.deepEqual(s.filter,l.filter)||o.push({command:Zt.setFilter,args:[n,l.filter]}),t.deepEqual(s.minzoom,l.minzoom)&&t.deepEqual(s.maxzoom,l.maxzoom)||o.push({command:Zt.setLayerZoomRange,args:[n,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Wt(s[u],l[u],o,n,u.slice(6),Zt.setPaintProperty):t.deepEqual(s[u],l[u])||o.push({command:Zt.setLayerProperty,args:[n,u,l[u]]}));for(u in l)l.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Wt(s[u],l[u],o,n,u.slice(6),Zt.setPaintProperty):t.deepEqual(s[u],l[u])||o.push({command:Zt.setLayerProperty,args:[n,u,l[u]]}))}else o.push({command:Zt.removeLayer,args:[n]}),c=f[f.lastIndexOf(n)+1],o.push({command:Zt.addLayer,args:[l,c]})}(n,i.layers,o)}catch(t){console.warn("Unable to compute style diff:",t),o=[{command:Zt.setStyle,args:[i]}]}return o}(this.serialize(),e).filter((function(t){return!(t.command in Ze)}));if(0===o.length)return!1;var r=o.filter((function(t){return!(t.command in Ne)}));if(r.length>0)throw new Error("Unimplemented: "+r.map((function(t){return t.command})).join(", ")+".");return o.forEach((function(t){"setTransition"!==t.command&&i[t.command].apply(i,t.args)})),this.stylesheet=e,!0},i.prototype.addImage=function(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,i),this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},i.prototype.getImage=function(t){return this.imageManager.getImage(t)},i.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(e,i,o){var r=this;if(void 0===o&&(o={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!i.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,i,null,o))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var a=this.sourceCaches[e]=new Dt(e,i,this.dispatcher);a.style=this,a.setEventedParent(this,(function(){return{isSourceLoaded:r.loaded(),source:a.serialize(),sourceId:e}})),a.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+i+'" is using it.')));var o=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],o.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),o.setEventedParent(null),o.clearTiles(),o.onRemove&&o.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},i.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},i.prototype.addLayer=function(e,i,o){void 0===o&&(o={}),this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" already exists on this map')));else{var a;if("custom"===e.type){if(Ue(this,t.validateCustomStyleLayer(e)))return;a=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$1(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},o))return;a=t.createStyleLayer(e),this._validateLayer(a),a.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[a.id]=a.serialize()}var n=i?this._order.indexOf(i):this._order.length;if(i&&-1===n)this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(n,0,r),this._layerOrderChanged=!0,this._layers[r]=a,this._removedLayers[r]&&a.source&&"custom"!==a.type){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}},i.prototype.moveLayer=function(e,i){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==i){var o=this._order.indexOf(e);this._order.splice(o,1);var r=i?this._order.indexOf(i):this._order.length;i&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(e){this._checkLoaded();var i=this._layers[e];if(i){i.setEventedParent(null);var o=this._order.indexOf(e);this._order.splice(o,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(t){return this._layers[t]},i.prototype.hasLayer=function(t){return t in this._layers},i.prototype.setLayerZoomRange=function(e,i,o){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===i&&r.maxzoom===o||(null!=i&&(r.minzoom=i),null!=o&&(r.maxzoom=o),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(e,i,o){void 0===o&&(o={}),this._checkLoaded();var r=this.getLayer(e);if(r){if(!t.deepEqual(r.filter,i))return null==i?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,"layers."+r.id+".filter",i,null,o)||(r.filter=t.clone$1(i),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function(e,i,o,r){void 0===r&&(r={}),this._checkLoaded();var a=this.getLayer(e);a?t.deepEqual(a.getLayoutProperty(i),o)||(a.setLayoutProperty(i,o,r),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(e,i){var o=this.getLayer(e);if(o)return o.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(e,i,o,r){void 0===r&&(r={}),this._checkLoaded();var a=this.getLayer(e);a?t.deepEqual(a.getPaintProperty(i),o)||(a.setPaintProperty(i,o,r)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},i.prototype.setFeatureState=function(e,i){this._checkLoaded();var o=e.source,r=e.sourceLayer,a=this.sourceCaches[o];if(void 0!==a){var n=a.getSource().type;"geojson"===n&&r?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==n||r?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),a.setFeatureState(r,e.id,i)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+o+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(e,i){this._checkLoaded();var o=e.source,r=this.sourceCaches[o];if(void 0!==r){var a=r.getSource().type,n="vector"===a?e.sourceLayer:void 0;"vector"!==a||n?i&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):r.removeFeatureState(n,e.id,i):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+o+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(e){this._checkLoaded();var i=e.source,o=e.sourceLayer,r=this.sourceCaches[i];if(void 0!==r){if("vector"!==r.getSource().type||o)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),r.getFeatureState(o,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},i.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,i=function(t){return"fill-extrusion"===e._layers[t].type},o={},r=[],a=this._order.length-1;a>=0;a--){var n=this._order[a];if(i(n)){o[n]=a;for(var s=0,l=t;s<l.length;s+=1){var c=l[s][n];if(c)for(var u=0,h=c;u<h.length;u+=1)r.push(h[u])}}}r.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var p=[],d=this._order.length-1;d>=0;d--){var _=this._order[d];if(i(_))for(var f=r.length-1;f>=0;f--){var m=r[f].feature;if(o[m.layer.id]<d)break;p.push(m),r.pop()}else for(var g=0,v=t;g<v.length;g+=1){var y=v[g][_];if(y)for(var x=0,b=y;x<b.length;x+=1)p.push(b[x].feature)}}return p},i.prototype.queryRenderedFeatures=function(e,i,o){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var r={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var a=0,n=i.layers;a<n.length;a+=1){var s=n[a],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];r[l.source]=!0}}var c=[];for(var u in i.availableImages=this._availableImages,this.sourceCaches)i.layers&&!r[u]||c.push(O(this.sourceCaches[u],this._layers,this._serializedLayers,e,i,o));return this.placement&&c.push(function(t,e,i,o,r,a,n){for(var s={},l=a.queryRenderedSymbols(o),c=[],u=0,h=Object.keys(l).map(Number);u<h.length;u+=1)c.push(n[h[u]]);c.sort(F);for(var p=function(){var i=_[d],o=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],e,i.bucketIndex,i.sourceLayerIndex,r.filter,r.layers,r.availableImages,t);for(var a in o){var n=s[a]=s[a]||[],c=o[a];c.sort((function(t,e){var o=i.featureSortOrder;if(o){var r=o.indexOf(t.featureIndex);return o.indexOf(e.featureIndex)-r}return e.featureIndex-t.featureIndex}));for(var u=0,h=c;u<h.length;u+=1)n.push(h[u])}},d=0,_=c;d<_.length;d+=1)p();var f=function(e){s[e].forEach((function(o){var r=o.feature,a=i[t[e].source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=a}))};for(var m in s)f(m);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)},i.prototype.querySourceFeatures=function(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);var o=this.sourceCaches[e];return o?function(t,e){for(var i=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),o=[],r={},a=0;a<i.length;a++){var n=i[a],s=n.tileID.canonical.key;r[s]||(r[s]=!0,n.querySourceFeatures(o,e))}return o}(o,i):[]},i.prototype.addSourceType=function(t,e,o){return i.getSourceType(t)?o(new Error('A source type called "'+t+'" already exists.')):(i.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},o):o(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(e,i){void 0===i&&(i={}),this._checkLoaded();var o=this.light.getLight(),r=!1;for(var a in e)if(!t.deepEqual(e[a],o[a])){r=!0;break}if(r){var n={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(n)}},i.prototype._validate=function(e,i,o,r,a){return void 0===a&&(a={}),(!a||!1!==a.validate)&&Ue(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:o,styleSpec:t.styleSpec},r)))},i.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},i.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},i.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},i.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},i.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},i.prototype._updatePlacement=function(e,i,o,r,a){void 0===a&&(a=!1);for(var n=!1,s=!1,l={},c=0,u=this._order;c<u.length;c+=1){var h=this._layers[u[c]];if("symbol"===h.type){if(!l[h.source]){var p=this.sourceCaches[h.source];l[h.source]=p.getRenderableIds(!0).map((function(t){return p.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var d=this.crossTileSymbolIndex.addLayer(h,l[h.source],e.center.lng);n=n||d}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((a=a||this._layerOrderChanged||0===o)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Ae(e,this._order,a,i,o,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),n&&this.pauseablePlacement.placement.setStale()),s||n)for(var _=0,f=this._order;_<f.length;_+=1){var m=this._layers[f[_]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,l[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},i.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();var o=this.sourceCaches[e.source];o&&o.setDependencies(e.tileID.key,e.type,e.icons)},i.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},i.prototype.getResource=function(e,i,o){return t.makeRequest(i,o)},i}(t.Evented);qe.getSourceType=function(t){return k[t]},qe.setSourceType=function(t,e){k[t]=e},qe.registerForPluginStateChange=t.registerForPluginStateChange;var Ve=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ge=gi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),We=gi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Xe=gi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),He=gi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ke=gi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ye=gi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Je=gi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Qe=gi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),$e=gi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ti=gi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ei=gi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ii=gi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),oi=gi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ri=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ai=gi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ni=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),si=gi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),li=gi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ci=gi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ui=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),hi=gi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),pi=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),di=gi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),_i=gi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),fi=gi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),mi=gi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function gi(t,e){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,o=e.match(/attribute ([\w]+) ([\w]+)/g),r=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),n=a?a.concat(r):r,s={};return{fragmentSource:t=t.replace(i,(function(t,e,i,o,r){return s[r]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nvarying "+i+" "+o+" "+r+";\n#else\nuniform "+i+" "+o+" u_"+r+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+r+"\n    "+i+" "+o+" "+r+" = u_"+r+";\n#endif\n"})),vertexSource:e=e.replace(i,(function(t,e,i,o,r){var a="float"===o?"vec2":"vec4",n=r.match(/color/)?"color":a;return s[r]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float u_"+r+"_t;\nattribute "+i+" "+a+" a_"+r+";\nvarying "+i+" "+o+" "+r+";\n#else\nuniform "+i+" "+o+" u_"+r+";\n#endif\n":"vec4"===n?"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" = a_"+r+";\n#else\n    "+i+" "+o+" "+r+" = u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" = unpack_mix_"+n+"(a_"+r+", u_"+r+"_t);\n#else\n    "+i+" "+o+" "+r+" = u_"+r+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float u_"+r+"_t;\nattribute "+i+" "+a+" a_"+r+";\n#else\nuniform "+i+" "+o+" u_"+r+";\n#endif\n":"vec4"===n?"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+i+" "+o+" "+r+" = a_"+r+";\n#else\n    "+i+" "+o+" "+r+" = u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+i+" "+o+" "+r+" = unpack_mix_"+n+"(a_"+r+", u_"+r+"_t);\n#else\n    "+i+" "+o+" "+r+" = u_"+r+";\n#endif\n"})),staticAttributes:o,staticUniforms:n}}var vi=Object.freeze({__proto__:null,prelude:Ge,background:We,backgroundPattern:Xe,circle:He,clippingMask:Ke,heatmap:Ye,heatmapTexture:Je,collisionBox:Qe,collisionCircle:$e,debug:ti,fill:ei,fillOutline:ii,fillOutlinePattern:oi,fillPattern:ri,fillExtrusion:ai,fillExtrusionPattern:ni,hillshadePrepare:si,hillshade:li,line:ci,lineGradient:ui,linePattern:hi,lineSDF:pi,raster:di,symbolIcon:_i,symbolSDF:fi,symbolTextAndIcon:mi}),yi=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function xi(t){for(var e=[],i=0;i<t.length;i++)if(null!==t[i]){var o=t[i].split(" ");e.push(o.pop())}return e}yi.prototype.bind=function(t,e,i,o,r,a,n,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==o.length,c=0;!l&&c<o.length;c++)this.boundPaintVertexBuffers[c]!==o[c]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===r&&this.boundVertexOffset===a&&this.boundDynamicVertexBuffer===n&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),n&&n.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind()):this.freshBind(e,i,o,r,a,n,s)},yi.prototype.freshBind=function(t,e,i,o,r,a,n){var s,l=t.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=o,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=n;else{s=c.currentNumAttributes||0;for(var h=l;h<s;h++)u.disableVertexAttribArray(h)}e.enableAttributes(u,t);for(var p=0,d=i;p<d.length;p+=1)d[p].enableAttributes(u,t);a&&a.enableAttributes(u,t),n&&n.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,r);for(var _=0,f=i;_<f.length;_+=1){var m=f[_];m.bind(),m.setVertexAttribPointers(u,t,r)}a&&(a.bind(),a.setVertexAttribPointers(u,t,r)),o&&o.bind(),n&&(n.bind(),n.setVertexAttribPointers(u,t,r)),c.currentNumAttributes=l},yi.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var bi=function(t,e,i,o,r,a){var n=t.gl;this.program=n.createProgram();for(var s=xi(i.staticAttributes),l=o?o.getBinderAttributes():[],c=s.concat(l),u=i.staticUniforms?xi(i.staticUniforms):[],h=o?o.getBinderUniforms():[],p=[],d=0,_=u.concat(h);d<_.length;d+=1){var f=_[d];p.indexOf(f)<0&&p.push(f)}var m=o?o.defines():[];a&&m.push("#define OVERDRAW_INSPECTOR;");var g=m.concat(Ge.fragmentSource,i.fragmentSource).join("\n"),v=m.concat(Ge.vertexSource,i.vertexSource).join("\n"),y=n.createShader(n.FRAGMENT_SHADER);if(n.isContextLost())this.failedToCreate=!0;else{n.shaderSource(y,g),n.compileShader(y),n.attachShader(this.program,y);var x=n.createShader(n.VERTEX_SHADER);if(n.isContextLost())this.failedToCreate=!0;else{n.shaderSource(x,v),n.compileShader(x),n.attachShader(this.program,x),this.attributes={};var b={};this.numAttributes=c.length;for(var w=0;w<this.numAttributes;w++)c[w]&&(n.bindAttribLocation(this.program,w,c[w]),this.attributes[c[w]]=w);n.linkProgram(this.program),n.deleteShader(x),n.deleteShader(y);for(var T=0;T<p.length;T++){var E=p[T];if(E&&!b[E]){var I=n.getUniformLocation(this.program,E);I&&(b[E]=I)}}this.fixedUniforms=r(t,b),this.binderUniforms=o?o.getUniforms(t,b):[]}}};function wi(t,e,i){var o=1/pe(i,1,e.transform.tileZoom),r=Math.pow(2,i.tileID.overscaledZ),a=i.tileSize*Math.pow(2,e.transform.tileZoom)/r,n=a*(i.tileID.canonical.x+i.tileID.wrap*r),s=a*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[o,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[n>>16,s>>16],u_pixel_coord_lower:[65535&n,65535&s]}}bi.prototype.draw=function(t,e,i,o,r,a,n,s,l,c,u,h,p,d,_,f){var m,g=t.gl;if(!this.failedToCreate){for(var v in t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(o),t.setColorMode(r),t.setCullFace(a),this.fixedUniforms)this.fixedUniforms[v].set(n[v]);d&&d.setUniforms(t,this.binderUniforms,h,{zoom:p});for(var y=(m={},m[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m)[e],x=0,b=u.get();x<b.length;x+=1){var w=b[x],T=w.vaos||(w.vaos={});(T[s]||(T[s]=new yi)).bind(t,this,l,d?d.getPaintVertexBuffers():[],c,w.vertexOffset,_,f),g.drawElements(e,w.primitiveLength*y,g.UNSIGNED_SHORT,w.primitiveOffset*y*2)}}};var Ti=function(e,i,o,r){var a=i.style.light,n=a.properties.get("position"),s=[n.x,n.y,n.z],l=t.create$1();"viewport"===a.properties.get("anchor")&&t.fromRotation(l,-i.transform.angle),t.transformMat3(s,s,l);var c=a.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+o,u_opacity:r}},Ei=function(e,i,o,r,a,n,s){return t.extend(Ti(e,i,o,r),wi(n,i,s),{u_height_factor:-Math.pow(2,a.overscaledZ)/s.tileSize/8})},Ii=function(t){return{u_matrix:t}},Pi=function(e,i,o,r){return t.extend(Ii(e),wi(o,i,r))},Si=function(t,e){return{u_matrix:t,u_world:e}},Ci=function(e,i,o,r,a){return t.extend(Pi(e,i,o,r),{u_world:a})},zi=function(e,i,o,r){var a,n,s=e.transform;if("map"===r.paint.get("circle-pitch-alignment")){var l=pe(o,1,s.zoom);a=!0,n=[l,l]}else a=!1,n=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(i.posMatrix,o,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+a,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:n}},Di=function(t,e,i){var o=pe(i,1,e.zoom),r=Math.pow(2,e.zoom-i.tileID.overscaledZ),a=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:o,u_extrude_scale:[e.pixelsToGLUnits[0]/(o*r),e.pixelsToGLUnits[1]/(o*r)],u_overscale_factor:a}},Mi=function(t,e,i){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:i.cameraToCenterDistance,u_viewport_size:[i.width,i.height]}},Li=function(t,e,i){return void 0===i&&(i=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}},Ai=function(t){return{u_matrix:t}},Ri=function(t,e,i,o){return{u_matrix:t,u_extrude_scale:pe(e,1,i),u_intensity:o}},ki=function(e,i,o){var r=e.transform;return{u_matrix:Ni(e,i,o),u_ratio:1/pe(i,1,r.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Bi=function(e,i,o){return t.extend(ki(e,i,o),{u_image:0})},Oi=function(e,i,o,r){var a=e.transform,n=Ui(i,a);return{u_matrix:Ni(e,i,o),u_texsize:i.imageAtlasTexture.size,u_ratio:1/pe(i,1,a.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[n,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Fi=function(e,i,o,r,a){var n=e.lineAtlas,s=Ui(i,e.transform),l="round"===o.layout.get("line-cap"),c=n.getDash(r.from,l),u=n.getDash(r.to,l),h=c.width*a.fromScale,p=u.width*a.toScale;return t.extend(ki(e,i,o),{u_patternscale_a:[s/h,-c.height/2],u_patternscale_b:[s/p,-u.height/2],u_sdfgamma:n.width/(256*Math.min(h,p)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:u.y,u_mix:a.t})};function Ui(t,e){return 1/pe(t,1,e.tileZoom)}function Ni(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var Zi=function(t,e,i,o,r){return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(n=r.paint.get("raster-saturation"),n>0?1-1/(1.001-n):-n),u_contrast_factor:(a=r.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:ji(r.paint.get("raster-hue-rotate"))};var a,n};function ji(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}var qi,Vi=function(t,e,i,o,r,a,n,s,l,c){var u=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:n,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+o,u_texsize:c,u_texture:0}},Gi=function(e,i,o,r,a,n,s,l,c,u,h){var p=a.transform;return t.extend(Vi(e,i,o,r,a,n,s,l,c,u),{u_gamma_scale:r?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+h})},Wi=function(e,i,o,r,a,n,s,l,c,u){return t.extend(Gi(e,i,o,r,a,n,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1})},Xi=function(t,e,i){return{u_matrix:t,u_opacity:e,u_color:i}},Hi=function(e,i,o,r,a,n){return t.extend(function(t,e,i,o){var r=i.imageManager.getPattern(t.from.toString()),a=i.imageManager.getPattern(t.to.toString()),n=i.imageManager.getPixelSize(),s=n.width,l=n.height,c=Math.pow(2,o.tileID.overscaledZ),u=o.tileSize*Math.pow(2,i.transform.tileZoom)/c,h=u*(o.tileID.canonical.x+o.tileID.wrap*c),p=u*o.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/pe(o,1,i.transform.tileZoom),u_pixel_coord_upper:[h>>16,p>>16],u_pixel_coord_lower:[65535&h,65535&p]}}(r,n,o,a),{u_matrix:e,u_opacity:i})},Ki={fillExtrusion:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fillExtrusionPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fill:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},fillPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},fillOutline:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}},fillOutlinePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},circle:function(e,i){return{u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,i.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},collisionBox:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,i.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,i.u_overscale_factor)}},collisionCircle:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,i.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,i.u_viewport_size)}},debug:function(e,i){return{u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_overlay:new t.Uniform1i(e,i.u_overlay),u_overlay_scale:new t.Uniform1f(e,i.u_overlay_scale)}},clippingMask:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmap:function(e,i){return{u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmapTexture:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}},hillshade:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}},hillshadePrepare:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_maxzoom:new t.Uniform1f(e,i.u_maxzoom),u_unpack:new t.Uniform4f(e,i.u_unpack)}},line:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels)}},lineGradient:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_image:new t.Uniform1i(e,i.u_image)}},linePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_image:new t.Uniform1i(e,i.u_image),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},lineSDF:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,i.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,i.u_sdfgamma),u_image:new t.Uniform1i(e,i.u_image),u_tex_y_a:new t.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,i.u_tex_y_b),u_mix:new t.Uniform1f(e,i.u_mix)}},raster:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}},symbolIcon:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}},symbolSDF:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}},symbolTextAndIcon:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texsize_icon:new t.Uniform2f(e,i.u_texsize_icon),u_texture:new t.Uniform1i(e,i.u_texture),u_texture_icon:new t.Uniform1i(e,i.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}},background:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}},backgroundPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)}}};function Yi(e,i,o,r,a,n,s){for(var l=e.context,c=l.gl,u=e.useProgram("collisionBox"),h=[],p=0,d=0,_=0;_<r.length;_++){var f=r[_],m=i.getTile(f),g=m.getBucket(o);if(g){var v=f.posMatrix;0===a[0]&&0===a[1]||(v=e.translatePosMatrix(f.posMatrix,m,a,n));var y=s?g.textCollisionBox:g.iconCollisionBox,x=g.collisionCircleArray;if(x.length>0){var b=t.create(),w=v;t.mul(b,g.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(b,b,g.placementViewportMatrix),h.push({circleArray:x,circleOffset:d,transform:w,invTransform:b}),d=p+=x.length/4}y&&u.draw(l,c.LINES,It.disabled,Pt.disabled,e.colorModeForRenderPass(),Ct.disabled,Di(v,e.transform,m),o.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,null,e.transform.zoom,null,null,y.collisionVertexBuffer)}}if(s&&h.length){var T=e.useProgram("collisionCircle"),E=new t.StructArrayLayout2f1f2i16;E.resize(4*p),E._trim();for(var I=0,P=0,S=h;P<S.length;P+=1)for(var C=S[P],z=0;z<C.circleArray.length/4;z++){var D=4*z,M=C.circleArray[D+0],L=C.circleArray[D+1],A=C.circleArray[D+2],R=C.circleArray[D+3];E.emplace(I++,M,L,A,R,0),E.emplace(I++,M,L,A,R,1),E.emplace(I++,M,L,A,R,2),E.emplace(I++,M,L,A,R,3)}(!qi||qi.length<2*p)&&(qi=function(e){var i=2*e,o=new t.StructArrayLayout3ui6;o.resize(i),o._trim();for(var r=0;r<i;r++){var a=6*r;o.uint16[a+0]=4*r+0,o.uint16[a+1]=4*r+1,o.uint16[a+2]=4*r+2,o.uint16[a+3]=4*r+2,o.uint16[a+4]=4*r+3,o.uint16[a+5]=4*r+0}return o}(p));for(var k=l.createIndexBuffer(qi,!0),B=l.createVertexBuffer(E,t.collisionCircleLayout.members,!0),O=0,F=h;O<F.length;O+=1){var U=F[O],N=Mi(U.transform,U.invTransform,e.transform);T.draw(l,c.TRIANGLES,It.disabled,Pt.disabled,e.colorModeForRenderPass(),Ct.disabled,N,o.id,B,k,t.SegmentVector.simpleSegment(0,2*U.circleOffset,U.circleArray.length,U.circleArray.length/2),null,e.transform.zoom,null,null,null)}B.destroy(),k.destroy()}}var Ji=t.identity(new Float32Array(16));function Qi(e,i,o,r,a,n){var s=t.getAnchorAlignment(e),l=-(s.horizontalAlign-.5)*i,c=-(s.verticalAlign-.5)*o,u=t.evaluateVariableOffset(e,r);return new t.Point((l/a+u[0])*n,(c/a+u[1])*n)}function $i(e,i,o,r,a,n,s,l,c,u,h){var p=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,_=e.icon.dynamicLayoutVertexArray,f={};d.clear();for(var m=0;m<p.length;m++){var g=p.get(m),v=g.hidden||!g.crossTileID||e.allowVerticalPlacement&&!g.placedOrientation?null:r[g.crossTileID];if(v){var y=new t.Point(g.anchorX,g.anchorY),x=$t(y,o?l:s),b=te(n.cameraToCenterDistance,x.signedDistanceFromCamera),w=a.evaluateSizeForFeature(e.textSizeData,u,g)*b/t.ONE_EM;o&&(w*=e.tilePixelRatio/c);for(var T=Qi(v.anchor,v.width,v.height,v.textOffset,v.textBoxScale,w),E=o?$t(y.add(T),s).point:x.point.add(i?T.rotate(-n.angle):T),I=e.allowVerticalPlacement&&g.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,P=0;P<g.numGlyphs;P++)t.addDynamicAttributes(d,E,I);h&&g.associatedIconIndex>=0&&(f[g.associatedIconIndex]={shiftedAnchor:E,angle:I})}else ce(g.numGlyphs,d)}if(h){_.clear();for(var S=e.icon.placedSymbolArray,C=0;C<S.length;C++){var z=S.get(C);if(z.hidden)ce(z.numGlyphs,_);else{var D=f[C];if(D)for(var M=0;M<z.numGlyphs;M++)t.addDynamicAttributes(_,D.shiftedAnchor,D.angle);else ce(z.numGlyphs,_)}}e.icon.dynamicLayoutVertexBuffer.updateData(_)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function to(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function eo(e,i,o,r,a,n,s,l,c,u,h,p){for(var d=e.context,_=d.gl,f=e.transform,m="map"===l,g="map"===c,v=m&&"point"!==o.layout.get("symbol-placement"),y=m&&!g&&!v,x=void 0!==o.layout.get("symbol-sort-key").constantOr(1),b=e.depthModeForSublayer(0,It.ReadOnly),w=o.layout.get("text-variable-anchor"),T=[],E=0,I=r;E<I.length;E+=1){var P=I[E],S=i.getTile(P),C=S.getBucket(o);if(C){var z=a?C.text:C.icon;if(z&&z.segments.get().length){var D=z.programConfigurations.get(o.id),M=a||C.sdfIcons,L=a?C.textSizeData:C.iconSizeData,A=g||0!==f.pitch,R=e.useProgram(to(M,a,C),D),k=t.evaluateSizeForZoom(L,f.zoom),B=void 0,O=[0,0],F=void 0,U=void 0,N=null,Z=void 0;if(a)F=S.glyphAtlasTexture,U=_.LINEAR,B=S.glyphAtlasTexture.size,C.iconsInText&&(O=S.imageAtlasTexture.size,N=S.imageAtlasTexture,Z=A||e.options.rotating||e.options.zooming||"composite"===L.kind||"camera"===L.kind?_.LINEAR:_.NEAREST);else{var j=1!==o.layout.get("icon-size").constantOr(0)||C.iconsNeedLinear;F=S.imageAtlasTexture,U=M||e.options.rotating||e.options.zooming||j||A?_.LINEAR:_.NEAREST,B=S.imageAtlasTexture.size}var q=pe(S,1,e.transform.zoom),V=Jt(P.posMatrix,g,m,e.transform,q),G=Qt(P.posMatrix,g,m,e.transform,q),W=w&&C.hasTextData(),X="none"!==o.layout.get("icon-text-fit")&&W&&C.hasIconData();v&&ie(C,P.posMatrix,e,a,V,G,g,u);var H=e.translatePosMatrix(P.posMatrix,S,n,s),K=v||a&&w||X?Ji:V,Y=e.translatePosMatrix(G,S,n,s,!0),J=M&&0!==o.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),Q={program:R,buffers:z,uniformValues:M?C.iconsInText?Wi(L.kind,k,y,g,e,H,K,Y,B,O):Gi(L.kind,k,y,g,e,H,K,Y,a,B,!0):Vi(L.kind,k,y,g,e,H,K,Y,a,B),atlasTexture:F,atlasTextureIcon:N,atlasInterpolation:U,atlasInterpolationIcon:Z,isSDF:M,hasHalo:J};if(x)for(var $=0,tt=z.segments.get();$<tt.length;$+=1){var et=tt[$];T.push({segments:new t.SegmentVector([et]),sortKey:et.sortKey,state:Q})}else T.push({segments:z.segments,sortKey:0,state:Q})}}}x&&T.sort((function(t,e){return t.sortKey-e.sortKey}));for(var it=0,ot=T;it<ot.length;it+=1){var rt=ot[it],at=rt.state;if(d.activeTexture.set(_.TEXTURE0),at.atlasTexture.bind(at.atlasInterpolation,_.CLAMP_TO_EDGE),at.atlasTextureIcon&&(d.activeTexture.set(_.TEXTURE1),at.atlasTextureIcon&&at.atlasTextureIcon.bind(at.atlasInterpolationIcon,_.CLAMP_TO_EDGE)),at.isSDF){var nt=at.uniformValues;at.hasHalo&&(nt.u_is_halo=1,io(at.buffers,rt.segments,o,e,at.program,b,h,p,nt)),nt.u_is_halo=0}io(at.buffers,rt.segments,o,e,at.program,b,h,p,at.uniformValues)}}function io(t,e,i,o,r,a,n,s,l){var c=o.context;r.draw(c,c.gl.TRIANGLES,a,n,s,Ct.disabled,l,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,o.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function oo(t,e,i,o,r,a,n){var s,l,c,u,h,p=t.context.gl,d=i.paint.get("fill-pattern"),_=d&&d.constantOr(1),f=i.getCrossfadeParameters();n?(l=_&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(l=_?"fillPattern":"fill",s=p.TRIANGLES);for(var m=0,g=o;m<g.length;m+=1){var v=g[m],y=e.getTile(v);if(!_||y.patternsLoaded()){var x=y.getBucket(i);if(x){var b=x.programConfigurations.get(i.id),w=t.useProgram(l,b);_&&(t.context.activeTexture.set(p.TEXTURE0),y.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),b.updatePaintBuffers(f));var T=d.constantOr(null);if(T&&y.imageAtlas){var E=y.imageAtlas,I=E.patternPositions[T.to.toString()],P=E.patternPositions[T.from.toString()];I&&P&&b.setConstantPatternPositions(I,P)}var S=t.translatePosMatrix(v.posMatrix,y,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(n){u=x.indexBuffer2,h=x.segments2;var C=[p.drawingBufferWidth,p.drawingBufferHeight];c="fillOutlinePattern"===l&&_?Ci(S,t,f,y,C):Si(S,C)}else u=x.indexBuffer,h=x.segments,c=_?Pi(S,t,f,y):Ii(S);w.draw(t.context,s,r,t.stencilModeForClipping(v),a,Ct.disabled,c,i.id,x.layoutVertexBuffer,u,h,i.paint,t.transform.zoom,b)}}}}function ro(t,e,i,o,r,a,n){for(var s=t.context,l=s.gl,c=i.paint.get("fill-extrusion-pattern"),u=c.constantOr(1),h=i.getCrossfadeParameters(),p=i.paint.get("fill-extrusion-opacity"),d=0,_=o;d<_.length;d+=1){var f=_[d],m=e.getTile(f),g=m.getBucket(i);if(g){var v=g.programConfigurations.get(i.id),y=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",v);u&&(t.context.activeTexture.set(l.TEXTURE0),m.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers(h));var x=c.constantOr(null);if(x&&m.imageAtlas){var b=m.imageAtlas,w=b.patternPositions[x.to.toString()],T=b.patternPositions[x.from.toString()];w&&T&&v.setConstantPatternPositions(w,T)}var E=t.translatePosMatrix(f.posMatrix,m,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),I=i.paint.get("fill-extrusion-vertical-gradient"),P=u?Ei(E,t,I,p,f,h,m):Ti(E,t,I,p);y.draw(s,s.gl.TRIANGLES,r,a,n,Ct.backCCW,P,i.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,i.paint,t.transform.zoom,v)}}}function ao(e,i,o,r,a,n){var s=e.context,l=s.gl,c=i.fbo;if(c){var u=e.useProgram("hillshade");s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get());var h=function(e,i,o){var r=o.paint.get("hillshade-shadow-color"),a=o.paint.get("hillshade-highlight-color"),n=o.paint.get("hillshade-accent-color"),s=o.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===o.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var l,c,u,h=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(i.tileID.toUnwrapped(),h),u_image:0,u_latrange:(l=i.tileID,c=Math.pow(2,l.canonical.z),u=l.canonical.y,[new t.MercatorCoordinate(0,u/c).toLngLat().lat,new t.MercatorCoordinate(0,(u+1)/c).toLngLat().lat]),u_light:[o.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:a,u_accent:n}}(e,i,o);u.draw(s,l.TRIANGLES,r,a,n,Ct.disabled,h,o.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function no(e,i,o,r,a,n,s){var l=e.context,c=l.gl,u=i.dem;if(u&&u.data){var h=u.dim,p=u.stride,d=u.getPixels();if(l.activeTexture.set(c.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(p),i.demTexture){var _=i.demTexture;_.update(d,{premultiply:!1}),_.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else i.demTexture=new t.Texture(l,d,c.RGBA,{premultiply:!1}),i.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);l.activeTexture.set(c.TEXTURE0);var f=i.fbo;if(!f){var m=new t.Texture(l,{width:h,height:h,data:null},c.RGBA);m.bind(c.LINEAR,c.CLAMP_TO_EDGE),(f=i.fbo=l.createFramebuffer(h,h,!0)).colorAttachment.set(m.texture)}l.bindFramebuffer.set(f.framebuffer),l.viewport.set([0,0,h,h]),e.useProgram("hillshadePrepare").draw(l,c.TRIANGLES,a,n,s,Ct.disabled,function(e,i,o){var r=i.stride,a=t.create();return t.ortho(a,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(a,a,[0,-t.EXTENT,0]),{u_matrix:a,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_maxzoom:o,u_unpack:i.getUnpackVector()}}(i.tileID,u,r),o.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function so(e,i,o,r,a){var n=r.paint.get("raster-fade-duration");if(n>0){var s=t.browser.now(),l=(s-e.timeAdded)/n,c=i?(s-i.timeAdded)/n:-1,u=o.getSource(),h=a.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),p=!i||Math.abs(i.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),d=p&&e.refreshedUponExpiration?1:t.clamp(p?l:1-c,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var lo=new t.Color(1,0,0,1),co=new t.Color(0,1,0,1),uo=new t.Color(0,0,1,1),ho=new t.Color(1,0,1,1),po=new t.Color(0,1,1,1);function _o(t,e,i,o){mo(t,0,e+i/2,t.transform.width,i,o)}function fo(t,e,i,o){mo(t,e-i/2,0,i,t.transform.height,o)}function mo(e,i,o,r,a,n){var s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,a*t.browser.devicePixelRatio),s.clear({color:n}),l.disable(l.SCISSOR_TEST)}function go(e,i,o){var r=e.context,a=r.gl,n=o.posMatrix,s=e.useProgram("debug"),l=It.disabled,c=Pt.disabled,u=e.colorModeForRenderPass();r.activeTexture.set(a.TEXTURE0),e.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),s.draw(r,a.LINE_STRIP,l,c,u,Ct.disabled,Li(n,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var h=i.getTileByID(o.key).latestRawTileData,p=Math.floor((h&&h.byteLength||0)/1024),d=i.getTile(o).tileSize,_=512/Math.min(d,512)*(o.overscaledZ/e.transform.zoom)*.5,f=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(f+=" => "+o.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var i=t.debugOverlayCanvas,o=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,i.width,i.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}(e,f+" "+p+"kb"),s.draw(r,a.TRIANGLES,l,c,St.alphaBlended,Ct.disabled,Li(n,t.Color.transparent,_),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var vo={symbol:function(e,i,o,r,a){if("translucent"===e.renderPass){var n=Pt.disabled,s=e.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(e,i,o,r,a,n,s){for(var l=i.transform,c="map"===a,u="map"===n,h=0,p=e;h<p.length;h+=1){var d=p[h],_=r.getTile(d),f=_.getBucket(o);if(f&&f.text&&f.text.segments.get().length){var m=t.evaluateSizeForZoom(f.textSizeData,l.zoom),g=pe(_,1,i.transform.zoom),v=Jt(d.posMatrix,u,c,i.transform,g),y="none"!==o.layout.get("icon-text-fit")&&f.hasIconData();if(m){var x=Math.pow(2,l.zoom-_.tileID.overscaledZ);$i(f,c,u,s,t.symbolSize,l,v,d.posMatrix,x,m,y)}}}}(r,e,o,i,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),a),0!==o.paint.get("icon-opacity").constantOr(1)&&eo(e,i,o,r,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),n,s),0!==o.paint.get("text-opacity").constantOr(1)&&eo(e,i,o,r,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),n,s),i.map.showCollisionBoxes&&(Yi(e,i,o,r,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),Yi(e,i,o,r,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))}},circle:function(e,i,o,r){if("translucent"===e.renderPass){var a=o.paint.get("circle-opacity"),n=o.paint.get("circle-stroke-width"),s=o.paint.get("circle-stroke-opacity"),l=void 0!==o.layout.get("circle-sort-key").constantOr(1);if(0!==a.constantOr(1)||0!==n.constantOr(1)&&0!==s.constantOr(1)){for(var c=e.context,u=c.gl,h=e.depthModeForSublayer(0,It.ReadOnly),p=Pt.disabled,d=e.colorModeForRenderPass(),_=[],f=0;f<r.length;f++){var m=r[f],g=i.getTile(m),v=g.getBucket(o);if(v){var y=v.programConfigurations.get(o.id),x={programConfiguration:y,program:e.useProgram("circle",y),layoutVertexBuffer:v.layoutVertexBuffer,indexBuffer:v.indexBuffer,uniformValues:zi(e,m,g,o)};if(l)for(var b=0,w=v.segments.get();b<w.length;b+=1){var T=w[b];_.push({segments:new t.SegmentVector([T]),sortKey:T.sortKey,state:x})}else _.push({segments:v.segments,sortKey:0,state:x})}}l&&_.sort((function(t,e){return t.sortKey-e.sortKey}));for(var E=0,I=_;E<I.length;E+=1){var P=I[E],S=P.state;S.program.draw(c,u.TRIANGLES,h,p,d,Ct.disabled,S.uniformValues,o.id,S.layoutVertexBuffer,S.indexBuffer,P.segments,o.paint,e.transform.zoom,S.programConfiguration)}}}},heatmap:function(e,i,o,r){if(0!==o.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var a=e.context,n=a.gl,s=Pt.disabled,l=new St([n.ONE,n.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){var o=t.gl;t.activeTexture.set(o.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r=i.heatmapFbo;if(r)o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),r=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,i,o){var r=t.gl;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.width/4,e.height/4,0,r.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE,null),o.colorAttachment.set(i)}(t,e,a,r)}}(a,e,o),a.clear({color:t.Color.transparent});for(var c=0;c<r.length;c++){var u=r[c];if(!i.hasRenderableParent(u)){var h=i.getTile(u),p=h.getBucket(o);if(p){var d=p.programConfigurations.get(o.id);e.useProgram("heatmap",d).draw(a,n.TRIANGLES,It.disabled,s,l,Ct.disabled,Ri(u.posMatrix,h,e.transform.zoom,o.paint.get("heatmap-intensity")),o.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,o.paint,e.transform.zoom,d)}}}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){var o=e.context,r=o.gl,a=i.heatmapFbo;if(a){o.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),o.activeTexture.set(r.TEXTURE1);var n=i.colorRampTexture;n||(n=i.colorRampTexture=new t.Texture(o,i.colorRamp,r.RGBA)),n.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(o,r.TRIANGLES,It.disabled,Pt.disabled,e.colorModeForRenderPass(),Ct.disabled,function(e,i,o,r){var a=t.create();t.ortho(a,0,e.width,e.height,0,0,1);var n=e.context.gl;return{u_matrix:a,u_world:[n.drawingBufferWidth,n.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}}(e,i),i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}}(e,o))},line:function(e,i,o,r){if("translucent"===e.renderPass){var a=o.paint.get("line-opacity"),n=o.paint.get("line-width");if(0!==a.constantOr(1)&&0!==n.constantOr(1)){var s=e.depthModeForSublayer(0,It.ReadOnly),l=e.colorModeForRenderPass(),c=o.paint.get("line-dasharray"),u=o.paint.get("line-pattern"),h=u.constantOr(1),p=o.paint.get("line-gradient"),d=o.getCrossfadeParameters(),_=h?"linePattern":c?"lineSDF":p?"lineGradient":"line",f=e.context,m=f.gl,g=!0;if(p){f.activeTexture.set(m.TEXTURE0);var v=o.gradientTexture;if(!o.gradient)return;v||(v=o.gradientTexture=new t.Texture(f,o.gradient,m.RGBA)),v.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var y=0,x=r;y<x.length;y+=1){var b=x[y],w=i.getTile(b);if(!h||w.patternsLoaded()){var T=w.getBucket(o);if(T){var E=T.programConfigurations.get(o.id),I=e.context.program.get(),P=e.useProgram(_,E),S=g||P.program!==I,C=u.constantOr(null);if(C&&w.imageAtlas){var z=w.imageAtlas,D=z.patternPositions[C.to.toString()],M=z.patternPositions[C.from.toString()];D&&M&&E.setConstantPatternPositions(D,M)}var L=h?Oi(e,w,o,d):c?Fi(e,w,o,c,d):p?Bi(e,w,o):ki(e,w,o);h?(f.activeTexture.set(m.TEXTURE0),w.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),E.updatePaintBuffers(d)):c&&(S||e.lineAtlas.dirty)&&(f.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(f)),P.draw(f,m.TRIANGLES,s,e.stencilModeForClipping(b),l,Ct.disabled,L,o.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,o.paint,e.transform.zoom,E),g=!1}}}}}},fill:function(e,i,o,r){var a=o.paint.get("fill-color"),n=o.paint.get("fill-opacity");if(0!==n.constantOr(1)){var s=e.colorModeForRenderPass(),l=o.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(t.Color.transparent).a&&1===n.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){var u=e.depthModeForSublayer(1,"opaque"===e.renderPass?It.ReadWrite:It.ReadOnly);oo(e,i,o,r,u,s,!1)}if("translucent"===e.renderPass&&o.paint.get("fill-antialias")){var h=e.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,It.ReadOnly);oo(e,i,o,r,h,s,!0)}}},"fill-extrusion":function(t,e,i,o){var r=i.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===t.renderPass){var a=new It(t.context.gl.LEQUAL,It.ReadWrite,t.depthRangeFor3D);if(1!==r||i.paint.get("fill-extrusion-pattern").constantOr(1))ro(t,e,i,o,a,Pt.disabled,St.disabled),ro(t,e,i,o,a,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var n=t.colorModeForRenderPass();ro(t,e,i,o,a,Pt.disabled,n)}}},hillshade:function(t,e,i,o){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var r=t.context,a=e.getSource().maxzoom,n=t.depthModeForSublayer(0,It.ReadOnly),s=t.colorModeForRenderPass(),l="translucent"===t.renderPass?t.stencilConfigForOverlap(o):[{},o],c=l[0],u=0,h=l[1];u<h.length;u+=1){var p=h[u],d=e.getTile(p);d.needsHillshadePrepare&&"offscreen"===t.renderPass?no(t,d,i,a,n,Pt.disabled,s):"translucent"===t.renderPass&&ao(t,d,i,n,c[p.overscaledZ],s)}r.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,i,o){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity")&&o.length)for(var r=t.context,a=r.gl,n=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),c=n instanceof L?[{},o]:t.stencilConfigForOverlap(o),u=c[0],h=c[1],p=h[h.length-1].overscaledZ,d=!t.options.moving,_=0,f=h;_<f.length;_+=1){var m=f[_],g=t.depthModeForSublayer(m.overscaledZ-p,1===i.paint.get("raster-opacity")?It.ReadWrite:It.ReadOnly,a.LESS),v=e.getTile(m),y=t.transform.calculatePosMatrix(m.toUnwrapped(),d);v.registerFadeDuration(i.paint.get("raster-fade-duration"));var x=e.findLoadedParent(m,0),b=so(v,x,e,i,t.transform),w=void 0,T=void 0,E="nearest"===i.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;r.activeTexture.set(a.TEXTURE0),v.texture.bind(E,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(a.TEXTURE1),x?(x.texture.bind(E,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,x.tileID.overscaledZ-v.tileID.overscaledZ),T=[v.tileID.canonical.x*w%1,v.tileID.canonical.y*w%1]):v.texture.bind(E,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);var I=Zi(y,T||[0,0],w||1,b,i);n instanceof L?s.draw(r,a.TRIANGLES,g,Pt.disabled,l,Ct.disabled,I,i.id,n.boundsBuffer,t.quadTriangleIndexBuffer,n.boundsSegments):s.draw(r,a.TRIANGLES,g,u[m.overscaledZ],l,Ct.disabled,I,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i){var o=i.paint.get("background-color"),r=i.paint.get("background-opacity");if(0!==r){var a=t.context,n=a.gl,s=t.transform,l=s.tileSize,c=i.paint.get("background-pattern");if(!t.isPatternMissing(c)){var u=!c&&1===o.a&&1===r&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===u){var h=Pt.disabled,p=t.depthModeForSublayer(0,"opaque"===u?It.ReadWrite:It.ReadOnly),d=t.colorModeForRenderPass(),_=t.useProgram(c?"backgroundPattern":"background"),f=s.coveringTiles({tileSize:l});c&&(a.activeTexture.set(n.TEXTURE0),t.imageManager.bind(t.context));for(var m=i.getCrossfadeParameters(),g=0,v=f;g<v.length;g+=1){var y=v[g],x=t.transform.calculatePosMatrix(y.toUnwrapped()),b=c?Hi(x,r,t,c,{tileID:y,tileSize:l},m):Xi(x,r,o);_.draw(a,n.TRIANGLES,p,h,d,Ct.disabled,b,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,i){for(var o=0;o<i.length;o++)go(t,e,i[o])},custom:function(t,e,i){var o=t.context,r=i.implementation;if("offscreen"===t.renderPass){var a=r.prerender;a&&(t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),a.call(r,o.gl,t.transform.customLayerMatrix()),o.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),o.setStencilMode(Pt.disabled);var n="3d"===r.renderingMode?new It(t.context.gl.LEQUAL,It.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,It.ReadOnly);o.setDepthMode(n),r.render(o.gl,t.transform.customLayerMatrix()),o.setDirty(),t.setBaseState(),o.bindFramebuffer.set(null)}}},yo=function(t,e){this.context=new zt(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Dt.maxUnderzooming+Dt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fe,this.gpuTimers={}};yo.prototype.resize=function(e,i){if(this.width=e*t.browser.devicePixelRatio,this.height=i*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,r=this.style._order;o<r.length;o+=1)this.style._layers[r[o]].resize()},yo.prototype.setup=function(){var e=this.context,i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,Ve.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(t.EXTENT,0),o.emplaceBack(0,t.EXTENT),o.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(o,Ve.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,M.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,Ve.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var n=new t.StructArrayLayout1ui2;n.emplaceBack(0),n.emplaceBack(1),n.emplaceBack(3),n.emplaceBack(2),n.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(n);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var l=this.context.gl;this.stencilClearMode=new Pt({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},yo.prototype.clearStencil=function(){var e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var o=t.create();t.ortho(o,0,this.width,this.height,0,0,1),t.scale(o,o,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,i.TRIANGLES,It.disabled,this.stencilClearMode,St.disabled,Ct.disabled,Ai(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},yo.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var i=this.context,o=i.gl;this.nextStencilID+e.length>256&&this.clearStencil(),i.setColorMode(St.disabled),i.setDepthMode(It.disabled);var r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var a=0,n=e;a<n.length;a+=1){var s=n[a],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;r.draw(i,o.TRIANGLES,It.disabled,new Pt({func:o.ALWAYS,mask:0},l,255,o.KEEP,o.KEEP,o.REPLACE),St.disabled,Ct.disabled,Ai(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},yo.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Pt({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},yo.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Pt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},yo.prototype.stencilConfigForOverlap=function(t){var e,i=this.context.gl,o=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),r=o[o.length-1].overscaledZ,a=o[0].overscaledZ-r+1;if(a>1){this.currentStencilSource=void 0,this.nextStencilID+a>256&&this.clearStencil();for(var n={},s=0;s<a;s++)n[s+r]=new Pt({func:i.GEQUAL,mask:255},s+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=a,[n,o]}return[(e={},e[r]=Pt.disabled,e),o]},yo.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new St([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?St.unblended:St.alphaBlended},yo.prototype.depthModeForSublayer=function(t,e,i){if(!this.opaquePassEnabledForLayer())return It.disabled;var o=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new It(i||this.context.gl.LEQUAL,e,[o,o])},yo.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},yo.prototype.render=function(e,i){var o=this;this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var r=this.style._order,a=this.style.sourceCaches;for(var n in a){var s=a[n];s.used&&s.prepare(this.context)}var l,c,u={},h={},p={};for(var d in a){var _=a[d];u[d]=_.getVisibleCoordinates(),h[d]=u[d].slice().reverse(),p[d]=_.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var f=0;f<r.length;f++)if(this.style._layers[r[f]].is3D()){this.opaquePassCutoff=f;break}this.renderPass="offscreen";for(var m=0,g=r;m<g.length;m+=1){var v=this.style._layers[g[m]];if(v.hasOffscreenPass()&&!v.isHidden(this.transform.zoom)){var y=h[v.source];("custom"===v.type||y.length)&&this.renderLayer(this,a[v.source],v,y)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var x=this.style._layers[r[this.currentLayer]],b=a[x.source],w=u[x.source];this._renderTileClippingMasks(x,w),this.renderLayer(this,b,x,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var T=this.style._layers[r[this.currentLayer]],E=a[T.source],I=("symbol"===T.type?p:h)[T.source];this._renderTileClippingMasks(T,u[T.source]),this.renderLayer(this,E,T,I)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(o.transform.zoom)&&(t.source!==(c&&c.id)&&(c=o.style.sourceCaches[t.source]),(!l||l.getSource().maxzoom<c.getSource().maxzoom)&&(l=c))})),l&&vo.debug(this,l,l.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;_o(t,t.transform.height-(e.top||0),3,lo),_o(t,e.bottom||0,3,co),fo(t,e.left||0,3,uo),fo(t,t.transform.width-(e.right||0),3,ho);var i=t.transform.centerPoint;!function(t,e,i,o){mo(t,e-1,i-10,2,20,o),mo(t,e-10,i-1,20,2,o)}(t,i.x,t.transform.height-i.y,po)}(this),this.context.setDefault()},yo.prototype.renderLayer=function(t,e,i,o){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||o.length)&&(this.id=i.id,this.gpuTimingStart(i),vo[i.type](t,e,i,o,this.style.placement.variableOffsets),this.gpuTimingEnd())},yo.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}},yo.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},yo.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},yo.prototype.queryGpuTimers=function(t){var e={};for(var i in t){var o=t[i],r=this.context.extTimerQuery,a=r.getQueryObjectEXT(o.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(o.query),e[i]=a}return e},yo.prototype.translatePosMatrix=function(e,i,o,r,a){if(!o[0]&&!o[1])return e;var n=a?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(n){var s=Math.sin(n),l=Math.cos(n);o=[o[0]*l-o[1]*s,o[0]*s+o[1]*l]}var c=[a?o[0]:pe(i,o[0],this.transform.zoom),a?o[1]:pe(i,o[1],this.transform.zoom),0],u=new Float32Array(16);return t.translate(u,e,c),u},yo.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},yo.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},yo.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i},yo.prototype.useProgram=function(t,e){this.cache=this.cache||{};var i=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new bi(this.context,t,vi[t],e,Ki[t],this._showOverdrawInspector)),this.cache[i]},yo.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},yo.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},yo.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},yo.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var xo=function(t,e){this.points=t,this.planes=e};xo.fromInvProjectionMatrix=function(e,i,o){var r=Math.pow(2,o),a=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(i){return t.transformMat4([],i,e)})).map((function(e){return t.scale$1([],e,1/e[3]/i*r)})),n=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var i=t.sub([],a[e[0]],a[e[1]]),o=t.sub([],a[e[2]],a[e[1]]),r=t.normalize([],t.cross([],i,o)),n=-t.dot(r,a[e[1]]);return r.concat(n)}));return new xo(a,n)};var bo=function(e,i){this.min=e,this.max=i,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};bo.prototype.quadrant=function(e){for(var i=[e%2==0,e<2],o=t.clone$2(this.min),r=t.clone$2(this.max),a=0;a<i.length;a++)o[a]=i[a]?this.min[a]:this.center[a],r[a]=i[a]?this.center[a]:this.max[a];return r[2]=this.max[2],new bo(o,r)},bo.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},bo.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},bo.prototype.intersects=function(e){for(var i=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],o=!0,r=0;r<e.planes.length;r++){for(var a=e.planes[r],n=0,s=0;s<i.length;s++)n+=t.dot$1(a,i[s])>=0;if(0===n)return 0;n!==i.length&&(o=!1)}if(o)return 2;for(var l=0;l<3;l++){for(var c=Number.MAX_VALUE,u=-Number.MAX_VALUE,h=0;h<e.points.length;h++){var p=e.points[h][l]-this.min[l];c=Math.min(c,p),u=Math.max(u,p)}if(u<0||c>this.max[l]-this.min[l])return 0}return 1};var wo=function(t,e,i,o){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(o)||o<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=o};wo.prototype.interpolate=function(e,i,o){return null!=i.top&&null!=e.top&&(this.top=t.number(e.top,i.top,o)),null!=i.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,i.bottom,o)),null!=i.left&&null!=e.left&&(this.left=t.number(e.left,i.left,o)),null!=i.right&&null!=e.right&&(this.right=t.number(e.right,i.right,o)),this},wo.prototype.getCenter=function(e,i){var o=t.clamp((this.left+e-this.right)/2,0,e),r=t.clamp((this.top+i-this.bottom)/2,0,i);return new t.Point(o,r)},wo.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},wo.prototype.clone=function(){return new wo(this.top,this.bottom,this.left,this.right)},wo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var To=function(e,i,o,r,a){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===a||a,this._minZoom=e||0,this._maxZoom=i||22,this._minPitch=null==o?0:o,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new wo,this._posMatrixCache={},this._alignedPosMatrixCache={}},Eo={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};To.prototype.clone=function(){var t=new To(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},Eo.minZoom.get=function(){return this._minZoom},Eo.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Eo.maxZoom.get=function(){return this._maxZoom},Eo.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Eo.minPitch.get=function(){return this._minPitch},Eo.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},Eo.maxPitch.get=function(){return this._maxPitch},Eo.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},Eo.renderWorldCopies.get=function(){return this._renderWorldCopies},Eo.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Eo.worldSize.get=function(){return this.tileSize*this.scale},Eo.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Eo.size.get=function(){return new t.Point(this.width,this.height)},Eo.bearing.get=function(){return-this.angle/Math.PI*180},Eo.bearing.set=function(e){var i=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Eo.pitch.get=function(){return this._pitch/Math.PI*180},Eo.pitch.set=function(e){var i=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())},Eo.fov.get=function(){return this._fov/Math.PI*180},Eo.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Eo.zoom.get=function(){return this._zoom},Eo.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Eo.center.get=function(){return this._center},Eo.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Eo.padding.get=function(){return this._edgeInsets.toJSON()},Eo.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},Eo.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},To.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},To.prototype.interpolatePadding=function(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()},To.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},To.prototype.getVisibleUnwrappedCoordinates=function(e){var i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new t.Point(0,0)),r=this.pointCoordinate(new t.Point(this.width,0)),a=this.pointCoordinate(new t.Point(this.width,this.height)),n=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(o.x,r.x,a.x,n.x)),l=Math.floor(Math.max(o.x,r.x,a.x,n.x)),c=s-1;c<=l+1;c++)0!==c&&i.push(new t.UnwrappedTileID(c,e));return i},To.prototype.coveringTiles=function(e){var i=this.coveringZoomLevel(e),o=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);var r=t.MercatorCoordinate.fromLngLat(this.center),a=Math.pow(2,i),n=[a*r.x,a*r.y,0],s=xo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),l=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(l=i);var c=function(t){return{aabb:new bo([t*a,0,0],[(t+1)*a,a,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},u=[],h=[],p=i,d=e.reparseOverscaled?o:i;if(this._renderWorldCopies)for(var _=1;_<=3;_++)u.push(c(-_)),u.push(c(_));for(u.push(c(0));u.length>0;){var f=u.pop(),m=f.x,g=f.y,v=f.fullyVisible;if(!v){var y=f.aabb.intersects(s);if(0===y)continue;v=2===y}var x=f.aabb.distanceX(n),b=f.aabb.distanceY(n),w=Math.max(Math.abs(x),Math.abs(b));if(f.zoom===p||w>3+(1<<p-f.zoom)-2&&f.zoom>=l)h.push({tileID:new t.OverscaledTileID(f.zoom===p?d:f.zoom,f.wrap,f.zoom,m,g),distanceSq:t.sqrLen([n[0]-.5-m,n[1]-.5-g])});else for(var T=0;T<4;T++){var E=(m<<1)+T%2,I=(g<<1)+(T>>1);u.push({aabb:f.aabb.quadrant(T),zoom:f.zoom+1,x:E,y:I,wrap:f.wrap,fullyVisible:v})}}return h.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},To.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Eo.unmodified.get=function(){return this._unmodified},To.prototype.zoomScale=function(t){return Math.pow(2,t)},To.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},To.prototype.project=function(e){var i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)},To.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},Eo.point.get=function(){return this.project(this.center)},To.prototype.setLocationAtPoint=function(e,i){var o=this.pointCoordinate(i),r=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(e),n=new t.MercatorCoordinate(a.x-(o.x-r.x),a.y-(o.y-r.y));this.center=this.coordinateLocation(n),this._renderWorldCopies&&(this.center=this.center.wrap())},To.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},To.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},To.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},To.prototype.coordinateLocation=function(t){return t.toLngLat()},To.prototype.pointCoordinate=function(e){var i=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(o,o,this.pixelMatrixInverse);var r=i[3],a=o[3],n=i[1]/r,s=o[1]/a,l=i[2]/r,c=o[2]/a,u=l===c?0:(0-l)/(c-l);return new t.MercatorCoordinate(t.number(i[0]/r,o[0]/a,u)/this.worldSize,t.number(n,s,u)/this.worldSize)},To.prototype.coordinatePoint=function(e){var i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix),new t.Point(i[0]/i[3],i[1]/i[3])},To.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},To.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},To.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},To.prototype.calculatePosMatrix=function(e,i){void 0===i&&(i=!1);var o=e.key,r=i?this._alignedPosMatrixCache:this._posMatrixCache;if(r[o])return r[o];var a=e.canonical,n=this.worldSize/this.zoomScale(a.z),s=a.x+Math.pow(2,a.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*n,a.y*n,0]),t.scale(l,l,[n/t.EXTENT,n/t.EXTENT,1]),t.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),r[o]=new Float32Array(l),r[o]},To.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},To.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,i,o,r,a=-90,n=90,s=-180,l=180,c=this.size,u=this._unmodified;if(this.latRange){var h=this.latRange;a=t.mercatorYfromLat(h[1])*this.worldSize,e=(n=t.mercatorYfromLat(h[0])*this.worldSize)-a<c.y?c.y/(n-a):0}if(this.lngRange){var p=this.lngRange;s=t.mercatorXfromLng(p[0])*this.worldSize,i=(l=t.mercatorXfromLng(p[1])*this.worldSize)-s<c.x?c.x/(l-s):0}var d=this.point,_=Math.max(i||0,e||0);if(_)return this.center=this.unproject(new t.Point(i?(l+s)/2:d.x,e?(n+a)/2:d.y)),this.zoom+=this.scaleZoom(_),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var f=d.y,m=c.y/2;f-m<a&&(r=a+m),f+m>n&&(r=n-m)}if(this.lngRange){var g=d.x,v=c.x/2;g-v<s&&(o=s+v),g+v>l&&(o=l-v)}void 0===o&&void 0===r||(this.center=this.unproject(new t.Point(void 0!==o?o:d.x,void 0!==r?r:d.y))),this._unmodified=u,this._constraining=!1}},To.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var i=Math.PI/2+this._pitch,o=this._fov*(.5+e.y/this.height),r=Math.sin(o)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-i-o,.01,Math.PI-.01)),a=this.point,n=a.x,s=a.y,l=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),c=this.height/50,u=new Float64Array(16);t.perspective(u,this._fov,this.width/this.height,c,l),u[8]=2*-e.x/this.width,u[9]=2*e.y/this.height,t.scale(u,u,[1,-1,1]),t.translate(u,u,[0,0,-this.cameraToCenterDistance]),t.rotateX(u,u,this._pitch),t.rotateZ(u,u,this.angle),t.translate(u,u,[-n,-s,0]),this.mercatorMatrix=t.scale([],u,[this.worldSize,this.worldSize,this.worldSize]),t.scale(u,u,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=u,this.invProjMatrix=t.invert([],this.projMatrix);var h=this.width%2/2,p=this.height%2/2,d=Math.cos(this.angle),_=Math.sin(this.angle),f=n-Math.round(n)+d*h+_*p,m=s-Math.round(s)+d*p+_*h,g=new Float64Array(u);if(t.translate(g,g,[f>.5?f-1:f,m>.5?m-1:m,0]),this.alignedProjMatrix=g,u=t.create(),t.scale(u,u,[this.width/2,-this.height/2,1]),t.translate(u,u,[1,-1,0]),this.labelPlaneMatrix=u,u=t.create(),t.scale(u,u,[1,-1,1]),t.translate(u,u,[-1,-1,0]),t.scale(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(u=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}},To.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},To.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},To.prototype.getCameraQueryGeometry=function(e){var i=this.getCameraPoint();if(1===e.length)return[e[0],i];for(var o=i.x,r=i.y,a=i.x,n=i.y,s=0,l=e;s<l.length;s+=1){var c=l[s];o=Math.min(o,c.x),r=Math.min(r,c.y),a=Math.max(a,c.x),n=Math.max(n,c.y)}return[new t.Point(o,r),new t.Point(a,r),new t.Point(a,n),new t.Point(o,n),new t.Point(o,r)]},Object.defineProperties(To.prototype,Eo);var Io=function(e){var i,o,r,a;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(i=this._updateHashUnthrottled.bind(this),o=!1,r=null,a=function(){r=null,o&&(i(),r=setTimeout(a,300),o=!1)},function(){return o=!0,r||a(),r})};Io.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Io.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Io.prototype.getHashString=function(e){var i=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,r=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,r),n=Math.round(i.lng*a)/a,s=Math.round(i.lat*a)/a,l=this._map.getBearing(),c=this._map.getPitch(),u="";if(u+=e?"/"+n+"/"+s+"/"+o:o+"/"+s+"/"+n,(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/"+Math.round(c)),this._hashName){var h=this._hashName,p=!1,d=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===h?(p=!0,e+"="+u):t})).filter((function(t){return t}));return p||d.push(h+"="+u),"#"+d.join("&")}return"#"+u},Io.prototype._getCurrentHash=function(){var e,i=this,o=t.window.location.hash.replace("#","");return this._hashName?(o.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===i._hashName&&(e=t)})),(e&&e[1]||"").split("/")):o.split("/")},Io.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},Io.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var Po={linearity:.3,easing:t.bezier(0,0,.3,1)},So=t.extend({deceleration:2500,maxSpeed:1400},Po),Co=t.extend({deceleration:20,maxSpeed:1400},Po),zo=t.extend({deceleration:1e3,maxSpeed:360},Po),Do=t.extend({deceleration:1e3,maxSpeed:90},Po),Mo=function(t){this._map=t,this.clear()};function Lo(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Ao(e,i,o){var r=o.maxSpeed,a=o.linearity,n=o.deceleration,s=t.clamp(e*a/(i/1e3),-r,r),l=Math.abs(s)/(n*a);return{easing:o.easing,duration:1e3*l,amount:s*(l/2)}}Mo.prototype.clear=function(){this._inertiaBuffer=[]},Mo.prototype.record=function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})},Mo.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,i=t.browser.now();e.length>0&&i-e[0].time>160;)e.shift()},Mo.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var i={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},o=0,r=this._inertiaBuffer;o<r.length;o+=1){var a=r[o].settings;i.zoom+=a.zoomDelta||0,i.bearing+=a.bearingDelta||0,i.pitch+=a.pitchDelta||0,a.panDelta&&i.pan._add(a.panDelta),a.around&&(i.around=a.around),a.pinchAround&&(i.pinchAround=a.pinchAround)}var n=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(i.pan.mag()){var l=Ao(i.pan.mag(),n,t.extend({},So,e||{}));s.offset=i.pan.mult(l.amount/i.pan.mag()),s.center=this._map.transform.center,Lo(s,l)}if(i.zoom){var c=Ao(i.zoom,n,Co);s.zoom=this._map.transform.zoom+c.amount,Lo(s,c)}if(i.bearing){var u=Ao(i.bearing,n,zo);s.bearing=this._map.transform.bearing+t.clamp(u.amount,-179,179),Lo(s,u)}if(i.pitch){var h=Ao(i.pitch,n,Do);s.pitch=this._map.transform.pitch+h.amount,Lo(s,h)}if(s.zoom||s.bearing){var p=void 0===i.pinchAround?i.around:i.pinchAround;s.around=p?this._map.unproject(p):this._map.getCenter()}return this.clear(),t.extend(s,{noMoveStart:!0})}};var Ro=function(e){function o(o,r,a,n){void 0===n&&(n={});var s=i.mousePos(r.getCanvasContainer(),a),l=r.unproject(s);e.call(this,o,t.extend({point:s,lngLat:l,originalEvent:a},n)),this._defaultPrevented=!1,this.target=r}e&&(o.__proto__=e),(o.prototype=Object.create(e&&e.prototype)).constructor=o;var r={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,r),o}(t.Event),ko=function(e){function o(o,r,a){var n="touchend"===o?a.changedTouches:a.touches,s=i.touchPos(r.getCanvasContainer(),n),l=s.map((function(t){return r.unproject(t)})),c=s.reduce((function(t,e,i,o){return t.add(e.div(o.length))}),new t.Point(0,0)),u=r.unproject(c);e.call(this,o,{points:s,point:c,lngLats:l,lngLat:u,originalEvent:a}),this._defaultPrevented=!1}e&&(o.__proto__=e),(o.prototype=Object.create(e&&e.prototype)).constructor=o;var r={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,r),o}(t.Event),Bo=function(t){function e(e,i,o){t.call(this,e,{originalEvent:o}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(t.Event),Oo=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};Oo.prototype.reset=function(){delete this._mousedownPos},Oo.prototype.wheel=function(t){return this._firePreventable(new Bo(t.type,this._map,t))},Oo.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Ro(t.type,this._map,t))},Oo.prototype.mouseup=function(t){this._map.fire(new Ro(t.type,this._map,t))},Oo.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Ro(t.type,this._map,t))},Oo.prototype.dblclick=function(t){return this._firePreventable(new Ro(t.type,this._map,t))},Oo.prototype.mouseover=function(t){this._map.fire(new Ro(t.type,this._map,t))},Oo.prototype.mouseout=function(t){this._map.fire(new Ro(t.type,this._map,t))},Oo.prototype.touchstart=function(t){return this._firePreventable(new ko(t.type,this._map,t))},Oo.prototype.touchmove=function(t){this._map.fire(new ko(t.type,this._map,t))},Oo.prototype.touchend=function(t){this._map.fire(new ko(t.type,this._map,t))},Oo.prototype.touchcancel=function(t){this._map.fire(new ko(t.type,this._map,t))},Oo.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},Oo.prototype.isEnabled=function(){return!0},Oo.prototype.isActive=function(){return!1},Oo.prototype.enable=function(){},Oo.prototype.disable=function(){};var Fo=function(t){this._map=t};Fo.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Fo.prototype.mousemove=function(t){this._map.fire(new Ro(t.type,this._map,t))},Fo.prototype.mousedown=function(){this._delayContextMenu=!0},Fo.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ro("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Fo.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Ro(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},Fo.prototype.isEnabled=function(){return!0},Fo.prototype.isActive=function(){return!1},Fo.prototype.enable=function(){},Fo.prototype.disable=function(){};var Uo=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function No(t,e){for(var i={},o=0;o<t.length;o++)i[t[o].identifier]=e[o];return i}Uo.prototype.isEnabled=function(){return!!this._enabled},Uo.prototype.isActive=function(){return!!this._active},Uo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Uo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Uo.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(i.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Uo.prototype.mousemoveWindow=function(t,e){if(this._active){var o=e;if(!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=o,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var a=Math.min(r.x,o.x),n=Math.max(r.x,o.x),s=Math.min(r.y,o.y),l=Math.max(r.y,o.y);i.setTransform(this._box,"translate("+a+"px,"+s+"px)"),this._box.style.width=n-a+"px",this._box.style.height=l-s+"px"}}},Uo.prototype.mouseupWindow=function(e,o){var r=this;if(this._active&&0===e.button){var a=this._startPos,n=o;if(this.reset(),i.suppressClick(),a.x!==n.x||a.y!==n.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(a,n,r._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}},Uo.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Uo.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},Uo.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))};var Zo=function(t){this.reset(),this.numTouches=t.numTouches};Zo.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Zo.prototype.touchstart=function(e,i,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),o.length===this.numTouches&&(this.centroid=function(e){for(var i=new t.Point(0,0),o=0,r=e;o<r.length;o+=1)i._add(r[o]);return i.div(e.length)}(i),this.touches=No(o,i)))},Zo.prototype.touchmove=function(t,e,i){if(!this.aborted&&this.centroid){var o=No(i,e);for(var r in this.touches){var a=o[r];(!a||a.dist(this.touches[r])>30)&&(this.aborted=!0)}}},Zo.prototype.touchend=function(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){var o=!this.aborted&&this.centroid;if(this.reset(),o)return o}};var jo=function(t){this.singleTap=new Zo(t),this.numTaps=t.numTaps,this.reset()};jo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},jo.prototype.touchstart=function(t,e,i){this.singleTap.touchstart(t,e,i)},jo.prototype.touchmove=function(t,e,i){this.singleTap.touchmove(t,e,i)},jo.prototype.touchend=function(t,e,i){var o=this.singleTap.touchend(t,e,i);if(o){var r=t.timeStamp-this.lastTime<500,a=!this.lastTap||this.lastTap.dist(o)<30;if(r&&a||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=o,this.count===this.numTaps)return this.reset(),o}};var qo=function(){this._zoomIn=new jo({numTouches:1,numTaps:2}),this._zoomOut=new jo({numTouches:2,numTaps:1}),this.reset()};qo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},qo.prototype.touchstart=function(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)},qo.prototype.touchmove=function(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)},qo.prototype.touchend=function(t,e,i){var o=this,r=this._zoomIn.touchend(t,e,i),a=this._zoomOut.touchend(t,e,i);return r?(this._active=!0,t.preventDefault(),setTimeout((function(){return o.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}}):a?(this._active=!0,t.preventDefault(),setTimeout((function(){return o.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(a)},{originalEvent:t})}}):void 0},qo.prototype.touchcancel=function(){this.reset()},qo.prototype.enable=function(){this._enabled=!0},qo.prototype.disable=function(){this._enabled=!1,this.reset()},qo.prototype.isEnabled=function(){return this._enabled},qo.prototype.isActive=function(){return this._active};var Vo={0:1,2:2},Go=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};Go.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Go.prototype._correctButton=function(t,e){return!1},Go.prototype._move=function(t,e){return{}},Go.prototype.mousedown=function(t,e){if(!this._lastPoint){var o=i.mouseButton(t);this._correctButton(t,o)&&(this._lastPoint=e,this._eventButton=o)}},Go.prototype.mousemoveWindow=function(t,e){var i=this._lastPoint;if(i)if(t.preventDefault(),function(t,e){var i=Vo[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(i,e)},Go.prototype.mouseupWindow=function(t){this._lastPoint&&i.mouseButton(t)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},Go.prototype.enable=function(){this._enabled=!0},Go.prototype.disable=function(){this._enabled=!1,this.reset()},Go.prototype.isEnabled=function(){return this._enabled},Go.prototype.isActive=function(){return this._active};var Wo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,i){t.prototype.mousedown.call(this,e,i),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(Go),Xo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Go),Ho=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Go),Ko=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Ko.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Ko.prototype.touchstart=function(t,e,i){return this._calculateTransform(t,e,i)},Ko.prototype.touchmove=function(t,e,i){if(this._active)return t.preventDefault(),this._calculateTransform(t,e,i)},Ko.prototype.touchend=function(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this._minTouches&&this.reset()},Ko.prototype.touchcancel=function(){this.reset()},Ko.prototype._calculateTransform=function(e,i,o){o.length>0&&(this._active=!0);var r=No(o,i),a=new t.Point(0,0),n=new t.Point(0,0),s=0;for(var l in r){var c=r[l],u=this._touches[l];u&&(a._add(c),n._add(c.sub(u)),s++,r[l]=c)}if(this._touches=r,!(s<this._minTouches)&&n.mag()){var h=n.div(s);if(this._sum._add(h),!(this._sum.mag()<this._clickTolerance))return{around:a.div(s),panDelta:h}}},Ko.prototype.enable=function(){this._enabled=!0},Ko.prototype.disable=function(){this._enabled=!1,this.reset()},Ko.prototype.isEnabled=function(){return this._enabled},Ko.prototype.isActive=function(){return this._active};var Yo=function(){this.reset()};function Jo(t,e,i){for(var o=0;o<t.length;o++)if(t[o].identifier===i)return e[o]}function Qo(t,e){return Math.log(t/e)/Math.LN2}Yo.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Yo.prototype._start=function(t){},Yo.prototype._move=function(t,e,i){return{}},Yo.prototype.touchstart=function(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))},Yo.prototype.touchmove=function(t,e,i){if(this._firstTwoTouches){t.preventDefault();var o=this._firstTwoTouches,r=o[1],a=Jo(i,e,o[0]),n=Jo(i,e,r);if(a&&n){var s=this._aroundCenter?null:a.add(n).div(2);return this._move([a,n],s,t)}}},Yo.prototype.touchend=function(t,e,o){if(this._firstTwoTouches){var r=this._firstTwoTouches,a=r[1],n=Jo(o,e,r[0]),s=Jo(o,e,a);n&&s||(this._active&&i.suppressClick(),this.reset())}},Yo.prototype.touchcancel=function(){this.reset()},Yo.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Yo.prototype.disable=function(){this._enabled=!1,this.reset()},Yo.prototype.isEnabled=function(){return this._enabled},Yo.prototype.isActive=function(){return this._active};var $o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Qo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Qo(this._distance,i),pinchAround:e}},e}(Yo);function tr(t,e){return 180*t.angleWith(e)/Math.PI}var er=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:tr(this._vector,i),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,i=tr(t,this._startVector);return Math.abs(i)<e},e}(Yo);function ir(t){return Math.abs(t.y)>Math.abs(t.x)}var or=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,ir(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,i){var o=t[0].sub(this._lastPoints[0]),r=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(o,r,i.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(o.y+r.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,i){if(void 0!==this._valid)return this._valid;var o=t.mag()>=2,r=e.mag()>=2;if(o||r){if(!o||!r)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var a=t.y>0==e.y>0;return ir(t)&&ir(e)&&a}},e}(Yo),rr={panStep:100,bearingStep:15,pitchStep:10},ar=function(){var t=rr;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep};function nr(t){return t*(2-t)}ar.prototype.reset=function(){this._active=!1},ar.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=0,o=0,r=0,a=0,n=0;switch(t.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:t.shiftKey?o=-1:(t.preventDefault(),a=-1);break;case 39:t.shiftKey?o=1:(t.preventDefault(),a=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),n=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),n=1);break;default:return}return{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:nr,zoom:i?Math.round(l)+i*(t.shiftKey?2:1):l,bearing:s.getBearing()+o*e._bearingStep,pitch:s.getPitch()+r*e._pitchStep,offset:[-a*e._panStep,-n*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},ar.prototype.enable=function(){this._enabled=!0},ar.prototype.disable=function(){this._enabled=!1,this.reset()},ar.prototype.isEnabled=function(){return this._enabled},ar.prototype.isActive=function(){return this._active};var sr=function(e,i){this._map=e,this._el=e.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};sr.prototype.setZoomRate=function(t){this._defaultZoomRate=t},sr.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},sr.prototype.isEnabled=function(){return!!this._enabled},sr.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},sr.prototype.isZooming=function(){return!!this._zooming},sr.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},sr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},sr.prototype.wheel=function(e){if(this.isEnabled()){var i=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,o=t.browser.now(),r=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e)),e.preventDefault()}},sr.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},sr.prototype._start=function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var o=i.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(o)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},sr.prototype.renderFrame=function(){return this._onScrollFrame()},sr.prototype._onScrollFrame=function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var i=this._map.transform;if(0!==this._delta){var o="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,r=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&0!==r&&(r=1/r);var a="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var n,s="number"==typeof this._targetZoom?this._targetZoom:i.zoom,l=this._startZoom,c=this._easing,u=!1;if("wheel"===this._type&&l&&c){var h=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=c(h);n=t.number(l,s,p),h<1?this._frameId||(this._frameId=!0):u=!0}else n=s,u=!0;return this._active=!0,u&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!u,zoomDelta:n-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},sr.prototype._smoothOutEasing=function(e){var i=t.ease;if(this._prevEase){var o=this._prevEase,r=(t.browser.now()-o.start)/o.duration,a=o.easing(r+.01)-o.easing(r),n=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-n*n);i=t.bezier(n,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:i},i},sr.prototype.reset=function(){this._active=!1};var lr=function(t,e){this._clickZoom=t,this._tapZoom=e};lr.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},lr.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},lr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},lr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var cr=function(){this.reset()};cr.prototype.reset=function(){this._active=!1},cr.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}},cr.prototype.enable=function(){this._enabled=!0},cr.prototype.disable=function(){this._enabled=!1,this.reset()},cr.prototype.isEnabled=function(){return this._enabled},cr.prototype.isActive=function(){return this._active};var ur=function(){this._tap=new jo({numTouches:1,numTaps:1}),this.reset()};ur.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ur.prototype.touchstart=function(t,e,i){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))},ur.prototype.touchmove=function(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;var o=e[0],r=o.y-this._swipePoint.y;return this._swipePoint=o,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e,i)},ur.prototype.touchend=function(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)},ur.prototype.touchcancel=function(){this.reset()},ur.prototype.enable=function(){this._enabled=!0},ur.prototype.disable=function(){this._enabled=!1,this.reset()},ur.prototype.isEnabled=function(){return this._enabled},ur.prototype.isActive=function(){return this._active};var hr=function(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i};hr.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},hr.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},hr.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},hr.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var pr=function(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i};pr.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},pr.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},pr.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},pr.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var dr=function(t,e,i,o){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=o,this._rotationDisabled=!1,this._enabled=!0};dr.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},dr.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},dr.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},dr.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},dr.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},dr.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var _r=function(t){return t.zoom||t.drag||t.pitch||t.rotate},fr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t.Event);function mr(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var gr=function(e,o){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mo(e),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o),t.bindAll(["handleEvent","handleWindowEvent"],this);var r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[t.window,"blur",void 0]];for(var a=0,n=this._listeners;a<n.length;a+=1){var s=n[a],l=s[0];i.addEventListener(l,s[1],l===t.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};gr.prototype.destroy=function(){for(var e=0,o=this._listeners;e<o.length;e+=1){var r=o[e],a=r[0];i.removeEventListener(a,r[1],a===t.window.document?this.handleWindowEvent:this.handleEvent,r[2])}},gr.prototype._addDefaultHandlers=function(t){var e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new Oo(e,t));var o=e.boxZoom=new Uo(e,t);this._add("boxZoom",o);var r=new qo,a=new cr;e.doubleClickZoom=new lr(a,r),this._add("tapZoom",r),this._add("clickZoom",a);var n=new ur;this._add("tapDragZoom",n);var s=e.touchPitch=new or;this._add("touchPitch",s);var l=new Xo(t),c=new Ho(t);e.dragRotate=new pr(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);var u=new Wo(t),h=new Ko(t);e.dragPan=new hr(i,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);var p=new er,d=new $o;e.touchZoomRotate=new dr(i,d,p,n),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]);var _=e.scrollZoom=new sr(e,this);this._add("scrollZoom",_,["mousePan"]);var f=e.keyboard=new ar;this._add("keyboard",f),this._add("blockableMapEvent",new Fo(e));for(var m=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<g.length;m+=1){var v=g[m];t.interactive&&t[v]&&e[v].enable(t[v])}},gr.prototype._add=function(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e},gr.prototype.stop=function(){if(!this._updatingCamera){for(var t=0,e=this._handlers;t<e.length;t+=1)e[t].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},gr.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},gr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},gr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},gr.prototype.isMoving=function(){return Boolean(_r(this._eventsInProgress))||this.isZooming()},gr.prototype._blockedByActive=function(t,e,i){for(var o in t)if(o!==i&&(!e||e.indexOf(o)<0))return!0;return!1},gr.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},gr.prototype._getMapTouches=function(t){for(var e=[],i=0,o=t;i<o.length;i+=1){var r=o[i];this._el.contains(r.target)&&e.push(r)}return e},gr.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var o="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},a={},n={},s=t.touches?this._getMapTouches(t.touches):void 0,l=s?i.touchPos(this._el,s):i.mousePos(this._el,t),c=0,u=this._handlers;c<u.length;c+=1){var h=u[c],p=h.handlerName,d=h.handler,_=h.allowed;if(d.isEnabled()){var f=void 0;this._blockedByActive(n,_,p)?d.reset():d[e||t.type]&&(f=d[e||t.type](t,l,s),this.mergeHandlerResult(r,a,f,p,o),f&&f.needsRenderFrame&&this._triggerRenderFrame()),(f||d.isActive())&&(n[p]=d)}}var m={};for(var g in this._previousActiveHandlers)n[g]||(m[g]=o);this._previousActiveHandlers=n,(Object.keys(m).length||mr(r))&&(this._changes.push([r,a,m]),this._triggerRenderFrame()),(Object.keys(n).length||mr(r))&&this._map._stop(!0),this._updatingCamera=!1;var v=r.cameraAnimation;v&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],v(this._map))}else this.stop()},gr.prototype.mergeHandlerResult=function(e,i,o,r,a){if(o){t.extend(e,o);var n={handlerName:r,originalEvent:o.originalEvent||a};void 0!==o.zoomDelta&&(i.zoom=n),void 0!==o.panDelta&&(i.drag=n),void 0!==o.pitchDelta&&(i.pitch=n),void 0!==o.bearingDelta&&(i.rotate=n)}},gr.prototype._applyChanges=function(){for(var e={},i={},o={},r=0,a=this._changes;r<a.length;r+=1){var n=a[r],s=n[0],l=n[1],c=n[2];s.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(e.around=s.around),void 0!==s.pinchAround&&(e.pinchAround=s.pinchAround),s.noInertia&&(e.noInertia=s.noInertia),t.extend(i,l),t.extend(o,c)}this._updateMapTransform(e,i,o),this._changes=[]},gr.prototype._updateMapTransform=function(t,e,i){var o=this._map,r=o.transform;if(!mr(t))return this._fireEvents(e,i);var a=t.panDelta,n=t.zoomDelta,s=t.bearingDelta,l=t.pitchDelta,c=t.around,u=t.pinchAround;void 0!==u&&(c=u),o._stop(!0),c=c||o.transform.centerPoint;var h=r.pointLocation(a?c.sub(a):c);s&&(r.bearing+=s),l&&(r.pitch+=l),n&&(r.zoom+=n),r.setLocationAtPoint(h,c),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,i)},gr.prototype._fireEvents=function(e,i){var o=this,r=_r(this._eventsInProgress),a=_r(e),n={};for(var s in e)this._eventsInProgress[s]||(n[s+"start"]=e[s].originalEvent),this._eventsInProgress[s]=e[s];for(var l in!r&&a&&this._fireEvent("movestart",a.originalEvent),n)this._fireEvent(l,n[l]);for(var c in e.rotate&&(this._bearingChanged=!0),a&&this._fireEvent("move",a.originalEvent),e)this._fireEvent(c,e[c].originalEvent);var u,h={};for(var p in this._eventsInProgress){var d=this._eventsInProgress[p],_=d.handlerName,f=d.originalEvent;this._handlersById[_].isActive()||(delete this._eventsInProgress[p],h[p+"end"]=u=i[_]||f)}for(var m in h)this._fireEvent(m,h[m]);var g=_r(this._eventsInProgress);if((r||a)&&!g){this._updatingCamera=!0;var v=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),y=function(t){return 0!==t&&-o._bearingSnap<t&&t<o._bearingSnap};v?(y(v.bearing||this._map.getBearing())&&(v.bearing=0),this._map.easeTo(v,{originalEvent:u})):(this._map.fire(new t.Event("moveend",{originalEvent:u})),y(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},gr.prototype._fireEvent=function(e,i){this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))},gr.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new fr("renderFrame",{timeStamp:e})),t._applyChanges()}))},gr.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var vr=function(e){function i(i,o){e.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=o.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},i.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},i.prototype.panBy=function(e,i,o){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),o)},i.prototype.panTo=function(e,i,o){return this.easeTo(t.extend({center:e},i),o)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},i.prototype.zoomTo=function(e,i,o){return this.easeTo(t.extend({zoom:e},i),o)},i.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},i.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},i.prototype.getPadding=function(){return this.transform.padding},i.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},i.prototype.rotateTo=function(e,i,o){return this.easeTo(t.extend({bearing:e},i),o)},i.prototype.resetNorth=function(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this},i.prototype.resetNorthPitch=function(e,i){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),i),this},i.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},i.prototype.cameraForBounds=function(e,i){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,i)},i.prototype._cameraForBoxAndBearing=function(e,i,o,r){var a={top:0,bottom:0,right:0,left:0};if("number"==typeof(r=t.extend({padding:a,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var n=r.padding;r.padding={top:n,bottom:n,right:n,left:n}}r.padding=t.extend(a,r.padding);var s=this.transform,l=s.padding,c=s.project(t.LngLat.convert(e)),u=s.project(t.LngLat.convert(i)),h=c.rotate(-o*Math.PI/180),p=u.rotate(-o*Math.PI/180),d=new t.Point(Math.max(h.x,p.x),Math.max(h.y,p.y)),_=new t.Point(Math.min(h.x,p.x),Math.min(h.y,p.y)),f=d.sub(_),m=(s.width-(l.left+l.right+r.padding.left+r.padding.right))/f.x,g=(s.height-(l.top+l.bottom+r.padding.top+r.padding.bottom))/f.y;if(!(g<0||m<0)){var v=Math.min(s.scaleZoom(s.scale*Math.min(m,g)),r.maxZoom),y=t.Point.convert(r.offset),x=new t.Point(y.x+(r.padding.left-r.padding.right)/2,y.y+(r.padding.top-r.padding.bottom)/2).mult(s.scale/s.zoomScale(v));return{center:s.unproject(c.add(u).div(2).sub(x)),zoom:v,bearing:o}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},i.prototype.fitBounds=function(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)},i.prototype.fitScreenCoordinates=function(e,i,o,r,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(i)),o,r),r,a)},i.prototype._fitInternal=function(e,i,o){return e?(delete(i=t.extend(e,i)).padding,i.linear?this.easeTo(i,o):this.flyTo(i,o)):this},i.prototype.jumpTo=function(e,i){this.stop();var o=this.transform,r=!1,a=!1,n=!1;return"zoom"in e&&o.zoom!==+e.zoom&&(r=!0,o.zoom=+e.zoom),void 0!==e.center&&(o.center=t.LngLat.convert(e.center)),"bearing"in e&&o.bearing!==+e.bearing&&(a=!0,o.bearing=+e.bearing),"pitch"in e&&o.pitch!==+e.pitch&&(n=!0,o.pitch=+e.pitch),null==e.padding||o.isPaddingEqual(e.padding)||(o.padding=e.padding),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),r&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),a&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),n&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))},i.prototype.easeTo=function(e,i){var o=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var r=this.transform,a=this.getZoom(),n=this.getBearing(),s=this.getPitch(),l=this.getPadding(),c="zoom"in e?+e.zoom:a,u="bearing"in e?this._normalizeBearing(e.bearing,n):n,h="pitch"in e?+e.pitch:s,p="padding"in e?e.padding:r.padding,d=t.Point.convert(e.offset),_=r.centerPoint.add(d),f=r.pointLocation(_),m=t.LngLat.convert(e.center||f);this._normalizeCenter(m);var g,v,y=r.project(f),x=r.project(m).sub(y),b=r.zoomScale(c-a);e.around&&(g=t.LngLat.convert(e.around),v=r.locationPoint(g));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||c!==a,this._rotating=this._rotating||n!==u,this._pitching=this._pitching||h!==s,this._padding=!r.isPaddingEqual(p),this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,w),clearTimeout(this._easeEndTimeoutID),this._ease((function(e){if(o._zooming&&(r.zoom=t.number(a,c,e)),o._rotating&&(r.bearing=t.number(n,u,e)),o._pitching&&(r.pitch=t.number(s,h,e)),o._padding&&(r.interpolatePadding(l,p,e),_=r.centerPoint.add(d)),g)r.setLocationAtPoint(g,v);else{var f=r.zoomScale(r.zoom-a),m=c>a?Math.min(2,b):Math.max(.5,b),w=Math.pow(m,1-e),T=r.unproject(y.add(x.mult(e*w)).mult(f));r.setLocationAtPoint(r.renderWorldCopies?T.wrap():T,_)}o._fireMoveEvents(i)}),(function(t){o._afterEase(i,t)}),e),this},i.prototype._prepareEase=function(e,i,o){void 0===o&&(o={}),this._moving=!0,i||o.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!o.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!o.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!o.pitching&&this.fire(new t.Event("pitchstart",e))},i.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},i.prototype._afterEase=function(e,i){if(!this._easeId||!i||this._easeId!==i){delete this._easeId;var o=this._zooming,r=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,o&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),a&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}},i.prototype.flyTo=function(e,i){var o=this;if(!e.essential&&t.browser.prefersReducedMotion){var r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,i)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var a=this.transform,n=this.getZoom(),s=this.getBearing(),l=this.getPitch(),c=this.getPadding(),u="zoom"in e?t.clamp(+e.zoom,a.minZoom,a.maxZoom):n,h="bearing"in e?this._normalizeBearing(e.bearing,s):s,p="pitch"in e?+e.pitch:l,d="padding"in e?e.padding:a.padding,_=a.zoomScale(u-n),f=t.Point.convert(e.offset),m=a.centerPoint.add(f),g=a.pointLocation(m),v=t.LngLat.convert(e.center||g);this._normalizeCenter(v);var y=a.project(g),x=a.project(v).sub(y),b=e.curve,w=Math.max(a.width,a.height),T=w/_,E=x.mag();if("minZoom"in e){var I=t.clamp(Math.min(e.minZoom,n,u),a.minZoom,a.maxZoom),P=w/a.zoomScale(I-n);b=Math.sqrt(P/E*2)}var S=b*b;function C(t){var e=(T*T-w*w+(t?-1:1)*S*S*E*E)/(2*(t?T:w)*S*E);return Math.log(Math.sqrt(e*e+1)-e)}function z(t){return(Math.exp(t)-Math.exp(-t))/2}function D(t){return(Math.exp(t)+Math.exp(-t))/2}var M=C(0),L=function(t){return D(M)/D(M+b*t)},A=function(t){return w*((D(M)*(z(e=M+b*t)/D(e))-z(M))/S)/E;var e},R=(C(1)-M)/b;if(Math.abs(E)<1e-6||!isFinite(R)){if(Math.abs(w-T)<1e-6)return this.easeTo(e,i);var k=T<w?-1:1;R=Math.abs(Math.log(T/w))/b,A=function(){return 0},L=function(t){return Math.exp(k*b*t)}}return e.duration="duration"in e?+e.duration:1e3*R/("screenSpeed"in e?+e.screenSpeed/b:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==h,this._pitching=p!==l,this._padding=!a.isPaddingEqual(d),this._prepareEase(i,!1),this._ease((function(e){var r=e*R,_=1/L(r);a.zoom=1===e?u:n+a.scaleZoom(_),o._rotating&&(a.bearing=t.number(s,h,e)),o._pitching&&(a.pitch=t.number(l,p,e)),o._padding&&(a.interpolatePadding(c,d,e),m=a.centerPoint.add(f));var g=1===e?v:a.unproject(y.add(x.mult(A(r))).mult(_));a.setLocationAtPoint(a.renderWorldCopies?g.wrap():g,m),o._fireMoveEvents(i)}),(function(){return o._afterEase(i)}),e),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){return this._stop()},i.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,e)}if(!t){var o=this.handlers;o&&o.stop()}return this},i.prototype._ease=function(e,i,o){!1===o.animate||0===o.duration?(e(1),i()):(this._easeStart=t.browser.now(),this._easeOptions=o,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(e,i){e=t.wrap(e,-180,180);var o=Math.abs(e-i);return Math.abs(e-360-i)<o&&(e-=360),Math.abs(e+360-i)<o&&(e+=360),e},i.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}},i}(t.Evented),yr=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};yr.prototype.getDefaultPosition=function(){return"bottom-right"},yr.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},yr.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},yr.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var o=i.reduce((function(t,e,o){return e.value&&(t+=e.key+"="+e.value+(o<i.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},yr.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},yr.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var i=this._map.style.sourceCaches;for(var o in i){var r=i[o];if(r.used){var a=r.getSource();a.attribution&&t.indexOf(a.attribution)<0&&t.push(a.attribution)}}t.sort((function(t,e){return t.length-e.length}));var n=(t=t.filter((function(e,i){for(var o=i+1;o<t.length;o++)if(t[o].indexOf(e)>=0)return!1;return!0}))).join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},yr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var xr=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};xr.prototype.onAdd=function(t){this._map=t,this._container=i.create("div","mapboxgl-ctrl");var e=i.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},xr.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},xr.prototype.getDefaultPosition=function(){return"bottom-left"},xr.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},xr.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},xr.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var br=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};br.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},br.prototype.remove=function(t){for(var e=this._currentlyRunning,i=0,o=e?this._queue.concat(e):this._queue;i<o.length;i+=1){var r=o[i];if(r.id===t)return void(r.cancelled=!0)}},br.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var i=0,o=e;i<o.length;i+=1){var r=o[i];if(!r.cancelled&&(r.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},br.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var wr={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Tr=t.window.HTMLImageElement,Er=t.window.HTMLElement,Ir=t.window.ImageBitmap,Pr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Sr=function(o){function r(e){var i=this;if(null!=(e=t.extend({},Pr,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var r=new To(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(o.call(this,r,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new br,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},wr,e.locale),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Er))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return i._update(!1)})),this.on("moveend",(function(){return i._update(!1)})),this.on("zoom",(function(){return i._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new gr(this,e),this._hash=e.hash&&new Io("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new yr({customAttribution:e.customAttribution})),this.addControl(new xr,e.logoPosition),this.on("style.load",(function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)})),this.on("data",(function(e){i._update("style"===e.dataType),i.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){i.fire(new t.Event(e.dataType+"dataloading",e))}))}o&&(r.__proto__=o),(r.prototype=Object.create(o&&o.prototype)).constructor=r;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return r.prototype._getMapId=function(){return this._mapId},r.prototype.addControl=function(e,i){if(void 0===i&&e.getDefaultPosition&&(i=e.getDefaultPosition()),void 0===i&&(i="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var o=e.onAdd(this);this._controls.push(e);var r=this._controlPositions[i];return-1!==i.indexOf("bottom")?r.insertBefore(o,r.firstChild):r.appendChild(o),this},r.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this},r.prototype.resize=function(e){var i=this._containerDimensions(),o=i[0],r=i[1];this._resizeCanvas(o,r),this.transform.resize(o,r),this.painter.resize(o,r);var a=!this._moving;return a&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),a&&this.fire(new t.Event("moveend",e)),this},r.prototype.getBounds=function(){return this.transform.getBounds()},r.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},r.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},r.prototype.getMinPitch=function(){return this.transform.minPitch},r.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},r.prototype.getMaxPitch=function(){return this.transform.maxPitch},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},r.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},r.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},r.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},r.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},r.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},r.prototype._createDelegatedListener=function(t,e,i){var o,r=this;if("mouseenter"===t||"mouseover"===t){var a=!1;return{layer:e,listener:i,delegates:{mousemove:function(o){var n=r.getLayer(e)?r.queryRenderedFeatures(o.point,{layers:[e]}):[];n.length?a||(a=!0,i.call(r,new Ro(t,r,o.originalEvent,{features:n}))):a=!1},mouseout:function(){a=!1}}}}if("mouseleave"===t||"mouseout"===t){var n=!1;return{layer:e,listener:i,delegates:{mousemove:function(o){(r.getLayer(e)?r.queryRenderedFeatures(o.point,{layers:[e]}):[]).length?n=!0:n&&(n=!1,i.call(r,new Ro(t,r,o.originalEvent)))},mouseout:function(e){n&&(n=!1,i.call(r,new Ro(t,r,e.originalEvent)))}}}}return{layer:e,listener:i,delegates:(o={},o[t]=function(t){var o=r.getLayer(e)?r.queryRenderedFeatures(t.point,{layers:[e]}):[];o.length&&(t.features=o,i.call(r,t),delete t.features)},o)}},r.prototype.on=function(t,e,i){if(void 0===i)return o.prototype.on.call(this,t,e);var r=this._createDelegatedListener(t,e,i);for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r),r.delegates)this.on(a,r.delegates[a]);return this},r.prototype.once=function(t,e,i){if(void 0===i)return o.prototype.once.call(this,t,e);var r=this._createDelegatedListener(t,e,i);for(var a in r.delegates)this.once(a,r.delegates[a]);return this},r.prototype.off=function(t,e,i){var r=this;return void 0===i?o.prototype.off.call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(o){for(var a=o[t],n=0;n<a.length;n++){var s=a[n];if(s.layer===e&&s.listener===i){for(var l in s.delegates)r.off(l,s.delegates[l]);return a.splice(n,1),r}}}(this._delegatedListeners),this)},r.prototype.queryRenderedFeatures=function(e,i){if(!this.style)return[];var o;if(void 0!==i||void 0===e||e instanceof t.Point||Array.isArray(e)||(i=e,e=void 0),i=i||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])o=[t.Point.convert(e)];else{var r=t.Point.convert(e[0]),a=t.Point.convert(e[1]);o=[r,new t.Point(a.x,r.y),a,new t.Point(r.x,a.y),r]}return this.style.queryRenderedFeatures(o,i,this.transform)},r.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},r.prototype.setStyle=function(e,i){return!1!==(i=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(e,i))},r.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},r.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new qe(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},r.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qe(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},r.prototype._diffStyle=function(e,i){var o=this;if("string"==typeof e){var r=this._requestManager.normalizeStyleURL(e),a=this._requestManager.transformRequest(r,t.ResourceType.Style);t.getJSON(a,(function(e,r){e?o.fire(new t.ErrorEvent(e)):r&&o._updateDiff(r,i)}))}else"object"==typeof e&&this._updateDiff(e,i)},r.prototype._updateDiff=function(e,i){try{this.style.setState(e)&&this._update(!0)}catch(o){t.warnOnce("Unable to perform style diff: "+(o.message||o.error||o)+".  Rebuilding the style from scratch."),this._updateStyle(e,i)}},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},r.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},r.prototype.isSourceLoaded=function(e){var i=this.style&&this.style.sourceCaches[e];if(void 0!==i)return i.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},r.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e]._tiles;for(var o in i){var r=i[o];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},r.prototype.addSourceType=function(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)},r.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},r.prototype.getSource=function(t){return this.style.getSource(t)},r.prototype.addImage=function(e,i,o){void 0===o&&(o={});var r=o.pixelRatio;void 0===r&&(r=1);var a=o.sdf;void 0===a&&(a=!1);var n=o.stretchX,s=o.stretchY,l=o.content;if(this._lazyInitEmptyStyle(),i instanceof Tr||Ir&&i instanceof Ir){var c=t.browser.getImageData(i);this.style.addImage(e,{data:new t.RGBAImage({width:c.width,height:c.height},c.data),pixelRatio:r,stretchX:n,stretchY:s,content:l,sdf:a,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var u=i;this.style.addImage(e,{data:new t.RGBAImage({width:i.width,height:i.height},new Uint8Array(i.data)),pixelRatio:r,stretchX:n,stretchY:s,content:l,sdf:a,version:0,userImage:u}),u.onAdd&&u.onAdd(this,e)}},r.prototype.updateImage=function(e,i){var o=this.style.getImage(e);if(!o)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var r=i instanceof Tr||Ir&&i instanceof Ir?t.browser.getImageData(i):i,a=r.width,n=r.height,s=r.data;return void 0===a||void 0===n?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):a!==o.data.width||n!==o.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(o.data.replace(s,!(i instanceof Tr||Ir&&i instanceof Ir)),void this.style.updateImage(e,o))},r.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(t){this.style.removeImage(t)},r.prototype.loadImage=function(e,i){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),i)},r.prototype.listImages=function(){return this.style.listImages()},r.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},r.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},r.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},r.prototype.getLayer=function(t){return this.style.getLayer(t)},r.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)},r.prototype.setFilter=function(t,e,i){return void 0===i&&(i={}),this.style.setFilter(t,e,i),this._update(!0)},r.prototype.getFilter=function(t){return this.style.getFilter(t)},r.prototype.setPaintProperty=function(t,e,i,o){return void 0===o&&(o={}),this.style.setPaintProperty(t,e,i,o),this._update(!0)},r.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},r.prototype.setLayoutProperty=function(t,e,i,o){return void 0===o&&(o={}),this.style.setLayoutProperty(t,e,i,o),this._update(!0)},r.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},r.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},r.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},r.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},r.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=i.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var o=this._containerDimensions();this._resizeCanvas(o[0],o[1]);var r=this._controlContainer=i.create("div","mapboxgl-control-container",t),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){a[t]=i.create("div","mapboxgl-ctrl-"+t,r)}))},r.prototype._resizeCanvas=function(e,i){var o=t.browser.devicePixelRatio||1;this._canvas.width=o*e,this._canvas.height=o*i,this._canvas.style.width=e+"px",this._canvas.style.height=i+"px"},r.prototype._setupPainter=function(){var i=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);o?(this.painter=new yo(o,this.transform),t.webpSupported.testSupport(o)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},r.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},r.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},r.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},r.prototype._render=function(e){var i,o=this,r=0,a=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=a.createQueryEXT(),a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),r=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var n=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,l=t.browser.now();this.style.zoomHistory.update(s,l);var c=new t.EvaluationParameters(s,{now:l,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),u=c.crossFadingFactor();1===u&&u===this._crossFadingFactor||(n=!0,this._crossFadingFactor=u),this.style.update(c)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||n)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var h=t.browser.now()-r;a.endQueryEXT(a.TIME_ELAPSED_EXT,i),setTimeout((function(){var e=a.getQueryObjectEXT(i,a.QUERY_RESULT_EXT)/1e6;a.deleteQueryEXT(i),o.fire(new t.Event("gpu-timing-frame",{cpuTime:h,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout((function(){var e=o.painter.queryGpuTimers(p);o.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}var d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0),this}},r.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,i=this._controls;e<i.length;e+=1)i[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var o=this.painter.context.gl.getExtension("WEBGL_lose_context");o&&o.loseContext(),Cr(this._canvasContainer),Cr(this._controlContainer),Cr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},r.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(t){e._frame=null,e._render(t)})))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(t){this._vertices=t,this._update()},r.prototype._setCacheLimits=function(e,i){t.setCacheLimits(e,i)},a.version.get=function(){return t.version},Object.defineProperties(r.prototype,a),r}(vr);function Cr(t){t.parentNode&&t.parentNode.removeChild(t)}var zr={showCompass:!0,showZoom:!0,visualizePitch:!1},Dr=function(e){var o=this;this.options=t.extend({},zr,e),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return o._map.zoomIn({},{originalEvent:t})})),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return o._map.zoomOut({},{originalEvent:t})})),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){o.options.visualizePitch?o._map.resetNorthPitch({},{originalEvent:t}):o._map.resetNorth({},{originalEvent:t})})),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Dr.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},Dr.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Dr.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Mr(this._map,this._compass,this.options.visualizePitch)),this._container},Dr.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Dr.prototype._createButton=function(t,e){var o=i.create("button",t,this._container);return o.type="button",o.addEventListener("click",e),o},Dr.prototype._setButtonTitle=function(t,e){var i=this._map._getUIString("NavigationControl."+e);t.title=i,t.setAttribute("aria-label",i)};var Mr=function(e,o,r){void 0===r&&(r=!1),this._clickTolerance=10,this.element=o,this.mouseRotate=new Xo({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new Ho({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(o,"mousedown",this.mousedown),i.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(o,"touchmove",this.touchmove),i.addEventListener(o,"touchend",this.touchend),i.addEventListener(o,"touchcancel",this.reset)};function Lr(e,i,o){if(e=new t.LngLat(e.lng,e.lat),i){var r=new t.LngLat(e.lng-360,e.lat),a=new t.LngLat(e.lng+360,e.lat),n=o.locationPoint(e).distSqr(i);o.locationPoint(r).distSqr(i)<n?e=r:o.locationPoint(a).distSqr(i)<n&&(e=a)}for(;Math.abs(e.lng-o.center.lng)>180;){var s=o.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=o.width&&s.y<=o.height)break;e.lng>o.center.lng?e.lng-=360:e.lng+=360}return e}Mr.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),i.disableDrag()},Mr.prototype.move=function(t,e){var i=this.map,o=this.mouseRotate.mousemoveWindow(t,e);if(o&&o.bearingDelta&&i.setBearing(i.getBearing()+o.bearingDelta),this.mousePitch){var r=this.mousePitch.mousemoveWindow(t,e);r&&r.pitchDelta&&i.setPitch(i.getPitch()+r.pitchDelta)}},Mr.prototype.off=function(){var t=this.element;i.removeEventListener(t,"mousedown",this.mousedown),i.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(t,"touchmove",this.touchmove),i.removeEventListener(t,"touchend",this.touchend),i.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},Mr.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(t.window,"mousemove",this.mousemove),i.removeEventListener(t.window,"mouseup",this.mouseup)},Mr.prototype.mousedown=function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),i.mousePos(this.element,e)),i.addEventListener(t.window,"mousemove",this.mousemove),i.addEventListener(t.window,"mouseup",this.mouseup)},Mr.prototype.mousemove=function(t){this.move(t,i.mousePos(this.element,t))},Mr.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},Mr.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},Mr.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},Mr.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Mr.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ar={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Rr(t,e,i){var o=t.classList;for(var r in Ar)o.remove("mapboxgl-"+i+"-anchor-"+r);o.add("mapboxgl-"+i+"-anchor-"+e)}var kr,Br=function(e){function o(o,r){var a=this;if(e.call(this),(o instanceof t.window.HTMLElement||r)&&(o=t.extend({element:o},r)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&"auto"!==o.pitchAlignment?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=t.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var n=i.createNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height","41px"),n.setAttributeNS(null,"width","27px"),n.setAttributeNS(null,"viewBox","0 0 27 41");var s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"fill-rule","nonzero");var c=i.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"transform","translate(3.0, 29.0)"),c.setAttributeNS(null,"fill","#000000");for(var u=0,h=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];u<h.length;u+=1){var p=h[u],d=i.createNS("http://www.w3.org/2000/svg","ellipse");d.setAttributeNS(null,"opacity","0.04"),d.setAttributeNS(null,"cx","10.5"),d.setAttributeNS(null,"cy","5.80029008"),d.setAttributeNS(null,"rx",p.rx),d.setAttributeNS(null,"ry",p.ry),c.appendChild(d)}var _=i.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"fill",this._color);var f=i.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),_.appendChild(f);var m=i.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");var g=i.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(g);var v=i.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(6.0, 7.0)"),v.setAttributeNS(null,"fill","#FFFFFF");var y=i.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(8.0, 8.0)");var x=i.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#000000"),x.setAttributeNS(null,"opacity","0.25"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962");var b=i.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#FFFFFF"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962"),y.appendChild(x),y.appendChild(b),l.appendChild(c),l.appendChild(_),l.appendChild(m),l.appendChild(v),l.appendChild(y),n.appendChild(l),n.setAttributeNS(null,"height",41*this._scale+"px"),n.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(n),this._offset=t.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),this._element.addEventListener("focus",(function(){var t=a._map.getContainer();t.scrollTop=0,t.scrollLeft=0})),Rr(this._element,this._anchor,"marker"),this._popup=null}return e&&(o.__proto__=e),(o.prototype=Object.create(e&&e.prototype)).constructor=o,o.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},o.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},o.prototype.getElement=function(){return this._element},o.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},o.prototype._onKeyPress=function(t){var e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()},o.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},o.prototype.getPopup=function(){return this._popup},o.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},o.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Lr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var o="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?o="rotateX(0deg)":"map"===this._pitchAlignment&&(o="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),i.setTransform(this._element,Ar[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+o+" "+e)}},o.prototype.getOffset=function(){return this._offset},o.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},o.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},o.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},o.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},o.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},o.prototype.isDraggable=function(){return this._draggable},o.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},o.prototype.getRotation=function(){return this._rotation},o.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},o.prototype.getRotationAlignment=function(){return this._rotationAlignment},o.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},o.prototype.getPitchAlignment=function(){return this._pitchAlignment},o}(t.Evented),Or={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Fr=0,Ur=!1,Nr=function(e){function o(i){e.call(this),this.options=t.extend({},Or,i),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(o.__proto__=e),(o.prototype=Object.create(e&&e.prototype)).constructor=o,o.prototype.onAdd=function(e){var o;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),o=this._setupUI,void 0!==kr?o(kr):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){o(kr="denied"!==t.state)})):o(kr=!!t.window.navigator.geolocation),this._container},o.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fr=0,Ur=!1},o.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())},o.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},o.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},o.prototype._updateCamera=function(e){var i=new t.LngLat(e.coords.longitude,e.coords.latitude),o=e.coords.accuracy,r=this._map.getBearing(),a=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(o),a,{geolocateSource:!0})},o.prototype._updateMarker=function(e){if(e){var i=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},o.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),o=e.distanceTo(i),r=Math.ceil(2*this._accuracy/o);this._circleElement.style.width=r+"px",this._circleElement.style.height=r+"px"},o.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},o.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Ur)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},o.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},o.prototype._setupUI=function(e){var o=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{var a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Br(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Br({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==o._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(o._watchState="BACKGROUND",o._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),o._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),o.fire(new t.Event("trackuserlocationend")))}))},o.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fr--,Ur=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Fr>1?(e={maximumAge:6e5,timeout:0},Ur=!0):(e=this.options.positionOptions,Ur=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},o.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},o}(t.Evented),Zr={maxWidth:100,unit:"metric"},jr=function(e){this.options=t.extend({},Zr,e),t.bindAll(["_onMove","setUnit"],this)};function qr(t,e,i){var o=i&&i.maxWidth||100,r=t._container.clientHeight/2,a=t.unproject([0,r]),n=t.unproject([o,r]),s=a.distanceTo(n);if(i&&"imperial"===i.unit){var l=3.2808*s;l>5280?Vr(e,o,l/5280,t._getUIString("ScaleControl.Miles")):Vr(e,o,l,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?Vr(e,o,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Vr(e,o,s/1e3,t._getUIString("ScaleControl.Kilometers")):Vr(e,o,s,t._getUIString("ScaleControl.Meters"))}function Vr(t,e,i,o){var r,a,n,s=(r=i,(a=Math.pow(10,(""+Math.floor(r)).length-1))*(n=(n=r/a)>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n)));t.style.width=e*(s/i)+"px",t.innerHTML=s+"&nbsp;"+o}jr.prototype.getDefaultPosition=function(){return"bottom-left"},jr.prototype._onMove=function(){qr(this._map,this._container,this.options)},jr.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},jr.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},jr.prototype.setUnit=function(t){this.options.unit=t,qr(this._map,this._container,this.options)};var Gr=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Gr.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Gr.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Gr.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Gr.prototype._setupUI=function(){var e=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Gr.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Gr.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Gr.prototype._isFullscreen=function(){return this._fullscreen},Gr.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Gr.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Wr={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Xr=function(e){function o(i){e.call(this),this.options=t.extend(Object.create(Wr),i),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return e&&(o.__proto__=e),(o.prototype=Object.create(e&&e.prototype)).constructor=o,o.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},o.prototype.isOpen=function(){return!!this._map},o.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},o.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},o.prototype.getElement=function(){return this._container},o.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},o.prototype.setHTML=function(e){var i,o=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");for(r.innerHTML=e;i=r.firstChild;)o.appendChild(i);return this.setDOMContent(o)},o.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},o.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},o.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},o.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},o.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},o.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},o.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},o.prototype._onMouseUp=function(t){this._update(t.point)},o.prototype._onMouseMove=function(t){this._update(t.point)},o.prototype._onDrag=function(t){this._update(t.point)},o.prototype._update=function(e){var o=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return o._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Lr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var r=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),a=this.options.anchor,n=function e(i){if(i){if("number"==typeof i){var o=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new t.Point(0,0),top:new t.Point(0,i),"top-left":new t.Point(o,o),"top-right":new t.Point(-o,o),bottom:new t.Point(0,-i),"bottom-left":new t.Point(o,-o),"bottom-right":new t.Point(-o,-o),left:new t.Point(i,0),right:new t.Point(-i,0)}}if(i instanceof t.Point||Array.isArray(i)){var r=t.Point.convert(i);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.Point.convert(i.center||[0,0]),top:t.Point.convert(i.top||[0,0]),"top-left":t.Point.convert(i["top-left"]||[0,0]),"top-right":t.Point.convert(i["top-right"]||[0,0]),bottom:t.Point.convert(i.bottom||[0,0]),"bottom-left":t.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(i["bottom-right"]||[0,0]),left:t.Point.convert(i.left||[0,0]),right:t.Point.convert(i.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!a){var s,l=this._container.offsetWidth,c=this._container.offsetHeight;s=r.y+n.bottom.y<c?["top"]:r.y>this._map.transform.height-c?["bottom"]:[],r.x<l/2?s.push("left"):r.x>this._map.transform.width-l/2&&s.push("right"),a=0===s.length?"bottom":s.join("-")}var u=r.add(n[a]).round();i.setTransform(this._container,Ar[a]+" translate("+u.x+"px,"+u.y+"px)"),Rr(this._container,a,"popup")}},o.prototype._onClose=function(){this.remove()},o}(t.Evented),Hr={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Sr,NavigationControl:Dr,GeolocateControl:Nr,AttributionControl:yr,ScaleControl:jr,FullscreenControl:Gr,Popup:Xr,Marker:Br,Style:qe,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){Ft().acquire(Rt)},clearPrewarmedResources:function(){var t=Bt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Rt),Bt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return kt.workerCount},set workerCount(t){kt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Hr})),mapboxgl}()},,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _deckgl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(211);__webpack_require__.d(__webpack_exports__,"DeckGL",(function(){return _deckgl__WEBPACK_IMPORTED_MODULE_0__.a})),__webpack_require__.d(__webpack_exports__,"default",(function(){return _deckgl__WEBPACK_IMPORTED_MODULE_0__.a}))},,function(module,__webpack_exports__,__webpack_require__){"use strict";var DEFAULT_MODULE_OPTIONS={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};var picking={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DEFAULT_MODULE_OPTIONS,uniforms={};if(void 0!==opts.pickingSelectedColor)if(opts.pickingSelectedColor){var selectedColor=opts.pickingSelectedColor.slice(0,3);uniforms.picking_uSelectedColorValid=1,uniforms.picking_uSelectedColor=selectedColor}else uniforms.picking_uSelectedColorValid=0;if(opts.pickingHighlightColor){var color=Array.from(opts.pickingHighlightColor,(function(x){return x/255}));Number.isFinite(color[3])||(color[3]=1),uniforms.picking_uHighlightColor=color}return void 0!==opts.pickingActive&&(uniforms.picking_uActive=Boolean(opts.pickingActive),uniforms.picking_uAttribute=Boolean(opts.pickingAttribute)),uniforms}};__webpack_exports__.a=Object.assign({inject:{"vs:DECKGL_FILTER_COLOR":"\n    picking_setPickingColor(geometry.pickingColor);\n    // for picking depth values\n    picking_setPickingAttribute(geometry.position.z);\n    ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n    // use highlight color if this fragment belongs to the selected object.\n    color = picking_filterHighlightColor(color);\n\n    // use picking color if rendering to picking FBO.\n    color = picking_filterPickingColor(color);\n      "}}},picking)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return vector3_Vector3}));var classCallCheck=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(7),getPrototypeOf=__webpack_require__(3),createClass=__webpack_require__(1),inherits=__webpack_require__(8),math_array=__webpack_require__(222),validators=__webpack_require__(31),assert=__webpack_require__(72),vector_Vector=function(_MathArray){function Vector(){return Object(classCallCheck.a)(this,Vector),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Vector).apply(this,arguments))}return Object(inherits.a)(Vector,_MathArray),Object(createClass.a)(Vector,[{key:"copy",value:function copy(vector){return Object(assert.a)(!1),this}},{key:"len",value:function len(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function magnitude(){return this.len()}},{key:"lengthSquared",value:function lengthSquared(){for(var length=0,i=0;i<this.ELEMENTS;++i)length+=this[i]*this[i];return length}},{key:"magnitudeSquared",value:function magnitudeSquared(){return this.lengthSquared()}},{key:"distance",value:function distance(mathArray){return Math.sqrt(this.distanceSquared(mathArray))}},{key:"distanceSquared",value:function distanceSquared(mathArray){for(var length=0,i=0;i<this.ELEMENTS;++i){var dist=this[i]-mathArray[i];length+=dist*dist}return Object(validators.a)(length)}},{key:"dot",value:function dot(mathArray){for(var product=0,i=0;i<this.ELEMENTS;++i)product+=this[i]*mathArray[i];return Object(validators.a)(product)}},{key:"normalize",value:function normalize(){var length=this.magnitude();if(0!==length)for(var i=0;i<this.ELEMENTS;++i)this[i]/=length;return this.check()}},{key:"multiply",value:function multiply(){for(var _len=arguments.length,vectors=new Array(_len),_key=0;_key<_len;_key++)vectors[_key]=arguments[_key];for(var _i=0,_vectors=vectors;_i<_vectors.length;_i++)for(var vector=_vectors[_i],i=0;i<this.ELEMENTS;++i)this[i]*=vector[i];return this.check()}},{key:"divide",value:function divide(){for(var _len2=arguments.length,vectors=new Array(_len2),_key2=0;_key2<_len2;_key2++)vectors[_key2]=arguments[_key2];for(var _i2=0,_vectors2=vectors;_i2<_vectors2.length;_i2++)for(var vector=_vectors2[_i2],i=0;i<this.ELEMENTS;++i)this[i]/=vector[i];return this.check()}},{key:"lengthSq",value:function lengthSq(){return this.lengthSquared()}},{key:"distanceTo",value:function distanceTo(vector){return this.distance(vector)}},{key:"distanceToSquared",value:function distanceToSquared(vector){return this.distanceSquared(vector)}},{key:"getComponent",value:function getComponent(i){return Object(assert.a)(i>=0&&i<this.ELEMENTS,"index is out of range"),Object(validators.a)(this[i])}},{key:"setComponent",value:function setComponent(i,value){return Object(assert.a)(i>=0&&i<this.ELEMENTS,"index is out of range"),this[i]=value,this.check()}},{key:"addVectors",value:function addVectors(a,b){return this.copy(a).add(b)}},{key:"subVectors",value:function subVectors(a,b){return this.copy(a).subtract(b)}},{key:"multiplyVectors",value:function multiplyVectors(a,b){return this.copy(a).multiply(b)}},{key:"addScaledVector",value:function addScaledVector(a,b){return this.add(new this.constructor(a).multiplyScalar(b))}},{key:"x",get:function get(){return this[0]},set:function set(value){this[0]=Object(validators.a)(value)}},{key:"y",get:function get(){return this[1]},set:function set(value){this[1]=Object(validators.a)(value)}}]),Vector}(math_array.a),common=__webpack_require__(24),vec3=__webpack_require__(53),gl_matrix_extras=__webpack_require__(150),ORIGIN=[0,0,0],constants={},vector3_Vector3=function(_Vector){function Vector3(){var _this,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(classCallCheck.a)(this,Vector3),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Vector3).call(this,-0,-0,-0)),1===arguments.length&&Object(common.e)(x)?_this.copy(x):(common.b.debug&&(Object(validators.a)(x),Object(validators.a)(y),Object(validators.a)(z)),_this[0]=x,_this[1]=y,_this[2]=z),_this}return Object(inherits.a)(Vector3,_Vector),Object(createClass.a)(Vector3,null,[{key:"ZERO",get:function get(){return constants.ZERO=constants.ZERO||Object.freeze(new Vector3(0,0,0,0))}}]),Object(createClass.a)(Vector3,[{key:"set",value:function set(x,y,z){return this[0]=x,this[1]=y,this[2]=z,this.check()}},{key:"copy",value:function copy(array){return this[0]=array[0],this[1]=array[1],this[2]=array[2],this.check()}},{key:"fromObject",value:function fromObject(object){return common.b.debug&&(Object(validators.a)(object.x),Object(validators.a)(object.y),Object(validators.a)(object.z)),this[0]=object.x,this[1]=object.y,this[2]=object.z,this.check()}},{key:"toObject",value:function toObject(object){return object.x=this[0],object.y=this[1],object.z=this[2],object}},{key:"angle",value:function angle(vector){return vec3.a(this,vector)}},{key:"cross",value:function cross(vector){return vec3.b(this,this,vector),this.check()}},{key:"rotateX",value:function rotateX(_ref){var radians=_ref.radians,_ref$origin=_ref.origin,origin=void 0===_ref$origin?ORIGIN:_ref$origin;return vec3.d(this,this,origin,radians),this.check()}},{key:"rotateY",value:function rotateY(_ref2){var radians=_ref2.radians,_ref2$origin=_ref2.origin,origin=void 0===_ref2$origin?ORIGIN:_ref2$origin;return vec3.e(this,this,origin,radians),this.check()}},{key:"rotateZ",value:function rotateZ(_ref3){var radians=_ref3.radians,_ref3$origin=_ref3.origin,origin=void 0===_ref3$origin?ORIGIN:_ref3$origin;return vec3.f(this,this,origin,radians),this.check()}},{key:"transform",value:function transform(matrix4){return this.transformAsPoint(matrix4)}},{key:"transformAsPoint",value:function transformAsPoint(matrix4){return vec3.i(this,this,matrix4),this.check()}},{key:"transformAsVector",value:function transformAsVector(matrix4){return Object(gl_matrix_extras.c)(this,this,matrix4),this.check()}},{key:"transformByMatrix3",value:function transformByMatrix3(matrix3){return vec3.h(this,this,matrix3),this.check()}},{key:"transformByMatrix2",value:function transformByMatrix2(matrix2){return Object(gl_matrix_extras.b)(this,this,matrix2),this.check()}},{key:"transformByQuaternion",value:function transformByQuaternion(quaternion){return vec3.j(this,this,quaternion),this.check()}},{key:"ELEMENTS",get:function get(){return 3}},{key:"z",get:function get(){return this[2]},set:function set(value){this[2]=Object(validators.a)(value)}}]),Vector3}(vector_Vector)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return matrix4_Matrix4}));var slicedToArray=__webpack_require__(11),classCallCheck=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(7),getPrototypeOf=__webpack_require__(3),createClass=__webpack_require__(1),inherits=__webpack_require__(8),validators=__webpack_require__(31),math_array=__webpack_require__(222),common=__webpack_require__(24),matrix_Matrix=function(_MathArray){function Matrix(){return Object(classCallCheck.a)(this,Matrix),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Matrix).apply(this,arguments))}return Object(inherits.a)(Matrix,_MathArray),Object(createClass.a)(Matrix,[{key:"toString",value:function toString(){var string="[";if(common.b.printRowMajor){string+="row-major:";for(var row=0;row<this.RANK;++row)for(var col=0;col<this.RANK;++col)string+=" ".concat(this[col*this.RANK+row])}else{string+="column-major:";for(var i=0;i<this.ELEMENTS;++i)string+=" ".concat(this[i])}return string+="]"}},{key:"getElementIndex",value:function getElementIndex(row,col){return col*this.RANK+row}},{key:"getElement",value:function getElement(row,col){return this[col*this.RANK+row]}},{key:"setElement",value:function setElement(row,col,value){return this[col*this.RANK+row]=Object(validators.a)(value),this}},{key:"getColumn",value:function getColumn(columnIndex){for(var result=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),firstIndex=columnIndex*this.RANK,i=0;i<this.RANK;++i)result[i]=this[firstIndex+i];return result}},{key:"setColumn",value:function setColumn(columnIndex,columnVector){for(var firstIndex=columnIndex*this.RANK,i=0;i<this.RANK;++i)this[firstIndex+i]=columnVector[i];return this}}]),Matrix}(math_array.a),gl_matrix_extras=__webpack_require__(150),mat4=__webpack_require__(21),vec2=__webpack_require__(46),vec3=__webpack_require__(53),vec4=__webpack_require__(95),IDENTITY=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),ZERO=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),INDICES=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),constants={},matrix4_Matrix4=function(_Matrix){function Matrix4(array){var _this;return Object(classCallCheck.a)(this,Matrix4),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Matrix4).call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0)),1===arguments.length&&Array.isArray(array)?_this.copy(array):_this.identity(),_this}return Object(inherits.a)(Matrix4,_Matrix),Object(createClass.a)(Matrix4,[{key:"INDICES",get:function get(){return INDICES}},{key:"ELEMENTS",get:function get(){return 16}},{key:"RANK",get:function get(){return 4}}],[{key:"IDENTITY",get:function get(){return constants.IDENTITY=constants.IDENTITY||Object.freeze(new Matrix4(IDENTITY)),constants.IDENTITY}},{key:"ZERO",get:function get(){return constants.ZERO=constants.ZERO||Object.freeze(new Matrix4(ZERO)),constants.ZERO}}]),Object(createClass.a)(Matrix4,[{key:"copy",value:function copy(array){return this[0]=array[0],this[1]=array[1],this[2]=array[2],this[3]=array[3],this[4]=array[4],this[5]=array[5],this[6]=array[6],this[7]=array[7],this[8]=array[8],this[9]=array[9],this[10]=array[10],this[11]=array[11],this[12]=array[12],this[13]=array[13],this[14]=array[14],this[15]=array[15],this.check()}},{key:"set",value:function set(m00,m10,m20,m30,m01,m11,m21,m31,m02,m12,m22,m32,m03,m13,m23,m33){return this[0]=m00,this[1]=m10,this[2]=m20,this[3]=m30,this[4]=m01,this[5]=m11,this[6]=m21,this[7]=m31,this[8]=m02,this[9]=m12,this[10]=m22,this[11]=m32,this[12]=m03,this[13]=m13,this[14]=m23,this[15]=m33,this.check()}},{key:"setRowMajor",value:function setRowMajor(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){return this[0]=m00,this[1]=m10,this[2]=m20,this[3]=m30,this[4]=m01,this[5]=m11,this[6]=m21,this[7]=m31,this[8]=m02,this[9]=m12,this[10]=m22,this[11]=m32,this[12]=m03,this[13]=m13,this[14]=m23,this[15]=m33,this.check()}},{key:"toRowMajor",value:function toRowMajor(result){return result[0]=this[0],result[1]=this[4],result[2]=this[8],result[3]=this[12],result[4]=this[1],result[5]=this[5],result[6]=this[9],result[7]=this[13],result[8]=this[2],result[9]=this[6],result[10]=this[10],result[11]=this[14],result[12]=this[3],result[13]=this[7],result[14]=this[11],result[15]=this[15],result}},{key:"identity",value:function identity(){return this.copy(IDENTITY)}},{key:"fromQuaternion",value:function fromQuaternion(q){return mat4.c(this,q),this.check()}},{key:"frustum",value:function frustum(_ref){var left=_ref.left,right=_ref.right,bottom=_ref.bottom,top=_ref.top,near=_ref.near,far=_ref.far;return far===1/0?Matrix4._computeInfinitePerspectiveOffCenter(this,left,right,bottom,top,near):mat4.d(this,left,right,bottom,top,near,far),this.check()}},{key:"lookAt",value:function lookAt(eye,center,up){if(1===arguments.length){var _eye=eye;eye=_eye.eye,center=_eye.center,up=_eye.up}return center=center||[0,0,0],up=up||[0,1,0],mat4.f(this,eye,center,up),this.check()}},{key:"ortho",value:function ortho(_ref2){var left=_ref2.left,right=_ref2.right,bottom=_ref2.bottom,top=_ref2.top,_ref2$near=_ref2.near,near=void 0===_ref2$near?.1:_ref2$near,_ref2$far=_ref2.far,far=void 0===_ref2$far?500:_ref2$far;return mat4.h(this,left,right,bottom,top,near,far),this.check()}},{key:"orthographic",value:function orthographic(_ref3){var _ref3$fovy=_ref3.fovy,fovy=void 0===_ref3$fovy?45*Math.PI/180:_ref3$fovy,_ref3$aspect=_ref3.aspect,aspect=void 0===_ref3$aspect?1:_ref3$aspect,_ref3$focalDistance=_ref3.focalDistance,focalDistance=void 0===_ref3$focalDistance?1:_ref3$focalDistance,_ref3$near=_ref3.near,near=void 0===_ref3$near?.1:_ref3$near,_ref3$far=_ref3.far,far=void 0===_ref3$far?500:_ref3$far;if(fovy>2*Math.PI)throw Error("radians");var halfY=fovy/2,top=focalDistance*Math.tan(halfY),right=top*aspect;return(new Matrix4).ortho({left:-right,right:right,bottom:-top,top:top,near:near,far:far})}},{key:"perspective",value:function perspective(){var _ref4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref4$fovy=_ref4.fovy,fovy=void 0===_ref4$fovy?void 0:_ref4$fovy,_ref4$fov=_ref4.fov,fov=void 0===_ref4$fov?45*Math.PI/180:_ref4$fov,_ref4$aspect=_ref4.aspect,aspect=void 0===_ref4$aspect?1:_ref4$aspect,_ref4$near=_ref4.near,near=void 0===_ref4$near?.1:_ref4$near,_ref4$far=_ref4.far,far=void 0===_ref4$far?500:_ref4$far;if((fovy=fovy||fov)>2*Math.PI)throw Error("radians");return mat4.i(this,fovy,aspect,near,far),this.check()}},{key:"determinant",value:function determinant(){return mat4.a(this)}},{key:"getScale",value:function getScale(){var result=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return result[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),result[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),result[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),result}},{key:"getTranslation",value:function getTranslation(){var result=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return result[0]=this[12],result[1]=this[13],result[2]=this[14],result}},{key:"getRotation",value:function getRotation(){var result=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],scaleResult=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,scale=this.getScale(scaleResult||[-0,-0,-0]),inverseScale0=1/scale[0],inverseScale1=1/scale[1],inverseScale2=1/scale[2];return result[0]=this[0]*inverseScale0,result[1]=this[1]*inverseScale1,result[2]=this[2]*inverseScale2,result[3]=0,result[4]=this[4]*inverseScale0,result[5]=this[5]*inverseScale1,result[6]=this[6]*inverseScale2,result[7]=0,result[8]=this[8]*inverseScale0,result[9]=this[9]*inverseScale1,result[10]=this[10]*inverseScale2,result[11]=0,result[12]=0,result[13]=0,result[14]=0,result[15]=1,result}},{key:"getRotationMatrix3",value:function getRotationMatrix3(){var result=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],scaleResult=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,scale=this.getScale(scaleResult||[-0,-0,-0]),inverseScale0=1/scale[0],inverseScale1=1/scale[1],inverseScale2=1/scale[2];return result[0]=this[0]*inverseScale0,result[1]=this[1]*inverseScale1,result[2]=this[2]*inverseScale2,result[3]=this[4]*inverseScale0,result[4]=this[5]*inverseScale1,result[5]=this[6]*inverseScale2,result[6]=this[8]*inverseScale0,result[7]=this[9]*inverseScale1,result[8]=this[10]*inverseScale2,result}},{key:"transpose",value:function transpose(){return mat4.p(this,this),this.check()}},{key:"invert",value:function invert(){return mat4.e(this,this),this.check()}},{key:"multiplyLeft",value:function multiplyLeft(a){return mat4.g(this,a,this),this.check()}},{key:"multiplyRight",value:function multiplyRight(a){return mat4.g(this,this,a),this.check()}},{key:"rotateX",value:function rotateX(radians){return mat4.k(this,this,radians),this.check()}},{key:"rotateY",value:function rotateY(radians){return mat4.l(this,this,radians),this.check()}},{key:"rotateZ",value:function rotateZ(radians){return mat4.m(this,this,radians),this.check()}},{key:"rotateXYZ",value:function rotateXYZ(_ref5){var _ref6=Object(slicedToArray.a)(_ref5,3),rx=_ref6[0],ry=_ref6[1],rz=_ref6[2];return this.rotateX(rx).rotateY(ry).rotateZ(rz)}},{key:"rotateAxis",value:function rotateAxis(radians,axis){return mat4.j(this,this,radians,axis),this.check()}},{key:"scale",value:function scale(factor){return Array.isArray(factor)?mat4.n(this,this,factor):mat4.n(this,this,[factor,factor,factor]),this.check()}},{key:"translate",value:function translate(vec){return mat4.o(this,this,vec),this.check()}},{key:"transform",value:function transform(vector,result){return 4===vector.length?(result=vec4.b(result||[-0,-0,-0,-0],vector,this),Object(validators.b)(result,4),result):this.transformAsPoint(vector,result)}},{key:"transformAsPoint",value:function transformAsPoint(vector,result){switch(vector.length){case 2:result=vec2.g(result||[-0,-0],vector,this);break;case 3:result=vec3.i(result||[-0,-0,-0],vector,this);break;default:throw new Error("Illegal vector")}return Object(validators.b)(result,vector.length),result}},{key:"transformAsVector",value:function transformAsVector(vector,result){switch(vector.length){case 2:result=Object(gl_matrix_extras.a)(result||[-0,-0],vector,this);break;case 3:result=Object(gl_matrix_extras.c)(result||[-0,-0,-0],vector,this);break;default:throw new Error("Illegal vector")}return Object(validators.b)(result,vector.length),result}},{key:"makeRotationX",value:function makeRotationX(radians){return this.identity().rotateX(radians)}},{key:"makeTranslation",value:function makeTranslation(x,y,z){return this.identity().translate([x,y,z])}},{key:"transformPoint",value:function transformPoint(vector,result){return Object(validators.c)("Matrix4.transformPoint","3.0"),this.transformAsPoint(vector,result)}},{key:"transformVector",value:function transformVector(vector,result){return Object(validators.c)("Matrix4.transformVector","3.0"),this.transformAsPoint(vector,result)}},{key:"transformDirection",value:function transformDirection(vector,result){return Object(validators.c)("Matrix4.transformDirection","3.0"),this.transformAsVector(vector,result)}}],[{key:"_computeInfinitePerspectiveOffCenter",value:function _computeInfinitePerspectiveOffCenter(result,left,right,bottom,top,near){var column0Row0=2*near/(right-left),column1Row1=2*near/(top-bottom),column2Row0=(right+left)/(right-left),column2Row1=(top+bottom)/(top-bottom),column3Row2=-2*near;return result[0]=column0Row0,result[1]=0,result[2]=0,result[3]=0,result[4]=0,result[5]=column1Row1,result[6]=0,result[7]=0,result[8]=column2Row0,result[9]=column2Row1,result[10]=-1,result[11]=-1,result[12]=0,result[13]=0,result[14]=column3Row2,result[15]=0,result}}]),Matrix4}(matrix_Matrix)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return polyfillVertexArrayObject}));var probe_gl_env__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(27),glErrorShadow={};function synthesizeGLError(err,opt_msg){glErrorShadow[err]=!0,void 0!==opt_msg&&function error(msg){probe_gl_env__WEBPACK_IMPORTED_MODULE_0__.global.console&&probe_gl_env__WEBPACK_IMPORTED_MODULE_0__.global.console.error&&probe_gl_env__WEBPACK_IMPORTED_MODULE_0__.global.console.error(msg)}(opt_msg)}var WebGLVertexArrayObjectOES=function WebGLVertexArrayObjectOES(ext){var gl=ext.gl;this.ext=ext,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(ext.maxVertexAttribs);for(var n=0;n<this.attribs.length;n++){var attrib=new WebGLVertexArrayObjectOES.VertexAttrib(gl);this.attribs[n]=attrib}this.maxAttrib=0};(WebGLVertexArrayObjectOES.VertexAttrib=function VertexAttrib(gl){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function recache(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var OESVertexArrayObject=function OESVertexArrayObject(gl){var self=this;this.gl=gl,function wrapGLError(gl){var f=gl.getError;gl.getError=function getError(){var err;do{0!==(err=f.apply(gl))&&(glErrorShadow[err]=!0)}while(0!==err);for(err in glErrorShadow)if(glErrorShadow[err])return delete glErrorShadow[err],parseInt(err,10);return 0}}(gl);var original=this.original={getParameter:gl.getParameter,enableVertexAttribArray:gl.enableVertexAttribArray,disableVertexAttribArray:gl.disableVertexAttribArray,bindBuffer:gl.bindBuffer,getVertexAttrib:gl.getVertexAttrib,vertexAttribPointer:gl.vertexAttribPointer};gl.getParameter=function getParameter(pname){return pname===self.VERTEX_ARRAY_BINDING_OES?self.currentVertexArrayObject===self.defaultVertexArrayObject?null:self.currentVertexArrayObject:original.getParameter.apply(this,arguments)},gl.enableVertexAttribArray=function enableVertexAttribArray(index){var vao=self.currentVertexArrayObject;vao.maxAttrib=Math.max(vao.maxAttrib,index);var attrib=vao.attribs[index];return attrib.enabled=!0,original.enableVertexAttribArray.apply(this,arguments)},gl.disableVertexAttribArray=function disableVertexAttribArray(index){var vao=self.currentVertexArrayObject;vao.maxAttrib=Math.max(vao.maxAttrib,index);var attrib=vao.attribs[index];return attrib.enabled=!1,original.disableVertexAttribArray.apply(this,arguments)},gl.bindBuffer=function bindBuffer(target,buffer){switch(target){case 34962:self.currentArrayBuffer=buffer;break;case 34963:self.currentVertexArrayObject.elementArrayBuffer=buffer}return original.bindBuffer.apply(this,arguments)},gl.getVertexAttrib=function getVertexAttrib(index,pname){var vao=self.currentVertexArrayObject,attrib=vao.attribs[index];switch(pname){case 34975:return attrib.buffer;case 34338:return attrib.enabled;case 34339:return attrib.size;case 34340:return attrib.stride;case 34341:return attrib.type;case 34922:return attrib.normalized;default:return original.getVertexAttrib.apply(this,arguments)}},gl.vertexAttribPointer=function vertexAttribPointer(indx,size,type,normalized,stride,offset){var vao=self.currentVertexArrayObject;vao.maxAttrib=Math.max(vao.maxAttrib,indx);var attrib=vao.attribs[indx];return attrib.buffer=self.currentArrayBuffer,attrib.size=size,attrib.type=type,attrib.normalized=normalized,attrib.stride=stride,attrib.offset=offset,attrib.recache(),original.vertexAttribPointer.apply(this,arguments)},gl.instrumentExtension&&gl.instrumentExtension(this,"OES_vertex_array_object"),gl.canvas&&gl.canvas.addEventListener("webglcontextrestored",(function(){!function log(msg){probe_gl_env__WEBPACK_IMPORTED_MODULE_0__.global.console&&probe_gl_env__WEBPACK_IMPORTED_MODULE_0__.global.console.log&&probe_gl_env__WEBPACK_IMPORTED_MODULE_0__.global.console.log(msg)}("OESVertexArrayObject emulation library context restored"),self.reset_()}),!0),this.reset_()};function polyfillVertexArrayObject(gl){if("function"!=typeof gl.createVertexArray){var original_getSupportedExtensions=gl.getSupportedExtensions;gl.getSupportedExtensions=function getSupportedExtensions(){var list=original_getSupportedExtensions.call(this)||[];return list.indexOf("OES_vertex_array_object")<0&&list.push("OES_vertex_array_object"),list};var original_getExtension=gl.getExtension;gl.getExtension=function getExtension(name){var ext=original_getExtension.call(this,name);return ext||("OES_vertex_array_object"!==name?null:(gl.__OESVertexArrayObject||(this.__OESVertexArrayObject=new OESVertexArrayObject(this)),this.__OESVertexArrayObject))}}}OESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES=34229,OESVertexArrayObject.prototype.reset_=function reset_(){if(void 0!==this.vertexArrayObjects)for(var ii=0;ii<this.vertexArrayObjects.length;++ii)this.vertexArrayObjects.isAlive=!1;var gl=this.gl;this.maxVertexAttribs=gl.getParameter(34921),this.defaultVertexArrayObject=new WebGLVertexArrayObjectOES(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},OESVertexArrayObject.prototype.createVertexArrayOES=function createVertexArrayOES(){var arrayObject=new WebGLVertexArrayObjectOES(this);return this.vertexArrayObjects.push(arrayObject),arrayObject},OESVertexArrayObject.prototype.deleteVertexArrayOES=function deleteVertexArrayOES(arrayObject){arrayObject.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject),1),this.currentVertexArrayObject===arrayObject&&this.bindVertexArrayOES(null)},OESVertexArrayObject.prototype.isVertexArrayOES=function isVertexArrayOES(arrayObject){return!!(arrayObject&&arrayObject instanceof WebGLVertexArrayObjectOES&&arrayObject.hasBeenBound&&arrayObject.ext===this)},OESVertexArrayObject.prototype.bindVertexArrayOES=function bindVertexArrayOES(arrayObject){var gl=this.gl;if(!arrayObject||arrayObject.isAlive){var original=this.original,oldVAO=this.currentVertexArrayObject;this.currentVertexArrayObject=arrayObject||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var newVAO=this.currentVertexArrayObject;if(oldVAO!==newVAO){oldVAO&&newVAO.elementArrayBuffer===oldVAO.elementArrayBuffer||original.bindBuffer.call(gl,34963,newVAO.elementArrayBuffer);for(var currentBinding=this.currentArrayBuffer,maxAttrib=Math.max(oldVAO?oldVAO.maxAttrib:0,newVAO.maxAttrib),n=0;n<=maxAttrib;n++){var attrib=newVAO.attribs[n],oldAttrib=oldVAO?oldVAO.attribs[n]:null;if(oldVAO&&attrib.enabled===oldAttrib.enabled||(attrib.enabled?original.enableVertexAttribArray.call(gl,n):original.disableVertexAttribArray.call(gl,n)),attrib.enabled){var bufferChanged=!1;oldVAO&&attrib.buffer===oldAttrib.buffer||(currentBinding!==attrib.buffer&&(original.bindBuffer.call(gl,34962,attrib.buffer),currentBinding=attrib.buffer),bufferChanged=!0),(bufferChanged||attrib.cached!==oldAttrib.cached)&&original.vertexAttribPointer.call(gl,n,attrib.size,attrib.type,attrib.normalized,attrib.stride,attrib.offset)}}this.currentArrayBuffer!==currentBinding&&original.bindBuffer.call(gl,34962,this.currentArrayBuffer)}}else synthesizeGLError(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return registerLoaders})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getRegisteredLoaders}));var _loader_utils_normalize_loader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(97),_loader_utils_merge_options__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(179);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var getGlobalLoaderRegistry=function getGlobalLoaderRegistry(){var state=Object(_loader_utils_merge_options__WEBPACK_IMPORTED_MODULE_1__.a)();return state.loaderRegistry=state.loaderRegistry||[],state.loaderRegistry};function registerLoaders(loaders){var _step,loaderRegistry=getGlobalLoaderRegistry(),_iterator=_createForOfIteratorHelper(loaders=Array.isArray(loaders)?loaders:[loaders]);try{var _loop=function _loop(){var loader=_step.value,normalizedLoader=Object(_loader_utils_normalize_loader__WEBPACK_IMPORTED_MODULE_0__.b)(loader);loaderRegistry.find((function(registeredLoader){return normalizedLoader===registeredLoader}))||loaderRegistry.unshift(normalizedLoader)};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}function getRegisteredLoaders(){return getGlobalLoaderRegistry()}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return powish})),__webpack_require__.d(__webpack_exports__,"a",(function(){return pow}));var _linear_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(147),_continuous_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(47),_init_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(61);function transformPow(exponent){return function(x){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent)}}function transformSqrt(x){return x<0?-Math.sqrt(-x):Math.sqrt(x)}function transformSquare(x){return x<0?-x*x:x*x}function powish(transform){var scale=transform(_continuous_js__WEBPACK_IMPORTED_MODULE_1__.c,_continuous_js__WEBPACK_IMPORTED_MODULE_1__.c),exponent=1;function rescale(){return 1===exponent?transform(_continuous_js__WEBPACK_IMPORTED_MODULE_1__.c,_continuous_js__WEBPACK_IMPORTED_MODULE_1__.c):.5===exponent?transform(transformSqrt,transformSquare):transform(transformPow(exponent),transformPow(1/exponent))}return scale.exponent=function(_){return arguments.length?(exponent=+_,rescale()):exponent},Object(_linear_js__WEBPACK_IMPORTED_MODULE_0__.b)(scale)}function pow(){var scale=powish(Object(_continuous_js__WEBPACK_IMPORTED_MODULE_1__.d)());return scale.copy=function(){return Object(_continuous_js__WEBPACK_IMPORTED_MODULE_1__.a)(scale,pow()).exponent(scale.exponent())},_init_js__WEBPACK_IMPORTED_MODULE_2__.b.apply(scale,arguments),scale}},function(module,exports,__webpack_require__){"use strict";function earcut(data,holeIndices,dim){dim=dim||2;var minX,minY,maxX,maxY,x,y,invSize,hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,outerNode=linkedList(data,0,outerLen,dim,!0),triangles=[];if(!outerNode||outerNode.next===outerNode.prev)return triangles;if(hasHoles&&(outerNode=function eliminateHoles(data,holeIndices,outerNode,dim){var i,len,start,end,list,queue=[];for(i=0,len=holeIndices.length;i<len;i++)start=holeIndices[i]*dim,end=i<len-1?holeIndices[i+1]*dim:data.length,(list=linkedList(data,start,end,dim,!1))===list.next&&(list.steiner=!0),queue.push(getLeftmost(list));for(queue.sort(compareX),i=0;i<queue.length;i++)eliminateHole(queue[i],outerNode),outerNode=filterPoints(outerNode,outerNode.next);return outerNode}(data,holeIndices,outerNode,dim)),data.length>80*dim){minX=maxX=data[0],minY=maxY=data[1];for(var i=dim;i<outerLen;i+=dim)(x=data[i])<minX&&(minX=x),(y=data[i+1])<minY&&(minY=y),x>maxX&&(maxX=x),y>maxY&&(maxY=y);invSize=0!==(invSize=Math.max(maxX-minX,maxY-minY))?1/invSize:0}return earcutLinked(outerNode,triangles,dim,minX,minY,invSize),triangles}function linkedList(data,start,end,dim,clockwise){var i,last;if(clockwise===signedArea(data,start,end,dim)>0)for(i=start;i<end;i+=dim)last=insertNode(i,data[i],data[i+1],last);else for(i=end-dim;i>=start;i-=dim)last=insertNode(i,data[i],data[i+1],last);return last&&equals(last,last.next)&&(removeNode(last),last=last.next),last}function filterPoints(start,end){if(!start)return start;end||(end=start);var again,p=start;do{if(again=!1,p.steiner||!equals(p,p.next)&&0!==area(p.prev,p,p.next))p=p.next;else{if(removeNode(p),(p=end=p.prev)===p.next)break;again=!0}}while(again||p!==end);return end}function earcutLinked(ear,triangles,dim,minX,minY,invSize,pass){if(ear){!pass&&invSize&&function indexCurve(start,minX,minY,invSize){var p=start;do{null===p.z&&(p.z=zOrder(p.x,p.y,minX,minY,invSize)),p.prevZ=p.prev,p.nextZ=p.next,p=p.next}while(p!==start);p.prevZ.nextZ=null,p.prevZ=null,function sortLinked(list){var i,p,q,e,tail,numMerges,pSize,qSize,inSize=1;do{for(p=list,list=null,tail=null,numMerges=0;p;){for(numMerges++,q=p,pSize=0,i=0;i<inSize&&(pSize++,q=q.nextZ);i++);for(qSize=inSize;pSize>0||qSize>0&&q;)0!==pSize&&(0===qSize||!q||p.z<=q.z)?(e=p,p=p.nextZ,pSize--):(e=q,q=q.nextZ,qSize--),tail?tail.nextZ=e:list=e,e.prevZ=tail,tail=e;p=q}tail.nextZ=null,inSize*=2}while(numMerges>1);return list}(p)}(ear,minX,minY,invSize);for(var prev,next,stop=ear;ear.prev!==ear.next;)if(prev=ear.prev,next=ear.next,invSize?isEarHashed(ear,minX,minY,invSize):isEar(ear))triangles.push(prev.i/dim),triangles.push(ear.i/dim),triangles.push(next.i/dim),removeNode(ear),ear=next.next,stop=next.next;else if((ear=next)===stop){pass?1===pass?earcutLinked(ear=cureLocalIntersections(filterPoints(ear),triangles,dim),triangles,dim,minX,minY,invSize,2):2===pass&&splitEarcut(ear,triangles,dim,minX,minY,invSize):earcutLinked(filterPoints(ear),triangles,dim,minX,minY,invSize,1);break}}}function isEar(ear){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;for(var p=ear.next.next;p!==ear.prev;){if(pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function isEarHashed(ear,minX,minY,invSize){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;for(var minTX=a.x<b.x?a.x<c.x?a.x:c.x:b.x<c.x?b.x:c.x,minTY=a.y<b.y?a.y<c.y?a.y:c.y:b.y<c.y?b.y:c.y,maxTX=a.x>b.x?a.x>c.x?a.x:c.x:b.x>c.x?b.x:c.x,maxTY=a.y>b.y?a.y>c.y?a.y:c.y:b.y>c.y?b.y:c.y,minZ=zOrder(minTX,minTY,minX,minY,invSize),maxZ=zOrder(maxTX,maxTY,minX,minY,invSize),p=ear.prevZ,n=ear.nextZ;p&&p.z>=minZ&&n&&n.z<=maxZ;){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,n!==ear.prev&&n!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(;p&&p.z>=minZ;){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;n&&n.z<=maxZ;){if(n!==ear.prev&&n!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.nextZ}return!0}function cureLocalIntersections(start,triangles,dim){var p=start;do{var a=p.prev,b=p.next.next;!equals(a,b)&&intersects(a,p,p.next,b)&&locallyInside(a,b)&&locallyInside(b,a)&&(triangles.push(a.i/dim),triangles.push(p.i/dim),triangles.push(b.i/dim),removeNode(p),removeNode(p.next),p=start=b),p=p.next}while(p!==start);return filterPoints(p)}function splitEarcut(start,triangles,dim,minX,minY,invSize){var a=start;do{for(var b=a.next.next;b!==a.prev;){if(a.i!==b.i&&isValidDiagonal(a,b)){var c=splitPolygon(a,b);return a=filterPoints(a,a.next),c=filterPoints(c,c.next),earcutLinked(a,triangles,dim,minX,minY,invSize),void earcutLinked(c,triangles,dim,minX,minY,invSize)}b=b.next}a=a.next}while(a!==start)}function compareX(a,b){return a.x-b.x}function eliminateHole(hole,outerNode){if(outerNode=function findHoleBridge(hole,outerNode){var m,p=outerNode,hx=hole.x,hy=hole.y,qx=-1/0;do{if(hy<=p.y&&hy>=p.next.y&&p.next.y!==p.y){var x=p.x+(hy-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(x<=hx&&x>qx){if(qx=x,x===hx){if(hy===p.y)return p;if(hy===p.next.y)return p.next}m=p.x<p.next.x?p:p.next}}p=p.next}while(p!==outerNode);if(!m)return null;if(hx===qx)return m;var tan,stop=m,mx=m.x,my=m.y,tanMin=1/0;p=m;do{hx>=p.x&&p.x>=mx&&hx!==p.x&&pointInTriangle(hy<my?hx:qx,hy,mx,my,hy<my?qx:hx,hy,p.x,p.y)&&(tan=Math.abs(hy-p.y)/(hx-p.x),locallyInside(p,hole)&&(tan<tanMin||tan===tanMin&&(p.x>m.x||p.x===m.x&&sectorContainsSector(m,p)))&&(m=p,tanMin=tan)),p=p.next}while(p!==stop);return m}(hole,outerNode)){var b=splitPolygon(outerNode,hole);filterPoints(outerNode,outerNode.next),filterPoints(b,b.next)}}function sectorContainsSector(m,p){return area(m.prev,m,p.prev)<0&&area(p.next,m,m.next)<0}function zOrder(x,y,minX,minY,invSize){return(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x=32767*(x-minX)*invSize)|x<<8))|x<<4))|x<<2))|x<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=32767*(y-minY)*invSize)|y<<8))|y<<4))|y<<2))|y<<1))<<1}function getLeftmost(start){var p=start,leftmost=start;do{(p.x<leftmost.x||p.x===leftmost.x&&p.y<leftmost.y)&&(leftmost=p),p=p.next}while(p!==start);return leftmost}function pointInTriangle(ax,ay,bx,by,cx,cy,px,py){return(cx-px)*(ay-py)-(ax-px)*(cy-py)>=0&&(ax-px)*(by-py)-(bx-px)*(ay-py)>=0&&(bx-px)*(cy-py)-(cx-px)*(by-py)>=0}function isValidDiagonal(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!function intersectsPolygon(a,b){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==b.i&&p.next.i!==b.i&&intersects(p,p.next,a,b))return!0;p=p.next}while(p!==a);return!1}(a,b)&&(locallyInside(a,b)&&locallyInside(b,a)&&function middleInside(a,b){var p=a,inside=!1,px=(a.x+b.x)/2,py=(a.y+b.y)/2;do{p.y>py!=p.next.y>py&&p.next.y!==p.y&&px<(p.next.x-p.x)*(py-p.y)/(p.next.y-p.y)+p.x&&(inside=!inside),p=p.next}while(p!==a);return inside}(a,b)&&(area(a.prev,a,b.prev)||area(a,b.prev,b))||equals(a,b)&&area(a.prev,a,a.next)>0&&area(b.prev,b,b.next)>0)}function area(p,q,r){return(q.y-p.y)*(r.x-q.x)-(q.x-p.x)*(r.y-q.y)}function equals(p1,p2){return p1.x===p2.x&&p1.y===p2.y}function intersects(p1,q1,p2,q2){var o1=sign(area(p1,q1,p2)),o2=sign(area(p1,q1,q2)),o3=sign(area(p2,q2,p1)),o4=sign(area(p2,q2,q1));return o1!==o2&&o3!==o4||(!(0!==o1||!onSegment(p1,p2,q1))||(!(0!==o2||!onSegment(p1,q2,q1))||(!(0!==o3||!onSegment(p2,p1,q2))||!(0!==o4||!onSegment(p2,q1,q2)))))}function onSegment(p,q,r){return q.x<=Math.max(p.x,r.x)&&q.x>=Math.min(p.x,r.x)&&q.y<=Math.max(p.y,r.y)&&q.y>=Math.min(p.y,r.y)}function sign(num){return num>0?1:num<0?-1:0}function locallyInside(a,b){return area(a.prev,a,a.next)<0?area(a,b,a.next)>=0&&area(a,a.prev,b)>=0:area(a,b,a.prev)<0||area(a,a.next,b)<0}function splitPolygon(a,b){var a2=new Node(a.i,a.x,a.y),b2=new Node(b.i,b.x,b.y),an=a.next,bp=b.prev;return a.next=b,b.prev=a,a2.next=an,an.prev=a2,b2.next=a2,a2.prev=b2,bp.next=b2,b2.prev=bp,b2}function insertNode(i,x,y,last){var p=new Node(i,x,y);return last?(p.next=last.next,p.prev=last,last.next.prev=p,last.next=p):(p.prev=p,p.next=p),p}function removeNode(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function Node(i,x,y){this.i=i,this.x=x,this.y=y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(data,start,end,dim){for(var sum=0,i=start,j=end-dim;i<end;i+=dim)sum+=(data[j]-data[i])*(data[i+1]+data[j+1]),j=i;return sum}module.exports=earcut,module.exports.default=earcut,earcut.deviation=function(data,holeIndices,dim,triangles){var hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,polygonArea=Math.abs(signedArea(data,0,outerLen,dim));if(hasHoles)for(var i=0,len=holeIndices.length;i<len;i++){var start=holeIndices[i]*dim,end=i<len-1?holeIndices[i+1]*dim:data.length;polygonArea-=Math.abs(signedArea(data,start,end,dim))}var trianglesArea=0;for(i=0;i<triangles.length;i+=3){var a=triangles[i]*dim,b=triangles[i+1]*dim,c=triangles[i+2]*dim;trianglesArea+=Math.abs((data[a]-data[c])*(data[b+1]-data[a+1])-(data[a]-data[b])*(data[c+1]-data[a+1]))}return 0===polygonArea&&0===trianglesArea?0:Math.abs((trianglesArea-polygonArea)/polygonArea)},earcut.flatten=function(data){for(var dim=data[0][0].length,result={vertices:[],holes:[],dimensions:dim},holeIndex=0,i=0;i<data.length;i++){for(var j=0;j<data[i].length;j++)for(var d=0;d<dim;d++)result.vertices.push(data[i][j][d]);i>0&&(holeIndex+=data[i-1].length,result.holes.push(holeIndex))}return result}},function(module,exports,__webpack_require__){var SphericalMercator=__webpack_require__(786),smCache={};function fetchMerc(tileSize){return smCache[tileSize=tileSize||256]||(smCache[tileSize]=new SphericalMercator({size:tileSize})),smCache[tileSize]}module.exports.viewport=function viewport(bounds,dimensions,minzoom,maxzoom,tileSize,allowFloat){minzoom=void 0===minzoom?0:minzoom,maxzoom=void 0===maxzoom?20:maxzoom;var merc=fetchMerc(tileSize),base=maxzoom,bl=merc.px([bounds[0],bounds[1]],base),tr=merc.px([bounds[2],bounds[3]],base),width=tr[0]-bl[0],height=bl[1]-tr[1],ratios=[width/dimensions[0],height/dimensions[1]],center=[(bounds[0]+bounds[2])/2,(bounds[1]+bounds[3])/2],adjusted=function getAdjusted(base,ratios,allowFloat){var adjusted=Math.min(base-Math.log(ratios[0])/Math.log(2),base-Math.log(ratios[1])/Math.log(2));return allowFloat?adjusted:Math.floor(adjusted)}(base,ratios,allowFloat),zoom=Math.max(minzoom,Math.min(maxzoom,adjusted));return{center:center,zoom:zoom}},module.exports.bounds=function bounds(viewport,zoom,dimensions,tileSize){void 0!==viewport.lon&&(viewport=[viewport.lon,viewport.lat]);var merc=fetchMerc(tileSize),px=merc.px(viewport,zoom),tl=merc.ll([px[0]-dimensions[0]/2,px[1]-dimensions[1]/2],zoom),br=merc.ll([px[0]+dimensions[0]/2,px[1]+dimensions[1]/2],zoom);return[tl[0],br[1],br[0],tl[1]]}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5);function createDetectElementResize(nonce){var _window;_window="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;var cancel,raf,attachEvent="undefined"!=typeof document&&document.attachEvent;if(!attachEvent){var requestFrame=(raf=_window.requestAnimationFrame||_window.mozRequestAnimationFrame||_window.webkitRequestAnimationFrame||function(fn){return _window.setTimeout(fn,20)},function(fn){return raf(fn)}),cancelFrame=(cancel=_window.cancelAnimationFrame||_window.mozCancelAnimationFrame||_window.webkitCancelAnimationFrame||_window.clearTimeout,function(id){return cancel(id)}),resetTriggers=function resetTriggers(element){var triggers=element.__resizeTriggers__,expand=triggers.firstElementChild,contract=triggers.lastElementChild,expandChild=expand.firstElementChild;contract.scrollLeft=contract.scrollWidth,contract.scrollTop=contract.scrollHeight,expandChild.style.width=expand.offsetWidth+1+"px",expandChild.style.height=expand.offsetHeight+1+"px",expand.scrollLeft=expand.scrollWidth,expand.scrollTop=expand.scrollHeight},scrollListener=function scrollListener(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var element=this;resetTriggers(this),this.__resizeRAF__&&cancelFrame(this.__resizeRAF__),this.__resizeRAF__=requestFrame((function(){(function checkTriggers(element){return element.offsetWidth!=element.__resizeLast__.width||element.offsetHeight!=element.__resizeLast__.height})(element)&&(element.__resizeLast__.width=element.offsetWidth,element.__resizeLast__.height=element.offsetHeight,element.__resizeListeners__.forEach((function(fn){fn.call(element,e)})))}))}},animation=!1,keyframeprefix="",animationstartevent="animationstart",domPrefixes="Webkit Moz O ms".split(" "),startEvents="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),elm=document.createElement("fakeelement");if(void 0!==elm.style.animationName&&(animation=!0),!1===animation)for(var i=0;i<domPrefixes.length;i++)if(void 0!==elm.style[domPrefixes[i]+"AnimationName"]){keyframeprefix="-"+domPrefixes[i].toLowerCase()+"-",animationstartevent=startEvents[i],animation=!0;break}var animationName="resizeanim",animationKeyframes="@"+keyframeprefix+"keyframes "+animationName+" { from { opacity: 0; } to { opacity: 0; } } ",animationStyle=keyframeprefix+"animation: 1ms "+animationName+"; "}return{addResizeListener:function addResizeListener(element,fn){if(attachEvent)element.attachEvent("onresize",fn);else{if(!element.__resizeTriggers__){var doc=element.ownerDocument,elementStyle=_window.getComputedStyle(element);elementStyle&&"static"==elementStyle.position&&(element.style.position="relative"),function createStyles(doc){if(!doc.getElementById("detectElementResize")){var css=(animationKeyframes||"")+".resize-triggers { "+(animationStyle||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',head=doc.head||doc.getElementsByTagName("head")[0],style=doc.createElement("style");style.id="detectElementResize",style.type="text/css",null!=nonce&&style.setAttribute("nonce",nonce),style.styleSheet?style.styleSheet.cssText=css:style.appendChild(doc.createTextNode(css)),head.appendChild(style)}}(doc),element.__resizeLast__={},element.__resizeListeners__=[],(element.__resizeTriggers__=doc.createElement("div")).className="resize-triggers",element.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',element.appendChild(element.__resizeTriggers__),resetTriggers(element),element.addEventListener("scroll",scrollListener,!0),animationstartevent&&(element.__resizeTriggers__.__animationListener__=function animationListener(e){e.animationName==animationName&&resetTriggers(element)},element.__resizeTriggers__.addEventListener(animationstartevent,element.__resizeTriggers__.__animationListener__))}element.__resizeListeners__.push(fn)}},removeResizeListener:function removeResizeListener(element,fn){if(attachEvent)element.detachEvent("onresize",fn);else if(element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn),1),!element.__resizeListeners__.length){element.removeEventListener("scroll",scrollListener,!0),element.__resizeTriggers__.__animationListener__&&(element.__resizeTriggers__.removeEventListener(animationstartevent,element.__resizeTriggers__.__animationListener__),element.__resizeTriggers__.__animationListener__=null);try{element.__resizeTriggers__=!element.removeChild(element.__resizeTriggers__)}catch(e){}}}}}var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call},AutoSizer=function(_React$PureComponent){function AutoSizer(){var _ref,_temp,_this;classCallCheck(this,AutoSizer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=possibleConstructorReturn(this,(_ref=AutoSizer.__proto__||Object.getPrototypeOf(AutoSizer)).call.apply(_ref,[this].concat(args))),_this.state={height:_this.props.defaultHeight||0,width:_this.props.defaultWidth||0},_this._onResize=function(){var _this$props=_this.props,disableHeight=_this$props.disableHeight,disableWidth=_this$props.disableWidth,onResize=_this$props.onResize;if(_this._parentNode){var _height=_this._parentNode.offsetHeight||0,_width=_this._parentNode.offsetWidth||0,_style=window.getComputedStyle(_this._parentNode)||{},paddingLeft=parseInt(_style.paddingLeft,10)||0,paddingRight=parseInt(_style.paddingRight,10)||0,paddingTop=parseInt(_style.paddingTop,10)||0,paddingBottom=parseInt(_style.paddingBottom,10)||0,newHeight=_height-paddingTop-paddingBottom,newWidth=_width-paddingLeft-paddingRight;(!disableHeight&&_this.state.height!==newHeight||!disableWidth&&_this.state.width!==newWidth)&&(_this.setState({height:_height-paddingTop-paddingBottom,width:_width-paddingLeft-paddingRight}),onResize({height:_height,width:_width}))}},_this._setRef=function(autoSizer){_this._autoSizer=autoSizer},possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(AutoSizer,_React$PureComponent),createClass(AutoSizer,[{key:"componentDidMount",value:function componentDidMount(){var nonce=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=createDetectElementResize(nonce),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function render(){var _props=this.props,children=_props.children,className=_props.className,disableHeight=_props.disableHeight,disableWidth=_props.disableWidth,style=_props.style,_state=this.state,height=_state.height,width=_state.width,outerStyle={overflow:"visible"},childParams={},bailoutOnChildren=!1;return disableHeight||(0===height&&(bailoutOnChildren=!0),outerStyle.height=0,childParams.height=height),disableWidth||(0===width&&(bailoutOnChildren=!0),outerStyle.width=0,childParams.width=width),Object(react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",{className:className,ref:this._setRef,style:_extends({},outerStyle,style)},!bailoutOnChildren&&children(childParams))}}]),AutoSizer}(react__WEBPACK_IMPORTED_MODULE_0__.PureComponent);AutoSizer.defaultProps={onResize:function onResize(){},disableHeight:!1,disableWidth:!1,style:{}},__webpack_exports__.a=AutoSizer}).call(this,__webpack_require__(43))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return model_Model}));var defineProperty=__webpack_require__(0),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),esm=__webpack_require__(9),program_manager=__webpack_require__(420),utils=__webpack_require__(154),assert=__webpack_require__(23),classes_clear=__webpack_require__(285),classes_program=__webpack_require__(818),classes_accessor=__webpack_require__(66),classes_buffer=__webpack_require__(41),possibleConstructorReturn=__webpack_require__(7),assertThisInitialized=__webpack_require__(6),getPrototypeOf=__webpack_require__(3),get=__webpack_require__(22),inherits=__webpack_require__(8),resource=__webpack_require__(48),arrayBuffer=null;function getScratchArray(Type,length){return new Type(function getScratchArrayBuffer(byteLength){return(!arrayBuffer||arrayBuffer.byteLength<byteLength)&&(arrayBuffer=new ArrayBuffer(byteLength)),arrayBuffer}(Type.BYTES_PER_ELEMENT*length),0,length)}var globals=__webpack_require__(64),is_browser=__webpack_require__(214),is_electron=__webpack_require__(215);function getBrowser(mockUserAgent){if(!mockUserAgent&&!Object(is_browser.a)())return"Node";if(Object(is_electron.a)(mockUserAgent))return"Electron";var navigator_="undefined"!=typeof navigator?navigator:{},userAgent=mockUserAgent||navigator_.userAgent||"";if(userAgent.indexOf("Edge")>-1)return"Edge";var isMSIE=-1!==userAgent.indexOf("MSIE "),isTrident=-1!==userAgent.indexOf("Trident/");return isMSIE||isTrident?"IE":globals.b.chrome?"Chrome":globals.b.safari?"Safari":globals.b.mozInnerScreenX?"Firefox":"Unknown"}var ERR_ELEMENTS="elements must be GL.ELEMENT_ARRAY_BUFFER",vertex_array_object_VertexArrayObject=function(_Resource){function VertexArrayObject(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,VertexArrayObject);var id=opts.id||opts.program&&opts.program.id;return(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(VertexArrayObject).call(this,gl,Object.assign({},opts,{id:id})))).buffer=null,_this.bufferValue=null,_this.isDefaultArray=opts.isDefaultArray||!1,_this.initialize(opts),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(VertexArrayObject,_Resource),Object(createClass.a)(VertexArrayObject,null,[{key:"isSupported",value:function isSupported(gl){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!options.constantAttributeZero||(Object(esm.f)(gl)||"Chrome"===getBrowser())}},{key:"getDefaultArray",value:function getDefaultArray(gl){return gl.luma=gl.luma||{},gl.luma.defaultVertexArray||(gl.luma.defaultVertexArray=new VertexArrayObject(gl,{handle:null,isDefaultArray:!0})),gl.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function getMaxAttributes(gl){return VertexArrayObject.MAX_ATTRIBUTES=VertexArrayObject.MAX_ATTRIBUTES||gl.getParameter(34921),VertexArrayObject.MAX_ATTRIBUTES}},{key:"setConstant",value:function setConstant(gl,location,array){switch(array.constructor){case Float32Array:VertexArrayObject._setConstantFloatArray(gl,location,array);break;case Int32Array:VertexArrayObject._setConstantIntArray(gl,location,array);break;case Uint32Array:VertexArrayObject._setConstantUintArray(gl,location,array);break;default:Object(assert.a)(!1)}}}]),Object(createClass.a)(VertexArrayObject,[{key:"delete",value:function _delete(){Object(get.a)(Object(getPrototypeOf.a)(VertexArrayObject.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(props)}},{key:"setProps",value:function setProps(props){return this}},{key:"setElementBuffer",value:function setElementBuffer(){var _this2=this,elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(assert.a)(!elementBuffer||34963===elementBuffer.target,ERR_ELEMENTS),this.bind((function(){_this2.gl.bindBuffer(34963,elementBuffer?elementBuffer.handle:null)})),this}},{key:"setBuffer",value:function setBuffer(location,buffer,accessor){if(34963===buffer.target)return this.setElementBuffer(buffer,accessor);var size=accessor.size,type=accessor.type,stride=accessor.stride,offset=accessor.offset,normalized=accessor.normalized,integer=accessor.integer,divisor=accessor.divisor,gl=this.gl;return location=Number(location),this.bind((function(){gl.bindBuffer(34962,buffer.handle),integer?(Object(assert.a)(Object(esm.f)(gl)),gl.vertexAttribIPointer(location,size,type,stride,offset)):gl.vertexAttribPointer(location,size,type,normalized,stride,offset),gl.enableVertexAttribArray(location),gl.vertexAttribDivisor(location,divisor||0)})),this}},{key:"enable",value:function enable(location){var _this3=this,_enable=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],disablingAttributeZero=!_enable&&0===location&&!VertexArrayObject.isSupported(this.gl,{constantAttributeZero:!0});return disablingAttributeZero||(location=Number(location),this.bind((function(){return _enable?_this3.gl.enableVertexAttribArray(location):_this3.gl.disableVertexAttribArray(location)}))),this}},{key:"getConstantBuffer",value:function getConstantBuffer(elementCount,value,accessor){var constantValue=this._normalizeConstantArrayValue(value,accessor),byteLength=constantValue.byteLength*elementCount,length=constantValue.length*elementCount,updateNeeded=!this.buffer;if(this.buffer=this.buffer||new classes_buffer.a(this.gl,byteLength),updateNeeded=(updateNeeded=updateNeeded||this.buffer.reallocate(byteLength))||!this._compareConstantArrayValues(constantValue,this.bufferValue)){var typedArray=getScratchArray(value.constructor,length);!function fillArray(_ref){for(var target=_ref.target,source=_ref.source,_ref$start=_ref.start,start=void 0===_ref$start?0:_ref$start,_ref$count=_ref.count,count=void 0===_ref$count?1:_ref$count,length=source.length,total=count*length,copied=0,i=start;copied<length;copied++)target[i++]=source[copied];for(;copied<total;)copied<total-copied?(target.copyWithin(start+copied,start,start+copied),copied*=2):(target.copyWithin(start+copied,start,start+total-copied),copied=total);return target}({target:typedArray,source:constantValue,start:0,count:length}),this.buffer.subData(typedArray),this.bufferValue=value}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function _normalizeConstantArrayValue(arrayValue,accessor){return Array.isArray(arrayValue)?new Float32Array(arrayValue):arrayValue}},{key:"_compareConstantArrayValues",value:function _compareConstantArrayValues(v1,v2){if(!v1||!v2||v1.length!==v2.length||v1.constructor!==v2.constructor)return!1;for(var i=0;i<v1.length;++i)if(v1[i]!==v2[i])return!1;return!0}},{key:"_createHandle",value:function _createHandle(){return this.gl.createVertexArray()}},{key:"_deleteHandle",value:function _deleteHandle(handle){return this.gl.deleteVertexArray(handle),[this.elements]}},{key:"_bindHandle",value:function _bindHandle(handle){this.gl.bindVertexArray(handle)}},{key:"_getParameter",value:function _getParameter(pname,_ref){var _this4=this,location=_ref.location;return Object(assert.a)(Number.isFinite(location)),this.bind((function(){switch(pname){case 34373:return _this4.gl.getVertexAttribOffset(location,pname);default:return _this4.gl.getVertexAttrib(location,pname)}}))}},{key:"MAX_ATTRIBUTES",get:function get(){return VertexArrayObject.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function _setConstantFloatArray(gl,location,array){switch(array.length){case 1:gl.vertexAttrib1fv(location,array);break;case 2:gl.vertexAttrib2fv(location,array);break;case 3:gl.vertexAttrib3fv(location,array);break;case 4:gl.vertexAttrib4fv(location,array);break;default:Object(assert.a)(!1)}}},{key:"_setConstantIntArray",value:function _setConstantIntArray(gl,location,array){switch(Object(assert.a)(Object(esm.f)(gl)),array.length){case 1:gl.vertexAttribI1iv(location,array);break;case 2:gl.vertexAttribI2iv(location,array);break;case 3:gl.vertexAttribI3iv(location,array);break;case 4:gl.vertexAttribI4iv(location,array);break;default:Object(assert.a)(!1)}}},{key:"_setConstantUintArray",value:function _setConstantUintArray(gl,location,array){switch(Object(assert.a)(Object(esm.f)(gl)),array.length){case 1:gl.vertexAttribI1uiv(location,array);break;case 2:gl.vertexAttribI2uiv(location,array);break;case 3:gl.vertexAttribI3uiv(location,array);break;case 4:gl.vertexAttribI4uiv(location,array);break;default:Object(assert.a)(!1)}}}]),VertexArrayObject}(resource.a),stub_methods=__webpack_require__(796),MULTI_LOCATION_ATTRIBUTE_REGEXP=/^(.+)__LOCATION_([0-9]+)$/,DEPRECATIONS_V6=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],vertex_array_VertexArray=function(){function VertexArray(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,VertexArray);var id=opts.id||opts.program&&opts.program.id;this.id=id,this.gl=gl,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new vertex_array_object_VertexArrayObject(gl),Object(stub_methods.a)(this,"VertexArray","v6.0",DEPRECATIONS_V6),this.initialize(opts),Object.seal(this)}return Object(createClass.a)(VertexArray,[{key:"delete",value:function _delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}},{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(props)}},{key:"reset",value:function reset(){this.elements=null,this.elementsAccessor=null;var MAX_ATTRIBUTES=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(MAX_ATTRIBUTES).fill(null),this.accessors=new Array(MAX_ATTRIBUTES).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function setProps(props){return"program"in props&&(this.configuration=props.program&&props.program.configuration),"configuration"in props&&(this.configuration=props.configuration),"attributes"in props&&this.setAttributes(props.attributes),"elements"in props&&this.setElementBuffer(props.elements),"bindOnUse"in props&&(props=props.bindOnUse),this}},{key:"clearDrawParams",value:function clearDrawParams(){this.drawParams=null}},{key:"getDrawParams",value:function getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}},{key:"setAttributes",value:function setAttributes(attributes){var _this=this;return Object.assign(this.attributes,attributes),this.vertexArrayObject.bind((function(){for(var locationOrName in attributes){var value=attributes[locationOrName];_this._setAttribute(locationOrName,value)}_this.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function setElementBuffer(){var elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,accessor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=elementBuffer,this.elementsAccessor=accessor,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(elementBuffer,accessor),this}},{key:"setBuffer",value:function setBuffer(locationOrName,buffer){var appAccessor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===buffer.target)return this.setElementBuffer(buffer,appAccessor);var _this$_resolveLocatio=this._resolveLocationAndAccessor(locationOrName,buffer,buffer.accessor,appAccessor),location=_this$_resolveLocatio.location,accessor=_this$_resolveLocatio.accessor;return location>=0&&(this.values[location]=buffer,this.accessors[location]=accessor,this.clearDrawParams(),this.vertexArrayObject.setBuffer(location,buffer,accessor)),this}},{key:"setConstant",value:function setConstant(locationOrName,arrayValue){var appAccessor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_this$_resolveLocatio2=this._resolveLocationAndAccessor(locationOrName,arrayValue,Object.assign({size:arrayValue.length},appAccessor)),location=_this$_resolveLocatio2.location,accessor=_this$_resolveLocatio2.accessor;return location>=0&&(arrayValue=this.vertexArrayObject._normalizeConstantArrayValue(arrayValue,accessor),this.values[location]=arrayValue,this.accessors[location]=accessor,this.clearDrawParams(),this.vertexArrayObject.enable(location,!1)),this}},{key:"unbindBuffers",value:function unbindBuffers(){var _this2=this;return this.vertexArrayObject.bind((function(){_this2.elements&&_this2.vertexArrayObject.setElementBuffer(null),_this2.buffer=_this2.buffer||new classes_buffer.a(_this2.gl,{accessor:{size:4}});for(var location=0;location<_this2.vertexArrayObject.MAX_ATTRIBUTES;location++)_this2.values[location]instanceof classes_buffer.a&&(_this2.gl.disableVertexAttribArray(location),_this2.gl.bindBuffer(34962,_this2.buffer.handle),_this2.gl.vertexAttribPointer(location,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function bindBuffers(){var _this3=this;return this.vertexArrayObject.bind((function(){_this3.elements&&_this3.setElementBuffer(_this3.elements);for(var location=0;location<_this3.vertexArrayObject.MAX_ATTRIBUTES;location++){var buffer=_this3.values[location];buffer instanceof classes_buffer.a&&_this3.setBuffer(location,buffer)}})),this}},{key:"bindForDraw",value:function bindForDraw(vertexCount,instanceCount,func){var value,_this4=this;return this.vertexArrayObject.bind((function(){_this4._setConstantAttributes(vertexCount,instanceCount),value=func()})),value}},{key:"_resolveLocationAndAccessor",value:function _resolveLocationAndAccessor(locationOrName,value,valueAccessor,appAccessor){var _this5=this,_this$_getAttributeIn=this._getAttributeIndex(locationOrName),location=_this$_getAttributeIn.location,name=_this$_getAttributeIn.name;if(!Number.isFinite(location)||location<0)return this.unused[locationOrName]=value,esm.g.once(3,(function(){return"unused value ".concat(locationOrName," in ").concat(_this5.id)}))(),this;var accessInfo=this._getAttributeInfo(name||location);if(!accessInfo)return{location:-1,accessor:null};var currentAccessor=this.accessors[location]||{},accessor=classes_accessor.a.resolve(accessInfo.accessor,currentAccessor,valueAccessor,appAccessor),size=accessor.size,type=accessor.type;return Object(assert.a)(Number.isFinite(size)&&Number.isFinite(type)),{location:location,accessor:accessor}}},{key:"_getAttributeInfo",value:function _getAttributeInfo(attributeName){return this.configuration&&this.configuration.getAttributeInfo(attributeName)}},{key:"_getAttributeIndex",value:function _getAttributeIndex(locationOrName){var location=Number(locationOrName);if(Number.isFinite(location))return{location:location};var multiLocation=MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName),name=multiLocation?multiLocation[1]:locationOrName,locationOffset=multiLocation?Number(multiLocation[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(name)+locationOffset,name:name}:{location:-1}}},{key:"_setAttribute",value:function _setAttribute(locationOrName,value){if(value instanceof classes_buffer.a)this.setBuffer(locationOrName,value);else if(Array.isArray(value)&&value.length&&value[0]instanceof classes_buffer.a){var buffer=value[0],accessor=value[1];this.setBuffer(locationOrName,buffer,accessor)}else if(ArrayBuffer.isView(value)||Array.isArray(value)){var constant=value;this.setConstant(locationOrName,constant)}else{if(!(value.buffer instanceof classes_buffer.a))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var _accessor=value;this.setBuffer(locationOrName,_accessor.buffer,_accessor)}}},{key:"_setConstantAttributes",value:function _setConstantAttributes(vertexCount,instanceCount){var elementCount=Math.max(0|vertexCount,0|instanceCount),constant=this.values[0];ArrayBuffer.isView(constant)&&this._setConstantAttributeZero(constant,elementCount);for(var location=1;location<this.vertexArrayObject.MAX_ATTRIBUTES;location++)constant=this.values[location],ArrayBuffer.isView(constant)&&this._setConstantAttribute(location,constant)}},{key:"_setConstantAttributeZero",value:function _setConstantAttributeZero(constant,elementCount){if(vertex_array_object_VertexArrayObject.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,constant);else{var buffer=this.vertexArrayObject.getConstantBuffer(elementCount,constant);this.vertexArrayObject.setBuffer(0,buffer,this.accessors[0])}}},{key:"_setConstantAttribute",value:function _setConstantAttribute(location,constant){vertex_array_object_VertexArrayObject.setConstant(this.gl,location,constant)}},{key:"_updateDrawParams",value:function _updateDrawParams(){for(var drawParams={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},location=0;location<this.vertexArrayObject.MAX_ATTRIBUTES;location++)this._updateDrawParamsForLocation(drawParams,location);return this.elements&&(drawParams.elementCount=this.elements.getElementCount(this.elements.accessor),drawParams.isIndexed=!0,drawParams.indexType=this.elementsAccessor.type||this.elements.accessor.type,drawParams.indexOffset=this.elementsAccessor.offset||0),drawParams.indexCount===1/0&&(drawParams.indexCount=0),drawParams.vertexCount===1/0&&(drawParams.vertexCount=0),drawParams.instanceCount===1/0&&(drawParams.instanceCount=0),drawParams}},{key:"_updateDrawParamsForLocation",value:function _updateDrawParamsForLocation(drawParams,location){var value=this.values[location],accessor=this.accessors[location];if(value){var isInstanced=accessor.divisor>0;if(drawParams.isInstanced=drawParams.isInstanced||isInstanced,value instanceof classes_buffer.a){var buffer=value;if(isInstanced){var instanceCount=buffer.getVertexCount(accessor);drawParams.instanceCount=Math.min(drawParams.instanceCount,instanceCount)}else{var vertexCount=buffer.getVertexCount(accessor);drawParams.vertexCount=Math.min(drawParams.vertexCount,vertexCount)}}}}},{key:"setElements",value:function setElements(){var elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,accessor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return esm.g.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(elementBuffer,accessor)}}]),VertexArray}(),transform_feedback=__webpack_require__(805),constants_to_keys=__webpack_require__(117),attribute_utils=__webpack_require__(96);function formatArrayValue(v,opts){for(var _opts$maxElts=opts.maxElts,maxElts=void 0===_opts$maxElts?16:_opts$maxElts,_opts$size=opts.size,size=void 0===_opts$size?1:_opts$size,string="[",i=0;i<v.length&&i<maxElts;++i)i>0&&(string+=",".concat(i%size==0?" ":"")),string+=formatValue(v[i],opts);var terminator=v.length>maxElts?"...":"]";return"".concat(string).concat(terminator)}function formatValue(v){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},EPSILON=1e-16,_opts$isInteger=opts.isInteger,isInteger=void 0!==_opts$isInteger&&_opts$isInteger;if(Array.isArray(v)||ArrayBuffer.isView(v))return formatArrayValue(v,opts);if(!Number.isFinite(v))return String(v);if(Math.abs(v)<EPSILON)return isInteger?"0":"0.";if(isInteger)return v.toFixed(0);if(Math.abs(v)>100&&Math.abs(v)<1e4)return v.toFixed(0);var string=v.toPrecision(2),decimal=string.indexOf(".0");return decimal===string.length-2?string.slice(0,-1):string}function getDebugTableRow(vertexArray,attribute,accessor,header){var _ref4,_ref2,gl=vertexArray.gl;if(!attribute)return _ref2={},Object(defineProperty.a)(_ref2,header,"null"),Object(defineProperty.a)(_ref2,"Format ","N/A"),_ref2;var isInteger,marker,value,type="NOT PROVIDED",size="N/A",verts="N/A",bytes="N/A";if(accessor&&(type=accessor.type,size=accessor.size,isInteger=-1!==(type=String(type).replace("Array","")).indexOf("nt")),attribute instanceof classes_buffer.a){var _ref3,format,buffer=attribute,_buffer$getDebugData=buffer.getDebugData(),data=_buffer$getDebugData.data;if(marker=_buffer$getDebugData.modified?"*":"",value=data,verts=(bytes=buffer.byteLength)/data.BYTES_PER_ELEMENT/size,accessor){var instanced=accessor.divisor>0;format="".concat(instanced?"I ":"P "," ").concat(verts," (x").concat(size,"=").concat(bytes," bytes ").concat(Object(constants_to_keys.a)(gl,type),")")}else isInteger=!0,format="".concat(bytes," bytes");return _ref3={},Object(defineProperty.a)(_ref3,header,"".concat(marker).concat(formatValue(value,{size:size,isInteger:isInteger}))),Object(defineProperty.a)(_ref3,"Format ",format),_ref3}return value=attribute,size=attribute.length,isInteger=-1!==(type=String(attribute.constructor.name).replace("Array","")).indexOf("nt"),_ref4={},Object(defineProperty.a)(_ref4,header,"".concat(formatValue(value,{size:size,isInteger:isInteger})," (constant)")),Object(defineProperty.a)(_ref4,"Format ","".concat(size,"x").concat(type," (constant)")),_ref4}function getGLSLDeclaration(name,accessor){var type=accessor.type,size=accessor.size,typeAndName=Object(attribute_utils.b)(type,size);return typeAndName?"".concat(name," (").concat(typeAndName.name,")"):name}function getDebugTableForUniforms(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$header=_ref.header,header=void 0===_ref$header?"Uniforms":_ref$header,program=_ref.program,uniforms=_ref.uniforms,_ref$undefinedOnly=_ref.undefinedOnly,undefinedOnly=void 0!==_ref$undefinedOnly&&_ref$undefinedOnly;Object(assert.a)(program);var SHADER_MODULE_UNIFORM_REGEXP=".*_.*",PROJECT_MODULE_UNIFORM_REGEXP=".*Matrix",uniformLocations=program._uniformSetters,table={},uniformNames=Object.keys(uniformLocations).sort(),count=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=uniformNames[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _uniformName=_step.value;_uniformName.match(SHADER_MODULE_UNIFORM_REGEXP)||_uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)||addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:_uniformName,undefinedOnly:undefinedOnly})&&count++}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=uniformNames[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _uniformName2=_step2.value;_uniformName2.match(PROJECT_MODULE_UNIFORM_REGEXP)&&addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:_uniformName2,undefinedOnly:undefinedOnly})&&count++}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=uniformNames[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _uniformName3=_step3.value;table[_uniformName3]||addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:_uniformName3,undefinedOnly:undefinedOnly})&&count++}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}var unusedCount=0,unusedTable={};if(!undefinedOnly)for(var uniformName in uniforms){var uniform=uniforms[uniformName];table[uniformName]||(unusedCount++,unusedTable[uniformName]=Object(defineProperty.a)({Type:"NOT USED: ".concat(uniform)},header,formatValue(uniform)))}return{table:table,count:count,unusedTable:unusedTable,unusedCount:unusedCount}}function addUniformToTable(_ref2){var _table$uniformName,table=_ref2.table,header=_ref2.header,uniforms=_ref2.uniforms,uniformName=_ref2.uniformName,undefinedOnly=_ref2.undefinedOnly,value=uniforms[uniformName],isDefined=function isUniformDefined(value){return null!=value}(value);return(!undefinedOnly||!isDefined)&&(table[uniformName]=(_table$uniformName={},Object(defineProperty.a)(_table$uniformName,header,isDefined?formatValue(value):"N/A"),Object(defineProperty.a)(_table$uniformName,"Uniform Type",isDefined?value:"NOT PROVIDED"),_table$uniformName),!0)}function debug_program_configuration_getGLSLDeclaration(attributeInfo){var _attributeInfo$access=attributeInfo.accessor,type=_attributeInfo$access.type,size=_attributeInfo$access.size,typeAndName=Object(attribute_utils.b)(type,size);return typeAndName?"".concat(typeAndName.name," ").concat(attributeInfo.name):attributeInfo.name}var objectSpread=__webpack_require__(216),GLTF_TO_LUMA_ATTRIBUTE_MAP={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function mapAttributeName(name,options){var _ref$attributeMap=(options||{}).attributeMap,attributeMap=void 0===_ref$attributeMap?GLTF_TO_LUMA_ATTRIBUTE_MAP:_ref$attributeMap;return attributeMap&&attributeMap[name]||name}function inferAttributeAccessor(attributeName,attribute){var category;switch(attributeName){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":category="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":category="vectors"}switch(category){case"vectors":attribute.size=attribute.size||3;break;case"uvs":attribute.size=attribute.size||2}Object(assert.a)(Number.isFinite(attribute.size),"attribute ".concat(attributeName," needs size"))}var NOOP=function NOOP(){},DRAW_PARAMS={},model_Model=function(){function Model(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,Model);var _props$id=props.id,id=void 0===_props$id?Object(utils.c)("model"):_props$id;Object(assert.a)(Object(esm.e)(gl)),this.id=id,this.gl=gl,this.id=props.id||Object(utils.c)("Model"),this.lastLogTime=0,this.initialize(props)}return Object(createClass.a)(Model,[{key:"initialize",value:function initialize(props){this.props={},this.programManager=props.programManager||program_manager.a.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var _props$program=props.program,program=void 0===_props$program?null:_props$program,vs=props.vs,fs=props.fs,modules=props.modules,defines=props.defines,inject=props.inject,varyings=props.varyings,bufferMode=props.bufferMode,transpileToGLSL100=props.transpileToGLSL100;this.programProps={program:program,vs:vs,fs:fs,modules:modules,defines:defines,inject:inject,varyings:varyings,bufferMode:bufferMode,transpileToGLSL100:transpileToGLSL100},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(props.moduleSettings))),this.drawMode=void 0!==props.drawMode?props.drawMode:4,this.vertexCount=props.vertexCount||0,this.geometryBuffers={},this.isInstanced=props.isInstanced||props.instanced||props.instanceCount>0,this._setModelProps(props),this.geometry={},Object(assert.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function setProps(props){this._setModelProps(props)}},{key:"delete",value:function _delete(){for(var key in this._attributes)this._attributes[key]!==this.attributes[key]&&this._attributes[key].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function getDrawMode(){return this.drawMode}},{key:"getVertexCount",value:function getVertexCount(){return this.vertexCount}},{key:"getInstanceCount",value:function getInstanceCount(){return this.instanceCount}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"getProgram",value:function getProgram(){return this.program}},{key:"setProgram",value:function setProgram(props){var program=props.program,vs=props.vs,fs=props.fs,modules=props.modules,defines=props.defines,inject=props.inject,varyings=props.varyings,bufferMode=props.bufferMode,transpileToGLSL100=props.transpileToGLSL100;this.programProps={program:program,vs:vs,fs:fs,modules:modules,defines:defines,inject:inject,varyings:varyings,bufferMode:bufferMode,transpileToGLSL100:transpileToGLSL100},this._programDirty=!0}},{key:"getUniforms",value:function getUniforms(){return this.uniforms}},{key:"setDrawMode",value:function setDrawMode(drawMode){return this.drawMode=drawMode,this}},{key:"setVertexCount",value:function setVertexCount(vertexCount){return Object(assert.a)(Number.isFinite(vertexCount)),this.vertexCount=vertexCount,this}},{key:"setInstanceCount",value:function setInstanceCount(instanceCount){return Object(assert.a)(Number.isFinite(instanceCount)),this.instanceCount=instanceCount,this}},{key:"setGeometry",value:function setGeometry(geometry){return this.drawMode=geometry.drawMode,this.vertexCount=geometry.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function getBuffersFromGeometry(gl,geometry,options){var buffers={},indices=geometry.indices;for(var name in geometry.attributes){var attribute=geometry.attributes[name],remappedName=mapAttributeName(name,options);if("indices"===name)indices=attribute;else if(attribute.constant)buffers[remappedName]=attribute.value;else{var typedArray=attribute.value,accessor=Object(objectSpread.a)({},attribute);delete accessor.value,buffers[remappedName]=[new classes_buffer.a(gl,typedArray),accessor],inferAttributeAccessor(name,accessor)}}if(indices){var data=indices.value||indices;Object(assert.a)(data instanceof Uint16Array||data instanceof Uint32Array,'attribute array for "indices" must be of integer type');var _accessor={size:1,isIndexed:void 0===indices.isIndexed||indices.isIndexed};buffers.indices=[new classes_buffer.a(gl,{data:data,target:34963}),_accessor]}return buffers}(this.gl,geometry),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function setAttributes(){var attributes=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(utils.a)(attributes))return this;var normalizedAttributes={};for(var name in attributes){var attribute=attributes[name];normalizedAttributes[name]=attribute.getValue?attribute.getValue():attribute}return this.vertexArray.setAttributes(normalizedAttributes),this}},{key:"setUniforms",value:function setUniforms(){var uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,uniforms),this}},{key:"getModuleUniforms",value:function getModuleUniforms(opts){this._checkProgram();var getUniforms=this.programManager.getUniforms(this.program);return getUniforms?getUniforms(opts):{}}},{key:"updateModuleSettings",value:function updateModuleSettings(opts){var uniforms=this.getModuleUniforms(opts||{});return this.setUniforms(uniforms)}},{key:"clear",value:function clear(opts){return Object(classes_clear.a)(this.program.gl,opts),this}},{key:"draw",value:function draw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var logPriority,_opts$moduleSettings=opts.moduleSettings,moduleSettings=void 0===_opts$moduleSettings?null:_opts$moduleSettings,framebuffer=opts.framebuffer,_opts$uniforms=opts.uniforms,uniforms=void 0===_opts$uniforms?{}:_opts$uniforms,_opts$attributes=opts.attributes,attributes=void 0===_opts$attributes?{}:_opts$attributes,_opts$transformFeedba=opts.transformFeedback,transformFeedback=void 0===_opts$transformFeedba?this.transformFeedback:_opts$transformFeedba,_opts$parameters=opts.parameters,parameters=void 0===_opts$parameters?{}:_opts$parameters,_opts$vertexArray=opts.vertexArray,vertexArray=void 0===_opts$vertexArray?this.vertexArray:_opts$vertexArray;this.setAttributes(attributes),this.updateModuleSettings(moduleSettings),this.setUniforms(uniforms),esm.g.priority>=2&&(logPriority=this._logDrawCallStart(2));var drawParams=this.vertexArray.getDrawParams(),_this$props=this.props,_this$props$isIndexed=_this$props.isIndexed,isIndexed=void 0===_this$props$isIndexed?drawParams.isIndexed:_this$props$isIndexed,_this$props$indexType=_this$props.indexType,indexType=void 0===_this$props$indexType?drawParams.indexType:_this$props$indexType,_this$props$indexOffs=_this$props.indexOffset,indexOffset=void 0===_this$props$indexOffs?drawParams.indexOffset:_this$props$indexOffs,_this$props$vertexArr=_this$props.vertexArrayInstanced,vertexArrayInstanced=void 0===_this$props$vertexArr?drawParams.isInstanced:_this$props$vertexArr;vertexArrayInstanced&&!this.isInstanced&&esm.g.warn("Found instanced attributes on non-instanced model",this.id)();var isInstanced=this.isInstanced,instanceCount=this.instanceCount,_this$props2=this.props,_this$props2$onBefore=_this$props2.onBeforeRender,onBeforeRender=void 0===_this$props2$onBefore?NOOP:_this$props2$onBefore,_this$props2$onAfterR=_this$props2.onAfterRender,onAfterRender=void 0===_this$props2$onAfterR?NOOP:_this$props2$onAfterR;onBeforeRender(),this.program.setUniforms(this.uniforms);var didDraw=this.program.draw(Object.assign(DRAW_PARAMS,opts,{logPriority:logPriority,uniforms:null,framebuffer:framebuffer,parameters:parameters,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:vertexArray,transformFeedback:transformFeedback,isIndexed:isIndexed,indexType:indexType,isInstanced:isInstanced,instanceCount:instanceCount,offset:isIndexed?indexOffset:0}));return onAfterRender(),esm.g.priority>=2&&this._logDrawCallEnd(logPriority,vertexArray,framebuffer),didDraw}},{key:"transform",value:function transform(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_opts$discard=opts.discard,discard=void 0===_opts$discard||_opts$discard,feedbackBuffers=opts.feedbackBuffers,_opts$unbindModels=opts.unbindModels,unbindModels=void 0===_opts$unbindModels?[]:_opts$unbindModels,parameters=opts.parameters;feedbackBuffers&&this._setFeedbackBuffers(feedbackBuffers),discard&&(parameters=Object.assign({},parameters,Object(defineProperty.a)({},35977,discard))),unbindModels.forEach((function(model){return model.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},opts,{parameters:parameters}))}finally{unbindModels.forEach((function(model){return model.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function render(){var uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return esm.g.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(uniforms).draw()}},{key:"_setModelProps",value:function _setModelProps(props){Object.assign(this.props,props),"uniforms"in props&&this.setUniforms(props.uniforms),"pickable"in props&&(this.pickable=props.pickable),"instanceCount"in props&&(this.instanceCount=props.instanceCount),"geometry"in props&&this.setGeometry(props.geometry),"attributes"in props&&this.setAttributes(props.attributes),"_feedbackBuffers"in props&&this._setFeedbackBuffers(props._feedbackBuffers)}},{key:"_checkProgram",value:function _checkProgram(){var needsUpdate=this._programDirty||this.programManager.stateHash!==this._programManagerState;if(needsUpdate){var program=this.programProps.program;if(program)this._managedProgram=!1;else{var _this$programProps=this.programProps,vs=_this$programProps.vs,fs=_this$programProps.fs,modules=_this$programProps.modules,inject=_this$programProps.inject,defines=_this$programProps.defines,varyings=_this$programProps.varyings,bufferMode=_this$programProps.bufferMode,transpileToGLSL100=_this$programProps.transpileToGLSL100;program=this.programManager.get({vs:vs,fs:fs,modules:modules,inject:inject,defines:defines,varyings:varyings,bufferMode:bufferMode,transpileToGLSL100:transpileToGLSL100}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Object(assert.a)(program instanceof classes_program.a,"Model needs a program"),this._programDirty=!1,program!==this.program&&(this.program=program,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new vertex_array_VertexArray(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_deleteGeometryBuffers",value:function _deleteGeometryBuffers(){for(var name in this.geometryBuffers){var buffer=this.geometryBuffers[name][0]||this.geometryBuffers[name];buffer instanceof classes_buffer.a&&buffer.delete()}}},{key:"_setAnimationProps",value:function _setAnimationProps(animationProps){if(this.animated){Object(assert.a)(animationProps,"Model.draw(): animated uniforms but no animationProps");var animatedUniforms=this._evaluateAnimateUniforms(animationProps);Object.assign(this.uniforms,animatedUniforms)}}},{key:"_setFeedbackBuffers",value:function _setFeedbackBuffers(){var feedbackBuffers=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(utils.a)(feedbackBuffers))return this;var gl=this.program.gl;return this.transformFeedback=this.transformFeedback||new transform_feedback.a(gl,{program:this.program}),this.transformFeedback.setBuffers(feedbackBuffers),this}},{key:"_logDrawCallStart",value:function _logDrawCallStart(logLevel){var logDrawTimeout=logLevel>3?0:1e4;if(!(Date.now()-this.lastLogTime<logDrawTimeout))return this.lastLogTime=Date.now(),esm.g.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:esm.g.level<=2})(),logLevel}},{key:"_logDrawCallEnd",value:function _logDrawCallEnd(logLevel,vertexArray,uniforms,framebuffer){if(void 0!==logLevel){var attributeTable=function getDebugTableForVertexArray(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},vertexArray=_ref.vertexArray,_ref$header=_ref.header,header=void 0===_ref$header?"Attributes":_ref$header;if(!vertexArray.configuration)return{};var table={};vertexArray.elements&&(table.ELEMENT_ARRAY_BUFFER=getDebugTableRow(vertexArray,vertexArray.elements,null,header));var attributes=vertexArray.values;for(var attributeLocation in attributes){var info=vertexArray._getAttributeInfo(attributeLocation);if(info){var rowHeader="".concat(attributeLocation,": ").concat(info.name),accessor=vertexArray.accessors[info.location];accessor&&(rowHeader="".concat(attributeLocation,": ").concat(getGLSLDeclaration(info.name,accessor))),table[rowHeader]=getDebugTableRow(vertexArray,attributes[attributeLocation],accessor,header)}}return table}({vertexArray:vertexArray,header:"".concat(this.id," attributes"),attributes:this._attributes}),_getDebugTableForUnif=getDebugTableForUniforms({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,uniforms)}),uniformTable=_getDebugTableForUnif.table,unusedTable=_getDebugTableForUnif.unusedTable,unusedCount=_getDebugTableForUnif.unusedCount,_getDebugTableForUnif2=getDebugTableForUniforms({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,uniforms),undefinedOnly:!0}),missingTable=_getDebugTableForUnif2.table;_getDebugTableForUnif2.count>0&&esm.g.log("MISSING UNIFORMS",Object.keys(missingTable))(),unusedCount>0&&esm.g.log("UNUSED UNIFORMS",Object.keys(unusedTable))();var configTable=function getDebugTableForProgramConfiguration(config){var table={},header="Accessors for ".concat(config.id),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=config.attributeInfos[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var attributeInfo=_step.value;if(attributeInfo){var glslDeclaration=debug_program_configuration_getGLSLDeclaration(attributeInfo);table["in ".concat(glslDeclaration)]=Object(defineProperty.a)({},header,JSON.stringify(attributeInfo.accessor))}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=config.varyingInfos[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var varyingInfo=_step2.value;if(varyingInfo){var _glslDeclaration=debug_program_configuration_getGLSLDeclaration(varyingInfo);table["out ".concat(_glslDeclaration)]=Object(defineProperty.a)({},header,JSON.stringify(varyingInfo.accessor))}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return table}(this.vertexArray.configuration);esm.g.table(logLevel,attributeTable)(),esm.g.table(logLevel,uniformTable)(),esm.g.table(logLevel+1,configTable)(),framebuffer&&framebuffer.log({logLevel:2,message:"Rendered to ".concat(framebuffer.id)}),esm.g.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),Model}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return program_manager_ProgramManager}));var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),slicedToArray=__webpack_require__(11),defineProperty=__webpack_require__(0),constants=__webpack_require__(86),assert=__webpack_require__(223),esm_typeof=__webpack_require__(14),TYPE_DEFINITIONS={number:{validate:function validate(value,propType){return Number.isFinite(value)&&(!("max"in propType)||value<=propType.max)&&(!("min"in propType)||value>=propType.min)}},array:{validate:function validate(value,propType){return Array.isArray(value)||ArrayBuffer.isView(value)}}};function parsePropType(propDef){var type=getTypeOf(propDef);return"object"===type?propDef?"type"in propDef?Object.assign({},propDef,TYPE_DEFINITIONS[propDef.type]):"value"in propDef?(type=getTypeOf(propDef.value),Object.assign({type:type},propDef,TYPE_DEFINITIONS[type])):{type:"object",value:propDef}:{type:"object",value:null}:Object.assign({type:type,value:propDef},TYPE_DEFINITIONS[type])}function getTypeOf(value){return Array.isArray(value)||ArrayBuffer.isView(value)?"array":Object(esm_typeof.a)(value)}var shader_module_ShaderModule=function(){function ShaderModule(_ref){var name=_ref.name,vs=_ref.vs,fs=_ref.fs,_ref$dependencies=_ref.dependencies,dependencies=void 0===_ref$dependencies?[]:_ref$dependencies,uniforms=_ref.uniforms,getUniforms=_ref.getUniforms,_ref$deprecations=_ref.deprecations,deprecations=void 0===_ref$deprecations?[]:_ref$deprecations,_ref$defines=_ref.defines,defines=void 0===_ref$defines?{}:_ref$defines,_ref$inject=_ref.inject,inject=void 0===_ref$inject?{}:_ref$inject,vertexShader=_ref.vertexShader,fragmentShader=_ref.fragmentShader;Object(classCallCheck.a)(this,ShaderModule),Object(assert.a)("string"==typeof name),this.name=name,this.vs=vs||vertexShader,this.fs=fs||fragmentShader,this.getModuleUniforms=getUniforms,this.dependencies=dependencies,this.deprecations=this._parseDeprecationDefinitions(deprecations),this.defines=defines,this.injections=function normalizeInjections(injections){var result={vs:{},fs:{}};for(var hook in injections){var injection=injections[hook],stage=hook.slice(0,2);"string"==typeof injection&&(injection={injection:injection}),result[stage][hook]=injection}return result}(inject),uniforms&&(this.uniforms=function parsePropTypes(propDefs){var propTypes={};for(var propName in propDefs){var propType=parsePropType(propDefs[propName]);propTypes[propName]=propType}return propTypes}(uniforms))}return Object(createClass.a)(ShaderModule,[{key:"getModuleSource",value:function getModuleSource(type){var moduleSource;switch(type){case"vs":moduleSource=this.vs||"";break;case"fs":moduleSource=this.fs||"";break;default:Object(assert.a)(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(moduleSource,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function getUniforms(opts,uniforms){return this.getModuleUniforms?this.getModuleUniforms(opts,uniforms):this.uniforms?this._defaultGetUniforms(opts):{}}},{key:"getDefines",value:function getDefines(){return this.defines}},{key:"checkDeprecations",value:function checkDeprecations(shaderSource,log){this.deprecations.forEach((function(def){def.regex.test(shaderSource)&&(def.deprecated?log.deprecated(def.old,def.new)():log.removed(def.old,def.new)())}))}},{key:"_parseDeprecationDefinitions",value:function _parseDeprecationDefinitions(deprecations){return deprecations.forEach((function(def){switch(def.type){case"function":def.regex=new RegExp("\\b".concat(def.old,"\\("));break;default:def.regex=new RegExp("".concat(def.type," ").concat(def.old,";"))}})),deprecations}},{key:"_defaultGetUniforms",value:function _defaultGetUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},uniforms={},propTypes=this.uniforms;for(var key in propTypes){var propDef=propTypes[key];key in opts&&!propDef.private?(propDef.validate&&Object(assert.a)(propDef.validate(opts[key],propDef),"".concat(this.name,": invalid ").concat(key)),uniforms[key]=opts[key]):uniforms[key]=propDef.value}return uniforms}}]),ShaderModule}();function resolveModules(modules){return getShaderDependencies(function instantiateModules(modules,seen){return modules.map((function(module){return module instanceof shader_module_ShaderModule||(Object(assert.a)("string"!=typeof module,"Shader module use by name is deprecated. Import shader module '".concat(module,"' and use it directly.")),Object(assert.a)(module.name,"shader module has no name"),(module=new shader_module_ShaderModule(module)).dependencies=instantiateModules(module.dependencies)),module}))}(modules))}function getShaderDependencies(modules){var moduleMap={},moduleDepth={};return getDependencyGraph({modules:modules,level:0,moduleMap:moduleMap,moduleDepth:moduleDepth}),Object.keys(moduleDepth).sort((function(a,b){return moduleDepth[b]-moduleDepth[a]})).map((function(name){return moduleMap[name]}))}function getDependencyGraph(_ref){var modules=_ref.modules,level=_ref.level,moduleMap=_ref.moduleMap,moduleDepth=_ref.moduleDepth;if(level>=5)throw new Error("Possible loop in shader dependency graph");var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=modules[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var module=_step.value;moduleMap[module.name]=module,(void 0===moduleDepth[module.name]||moduleDepth[module.name]<level)&&(moduleDepth[module.name]=level)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=modules[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _module=_step2.value;_module.dependencies&&getDependencyGraph({modules:_module.dependencies,level:level+1,moduleMap:moduleMap,moduleDepth:moduleDepth})}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}function isOldIE(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},navigator="undefined"!=typeof window&&window.navigator||{},userAgent=opts.userAgent||navigator.userAgent||"",isMSIE=-1!==userAgent.indexOf("MSIE "),isTrident=-1!==userAgent.indexOf("Trident/");return isMSIE||isTrident}var WEBGL_FEATURES={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},FEATURES={};Object.keys(WEBGL_FEATURES).forEach((function(key){FEATURES[key]=key}));var compiledGlslExtensions={};function canCompileGLGSExtension(gl,cap){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},feature=WEBGL_FEATURES[cap];if(Object(assert.a)(feature,cap),!isOldIE(opts))return!0;if(cap in compiledGlslExtensions)return compiledGlslExtensions[cap];var extensionName=feature[0],behavior=opts.behavior||"enable",source="#extension GL_".concat(extensionName," : ").concat(behavior,"\nvoid main(void) {}"),shader=gl.createShader(35633);gl.shaderSource(shader,source),gl.compileShader(shader);var canCompile=gl.getShaderParameter(shader,35713);return gl.deleteShader(shader),compiledGlslExtensions[cap]=canCompile,canCompile}function getFeature(gl,cap){var feature=WEBGL_FEATURES[cap];Object(assert.a)(feature,cap);var extensionName=function isWebGL2(gl){return Boolean(gl&&2===gl._version)}(gl)&&feature[1]||feature[0],value="string"==typeof extensionName?Boolean(gl.getExtension(extensionName)):extensionName;return Object(assert.a)(!1===value||!0===value),value}function hasFeatures(gl,features){return(features=Array.isArray(features)?features:[features]).every((function(feature){return getFeature(gl,feature)}))}var inject_shader=__webpack_require__(225);function transpileShader(source,targetGLSLVersion,isVertex){switch(targetGLSLVersion){case 300:return isVertex?function convertVertexShaderTo300(source){return source.replace(/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n").replace(/^[ \t]*attribute[ \t]+(.+;)/gm,"in $1").replace(/^[ \t]*varying[ \t]+(.+;)/gm,"out $1").replace(/\btexture2D\(/g,"texture(").replace(/\btextureCube\(+/g,"texture(").replace(/\btexture2DLodEXT\(/g,"textureLod(").replace(/\btextureCubeLodEXT\(/g,"textureLod(")}(source):function convertFragmentShaderTo300(source){return source.replace(/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n").replace(/^[ \t]*varying[ \t]+(.+;)/gm,"in $1").replace(/\btexture2D\(/g,"texture(").replace(/\btextureCube\(/g,"texture(").replace(/\btexture2DLodEXT\(/g,"textureLod(").replace(/\btextureCubeLodEXT\(/g,"textureLod(")}(source);case 100:return isVertex?function convertVertexShaderTo100(source){return source.replace(/^#version[ \t]+300[ \t]+es/,"#version 100").replace(/^[ \t]*in[ \t]+(.+;)/gm,"attribute $1").replace(/^[ \t]*out[ \t]+(.+;)/gm,"varying $1").replace(/\btexture\(/g,"texture2D(").replace(/\btextureLod\(/g,"texture2DLodEXT(")}(source):function convertFragmentShaderTo100(source){var outputMatch=(source=source.replace(/^#version[ \t]+300[ \t]+es/,"#version 100").replace(/^[ \t]*in[ \t]+/gm,"varying ").replace(/\btexture\(/g,"texture2D(").replace(/\btextureLod\(/g,"texture2DLodEXT(")).match(FS_OUTPUT_REGEX);if(outputMatch){var outputName=outputMatch[1];source=source.replace(FS_OUTPUT_REGEX,"").replace(new RegExp("\\b".concat(outputName,"\\b"),"g"),"gl_FragColor")}return source}(source);default:throw new Error("unknown GLSL version ".concat(targetGLSLVersion))}}var _SHADER_TYPE,FS_OUTPUT_REGEX=/^[ \t]*out[ \t]+vec4[ \t]+(\w+)[ \t]*;\s+/m;var INJECT_SHADER_DECLARATIONS="\n\n".concat(inject_shader.a,"\n\n"),SHADER_TYPE=(_SHADER_TYPE={},Object(defineProperty.a)(_SHADER_TYPE,constants.b,"vertex"),Object(defineProperty.a)(_SHADER_TYPE,constants.a,"fragment"),_SHADER_TYPE);function assembleShaders(gl,opts){var vs=opts.vs,fs=opts.fs,modules=resolveModules(opts.modules||[]);return{gl:gl,vs:assembleShader(gl,Object.assign({},opts,{source:vs,type:constants.b,modules:modules})),fs:assembleShader(gl,Object.assign({},opts,{source:fs,type:constants.a,modules:modules})),getUniforms:assembleGetUniforms(modules)}}function assembleShader(gl,_ref){var id=_ref.id,source=_ref.source,type=_ref.type,modules=_ref.modules,_ref$defines=_ref.defines,defines=void 0===_ref$defines?{}:_ref$defines,_ref$hookFunctions=_ref.hookFunctions,hookFunctions=void 0===_ref$hookFunctions?[]:_ref$hookFunctions,_ref$inject=_ref.inject,inject=void 0===_ref$inject?{}:_ref$inject,_ref$transpileToGLSL=_ref.transpileToGLSL100,transpileToGLSL100=void 0!==_ref$transpileToGLSL&&_ref$transpileToGLSL,_ref$prologue=_ref.prologue,prologue=void 0===_ref$prologue||_ref$prologue,log=_ref.log;Object(assert.a)("string"==typeof source,"shader source must be a string");var isVertex=type===constants.b,sourceLines=source.split("\n"),glslVersion=100,versionLine="",coreSource=source;0===sourceLines[0].indexOf("#version ")?(glslVersion=300,versionLine=sourceLines[0],coreSource=sourceLines.slice(1).join("\n")):versionLine="#version ".concat(glslVersion);var allDefines={};modules.forEach((function(module){Object.assign(allDefines,module.getDefines())})),Object.assign(allDefines,defines);var assembledSource=prologue?"".concat(versionLine,"\n").concat(function getShaderName(_ref3){var id=_ref3.id,source=_ref3.source,type=_ref3.type;return id&&"string"==typeof id&&-1===source.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(id,"_").concat(SHADER_TYPE[type],"\n\n"):""}({id:id,source:source,type:type}),"\n").concat(function getShaderType(_ref2){var type=_ref2.type;return"\n#define SHADER_TYPE_".concat(SHADER_TYPE[type].toUpperCase(),"\n")}({type:type}),"\n").concat(function getPlatformShaderDefines(gl){switch(function getContextInfo(gl){var info=gl.getExtension("WEBGL_debug_renderer_info"),vendor=gl.getParameter(info&&info.UNMASKED_VENDOR_WEBGL||7936),renderer=gl.getParameter(info&&info.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:function identifyGPUVendor(vendor,renderer){if(vendor.match(/NVIDIA/i)||renderer.match(/NVIDIA/i))return"NVIDIA";if(vendor.match(/INTEL/i)||renderer.match(/INTEL/i))return"INTEL";if(vendor.match(/AMD/i)||renderer.match(/AMD/i)||vendor.match(/ATI/i)||renderer.match(/ATI/i))return"AMD";return"UNKNOWN GPU"}(vendor,renderer),vendor:vendor,renderer:renderer,version:gl.getParameter(7938),shadingLanguageVersion:gl.getParameter(35724)}}(gl).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(gl),"\n").concat(function getVersionDefines(gl,glslVersion,isFragment){var versionDefines="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return hasFeatures(gl,FEATURES.GLSL_FRAG_DEPTH)&&(versionDefines+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),hasFeatures(gl,FEATURES.GLSL_DERIVATIVES)&&canCompileGLGSExtension(gl,FEATURES.GLSL_DERIVATIVES)&&(versionDefines+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),hasFeatures(gl,FEATURES.GLSL_FRAG_DATA)&&canCompileGLGSExtension(gl,FEATURES.GLSL_FRAG_DATA,{behavior:"require"})&&(versionDefines+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),hasFeatures(gl,FEATURES.GLSL_TEXTURE_LOD)&&(versionDefines+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),versionDefines}(gl),"\n").concat(function getApplicationDefines(){var defines=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},count=0,sourceText="";for(var define in defines){0===count&&(sourceText+="\n// APPLICATION DEFINES\n"),count++;var value=defines[define];(value||Number.isFinite(value))&&(sourceText+="#define ".concat(define.toUpperCase()," ").concat(defines[define],"\n"))}0===count&&(sourceText+="\n");return sourceText}(allDefines),"\n").concat(isVertex?"":"precision highp float;\n\n","\n"):"".concat(versionLine,"\n");hookFunctions=function normalizeHookFunctions(hookFunctions){var result={vs:{},fs:{}};return hookFunctions.forEach((function(hook){var opts;"string"!=typeof hook?hook=(opts=hook).hook:opts={};var _hook$split=(hook=hook.trim()).split(":"),_hook$split2=Object(slicedToArray.a)(_hook$split,2),stage=_hook$split2[0],signature=_hook$split2[1],name=hook.replace(/\(.+/,"");result[stage][name]=Object.assign(opts,{signature:signature})})),result}(hookFunctions);var hookInjections={},declInjections={},mainInjections={};for(var key in inject){var injection="string"==typeof inject[key]?{injection:inject[key],order:0}:inject[key],match=key.match(/^(v|f)s:(#)?([\w-]+)$/);if(match){var hash=match[2],name=match[3];hash?"decl"===name?declInjections[key]=[injection]:mainInjections[key]=[injection]:hookInjections[key]=[injection]}else mainInjections[key]=[injection]}var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=modules[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var module=_step.value;log&&module.checkDeprecations(coreSource,log),assembledSource+=module.getModuleSource(type,glslVersion);var injections=module.injections[type];for(var _key in injections){var _match=_key.match(/^(v|f)s:#([\w-]+)$/);if(_match){var injectionType="decl"===_match[2]?declInjections:mainInjections;injectionType[_key]=injectionType[_key]||[],injectionType[_key].push(injections[_key])}else hookInjections[_key]=hookInjections[_key]||[],hookInjections[_key].push(injections[_key])}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return assembledSource+=INJECT_SHADER_DECLARATIONS,assembledSource=Object(inject_shader.c)(assembledSource,type,declInjections),assembledSource+=function getHookFunctions(hookFunctions,hookInjections){var result="";for(var hookName in hookFunctions){var hookFunction=hookFunctions[hookName];if(result+="void ".concat(hookFunction.signature," {\n"),hookFunction.header&&(result+="  ".concat(hookFunction.header)),hookInjections[hookName]){var injections=hookInjections[hookName];injections.sort((function(a,b){return a.order-b.order}));var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=injections[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var injection=_step3.value;result+="  ".concat(injection.injection,"\n")}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}hookFunction.footer&&(result+="  ".concat(hookFunction.footer)),result+="}\n"}return result}(hookFunctions[type],hookInjections),assembledSource+=coreSource,assembledSource=transpileShader(assembledSource=Object(inject_shader.c)(assembledSource,type,mainInjections),transpileToGLSL100?100:glslVersion,isVertex)}function assembleGetUniforms(modules){return function getUniforms(opts){var uniforms={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=modules[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var moduleUniforms=_step2.value.getUniforms(opts,uniforms);Object.assign(uniforms,moduleUniforms)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return uniforms}}var program=__webpack_require__(818),program_manager_ProgramManager=function(){function ProgramManager(gl){Object(classCallCheck.a)(this,ProgramManager),this.gl=gl,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return Object(createClass.a)(ProgramManager,null,[{key:"getDefaultProgramManager",value:function getDefaultProgramManager(gl){return gl.luma=gl.luma||{},gl.luma.defaultProgramManager=gl.luma.defaultProgramManager||new ProgramManager(gl),gl.luma.defaultProgramManager}}]),Object(createClass.a)(ProgramManager,[{key:"addDefaultModule",value:function addDefaultModule(module){this._defaultModules.find((function(m){return m.name===module.name}))||this._defaultModules.push(module),this.stateHash++}},{key:"removeDefaultModule",value:function removeDefaultModule(module){var moduleName="string"==typeof module?module:module.name;this._defaultModules=this._defaultModules.filter((function(m){return m.name!==moduleName})),this.stateHash++}},{key:"addShaderHook",value:function addShaderHook(hook,opts){opts&&(hook=Object.assign(opts,{hook:hook})),this._hookFunctions.push(hook),this.stateHash++}},{key:"get",value:function get(){var _this=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_props$vs=props.vs,vs=void 0===_props$vs?"":_props$vs,_props$fs=props.fs,fs=void 0===_props$fs?"":_props$fs,_props$defines=props.defines,defines=void 0===_props$defines?{}:_props$defines,_props$inject=props.inject,inject=void 0===_props$inject?{}:_props$inject,_props$varyings=props.varyings,varyings=void 0===_props$varyings?[]:_props$varyings,_props$bufferMode=props.bufferMode,bufferMode=void 0===_props$bufferMode?35981:_props$bufferMode,_props$transpileToGLS=props.transpileToGLSL100,transpileToGLSL100=void 0!==_props$transpileToGLS&&_props$transpileToGLS,modules=this._getModuleList(props.modules),vsHash=this._getHash(vs),fsHash=this._getHash(fs),moduleHashes=modules.map((function(m){return _this._getHash(m.name)})).sort(),varyingHashes=varyings.map((function(v){return _this._getHash(v)})),defineKeys=Object.keys(defines).sort(),injectKeys=Object.keys(inject).sort(),defineHashes=[],injectHashes=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=defineKeys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;defineHashes.push(this._getHash(key)),defineHashes.push(this._getHash(defines[key]))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=injectKeys[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _key=_step2.value;injectHashes.push(this._getHash(_key)),injectHashes.push(this._getHash(inject[_key]))}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var hash="".concat(vsHash,"/").concat(fsHash,"D").concat(defineHashes.join("/"),"M").concat(moduleHashes.join("/"),"I").concat(injectHashes.join("/"),"V").concat(varyingHashes.join("/"),"H").concat(this.stateHash,"B").concat(bufferMode).concat(transpileToGLSL100?"T":"");if(!this._programCache[hash]){var assembled=assembleShaders(this.gl,{vs:vs,fs:fs,modules:modules,inject:inject,defines:defines,hookFunctions:this._hookFunctions,transpileToGLSL100:transpileToGLSL100});this._programCache[hash]=new program.a(this.gl,{hash:hash,vs:assembled.vs,fs:assembled.fs,varyings:varyings,bufferMode:bufferMode}),this._getUniforms[hash]=assembled.getUniforms||function(x){},this._useCounts[hash]=0}return this._useCounts[hash]++,this._programCache[hash]}},{key:"getUniforms",value:function getUniforms(program){return this._getUniforms[program.hash]||null}},{key:"release",value:function release(program){var hash=program.hash;this._useCounts[hash]--,0===this._useCounts[hash]&&(this._programCache[hash].delete(),delete this._programCache[hash],delete this._getUniforms[hash],delete this._useCounts[hash])}},{key:"_getHash",value:function _getHash(key){return void 0===this._hashes[key]&&(this._hashes[key]=this._hashCounter++),this._hashes[key]}},{key:"_getModuleList",value:function _getModuleList(){for(var appModules=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],modules=new Array(this._defaultModules.length+appModules.length),seen={},count=0,i=0,len=this._defaultModules.length;i<len;++i){var module=this._defaultModules[i],name=module.name;modules[count++]=module,seen[name]=!0}for(var _i=0,_len=appModules.length;_i<_len;++_i){var _module=appModules[_i],_name=_module.name;seen[_name]||(modules[count++]=_module,seen[_name]=!0)}return modules.length=count,modules}}]),ProgramManager}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return src_nest}));function Map(){}function map(object,f){var map=new Map;if(object instanceof Map)object.each((function(value,key){map.set(key,value)}));else if(Array.isArray(object)){var o,i=-1,n=object.length;if(null==f)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f(o=object[i],i,object),o)}else if(object)for(var key in object)map.set(key,object[key]);return map}Map.prototype=map.prototype={constructor:Map,has:function(key){return"$"+key in this},get:function(key){return this["$"+key]},set:function(key,value){return this["$"+key]=value,this},remove:function(key){var property="$"+key;return property in this&&delete this[property]},clear:function(){for(var property in this)"$"===property[0]&&delete this[property]},keys:function(){var keys=[];for(var property in this)"$"===property[0]&&keys.push(property.slice(1));return keys},values:function(){var values=[];for(var property in this)"$"===property[0]&&values.push(this[property]);return values},entries:function(){var entries=[];for(var property in this)"$"===property[0]&&entries.push({key:property.slice(1),value:this[property]});return entries},size:function(){var size=0;for(var property in this)"$"===property[0]&&++size;return size},empty:function(){for(var property in this)if("$"===property[0])return!1;return!0},each:function(f){for(var property in this)"$"===property[0]&&f(this[property],property.slice(1),this)}};var src_map=map,src_nest=function(){var sortValues,rollup,nest,keys=[],sortKeys=[];function apply(array,depth,createResult,setResult){if(depth>=keys.length)return null!=sortValues&&array.sort(sortValues),null!=rollup?rollup(array):array;for(var keyValue,value,values,i=-1,n=array.length,key=keys[depth++],valuesByKey=src_map(),result=createResult();++i<n;)(values=valuesByKey.get(keyValue=key(value=array[i])+""))?values.push(value):valuesByKey.set(keyValue,[value]);return valuesByKey.each((function(values,key){setResult(result,key,apply(values,depth,createResult,setResult))})),result}return nest={object:function(array){return apply(array,0,createObject,setObject)},map:function(array){return apply(array,0,createMap,setMap)},entries:function(array){return function entries(map,depth){if(++depth>keys.length)return map;var array,sortKey=sortKeys[depth-1];return null!=rollup&&depth>=keys.length?array=map.entries():(array=[],map.each((function(v,k){array.push({key:k,values:entries(v,depth)})}))),null!=sortKey?array.sort((function(a,b){return sortKey(a.key,b.key)})):array}(apply(array,0,createMap,setMap),0)},key:function(d){return keys.push(d),nest},sortKeys:function(order){return sortKeys[keys.length-1]=order,nest},sortValues:function(order){return sortValues=order,nest},rollup:function(f){return rollup=f,nest}}};function createObject(){return{}}function setObject(object,key,value){object[key]=value}function createMap(){return src_map()}function setMap(map,key,value){map.set(key,value)}function Set(){}var proto=src_map.prototype;function set(object,f){var set=new Set;if(object instanceof Set)object.each((function(value){set.add(value)}));else if(object){var i=-1,n=object.length;if(null==f)for(;++i<n;)set.add(object[i]);else for(;++i<n;)set.add(f(object[i],i,object))}return set}Set.prototype=set.prototype={constructor:Set,has:proto.has,add:function(value){return this["$"+(value+="")]=value,this},remove:proto.remove,clear:proto.clear,values:proto.keys,size:proto.size,empty:proto.empty,each:proto.each}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return cloneTextureFrom})),__webpack_require__.d(__webpack_exports__,"b",(function(){return toFramebuffer}));var defineProperty=__webpack_require__(0),texture_2d=__webpack_require__(148),regenerator=__webpack_require__(10),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(17),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(7),getPrototypeOf=__webpack_require__(3),assertThisInitialized=__webpack_require__(6),inherits=__webpack_require__(8),esm=__webpack_require__(9),classes_texture=__webpack_require__(60),webgl_checks=__webpack_require__(102),FACES=[34069,34070,34071,34072,34073,34074],texture_cube_TextureCube=function(_Texture){function TextureCube(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,TextureCube),Object(webgl_checks.b)(gl),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(TextureCube).call(this,gl,Object.assign({},props,{target:34067})))).initialize(props),Object.seal(Object(assertThisInitialized.a)(_this)),_this}var _setCubeMapImageData;return Object(inherits.a)(TextureCube,_Texture),Object(createClass.a)(TextureCube,[{key:"initialize",value:function initialize(){var _this2=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_props$mipmaps=props.mipmaps,mipmaps=void 0===_props$mipmaps||_props$mipmaps,_props$parameters=props.parameters,parameters=void 0===_props$parameters?{}:_props$parameters;this.opts=props,this.setCubeMapImageData(props).then((function(){_this2.loaded=!0,mipmaps&&_this2.generateMipmap(props),_this2.setParameters(parameters)}))}},{key:"subImage",value:function subImage(_ref){var face=_ref.face,data=_ref.data,_ref$x=_ref.x,x=void 0===_ref$x?0:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?0:_ref$y,_ref$mipmapLevel=_ref.mipmapLevel,mipmapLevel=void 0===_ref$mipmapLevel?0:_ref$mipmapLevel;return this._subImage({target:face,data:data,x:x,y:y,mipmapLevel:mipmapLevel})}},{key:"setCubeMapImageData",value:(_setCubeMapImageData=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(_ref2){var width,height,pixels,data,_ref2$border,border,_ref2$format,format,_ref2$type,type,gl,imageDataMap,resolvedFaces,_this3=this;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return width=_ref2.width,height=_ref2.height,pixels=_ref2.pixels,data=_ref2.data,_ref2$border=_ref2.border,border=void 0===_ref2$border?0:_ref2$border,_ref2$format=_ref2.format,format=void 0===_ref2$format?6408:_ref2$format,_ref2$type=_ref2.type,type=void 0===_ref2$type?5121:_ref2$type,gl=this.gl,imageDataMap=pixels||data,_context.next=5,Promise.all(FACES.map((function(face){var facePixels=imageDataMap[face];return Promise.all(Array.isArray(facePixels)?facePixels:[facePixels])})));case 5:resolvedFaces=_context.sent,this.bind(),FACES.forEach((function(face,index){resolvedFaces[index].length>1&&!1!==_this3.opts.mipmaps&&esm.g.warn("".concat(_this3.id," has mipmap and multiple LODs."))(),resolvedFaces[index].forEach((function(image,lodLevel){width&&height?gl.texImage2D(face,lodLevel,format,width,height,border,format,type,image):gl.texImage2D(face,lodLevel,format,format,type,image)}))})),this.unbind();case 9:case"end":return _context.stop()}}),_callee,this)}))),function setCubeMapImageData(_x){return _setCubeMapImageData.apply(this,arguments)})},{key:"setImageDataForFace",value:function setImageDataForFace(options){var _this4=this,face=options.face,width=options.width,height=options.height,pixels=options.pixels,data=options.data,_options$border=options.border,border=void 0===_options$border?0:_options$border,_options$format=options.format,format=void 0===_options$format?6408:_options$format,_options$type=options.type,type=void 0===_options$type?5121:_options$type,gl=this.gl,imageData=pixels||data;return this.bind(),imageData instanceof Promise?imageData.then((function(resolvedImageData){return _this4.setImageDataForFace(Object.assign({},options,{face:face,data:resolvedImageData,pixels:resolvedImageData}))})):this.width||this.height?gl.texImage2D(face,0,format,width,height,border,format,type,imageData):gl.texImage2D(face,0,format,format,type,imageData),this}}]),TextureCube}(classes_texture.a);texture_cube_TextureCube.FACES=FACES;var texture_formats=__webpack_require__(99),buffer=__webpack_require__(41),texture_3d_Texture3D=function(_Texture){function Texture3D(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Texture3D),Object(webgl_checks.a)(gl),props=Object.assign({depth:1},props,{target:32879,unpackFlipY:!1}),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Texture3D).call(this,gl,props))).initialize(props),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(Texture3D,_Texture),Object(createClass.a)(Texture3D,null,[{key:"isSupported",value:function isSupported(gl){return Object(esm.f)(gl)}}]),Object(createClass.a)(Texture3D,[{key:"setImageData",value:function setImageData(_ref){var _this2=this,_ref$level=_ref.level,level=void 0===_ref$level?0:_ref$level,_ref$dataFormat=_ref.dataFormat,dataFormat=void 0===_ref$dataFormat?6408:_ref$dataFormat,width=_ref.width,height=_ref.height,_ref$depth=_ref.depth,depth=void 0===_ref$depth?1:_ref$depth,_ref$border=_ref.border,border=void 0===_ref$border?0:_ref$border,format=_ref.format,_ref$type=_ref.type,type=void 0===_ref$type?5121:_ref$type,_ref$offset=_ref.offset,offset=void 0===_ref$offset?0:_ref$offset,data=_ref.data,_ref$parameters=_ref.parameters,parameters=void 0===_ref$parameters?{}:_ref$parameters;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Object(esm.k)(this.gl,parameters,(function(){ArrayBuffer.isView(data)&&_this2.gl.texImage3D(_this2.target,level,dataFormat,width,height,depth,border,format,type,data),data instanceof buffer.a&&(_this2.gl.bindBuffer(35052,data.handle),_this2.gl.texImage3D(_this2.target,level,dataFormat,width,height,depth,border,format,type,offset))})),data&&data.byteLength)this._trackAllocatedMemory(data.byteLength,"Texture");else{var channels=texture_formats.a[this.dataFormat]||4,channelSize=texture_formats.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*channels*channelSize,"Texture")}return this.loaded=!0,this}}]),Texture3D}(classes_texture.a),classes_framebuffer=__webpack_require__(82),assert=__webpack_require__(23);function cloneTextureFrom(refTexture,overrides){Object(assert.a)(refTexture instanceof texture_2d.a||refTexture instanceof texture_cube_TextureCube||refTexture instanceof texture_3d_Texture3D);var TextureType=refTexture.constructor,gl=refTexture.gl,width=refTexture.width,height=refTexture.height,format=refTexture.format,type=refTexture.type,dataFormat=refTexture.dataFormat,border=refTexture.border,mipmaps=refTexture.mipmaps;return new TextureType(gl,Object.assign({width:width,height:height,format:format,type:type,dataFormat:dataFormat,border:border,mipmaps:mipmaps},overrides))}function toFramebuffer(texture,opts){var gl=texture.gl,width=texture.width,height=texture.height,id=texture.id;return new classes_framebuffer.a(gl,Object.assign({},opts,{id:"framebuffer-for-".concat(id),width:width,height:height,attachments:Object(defineProperty.a)({},36064,texture)}))}},,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(184),__webpack_require__(436),__webpack_require__(561)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(437)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(438),__webpack_require__(439),__webpack_require__(440)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){var isRegex,isString,$Array=Array,ArrayPrototype=$Array.prototype,$Object=Object,ObjectPrototype=$Object.prototype,$Function=Function,FunctionPrototype=$Function.prototype,$String=String,StringPrototype=$String.prototype,$Number=Number,NumberPrototype=$Number.prototype,array_slice=ArrayPrototype.slice,array_splice=ArrayPrototype.splice,array_push=ArrayPrototype.push,array_unshift=ArrayPrototype.unshift,array_concat=ArrayPrototype.concat,array_join=ArrayPrototype.join,call=FunctionPrototype.call,apply=FunctionPrototype.apply,max=Math.max,min=Math.min,to_string=ObjectPrototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,fnToStr=Function.prototype.toString,constructorRegex=/^\s*class /,isES6ClassFn=function isES6ClassFn(value){try{var spaceStripped=fnToStr.call(value).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return constructorRegex.test(spaceStripped)}catch(e){return!1}},tryFunctionObject=function tryFunctionObject(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}},fnClass="[object Function]",genClass="[object GeneratorFunction]",isCallable=function isCallable(value){if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if(hasToStringTag)return tryFunctionObject(value);if(isES6ClassFn(value))return!1;var strClass=to_string.call(value);return strClass===fnClass||strClass===genClass},regexExec=RegExp.prototype.exec,tryRegexExec=function tryRegexExec(value){try{return regexExec.call(value),!0}catch(e){return!1}},regexClass="[object RegExp]";isRegex=function isRegex(value){return"object"==typeof value&&(hasToStringTag?tryRegexExec(value):to_string.call(value)===regexClass)};var strValue=String.prototype.valueOf,tryStringObject=function tryStringObject(value){try{return strValue.call(value),!0}catch(e){return!1}},stringClass="[object String]";isString=function isString(value){return"string"==typeof value||"object"==typeof value&&(hasToStringTag?tryStringObject(value):to_string.call(value)===stringClass)};var supportsDescriptors=$Object.defineProperty&&function(){try{var obj={};for(var _ in $Object.defineProperty(obj,"x",{enumerable:!1,value:obj}),obj)return!1;return obj.x===obj}catch(e){return!1}}(),defineProperties=(has=ObjectPrototype.hasOwnProperty,defineProperty=supportsDescriptors?function(object,name,method,forceAssign){!forceAssign&&name in object||$Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:method})}:function(object,name,method,forceAssign){!forceAssign&&name in object||(object[name]=method)},function defineProperties(object,map,forceAssign){for(var name in map)has.call(map,name)&&defineProperty(object,name,map[name],forceAssign)}),isPrimitive=function isPrimitive(input){var type=typeof input;return null===input||"object"!==type&&"function"!==type},isActualNaN=$Number.isNaN||function isActualNaN(x){return x!=x},ES={ToInteger:function ToInteger(num){var n=+num;return isActualNaN(n)?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n},ToPrimitive:function ToPrimitive(input){var val,valueOf,toStr;if(isPrimitive(input))return input;if(valueOf=input.valueOf,isCallable(valueOf)&&(val=valueOf.call(input),isPrimitive(val)))return val;if(toStr=input.toString,isCallable(toStr)&&(val=toStr.call(input),isPrimitive(val)))return val;throw new TypeError},ToObject:function(o){if(null==o)throw new TypeError("can't convert "+o+" to object");return $Object(o)},ToUint32:function ToUint32(x){return x>>>0}},Empty=function Empty(){};var has,defineProperty;defineProperties(FunctionPrototype,{bind:function bind(that){var target=this;if(!isCallable(target))throw new TypeError("Function.prototype.bind called on incompatible "+target);for(var bound,args=array_slice.call(arguments,1),binder=function(){if(this instanceof bound){var result=apply.call(target,this,array_concat.call(args,array_slice.call(arguments)));return $Object(result)===result?result:this}return apply.call(target,that,array_concat.call(args,array_slice.call(arguments)))},boundLength=max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)array_push.call(boundArgs,"$"+i);return bound=$Function("binder","return function ("+array_join.call(boundArgs,",")+"){ return binder.apply(this, arguments); }")(binder),target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound}});var owns=call.bind(ObjectPrototype.hasOwnProperty),toStr=call.bind(ObjectPrototype.toString),arraySlice=call.bind(array_slice),arraySliceApply=apply.bind(array_slice);if("object"==typeof document&&document&&document.documentElement)try{arraySlice(document.documentElement.childNodes)}catch(e){var origArraySlice=arraySlice,origArraySliceApply=arraySliceApply;arraySlice=function arraySliceIE(arr){for(var r=[],i=arr.length;i-- >0;)r[i]=arr[i];return origArraySliceApply(r,origArraySlice(arguments,1))},arraySliceApply=function arraySliceApplyIE(arr,args){return origArraySliceApply(arraySlice(arr),args)}}var strSlice=call.bind(StringPrototype.slice),strSplit=call.bind(StringPrototype.split),strIndexOf=call.bind(StringPrototype.indexOf),pushCall=call.bind(array_push),isEnum=call.bind(ObjectPrototype.propertyIsEnumerable),arraySort=call.bind(ArrayPrototype.sort),isArray=$Array.isArray||function isArray(obj){return"[object Array]"===toStr(obj)},hasUnshiftReturnValueBug=1!==[].unshift(0);defineProperties(ArrayPrototype,{unshift:function(){return array_unshift.apply(this,arguments),this.length}},hasUnshiftReturnValueBug),defineProperties($Array,{isArray:isArray});var boxedString=$Object("a"),splitString="a"!==boxedString[0]||!(0 in boxedString),properlyBoxesContext=function properlyBoxed(method){var properlyBoxesNonStrict=!0,properlyBoxesStrict=!0,threwException=!1;if(method)try{method.call("foo",(function(_,__,context){"object"!=typeof context&&(properlyBoxesNonStrict=!1)})),method.call([1],(function(){properlyBoxesStrict="string"==typeof this}),"x")}catch(e){threwException=!0}return!!method&&!threwException&&properlyBoxesNonStrict&&properlyBoxesStrict};defineProperties(ArrayPrototype,{forEach:function forEach(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,i=-1,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++i<length;)i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object))}},!properlyBoxesContext(ArrayPrototype.forEach)),defineProperties(ArrayPrototype,{map:function map(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=$Array(length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.map callback must be a function");for(var i=0;i<length;i++)i in self&&(result[i]=void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object));return result}},!properlyBoxesContext(ArrayPrototype.map)),defineProperties(ArrayPrototype,{filter:function filter(callbackfn){var value,T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=[];if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.filter callback must be a function");for(var i=0;i<length;i++)i in self&&(value=self[i],(void 0===T?callbackfn(value,i,object):callbackfn.call(T,value,i,object))&&pushCall(result,value));return result}},!properlyBoxesContext(ArrayPrototype.filter)),defineProperties(ArrayPrototype,{every:function every(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.every callback must be a function");for(var i=0;i<length;i++)if(i in self&&!(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!1;return!0}},!properlyBoxesContext(ArrayPrototype.every)),defineProperties(ArrayPrototype,{some:function some(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.some callback must be a function");for(var i=0;i<length;i++)if(i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!0;return!1}},!properlyBoxesContext(ArrayPrototype.some));var reduceCoercesToObject=!1;ArrayPrototype.reduce&&(reduceCoercesToObject="object"==typeof ArrayPrototype.reduce.call("es5",(function(_,__,___,list){return list})));defineProperties(ArrayPrototype,{reduce:function reduce(callbackfn){var object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;i<length;i++)i in self&&(result=callbackfn(result,self[i],i,object));return result}},!reduceCoercesToObject);var reduceRightCoercesToObject=!1;ArrayPrototype.reduceRight&&(reduceRightCoercesToObject="object"==typeof ArrayPrototype.reduceRight.call("es5",(function(_,__,___,list){return list})));defineProperties(ArrayPrototype,{reduceRight:function reduceRight(callbackfn){var result,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(--i<0)throw new TypeError("reduceRight of empty array with no initial value")}if(i<0)return result;do{i in self&&(result=callbackfn(result,self[i],i,object))}while(i--);return result}},!reduceRightCoercesToObject);var hasFirefox2IndexOfBug=ArrayPrototype.indexOf&&-1!==[0,1].indexOf(1,2);defineProperties(ArrayPrototype,{indexOf:function indexOf(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=0;for(arguments.length>1&&(i=ES.ToInteger(arguments[1])),i=i>=0?i:max(0,length+i);i<length;i++)if(i in self&&self[i]===searchElement)return i;return-1}},hasFirefox2IndexOfBug);var hasFirefox2LastIndexOfBug=ArrayPrototype.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);defineProperties(ArrayPrototype,{lastIndexOf:function lastIndexOf(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=length-1;for(arguments.length>1&&(i=min(i,ES.ToInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&searchElement===self[i])return i;return-1}},hasFirefox2LastIndexOfBug);var spliceNoopReturnsEmptyArray=(a=[1,2],result=a.splice(),2===a.length&&isArray(result)&&0===result.length);var a,result;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){return 0===arguments.length?[]:array_splice.apply(this,arguments)}},!spliceNoopReturnsEmptyArray);var spliceWorksWithEmptyObject=(obj={},ArrayPrototype.splice.call(obj,0,0,1),1===obj.length);var obj;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){if(0===arguments.length)return[];var args=arguments;return this.length=max(ES.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof deleteCount&&((args=arraySlice(arguments)).length<2?pushCall(args,this.length-start):args[1]=ES.ToInteger(deleteCount)),array_splice.apply(this,args)}},!spliceWorksWithEmptyObject);var spliceWorksWithLargeSparseArrays=(arr=new $Array(1e5),arr[8]="x",arr.splice(1,1),7===arr.indexOf("x")),spliceWorksWithSmallSparseArrays=function(){var arr=[];return arr[256]="a",arr.splice(257,0,"b"),"a"===arr[256]}();var arr;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){for(var from,O=ES.ToObject(this),A=[],len=ES.ToUint32(O.length),relativeStart=ES.ToInteger(start),actualStart=relativeStart<0?max(len+relativeStart,0):min(relativeStart,len),actualDeleteCount=0===arguments.length?0:1===arguments.length?len-actualStart:min(max(ES.ToInteger(deleteCount),0),len-actualStart),k=0;k<actualDeleteCount;)from=$String(actualStart+k),owns(O,from)&&(A[k]=O[from]),k+=1;var to,items=arraySlice(arguments,2),itemCount=items.length;if(itemCount<actualDeleteCount){k=actualStart;for(var maxK=len-actualDeleteCount;k<maxK;)from=$String(k+actualDeleteCount),to=$String(k+itemCount),owns(O,from)?O[to]=O[from]:delete O[to],k+=1;k=len;for(var minK=len-actualDeleteCount+itemCount;k>minK;)delete O[k-1],k-=1}else if(itemCount>actualDeleteCount)for(k=len-actualDeleteCount;k>actualStart;)from=$String(k+actualDeleteCount-1),to=$String(k+itemCount-1),owns(O,from)?O[to]=O[from]:delete O[to],k-=1;k=actualStart;for(var i=0;i<items.length;++i)O[k]=items[i],k+=1;return O.length=len-actualDeleteCount+itemCount,A}},!spliceWorksWithLargeSparseArrays||!spliceWorksWithSmallSparseArrays);var hasStringJoinBug,originalJoin=ArrayPrototype.join;try{hasStringJoinBug="1,2,3"!==Array.prototype.join.call("123",",")}catch(e){hasStringJoinBug=!0}hasStringJoinBug&&defineProperties(ArrayPrototype,{join:function join(separator){var sep=void 0===separator?",":separator;return originalJoin.call(isString(this)?strSplit(this,""):this,sep)}},hasStringJoinBug);var hasJoinUndefinedBug="1,2"!==[1,2].join(void 0);hasJoinUndefinedBug&&defineProperties(ArrayPrototype,{join:function join(separator){var sep=void 0===separator?",":separator;return originalJoin.call(this,sep)}},hasJoinUndefinedBug);var pushShim=function push(item){for(var O=ES.ToObject(this),n=ES.ToUint32(O.length),i=0;i<arguments.length;)O[n+i]=arguments[i],i+=1;return O.length=n+i,n+i},pushIsNotGeneric=function(){var obj={};return 1!==Array.prototype.push.call(obj,void 0)||1!==obj.length||void 0!==obj[0]||!owns(obj,0)}();defineProperties(ArrayPrototype,{push:function push(item){return isArray(this)?array_push.apply(this,arguments):pushShim.apply(this,arguments)}},pushIsNotGeneric);var pushUndefinedIsWeird=function(){var arr=[];return 1!==arr.push(void 0)||1!==arr.length||void 0!==arr[0]||!owns(arr,0)}();defineProperties(ArrayPrototype,{push:pushShim},pushUndefinedIsWeird),defineProperties(ArrayPrototype,{slice:function(start,end){var arr=isString(this)?strSplit(this,""):this;return arraySliceApply(arr,arguments)}},splitString);var sortIgnoresNonFunctions=function(){try{[1,2].sort(null)}catch(e){try{[1,2].sort({})}catch(e2){return!1}}return!0}(),sortThrowsOnRegex=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),sortIgnoresUndefined=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();defineProperties(ArrayPrototype,{sort:function sort(compareFn){if(void 0===compareFn)return arraySort(this);if(!isCallable(compareFn))throw new TypeError("Array.prototype.sort callback must be a function");return arraySort(this,compareFn)}},sortIgnoresNonFunctions||!sortIgnoresUndefined||!sortThrowsOnRegex);var hasDontEnumBug=!isEnum({toString:null},"toString"),hasProtoEnumBug=isEnum((function(){}),"prototype"),hasStringEnumBug=!owns("x","0"),equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0,$width:!0,$height:!0,$top:!0,$localStorage:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{!excludedKeys["$"+k]&&owns(window,k)&&null!==window[k]&&"object"==typeof window[k]&&equalsConstructorPrototype(window[k])}catch(e){return!0}return!1}(),equalsConstructorPrototypeIfNotBuggy=function(object){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(object);try{return equalsConstructorPrototype(object)}catch(e){return!1}},dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length,isStandardArguments=function isArguments(value){return"[object Arguments]"===toStr(value)},isLegacyArguments=function isArguments(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&!isArray(value)&&isCallable(value.callee)},isArguments=isStandardArguments(arguments)?isStandardArguments:isLegacyArguments;defineProperties($Object,{keys:function keys(object){var isFn=isCallable(object),isArgs=isArguments(object),isObject=null!==object&&"object"==typeof object,isStr=isObject&&isString(object);if(!isObject&&!isFn&&!isArgs)throw new TypeError("Object.keys called on a non-object");var theKeys=[],skipProto=hasProtoEnumBug&&isFn;if(isStr&&hasStringEnumBug||isArgs)for(var i=0;i<object.length;++i)pushCall(theKeys,$String(i));if(!isArgs)for(var name in object)skipProto&&"prototype"===name||!owns(object,name)||pushCall(theKeys,$String(name));if(hasDontEnumBug)for(var skipConstructor=equalsConstructorPrototypeIfNotBuggy(object),j=0;j<dontEnumsLength;j++){var dontEnum=dontEnums[j];skipConstructor&&"constructor"===dontEnum||!owns(object,dontEnum)||pushCall(theKeys,dontEnum)}return theKeys}});var keysWorksWithArguments=$Object.keys&&function(){return 2===$Object.keys(arguments).length}(1,2),keysHasArgumentsLengthBug=$Object.keys&&function(){var argKeys=$Object.keys(arguments);return 1!==arguments.length||1!==argKeys.length||1!==argKeys[0]}(1),originalKeys=$Object.keys;defineProperties($Object,{keys:function keys(object){return isArguments(object)?originalKeys(arraySlice(object)):originalKeys(object)}},!keysWorksWithArguments||keysHasArgumentsLengthBug);var hasToDateStringFormatBug,hasToStringFormatBug,hasNegativeMonthYearBug=0!==new Date(-0xc782b5b342b24).getUTCMonth(),aNegativeTestDate=new Date(-0x55d318d56a724),aPositiveTestDate=new Date(14496624e5),hasToUTCStringFormatBug="Mon, 01 Jan -45875 11:59:59 GMT"!==aNegativeTestDate.toUTCString(),timeZoneOffset=aNegativeTestDate.getTimezoneOffset();timeZoneOffset<-720?(hasToDateStringFormatBug="Tue Jan 02 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(aPositiveTestDate))):(hasToDateStringFormatBug="Mon Jan 01 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(aPositiveTestDate)));var originalGetFullYear=call.bind(Date.prototype.getFullYear),originalGetMonth=call.bind(Date.prototype.getMonth),originalGetDate=call.bind(Date.prototype.getDate),originalGetUTCFullYear=call.bind(Date.prototype.getUTCFullYear),originalGetUTCMonth=call.bind(Date.prototype.getUTCMonth),originalGetUTCDate=call.bind(Date.prototype.getUTCDate),originalGetUTCDay=call.bind(Date.prototype.getUTCDay),originalGetUTCHours=call.bind(Date.prototype.getUTCHours),originalGetUTCMinutes=call.bind(Date.prototype.getUTCMinutes),originalGetUTCSeconds=call.bind(Date.prototype.getUTCSeconds),originalGetUTCMilliseconds=call.bind(Date.prototype.getUTCMilliseconds),dayName=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthName=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysInMonth=function daysInMonth(month,year){return originalGetDate(new Date(year,month,0))};defineProperties(Date.prototype,{getFullYear:function getFullYear(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this);return year<0&&originalGetMonth(this)>11?year+1:year},getMonth:function getMonth(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this);return year<0&&month>11?0:month},getDate:function getDate(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this),date=originalGetDate(this);return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date},getUTCFullYear:function getUTCFullYear(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this);return year<0&&originalGetUTCMonth(this)>11?year+1:year},getUTCMonth:function getUTCMonth(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);return year<0&&month>11?0:month},getUTCDate:function getUTCDate(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this),date=originalGetUTCDate(this);return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date}},hasNegativeMonthYearBug),defineProperties(Date.prototype,{toUTCString:function toUTCString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=originalGetUTCDay(this),date=originalGetUTCDate(this),month=originalGetUTCMonth(this),year=originalGetUTCFullYear(this),hour=originalGetUTCHours(this),minute=originalGetUTCMinutes(this),second=originalGetUTCSeconds(this);return dayName[day]+", "+(date<10?"0"+date:date)+" "+monthName[month]+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"}},hasNegativeMonthYearBug||hasToUTCStringFormatBug),defineProperties(Date.prototype,{toDateString:function toDateString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear();return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year}},hasNegativeMonthYearBug||hasToDateStringFormatBug),(hasNegativeMonthYearBug||hasToStringFormatBug)&&(Date.prototype.toString=function toString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear(),hour=this.getHours(),minute=this.getMinutes(),second=this.getSeconds(),timezoneOffset=this.getTimezoneOffset(),hoursOffset=Math.floor(Math.abs(timezoneOffset)/60),minutesOffset=Math.floor(Math.abs(timezoneOffset)%60);return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"+(timezoneOffset>0?"-":"+")+(hoursOffset<10?"0"+hoursOffset:hoursOffset)+(minutesOffset<10?"0"+minutesOffset:minutesOffset)},supportsDescriptors&&$Object.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var negativeDate=-621987552e5,negativeYearString="-000001",hasNegativeDateBug=Date.prototype.toISOString&&-1===new Date(negativeDate).toISOString().indexOf(negativeYearString),hasSafari51DateBug=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),getTime=call.bind(Date.prototype.getTime);defineProperties(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(getTime(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);year+=Math.floor(month/12);var result=[(month=(month%12+12)%12)+1,originalGetUTCDate(this),originalGetUTCHours(this),originalGetUTCMinutes(this),originalGetUTCSeconds(this)];year=(year<0?"-":year>9999?"+":"")+strSlice("00000"+Math.abs(year),0<=year&&year<=9999?-4:-6);for(var i=0;i<result.length;++i)result[i]=strSlice("00"+result[i],-2);return year+"-"+arraySlice(result,0,2).join("-")+"T"+arraySlice(result,2).join(":")+"."+strSlice("000"+originalGetUTCMilliseconds(this),-3)+"Z"}},hasNegativeDateBug||hasSafari51DateBug);var dateToJSONIsSupported=function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(negativeDate).toJSON().indexOf(negativeYearString)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}();dateToJSONIsSupported||(Date.prototype.toJSON=function toJSON(key){var O=$Object(this),tv=ES.ToPrimitive(O);if("number"==typeof tv&&!isFinite(tv))return null;var toISO=O.toISOString;if(!isCallable(toISO))throw new TypeError("toISOString property is not callable");return toISO.call(O)});var supportsExtendedYears=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),acceptsInvalidDates=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),doesNotParseY2KNewYear=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(doesNotParseY2KNewYear||acceptsInvalidDates||!supportsExtendedYears){var maxSafeUnsigned32Bit=Math.pow(2,31)-1,hasSafariSignedIntBug=isActualNaN(new Date(1970,0,1,0,0,0,maxSafeUnsigned32Bit+1).getTime());Date=function(NativeDate){var DateShim=function Date(Y,M,D,h,m,s,ms){var date,length=arguments.length;if(this instanceof NativeDate){var seconds=s,millis=ms;if(hasSafariSignedIntBug&&length>=7&&ms>maxSafeUnsigned32Bit){var msToShift=Math.floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=Math.floor(msToShift/1e3);seconds+=sToShift,millis-=1e3*sToShift}date=1===length&&$String(Y)===Y?new NativeDate(DateShim.parse(Y)):length>=7?new NativeDate(Y,M,D,h,m,seconds,millis):length>=6?new NativeDate(Y,M,D,h,m,seconds):length>=5?new NativeDate(Y,M,D,h,m):length>=4?new NativeDate(Y,M,D,h):length>=3?new NativeDate(Y,M,D):length>=2?new NativeDate(Y,M):length>=1?new NativeDate(Y instanceof NativeDate?+Y:Y):new NativeDate}else date=NativeDate.apply(this,arguments);return isPrimitive(date)||defineProperties(date,{constructor:DateShim},!0),date},isoDateExpression=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),months=[0,31,59,90,120,151,181,212,243,273,304,334,365],dayFromMonth=function dayFromMonth(year,month){var t=month>1?1:0;return months[month]+Math.floor((year-1969+t)/4)-Math.floor((year-1901+t)/100)+Math.floor((year-1601+t)/400)+365*(year-1970)},toUTC=function toUTC(t){var s=0,ms=t;if(hasSafariSignedIntBug&&ms>maxSafeUnsigned32Bit){var msToShift=Math.floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=Math.floor(msToShift/1e3);s+=sToShift,ms-=1e3*sToShift}return $Number(new NativeDate(1970,0,1,0,0,s,ms))};for(var key in NativeDate)owns(NativeDate,key)&&(DateShim[key]=NativeDate[key]);defineProperties(DateShim,{now:NativeDate.now,UTC:NativeDate.UTC},!0),DateShim.prototype=NativeDate.prototype,defineProperties(DateShim.prototype,{constructor:DateShim},!0);return defineProperties(DateShim,{parse:function parse(string){var match=isoDateExpression.exec(string);if(match){var result,year=$Number(match[1]),month=$Number(match[2]||1)-1,day=$Number(match[3]||1)-1,hour=$Number(match[4]||0),minute=$Number(match[5]||0),second=$Number(match[6]||0),millisecond=Math.floor(1e3*$Number(match[7]||0)),isLocalTime=Boolean(match[4]&&!match[8]),signOffset="-"===match[9]?1:-1,hourOffset=$Number(match[10]||0),minuteOffset=$Number(match[11]||0),hasMinutesOrSecondsOrMilliseconds=minute>0||second>0||millisecond>0;return hour<(hasMinutesOrSecondsOrMilliseconds?24:25)&&minute<60&&second<60&&millisecond<1e3&&month>-1&&month<12&&hourOffset<24&&minuteOffset<60&&day>-1&&day<dayFromMonth(year,month+1)-dayFromMonth(year,month)&&(result=1e3*(60*((result=60*(24*(dayFromMonth(year,month)+day)+hour+hourOffset*signOffset))+minute+minuteOffset*signOffset)+second)+millisecond,isLocalTime&&(result=toUTC(result)),-864e13<=result&&result<=864e13)?result:NaN}return NativeDate.parse.apply(this,arguments)}}),DateShim}(Date)}Date.now||(Date.now=function now(){return(new Date).getTime()});var hasToFixedBugs=NumberPrototype.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),toFixedHelpers={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(n,c){for(var i=-1,c2=c;++i<toFixedHelpers.size;)c2+=n*toFixedHelpers.data[i],toFixedHelpers.data[i]=c2%toFixedHelpers.base,c2=Math.floor(c2/toFixedHelpers.base)},divide:function divide(n){for(var i=toFixedHelpers.size,c=0;--i>=0;)c+=toFixedHelpers.data[i],toFixedHelpers.data[i]=Math.floor(c/n),c=c%n*toFixedHelpers.base},numToString:function numToString(){for(var i=toFixedHelpers.size,s="";--i>=0;)if(""!==s||0===i||0!==toFixedHelpers.data[i]){var t=$String(toFixedHelpers.data[i]);""===s?s=t:s+=strSlice("0000000",0,7-t.length)+t}return s},pow:function pow(x,n,acc){return 0===n?acc:n%2==1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)},log:function log(x){for(var n=0,x2=x;x2>=4096;)n+=12,x2/=4096;for(;x2>=2;)n+=1,x2/=2;return n}},toFixedShim=function toFixed(fractionDigits){var f,x,s,m,e,z,j,k;if(f=$Number(fractionDigits),(f=isActualNaN(f)?0:Math.floor(f))<0||f>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(x=$Number(this),isActualNaN(x))return"NaN";if(x<=-1e21||x>=1e21)return $String(x);if(s="",x<0&&(s="-",x=-x),m="0",x>1e-21)if(z=(e=toFixedHelpers.log(x*toFixedHelpers.pow(2,69,1))-69)<0?x*toFixedHelpers.pow(2,-e,1):x/toFixedHelpers.pow(2,e,1),z*=4503599627370496,(e=52-e)>0){for(toFixedHelpers.multiply(0,z),j=f;j>=7;)toFixedHelpers.multiply(1e7,0),j-=7;for(toFixedHelpers.multiply(toFixedHelpers.pow(10,j,1),0),j=e-1;j>=23;)toFixedHelpers.divide(1<<23),j-=23;toFixedHelpers.divide(1<<j),toFixedHelpers.multiply(1,1),toFixedHelpers.divide(2),m=toFixedHelpers.numToString()}else toFixedHelpers.multiply(0,z),toFixedHelpers.multiply(1<<-e,0),m=toFixedHelpers.numToString()+strSlice("0.00000000000000000000",2,2+f);return m=f>0?(k=m.length)<=f?s+strSlice("0.0000000000000000000",0,f-k+2)+m:s+strSlice(m,0,k-f)+"."+strSlice(m,k-f):s+m};defineProperties(NumberPrototype,{toFixed:toFixedShim},hasToFixedBugs);var hasToPrecisionUndefinedBug=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),originalToPrecision=NumberPrototype.toPrecision;defineProperties(NumberPrototype,{toPrecision:function toPrecision(precision){return void 0===precision?originalToPrecision.call(this):originalToPrecision.call(this,precision)}},hasToPrecisionUndefinedBug),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(compliantExecNpcg=void 0===/()??/.exec("")[1],maxSafe32BitInt=Math.pow(2,32)-1,StringPrototype.split=function(separator,limit){var string=String(this);if(void 0===separator&&0===limit)return[];if(!isRegex(separator))return strSplit(this,separator,limit);var separator2,match,lastIndex,lastLength,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,separatorCopy=new RegExp(separator.source,flags+"g");compliantExecNpcg||(separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags));var splitLimit=void 0===limit?maxSafe32BitInt:ES.ToUint32(limit);for(match=separatorCopy.exec(string);match&&!((lastIndex=match.index+match[0].length)>lastLastIndex&&(pushCall(output,strSlice(string,lastLastIndex,match.index)),!compliantExecNpcg&&match.length>1&&match[0].replace(separator2,(function(){for(var i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)})),match.length>1&&match.index<string.length&&array_push.apply(output,arraySlice(match,1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=splitLimit));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++,match=separatorCopy.exec(string);return lastLastIndex===string.length?!lastLength&&separatorCopy.test("")||pushCall(output,""):pushCall(output,strSlice(string,lastLastIndex)),output.length>splitLimit?arraySlice(output,0,splitLimit):output}):"0".split(void 0,0).length&&(StringPrototype.split=function split(separator,limit){return void 0===separator&&0===limit?[]:strSplit(this,separator,limit)});var compliantExecNpcg,maxSafe32BitInt;var str_replace=StringPrototype.replace,replaceReportsGroupsCorrectly=(groups=[],"x".replace(/x(.)?/g,(function(match,group){pushCall(groups,group)})),1===groups.length&&void 0===groups[0]);var groups;replaceReportsGroupsCorrectly||(StringPrototype.replace=function replace(searchValue,replaceValue){var isFn=isCallable(replaceValue),hasCapturingGroups=isRegex(searchValue)&&/\)[*?]/.test(searchValue.source);if(isFn&&hasCapturingGroups){return str_replace.call(this,searchValue,(function(match){var length=arguments.length,originalLastIndex=searchValue.lastIndex;searchValue.lastIndex=0;var args=searchValue.exec(match)||[];return searchValue.lastIndex=originalLastIndex,pushCall(args,arguments[length-2],arguments[length-1]),replaceValue.apply(this,args)}))}return str_replace.call(this,searchValue,replaceValue)});var string_substr=StringPrototype.substr,hasNegativeSubstrBug="".substr&&"b"!=="0b".substr(-1);defineProperties(StringPrototype,{substr:function substr(start,length){var normalizedStart=start;return start<0&&(normalizedStart=max(this.length+start,0)),string_substr.call(this,normalizedStart,length)}},hasNegativeSubstrBug);var ws="\t\n\v\f\r \u2028\u2029\ufeff",zeroWidth="",wsRegexChars="["+ws+"]",trimBeginRegexp=new RegExp("^"+wsRegexChars+wsRegexChars+"*"),trimEndRegexp=new RegExp(wsRegexChars+wsRegexChars+"*$"),hasTrimWhitespaceBug=StringPrototype.trim&&(ws.trim()||!zeroWidth.trim());defineProperties(StringPrototype,{trim:function trim(){if(null==this)throw new TypeError("can't convert "+this+" to object");return $String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}},hasTrimWhitespaceBug);var trim=call.bind(String.prototype.trim),hasLastIndexBug=StringPrototype.lastIndexOf&&-1!=="abc".lastIndexOf("",2);defineProperties(StringPrototype,{lastIndexOf:function lastIndexOf(searchString){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var S=$String(this),searchStr=$String(searchString),numPos=arguments.length>1?$Number(arguments[1]):NaN,pos=isActualNaN(numPos)?1/0:ES.ToInteger(numPos),start=min(max(pos,0),S.length),searchLen=searchStr.length,k=start+searchLen;k>0;){k=max(0,k-searchLen);var index=strIndexOf(strSlice(S,k,start+searchLen),searchStr);if(-1!==index)return k+index}return-1}},hasLastIndexBug);var originalLastIndexOf=StringPrototype.lastIndexOf;defineProperties(StringPrototype,{lastIndexOf:function lastIndexOf(searchString){return originalLastIndexOf.apply(this,arguments)}},1!==StringPrototype.lastIndexOf.length),(8!==parseInt(ws+"08")||22!==parseInt(ws+"0x16"))&&(parseInt=(origParseInt=parseInt,hexRegex=/^[-+]?0[xX]/,function parseInt(str,radix){var string=trim(String(str)),defaultedRadix=$Number(radix)||(hexRegex.test(string)?16:10);return origParseInt(string,defaultedRadix)}));var origParseInt,hexRegex;1/parseFloat("-0")!=-1/0&&(parseFloat=(origParseFloat=parseFloat,function parseFloat(string){var inputString=trim(String(string)),result=origParseFloat(inputString);return 0===result&&"-"===strSlice(inputString,0,1)?-0:result}));var origParseFloat;if("RangeError: test"!==String(new RangeError("test"))){var errorToStringShim=function toString(){if(null==this)throw new TypeError("can't convert "+this+" to object");var name=this.name;void 0===name?name="Error":"string"!=typeof name&&(name=$String(name));var msg=this.message;return void 0===msg?msg="":"string"!=typeof msg&&(msg=$String(msg)),name?msg?name+": "+msg:name:msg};Error.prototype.toString=errorToStringShim}if(supportsDescriptors){var ensureNonEnumerable=function(obj,prop){if(isEnum(obj,prop)){var desc=Object.getOwnPropertyDescriptor(obj,prop);desc.configurable&&(desc.enumerable=!1,Object.defineProperty(obj,prop,desc))}};ensureNonEnumerable(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),ensureNonEnumerable(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var regexToString=function toString(){var str="/"+this.source+"/";return this.global&&(str+="g"),this.ignoreCase&&(str+="i"),this.multiline&&(str+="m"),str};RegExp.prototype.toString=regexToString}})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){var defineGetter,defineSetter,lookupGetter,lookupSetter,call=Function.call,prototypeOfObject=Object.prototype,owns=call.bind(prototypeOfObject.hasOwnProperty),isEnumerable=call.bind(prototypeOfObject.propertyIsEnumerable),toStr=call.bind(prototypeOfObject.toString),supportsAccessors=owns(prototypeOfObject,"__defineGetter__");supportsAccessors&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__));var isPrimitive=function isPrimitive(o){return null==o||"object"!=typeof o&&"function"!=typeof o};Object.getPrototypeOf||(Object.getPrototypeOf=function getPrototypeOf(object){var proto=object.__proto__;return proto||null===proto?proto:"[object Function]"===toStr(object.constructor)?object.constructor.prototype:object instanceof Object?prototypeOfObject:null});if(Object.defineProperty){var doesGetOwnPropertyDescriptorWork=function doesGetOwnPropertyDescriptorWork(object){try{return object.sentinel=0,0===Object.getOwnPropertyDescriptor(object,"sentinel").value}catch(exception){return!1}},getOwnPropertyDescriptorWorksOnObject=doesGetOwnPropertyDescriptorWork({});if(!("undefined"==typeof document||doesGetOwnPropertyDescriptorWork(document.createElement("div")))||!getOwnPropertyDescriptorWorksOnObject)var getOwnPropertyDescriptorFallback=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||getOwnPropertyDescriptorFallback){Object.getOwnPropertyDescriptor=function getOwnPropertyDescriptor(object,property){if(isPrimitive(object))throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+object);if(getOwnPropertyDescriptorFallback)try{return getOwnPropertyDescriptorFallback.call(Object,object,property)}catch(exception){}var descriptor;if(!owns(object,property))return descriptor;if(descriptor={enumerable:isEnumerable(object,property),configurable:!0},supportsAccessors){var prototype=object.__proto__,notPrototypeOfObject=object!==prototypeOfObject;notPrototypeOfObject&&(object.__proto__=prototypeOfObject);var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(notPrototypeOfObject&&(object.__proto__=prototype),getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor.writable=!0,descriptor}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function getOwnPropertyNames(object){return Object.keys(object)});if(!Object.create){var createEmpty;createEmpty=!({__proto__:null}instanceof Object)||"undefined"==typeof document?function(){return{__proto__:null}}:function(){var empty=function shouldUseActiveX(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(exception){return!1}}()?function getEmptyViaActiveX(){var empty,xDoc;return(xDoc=new ActiveXObject("htmlfile")).write("<script><\/script>"),xDoc.close(),empty=xDoc.parentWindow.Object.prototype,xDoc=null,empty}():function getEmptyViaIFrame(){var empty,iframe=document.createElement("iframe"),parent=document.body||document.documentElement;return iframe.style.display="none",parent.appendChild(iframe),iframe.src="javascript:",empty=iframe.contentWindow.Object.prototype,parent.removeChild(iframe),iframe=null,empty}();delete empty.constructor,delete empty.hasOwnProperty,delete empty.propertyIsEnumerable,delete empty.isPrototypeOf,delete empty.toLocaleString,delete empty.toString,delete empty.valueOf;var Empty=function Empty(){};return Empty.prototype=empty,createEmpty=function(){return new Empty},new Empty},Object.create=function create(prototype,properties){var object,Type=function Type(){};if(null===prototype)object=createEmpty();else{if(isPrimitive(prototype))throw new TypeError("Object prototype may only be an Object or null");Type.prototype=prototype,(object=new Type).__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}var doesDefinePropertyWork=function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){return!1}};if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty,definePropertiesFallback=Object.defineProperties}if(!Object.defineProperty||definePropertyFallback){Object.defineProperty=function defineProperty(object,property,descriptor){if(isPrimitive(object))throw new TypeError("Object.defineProperty called on non-object: "+object);if(isPrimitive(descriptor))throw new TypeError("Property description must be an object: "+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if("value"in descriptor)if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{var hasGetter="get"in descriptor,hasSetter="set"in descriptor;if(!supportsAccessors&&(hasGetter||hasSetter))throw new TypeError("getters & setters can not be defined on this javascript engine");hasGetter&&defineGetter(object,property,descriptor.get),hasSetter&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties&&!definePropertiesFallback||(Object.defineProperties=function defineProperties(object,properties){if(definePropertiesFallback)try{return definePropertiesFallback.call(Object,object,properties)}catch(exception){}return Object.keys(properties).forEach((function(property){"__proto__"!==property&&Object.defineProperty(object,property,properties[property])})),object});Object.seal||(Object.seal=function seal(object){if(Object(object)!==object)throw new TypeError("Object.seal can only be called on Objects.");return object});Object.freeze||(Object.freeze=function freeze(object){if(Object(object)!==object)throw new TypeError("Object.freeze can only be called on Objects.");return object});try{Object.freeze((function(){}))}catch(exception){Object.freeze=(freezeObject=Object.freeze,function freeze(object){return"function"==typeof object?object:freezeObject(object)})}var freezeObject;Object.preventExtensions||(Object.preventExtensions=function preventExtensions(object){if(Object(object)!==object)throw new TypeError("Object.preventExtensions can only be called on Objects.");return object});Object.isSealed||(Object.isSealed=function isSealed(object){if(Object(object)!==object)throw new TypeError("Object.isSealed can only be called on Objects.");return!1});Object.isFrozen||(Object.isFrozen=function isFrozen(object){if(Object(object)!==object)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1});Object.isExtensible||(Object.isExtensible=function isExtensible(object){if(Object(object)!==object)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue})})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports,__webpack_require__){"use strict";__webpack_require__(441),__webpack_require__(442)(),__webpack_require__(448)},function(module,exports,__webpack_require__){(function(global,process){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){"use strict";var ArrayIterator,_apply=Function.call.bind(Function.apply),_call=Function.call.bind(Function.call),isArray=Array.isArray,keys=Object.keys,not=function notThunker(func){return function notThunk(){return!_apply(func,this,arguments)}},throwsError=function(func){try{return func(),!1}catch(e){return!0}},valueOrFalseIfThrows=function valueOrFalseIfThrows(func){try{return func()}catch(e){return!1}},isCallableWithoutNew=not(throwsError),arePropertyDescriptorsSupported=function(){return!throwsError((function(){return Object.defineProperty({},"x",{get:function(){}})}))},supportsDescriptors=!!Object.defineProperty&&arePropertyDescriptorsSupported(),functionsHaveNames="foo"===function foo(){}.name,_forEach=Function.call.bind(Array.prototype.forEach),_reduce=Function.call.bind(Array.prototype.reduce),_filter=Function.call.bind(Array.prototype.filter),_some=Function.call.bind(Array.prototype.some),defineProperty=function(object,name,value,force){!force&&name in object||(supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:value}):object[name]=value)},defineProperties=function(object,map,forceOverride){_forEach(keys(map),(function(name){var method=map[name];defineProperty(object,name,method,!!forceOverride)}))},_toString=Function.call.bind(Object.prototype.toString),isCallable=function IsCallableFast(x){return"function"==typeof x},Value={getter:function(object,name,getter){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");Object.defineProperty(object,name,{configurable:!0,enumerable:!1,get:getter})},proxy:function(originalObject,key,targetObject){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");var originalDescriptor=Object.getOwnPropertyDescriptor(originalObject,key);Object.defineProperty(targetObject,key,{configurable:originalDescriptor.configurable,enumerable:originalDescriptor.enumerable,get:function getKey(){return originalObject[key]},set:function setKey(value){originalObject[key]=value}})},redefine:function(object,property,newValue){if(supportsDescriptors){var descriptor=Object.getOwnPropertyDescriptor(object,property);descriptor.value=newValue,Object.defineProperty(object,property,descriptor)}else object[property]=newValue},defineByDescriptor:function(object,property,descriptor){supportsDescriptors?Object.defineProperty(object,property,descriptor):"value"in descriptor&&(object[property]=descriptor.value)},preserveToString:function(target,source){source&&isCallable(source.toString)&&defineProperty(target,"toString",source.toString.bind(source),!0)}},create=Object.create||function(prototype,properties){var Prototype=function Prototype(){};Prototype.prototype=prototype;var object=new Prototype;return void 0!==properties&&keys(properties).forEach((function(key){Value.defineByDescriptor(object,key,properties[key])})),object},supportsSubclassing=function(C,f){return!!Object.setPrototypeOf&&valueOrFalseIfThrows((function(){var Sub=function Subclass(arg){var o=new C(arg);return Object.setPrototypeOf(o,Subclass.prototype),o};return Object.setPrototypeOf(Sub,C),Sub.prototype=create(C.prototype,{constructor:{value:Sub}}),f(Sub)}))},getGlobal=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==global)return global;throw new Error("unable to locate global object")},globals=getGlobal(),globalIsFinite=globals.isFinite,_indexOf=Function.call.bind(String.prototype.indexOf),_arrayIndexOfApply=Function.apply.bind(Array.prototype.indexOf),_concat=Function.call.bind(Array.prototype.concat),_strSlice=Function.call.bind(String.prototype.slice),_push=Function.call.bind(Array.prototype.push),_pushApply=Function.apply.bind(Array.prototype.push),_shift=Function.call.bind(Array.prototype.shift),_max=Math.max,_min=Math.min,_floor=Math.floor,_abs=Math.abs,_exp=Math.exp,_log=Math.log,_sqrt=Math.sqrt,_hasOwnProperty=Function.call.bind(Object.prototype.hasOwnProperty),noop=function(){},OrigMap=globals.Map,origMapDelete=OrigMap&&OrigMap.prototype.delete,origMapGet=OrigMap&&OrigMap.prototype.get,origMapHas=OrigMap&&OrigMap.prototype.has,origMapSet=OrigMap&&OrigMap.prototype.set,Symbol=globals.Symbol||{},symbolSpecies=Symbol.species||"@@species",numberIsNaN=Number.isNaN||function isNaN(value){return value!=value},numberIsFinite=Number.isFinite||function isFinite(value){return"number"==typeof value&&globalIsFinite(value)},_sign=isCallable(Math.sign)?Math.sign:function sign(value){var number=Number(value);return 0===number||numberIsNaN(number)?number:number<0?-1:1},_log1p=function log1p(value){var x=Number(value);return x<-1||numberIsNaN(x)?NaN:0===x||x===1/0?x:-1===x?-1/0:1+x-1==0?x:x*(_log(1+x)/(1+x-1))},isStandardArguments=function isArguments(value){return"[object Arguments]"===_toString(value)},isLegacyArguments=function isArguments(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Array]"!==_toString(value)&&"[object Function]"===_toString(value.callee)},isArguments=isStandardArguments(arguments)?isStandardArguments:isLegacyArguments,Type={primitive:function(x){return null===x||"function"!=typeof x&&"object"!=typeof x},string:function(x){return"[object String]"===_toString(x)},regex:function(x){return"[object RegExp]"===_toString(x)},symbol:function(x){return"function"==typeof globals.Symbol&&"symbol"==typeof x}},overrideNative=function overrideNative(object,property,replacement){var original=object[property];defineProperty(object,property,replacement,!0),Value.preserveToString(object[property],original)},hasSymbols="function"==typeof Symbol&&"function"==typeof Symbol.for&&Type.symbol(Symbol()),$iterator$=Type.symbol(Symbol.iterator)?Symbol.iterator:"_es6-shim iterator_";globals.Set&&"function"==typeof(new globals.Set)["@@iterator"]&&($iterator$="@@iterator"),globals.Reflect||defineProperty(globals,"Reflect",{},!0);var o,Reflect=globals.Reflect,$String=String,domAll="undefined"!=typeof document&&document?document.all:null,isNullOrUndefined=null==domAll?function isNullOrUndefined(x){return null==x}:function isNullOrUndefinedAndNotDocumentAll(x){return null==x&&x!==domAll},ES={Call:function Call(F,V){var args=arguments.length>2?arguments[2]:[];if(!ES.IsCallable(F))throw new TypeError(F+" is not a function");return _apply(F,V,args)},RequireObjectCoercible:function(x,optMessage){if(isNullOrUndefined(x))throw new TypeError(optMessage||"Cannot call method on "+x);return x},TypeIsObject:function(x){return null!=x&&!0!==x&&!1!==x&&("function"==typeof x||"object"==typeof x||x===domAll)},ToObject:function(o,optMessage){return Object(ES.RequireObjectCoercible(o,optMessage))},IsCallable:isCallable,IsConstructor:function(x){return ES.IsCallable(x)},ToInt32:function(x){return ES.ToNumber(x)>>0},ToUint32:function(x){return ES.ToNumber(x)>>>0},ToNumber:function(value){if("[object Symbol]"===_toString(value))throw new TypeError("Cannot convert a Symbol value to a number");return+value},ToInteger:function(value){var number=ES.ToNumber(value);return numberIsNaN(number)?0:0!==number&&numberIsFinite(number)?(number>0?1:-1)*_floor(_abs(number)):number},ToLength:function(value){var len=ES.ToInteger(value);return len<=0?0:len>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:len},SameValue:function(a,b){return a===b?0!==a||1/a==1/b:numberIsNaN(a)&&numberIsNaN(b)},SameValueZero:function(a,b){return a===b||numberIsNaN(a)&&numberIsNaN(b)},IsIterable:function(o){return ES.TypeIsObject(o)&&(void 0!==o[$iterator$]||isArguments(o))},GetIterator:function(o){if(isArguments(o))return new ArrayIterator(o,"value");var itFn=ES.GetMethod(o,$iterator$);if(!ES.IsCallable(itFn))throw new TypeError("value is not an iterable");var it=ES.Call(itFn,o);if(!ES.TypeIsObject(it))throw new TypeError("bad iterator");return it},GetMethod:function(o,p){var func=ES.ToObject(o)[p];if(!isNullOrUndefined(func)){if(!ES.IsCallable(func))throw new TypeError("Method not callable: "+p);return func}},IteratorComplete:function(iterResult){return!!iterResult.done},IteratorClose:function(iterator,completionIsThrow){var returnMethod=ES.GetMethod(iterator,"return");if(void 0!==returnMethod){var innerResult,innerException;try{innerResult=ES.Call(returnMethod,iterator)}catch(e){innerException=e}if(!completionIsThrow){if(innerException)throw innerException;if(!ES.TypeIsObject(innerResult))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(it){var result=arguments.length>1?it.next(arguments[1]):it.next();if(!ES.TypeIsObject(result))throw new TypeError("bad iterator");return result},IteratorStep:function(it){var result=ES.IteratorNext(it);return!ES.IteratorComplete(result)&&result},Construct:function(C,args,newTarget,isES6internal){var target=void 0===newTarget?C:newTarget;if(!isES6internal&&Reflect.construct)return Reflect.construct(C,args,target);var proto=target.prototype;ES.TypeIsObject(proto)||(proto=Object.prototype);var obj=create(proto),result=ES.Call(C,obj,args);return ES.TypeIsObject(result)?result:obj},SpeciesConstructor:function(O,defaultConstructor){var C=O.constructor;if(void 0===C)return defaultConstructor;if(!ES.TypeIsObject(C))throw new TypeError("Bad constructor");var S=C[symbolSpecies];if(isNullOrUndefined(S))return defaultConstructor;if(!ES.IsConstructor(S))throw new TypeError("Bad @@species");return S},CreateHTML:function(string,tag,attribute,value){var S=ES.ToString(string),p1="<"+tag;return""!==attribute&&(p1+=" "+attribute+'="'+ES.ToString(value).replace(/"/g,"&quot;")+'"'),p1+">"+S+"</"+tag+">"},IsRegExp:function IsRegExp(argument){if(!ES.TypeIsObject(argument))return!1;var isRegExp=argument[Symbol.match];return void 0!==isRegExp?!!isRegExp:Type.regex(argument)},ToString:function ToString(string){return $String(string)}};if(supportsDescriptors&&hasSymbols){var defineWellKnownSymbol=function defineWellKnownSymbol(name){if(Type.symbol(Symbol[name]))return Symbol[name];var sym=Symbol.for("Symbol."+name);return Object.defineProperty(Symbol,name,{configurable:!1,enumerable:!1,writable:!1,value:sym}),sym};if(!Type.symbol(Symbol.search)){var symbolSearch=defineWellKnownSymbol("search"),originalSearch=String.prototype.search;defineProperty(RegExp.prototype,symbolSearch,(function search(string){return ES.Call(originalSearch,string,[this])}));var searchShim=function search(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var searcher=ES.GetMethod(regexp,symbolSearch);if(void 0!==searcher)return ES.Call(searcher,regexp,[O])}return ES.Call(originalSearch,O,[ES.ToString(regexp)])};overrideNative(String.prototype,"search",searchShim)}if(!Type.symbol(Symbol.replace)){var symbolReplace=defineWellKnownSymbol("replace"),originalReplace=String.prototype.replace;defineProperty(RegExp.prototype,symbolReplace,(function replace(string,replaceValue){return ES.Call(originalReplace,string,[this,replaceValue])}));var replaceShim=function replace(searchValue,replaceValue){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(searchValue)){var replacer=ES.GetMethod(searchValue,symbolReplace);if(void 0!==replacer)return ES.Call(replacer,searchValue,[O,replaceValue])}return ES.Call(originalReplace,O,[ES.ToString(searchValue),replaceValue])};overrideNative(String.prototype,"replace",replaceShim)}if(!Type.symbol(Symbol.split)){var symbolSplit=defineWellKnownSymbol("split"),originalSplit=String.prototype.split;defineProperty(RegExp.prototype,symbolSplit,(function split(string,limit){return ES.Call(originalSplit,string,[this,limit])}));var splitShim=function split(separator,limit){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(separator)){var splitter=ES.GetMethod(separator,symbolSplit);if(void 0!==splitter)return ES.Call(splitter,separator,[O,limit])}return ES.Call(originalSplit,O,[ES.ToString(separator),limit])};overrideNative(String.prototype,"split",splitShim)}var symbolMatchExists=Type.symbol(Symbol.match),stringMatchIgnoresSymbolMatch=symbolMatchExists&&((o={})[Symbol.match]=function(){return 42},42!=="a".match(o));if(!symbolMatchExists||stringMatchIgnoresSymbolMatch){var symbolMatch=defineWellKnownSymbol("match"),originalMatch=String.prototype.match;defineProperty(RegExp.prototype,symbolMatch,(function match(string){return ES.Call(originalMatch,string,[this])}));var matchShim=function match(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var matcher=ES.GetMethod(regexp,symbolMatch);if(void 0!==matcher)return ES.Call(matcher,regexp,[O])}return ES.Call(originalMatch,O,[ES.ToString(regexp)])};overrideNative(String.prototype,"match",matchShim)}}var wrapConstructor=function wrapConstructor(original,replacement,keysToSkip){Value.preserveToString(replacement,original),Object.setPrototypeOf&&Object.setPrototypeOf(original,replacement),supportsDescriptors?_forEach(Object.getOwnPropertyNames(original),(function(key){key in noop||keysToSkip[key]||Value.proxy(original,key,replacement)})):_forEach(Object.keys(original),(function(key){key in noop||keysToSkip[key]||(replacement[key]=original[key])})),replacement.prototype=original.prototype,Value.redefine(original.prototype,"constructor",replacement)},defaultSpeciesGetter=function(){return this},addDefaultSpecies=function(C){supportsDescriptors&&!_hasOwnProperty(C,symbolSpecies)&&Value.getter(C,symbolSpecies,defaultSpeciesGetter)},addIterator=function(prototype,impl){var implementation=impl||function iterator(){return this};defineProperty(prototype,$iterator$,implementation),!prototype[$iterator$]&&Type.symbol($iterator$)&&(prototype[$iterator$]=implementation)},createDataProperty=function createDataProperty(object,name,value){supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!0,writable:!0,value:value}):object[name]=value},createDataPropertyOrThrow=function createDataPropertyOrThrow(object,name,value){if(createDataProperty(object,name,value),!ES.SameValue(object[name],value))throw new TypeError("property is nonconfigurable")},emulateES6construct=function(o,defaultNewTarget,defaultProto,slots){if(!ES.TypeIsObject(o))throw new TypeError("Constructor requires `new`: "+defaultNewTarget.name);var proto=defaultNewTarget.prototype;ES.TypeIsObject(proto)||(proto=defaultProto);var obj=create(proto);for(var name in slots)if(_hasOwnProperty(slots,name)){var value=slots[name];defineProperty(obj,name,value,!0)}return obj};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var originalFromCodePoint=String.fromCodePoint;overrideNative(String,"fromCodePoint",(function fromCodePoint(codePoints){return ES.Call(originalFromCodePoint,this,arguments)}))}var StringShims={fromCodePoint:function fromCodePoint(codePoints){for(var next,result=[],i=0,length=arguments.length;i<length;i++){if(next=Number(arguments[i]),!ES.SameValue(next,ES.ToInteger(next))||next<0||next>1114111)throw new RangeError("Invalid code point "+next);next<65536?_push(result,String.fromCharCode(next)):(next-=65536,_push(result,String.fromCharCode(55296+(next>>10))),_push(result,String.fromCharCode(next%1024+56320)))}return result.join("")},raw:function raw(callSite){var cooked=ES.ToObject(callSite,"bad callSite"),rawString=ES.ToObject(cooked.raw,"bad raw value"),len=rawString.length,literalsegments=ES.ToLength(len);if(literalsegments<=0)return"";for(var nextKey,next,nextSeg,nextSub,stringElements=[],nextIndex=0;nextIndex<literalsegments&&(nextKey=ES.ToString(nextIndex),nextSeg=ES.ToString(rawString[nextKey]),_push(stringElements,nextSeg),!(nextIndex+1>=literalsegments));)next=nextIndex+1<arguments.length?arguments[nextIndex+1]:"",nextSub=ES.ToString(next),_push(stringElements,nextSub),nextIndex+=1;return stringElements.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&overrideNative(String,"raw",StringShims.raw),defineProperties(String,StringShims);var stringRepeat=function repeat(s,times){if(times<1)return"";if(times%2)return repeat(s,times-1)+s;var half=repeat(s,times/2);return half+half},stringMaxLength=1/0,StringPrototypeShims={repeat:function repeat(times){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),numTimes=ES.ToInteger(times);if(numTimes<0||numTimes>=stringMaxLength)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return stringRepeat(thisStr,numTimes)},startsWith:function startsWith(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "startsWith" with a regex');var position,searchStr=ES.ToString(searchString);arguments.length>1&&(position=arguments[1]);var start=_max(ES.ToInteger(position),0);return _strSlice(S,start,start+searchStr.length)===searchStr},endsWith:function endsWith(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "endsWith" with a regex');var endPosition,searchStr=ES.ToString(searchString),len=S.length;arguments.length>1&&(endPosition=arguments[1]);var pos=void 0===endPosition?len:ES.ToInteger(endPosition),end=_min(_max(pos,0),len);return _strSlice(S,end-searchStr.length,end)===searchStr},includes:function includes(searchString){if(ES.IsRegExp(searchString))throw new TypeError('"includes" does not accept a RegExp');var position,searchStr=ES.ToString(searchString);return arguments.length>1&&(position=arguments[1]),-1!==_indexOf(this,searchStr,position)},codePointAt:function codePointAt(pos){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),position=ES.ToInteger(pos),length=thisStr.length;if(position>=0&&position<length){var first=thisStr.charCodeAt(position);if(first<55296||first>56319||position+1===length)return first;var second=thisStr.charCodeAt(position+1);return second<56320||second>57343?first:1024*(first-55296)+(second-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&overrideNative(String.prototype,"includes",StringPrototypeShims.includes),String.prototype.startsWith&&String.prototype.endsWith){var startsWithRejectsRegex=throwsError((function(){return"/a/".startsWith(/a/)})),startsWithHandlesInfinity=valueOrFalseIfThrows((function(){return!1==="abc".startsWith("a",1/0)}));startsWithRejectsRegex&&startsWithHandlesInfinity||(overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith),overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith))}if(hasSymbols){var startsWithSupportsSymbolMatch=valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".startsWith(re)}));startsWithSupportsSymbolMatch||overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith);var endsWithSupportsSymbolMatch=valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".endsWith(re)}));endsWithSupportsSymbolMatch||overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith);var includesSupportsSymbolMatch=valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".includes(re)}));includesSupportsSymbolMatch||overrideNative(String.prototype,"includes",StringPrototypeShims.includes)}defineProperties(String.prototype,StringPrototypeShims);var ws=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),trimRegexp=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),trimShim=function trim(){return ES.ToString(ES.RequireObjectCoercible(this)).replace(trimRegexp,"")},nonWS=["","",""].join(""),nonWSregex=new RegExp("["+nonWS+"]","g"),isBadHexRegex=/^[-+]0x[0-9a-f]+$/i,hasStringTrimBug=nonWS.trim().length!==nonWS.length;defineProperty(String.prototype,"trim",trimShim,hasStringTrimBug);var iteratorResult=function(x){return{value:x,done:0===arguments.length}},StringIterator=function(s){ES.RequireObjectCoercible(s),this._s=ES.ToString(s),this._i=0};StringIterator.prototype.next=function(){var s=this._s,i=this._i;if(void 0===s||i>=s.length)return this._s=void 0,iteratorResult();var second,len,first=s.charCodeAt(i);return len=first<55296||first>56319||i+1===s.length||(second=s.charCodeAt(i+1))<56320||second>57343?1:2,this._i=i+len,iteratorResult(s.substr(i,len))},addIterator(StringIterator.prototype),addIterator(String.prototype,(function(){return new StringIterator(this)}));var ArrayShims={from:function from(items){var mapFn,mapping,T,C=this;if(arguments.length>1&&(mapFn=arguments[1]),void 0===mapFn)mapping=!1;else{if(!ES.IsCallable(mapFn))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(T=arguments[2]),mapping=!0}var length,result,i,usingIterator=void 0!==(isArguments(items)||ES.GetMethod(items,$iterator$));if(usingIterator){result=ES.IsConstructor(C)?Object(new C):[];var next,nextValue,iterator=ES.GetIterator(items);for(i=0;!1!==(next=ES.IteratorStep(iterator));){nextValue=next.value;try{mapping&&(nextValue=void 0===T?mapFn(nextValue,i):_call(mapFn,T,nextValue,i)),result[i]=nextValue}catch(e){throw ES.IteratorClose(iterator,!0),e}i+=1}length=i}else{var value,arrayLike=ES.ToObject(items);for(length=ES.ToLength(arrayLike.length),result=ES.IsConstructor(C)?Object(new C(length)):new Array(length),i=0;i<length;++i)value=arrayLike[i],mapping&&(value=void 0===T?mapFn(value,i):_call(mapFn,T,value,i)),createDataPropertyOrThrow(result,i,value)}return result.length=length,result},of:function of(){for(var len=arguments.length,C=this,A=isArray(C)||!ES.IsCallable(C)?new Array(len):ES.Construct(C,[len]),k=0;k<len;++k)createDataPropertyOrThrow(A,k,arguments[k]);return A.length=len,A}};defineProperties(Array,ArrayShims),addDefaultSpecies(Array),defineProperties((ArrayIterator=function(array,kind){this.i=0,this.array=array,this.kind=kind}).prototype,{next:function(){var i=this.i,array=this.array;if(!(this instanceof ArrayIterator))throw new TypeError("Not an ArrayIterator");if(void 0!==array)for(var len=ES.ToLength(array.length);i<len;i++){var retval,kind=this.kind;return"key"===kind?retval=i:"value"===kind?retval=array[i]:"entry"===kind&&(retval=[i,array[i]]),this.i=i+1,iteratorResult(retval)}return this.array=void 0,iteratorResult()}}),addIterator(ArrayIterator.prototype);var arrayOfSupportsSubclassing=Array.of===ArrayShims.of||function(){var Foo=function Foo(len){this.length=len};Foo.prototype=[];var fooArr=Array.of.apply(Foo,[1,2]);return fooArr instanceof Foo&&2===fooArr.length}();arrayOfSupportsSubclassing||overrideNative(Array,"of",ArrayShims.of);var ArrayPrototypeShims={copyWithin:function copyWithin(target,start){var end,o=ES.ToObject(this),len=ES.ToLength(o.length),relativeTarget=ES.ToInteger(target),relativeStart=ES.ToInteger(start),to=relativeTarget<0?_max(len+relativeTarget,0):_min(relativeTarget,len),from=relativeStart<0?_max(len+relativeStart,0):_min(relativeStart,len);arguments.length>2&&(end=arguments[2]);var relativeEnd=void 0===end?len:ES.ToInteger(end),finalItem=relativeEnd<0?_max(len+relativeEnd,0):_min(relativeEnd,len),count=_min(finalItem-from,len-to),direction=1;for(from<to&&to<from+count&&(direction=-1,from+=count-1,to+=count-1);count>0;)from in o?o[to]=o[from]:delete o[to],from+=direction,to+=direction,count-=1;return o},fill:function fill(value){var start,end;arguments.length>1&&(start=arguments[1]),arguments.length>2&&(end=arguments[2]);var O=ES.ToObject(this),len=ES.ToLength(O.length);start=ES.ToInteger(void 0===start?0:start),end=ES.ToInteger(void 0===end?len:end);for(var relativeStart=start<0?_max(len+start,0):_min(start,len),relativeEnd=end<0?len+end:end,i=relativeStart;i<len&&i<relativeEnd;++i)O[i]=value;return O},find:function find(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#find: predicate must be a function");for(var value,thisArg=arguments.length>1?arguments[1]:null,i=0;i<length;i++)if(value=list[i],thisArg){if(_call(predicate,thisArg,value,i,list))return value}else if(predicate(value,i,list))return value},findIndex:function findIndex(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#findIndex: predicate must be a function");for(var thisArg=arguments.length>1?arguments[1]:null,i=0;i<length;i++)if(thisArg){if(_call(predicate,thisArg,list[i],i,list))return i}else if(predicate(list[i],i,list))return i;return-1},keys:function keys(){return new ArrayIterator(this,"key")},values:function values(){return new ArrayIterator(this,"value")},entries:function entries(){return new ArrayIterator(this,"entry")}};if(Array.prototype.keys&&!ES.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ES.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[$iterator$]&&(defineProperties(Array.prototype,{values:Array.prototype[$iterator$]}),Type.symbol(Symbol.unscopables)&&(Array.prototype[Symbol.unscopables].values=!0)),functionsHaveNames&&Array.prototype.values&&"values"!==Array.prototype.values.name){var originalArrayPrototypeValues=Array.prototype.values;overrideNative(Array.prototype,"values",(function values(){return ES.Call(originalArrayPrototypeValues,this,arguments)})),defineProperty(Array.prototype,$iterator$,Array.prototype.values,!0)}defineProperties(Array.prototype,ArrayPrototypeShims),1/[!0].indexOf(!0,-0)<0&&defineProperty(Array.prototype,"indexOf",(function indexOf(searchElement){var value=_arrayIndexOfApply(this,arguments);return 0===value&&1/value<0?0:value}),!0),addIterator(Array.prototype,(function(){return this.values()})),Object.getPrototypeOf&&addIterator(Object.getPrototypeOf([].values()));var arr,arrayFromSwallowsNegativeLengths=valueOrFalseIfThrows((function(){return 0===Array.from({length:-1}).length})),arrayFromHandlesIterables=1===(arr=Array.from([0].entries())).length&&isArray(arr[0])&&0===arr[0][0]&&0===arr[0][1];arrayFromSwallowsNegativeLengths&&arrayFromHandlesIterables||overrideNative(Array,"from",ArrayShims.from);var arrayFromHandlesUndefinedMapFunction=valueOrFalseIfThrows((function(){return Array.from([0],void 0)}));if(!arrayFromHandlesUndefinedMapFunction){var origArrayFrom=Array.from;overrideNative(Array,"from",(function from(items){return arguments.length>1&&void 0!==arguments[1]?ES.Call(origArrayFrom,this,arguments):_call(origArrayFrom,this,items)}))}var int32sAsOne=-(Math.pow(2,32)-1),toLengthsCorrectly=function(method,reversed){var obj={length:int32sAsOne};return obj[reversed?(obj.length>>>0)-1:0]=!0,valueOrFalseIfThrows((function(){return _call(method,obj,(function(){throw new RangeError("should not reach here")}),[]),!0}))};if(!toLengthsCorrectly(Array.prototype.forEach)){var originalForEach=Array.prototype.forEach;overrideNative(Array.prototype,"forEach",(function forEach(callbackFn){return ES.Call(originalForEach,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.map)){var originalMap=Array.prototype.map;overrideNative(Array.prototype,"map",(function map(callbackFn){return ES.Call(originalMap,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.filter)){var originalFilter=Array.prototype.filter;overrideNative(Array.prototype,"filter",(function filter(callbackFn){return ES.Call(originalFilter,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.some)){var originalSome=Array.prototype.some;overrideNative(Array.prototype,"some",(function some(callbackFn){return ES.Call(originalSome,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.every)){var originalEvery=Array.prototype.every;overrideNative(Array.prototype,"every",(function every(callbackFn){return ES.Call(originalEvery,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.reduce)){var originalReduce=Array.prototype.reduce;overrideNative(Array.prototype,"reduce",(function reduce(callbackFn){return ES.Call(originalReduce,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.reduceRight,!0)){var originalReduceRight=Array.prototype.reduceRight;overrideNative(Array.prototype,"reduceRight",(function reduceRight(callbackFn){return ES.Call(originalReduceRight,this.length>=0?this:[],arguments)}),!0)}var lacksOctalSupport=8!==Number("0o10"),lacksBinarySupport=2!==Number("0b10"),trimsNonWhitespace=_some(nonWS,(function(c){return 0===Number(c+0+c)}));if(lacksOctalSupport||lacksBinarySupport||trimsNonWhitespace){var OrigNumber=Number,binaryRegex=/^0b[01]+$/i,octalRegex=/^0o[0-7]+$/i,isBinary=binaryRegex.test.bind(binaryRegex),isOctal=octalRegex.test.bind(octalRegex),toPrimitive=function(O){var result;if("function"==typeof O.valueOf&&(result=O.valueOf(),Type.primitive(result)))return result;if("function"==typeof O.toString&&(result=O.toString(),Type.primitive(result)))return result;throw new TypeError("No default value")},hasNonWS=nonWSregex.test.bind(nonWSregex),isBadHex=isBadHexRegex.test.bind(isBadHexRegex),NumberShim=function(){var NumberShim=function Number(value){var primValue;"string"==typeof(primValue=arguments.length>0?Type.primitive(value)?value:toPrimitive(value,"number"):0)&&(primValue=ES.Call(trimShim,primValue),isBinary(primValue)?primValue=parseInt(_strSlice(primValue,2),2):isOctal(primValue)?primValue=parseInt(_strSlice(primValue,2),8):(hasNonWS(primValue)||isBadHex(primValue))&&(primValue=NaN));var receiver=this,valueOfSucceeds=valueOrFalseIfThrows((function(){return OrigNumber.prototype.valueOf.call(receiver),!0}));return receiver instanceof NumberShim&&!valueOfSucceeds?new OrigNumber(primValue):OrigNumber(primValue)};return NumberShim}();wrapConstructor(OrigNumber,NumberShim,{}),defineProperties(NumberShim,{NaN:OrigNumber.NaN,MAX_VALUE:OrigNumber.MAX_VALUE,MIN_VALUE:OrigNumber.MIN_VALUE,NEGATIVE_INFINITY:OrigNumber.NEGATIVE_INFINITY,POSITIVE_INFINITY:OrigNumber.POSITIVE_INFINITY}),Number=NumberShim,Value.redefine(globals,"Number",NumberShim)}var maxSafeInteger=Math.pow(2,53)-1;defineProperties(Number,{MAX_SAFE_INTEGER:maxSafeInteger,MIN_SAFE_INTEGER:-maxSafeInteger,EPSILON:2220446049250313e-31,parseInt:globals.parseInt,parseFloat:globals.parseFloat,isFinite:numberIsFinite,isInteger:function isInteger(value){return numberIsFinite(value)&&ES.ToInteger(value)===value},isSafeInteger:function isSafeInteger(value){return Number.isInteger(value)&&_abs(value)<=Number.MAX_SAFE_INTEGER},isNaN:numberIsNaN}),defineProperty(Number,"parseInt",globals.parseInt,Number.parseInt!==globals.parseInt),1===[,1].find((function(){return!0}))&&overrideNative(Array.prototype,"find",ArrayPrototypeShims.find),0!==[,1].findIndex((function(){return!0}))&&overrideNative(Array.prototype,"findIndex",ArrayPrototypeShims.findIndex);var FAKENULL,gpo,spo,isEnumerableOn=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),ensureEnumerable=function ensureEnumerable(obj,prop){supportsDescriptors&&isEnumerableOn(obj,prop)&&Object.defineProperty(obj,prop,{enumerable:!1})},sliceArgs=function sliceArgs(){for(var initial=Number(this),len=arguments.length,desiredArgCount=len-initial,args=new Array(desiredArgCount<0?0:desiredArgCount),i=initial;i<len;++i)args[i-initial]=arguments[i];return args},assignTo=function assignTo(source){return function assignToSource(target,key){return target[key]=source[key],target}},assignReducer=function(target,source){var symbols,sourceKeys=keys(Object(source));return ES.IsCallable(Object.getOwnPropertySymbols)&&(symbols=_filter(Object.getOwnPropertySymbols(Object(source)),isEnumerableOn(source))),_reduce(_concat(sourceKeys,symbols||[]),assignTo(source),target)},ObjectShims={assign:function(target,source){var to=ES.ToObject(target,"Cannot convert undefined or null to object");return _reduce(ES.Call(sliceArgs,1,arguments),assignReducer,to)},is:function is(a,b){return ES.SameValue(a,b)}},assignHasPendingExceptions=Object.assign&&Object.preventExtensions&&function(){var thrower=Object.preventExtensions({1:2});try{Object.assign(thrower,"xy")}catch(e){return"y"===thrower[1]}}();if(assignHasPendingExceptions&&overrideNative(Object,"assign",ObjectShims.assign),defineProperties(Object,ObjectShims),supportsDescriptors){var ES5ObjectShims={setPrototypeOf:function(Object,magic){var set,setPrototypeOf=function(O,proto){return function(O,proto){if(!ES.TypeIsObject(O))throw new TypeError("cannot set prototype on a non-object");if(null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("can only set prototype to an object or null"+proto)}(O,proto),_call(set,O,proto),O};try{set=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,_call(set,{},null)}catch(e){if(Object.prototype!=={}.__proto__)return;set=function(proto){this.__proto__=proto},setPrototypeOf.polyfill=setPrototypeOf(setPrototypeOf({},null),Object.prototype)instanceof Object}return setPrototypeOf}(Object)};defineProperties(Object,ES5ObjectShims)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(FAKENULL=Object.create(null),gpo=Object.getPrototypeOf,spo=Object.setPrototypeOf,Object.getPrototypeOf=function(o){var result=gpo(o);return result===FAKENULL?null:result},Object.setPrototypeOf=function(o,p){return spo(o,null===p?FAKENULL:p)},Object.setPrototypeOf.polyfill=!1);var objectKeysAcceptsPrimitives=!throwsError((function(){return Object.keys("foo")}));if(!objectKeysAcceptsPrimitives){var originalObjectKeys=Object.keys;overrideNative(Object,"keys",(function keys(value){return originalObjectKeys(ES.ToObject(value))})),keys=Object.keys}var objectKeysRejectsRegex=throwsError((function(){return Object.keys(/a/g)}));if(objectKeysRejectsRegex){var regexRejectingObjectKeys=Object.keys;overrideNative(Object,"keys",(function keys(value){if(Type.regex(value)){var regexKeys=[];for(var k in value)_hasOwnProperty(value,k)&&_push(regexKeys,k);return regexKeys}return regexRejectingObjectKeys(value)})),keys=Object.keys}if(Object.getOwnPropertyNames){var objectGOPNAcceptsPrimitives=!throwsError((function(){return Object.getOwnPropertyNames("foo")}));if(!objectGOPNAcceptsPrimitives){var cachedWindowNames="object"==typeof window?Object.getOwnPropertyNames(window):[],originalObjectGetOwnPropertyNames=Object.getOwnPropertyNames;overrideNative(Object,"getOwnPropertyNames",(function getOwnPropertyNames(value){var val=ES.ToObject(value);if("[object Window]"===_toString(val))try{return originalObjectGetOwnPropertyNames(val)}catch(e){return _concat([],cachedWindowNames)}return originalObjectGetOwnPropertyNames(val)}))}}if(Object.getOwnPropertyDescriptor){var objectGOPDAcceptsPrimitives=!throwsError((function(){return Object.getOwnPropertyDescriptor("foo","bar")}));if(!objectGOPDAcceptsPrimitives){var originalObjectGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;overrideNative(Object,"getOwnPropertyDescriptor",(function getOwnPropertyDescriptor(value,property){return originalObjectGetOwnPropertyDescriptor(ES.ToObject(value),property)}))}}if(Object.seal){var objectSealAcceptsPrimitives=!throwsError((function(){return Object.seal("foo")}));if(!objectSealAcceptsPrimitives){var originalObjectSeal=Object.seal;overrideNative(Object,"seal",(function seal(value){return ES.TypeIsObject(value)?originalObjectSeal(value):value}))}}if(Object.isSealed){var objectIsSealedAcceptsPrimitives=!throwsError((function(){return Object.isSealed("foo")}));if(!objectIsSealedAcceptsPrimitives){var originalObjectIsSealed=Object.isSealed;overrideNative(Object,"isSealed",(function isSealed(value){return!ES.TypeIsObject(value)||originalObjectIsSealed(value)}))}}if(Object.freeze){var objectFreezeAcceptsPrimitives=!throwsError((function(){return Object.freeze("foo")}));if(!objectFreezeAcceptsPrimitives){var originalObjectFreeze=Object.freeze;overrideNative(Object,"freeze",(function freeze(value){return ES.TypeIsObject(value)?originalObjectFreeze(value):value}))}}if(Object.isFrozen){var objectIsFrozenAcceptsPrimitives=!throwsError((function(){return Object.isFrozen("foo")}));if(!objectIsFrozenAcceptsPrimitives){var originalObjectIsFrozen=Object.isFrozen;overrideNative(Object,"isFrozen",(function isFrozen(value){return!ES.TypeIsObject(value)||originalObjectIsFrozen(value)}))}}if(Object.preventExtensions){var objectPreventExtensionsAcceptsPrimitives=!throwsError((function(){return Object.preventExtensions("foo")}));if(!objectPreventExtensionsAcceptsPrimitives){var originalObjectPreventExtensions=Object.preventExtensions;overrideNative(Object,"preventExtensions",(function preventExtensions(value){return ES.TypeIsObject(value)?originalObjectPreventExtensions(value):value}))}}if(Object.isExtensible){var objectIsExtensibleAcceptsPrimitives=!throwsError((function(){return Object.isExtensible("foo")}));if(!objectIsExtensibleAcceptsPrimitives){var originalObjectIsExtensible=Object.isExtensible;overrideNative(Object,"isExtensible",(function isExtensible(value){return!!ES.TypeIsObject(value)&&originalObjectIsExtensible(value)}))}}if(Object.getPrototypeOf){var objectGetProtoAcceptsPrimitives=!throwsError((function(){return Object.getPrototypeOf("foo")}));if(!objectGetProtoAcceptsPrimitives){var originalGetProto=Object.getPrototypeOf;overrideNative(Object,"getPrototypeOf",(function getPrototypeOf(value){return originalGetProto(ES.ToObject(value))}))}}var desc,hasFlags=supportsDescriptors&&((desc=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&ES.IsCallable(desc.get));if(supportsDescriptors&&!hasFlags){var regExpFlagsGetter=function flags(){if(!ES.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var result="";return this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.unicode&&(result+="u"),this.sticky&&(result+="y"),result};Value.getter(RegExp.prototype,"flags",regExpFlagsGetter)}var regex,regExpSupportsFlagsWithRegex=supportsDescriptors&&valueOrFalseIfThrows((function(){return"/a/i"===String(new RegExp(/a/g,"i"))})),regExpNeedsToSupportSymbolMatch=hasSymbols&&supportsDescriptors&&((regex=/./)[Symbol.match]=!1,RegExp(regex)===regex),regexToStringIsGeneric=valueOrFalseIfThrows((function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})})),regexToStringSupportsGenericFlags=regexToStringIsGeneric&&valueOrFalseIfThrows((function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})}));if(!regexToStringIsGeneric||!regexToStringSupportsGenericFlags){var origRegExpToString=RegExp.prototype.toString;defineProperty(RegExp.prototype,"toString",(function toString(){var R=ES.RequireObjectCoercible(this);return Type.regex(R)?_call(origRegExpToString,R):"/"+$String(R.source)+"/"+$String(R.flags)}),!0),Value.preserveToString(RegExp.prototype.toString,origRegExpToString)}if(supportsDescriptors&&(!regExpSupportsFlagsWithRegex||regExpNeedsToSupportSymbolMatch)){var flagsGetter=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,sourceDesc=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},legacySourceGetter=function(){return this.source},sourceGetter=ES.IsCallable(sourceDesc.get)?sourceDesc.get:legacySourceGetter,OrigRegExp=RegExp,RegExpShim=function RegExp(pattern,flags){var patternIsRegExp=ES.IsRegExp(pattern);return this instanceof RegExp||!patternIsRegExp||void 0!==flags||pattern.constructor!==RegExp?Type.regex(pattern)?new RegExp(ES.Call(sourceGetter,pattern),void 0===flags?ES.Call(flagsGetter,pattern):flags):(patternIsRegExp&&(pattern.source,void 0===flags&&pattern.flags),new OrigRegExp(pattern,flags)):pattern};wrapConstructor(OrigRegExp,RegExpShim,{$input:!0}),RegExp=RegExpShim,Value.redefine(globals,"RegExp",RegExpShim)}if(supportsDescriptors){var regexGlobals={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};_forEach(keys(regexGlobals),(function(prop){prop in RegExp&&!(regexGlobals[prop]in RegExp)&&Value.getter(RegExp,regexGlobals[prop],(function get(){return RegExp[prop]}))}))}addDefaultSpecies(RegExp);var inverseEpsilon=1/Number.EPSILON,roundTiesToEven=function roundTiesToEven(n){return n+inverseEpsilon-inverseEpsilon},BINARY_32_EPSILON=Math.pow(2,-23),BINARY_32_MAX_VALUE=Math.pow(2,127)*(2-BINARY_32_EPSILON),BINARY_32_MIN_VALUE=Math.pow(2,-126),E=Math.E,LOG2E=Math.LOG2E,LOG10E=Math.LOG10E,numberCLZ=Number.prototype.clz;delete Number.prototype.clz;var MathShims={acosh:function acosh(value){var x=Number(value);if(numberIsNaN(x)||value<1)return NaN;if(1===x)return 0;if(x===1/0)return x;var xInvSquared=1/(x*x);if(x<2)return _log1p(x-1+_sqrt(1-xInvSquared)*x);var halfX=x/2;return _log1p(halfX+_sqrt(1-xInvSquared)*halfX-1)+1/LOG2E},asinh:function asinh(value){var x=Number(value);if(0===x||!globalIsFinite(x))return x;var a=_abs(x),aSquared=a*a,s=_sign(x);return a<1?s*_log1p(a+aSquared/(_sqrt(aSquared+1)+1)):s*(_log1p(a/2+_sqrt(1+1/aSquared)*a/2-1)+1/LOG2E)},atanh:function atanh(value){var x=Number(value);if(0===x)return x;if(-1===x)return-1/0;if(1===x)return 1/0;if(numberIsNaN(x)||x<-1||x>1)return NaN;var a=_abs(x);return _sign(x)*_log1p(2*a/(1-a))/2},cbrt:function cbrt(value){var x=Number(value);if(0===x)return x;var result,negate=x<0;return negate&&(x=-x),result=x===1/0?1/0:(x/((result=_exp(_log(x)/3))*result)+2*result)/3,negate?-result:result},clz32:function clz32(value){var x=Number(value),number=ES.ToUint32(x);return 0===number?32:numberCLZ?ES.Call(numberCLZ,number):31-_floor(_log(number+.5)*LOG2E)},cosh:function cosh(value){var x=Number(value);if(0===x)return 1;if(numberIsNaN(x))return NaN;if(!globalIsFinite(x))return 1/0;var t=_exp(_abs(x)-1);return(t+1/(t*E*E))*(E/2)},expm1:function expm1(value){var x=Number(value);if(x===-1/0)return-1;if(!globalIsFinite(x)||0===x)return x;if(_abs(x)>.5)return _exp(x)-1;for(var t=x,sum=0,n=1;sum+t!==sum;)sum+=t,t*=x/(n+=1);return sum},hypot:function hypot(x,y){for(var result=0,largest=0,i=0;i<arguments.length;++i){var value=_abs(Number(arguments[i]));largest<value?(result*=largest/value*(largest/value),result+=1,largest=value):result+=value>0?value/largest*(value/largest):value}return largest===1/0?1/0:largest*_sqrt(result)},log2:function log2(value){return _log(value)*LOG2E},log10:function log10(value){return _log(value)*LOG10E},log1p:_log1p,sign:_sign,sinh:function sinh(value){var x=Number(value);if(!globalIsFinite(x)||0===x)return x;var a=_abs(x);if(a<1){var u=Math.expm1(a);return _sign(x)*u*(1+1/(u+1))/2}var t=_exp(a-1);return _sign(x)*(t-1/(t*E*E))*(E/2)},tanh:function tanh(value){var x=Number(value);return numberIsNaN(x)||0===x?x:x>=20?1:x<=-20?-1:(Math.expm1(x)-Math.expm1(-x))/(_exp(x)+_exp(-x))},trunc:function trunc(value){var x=Number(value);return x<0?-_floor(-x):_floor(x)},imul:function imul(x,y){var a=ES.ToUint32(x),b=ES.ToUint32(y),al=65535&a,bl=65535&b;return al*bl+((a>>>16&65535)*bl+al*(b>>>16&65535)<<16>>>0)|0},fround:function fround(x){var v=Number(x);if(0===v||v===1/0||v===-1/0||numberIsNaN(v))return v;var sign=_sign(v),abs=_abs(v);if(abs<BINARY_32_MIN_VALUE)return sign*roundTiesToEven(abs/BINARY_32_MIN_VALUE/BINARY_32_EPSILON)*BINARY_32_MIN_VALUE*BINARY_32_EPSILON;var a=(1+BINARY_32_EPSILON/Number.EPSILON)*abs,result=a-(a-abs);return result>BINARY_32_MAX_VALUE||numberIsNaN(result)?sign*(1/0):sign*result}},withinULPDistance=function withinULPDistance(result,expected,distance){return _abs(1-result/expected)/Number.EPSILON<(distance||8)};defineProperties(Math,MathShims),defineProperty(Math,"sinh",MathShims.sinh,Math.sinh(710)===1/0),defineProperty(Math,"cosh",MathShims.cosh,Math.cosh(710)===1/0),defineProperty(Math,"log1p",MathShims.log1p,-1e-17!==Math.log1p(-1e-17)),defineProperty(Math,"asinh",MathShims.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),defineProperty(Math,"asinh",MathShims.asinh,Math.asinh(1e300)===1/0),defineProperty(Math,"atanh",MathShims.atanh,0===Math.atanh(1e-300)),defineProperty(Math,"tanh",MathShims.tanh,-2e-17!==Math.tanh(-2e-17)),defineProperty(Math,"acosh",MathShims.acosh,Math.acosh(Number.MAX_VALUE)===1/0),defineProperty(Math,"acosh",MathShims.acosh,!withinULPDistance(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),defineProperty(Math,"cbrt",MathShims.cbrt,!withinULPDistance(Math.cbrt(1e-300),1e-100)),defineProperty(Math,"sinh",MathShims.sinh,-2e-17!==Math.sinh(-2e-17));var expm1OfTen=Math.expm1(10);defineProperty(Math,"expm1",MathShims.expm1,expm1OfTen>22025.465794806718||expm1OfTen<22025.465794806718);var origMathRound=Math.round,roundHandlesBoundaryConditions=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),smallestPositiveNumberWhereRoundBreaks=inverseEpsilon+1,largestPositiveNumberWhereRoundBreaks=2*inverseEpsilon-1,roundDoesNotIncreaseIntegers=[smallestPositiveNumberWhereRoundBreaks,largestPositiveNumberWhereRoundBreaks].every((function(num){return Math.round(num)===num}));defineProperty(Math,"round",(function round(x){var floor=_floor(x);return x-floor<.5?floor:-1===floor?-0:floor+1}),!roundHandlesBoundaryConditions||!roundDoesNotIncreaseIntegers),Value.preserveToString(Math.round,origMathRound);var origImul=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=MathShims.imul,Value.preserveToString(Math.imul,origImul)),2!==Math.imul.length&&overrideNative(Math,"imul",(function imul(x,y){return ES.Call(origImul,Math,arguments)}));var count,thenable,PromiseShim=function(){var setTimeout=globals.setTimeout;if("function"==typeof setTimeout||"object"==typeof setTimeout){ES.IsPromise=function(promise){return!!ES.TypeIsObject(promise)&&void 0!==promise._promise};var makeZeroTimeout,PromiseCapability=function(C){if(!ES.IsConstructor(C))throw new TypeError("Bad promise constructor");var capability=this;if(capability.resolve=void 0,capability.reject=void 0,capability.promise=new C((function(resolve,reject){if(void 0!==capability.resolve||void 0!==capability.reject)throw new TypeError("Bad Promise implementation!");capability.resolve=resolve,capability.reject=reject})),!ES.IsCallable(capability.resolve)||!ES.IsCallable(capability.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ES.IsCallable(window.postMessage)&&(makeZeroTimeout=function(){var timeouts=[];return window.addEventListener("message",(function(event){if(event.source===window&&"zero-timeout-message"===event.data){if(event.stopPropagation(),0===timeouts.length)return;_shift(timeouts)()}}),!0),function(fn){_push(timeouts,fn),window.postMessage("zero-timeout-message","*")}});var P,pr,Promise$prototype,Promise$prototype$then,enqueue=ES.IsCallable(globals.setImmediate)?globals.setImmediate:"object"==typeof process&&process.nextTick?process.nextTick:(P=globals.Promise,(pr=P&&P.resolve&&P.resolve())&&function(task){return pr.then(task)}||(ES.IsCallable(makeZeroTimeout)?makeZeroTimeout():function(task){setTimeout(task,0)})),PROMISE_IDENTITY=function(x){return x},PROMISE_THROWER=function(e){throw e},PROMISE_FAKE_CAPABILITY={},enqueuePromiseReactionJob=function(handler,capability,argument){enqueue((function(){promiseReactionJob(handler,capability,argument)}))},promiseReactionJob=function(handler,promiseCapability,argument){var handlerResult,f;if(promiseCapability===PROMISE_FAKE_CAPABILITY)return handler(argument);try{handlerResult=handler(argument),f=promiseCapability.resolve}catch(e){handlerResult=e,f=promiseCapability.reject}f(handlerResult)},fulfillPromise=function(promise,value){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.fulfillReactionHandler0,_promise.reactionCapability0,value),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+0],_promise[idx+2],value),promise[idx+0]=void 0,promise[idx+1]=void 0,promise[idx+2]=void 0;_promise.result=value,_promise.state=1,_promise.reactionLength=0},rejectPromise=function(promise,reason){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.rejectReactionHandler0,_promise.reactionCapability0,reason),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+1],_promise[idx+2],reason),promise[idx+0]=void 0,promise[idx+1]=void 0,promise[idx+2]=void 0;_promise.result=reason,_promise.state=2,_promise.reactionLength=0},createResolvingFunctions=function(promise){var alreadyResolved=!1;return{resolve:function(resolution){var then;if(!alreadyResolved){if(alreadyResolved=!0,resolution===promise)return rejectPromise(promise,new TypeError("Self resolution"));if(!ES.TypeIsObject(resolution))return fulfillPromise(promise,resolution);try{then=resolution.then}catch(e){return rejectPromise(promise,e)}if(!ES.IsCallable(then))return fulfillPromise(promise,resolution);enqueue((function(){promiseResolveThenableJob(promise,resolution,then)}))}},reject:function(reason){if(!alreadyResolved)return alreadyResolved=!0,rejectPromise(promise,reason)}}},optimizedThen=function(then,thenable,resolve,reject){then===Promise$prototype$then?_call(then,thenable,resolve,reject,PROMISE_FAKE_CAPABILITY):_call(then,thenable,resolve,reject)},promiseResolveThenableJob=function(promise,thenable,then){var resolvingFunctions=createResolvingFunctions(promise),resolve=resolvingFunctions.resolve,reject=resolvingFunctions.reject;try{optimizedThen(then,thenable,resolve,reject)}catch(e){reject(e)}},Promise=function(){var PromiseShim=function Promise(resolver){if(!(this instanceof PromiseShim))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ES.IsCallable(resolver))throw new TypeError("not a valid resolver");var promise=emulateES6construct(this,PromiseShim,Promise$prototype,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),resolvingFunctions=createResolvingFunctions(promise),reject=resolvingFunctions.reject;try{resolver(resolvingFunctions.resolve,reject)}catch(e){reject(e)}return promise};return PromiseShim}();Promise$prototype=Promise.prototype;var _promiseAllResolver=function(index,values,capability,remaining){var alreadyCalled=!1;return function(x){alreadyCalled||(alreadyCalled=!0,values[index]=x,0==--remaining.count&&(0,capability.resolve)(values))}};return defineProperties(Promise,{all:function all(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var iterator,iteratorRecord,capability=new PromiseCapability(C);try{return function(iteratorRecord,C,resultCapability){for(var next,nextValue,it=iteratorRecord.iterator,values=[],remaining={count:1},index=0;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}values[index]=void 0;var nextPromise=C.resolve(nextValue),resolveElement=_promiseAllResolver(index,values,resultCapability,remaining);remaining.count+=1,optimizedThen(nextPromise.then,nextPromise,resolveElement,resultCapability.reject),index+=1}return 0==--remaining.count&&(0,resultCapability.resolve)(values),resultCapability.promise}(iteratorRecord={iterator:iterator=ES.GetIterator(iterable),done:!1},C,capability)}catch(e){var exception=e;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}return(0,capability.reject)(exception),capability.promise}},race:function race(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var iterator,iteratorRecord,capability=new PromiseCapability(C);try{return function(iteratorRecord,C,resultCapability){for(var next,nextValue,nextPromise,it=iteratorRecord.iterator;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}nextPromise=C.resolve(nextValue),optimizedThen(nextPromise.then,nextPromise,resultCapability.resolve,resultCapability.reject)}return resultCapability.promise}(iteratorRecord={iterator:iterator=ES.GetIterator(iterable),done:!1},C,capability)}catch(e){var exception=e;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}return(0,capability.reject)(exception),capability.promise}},reject:function reject(reason){if(!ES.TypeIsObject(this))throw new TypeError("Bad promise constructor");var capability=new PromiseCapability(this);return(0,capability.reject)(reason),capability.promise},resolve:function resolve(v){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Bad promise constructor");if(ES.IsPromise(v)&&v.constructor===C)return v;var capability=new PromiseCapability(C);return(0,capability.resolve)(v),capability.promise}}),defineProperties(Promise$prototype,{catch:function(onRejected){return this.then(null,onRejected)},then:function then(onFulfilled,onRejected){var promise=this;if(!ES.IsPromise(promise))throw new TypeError("not a promise");var resultCapability,C=ES.SpeciesConstructor(promise,Promise),returnValueIsIgnored=arguments.length>2&&arguments[2]===PROMISE_FAKE_CAPABILITY;resultCapability=returnValueIsIgnored&&C===Promise?PROMISE_FAKE_CAPABILITY:new PromiseCapability(C);var value,fulfillReactionHandler=ES.IsCallable(onFulfilled)?onFulfilled:PROMISE_IDENTITY,rejectReactionHandler=ES.IsCallable(onRejected)?onRejected:PROMISE_THROWER,_promise=promise._promise;if(0===_promise.state){if(0===_promise.reactionLength)_promise.fulfillReactionHandler0=fulfillReactionHandler,_promise.rejectReactionHandler0=rejectReactionHandler,_promise.reactionCapability0=resultCapability;else{var idx=3*(_promise.reactionLength-1);_promise[idx+0]=fulfillReactionHandler,_promise[idx+1]=rejectReactionHandler,_promise[idx+2]=resultCapability}_promise.reactionLength+=1}else if(1===_promise.state)value=_promise.result,enqueuePromiseReactionJob(fulfillReactionHandler,resultCapability,value);else{if(2!==_promise.state)throw new TypeError("unexpected Promise state");value=_promise.result,enqueuePromiseReactionJob(rejectReactionHandler,resultCapability,value)}return resultCapability.promise}}),PROMISE_FAKE_CAPABILITY=new PromiseCapability(Promise),Promise$prototype$then=Promise$prototype.then,Promise}}();if(globals.Promise&&(delete globals.Promise.accept,delete globals.Promise.defer,delete globals.Promise.prototype.chain),"function"==typeof PromiseShim){defineProperties(globals,{Promise:PromiseShim});var promiseSupportsSubclassing=supportsSubclassing(globals.Promise,(function(S){return S.resolve(42).then((function(){}))instanceof S})),promiseIgnoresNonFunctionThenCallbacks=!throwsError((function(){return globals.Promise.reject(42).then(null,5).then(null,noop)})),promiseRequiresObjectContext=throwsError((function(){return globals.Promise.call(3,noop)})),promiseResolveBroken=function(Promise){var p=Promise.resolve(5);p.constructor={};var p2=Promise.resolve(p);try{p2.then(null,noop).then(null,noop)}catch(e){return!0}return p===p2}(globals.Promise),getsThenSynchronously=supportsDescriptors&&(count=0,thenable=Object.defineProperty({},"then",{get:function(){count+=1}}),Promise.resolve(thenable),1===count),BadResolverPromise=function BadResolverPromise(executor){var p=new Promise(executor);executor(3,(function(){})),this.then=p.then,this.constructor=BadResolverPromise};BadResolverPromise.prototype=Promise.prototype,BadResolverPromise.all=Promise.all;var hasBadResolverPromise=valueOrFalseIfThrows((function(){return!!BadResolverPromise.all([1,2])}));if(promiseSupportsSubclassing&&promiseIgnoresNonFunctionThenCallbacks&&promiseRequiresObjectContext&&!promiseResolveBroken&&getsThenSynchronously&&!hasBadResolverPromise||(Promise=PromiseShim,overrideNative(globals,"Promise",PromiseShim)),1!==Promise.all.length){var origAll=Promise.all;overrideNative(Promise,"all",(function all(iterable){return ES.Call(origAll,this,arguments)}))}if(1!==Promise.race.length){var origRace=Promise.race;overrideNative(Promise,"race",(function race(iterable){return ES.Call(origRace,this,arguments)}))}if(1!==Promise.resolve.length){var origResolve=Promise.resolve;overrideNative(Promise,"resolve",(function resolve(x){return ES.Call(origResolve,this,arguments)}))}if(1!==Promise.reject.length){var origReject=Promise.reject;overrideNative(Promise,"reject",(function reject(r){return ES.Call(origReject,this,arguments)}))}ensureEnumerable(Promise,"all"),ensureEnumerable(Promise,"race"),ensureEnumerable(Promise,"resolve"),ensureEnumerable(Promise,"reject"),addDefaultSpecies(Promise)}var s,m,testOrder=function(a){var b=keys(_reduce(a,(function(o,k){return o[k]=!0,o}),{}));return a.join(":")===b.join(":")},preservesInsertionOrder=testOrder(["z","a","bb"]),preservesNumericInsertionOrder=testOrder(["z",1,"a","3",2]);if(supportsDescriptors){var fastkey=function fastkey(key,skipInsertionOrderCheck){return skipInsertionOrderCheck||preservesInsertionOrder?isNullOrUndefined(key)?"^"+ES.ToString(key):"string"==typeof key?"$"+key:"number"==typeof key?preservesNumericInsertionOrder?key:"n"+key:"boolean"==typeof key?"b"+key:null:null},emptyObject=function emptyObject(){return Object.create?Object.create(null):{}},addIterableToMap=function addIterableToMap(MapConstructor,map,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,(function(entry){if(!ES.TypeIsObject(entry))throw new TypeError("Iterator value "+entry+" is not an entry object");map.set(entry[0],entry[1])}));else if(iterable instanceof MapConstructor)_call(MapConstructor.prototype.forEach,iterable,(function(value,key){map.set(key,value)}));else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=map.set,!ES.IsCallable(adder))throw new TypeError("bad map");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextItem=next.value;try{if(!ES.TypeIsObject(nextItem))throw new TypeError("Iterator value "+nextItem+" is not an entry object");_call(adder,map,nextItem[0],nextItem[1])}catch(e){throw ES.IteratorClose(iter,!0),e}}}},addIterableToSet=function addIterableToSet(SetConstructor,set,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,(function(value){set.add(value)}));else if(iterable instanceof SetConstructor)_call(SetConstructor.prototype.forEach,iterable,(function(value){set.add(value)}));else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=set.add,!ES.IsCallable(adder))throw new TypeError("bad set");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextValue=next.value;try{_call(adder,set,nextValue)}catch(e){throw ES.IteratorClose(iter,!0),e}}}},collectionShims={Map:function(){var empty={},MapEntry=function MapEntry(key,value){this.key=key,this.value=value,this.next=null,this.prev=null};MapEntry.prototype.isRemoved=function isRemoved(){return this.key===empty};var Map$prototype,requireMapSlot=function requireMapSlot(map,method){if(!ES.TypeIsObject(map)||!function isMap(map){return!!map._es6map}(map))throw new TypeError("Method Map.prototype."+method+" called on incompatible receiver "+ES.ToString(map))},MapIterator=function MapIterator(map,kind){requireMapSlot(map,"[[MapIterator]]"),this.head=map._head,this.i=this.head,this.kind=kind};addIterator(MapIterator.prototype={isMapIterator:!0,next:function next(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var result,i=this.i,kind=this.kind,head=this.head;if(void 0===this.i)return iteratorResult();for(;i.isRemoved()&&i!==head;)i=i.prev;for(;i.next!==head;)if(!(i=i.next).isRemoved())return result="key"===kind?i.key:"value"===kind?i.value:[i.key,i.value],this.i=i,iteratorResult(result);return this.i=void 0,iteratorResult()}});var MapShim=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var map=emulateES6construct(this,Map,Map$prototype,{_es6map:!0,_head:null,_map:OrigMap?new OrigMap:null,_size:0,_storage:emptyObject()}),head=new MapEntry(null,null);return head.next=head.prev=head,map._head=head,arguments.length>0&&addIterableToMap(Map,map,arguments[0]),map};return Map$prototype=MapShim.prototype,Value.getter(Map$prototype,"size",(function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size})),defineProperties(Map$prototype,{get:function get(key){var entry;requireMapSlot(this,"get");var fkey=fastkey(key,!0);if(null!==fkey)return(entry=this._storage[fkey])?entry.value:void 0;if(this._map)return(entry=origMapGet.call(this._map,key))?entry.value:void 0;for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value},has:function has(key){requireMapSlot(this,"has");var fkey=fastkey(key,!0);if(null!==fkey)return void 0!==this._storage[fkey];if(this._map)return origMapHas.call(this._map,key);for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return!0;return!1},set:function set(key,value){requireMapSlot(this,"set");var entry,head=this._head,i=head,fkey=fastkey(key,!0);if(null!==fkey){if(void 0!==this._storage[fkey])return this._storage[fkey].value=value,this;entry=this._storage[fkey]=new MapEntry(key,value),i=head.prev}else this._map&&(origMapHas.call(this._map,key)?origMapGet.call(this._map,key).value=value:(entry=new MapEntry(key,value),origMapSet.call(this._map,key,entry),i=head.prev));for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value=value,this;return entry=entry||new MapEntry(key,value),ES.SameValue(-0,key)&&(entry.key=0),entry.next=this._head,entry.prev=this._head.prev,entry.prev.next=entry,entry.next.prev=entry,this._size+=1,this},delete:function(key){requireMapSlot(this,"delete");var head=this._head,i=head,fkey=fastkey(key,!0);if(null!==fkey){if(void 0===this._storage[fkey])return!1;i=this._storage[fkey].prev,delete this._storage[fkey]}else if(this._map){if(!origMapHas.call(this._map,key))return!1;i=origMapGet.call(this._map,key).prev,origMapDelete.call(this._map,key)}for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.key=empty,i.value=empty,i.prev.next=i.next,i.next.prev=i.prev,this._size-=1,!0;return!1},clear:function clear(){requireMapSlot(this,"clear"),this._map=OrigMap?new OrigMap:null,this._size=0,this._storage=emptyObject();for(var head=this._head,i=head,p=i.next;(i=p)!==head;)i.key=empty,i.value=empty,p=i.next,i.next=i.prev=head;head.next=head.prev=head},keys:function keys(){return requireMapSlot(this,"keys"),new MapIterator(this,"key")},values:function values(){return requireMapSlot(this,"values"),new MapIterator(this,"value")},entries:function entries(){return requireMapSlot(this,"entries"),new MapIterator(this,"key+value")},forEach:function forEach(callback){requireMapSlot(this,"forEach");for(var context=arguments.length>1?arguments[1]:null,it=this.entries(),entry=it.next();!entry.done;entry=it.next())context?_call(callback,context,entry.value[1],entry.value[0],this):callback(entry.value[1],entry.value[0],this)}}),addIterator(Map$prototype,Map$prototype.entries),MapShim}(),Set:function(){var Set$prototype,requireSetSlot=function requireSetSlot(set,method){if(!ES.TypeIsObject(set)||!function isSet(set){return set._es6set&&void 0!==set._storage}(set))throw new TypeError("Set.prototype."+method+" called on incompatible receiver "+ES.ToString(set))},SetShim=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var set=emulateES6construct(this,Set,Set$prototype,{_es6set:!0,"[[SetData]]":null,_storage:emptyObject()});if(!set._es6set)throw new TypeError("bad set");return arguments.length>0&&addIterableToSet(Set,set,arguments[0]),set};Set$prototype=SetShim.prototype;var ensureMap=function ensureMap(set){if(!set["[[SetData]]"]){var m=new collectionShims.Map;set["[[SetData]]"]=m,_forEach(keys(set._storage),(function(key){var k=function(key){var k=key;if("^null"===k)return null;if("^undefined"!==k){var first=k.charAt(0);return"$"===first?_strSlice(k,1):"n"===first?+_strSlice(k,1):"b"===first?"btrue"===k:+k}}(key);m.set(k,k)})),set["[[SetData]]"]=m}set._storage=null};Value.getter(SetShim.prototype,"size",(function(){return requireSetSlot(this,"size"),this._storage?keys(this._storage).length:(ensureMap(this),this["[[SetData]]"].size)})),defineProperties(SetShim.prototype,{has:function has(key){var fkey;return requireSetSlot(this,"has"),this._storage&&null!==(fkey=fastkey(key))?!!this._storage[fkey]:(ensureMap(this),this["[[SetData]]"].has(key))},add:function add(key){var fkey;return requireSetSlot(this,"add"),this._storage&&null!==(fkey=fastkey(key))?(this._storage[fkey]=!0,this):(ensureMap(this),this["[[SetData]]"].set(key,key),this)},delete:function(key){var fkey;if(requireSetSlot(this,"delete"),this._storage&&null!==(fkey=fastkey(key))){var hasFKey=_hasOwnProperty(this._storage,fkey);return delete this._storage[fkey]&&hasFKey}return ensureMap(this),this["[[SetData]]"].delete(key)},clear:function clear(){requireSetSlot(this,"clear"),this._storage&&(this._storage=emptyObject()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function values(){return requireSetSlot(this,"values"),ensureMap(this),new SetIterator(this["[[SetData]]"].values())},entries:function entries(){return requireSetSlot(this,"entries"),ensureMap(this),new SetIterator(this["[[SetData]]"].entries())},forEach:function forEach(callback){requireSetSlot(this,"forEach");var context=arguments.length>1?arguments[1]:null,entireSet=this;ensureMap(entireSet),this["[[SetData]]"].forEach((function(value,key){context?_call(callback,context,key,key,entireSet):callback(key,key,entireSet)}))}}),defineProperty(SetShim.prototype,"keys",SetShim.prototype.values,!0),addIterator(SetShim.prototype,SetShim.prototype.values);var SetIterator=function SetIterator(it){this.it=it};return SetIterator.prototype={isSetIterator:!0,next:function next(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},addIterator(SetIterator.prototype),SetShim}()},isGoogleTranslate=globals.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(isGoogleTranslate&&(globals.Set=collectionShims.Set),globals.Map||globals.Set){var mapAcceptsArguments=valueOrFalseIfThrows((function(){return 2===new Map([[1,2]]).get(1)}));mapAcceptsArguments||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,globals.Map.prototype),m},globals.Map.prototype=create(OrigMap.prototype),defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var testMap=new Map,mapUsesSameValueZero=((m=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,m),m.get(0)===m&&m.get(-0)===m&&m.has(0)&&m.has(-0)),mapSupportsChaining=testMap.set(1,2)===testMap;mapUsesSameValueZero&&mapSupportsChaining||overrideNative(Map.prototype,"set",(function set(k,v){return _call(origMapSet,this,0===k?0:k,v),this})),mapUsesSameValueZero||(defineProperties(Map.prototype,{get:function get(k){return _call(origMapGet,this,0===k?0:k)},has:function has(k){return _call(origMapHas,this,0===k?0:k)}},!0),Value.preserveToString(Map.prototype.get,origMapGet),Value.preserveToString(Map.prototype.has,origMapHas));var testSet=new Set,setUsesSameValueZero=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&((s=testSet).delete(0),s.add(-0),!s.has(0)),setSupportsChaining=testSet.add(1)===testSet;if(!setUsesSameValueZero||!setSupportsChaining){var origSetAdd=Set.prototype.add;Set.prototype.add=function add(v){return _call(origSetAdd,this,0===v?0:v),this},Value.preserveToString(Set.prototype.add,origSetAdd)}if(!setUsesSameValueZero){var origSetHas=Set.prototype.has;Set.prototype.has=function has(v){return _call(origSetHas,this,0===v?0:v)},Value.preserveToString(Set.prototype.has,origSetHas);var origSetDel=Set.prototype.delete;Set.prototype.delete=function SetDelete(v){return _call(origSetDel,this,0===v?0:v)},Value.preserveToString(Set.prototype.delete,origSetDel)}var mapSupportsSubclassing=supportsSubclassing(globals.Map,(function(M){var m=new M([]);return m.set(42,42),m instanceof M})),mapFailsToSupportSubclassing=Object.setPrototypeOf&&!mapSupportsSubclassing,mapRequiresNew=function(){try{return!(globals.Map()instanceof globals.Map)}catch(e){return e instanceof TypeError}}();0===globals.Map.length&&!mapFailsToSupportSubclassing&&mapRequiresNew||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,Map.prototype),m},globals.Map.prototype=OrigMap.prototype,defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var setSupportsSubclassing=supportsSubclassing(globals.Set,(function(S){var s=new S([]);return s.add(42,42),s instanceof S})),setFailsToSupportSubclassing=Object.setPrototypeOf&&!setSupportsSubclassing,setRequiresNew=function(){try{return!(globals.Set()instanceof globals.Set)}catch(e){return e instanceof TypeError}}();if(0!==globals.Set.length||setFailsToSupportSubclassing||!setRequiresNew){var OrigSet=globals.Set;globals.Set=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');var s=new OrigSet;return arguments.length>0&&addIterableToSet(Set,s,arguments[0]),delete s.constructor,Object.setPrototypeOf(s,Set.prototype),s},globals.Set.prototype=OrigSet.prototype,defineProperty(globals.Set.prototype,"constructor",globals.Set,!0),Value.preserveToString(globals.Set,OrigSet)}var newMap=new globals.Map,mapIterationThrowsStopIterator=!valueOrFalseIfThrows((function(){return newMap.keys().next().done}));if(("function"!=typeof globals.Map.prototype.clear||0!==(new globals.Set).size||0!==newMap.size||"function"!=typeof globals.Map.prototype.keys||"function"!=typeof globals.Set.prototype.keys||"function"!=typeof globals.Map.prototype.forEach||"function"!=typeof globals.Set.prototype.forEach||isCallableWithoutNew(globals.Map)||isCallableWithoutNew(globals.Set)||"function"!=typeof newMap.keys().next||mapIterationThrowsStopIterator||!mapSupportsSubclassing)&&defineProperties(globals,{Map:collectionShims.Map,Set:collectionShims.Set},!0),globals.Set.prototype.keys!==globals.Set.prototype.values&&defineProperty(globals.Set.prototype,"keys",globals.Set.prototype.values,!0),addIterator(Object.getPrototypeOf((new globals.Map).keys())),addIterator(Object.getPrototypeOf((new globals.Set).keys())),functionsHaveNames&&"has"!==globals.Set.prototype.has.name){var anonymousSetHas=globals.Set.prototype.has;overrideNative(globals.Set.prototype,"has",(function has(key){return _call(anonymousSetHas,this,key)}))}}defineProperties(globals,collectionShims),addDefaultSpecies(globals.Map),addDefaultSpecies(globals.Set)}var throwUnlessTargetIsObject=function throwUnlessTargetIsObject(target){if(!ES.TypeIsObject(target))throw new TypeError("target must be an object")},ReflectShims={apply:function apply(){return ES.Call(ES.Call,null,arguments)},construct:function construct(constructor,args){if(!ES.IsConstructor(constructor))throw new TypeError("First argument must be a constructor.");var newTarget=arguments.length>2?arguments[2]:constructor;if(!ES.IsConstructor(newTarget))throw new TypeError("new.target must be a constructor.");return ES.Construct(constructor,args,newTarget,"internal")},deleteProperty:function deleteProperty(target,key){if(throwUnlessTargetIsObject(target),supportsDescriptors){var desc=Object.getOwnPropertyDescriptor(target,key);if(desc&&!desc.configurable)return!1}return delete target[key]},has:function has(target,key){return throwUnlessTargetIsObject(target),key in target}};Object.getOwnPropertyNames&&Object.assign(ReflectShims,{ownKeys:function ownKeys(target){throwUnlessTargetIsObject(target);var keys=Object.getOwnPropertyNames(target);return ES.IsCallable(Object.getOwnPropertySymbols)&&_pushApply(keys,Object.getOwnPropertySymbols(target)),keys}});var callAndCatchException=function ConvertExceptionToBoolean(func){return!throwsError(func)};if(Object.preventExtensions&&Object.assign(ReflectShims,{isExtensible:function isExtensible(target){return throwUnlessTargetIsObject(target),Object.isExtensible(target)},preventExtensions:function preventExtensions(target){return throwUnlessTargetIsObject(target),callAndCatchException((function(){return Object.preventExtensions(target)}))}}),supportsDescriptors){var internalGet=function get(target,key,receiver){var desc=Object.getOwnPropertyDescriptor(target,key);if(!desc){var parent=Object.getPrototypeOf(target);if(null===parent)return;return internalGet(parent,key,receiver)}return"value"in desc?desc.value:desc.get?ES.Call(desc.get,receiver):void 0},internalSet=function set(target,key,value,receiver){var desc=Object.getOwnPropertyDescriptor(target,key);if(!desc){var parent=Object.getPrototypeOf(target);if(null!==parent)return internalSet(parent,key,value,receiver);desc={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in desc?!!desc.writable&&!!ES.TypeIsObject(receiver)&&(Object.getOwnPropertyDescriptor(receiver,key)?Reflect.defineProperty(receiver,key,{value:value}):Reflect.defineProperty(receiver,key,{value:value,writable:!0,enumerable:!0,configurable:!0})):!!desc.set&&(_call(desc.set,receiver,value),!0)};Object.assign(ReflectShims,{defineProperty:function defineProperty(target,propertyKey,attributes){return throwUnlessTargetIsObject(target),callAndCatchException((function(){return Object.defineProperty(target,propertyKey,attributes)}))},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,propertyKey){return throwUnlessTargetIsObject(target),Object.getOwnPropertyDescriptor(target,propertyKey)},get:function get(target,key){throwUnlessTargetIsObject(target);var receiver=arguments.length>2?arguments[2]:target;return internalGet(target,key,receiver)},set:function set(target,key,value){throwUnlessTargetIsObject(target);var receiver=arguments.length>3?arguments[3]:target;return internalSet(target,key,value,receiver)}})}if(Object.getPrototypeOf){var objectDotGetPrototypeOf=Object.getPrototypeOf;ReflectShims.getPrototypeOf=function getPrototypeOf(target){return throwUnlessTargetIsObject(target),objectDotGetPrototypeOf(target)}}if(Object.setPrototypeOf&&ReflectShims.getPrototypeOf){var willCreateCircularPrototype=function(object,lastProto){for(var proto=lastProto;proto;){if(object===proto)return!0;proto=ReflectShims.getPrototypeOf(proto)}return!1};Object.assign(ReflectShims,{setPrototypeOf:function setPrototypeOf(object,proto){if(throwUnlessTargetIsObject(object),null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("proto must be an object or null");return proto===Reflect.getPrototypeOf(object)||!(Reflect.isExtensible&&!Reflect.isExtensible(object))&&!willCreateCircularPrototype(object,proto)&&(Object.setPrototypeOf(object,proto),!0)}})}var defineOrOverrideReflectProperty=function(key,shim){ES.IsCallable(globals.Reflect[key])?valueOrFalseIfThrows((function(){return globals.Reflect[key](1),globals.Reflect[key](NaN),globals.Reflect[key](!0),!0}))&&overrideNative(globals.Reflect,key,shim):defineProperty(globals.Reflect,key,shim)};Object.keys(ReflectShims).forEach((function(key){defineOrOverrideReflectProperty(key,ReflectShims[key])}));var originalReflectGetProto=globals.Reflect.getPrototypeOf;if(functionsHaveNames&&originalReflectGetProto&&"getPrototypeOf"!==originalReflectGetProto.name&&overrideNative(globals.Reflect,"getPrototypeOf",(function getPrototypeOf(target){return _call(originalReflectGetProto,globals.Reflect,target)})),globals.Reflect.setPrototypeOf&&valueOrFalseIfThrows((function(){return globals.Reflect.setPrototypeOf(1,{}),!0}))&&overrideNative(globals.Reflect,"setPrototypeOf",ReflectShims.setPrototypeOf),globals.Reflect.defineProperty&&(valueOrFalseIfThrows((function(){var basic=!globals.Reflect.defineProperty(1,"test",{value:1}),extensible="function"!=typeof Object.preventExtensions||!globals.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return basic&&extensible}))||overrideNative(globals.Reflect,"defineProperty",ReflectShims.defineProperty)),globals.Reflect.construct&&(valueOrFalseIfThrows((function(){var F=function F(){};return globals.Reflect.construct((function(){}),[],F)instanceof F}))||overrideNative(globals.Reflect,"construct",ReflectShims.construct)),"Invalid Date"!==String(new Date(NaN))){var dateToString=Date.prototype.toString,shimmedDateToString=function toString(){var valueOf=+this;return valueOf!=valueOf?"Invalid Date":ES.Call(dateToString,this)};overrideNative(Date.prototype,"toString",shimmedDateToString)}var stringHTMLshims={anchor:function anchor(name){return ES.CreateHTML(this,"a","name",name)},big:function big(){return ES.CreateHTML(this,"big","","")},blink:function blink(){return ES.CreateHTML(this,"blink","","")},bold:function bold(){return ES.CreateHTML(this,"b","","")},fixed:function fixed(){return ES.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(color){return ES.CreateHTML(this,"font","color",color)},fontsize:function fontsize(size){return ES.CreateHTML(this,"font","size",size)},italics:function italics(){return ES.CreateHTML(this,"i","","")},link:function link(url){return ES.CreateHTML(this,"a","href",url)},small:function small(){return ES.CreateHTML(this,"small","","")},strike:function strike(){return ES.CreateHTML(this,"strike","","")},sub:function sub(){return ES.CreateHTML(this,"sub","","")},sup:function sub(){return ES.CreateHTML(this,"sup","","")}};_forEach(Object.keys(stringHTMLshims),(function(key){var method=String.prototype[key],shouldOverwrite=!1;if(ES.IsCallable(method)){var output=_call(method,"",' " '),quotesCount=_concat([],output.match(/"/g)).length;shouldOverwrite=output!==output.toLowerCase()||quotesCount>2}else shouldOverwrite=!0;shouldOverwrite&&overrideNative(String.prototype,key,stringHTMLshims[key])}));var JSONstringifiesSymbols=function(){if(!hasSymbols)return!1;var stringify="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!stringify)return!1;if(void 0!==stringify(Symbol()))return!0;if("[null]"!==stringify([Symbol()]))return!0;var obj={a:Symbol()};return obj[Symbol()]=!0,"{}"!==stringify(obj)}(),JSONstringifyAcceptsObjectSymbol=valueOrFalseIfThrows((function(){return!hasSymbols||"{}"===JSON.stringify(Object(Symbol()))&&"[{}]"===JSON.stringify([Object(Symbol())])}));if(JSONstringifiesSymbols||!JSONstringifyAcceptsObjectSymbol){var origStringify=JSON.stringify;overrideNative(JSON,"stringify",(function stringify(value){if("symbol"!=typeof value){var replacer;arguments.length>1&&(replacer=arguments[1]);var args=[value];if(isArray(replacer))args.push(replacer);else{var replaceFn=ES.IsCallable(replacer)?replacer:null,wrappedReplacer=function(key,val){var parsedValue=replaceFn?_call(replaceFn,this,key,val):val;if("symbol"!=typeof parsedValue)return Type.symbol(parsedValue)?assignTo({})(parsedValue):parsedValue};args.push(wrappedReplacer)}return arguments.length>2&&args.push(arguments[2]),origStringify.apply(this,args)}}))}return globals})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}).call(this,__webpack_require__(43),__webpack_require__(58))},function(module,exports,__webpack_require__){"use strict";var supportsDescriptors=__webpack_require__(44).supportsDescriptors,functionsHaveNames=__webpack_require__(295)(),getPolyfill=__webpack_require__(445),defineProperty=Object.defineProperty,TypeErr=TypeError;module.exports=function shimName(){var polyfill=getPolyfill();if(functionsHaveNames)return polyfill;if(!supportsDescriptors)throw new TypeErr("Shimming Function.prototype.name support requires ES5 property descriptor support.");var functionProto=Function.prototype;return defineProperty(functionProto,"name",{configurable:!0,enumerable:!1,get:function(){var name=polyfill.call(this);return this!==functionProto&&defineProperty(this,"name",{configurable:!0,enumerable:!1,value:name,writable:!1}),name}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var slice=Array.prototype.slice,isArgs=__webpack_require__(294),origKeys=Object.keys,keysShim=origKeys?function keys(o){return origKeys(o)}:__webpack_require__(444),originalKeys=Object.keys;keysShim.shim=function shimObjectKeys(){Object.keys?function(){var args=Object.keys(arguments);return args&&args.length===arguments.length}(1,2)||(Object.keys=function keys(object){return isArgs(object)?originalKeys(slice.call(object)):originalKeys(object)}):Object.keys=keysShim;return Object.keys||keysShim},module.exports=keysShim},function(module,exports,__webpack_require__){"use strict";var keysShim;if(!Object.keys){var has=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArgs=__webpack_require__(294),isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call((function(){}),"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{if(!excludedKeys["$"+k]&&has.call(window,k)&&null!==window[k]&&"object"==typeof window[k])try{equalsConstructorPrototype(window[k])}catch(e){return!0}}catch(e){return!0}return!1}();keysShim=function keys(object){var isObject=null!==object&&"object"==typeof object,isFunction="[object Function]"===toStr.call(object),isArguments=isArgs(object),isString=isObject&&"[object String]"===toStr.call(object),theKeys=[];if(!isObject&&!isFunction&&!isArguments)throw new TypeError("Object.keys called on a non-object");var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object.length>0&&!has.call(object,0))for(var i=0;i<object.length;++i)theKeys.push(String(i));if(isArguments&&object.length>0)for(var j=0;j<object.length;++j)theKeys.push(String(j));else for(var name in object)skipProto&&"prototype"===name||!has.call(object,name)||theKeys.push(String(name));if(hasDontEnumBug)for(var skipConstructor=function(o){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(o);try{return equalsConstructorPrototype(o)}catch(e){return!1}}(object),k=0;k<dontEnums.length;++k)skipConstructor&&"constructor"===dontEnums[k]||!has.call(object,dontEnums[k])||theKeys.push(dontEnums[k]);return theKeys}}module.exports=keysShim},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(446);module.exports=function getPolyfill(){return implementation}},function(module,exports,__webpack_require__){"use strict";var IsCallable=__webpack_require__(87),functionsHaveNames=__webpack_require__(295)(),callBound=__webpack_require__(32),$functionToString=callBound("Function.prototype.toString"),$stringMatch=callBound("String.prototype.match"),classRegex=/^class /,regex=/\s*function\s+([^(\s]*)\s*/,functionProto=Function.prototype;module.exports=function getName(){if(!function isClassConstructor(fn){if(IsCallable(fn))return!1;if("function"!=typeof fn)return!1;try{return!!$stringMatch($functionToString(fn),classRegex)}catch(e){}return!1}(this)&&!IsCallable(this))throw new TypeError("Function.prototype.name sham getter called on non-function");if(functionsHaveNames)return this.name;if(this===functionProto)return"";var str=$functionToString(this),match=$stringMatch(str,regex);return match&&match[1]}},function(module,exports,__webpack_require__){"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr=Object.prototype.toString;module.exports=function bind(that){var target=this;if("function"!=typeof target||"[object Function]"!==toStr.call(target))throw new TypeError(ERROR_MESSAGE+target);for(var bound,args=slice.call(arguments,1),binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))},boundLength=Math.max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)boundArgs.push("$"+i);if(bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder),target.prototype){var Empty=function Empty(){};Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null}return bound}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(449)(),__webpack_require__(462)},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(44),getPolyfill=__webpack_require__(450);module.exports=function shimArrayPrototypeIncludes(){var polyfill=getPolyfill();return define(Array.prototype,{includes:polyfill},{includes:function(){return Array.prototype.includes!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(451);module.exports=function getPolyfill(){return Array.prototype.includes||implementation}},function(module,exports,__webpack_require__){"use strict";var ToInteger=__webpack_require__(297),ToLength=__webpack_require__(458),ToObject=__webpack_require__(459),SameValueZero=__webpack_require__(461),$isNaN=__webpack_require__(133),$isFinite=__webpack_require__(229),GetIntrinsic=__webpack_require__(13),callBound=__webpack_require__(32),isString=__webpack_require__(231),$charAt=callBound("String.prototype.charAt"),$indexOf=GetIntrinsic("%Array.prototype.indexOf%");module.exports=function includes(searchElement){var fromIndex=arguments.length>1?ToInteger(arguments[1]):0;if($indexOf&&!$isNaN(searchElement)&&$isFinite(fromIndex)&&void 0!==searchElement)return $indexOf.apply(this,arguments)>-1;var O=ToObject(this),length=ToLength(O.length);if(0===length)return!1;for(var k=fromIndex>=0?fromIndex:Math.max(0,length+fromIndex);k<length;){if(SameValueZero(searchElement,isString(O)?$charAt(O,k):O[k]))return!0;k+=1}return!1}},function(module,exports,__webpack_require__){"use strict";module.exports=function ToNumber(value){return+value}},function(module,exports,__webpack_require__){"use strict";module.exports=function sign(number){return number>=0?1:-1}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),$TypeError=GetIntrinsic("%TypeError%"),$Number=GetIntrinsic("%Number%"),$RegExp=GetIntrinsic("%RegExp%"),$parseInteger=GetIntrinsic("%parseInt%"),callBound=__webpack_require__(32),regexTester=__webpack_require__(299),isPrimitive=__webpack_require__(230),$strSlice=callBound("String.prototype.slice"),isBinary=regexTester(/^0b[01]+$/i),isOctal=regexTester(/^0o[0-7]+$/i),isInvalidHexLiteral=regexTester(/^[-+]0x[0-9a-f]+$/i),hasNonWS=regexTester(new $RegExp("["+["","",""].join("")+"]","g")),ws=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),trimRegex=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),$replace=callBound("String.prototype.replace"),ToPrimitive=__webpack_require__(455);module.exports=function ToNumber(argument){var value=isPrimitive(argument)?argument:ToPrimitive(argument,$Number);if("symbol"==typeof value)throw new $TypeError("Cannot convert a Symbol value to a number");if("string"==typeof value){if(isBinary(value))return ToNumber($parseInteger($strSlice(value,2),2));if(isOctal(value))return ToNumber($parseInteger($strSlice(value,2),8));if(hasNonWS(value)||isInvalidHexLiteral(value))return NaN;var trimmed=function(value){return $replace(value,trimRegex,"")}(value);if(trimmed!==value)return ToNumber(trimmed)}return $Number(value)}},function(module,exports,__webpack_require__){"use strict";var toPrimitive=__webpack_require__(300);module.exports=function ToPrimitive(input){return arguments.length>1?toPrimitive(input,arguments[1]):toPrimitive(input)}},function(module,exports,__webpack_require__){"use strict";module.exports=function isPrimitive(value){return null===value||"function"!=typeof value&&"object"!=typeof value}},function(module,exports,__webpack_require__){"use strict";var getDay=Date.prototype.getDay,toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function isDateObject(value){return"object"==typeof value&&null!==value&&(hasToStringTag?function tryDateGetDayCall(value){try{return getDay.call(value),!0}catch(e){return!1}}(value):"[object Date]"===toStr.call(value))}},function(module,exports,__webpack_require__){"use strict";var MAX_SAFE_INTEGER=__webpack_require__(186),ToInteger=__webpack_require__(297);module.exports=function ToLength(argument){var len=ToInteger(argument);return len<=0?0:len>MAX_SAFE_INTEGER?MAX_SAFE_INTEGER:len}},function(module,exports,__webpack_require__){"use strict";var $Object=__webpack_require__(13)("%Object%"),RequireObjectCoercible=__webpack_require__(460);module.exports=function ToObject(value){return RequireObjectCoercible(value),$Object(value)}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(302)},function(module,exports,__webpack_require__){"use strict";var $isNaN=__webpack_require__(133);module.exports=function SameValueZero(x,y){return x===y||$isNaN(x)&&$isNaN(y)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(463)(),__webpack_require__(466)(),__webpack_require__(469)(),__webpack_require__(472)(),__webpack_require__(475)(),__webpack_require__(481)},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(464),define=__webpack_require__(44);module.exports=function shimValues(){var polyfill=getPolyfill();return define(Object,{values:polyfill},{values:function testValues(){return Object.values!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(465);module.exports=function getPolyfill(){return"function"==typeof Object.values?Object.values:implementation}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(63),RequireObjectCoercible=__webpack_require__(88),$isEnumerable=__webpack_require__(32)("Object.prototype.propertyIsEnumerable");module.exports=function values(O){var obj=RequireObjectCoercible(O),vals=[];for(var key in obj)has(obj,key)&&$isEnumerable(obj,key)&&vals.push(obj[key]);return vals}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(467),define=__webpack_require__(44);module.exports=function shimEntries(){var polyfill=getPolyfill();return define(Object,{entries:polyfill},{entries:function testEntries(){return Object.entries!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(468);module.exports=function getPolyfill(){return"function"==typeof Object.entries?Object.entries:implementation}},function(module,exports,__webpack_require__){"use strict";var RequireObjectCoercible=__webpack_require__(88),has=__webpack_require__(63),$isEnumerable=__webpack_require__(32)("Object.prototype.propertyIsEnumerable");module.exports=function entries(O){var obj=RequireObjectCoercible(O),entrys=[];for(var key in obj)has(obj,key)&&$isEnumerable(obj,key)&&entrys.push([key,obj[key]]);return entrys}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(470),define=__webpack_require__(44);module.exports=function shimPadStart(){var polyfill=getPolyfill();return define(String.prototype,{padStart:polyfill},{padStart:function testPadStart(){return String.prototype.padStart!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(471);module.exports=function getPolyfill(){return"function"==typeof String.prototype.padStart?String.prototype.padStart:implementation}},function(module,exports,__webpack_require__){"use strict";var ToLength=__webpack_require__(118),ToString=__webpack_require__(103),RequireObjectCoercible=__webpack_require__(88),$slice=__webpack_require__(32)("String.prototype.slice");module.exports=function padStart(maxLength){var fillString,O=RequireObjectCoercible(this),S=ToString(O),stringLength=ToLength(S.length);arguments.length>1&&(fillString=arguments[1]);var filler=void 0===fillString?"":ToString(fillString);""===filler&&(filler=" ");var intMaxLength=ToLength(maxLength);if(intMaxLength<=stringLength)return S;for(var fillLen=intMaxLength-stringLength;filler.length<fillLen;){var fLen=filler.length,remainingCodeUnits=fillLen-fLen;filler+=fLen>remainingCodeUnits?$slice(filler,0,remainingCodeUnits):filler}var truncatedStringFiller=filler.length>fillLen?$slice(filler,0,fillLen):filler;return truncatedStringFiller+S}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(473),define=__webpack_require__(44);module.exports=function shimPadEnd(){var polyfill=getPolyfill();return define(String.prototype,{padEnd:polyfill},{padEnd:function testPadEnd(){return String.prototype.padEnd!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(474);module.exports=function getPolyfill(){return"function"==typeof String.prototype.padEnd?String.prototype.padEnd:implementation}},function(module,exports,__webpack_require__){"use strict";var ToLength=__webpack_require__(118),ToString=__webpack_require__(103),RequireObjectCoercible=__webpack_require__(88),$slice=__webpack_require__(32)("String.prototype.slice");module.exports=function padEnd(maxLength){var fillString,O=RequireObjectCoercible(this),S=ToString(O),stringLength=ToLength(S.length);arguments.length>1&&(fillString=arguments[1]);var filler=void 0===fillString?"":ToString(fillString);""===filler&&(filler=" ");var intMaxLength=ToLength(maxLength);if(intMaxLength<=stringLength)return S;for(var fillLen=intMaxLength-stringLength;filler.length<fillLen;){var fLen=filler.length,remainingCodeUnits=fillLen-fLen;filler+=fLen>remainingCodeUnits?$slice(filler,0,remainingCodeUnits):filler}var truncatedStringFiller=filler.length>fillLen?$slice(filler,0,fillLen):filler;return S+truncatedStringFiller}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(476),define=__webpack_require__(44);module.exports=function shimGetOwnPropertyDescriptors(){var polyfill=getPolyfill();return define(Object,{getOwnPropertyDescriptors:polyfill},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(477);module.exports=function getPolyfill(){return"function"==typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:implementation}},function(module,exports,__webpack_require__){"use strict";var CreateDataProperty=__webpack_require__(306),IsCallable=__webpack_require__(87),RequireObjectCoercible=__webpack_require__(88),ToObject=__webpack_require__(158),callBound=__webpack_require__(32),$gOPD=Object.getOwnPropertyDescriptor,$getOwnNames=Object.getOwnPropertyNames,$getSymbols=Object.getOwnPropertySymbols,$concat=callBound("Array.prototype.concat"),$reduce=callBound("Array.prototype.reduce"),getAll=$getSymbols?function(obj){return $concat($getOwnNames(obj),$getSymbols(obj))}:$getOwnNames,isES5=IsCallable($gOPD)&&IsCallable($getOwnNames);module.exports=function getOwnPropertyDescriptors(value){if(RequireObjectCoercible(value),!isES5)throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor");var O=ToObject(value);return $reduce(getAll(O),(function(acc,key){var descriptor=$gOPD(O,key);return void 0!==descriptor&&CreateDataProperty(acc,key,descriptor),acc}),{})}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),$gOPD=__webpack_require__(479),$TypeError=GetIntrinsic("%TypeError%"),$isEnumerable=__webpack_require__(32)("Object.prototype.propertyIsEnumerable"),has=__webpack_require__(63),IsArray=__webpack_require__(157),IsPropertyKey=__webpack_require__(76),IsRegExp=__webpack_require__(309),ToPropertyDescriptor=__webpack_require__(311),Type=__webpack_require__(28);module.exports=function OrdinaryGetOwnProperty(O,P){if("Object"!==Type(O))throw new $TypeError("Assertion failed: O must be an Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: P must be a Property Key");if(has(O,P)){if(!$gOPD){var arrayLength=IsArray(O)&&"length"===P,regexLastIndex=IsRegExp(O)&&"lastIndex"===P;return{"[[Configurable]]":!(arrayLength||regexLastIndex),"[[Enumerable]]":$isEnumerable(O,P),"[[Value]]":O[P],"[[Writable]]":!0}}return ToPropertyDescriptor($gOPD(O,P))}}},function(module,exports,__webpack_require__){"use strict";var $gOPD=__webpack_require__(13)("%Object.getOwnPropertyDescriptor%");if($gOPD)try{$gOPD([],"length")}catch(e){$gOPD=null}module.exports=$gOPD},function(module,exports,__webpack_require__){"use strict";var $Object=__webpack_require__(13)("%Object%"),isPrimitive=__webpack_require__(230),$preventExtensions=$Object.preventExtensions,$isExtensible=$Object.isExtensible;module.exports=$preventExtensions?function IsExtensible(obj){return!isPrimitive(obj)&&$isExtensible(obj)}:function IsExtensible(obj){return!isPrimitive(obj)}},function(module,exports,__webpack_require__){"use strict";"function"==typeof Promise&&__webpack_require__(482),__webpack_require__(496)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(483)()},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(235),getPolyfill=__webpack_require__(484),define=__webpack_require__(44);module.exports=function shimPromiseFinally(){requirePromise();var polyfill=getPolyfill();return define(Promise.prototype,{finally:polyfill},{finally:function testFinally(){return Promise.prototype.finally!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(235),implementation=__webpack_require__(485);module.exports=function getPolyfill(){return requirePromise(),"function"==typeof Promise.prototype.finally?Promise.prototype.finally:implementation}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(235)();var IsCallable=__webpack_require__(313),SpeciesConstructor=__webpack_require__(486),Type=__webpack_require__(119),promiseResolve=function PromiseResolve(C,value){return new C((function(resolve){resolve(value)}))},OriginalPromise=Promise,promiseFinally=function finally_(onFinally){if("Object"!==Type(this))throw new TypeError("receiver is not an Object");var C=SpeciesConstructor(this,OriginalPromise),thenFinally=onFinally,catchFinally=onFinally;return IsCallable(onFinally)&&(thenFinally=function CreateThenFinally(C,onFinally){return function(value){var result=onFinally();return promiseResolve(C,result).then((function(){return value}))}}(C,onFinally),catchFinally=function CreateCatchFinally(C,onFinally){return function(reason){var result=onFinally();return promiseResolve(C,result).then((function(){throw reason}))}}(C,onFinally)),this.then(thenFinally,catchFinally)};if(Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(promiseFinally,"name");descriptor&&descriptor.configurable&&Object.defineProperty(promiseFinally,"name",{configurable:!0,value:"finally"})}module.exports=promiseFinally},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),$species=GetIntrinsic("%Symbol.species%",!0),$TypeError=GetIntrinsic("%TypeError%"),IsConstructor=__webpack_require__(487),Type=__webpack_require__(119);module.exports=function SpeciesConstructor(O,defaultConstructor){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");var C=O.constructor;if(void 0===C)return defaultConstructor;if("Object"!==Type(C))throw new $TypeError("O.constructor is not an Object");var S=$species?C[$species]:void 0;if(null==S)return defaultConstructor;if(IsConstructor(S))return S;throw new $TypeError("no constructor found")}},function(module,exports,__webpack_require__){"use strict";var $construct=__webpack_require__(13)("%Reflect.construct%",!0),DefinePropertyOrThrow=__webpack_require__(488);try{DefinePropertyOrThrow({},"",{"[[Get]]":function(){}})}catch(e){DefinePropertyOrThrow=null}if(DefinePropertyOrThrow&&$construct){var isConstructorMarker={},badArrayLike={};DefinePropertyOrThrow(badArrayLike,"length",{"[[Get]]":function(){throw isConstructorMarker},"[[Enumerable]]":!0}),module.exports=function IsConstructor(argument){try{$construct(argument,badArrayLike)}catch(err){return err===isConstructorMarker}}}else module.exports=function IsConstructor(argument){return"function"==typeof argument&&!!argument.prototype}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),isPropertyDescriptor=__webpack_require__(314),DefineOwnProperty=__webpack_require__(232),FromPropertyDescriptor=__webpack_require__(489),IsAccessorDescriptor=__webpack_require__(490),IsDataDescriptor=__webpack_require__(491),IsPropertyKey=__webpack_require__(492),SameValue=__webpack_require__(493),ToPropertyDescriptor=__webpack_require__(494),Type=__webpack_require__(119);module.exports=function DefinePropertyOrThrow(O,P,desc){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var Desc=isPropertyDescriptor({Type:Type,IsDataDescriptor:IsDataDescriptor,IsAccessorDescriptor:IsAccessorDescriptor},desc)?desc:ToPropertyDescriptor(desc);if(!isPropertyDescriptor({Type:Type,IsDataDescriptor:IsDataDescriptor,IsAccessorDescriptor:IsAccessorDescriptor},Desc))throw new $TypeError("Assertion failed: Desc is not a valid Property Descriptor");return DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,O,P,Desc)}},function(module,exports,__webpack_require__){"use strict";var assertRecord=__webpack_require__(134),Type=__webpack_require__(119);module.exports=function FromPropertyDescriptor(Desc){if(void 0===Desc)return Desc;assertRecord(Type,"Property Descriptor","Desc",Desc);var obj={};return"[[Value]]"in Desc&&(obj.value=Desc["[[Value]]"]),"[[Writable]]"in Desc&&(obj.writable=Desc["[[Writable]]"]),"[[Get]]"in Desc&&(obj.get=Desc["[[Get]]"]),"[[Set]]"in Desc&&(obj.set=Desc["[[Set]]"]),"[[Enumerable]]"in Desc&&(obj.enumerable=Desc["[[Enumerable]]"]),"[[Configurable]]"in Desc&&(obj.configurable=Desc["[[Configurable]]"]),obj}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(63),assertRecord=__webpack_require__(134),Type=__webpack_require__(119);module.exports=function IsAccessorDescriptor(Desc){return void 0!==Desc&&(assertRecord(Type,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Get]]")&&!has(Desc,"[[Set]]")))}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(63),assertRecord=__webpack_require__(134),Type=__webpack_require__(119);module.exports=function IsDataDescriptor(Desc){return void 0!==Desc&&(assertRecord(Type,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Value]]")&&!has(Desc,"[[Writable]]")))}},function(module,exports,__webpack_require__){"use strict";module.exports=function IsPropertyKey(argument){return"string"==typeof argument||"symbol"==typeof argument}},function(module,exports,__webpack_require__){"use strict";var $isNaN=__webpack_require__(133);module.exports=function SameValue(x,y){return x===y?0!==x||1/x==1/y:$isNaN(x)&&$isNaN(y)}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(63),$TypeError=__webpack_require__(13)("%TypeError%"),Type=__webpack_require__(119),ToBoolean=__webpack_require__(495),IsCallable=__webpack_require__(313);module.exports=function ToPropertyDescriptor(Obj){if("Object"!==Type(Obj))throw new $TypeError("ToPropertyDescriptor requires an object");var desc={};if(has(Obj,"enumerable")&&(desc["[[Enumerable]]"]=ToBoolean(Obj.enumerable)),has(Obj,"configurable")&&(desc["[[Configurable]]"]=ToBoolean(Obj.configurable)),has(Obj,"value")&&(desc["[[Value]]"]=Obj.value),has(Obj,"writable")&&(desc["[[Writable]]"]=ToBoolean(Obj.writable)),has(Obj,"get")){var getter=Obj.get;if(void 0!==getter&&!IsCallable(getter))throw new TypeError("getter must be a function");desc["[[Get]]"]=getter}if(has(Obj,"set")){var setter=Obj.set;if(void 0!==setter&&!IsCallable(setter))throw new $TypeError("setter must be a function");desc["[[Set]]"]=setter}if((has(desc,"[[Get]]")||has(desc,"[[Set]]"))&&(has(desc,"[[Value]]")||has(desc,"[[Writable]]")))throw new $TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return desc}},function(module,exports,__webpack_require__){"use strict";module.exports=function ToBoolean(value){return!!value}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(497),__webpack_require__(504),__webpack_require__(508),__webpack_require__(513),__webpack_require__(527)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(498)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(44),getPolyfill=__webpack_require__(499);module.exports=function shimFlat(){var polyfill=getPolyfill();return define(Array.prototype,{flat:polyfill},{flat:function(){return Array.prototype.flat!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(500);module.exports=function getPolyfill(){return Array.prototype.flat||implementation}},function(module,exports,__webpack_require__){"use strict";var ArraySpeciesCreate=__webpack_require__(236),FlattenIntoArray=__webpack_require__(317),Get=__webpack_require__(59),ToInteger=__webpack_require__(303),ToLength=__webpack_require__(118),ToObject=__webpack_require__(158);module.exports=function flat(){var O=ToObject(this),sourceLen=ToLength(Get(O,"length")),depthNum=1;arguments.length>0&&void 0!==arguments[0]&&(depthNum=ToInteger(arguments[0]));var A=ArraySpeciesCreate(O,0);return FlattenIntoArray(A,O,sourceLen,0,depthNum),A}},,function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),isPropertyDescriptor=__webpack_require__(314),DefineOwnProperty=__webpack_require__(232),FromPropertyDescriptor=__webpack_require__(307),IsAccessorDescriptor=__webpack_require__(503),IsDataDescriptor=__webpack_require__(312),IsPropertyKey=__webpack_require__(76),SameValue=__webpack_require__(234),ToPropertyDescriptor=__webpack_require__(311),Type=__webpack_require__(28);module.exports=function DefinePropertyOrThrow(O,P,desc){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var Desc=isPropertyDescriptor({Type:Type,IsDataDescriptor:IsDataDescriptor,IsAccessorDescriptor:IsAccessorDescriptor},desc)?desc:ToPropertyDescriptor(desc);if(!isPropertyDescriptor({Type:Type,IsDataDescriptor:IsDataDescriptor,IsAccessorDescriptor:IsAccessorDescriptor},Desc))throw new $TypeError("Assertion failed: Desc is not a valid Property Descriptor");return DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,O,P,Desc)}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(63),assertRecord=__webpack_require__(134),Type=__webpack_require__(28);module.exports=function IsAccessorDescriptor(Desc){return void 0!==Desc&&(assertRecord(Type,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Get]]")&&!has(Desc,"[[Set]]")))}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(505)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(44),getPolyfill=__webpack_require__(506);module.exports=function shimFlatMap(){var polyfill=getPolyfill();return define(Array.prototype,{flatMap:polyfill},{flatMap:function(){return Array.prototype.flatMap!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(507);module.exports=function getPolyfill(){return Array.prototype.flatMap||implementation}},function(module,exports,__webpack_require__){"use strict";var ArraySpeciesCreate=__webpack_require__(236),FlattenIntoArray=__webpack_require__(317),Get=__webpack_require__(59),IsCallable=__webpack_require__(87),ToLength=__webpack_require__(118),ToObject=__webpack_require__(158);module.exports=function flatMap(mapperFunction){var T,O=ToObject(this),sourceLen=ToLength(Get(O,"length"));if(!IsCallable(mapperFunction))throw new TypeError("mapperFunction must be a function");arguments.length>1&&(T=arguments[1]);var A=ArraySpeciesCreate(O,0);return FlattenIntoArray(A,O,sourceLen,0,1,mapperFunction,T),A}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(509)()},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(68)(),polyfill=__webpack_require__(510),getInferredName=__webpack_require__(319),gOPD=Object.getOwnPropertyDescriptor,dP=Object.defineProperty,setProto=Object.setPrototypeOf,define=function defineGetter(getter){dP(Symbol.prototype,"description",{configurable:!0,enumerable:!1,get:getter})};module.exports=function shimSymbolDescription(){if(!hasSymbols)return!1;var desc=gOPD(Symbol.prototype,"description"),getter=polyfill(),isMissing=!desc||"function"!=typeof desc.get,isBroken=!isMissing&&(void 0!==Symbol().description||""!==Symbol("").description);if(isMissing||isBroken){if(!getInferredName)return function shimGlobalSymbol(getter){var origSym=Function.apply.bind(Symbol),emptyStrings=Object.create?Object.create(null):{},SymNew=function Symbol(){var sym=origSym(this,arguments);return arguments.length>0&&""===arguments[0]&&(emptyStrings[sym]=!0),sym};SymNew.prototype=Symbol.prototype,setProto(SymNew,Symbol),Symbol=SymNew;var boundGetter=Function.call.bind(getter),wrappedGetter=function description(){var symbolDescription=boundGetter(this);return emptyStrings[this]?"":symbolDescription};return define(wrappedGetter),wrappedGetter}(getter);define(getter)}return getter}},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(68)(),implementation=__webpack_require__(511),gOPD=Object.getOwnPropertyDescriptor;module.exports=function descriptionPolyfill(){if(!hasSymbols||"function"!=typeof gOPD)return null;var desc=gOPD(Symbol.prototype,"description");if(!desc||"function"!=typeof desc.get)return implementation;var emptySymbolDesc=desc.get.call(Symbol());return(void 0===emptySymbolDesc||""===emptySymbolDesc)&&"a"===desc.get.call(Symbol("a"))?desc.get:implementation}},function(module,exports,__webpack_require__){"use strict";var getSymbolDescription=__webpack_require__(512);module.exports=function description(){return getSymbolDescription(this)}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),callBound=__webpack_require__(32),$SyntaxError=GetIntrinsic("%SyntaxError%"),getGlobalSymbolDescription=GetIntrinsic("%Symbol.keyFor%",!0),thisSymbolValue=callBound("%Symbol.prototype.valueOf%",!0),symToStr=callBound("Symbol.prototype.toString",!0),getInferredName=__webpack_require__(319);module.exports=callBound("%Symbol.prototype.description%",!0)||function getSymbolDescription(symbol){if(!thisSymbolValue)throw new $SyntaxError("Symbols are not supported in this environment");var desc,sym=thisSymbolValue(symbol);if(getInferredName){var name=getInferredName(sym);if(""===name)return;return name.slice(1,-1)}return getGlobalSymbolDescription&&"string"==typeof(desc=getGlobalSymbolDescription(sym))?desc:(desc=symToStr(sym).slice(7,-1))||void 0}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(514)()},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(515),define=__webpack_require__(44);module.exports=function shimEntries(){var polyfill=getPolyfill();return define(Object,{fromEntries:polyfill},{fromEntries:function testEntries(){return Object.fromEntries!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(516);module.exports=function getPolyfill(){return"function"==typeof Object.fromEntries?Object.fromEntries:implementation}},function(module,exports,__webpack_require__){"use strict";var AddEntriesFromIterable=__webpack_require__(517),CreateDataPropertyOrThrow=__webpack_require__(238),Get=__webpack_require__(59),IsArray=__webpack_require__(157),RequireObjectCoercible=__webpack_require__(88),ToPropertyKey=__webpack_require__(526),Type=__webpack_require__(28),adder=function addDataProperty(key,value){var propertyKey=ToPropertyKey(key);CreateDataPropertyOrThrow(this,propertyKey,value)},hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");module.exports=function fromEntries(iterable){RequireObjectCoercible(iterable);var obj={};if(!hasSymbols){if(!IsArray(iterable))throw new TypeError("this environment lacks native Symbols, and can not support non-Array iterables");return function assign(obj,entries){for(var i=0;i<entries.length;++i){var entry=entries[i];if("Object"!==Type(entry))throw new TypeError("iterator returned a non-object; entry expected");var key=Get(entry,"0"),value=Get(entry,"1"),propertyKey=ToPropertyKey(key);CreateDataPropertyOrThrow(obj,propertyKey,value)}}(obj,iterable),obj}return AddEntriesFromIterable(obj,iterable,adder)}},function(module,exports,__webpack_require__){"use strict";var inspect=__webpack_require__(237),$TypeError=__webpack_require__(13)("%TypeError%"),Call=__webpack_require__(104),Get=__webpack_require__(59),GetIterator=__webpack_require__(518),IsCallable=__webpack_require__(87),IteratorClose=__webpack_require__(520),IteratorStep=__webpack_require__(521),IteratorValue=__webpack_require__(525),Type=__webpack_require__(28);module.exports=function AddEntriesFromIterable(target,iterable,adder){if(!IsCallable(adder))throw new $TypeError("Assertion failed: `adder` is not callable");if(null==iterable)throw new $TypeError("Assertion failed: `iterable` is present, and not nullish");for(var iteratorRecord=GetIterator(iterable);;){var next=IteratorStep(iteratorRecord);if(!next)return target;var nextItem=IteratorValue(next);if("Object"!==Type(nextItem)){var error=new $TypeError("iterator next must return an Object, got "+inspect(nextItem));return IteratorClose(iteratorRecord,(function(){throw error}))}try{var k=Get(nextItem,"0"),v=Get(nextItem,"1");Call(adder,target,[k,v])}catch(e){return IteratorClose(iteratorRecord,(function(){throw e}))}}}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),getIteratorMethod=__webpack_require__(519),AdvanceStringIndex=__webpack_require__(320),Call=__webpack_require__(104),GetMethod=__webpack_require__(239),IsArray=__webpack_require__(157),Type=__webpack_require__(28);module.exports=function GetIterator(obj,method){var actualMethod=method;arguments.length<2&&(actualMethod=getIteratorMethod({AdvanceStringIndex:AdvanceStringIndex,GetMethod:GetMethod,IsArray:IsArray,Type:Type},obj));var iterator=Call(actualMethod,obj);if("Object"!==Type(iterator))throw new $TypeError("iterator must return an object");return iterator}},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(68)(),GetIntrinsic=__webpack_require__(13),callBound=__webpack_require__(32),$iterator=GetIntrinsic("%Symbol.iterator%",!0),$stringSlice=callBound("String.prototype.slice");module.exports=function getIteratorMethod(ES,iterable){var usingIterator;return hasSymbols?usingIterator=ES.GetMethod(iterable,$iterator):ES.IsArray(iterable)?usingIterator=function(){var i=-1,arr=this;return{next:function(){return{done:(i+=1)>=arr.length,value:arr[i]}}}}:"String"===ES.Type(iterable)&&(usingIterator=function(){var i=0;return{next:function(){var nextIndex=ES.AdvanceStringIndex(iterable,i,!0),value=$stringSlice(iterable,i,nextIndex);return i=nextIndex,{done:nextIndex>iterable.length,value:value}}}}),usingIterator}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),Call=__webpack_require__(104),GetMethod=__webpack_require__(239),IsCallable=__webpack_require__(87),Type=__webpack_require__(28);module.exports=function IteratorClose(iterator,completion){if("Object"!==Type(iterator))throw new $TypeError("Assertion failed: Type(iterator) is not Object");if(!IsCallable(completion))throw new $TypeError("Assertion failed: completion is not a thunk for a Completion Record");var completionRecord,completionThunk=completion,iteratorReturn=GetMethod(iterator,"return");if(void 0===iteratorReturn)return completionThunk();try{var innerResult=Call(iteratorReturn,iterator,[])}catch(e){throw completionThunk(),completionThunk=null,e}if(completionRecord=completionThunk(),completionThunk=null,"Object"!==Type(innerResult))throw new $TypeError("iterator .return must return an object");return completionRecord}},function(module,exports,__webpack_require__){"use strict";var IteratorComplete=__webpack_require__(522),IteratorNext=__webpack_require__(523);module.exports=function IteratorStep(iterator){var result=IteratorNext(iterator);return!0!==IteratorComplete(result)&&result}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),Get=__webpack_require__(59),ToBoolean=__webpack_require__(233),Type=__webpack_require__(28);module.exports=function IteratorComplete(iterResult){if("Object"!==Type(iterResult))throw new $TypeError("Assertion failed: Type(iterResult) is not Object");return ToBoolean(Get(iterResult,"done"))}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),Invoke=__webpack_require__(524),Type=__webpack_require__(28);module.exports=function IteratorNext(iterator,value){var result=Invoke(iterator,"next",arguments.length<2?[]:[value]);if("Object"!==Type(result))throw new $TypeError("iterator next must return an object");return result}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),$arraySlice=__webpack_require__(32)("Array.prototype.slice"),Call=__webpack_require__(104),GetV=__webpack_require__(321),IsPropertyKey=__webpack_require__(76);module.exports=function Invoke(O,P){if(!IsPropertyKey(P))throw new $TypeError("P must be a Property Key");var argumentsList=$arraySlice(arguments,2),func=GetV(O,P);return Call(func,O,argumentsList)}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),Get=__webpack_require__(59),Type=__webpack_require__(28);module.exports=function IteratorValue(iterResult){if("Object"!==Type(iterResult))throw new $TypeError("Assertion failed: Type(iterResult) is not Object");return Get(iterResult,"value")}},function(module,exports,__webpack_require__){"use strict";var $String=__webpack_require__(13)("%String%"),ToPrimitive=__webpack_require__(305),ToString=__webpack_require__(103);module.exports=function ToPropertyKey(argument){var key=ToPrimitive(argument,$String);return"symbol"==typeof key?key:ToString(key)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(528),__webpack_require__(541),__webpack_require__(545)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(529)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(44),hasSymbols=__webpack_require__(68)(),getPolyfill=__webpack_require__(530),regexpMatchAllPolyfill=__webpack_require__(325),defineP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor;module.exports=function shimMatchAll(){var polyfill=getPolyfill();if(define(String.prototype,{matchAll:polyfill},{matchAll:function(){return String.prototype.matchAll!==polyfill}}),hasSymbols){var symbol=Symbol.matchAll||(Symbol.for?Symbol.for("Symbol.matchAll"):Symbol("Symbol.matchAll"));if(define(Symbol,{matchAll:symbol},{matchAll:function(){return Symbol.matchAll!==symbol}}),defineP&&gOPD){var desc=gOPD(Symbol,symbol);desc&&!desc.configurable||defineP(Symbol,symbol,{configurable:!1,enumerable:!1,value:symbol,writable:!1})}var regexpMatchAll=regexpMatchAllPolyfill(),func={};func[symbol]=regexpMatchAll;var predicate={};predicate[symbol]=function(){return RegExp.prototype[symbol]!==regexpMatchAll},define(RegExp.prototype,func,predicate)}return polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(531);module.exports=function getPolyfill(){if(String.prototype.matchAll)try{"".matchAll(RegExp.prototype)}catch(e){return String.prototype.matchAll}return implementation}},function(module,exports,__webpack_require__){"use strict";var Call=__webpack_require__(104),Get=__webpack_require__(59),GetMethod=__webpack_require__(239),IsRegExp=__webpack_require__(309),ToString=__webpack_require__(103),RequireObjectCoercible=__webpack_require__(88),callBound=__webpack_require__(32),hasSymbols=__webpack_require__(68)(),flagsGetter=__webpack_require__(322),$indexOf=callBound("String.prototype.indexOf"),regexpMatchAllPolyfill=__webpack_require__(325),getMatcher=function getMatcher(regexp){var matcherPolyfill=regexpMatchAllPolyfill();if(hasSymbols&&"symbol"==typeof Symbol.matchAll){var matcher=GetMethod(regexp,Symbol.matchAll);return matcher===RegExp.prototype[Symbol.matchAll]&&matcher!==matcherPolyfill?matcherPolyfill:matcher}if(IsRegExp(regexp))return matcherPolyfill};module.exports=function matchAll(regexp){var O=RequireObjectCoercible(this);if(null!=regexp){if(IsRegExp(regexp)){var flags="flags"in regexp?Get(regexp,"flags"):flagsGetter(regexp);if(RequireObjectCoercible(flags),$indexOf(ToString(flags),"g")<0)throw new TypeError("matchAll requires a global regular expression")}var matcher=getMatcher(regexp);if(void 0!==matcher)return Call(matcher,regexp,[O])}var S=ToString(O),rx=new RegExp(regexp,"g");return Call(getMatcher(rx),rx,[S])}},function(module,exports,__webpack_require__){"use strict";var supportsDescriptors=__webpack_require__(44).supportsDescriptors,getPolyfill=__webpack_require__(324),gOPD=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,TypeErr=TypeError,getProto=Object.getPrototypeOf,regex=/a/;module.exports=function shimFlags(){if(!supportsDescriptors||!getProto)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var polyfill=getPolyfill(),proto=getProto(regex),descriptor=gOPD(proto,"flags");return descriptor&&descriptor.get===polyfill||defineProperty(proto,"flags",{configurable:!0,enumerable:!1,get:polyfill}),polyfill}},function(module,exports,__webpack_require__){"use strict";var Get=__webpack_require__(59),Set=__webpack_require__(326),SpeciesConstructor=__webpack_require__(534),ToLength=__webpack_require__(118),ToString=__webpack_require__(103),Type=__webpack_require__(28),flagsGetter=__webpack_require__(322),RegExpStringIterator=__webpack_require__(535),OrigRegExp=RegExp,supportsConstructingWithFlags="flags"in RegExp.prototype,regexMatchAll=function SymbolMatchAll(string){var R=this;if("Object"!==Type(R))throw new TypeError('"this" value must be an Object');var S=ToString(string),tmp=function constructRegex(C,R){var flags="flags"in R?Get(R,"flags"):ToString(flagsGetter(R));return{flags:flags,matcher:new C(supportsConstructingWithFlags&&"string"==typeof flags?R:C===OrigRegExp?R.source:R,flags)}}(SpeciesConstructor(R,OrigRegExp),R),flags=tmp.flags,matcher=tmp.matcher,lastIndex=ToLength(Get(R,"lastIndex"));return Set(matcher,"lastIndex",lastIndex,!0),function CreateRegExpStringIterator(R,S,global,fullUnicode){if("String"!==Type(S))throw new TypeError('"S" value must be a String');if("Boolean"!==Type(global))throw new TypeError('"global" value must be a Boolean');if("Boolean"!==Type(fullUnicode))throw new TypeError('"fullUnicode" value must be a Boolean');return new RegExpStringIterator(R,S,global,fullUnicode)}(matcher,S,flags.indexOf("g")>-1,flags.indexOf("u")>-1)},defineP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor;if(defineP&&gOPD){var desc=gOPD(regexMatchAll,"name");desc&&desc.configurable&&defineP(regexMatchAll,"name",{value:"[Symbol.matchAll]"})}module.exports=regexMatchAll},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),$species=GetIntrinsic("%Symbol.species%",!0),$TypeError=GetIntrinsic("%TypeError%"),IsConstructor=__webpack_require__(315),Type=__webpack_require__(28);module.exports=function SpeciesConstructor(O,defaultConstructor){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");var C=O.constructor;if(void 0===C)return defaultConstructor;if("Object"!==Type(C))throw new $TypeError("O.constructor is not an Object");var S=$species?C[$species]:void 0;if(null==S)return defaultConstructor;if(IsConstructor(S))return S;throw new $TypeError("no constructor found")}},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(44),AdvanceStringIndex=__webpack_require__(320),CreateIterResultObject=__webpack_require__(536),Get=__webpack_require__(59),GetIntrinsic=__webpack_require__(13),ObjectCreate=__webpack_require__(537),RegExpExec=__webpack_require__(538),Set=__webpack_require__(326),ToLength=__webpack_require__(118),ToString=__webpack_require__(103),Type=__webpack_require__(28),hasSymbols=__webpack_require__(68)(),SLOT=__webpack_require__(539),RegExpStringIterator=function RegExpStringIterator(R,S,global,fullUnicode){if("String"!==Type(S))throw new TypeError("S must be a string");if("Boolean"!==Type(global))throw new TypeError("global must be a boolean");if("Boolean"!==Type(fullUnicode))throw new TypeError("fullUnicode must be a boolean");SLOT.set(this,"[[IteratingRegExp]]",R),SLOT.set(this,"[[IteratedString]]",S),SLOT.set(this,"[[Global]]",global),SLOT.set(this,"[[Unicode]]",fullUnicode),SLOT.set(this,"[[Done]]",!1)},IteratorPrototype=GetIntrinsic("%IteratorPrototype%",!0);if(IteratorPrototype&&(RegExpStringIterator.prototype=ObjectCreate(IteratorPrototype)),define(RegExpStringIterator.prototype,{next:function next(){var O=this;if("Object"!==Type(O))throw new TypeError("receiver must be an object");if(!(O instanceof RegExpStringIterator&&SLOT.has(O,"[[IteratingRegExp]]")&&SLOT.has(O,"[[IteratedString]]")&&SLOT.has(O,"[[Global]]")&&SLOT.has(O,"[[Unicode]]")&&SLOT.has(O,"[[Done]]")))throw new TypeError('"this" value must be a RegExpStringIterator instance');if(SLOT.get(O,"[[Done]]"))return CreateIterResultObject(void 0,!0);var R=SLOT.get(O,"[[IteratingRegExp]]"),S=SLOT.get(O,"[[IteratedString]]"),global=SLOT.get(O,"[[Global]]"),fullUnicode=SLOT.get(O,"[[Unicode]]"),match=RegExpExec(R,S);if(null===match)return SLOT.set(O,"[[Done]]",!0),CreateIterResultObject(void 0,!0);if(global){if(""===ToString(Get(match,"0"))){var thisIndex=ToLength(Get(R,"lastIndex")),nextIndex=AdvanceStringIndex(S,thisIndex,fullUnicode);Set(R,"lastIndex",nextIndex,!0)}return CreateIterResultObject(match,!1)}return SLOT.set(O,"[[Done]]",!0),CreateIterResultObject(match,!1)}}),hasSymbols){var defineP=Object.defineProperty;if(Symbol.toStringTag&&(defineP?defineP(RegExpStringIterator.prototype,Symbol.toStringTag,{configurable:!0,enumerable:!1,value:"RegExp String Iterator",writable:!1}):RegExpStringIterator.prototype[Symbol.toStringTag]="RegExp String Iterator"),!IteratorPrototype&&Symbol.iterator){var func={};func[Symbol.iterator]=RegExpStringIterator.prototype[Symbol.iterator]||function SymbolIterator(){return this};var predicate={};predicate[Symbol.iterator]=function(){return RegExpStringIterator.prototype[Symbol.iterator]!==func[Symbol.iterator]},define(RegExpStringIterator.prototype,func,predicate)}}module.exports=RegExpStringIterator},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),Type=__webpack_require__(28);module.exports=function CreateIterResultObject(value,done){if("Boolean"!==Type(done))throw new $TypeError("Assertion failed: Type(done) is not Boolean");return{value:value,done:done}}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),$ObjectCreate=GetIntrinsic("%Object.create%",!0),$TypeError=GetIntrinsic("%TypeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),Type=__webpack_require__(28),hasProto=!({__proto__:null}instanceof Object);module.exports=function ObjectCreate(proto,internalSlotsList){if(null!==proto&&"Object"!==Type(proto))throw new $TypeError("Assertion failed: `proto` must be null or an object");var slots=arguments.length<2?[]:internalSlotsList;if(slots.length>0)throw new $SyntaxError("es-abstract does not yet support internal slots");if($ObjectCreate)return $ObjectCreate(proto);if(hasProto)return{__proto__:proto};if(null===proto)throw new $SyntaxError("native Object.create support is required to create null objects");var T=function T(){};return T.prototype=proto,new T}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(13)("%TypeError%"),regexExec=__webpack_require__(32)("RegExp.prototype.exec"),Call=__webpack_require__(104),Get=__webpack_require__(59),IsCallable=__webpack_require__(87),Type=__webpack_require__(28);module.exports=function RegExpExec(R,S){if("Object"!==Type(R))throw new $TypeError("Assertion failed: `R` must be an Object");if("String"!==Type(S))throw new $TypeError("Assertion failed: `S` must be a String");var exec=Get(R,"exec");if(IsCallable(exec)){var result=Call(exec,R,[S]);if(null===result||"Object"===Type(result))return result;throw new $TypeError('"exec" method must return `null` or an Object')}return regexExec(R,S)}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),has=__webpack_require__(63),channel=__webpack_require__(540)(),$TypeError=GetIntrinsic("%TypeError%"),SLOT={assert:function(O,slot){if(!O||"object"!=typeof O&&"function"!=typeof O)throw new $TypeError("`O` is not an object");if("string"!=typeof slot)throw new $TypeError("`slot` must be a string");channel.assert(O)},get:function(O,slot){if(!O||"object"!=typeof O&&"function"!=typeof O)throw new $TypeError("`O` is not an object");if("string"!=typeof slot)throw new $TypeError("`slot` must be a string");var slots=channel.get(O);return slots&&slots["$"+slot]},has:function(O,slot){if(!O||"object"!=typeof O&&"function"!=typeof O)throw new $TypeError("`O` is not an object");if("string"!=typeof slot)throw new $TypeError("`slot` must be a string");var slots=channel.get(O);return!!slots&&has(slots,"$"+slot)},set:function(O,slot,V){if(!O||"object"!=typeof O&&"function"!=typeof O)throw new $TypeError("`O` is not an object");if("string"!=typeof slot)throw new $TypeError("`slot` must be a string");var slots=channel.get(O);slots||(slots={},channel.set(O,slots)),slots["$"+slot]=V}};Object.freeze&&Object.freeze(SLOT),module.exports=SLOT},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(13),callBound=__webpack_require__(32),inspect=__webpack_require__(237),$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$push=callBound("Array.prototype.push"),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0);module.exports=function getSideChannel(){var $wm,$m,$o,channel={assert:function(key){if(!channel.has(key))throw new $TypeError("Side channel does not contain "+inspect(key))},get:function(key){if($WeakMap&&key&&("object"==typeof key||"function"==typeof key)){if($wm)return $weakMapGet($wm,key)}else if($Map){if($m)return $mapGet($m,key)}else if($o)return function(objects,key){for(var i=0;i<objects.length;i+=1)if(objects[i].key===key)return objects[i].value}($o,key)},has:function(key){if($WeakMap&&key&&("object"==typeof key||"function"==typeof key)){if($wm)return $weakMapHas($wm,key)}else if($Map){if($m)return $mapHas($m,key)}else if($o)return function(objects,key){for(var i=0;i<objects.length;i+=1)if(objects[i].key===key)return!0;return!1}($o,key);return!1},set:function(key,value){$WeakMap&&key&&("object"==typeof key||"function"==typeof key)?($wm||($wm=new $WeakMap),$weakMapSet($wm,key,value)):$Map?($m||($m=new $Map),$mapSet($m,key,value)):($o||($o=[]),function(objects,key,value){for(var i=0;i<objects.length;i+=1)if(objects[i].key===key)return void(objects[i].value=value);$push(objects,{key:key,value:value})}($o,key,value))}};return channel}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(542)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(44),getPolyfill=__webpack_require__(543);module.exports=function shimGlobal(){var polyfill=getPolyfill();if(define.supportsDescriptors){var descriptor=Object.getOwnPropertyDescriptor(polyfill,"globalThis");(!descriptor||descriptor.configurable&&(descriptor.enumerable||descriptor.writable||globalThis!==polyfill))&&Object.defineProperty(polyfill,"globalThis",{configurable:!0,enumerable:!1,value:polyfill,writable:!1})}else"object"==typeof globalThis&&globalThis===polyfill||(polyfill.globalThis=polyfill);return polyfill}},function(module,exports,__webpack_require__){"use strict";(function(global){var implementation=__webpack_require__(544);module.exports=function getPolyfill(){return"object"==typeof global&&global&&global.Math===Math&&global.Array===Array?global:implementation}}).call(this,__webpack_require__(43))},function(module,exports,__webpack_require__){"use strict";"undefined"!=typeof self?module.exports=self:"undefined"!=typeof window?module.exports=window:module.exports=Function("return this")()},function(module,exports,__webpack_require__){"use strict";__webpack_require__(546)()},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(240),getPolyfill=__webpack_require__(547),define=__webpack_require__(44);module.exports=function shimAllSettled(){requirePromise();var polyfill=getPolyfill();return define(Promise,{allSettled:polyfill},{allSettled:function testAllSettled(){return Promise.allSettled!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(240),implementation=__webpack_require__(548);module.exports=function getPolyfill(){return requirePromise(),"function"==typeof Promise.allSettled?Promise.allSettled:implementation}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(240)();var PromiseResolve=__webpack_require__(549),Type=__webpack_require__(28),iterate=__webpack_require__(550),map=__webpack_require__(557),getIntrinsic=__webpack_require__(13),bind=__webpack_require__(185),all=bind.call(Function.call,getIntrinsic("%Promise_all%")),reject=bind.call(Function.call,getIntrinsic("%Promise_reject%"));module.exports=function allSettled(iterable){var C=this;if("Object"!==Type(C))throw new TypeError("`this` value must be an object");var values=iterate(iterable);return all(C,map(values,(function(item){var itemPromise=PromiseResolve(C,item);try{return itemPromise.then((function(value){return{status:"fulfilled",value:value}}),(function(reason){return{status:"rejected",reason:reason}}))}catch(e){return reject(C,e)}})))}},function(module,exports,__webpack_require__){"use strict";var $PromiseResolve=__webpack_require__(32)("Promise.resolve",!0);module.exports=function PromiseResolve(C,x){if(!$PromiseResolve)throw new SyntaxError("This environment does not support Promises.");return $PromiseResolve(C,x)}},function(module,exports,__webpack_require__){"use strict";var getIterator=__webpack_require__(551),$TypeError=TypeError,iterate=__webpack_require__(556);module.exports=function iterateValue(iterable){var iterator=getIterator(iterable);if(!iterator)throw new $TypeError("non-iterable value provided");return arguments.length>1?iterate(iterator,arguments[1]):iterate(iterator)}},function(module,exports,__webpack_require__){"use strict";(function(process){var isArguments=__webpack_require__(552);if(__webpack_require__(68)()||__webpack_require__(296)()){var $iterator=Symbol.iterator;module.exports=function getIterator(iterable){return null!=iterable&&void 0!==iterable[$iterator]?iterable[$iterator]():isArguments(iterable)?Array.prototype[$iterator].call(iterable):void 0}}else{var isArray=__webpack_require__(553),isString=__webpack_require__(231),GetIntrinsic=__webpack_require__(13),$Map=GetIntrinsic("%Map%",!0),$Set=GetIntrinsic("%Set%",!0),callBound=__webpack_require__(32),$arrayPush=callBound("Array.prototype.push"),$charCodeAt=callBound("String.prototype.charCodeAt"),$stringSlice=callBound("String.prototype.slice"),getArrayIterator=function getArrayIterator(arraylike){var i=0;return{next:function next(){var value,done=i>=arraylike.length;return done||(value=arraylike[i],i+=1),{done:done,value:value}}}},getNonCollectionIterator=function getNonCollectionIterator(iterable){if(isArray(iterable)||isArguments(iterable))return getArrayIterator(iterable);if(isString(iterable)){var i=0;return{next:function next(){var nextIndex=function advanceStringIndex(S,index){if(index+1>=S.length)return index+1;var first=$charCodeAt(S,index);if(first<55296||first>56319)return index+1;var second=$charCodeAt(S,index+1);return second<56320||second>57343?index+1:index+2}(iterable,i),value=$stringSlice(iterable,i,nextIndex);return i=nextIndex,{done:nextIndex>iterable.length,value:value}}}}};if($Map||$Set){var isMap=__webpack_require__(554),isSet=__webpack_require__(555),$mapForEach=callBound("Map.prototype.forEach",!0),$setForEach=callBound("Set.prototype.forEach",!0);if(void 0===process||!process.versions||!process.versions.node)var $mapIterator=callBound("Map.prototype.iterator",!0),$setIterator=callBound("Set.prototype.iterator",!0),getStopIterationIterator=function(iterator){var done=!1;return{next:function next(){try{return{done:done,value:done?void 0:iterator.next()}}catch(e){return done=!0,{done:!0,value:void 0}}}}};var $mapAtAtIterator=callBound("Map.prototype.@@iterator",!0)||callBound("Map.prototype._es6-shim iterator_",!0),$setAtAtIterator=callBound("Set.prototype.@@iterator",!0)||callBound("Set.prototype._es6-shim iterator_",!0);module.exports=function getIterator(iterable){return function getCollectionIterator(iterable){if(isMap(iterable)){if($mapIterator)return getStopIterationIterator($mapIterator(iterable));if($mapAtAtIterator)return $mapAtAtIterator(iterable);if($mapForEach){var entries=[];return $mapForEach(iterable,(function(v,k){$arrayPush(entries,[k,v])})),getArrayIterator(entries)}}if(isSet(iterable)){if($setIterator)return getStopIterationIterator($setIterator(iterable));if($setAtAtIterator)return $setAtAtIterator(iterable);if($setForEach){var values=[];return $setForEach(iterable,(function(v){$arrayPush(values,v)})),getArrayIterator(values)}}}(iterable)||getNonCollectionIterator(iterable)}}else module.exports=getNonCollectionIterator}}).call(this,__webpack_require__(58))},function(module,exports,__webpack_require__){"use strict";var hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,toStr=Object.prototype.toString,isStandardArguments=function isArguments(value){return!(hasToStringTag&&value&&"object"==typeof value&&Symbol.toStringTag in value)&&"[object Arguments]"===toStr.call(value)},isLegacyArguments=function isArguments(value){return!!isStandardArguments(value)||null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Array]"!==toStr.call(value)&&"[object Function]"===toStr.call(value.callee)},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments,module.exports=supportsStandardArguments?isStandardArguments:isLegacyArguments},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},function(module,exports,__webpack_require__){"use strict";var exported,$Map="function"==typeof Map&&Map.prototype?Map:null,$Set="function"==typeof Set&&Set.prototype?Set:null;$Map||(exported=function isMap(x){return!1});var $mapHas=$Map?Map.prototype.has:null,$setHas=$Set?Set.prototype.has:null;exported||$mapHas||(exported=function isMap(x){return!1}),module.exports=exported||function isMap(x){if(!x||"object"!=typeof x)return!1;try{if($mapHas.call(x),$setHas)try{$setHas.call(x)}catch(e){return!0}return x instanceof $Map}catch(e){}return!1}},function(module,exports,__webpack_require__){"use strict";var exported,$Map="function"==typeof Map&&Map.prototype?Map:null,$Set="function"==typeof Set&&Set.prototype?Set:null;$Set||(exported=function isSet(x){return!1});var $mapHas=$Map?Map.prototype.has:null,$setHas=$Set?Set.prototype.has:null;exported||$setHas||(exported=function isSet(x){return!1}),module.exports=exported||function isSet(x){if(!x||"object"!=typeof x)return!1;try{if($setHas.call(x),$mapHas)try{$mapHas.call(x)}catch(e){return!0}return x instanceof $Set}catch(e){}return!1}},function(module,exports,__webpack_require__){"use strict";var $TypeError=TypeError;module.exports=function iterateIterator(iterator){if(!iterator||"function"!=typeof iterator.next)throw new $TypeError("iterator must be an object with a `next` method");if(arguments.length>1){var callback=arguments[1];if("function"!=typeof callback)throw new $TypeError("`callback`, if provided, must be a function")}for(var result,values=callback||[];(result=iterator.next())&&!result.done;)callback?callback(result.value):values.push(result.value);if(!callback)return values}},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(44),RequireObjectCoercible=__webpack_require__(88),callBound=__webpack_require__(32),implementation=__webpack_require__(327),getPolyfill=__webpack_require__(328),polyfill=getPolyfill(),shim=__webpack_require__(560),$slice=callBound("Array.prototype.slice"),boundMapShim=function map(array,callbackfn){return RequireObjectCoercible(array),polyfill.apply(array,$slice(arguments,1))};define(boundMapShim,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=boundMapShim},function(module,exports,__webpack_require__){"use strict";var ToNumber=__webpack_require__(304);module.exports=function ToUint32(x){return ToNumber(x)>>>0}},function(module,exports){module.exports=function properlyBoxed(method){var properlyBoxesNonStrict=!0,properlyBoxesStrict=!0,threwException=!1;if("function"==typeof method){try{method.call("f",(function(_,__,O){"object"!=typeof O&&(properlyBoxesNonStrict=!1)})),method.call([null],(function(){"use strict";properlyBoxesStrict="string"==typeof this}),"x")}catch(e){threwException=!0}return!threwException&&properlyBoxesNonStrict&&properlyBoxesStrict}return!1}},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(44),getPolyfill=__webpack_require__(328);module.exports=function shimArrayPrototypeMap(){var polyfill=getPolyfill();return define(Array.prototype,{map:polyfill},{map:function(){return Array.prototype.map!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){var parent=__webpack_require__(562);__webpack_require__(580),__webpack_require__(581),__webpack_require__(582),__webpack_require__(583),__webpack_require__(584),module.exports=parent},function(module,exports,__webpack_require__){__webpack_require__(77),__webpack_require__(79),__webpack_require__(91),__webpack_require__(566),__webpack_require__(109),__webpack_require__(567),__webpack_require__(568),__webpack_require__(110),__webpack_require__(569),__webpack_require__(570),__webpack_require__(571),__webpack_require__(572),__webpack_require__(573),__webpack_require__(574),__webpack_require__(575),__webpack_require__(576),__webpack_require__(577),__webpack_require__(578),__webpack_require__(579);var path=__webpack_require__(245);module.exports=path.Symbol},function(module,exports,__webpack_require__){var getBuiltIn=__webpack_require__(135),getOwnPropertyNamesModule=__webpack_require__(191),getOwnPropertySymbolsModule=__webpack_require__(248),anObject=__webpack_require__(51);module.exports=getBuiltIn("Reflect","ownKeys")||function ownKeys(it){var keys=getOwnPropertyNamesModule.f(anObject(it)),getOwnPropertySymbols=getOwnPropertySymbolsModule.f;return getOwnPropertySymbols?keys.concat(getOwnPropertySymbols(it)):keys}},function(module,exports,__webpack_require__){"use strict";var TO_STRING_TAG_SUPPORT=__webpack_require__(253),classof=__webpack_require__(337);module.exports=TO_STRING_TAG_SUPPORT?{}.toString:function toString(){return"[object "+classof(this)+"]"}},function(module,exports,__webpack_require__){var toIndexedObject=__webpack_require__(105),nativeGetOwnPropertyNames=__webpack_require__(191).f,toString={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];module.exports.f=function getOwnPropertyNames(it){return windowNames&&"[object Window]"==toString.call(it)?function(it){try{return nativeGetOwnPropertyNames(it)}catch(error){return windowNames.slice()}}(it):nativeGetOwnPropertyNames(toIndexedObject(it))}},function(module,exports,__webpack_require__){__webpack_require__(45)("asyncIterator")},function(module,exports,__webpack_require__){__webpack_require__(45)("hasInstance")},function(module,exports,__webpack_require__){__webpack_require__(45)("isConcatSpreadable")},function(module,exports,__webpack_require__){__webpack_require__(45)("match")},function(module,exports,__webpack_require__){__webpack_require__(45)("matchAll")},function(module,exports,__webpack_require__){__webpack_require__(45)("replace")},function(module,exports,__webpack_require__){__webpack_require__(45)("search")},function(module,exports,__webpack_require__){__webpack_require__(45)("species")},function(module,exports,__webpack_require__){__webpack_require__(45)("split")},function(module,exports,__webpack_require__){__webpack_require__(45)("toPrimitive")},function(module,exports,__webpack_require__){__webpack_require__(45)("toStringTag")},function(module,exports,__webpack_require__){__webpack_require__(45)("unscopables")},function(module,exports,__webpack_require__){__webpack_require__(120)(Math,"Math",!0)},function(module,exports,__webpack_require__){var global=__webpack_require__(30);__webpack_require__(120)(global.JSON,"JSON",!0)},function(module,exports,__webpack_require__){__webpack_require__(45)("asyncDispose")},function(module,exports,__webpack_require__){__webpack_require__(45)("dispose")},function(module,exports,__webpack_require__){__webpack_require__(45)("observable")},function(module,exports,__webpack_require__){__webpack_require__(45)("patternMatch")},function(module,exports,__webpack_require__){__webpack_require__(45)("replaceAll")},function(module,exports,__webpack_require__){"use strict";__webpack_require__(92).window.STORYBOOK_REACT_CLASSES={}},,function(module,exports){module.exports=function(originalModule){if(!originalModule.webpackPolyfill){var module=Object.create(originalModule);module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),Object.defineProperty(module,"exports",{enumerable:!0}),module.webpackPolyfill=1}return module}},,function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo}}(),getTarget=function getTarget(){var memo={};return function memorize(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function remove(){!function removeStyleElement(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function update(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},,function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function toString(){return this.map((function(item){var content=function cssWithMappingToString(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}(cssMapping),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(77),Object.defineProperty(exports,"__esModule",{value:!0}),exports.raw=exports.getStorybook=exports.forceReRender=exports.setAddon=exports.clearDecorators=exports.addParameters=exports.addDecorator=exports.configure=exports.storiesOf=void 0;var _client=__webpack_require__(593);__webpack_require__(779);var _render=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(780));var api=(0,_client.start)(_render.default);exports.storiesOf=function storiesOf(kind,m){return api.clientApi.storiesOf(kind,m).addParameters({framework:"react"})};exports.configure=function configure(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return api.configure.apply(api,args.concat(["react"]))};var addDecorator=api.clientApi.addDecorator;exports.addDecorator=addDecorator;var addParameters=api.clientApi.addParameters;exports.addParameters=addParameters;var clearDecorators=api.clientApi.clearDecorators;exports.clearDecorators=clearDecorators;var setAddon=api.clientApi.setAddon;exports.setAddon=setAddon;var forceReRender=api.forceReRender;exports.forceReRender=forceReRender;var getStorybook=api.clientApi.getStorybook;exports.getStorybook=getStorybook;var raw=api.clientApi.raw;exports.raw=raw},function(module,exports,__webpack_require__){module.exports=__webpack_require__(594).default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(595)).default;exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _clientApi=__webpack_require__(341),_csf=__webpack_require__(201);var _default={start:function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(756)).default,toId:_csf.toId,ClientApi:_clientApi.ClientApi,ConfigApi:_clientApi.ConfigApi,StoryStore:_clientApi.StoryStore};exports.default=_default},function(module,exports,__webpack_require__){"use strict";__webpack_require__(91),__webpack_require__(109),__webpack_require__(110),__webpack_require__(77),__webpack_require__(254),__webpack_require__(111),__webpack_require__(168),__webpack_require__(138),__webpack_require__(93),__webpack_require__(195),__webpack_require__(348),__webpack_require__(601),__webpack_require__(139),__webpack_require__(170),__webpack_require__(260),__webpack_require__(261),__webpack_require__(140),__webpack_require__(79),__webpack_require__(141),__webpack_require__(142),__webpack_require__(112),__webpack_require__(263),__webpack_require__(113),__webpack_require__(114),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.addParameters=exports.addDecorator=exports.defaultDecorateStory=void 0;var _utilDeprecate=_interopRequireDefault(__webpack_require__(266)),_isPlainObject=_interopRequireDefault(__webpack_require__(604)),_clientLogger=__webpack_require__(143),_addons=_interopRequireDefault(__webpack_require__(267)),_coreEvents=_interopRequireDefault(__webpack_require__(172)),_csf=__webpack_require__(201),_mergeWith=_interopRequireDefault(__webpack_require__(647)),_isEqual=_interopRequireDefault(__webpack_require__(706)),_get=_interopRequireDefault(__webpack_require__(383)),_subscriptions_store=_interopRequireDefault(__webpack_require__(384)),_hooks=__webpack_require__(279);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr))&&"[object Arguments]"!==Object.prototype.toString.call(arr))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var merge=function merge(a,b){return(0,_mergeWith.default)({},a,b,(function(objValue,srcValue){return Array.isArray(srcValue)&&Array.isArray(objValue)?(srcValue.forEach((function(s){objValue.find((function(o){return o===s||(0,_isEqual.default)(o,s)}))||objValue.push(s)})),objValue):Array.isArray(objValue)?(_clientLogger.logger.log("the types mismatch, picking",objValue),objValue):void 0}))},defaultContext={id:"unspecified",name:"unspecified",kind:"unspecified",parameters:{}},defaultDecorateStory=function defaultDecorateStory(storyFn,decorators){return decorators.reduce((function(decorated,decorator){return function(){var context=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaultContext;return decorator((function(p){return decorated(p?Object.assign({},context,{},p,{parameters:Object.assign({},context.parameters,{},p.parameters)}):context)}),context)}}),storyFn)};exports.defaultDecorateStory=defaultDecorateStory;var metaSubscriptionHandler=(0,_utilDeprecate.default)(_subscriptions_store.default.register,"Events.REGISTER_SUBSCRIPTION is deprecated and will be removed in 6.0. Please use useEffect from @storybook/client-api instead."),metaSubscription=function metaSubscription(){return _addons.default.getChannel().on(_coreEvents.default.REGISTER_SUBSCRIPTION,metaSubscriptionHandler),function(){return _addons.default.getChannel().removeListener(_coreEvents.default.REGISTER_SUBSCRIPTION,metaSubscriptionHandler)}},withSubscriptionTracking=function withSubscriptionTracking(storyFn){if(!_addons.default.hasChannel())return storyFn();_subscriptions_store.default.markAllAsUnused(),_subscriptions_store.default.register(metaSubscription);var result=storyFn();return _subscriptions_store.default.clearUnused(),result},_globalDecorators=[],_globalParameters={},addDecorator=function addDecorator(decoratorFn){_globalDecorators.push(decoratorFn)};exports.addDecorator=addDecorator;var addParameters=function addParameters(parameters){_globalParameters=Object.assign({},_globalParameters,{},parameters,{options:Object.assign({},merge((0,_get.default)(_globalParameters,"options",{}),(0,_get.default)(parameters,"options",{}))),docs:Object.assign({},merge((0,_get.default)(_globalParameters,"docs",{}),(0,_get.default)(parameters,"docs",{})))})};exports.addParameters=addParameters;exports.default=function ClientApi(_ref){var _this=this,storyStore=_ref.storyStore,_ref$decorateStory=_ref.decorateStory,decorateStory=void 0===_ref$decorateStory?defaultDecorateStory:_ref$decorateStory;if(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ClientApi),this._storyStore=void 0,this._addons=void 0,this._decorateStory=void 0,this.setAddon=function(addon){_this._addons=Object.assign({},_this._addons,{},addon)},this.getSeparators=function(){var _ref2=_globalParameters.options||{},hierarchySeparator=_ref2.hierarchySeparator,hierarchyRootSeparator=_ref2.hierarchyRootSeparator,showRoots=_ref2.showRoots;return void 0!==hierarchySeparator||void 0!==hierarchyRootSeparator?{hierarchySeparator:hierarchySeparator,hierarchyRootSeparator:hierarchyRootSeparator}:void 0===showRoots&&_this.store().getStoryKinds().some((function(kind){return kind.match(/\.|\|/)}))?{hierarchyRootSeparator:"|",hierarchySeparator:/\/|\./}:{hierarchySeparator:"/"}},this.addDecorator=function(decorator){addDecorator(decorator)},this.addParameters=function(parameters){addParameters(parameters)},this.clearDecorators=function(){_globalDecorators=[]},this.clearParameters=function(){_globalParameters={}},this.storiesOf=function(kind,m){if(!kind&&"string"!=typeof kind)throw new Error("Invalid or missing kind provided for stories, should be a string");if(m||_clientLogger.logger.warn("Missing 'module' parameter for story with a kind of '".concat(kind,"'. It will break your HMR")),m){var proto=Object.getPrototypeOf(m);proto.exports&&proto.exports.default&&_clientLogger.logger.error("Illegal mix of CSF default export and storiesOf calls in a single file: ".concat(proto.i))}m&&m.hot&&m.hot.dispose&&m.hot.dispose((function(){var _storyStore=_this._storyStore;_storyStore.removeStoryKind(kind),_storyStore.incrementRevision()}));var localDecorators=[],localParameters={},hasAdded=!1,api={kind:kind.toString(),add:function add(){return api},addDecorator:function addDecorator(){return api},addParameters:function addParameters(){return api}};return Object.keys(_this._addons).forEach((function(name){var addon=_this._addons[name];api[name]=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return addon.apply(api,args),api}})),api.add=function(storyName,storyFn){var parameters=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};hasAdded=!0;var id=parameters.__id||(0,_csf.toId)(kind,storyName);if("string"!=typeof storyName)throw new Error('Invalid or missing storyName provided for a "'.concat(kind,'" story.'));m&&m.hot&&m.hot.dispose&&m.hot.dispose((function(){_this._storyStore.remove(id)}));var fileName=m&&m.id?"".concat(m.id):void 0,allParam=[_globalParameters,localParameters,parameters].reduce((function(acc,p){return p&&Object.entries(p).forEach((function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1],existingValue=acc[key];Array.isArray(value)?acc[key]=value:(0,_isPlainObject.default)(value)&&(0,_isPlainObject.default)(existingValue)?acc[key]=merge(existingValue,value):acc[key]=value})),acc}),{fileName:fileName});return _this._storyStore.addStory({id:id,kind:kind,name:storyName,storyFn:storyFn,parameters:allParam},{applyDecorators:(0,_hooks.applyHooks)(_this._decorateStory),getDecorators:function getDecorators(){return[].concat(_toConsumableArray(allParam.decorators||[]),localDecorators,_toConsumableArray(_globalDecorators),[withSubscriptionTracking])}}),api},api.addDecorator=function(decorator){return hasAdded&&_clientLogger.logger.warn("You have added a decorator to the kind '".concat(kind,"' after a story has already been added.\nIn Storybook 4 this applied the decorator only to subsequent stories. In Storybook 5+ it applies to all stories.\nThis is probably not what you intended. Read more here: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md")),localDecorators.push(decorator),api},api.addParameters=function(parameters){return localParameters=Object.assign({},localParameters,{},parameters),api},api},this.getStorybook=function(){return _this._storyStore.getStoryKinds().map((function(kind){var fileName=_this._storyStore.getStoryFileName(kind),stories=_this._storyStore.getStories(kind).map((function(name){return{name:name,render:_this._storyStore.getStoryWithContext(kind,name)}}));return{kind:kind,fileName:fileName,stories:stories}}))},this.raw=function(){return _this._storyStore.raw()},this.store=function(){return _this._storyStore},this._storyStore=storyStore,this._addons={},this._decorateStory=decorateStory,!storyStore)throw new Error("storyStore is required")}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(166),toObject=__webpack_require__(70),callWithSafeIterationClosing=__webpack_require__(343),isArrayIteratorMethod=__webpack_require__(344),toLength=__webpack_require__(90),createProperty=__webpack_require__(249),getIteratorMethod=__webpack_require__(345);module.exports=function from(arrayLike){var length,result,step,iterator,next,value,O=toObject(arrayLike),C="function"==typeof this?this:Array,argumentsLength=arguments.length,mapfn=argumentsLength>1?arguments[1]:void 0,mapping=void 0!==mapfn,iteratorMethod=getIteratorMethod(O),index=0;if(mapping&&(mapfn=bind(mapfn,argumentsLength>2?arguments[2]:void 0,2)),null==iteratorMethod||C==Array&&isArrayIteratorMethod(iteratorMethod))for(result=new C(length=toLength(O.length));length>index;index++)value=mapping?mapfn(O[index],index):O[index],createProperty(result,index,value);else for(next=(iterator=iteratorMethod.call(O)).next,result=new C;!(step=next.call(iterator)).done;index++)value=mapping?callWithSafeIterationClosing(iterator,mapfn,[step.value,index],!0):step.value,createProperty(result,index,value);return result.length=index,result}},function(module,exports,__webpack_require__){"use strict";var IteratorPrototype=__webpack_require__(346).IteratorPrototype,create=__webpack_require__(136),createPropertyDescriptor=__webpack_require__(160),setToStringTag=__webpack_require__(120),Iterators=__webpack_require__(169),returnThis=function(){return this};module.exports=function(IteratorConstructor,NAME,next){var TO_STRING_TAG=NAME+" Iterator";return IteratorConstructor.prototype=create(IteratorPrototype,{next:createPropertyDescriptor(1,next)}),setToStringTag(IteratorConstructor,TO_STRING_TAG,!1,!0),Iterators[TO_STRING_TAG]=returnThis,IteratorConstructor}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40);module.exports=function(it){if(!isObject(it)&&null!==it)throw TypeError("Can't set "+String(it)+" as a prototype");return it}},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(121),toObject=__webpack_require__(70),IndexedObject=__webpack_require__(188),toLength=__webpack_require__(90),createMethod=function(IS_RIGHT){return function(that,callbackfn,argumentsLength,memo){aFunction(callbackfn);var O=toObject(that),self=IndexedObject(O),length=toLength(O.length),index=IS_RIGHT?length-1:0,i=IS_RIGHT?-1:1;if(argumentsLength<2)for(;;){if(index in self){memo=self[index],index+=i;break}if(index+=i,IS_RIGHT?index<0:length<=index)throw TypeError("Reduce of empty array with no initial value")}for(;IS_RIGHT?index>=0:length>index;index+=i)index in self&&(memo=callbackfn(memo,self[index],index,O));return memo}};module.exports={left:createMethod(!1),right:createMethod(!0)}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),$some=__webpack_require__(108).some,arrayMethodIsStrict=__webpack_require__(137),arrayMethodUsesToLength=__webpack_require__(80),STRICT_METHOD=arrayMethodIsStrict("some"),USES_TO_LENGTH=arrayMethodUsesToLength("some");$({target:"Array",proto:!0,forced:!STRICT_METHOD||!USES_TO_LENGTH},{some:function some(callbackfn){return $some(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";var DESCRIPTORS=__webpack_require__(49),fails=__webpack_require__(35),objectKeys=__webpack_require__(165),getOwnPropertySymbolsModule=__webpack_require__(248),propertyIsEnumerableModule=__webpack_require__(187),toObject=__webpack_require__(70),IndexedObject=__webpack_require__(188),nativeAssign=Object.assign,defineProperty=Object.defineProperty;module.exports=!nativeAssign||fails((function(){if(DESCRIPTORS&&1!==nativeAssign({b:1},nativeAssign(defineProperty({},"a",{enumerable:!0,get:function(){defineProperty(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var A={},B={},symbol=Symbol();return A[symbol]=7,"abcdefghijklmnopqrst".split("").forEach((function(chr){B[chr]=chr})),7!=nativeAssign({},A)[symbol]||"abcdefghijklmnopqrst"!=objectKeys(nativeAssign({},B)).join("")}))?function assign(target,source){for(var T=toObject(target),argumentsLength=arguments.length,index=1,getOwnPropertySymbols=getOwnPropertySymbolsModule.f,propertyIsEnumerable=propertyIsEnumerableModule.f;argumentsLength>index;)for(var key,S=IndexedObject(arguments[index++]),keys=getOwnPropertySymbols?objectKeys(S).concat(getOwnPropertySymbols(S)):objectKeys(S),length=keys.length,j=0;length>j;)key=keys[j++],DESCRIPTORS&&!propertyIsEnumerable.call(S,key)||(T[key]=S[key]);return T}:nativeAssign},function(module,exports,__webpack_require__){"use strict";var fails=__webpack_require__(35);function RE(s,f){return RegExp(s,f)}exports.UNSUPPORTED_Y=fails((function(){var re=RE("a","y");return re.lastIndex=2,null!=re.exec("abcd")})),exports.BROKEN_CARET=fails((function(){var re=RE("^r","gy");return re.lastIndex=2,null!=re.exec("str")}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function isObjectObject(o){return!0===function isObject(val){return null!=val&&"object"==typeof val&&!1===Array.isArray(val)}(o)&&"[object Object]"===Object.prototype.toString.call(o)}__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=function isPlainObject(o){var ctor,prot;return!1!==isObjectObject(o)&&("function"==typeof(ctor=o.constructor)&&(!1!==isObjectObject(prot=ctor.prototype)&&!1!==prot.hasOwnProperty("isPrototypeOf")))}},function(module,exports,__webpack_require__){var global=__webpack_require__(30);module.exports=global.Promise},function(module,exports,__webpack_require__){var anObject=__webpack_require__(51),aFunction=__webpack_require__(121),SPECIES=__webpack_require__(39)("species");module.exports=function(O,defaultConstructor){var S,C=anObject(O).constructor;return void 0===C||null==(S=anObject(C)[SPECIES])?defaultConstructor:aFunction(S)}},function(module,exports,__webpack_require__){var flush,head,last,notify,toggle,node,promise,then,global=__webpack_require__(30),getOwnPropertyDescriptor=__webpack_require__(159).f,classof=__webpack_require__(89),macrotask=__webpack_require__(269).set,IS_IOS=__webpack_require__(356),MutationObserver=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,IS_NODE="process"==classof(process),queueMicrotaskDescriptor=getOwnPropertyDescriptor(global,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value;queueMicrotask||(flush=function(){var parent,fn;for(IS_NODE&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(error){throw head?notify():last=void 0,error}}last=void 0,parent&&parent.enter()},IS_NODE?notify=function(){process.nextTick(flush)}:MutationObserver&&!IS_IOS?(toggle=!0,node=document.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}):Promise&&Promise.resolve?(promise=Promise.resolve(void 0),then=promise.then,notify=function(){then.call(promise,flush)}):notify=function(){macrotask.call(global,flush)}),module.exports=queueMicrotask||function(fn){var task={fn:fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(51),isObject=__webpack_require__(40),newPromiseCapability=__webpack_require__(357);module.exports=function(C,x){if(anObject(C),isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);return(0,promiseCapability.resolve)(x),promiseCapability.promise}},function(module,exports,__webpack_require__){var global=__webpack_require__(30);module.exports=function(a,b){var console=global.console;console&&console.error&&(1===arguments.length?console.error(a):console.error(a,b))}},function(module,exports){module.exports=function(exec){try{return{error:!1,value:exec()}}catch(error){return{error:!0,value:error}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(77),__webpack_require__(200),Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeDecorator=void 0;var _utilDeprecate=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(266));exports.makeDecorator=function makeDecorator(_ref){var name=_ref.name,parameterName=_ref.parameterName,wrapper=_ref.wrapper,_ref$skipIfNoParamete=_ref.skipIfNoParametersOrOptions,skipIfNoParametersOrOptions=void 0!==_ref$skipIfNoParamete&&_ref$skipIfNoParamete,_ref$allowDeprecatedU=_ref.allowDeprecatedUsage,allowDeprecatedUsage=void 0!==_ref$allowDeprecatedU&&_ref$allowDeprecatedU,decorator=function decorator(options){return function(getStory,context){var parameters=context.parameters&&context.parameters[parameterName];return parameters&&parameters.disable?getStory(context):!skipIfNoParametersOrOptions||options||parameters?wrapper(getStory,context,{options:options,parameters:parameters}):getStory(context)}};return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return"function"==typeof args[0]?decorator().apply(void 0,args):function(){for(var _len2=arguments.length,innerArgs=new Array(_len2),_key2=0;_key2<_len2;_key2++)innerArgs[_key2]=arguments[_key2];if(innerArgs.length>1)return decorator.apply(void 0,args).apply(void 0,innerArgs);if(allowDeprecatedUsage)return(0,_utilDeprecate.default)((function(context){return decorator.apply(void 0,args)(innerArgs[0],context)}),"Passing stories directly into ".concat(name,"() is deprecated,\n          instead use addDecorator(").concat(name,") and pass options with the '").concat(parameterName,"' parameter"));throw new Error("Passing stories directly into ".concat(name,"() is not allowed,\n        instead use addDecorator(").concat(name,") and pass options with the '").concat(parameterName,"' parameter"))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mockChannel=function mockChannel(){return new _channels.default({transport:{setHandler:function setHandler(){},send:function send(){}}})};var _channels=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(359))},function(module,exports,__webpack_require__){(function(global){var scope=void 0!==global&&global||"undefined"!=typeof self&&self||window,apply=Function.prototype.apply;function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,scope,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,scope,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout&&timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(scope,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout((function onTimeout(){item._onTimeout&&item._onTimeout()}),msecs))},__webpack_require__(614),exports.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==global&&global.setImmediate||this&&this.setImmediate,exports.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==global&&global.clearImmediate||this&&this.clearImmediate}).call(this,__webpack_require__(43))},function(module,exports,__webpack_require__){(function(global,process){!function(global,undefined){"use strict";if(!global.setImmediate){var registerImmediate,nextHandle=1,tasksByHandle={},currentlyRunningATask=!1,doc=global.document,attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global,"[object process]"==={}.toString.call(global.process)?function installNextTickImplementation(){registerImmediate=function(handle){process.nextTick((function(){runIfPresent(handle)}))}}():!function canUsePostMessage(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=!0,oldOnMessage=global.onmessage;return global.onmessage=function(){postMessageIsAsynchronous=!1},global.postMessage("","*"),global.onmessage=oldOnMessage,postMessageIsAsynchronous}}()?global.MessageChannel?function installMessageChannelImplementation(){var channel=new MessageChannel;channel.port1.onmessage=function(event){runIfPresent(event.data)},registerImmediate=function(handle){channel.port2.postMessage(handle)}}():doc&&"onreadystatechange"in doc.createElement("script")?function installReadyStateChangeImplementation(){var html=doc.documentElement;registerImmediate=function(handle){var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script)}}():function installSetTimeoutImplementation(){registerImmediate=function(handle){setTimeout(runIfPresent,0,handle)}}():function installPostMessageImplementation(){var messagePrefix="setImmediate$"+Math.random()+"$",onGlobalMessage=function(event){event.source===global&&"string"==typeof event.data&&0===event.data.indexOf(messagePrefix)&&runIfPresent(+event.data.slice(messagePrefix.length))};global.addEventListener?global.addEventListener("message",onGlobalMessage,!1):global.attachEvent("onmessage",onGlobalMessage),registerImmediate=function(handle){global.postMessage(messagePrefix+handle,"*")}}(),attachTo.setImmediate=function setImmediate(callback){"function"!=typeof callback&&(callback=new Function(""+callback));for(var args=new Array(arguments.length-1),i=0;i<args.length;i++)args[i]=arguments[i+1];var task={callback:callback,args:args};return tasksByHandle[nextHandle]=task,registerImmediate(nextHandle),nextHandle++},attachTo.clearImmediate=clearImmediate}function clearImmediate(handle){delete tasksByHandle[handle]}function runIfPresent(handle){if(currentlyRunningATask)setTimeout(runIfPresent,0,handle);else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=!0;try{!function run(task){var callback=task.callback,args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(void 0,args)}}(task)}finally{clearImmediate(handle),currentlyRunningATask=!1}}}}}("undefined"==typeof self?void 0===global?this:global:self)}).call(this,__webpack_require__(43),__webpack_require__(58))},function(module,exports,__webpack_require__){var $=__webpack_require__(25),global=__webpack_require__(30),task=__webpack_require__(269);$({global:!0,bind:!0,enumerable:!0,forced:!global.setImmediate||!global.clearImmediate},{setImmediate:task.set,clearImmediate:task.clear})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(91),__webpack_require__(109),__webpack_require__(110),__webpack_require__(77),__webpack_require__(361),__webpack_require__(111),__webpack_require__(168),__webpack_require__(617),__webpack_require__(138),__webpack_require__(93),__webpack_require__(195),__webpack_require__(139),__webpack_require__(362),__webpack_require__(200),__webpack_require__(144),__webpack_require__(260),__webpack_require__(140),__webpack_require__(79),__webpack_require__(142),__webpack_require__(619),__webpack_require__(620),__webpack_require__(112),__webpack_require__(624),__webpack_require__(113),__webpack_require__(114),Object.defineProperty(exports,"__esModule",{value:!0}),exports.useMemo=function useMemo(nextCreate,deps){return useMemoLike("useMemo",nextCreate,deps)},exports.useCallback=function useCallback(callback,deps){return useMemoLike("useCallback",(function(){return callback}),deps)},exports.useRef=function useRef(initialValue){return useRefLike("useRef",initialValue)},exports.useState=function useState(initialState){return useStateLike("useState",initialState)},exports.useReducer=function useReducer(reducer,initialArg,init){var _useStateLike2=_slicedToArray(useStateLike("useReducer",null!=init?function(){return init(initialArg)}:initialArg),2),state=_useStateLike2[0],setState=_useStateLike2[1];return[state,function dispatch(action){return setState((function(prevState){return reducer(prevState,action)}))}]},exports.useEffect=useEffect,exports.useChannel=function useChannel(eventMap){var deps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],channel=_index.addons.getChannel();return useEffect((function(){return Object.entries(eventMap).forEach((function(_ref2){var _ref3=_slicedToArray(_ref2,2),type=_ref3[0],listener=_ref3[1];return channel.on(type,listener)})),function(){Object.entries(eventMap).forEach((function(_ref4){var _ref5=_slicedToArray(_ref4,2),type=_ref5[0],listener=_ref5[1];return channel.removeListener(type,listener)}))}}),[].concat(_toConsumableArray(Object.keys(eventMap)),_toConsumableArray(deps))),channel.emit.bind(channel)},exports.useStoryContext=useStoryContext,exports.useParameter=function useParameter(parameterKey,defaultValue){var parameters=useStoryContext().parameters;if(parameterKey)return parameters[parameterKey]||defaultValue;return},exports.applyHooks=exports.HooksContext=void 0;var _global=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(92)),_clientLogger=__webpack_require__(143),_coreEvents=__webpack_require__(172),_index=__webpack_require__(354);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr))&&"[object Arguments]"!==Object.prototype.toString.call(arr))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var RenderEvents=[_coreEvents.STORY_RENDERED,_coreEvents.DOCS_RENDERED],HooksContext=function(){function HooksContext(){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HooksContext),this.hookListsMap=void 0,this.mountedDecorators=void 0,this.prevMountedDecorators=void 0,this.currentHooks=void 0,this.nextHookIndex=void 0,this.currentPhase=void 0,this.currentEffects=void 0,this.prevEffects=void 0,this.currentDecoratorName=void 0,this.hasUpdates=void 0,this.currentContext=void 0,this.renderListener=function(){_this.triggerEffects(),_this.currentContext=null,_this.removeRenderListeners()},this.init()}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(HooksContext,[{key:"init",value:function init(){this.hookListsMap=new WeakMap,this.mountedDecorators=new Set,this.prevMountedDecorators=this.mountedDecorators,this.currentHooks=[],this.nextHookIndex=0,this.currentPhase="NONE",this.currentEffects=[],this.prevEffects=[],this.currentDecoratorName=null,this.hasUpdates=!1,this.currentContext=null}},{key:"clean",value:function clean(){this.prevEffects.forEach((function(effect){effect.destroy&&effect.destroy()})),this.init(),this.removeRenderListeners()}},{key:"getNextHook",value:function getNextHook(){var hook=this.currentHooks[this.nextHookIndex];return this.nextHookIndex+=1,hook}},{key:"triggerEffects",value:function triggerEffects(){var _this2=this;this.prevEffects.forEach((function(effect){!_this2.currentEffects.includes(effect)&&effect.destroy&&effect.destroy()})),this.currentEffects.forEach((function(effect){_this2.prevEffects.includes(effect)||(effect.destroy=effect.create())})),this.prevEffects=this.currentEffects,this.currentEffects=[]}},{key:"addRenderListeners",value:function addRenderListeners(){var _this3=this;this.removeRenderListeners();var channel=_index.addons.getChannel();RenderEvents.forEach((function(e){return channel.on(e,_this3.renderListener)}))}},{key:"removeRenderListeners",value:function removeRenderListeners(){var _this4=this,channel=_index.addons.getChannel();RenderEvents.forEach((function(e){return channel.removeListener(e,_this4.renderListener)}))}}]),HooksContext}();exports.HooksContext=HooksContext;var hookify=function hookify(fn){return function(){var _ref="function"==typeof(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=0?void 0:arguments[0],hooks=_ref.hooks,prevPhase=hooks.currentPhase,prevHooks=hooks.currentHooks,prevNextHookIndex=hooks.nextHookIndex,prevDecoratorName=hooks.currentDecoratorName;hooks.currentDecoratorName=fn.name,hooks.prevMountedDecorators.has(fn)?(hooks.currentPhase="UPDATE",hooks.currentHooks=hooks.hookListsMap.get(fn)||[]):(hooks.currentPhase="MOUNT",hooks.currentHooks=[],hooks.hookListsMap.set(fn,hooks.currentHooks),hooks.prevMountedDecorators.add(fn)),hooks.nextHookIndex=0;var prevContext=_global.default.STORYBOOK_HOOKS_CONTEXT;_global.default.STORYBOOK_HOOKS_CONTEXT=hooks;var result=fn.apply(void 0,arguments);if(_global.default.STORYBOOK_HOOKS_CONTEXT=prevContext,"UPDATE"===hooks.currentPhase&&null!=hooks.getNextHook())throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return hooks.currentPhase=prevPhase,hooks.currentHooks=prevHooks,hooks.nextHookIndex=prevNextHookIndex,hooks.currentDecoratorName=prevDecoratorName,result}},numberOfRenders=0;exports.applyHooks=function applyHooks(applyDecorators){return function(getStory,decorators){var decorated=applyDecorators(hookify(getStory),decorators.map(hookify));return function(context){var hooks=context.hooks;hooks.prevMountedDecorators=hooks.mountedDecorators,hooks.mountedDecorators=new Set([getStory].concat(_toConsumableArray(decorators))),hooks.currentContext=context,hooks.hasUpdates=!1;var result=decorated(context);for(numberOfRenders=1;hooks.hasUpdates;)if(hooks.hasUpdates=!1,hooks.currentEffects=[],result=decorated(context),(numberOfRenders+=1)>25)throw new Error("Too many re-renders. Storybook limits the number of renders to prevent an infinite loop.");return hooks.addRenderListeners(),result}}};var invalidHooksError=function invalidHooksError(){return new Error("Storybook preview hooks can only be called inside decorators and story functions.")};function getHooksContextOrNull(){return _global.default.STORYBOOK_HOOKS_CONTEXT||null}function getHooksContextOrThrow(){var hooks=getHooksContextOrNull();if(null==hooks)throw invalidHooksError();return hooks}function useMemoLike(name,nextCreate,deps){return function useHook(name,callback,deps){var hooks=getHooksContextOrThrow();if("MOUNT"===hooks.currentPhase){null==deps||Array.isArray(deps)||_clientLogger.logger.warn("".concat(name," received a final argument that is not an array (instead, received ").concat(deps,"). When specified, the final argument must be an array."));var _hook={name:name,deps:deps};return hooks.currentHooks.push(_hook),callback(_hook),_hook}if("UPDATE"===hooks.currentPhase){var _hook2=hooks.getNextHook();if(null==_hook2)throw new Error("Rendered more hooks than during the previous render.");return _hook2.name!==name&&_clientLogger.logger.warn("Storybook has detected a change in the order of Hooks".concat(hooks.currentDecoratorName?" called by ".concat(hooks.currentDecoratorName):"",". This will lead to bugs and errors if not fixed.")),null!=deps&&null==_hook2.deps&&_clientLogger.logger.warn("".concat(name," received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.")),null!=deps&&null!=_hook2.deps&&deps.length!==_hook2.deps.length&&_clientLogger.logger.warn("The final argument passed to ".concat(name," changed size between renders. The order and size of this array must remain constant.\nPrevious: ").concat(_hook2.deps,"\nIncoming: ").concat(deps)),null!=deps&&null!=_hook2.deps&&function areDepsEqual(deps,nextDeps){return deps.length===nextDeps.length&&deps.every((function(dep,i){return dep===nextDeps[i]}))}(deps,_hook2.deps)||(callback(_hook2),_hook2.deps=deps),_hook2}throw invalidHooksError()}(name,(function(hook){hook.memoizedState=nextCreate()}),deps).memoizedState}function useRefLike(name,initialValue){return useMemoLike(name,(function(){return{current:initialValue}}),[])}function useStateLike(name,initialState){var stateRef=useRefLike(name,"function"==typeof initialState?initialState():initialState);return[stateRef.current,function setState(update){stateRef.current="function"==typeof update?update(stateRef.current):update,function triggerUpdate(){var hooks=getHooksContextOrNull();if(null!=hooks&&"NONE"!==hooks.currentPhase)hooks.hasUpdates=!0;else try{_index.addons.getChannel().emit(_coreEvents.FORCE_RE_RENDER)}catch(e){_clientLogger.logger.warn("State updates of Storybook preview hooks work only in browser")}}()}]}function useEffect(create,deps){var hooks=getHooksContextOrThrow(),effect=useMemoLike("useEffect",(function(){return{create:create}}),deps);hooks.currentEffects.includes(effect)||hooks.currentEffects.push(effect)}function useStoryContext(){var currentContext=getHooksContextOrThrow().currentContext;if(null==currentContext)throw invalidHooksError();return currentContext}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),$includes=__webpack_require__(246).includes,addToUnscopables=__webpack_require__(255);$({target:"Array",proto:!0,forced:!__webpack_require__(80)("indexOf",{ACCESSORS:!0,1:0})},{includes:function includes(el){return $includes(this,el,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("includes")},function(module,exports,__webpack_require__){"use strict";var aFunction=__webpack_require__(121),isObject=__webpack_require__(40),slice=[].slice,factories={},construct=function(C,argsLength,args){if(!(argsLength in factories)){for(var list=[],i=0;i<argsLength;i++)list[i]="a["+i+"]";factories[argsLength]=Function("C,a","return new C("+list.join(",")+")")}return factories[argsLength](C,args)};module.exports=Function.bind||function bind(that){var fn=aFunction(this),partArgs=slice.call(arguments,1),boundFunction=function bound(){var args=partArgs.concat(slice.call(arguments));return this instanceof boundFunction?construct(fn,args.length,args):fn.apply(that,args)};return isObject(fn.prototype)&&(boundFunction.prototype=fn.prototype),boundFunction}},function(module,exports,__webpack_require__){"use strict";var collection=__webpack_require__(271),collectionStrong=__webpack_require__(365);module.exports=collection("Set",(function(init){return function Set(){return init(this,arguments.length?arguments[0]:void 0)}}),collectionStrong)},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),notARegExp=__webpack_require__(621),requireObjectCoercible=__webpack_require__(106);$({target:"String",proto:!0,forced:!__webpack_require__(623)("includes")},{includes:function includes(searchString){return!!~String(requireObjectCoercible(this)).indexOf(notARegExp(searchString),arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){var isRegExp=__webpack_require__(622);module.exports=function(it){if(isRegExp(it))throw TypeError("The method doesn't accept regular expressions");return it}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40),classof=__webpack_require__(89),MATCH=__webpack_require__(39)("match");module.exports=function(it){var isRegExp;return isObject(it)&&(void 0!==(isRegExp=it[MATCH])?!!isRegExp:"RegExp"==classof(it))}},function(module,exports,__webpack_require__){var MATCH=__webpack_require__(39)("match");module.exports=function(METHOD_NAME){var regexp=/./;try{"/./"[METHOD_NAME](regexp)}catch(e){try{return regexp[MATCH]=!1,"/./"[METHOD_NAME](regexp)}catch(f){}}return!1}},function(module,exports,__webpack_require__){"use strict";var InternalWeakMap,global=__webpack_require__(30),redefineAll=__webpack_require__(197),InternalMetadataModule=__webpack_require__(171),collection=__webpack_require__(271),collectionWeak=__webpack_require__(625),isObject=__webpack_require__(40),enforceIternalState=__webpack_require__(107).enforce,NATIVE_WEAK_MAP=__webpack_require__(331),IS_IE11=!global.ActiveXObject&&"ActiveXObject"in global,isExtensible=Object.isExtensible,wrapper=function(init){return function WeakMap(){return init(this,arguments.length?arguments[0]:void 0)}},$WeakMap=module.exports=collection("WeakMap",wrapper,collectionWeak);if(NATIVE_WEAK_MAP&&IS_IE11){InternalWeakMap=collectionWeak.getConstructor(wrapper,"WeakMap",!0),InternalMetadataModule.REQUIRED=!0;var WeakMapPrototype=$WeakMap.prototype,nativeDelete=WeakMapPrototype.delete,nativeHas=WeakMapPrototype.has,nativeGet=WeakMapPrototype.get,nativeSet=WeakMapPrototype.set;redefineAll(WeakMapPrototype,{delete:function(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeDelete.call(this,key)||state.frozen.delete(key)}return nativeDelete.call(this,key)},has:function has(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeHas.call(this,key)||state.frozen.has(key)}return nativeHas.call(this,key)},get:function get(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeHas.call(this,key)?nativeGet.call(this,key):state.frozen.get(key)}return nativeGet.call(this,key)},set:function set(key,value){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);state.frozen||(state.frozen=new InternalWeakMap),nativeHas.call(this,key)?nativeSet.call(this,key,value):state.frozen.set(key,value)}else nativeSet.call(this,key,value);return this}})}},function(module,exports,__webpack_require__){"use strict";var redefineAll=__webpack_require__(197),getWeakData=__webpack_require__(171).getWeakData,anObject=__webpack_require__(51),isObject=__webpack_require__(40),anInstance=__webpack_require__(198),iterate=__webpack_require__(199),ArrayIterationModule=__webpack_require__(108),$has=__webpack_require__(50),InternalStateModule=__webpack_require__(107),setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor,find=ArrayIterationModule.find,findIndex=ArrayIterationModule.findIndex,id=0,uncaughtFrozenStore=function(store){return store.frozen||(store.frozen=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.entries=[]},findUncaughtFrozen=function(store,key){return find(store.entries,(function(it){return it[0]===key}))};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1]},has:function(key){return!!findUncaughtFrozen(this,key)},set:function(key,value){var entry=findUncaughtFrozen(this,key);entry?entry[1]=value:this.entries.push([key,value])},delete:function(key){var index=findIndex(this.entries,(function(it){return it[0]===key}));return~index&&this.entries.splice(index,1),!!~index}},module.exports={getConstructor:function(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var C=wrapper((function(that,iterable){anInstance(that,C,CONSTRUCTOR_NAME),setInternalState(that,{type:CONSTRUCTOR_NAME,id:id++,frozen:void 0}),null!=iterable&&iterate(iterable,that[ADDER],that,IS_MAP)})),getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME),define=function(that,key,value){var state=getInternalState(that),data=getWeakData(anObject(key),!0);return!0===data?uncaughtFrozenStore(state).set(key,value):data[state.id]=value,that};return redefineAll(C.prototype,{delete:function(key){var state=getInternalState(this);if(!isObject(key))return!1;var data=getWeakData(key);return!0===data?uncaughtFrozenStore(state).delete(key):data&&$has(data,state.id)&&delete data[state.id]},has:function has(key){var state=getInternalState(this);if(!isObject(key))return!1;var data=getWeakData(key);return!0===data?uncaughtFrozenStore(state).has(key):data&&$has(data,state.id)}}),redefineAll(C.prototype,IS_MAP?{get:function get(key){var state=getInternalState(this);if(isObject(key)){var data=getWeakData(key);return!0===data?uncaughtFrozenStore(state).get(key):data?data[state.id]:void 0}},set:function set(key,value){return define(this,key,value)}}:{add:function add(value){return define(this,value,!0)}}),C}}},function(module,exports,__webpack_require__){var createCompounder=__webpack_require__(627),upperFirst=__webpack_require__(640),startCase=createCompounder((function(result,word,index){return result+(index?" ":"")+upperFirst(word)}));module.exports=startCase},function(module,exports,__webpack_require__){var arrayReduce=__webpack_require__(628),deburr=__webpack_require__(629),words=__webpack_require__(636),reApos=RegExp("[']","g");module.exports=function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}},function(module,exports){module.exports=function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}},function(module,exports,__webpack_require__){var deburrLetter=__webpack_require__(630),toString=__webpack_require__(202),reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reComboMark=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");module.exports=function deburr(string){return(string=toString(string))&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}},function(module,exports,__webpack_require__){var deburrLetter=__webpack_require__(631)({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"});module.exports=deburrLetter},function(module,exports){module.exports=function basePropertyOf(object){return function(key){return null==object?void 0:object[key]}}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(203),arrayMap=__webpack_require__(633),isArray=__webpack_require__(122),isSymbol=__webpack_require__(204),symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-1/0?"-0":result}},function(module,exports){module.exports=function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(203),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},function(module,exports){var nativeObjectToString=Object.prototype.toString;module.exports=function objectToString(value){return nativeObjectToString.call(value)}},function(module,exports,__webpack_require__){var asciiWords=__webpack_require__(637),hasUnicodeWord=__webpack_require__(638),toString=__webpack_require__(202),unicodeWords=__webpack_require__(639);module.exports=function words(string,pattern,guard){return string=toString(string),void 0===(pattern=guard?void 0:pattern)?hasUnicodeWord(string)?unicodeWords(string):asciiWords(string):string.match(pattern)||[]}},function(module,exports){var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;module.exports=function asciiWords(string){return string.match(reAsciiWord)||[]}},function(module,exports){var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;module.exports=function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}},function(module,exports){var rsBreakRange="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsBreak="["+rsBreakRange+"]",rsDigits="\\d+",rsDingbat="[\\u2700-\\u27bf]",rsLower="[a-z\\xdf-\\xf6\\xf8-\\xff]",rsMisc="[^\\ud800-\\udfff"+rsBreakRange+rsDigits+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",reOptMod="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+(?:['](?:d|ll|m|re|s|t|ve))?",rsUpper+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsDigits,rsEmoji].join("|"),"g");module.exports=function unicodeWords(string){return string.match(reUnicodeWord)||[]}},function(module,exports,__webpack_require__){var upperFirst=__webpack_require__(641)("toUpperCase");module.exports=upperFirst},function(module,exports,__webpack_require__){var castSlice=__webpack_require__(642),hasUnicode=__webpack_require__(367),stringToArray=__webpack_require__(644),toString=__webpack_require__(202);module.exports=function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):void 0,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}},function(module,exports,__webpack_require__){var baseSlice=__webpack_require__(643);module.exports=function castSlice(array,start,end){var length=array.length;return end=void 0===end?length:end,!start&&end>=length?array:baseSlice(array,start,end)}},function(module,exports){module.exports=function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),(end=end>length?length:end)<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}},function(module,exports,__webpack_require__){var asciiToArray=__webpack_require__(645),hasUnicode=__webpack_require__(367),unicodeToArray=__webpack_require__(646);module.exports=function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}},function(module,exports){module.exports=function asciiToArray(string){return string.split("")}},function(module,exports){var rsAstral="[\\ud800-\\udfff]",rsCombo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",reOptMod="(?:"+rsCombo+"|"+rsFitz+")"+"?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");module.exports=function unicodeToArray(string){return string.match(reUnicode)||[]}},function(module,exports,__webpack_require__){var baseMerge=__webpack_require__(648),mergeWith=__webpack_require__(697)((function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)}));module.exports=mergeWith},function(module,exports,__webpack_require__){var Stack=__webpack_require__(368),assignMergeValue=__webpack_require__(370),baseFor=__webpack_require__(675),baseMergeDeep=__webpack_require__(677),isObject=__webpack_require__(94),keysIn=__webpack_require__(378),safeGet=__webpack_require__(377);module.exports=function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,(function(srcValue,key){if(stack||(stack=new Stack),isObject(srcValue))baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):void 0;void 0===newValue&&(newValue=srcValue),assignMergeValue(object,key,newValue)}}),keysIn)}},function(module,exports){module.exports=function listCacheClear(){this.__data__=[],this.size=0}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(206),splice=Array.prototype.splice;module.exports=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(206);module.exports=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(206);module.exports=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(206);module.exports=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(205);module.exports=function stackClear(){this.__data__=new ListCache,this.size=0}},function(module,exports){module.exports=function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}},function(module,exports){module.exports=function stackGet(key){return this.__data__.get(key)}},function(module,exports){module.exports=function stackHas(key){return this.__data__.has(key)}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(205),Map=__webpack_require__(272),MapCache=__webpack_require__(274);module.exports=function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(273),isMasked=__webpack_require__(660),isObject=__webpack_require__(94),toSource=__webpack_require__(369),reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=function baseIsNative(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}},function(module,exports,__webpack_require__){var uid,coreJsData=__webpack_require__(661),maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";module.exports=function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(71)["__core-js_shared__"];module.exports=coreJsData},function(module,exports){module.exports=function getValue(object,key){return null==object?void 0:object[key]}},function(module,exports,__webpack_require__){var Hash=__webpack_require__(664),ListCache=__webpack_require__(205),Map=__webpack_require__(272);module.exports=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(665),hashDelete=__webpack_require__(666),hashGet=__webpack_require__(667),hashHas=__webpack_require__(668),hashSet=__webpack_require__(669);function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(207);module.exports=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}},function(module,exports){module.exports=function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(207),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(207),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(207);module.exports=function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(208);module.exports=function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}},function(module,exports){module.exports=function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(208);module.exports=function mapCacheGet(key){return getMapData(this,key).get(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(208);module.exports=function mapCacheHas(key){return getMapData(this,key).has(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(208);module.exports=function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}},function(module,exports,__webpack_require__){var baseFor=__webpack_require__(676)();module.exports=baseFor},function(module,exports){module.exports=function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}},function(module,exports,__webpack_require__){var assignMergeValue=__webpack_require__(370),cloneBuffer=__webpack_require__(678),cloneTypedArray=__webpack_require__(679),copyArray=__webpack_require__(681),initCloneObject=__webpack_require__(682),isArguments=__webpack_require__(375),isArray=__webpack_require__(122),isArrayLikeObject=__webpack_require__(685),isBuffer=__webpack_require__(277),isFunction=__webpack_require__(273),isObject=__webpack_require__(94),isPlainObject=__webpack_require__(687),isTypedArray=__webpack_require__(278),safeGet=__webpack_require__(377),toPlainObject=__webpack_require__(691);module.exports=function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked)assignMergeValue(object,key,stacked);else{var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):void 0,isCommon=void 0===newValue;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue,isArr||isBuff||isTyped?isArray(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):isBuff?(isCommon=!1,newValue=cloneBuffer(srcValue,!0)):isTyped?(isCommon=!1,newValue=cloneTypedArray(srcValue,!0)):newValue=[]:isPlainObject(srcValue)||isArguments(srcValue)?(newValue=objValue,isArguments(objValue)?newValue=toPlainObject(objValue):isObject(objValue)&&!isFunction(objValue)||(newValue=initCloneObject(srcValue))):isCommon=!1}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue)),assignMergeValue(object,key,newValue)}}},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(71),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0;module.exports=function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}}).call(this,__webpack_require__(167)(module))},function(module,exports,__webpack_require__){var cloneArrayBuffer=__webpack_require__(680);module.exports=function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}},function(module,exports,__webpack_require__){var Uint8Array=__webpack_require__(372);module.exports=function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}},function(module,exports){module.exports=function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}},function(module,exports,__webpack_require__){var baseCreate=__webpack_require__(683),getPrototype=__webpack_require__(373),isPrototype=__webpack_require__(276);module.exports=function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(94),objectCreate=Object.create,baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=void 0,result}}();module.exports=baseCreate},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(145),isObjectLike=__webpack_require__(123);module.exports=function baseIsArguments(value){return isObjectLike(value)&&"[object Arguments]"==baseGetTag(value)}},function(module,exports,__webpack_require__){var isArrayLike=__webpack_require__(209),isObjectLike=__webpack_require__(123);module.exports=function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}},function(module,exports){module.exports=function stubFalse(){return!1}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(145),getPrototype=__webpack_require__(373),isObjectLike=__webpack_require__(123),funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);module.exports=function isPlainObject(value){if(!isObjectLike(value)||"[object Object]"!=baseGetTag(value))return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(145),isLength=__webpack_require__(376),isObjectLike=__webpack_require__(123),typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1,module.exports=function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}},function(module,exports){module.exports=function baseUnary(func){return function(value){return func(value)}}},function(module,exports,__webpack_require__){(function(module){var freeGlobal=__webpack_require__(366),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil}).call(this,__webpack_require__(167)(module))},function(module,exports,__webpack_require__){var copyObject=__webpack_require__(692),keysIn=__webpack_require__(378);module.exports=function toPlainObject(value){return copyObject(value,keysIn(value))}},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(693),baseAssignValue=__webpack_require__(275);module.exports=function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;void 0===newValue&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(275),eq=__webpack_require__(173),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}},function(module,exports){module.exports=function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(94),isPrototype=__webpack_require__(276),nativeKeysIn=__webpack_require__(696),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseKeysIn(object){if(!isObject(object))return nativeKeysIn(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}},function(module,exports){module.exports=function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}},function(module,exports,__webpack_require__){var baseRest=__webpack_require__(698),isIterateeCall=__webpack_require__(705);module.exports=function createAssigner(assigner){return baseRest((function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:void 0,guard=length>2?sources[2]:void 0;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):void 0,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object}))}},function(module,exports,__webpack_require__){var identity=__webpack_require__(381),overRest=__webpack_require__(699),setToString=__webpack_require__(701);module.exports=function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}},function(module,exports,__webpack_require__){var apply=__webpack_require__(700),nativeMax=Math.max;module.exports=function overRest(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}},function(module,exports){module.exports=function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}},function(module,exports,__webpack_require__){var baseSetToString=__webpack_require__(702),setToString=__webpack_require__(704)(baseSetToString);module.exports=setToString},function(module,exports,__webpack_require__){var constant=__webpack_require__(703),defineProperty=__webpack_require__(371),identity=__webpack_require__(381),baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;module.exports=baseSetToString},function(module,exports){module.exports=function constant(value){return function(){return value}}},function(module,exports){var nativeNow=Date.now;module.exports=function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=800)return arguments[0]}else count=0;return func.apply(void 0,arguments)}}},function(module,exports,__webpack_require__){var eq=__webpack_require__(173),isArrayLike=__webpack_require__(209),isIndex=__webpack_require__(380),isObject=__webpack_require__(94);module.exports=function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}},function(module,exports,__webpack_require__){var baseIsEqual=__webpack_require__(707);module.exports=function isEqual(value,other){return baseIsEqual(value,other)}},function(module,exports,__webpack_require__){var baseIsEqualDeep=__webpack_require__(708),isObjectLike=__webpack_require__(123);module.exports=function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}},function(module,exports,__webpack_require__){var Stack=__webpack_require__(368),equalArrays=__webpack_require__(382),equalByTag=__webpack_require__(714),equalObjects=__webpack_require__(717),getTag=__webpack_require__(727),isArray=__webpack_require__(122),isBuffer=__webpack_require__(277),isTypedArray=__webpack_require__(278),objectTag="[object Object]",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?"[object Array]":getTag(object),othTag=othIsArr?"[object Array]":getTag(other),objIsObj=(objTag="[object Arguments]"==objTag?objectTag:objTag)==objectTag,othIsObj=(othTag="[object Arguments]"==othTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack))}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(274),setCacheAdd=__webpack_require__(710),setCacheHas=__webpack_require__(711);function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,module.exports=SetCache},function(module,exports){module.exports=function setCacheAdd(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this}},function(module,exports){module.exports=function setCacheHas(value){return this.__data__.has(value)}},function(module,exports){module.exports=function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}},function(module,exports){module.exports=function cacheHas(cache,key){return cache.has(key)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(203),Uint8Array=__webpack_require__(372),eq=__webpack_require__(173),equalArrays=__webpack_require__(382),mapToArray=__webpack_require__(715),setToArray=__webpack_require__(716),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case"[object DataView]":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case"[object ArrayBuffer]":return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case"[object Boolean]":case"[object Date]":case"[object Number]":return eq(+object,+other);case"[object Error]":return object.name==other.name&&object.message==other.message;case"[object RegExp]":case"[object String]":return object==other+"";case"[object Map]":var convert=mapToArray;case"[object Set]":var isPartial=1&bitmask;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}},function(module,exports){module.exports=function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}},function(module,exports){module.exports=function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}},function(module,exports,__webpack_require__){var getAllKeys=__webpack_require__(718),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}},function(module,exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(719),getSymbols=__webpack_require__(721),keys=__webpack_require__(724);module.exports=function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(720),isArray=__webpack_require__(122);module.exports=function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}},function(module,exports){module.exports=function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}},function(module,exports,__webpack_require__){var arrayFilter=__webpack_require__(722),stubArray=__webpack_require__(723),propertyIsEnumerable=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:stubArray;module.exports=getSymbols},function(module,exports){module.exports=function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}},function(module,exports){module.exports=function stubArray(){return[]}},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(379),baseKeys=__webpack_require__(725),isArrayLike=__webpack_require__(209);module.exports=function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}},function(module,exports,__webpack_require__){var isPrototype=__webpack_require__(276),nativeKeys=__webpack_require__(726),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}},function(module,exports,__webpack_require__){var nativeKeys=__webpack_require__(374)(Object.keys,Object);module.exports=nativeKeys},function(module,exports,__webpack_require__){var DataView=__webpack_require__(728),Map=__webpack_require__(272),Promise=__webpack_require__(729),Set=__webpack_require__(730),WeakMap=__webpack_require__(731),baseGetTag=__webpack_require__(145),toSource=__webpack_require__(369),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&"[object DataView]"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&"[object Map]"!=getTag(new Map)||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&"[object Set]"!=getTag(new Set)||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result}),module.exports=getTag},function(module,exports,__webpack_require__){var DataView=__webpack_require__(124)(__webpack_require__(71),"DataView");module.exports=DataView},function(module,exports,__webpack_require__){var Promise=__webpack_require__(124)(__webpack_require__(71),"Promise");module.exports=Promise},function(module,exports,__webpack_require__){var Set=__webpack_require__(124)(__webpack_require__(71),"Set");module.exports=Set},function(module,exports,__webpack_require__){var WeakMap=__webpack_require__(124)(__webpack_require__(71),"WeakMap");module.exports=WeakMap},function(module,exports,__webpack_require__){var castPath=__webpack_require__(733),toKey=__webpack_require__(738);module.exports=function baseGet(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(122),isKey=__webpack_require__(734),stringToPath=__webpack_require__(735),toString=__webpack_require__(202);module.exports=function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(122),isSymbol=__webpack_require__(204),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(736),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped((function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)})),result}));module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(737);module.exports=function memoizeCapped(func){var result=memoize(func,(function(key){return 500===cache.size&&cache.clear(),key})),cache=result.cache;return result}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(274);function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError("Expected a function");var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache,module.exports=memoize},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(204);module.exports=function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-1/0?"-0":result}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(91),__webpack_require__(109),__webpack_require__(110),__webpack_require__(270),__webpack_require__(254),__webpack_require__(111),__webpack_require__(138),__webpack_require__(93),__webpack_require__(195),__webpack_require__(348),__webpack_require__(360),__webpack_require__(740),__webpack_require__(139),__webpack_require__(200),__webpack_require__(170),__webpack_require__(386),__webpack_require__(741),__webpack_require__(144),__webpack_require__(260),__webpack_require__(742),__webpack_require__(261),__webpack_require__(140),__webpack_require__(387),__webpack_require__(79),__webpack_require__(268),__webpack_require__(141),__webpack_require__(142),__webpack_require__(112),__webpack_require__(743),__webpack_require__(113),__webpack_require__(114),__webpack_require__(388),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _eventemitter=_interopRequireDefault(__webpack_require__(744)),_memoizerific=_interopRequireDefault(__webpack_require__(389)),_debounce=_interopRequireDefault(__webpack_require__(745)),_tsDedent=_interopRequireDefault(__webpack_require__(748)),_stable=_interopRequireDefault(__webpack_require__(749)),_coreEvents=_interopRequireDefault(__webpack_require__(172)),_clientLogger=__webpack_require__(143),_hooks=__webpack_require__(279);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _templateObject(){var data=function _taggedTemplateLiteral(strings,raw){raw||(raw=strings.slice(0));return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n        Story with id "," already exists in the store!\n\n        Perhaps you added the same story twice, or you have a name collision?\n        Story ids need to be unique -- ensure you aren't using the same names modulo url-sanitization.\n      "]);return _templateObject=function _templateObject(){return data},data}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr))&&"[object Arguments]"!==Object.prototype.toString.call(arr))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var toKey=function toKey(input){return input.replace(/[^a-z0-9]+([a-z0-9])/gi,(function(){for(var _len=arguments.length,params=new Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];return params[1].toUpperCase()}))},count=0,getId=function getId(){return count+=1},isStoryDocsOnly=function isStoryDocsOnly(parameters){return parameters&&parameters.docsOnly},includeStory=function includeStory(story){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeDocsOnly:!1};return!!options.includeDocsOnly||!isStoryDocsOnly(story.parameters)},StoryStore=function(_EventEmitter){function StoryStore(params){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StoryStore),(_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(StoryStore).call(this)))._error=void 0,_this._channel=void 0,_this._data=void 0,_this._legacyData=void 0,_this._legacydata=void 0,_this._revision=void 0,_this._selection=void 0,_this._kindOrder=void 0,_this.setChannel=function(channel){_this._channel=channel},_this.fromId=function(id){try{var data=_this._data[id];return data&&data.getDecorated?data:null}catch(e){return _clientLogger.logger.warn("failed to get story:",_this._data),_clientLogger.logger.error(e),null}},_this.getSelection=function(){return _this._selection},_this.getError=function(){return _this._error},_this.remove=function(id){var _data=_assertThisInitialized(_this)._data,story=_data[id];if(delete _data[id],story){story.hooks.clean();var kind=story.kind,name=story.name,kindData=_this._legacydata[toKey(kind)];kindData&&delete kindData.stories[toKey(name)]}},_this.getStoriesForManager=function(){return _this.extract({includeDocsOnly:!0})},_this.pushToManager=(0,_debounce.default)((function(){if(_this._channel){var stories=_this.getStoriesForManager();_this._channel.emit(_coreEvents.default.SET_STORIES,{stories:stories})}}),0),_this._legacydata={},_this._data={},_this._revision=0,_this._selection={},_this._channel=params.channel,_this._error=void 0,_this._kindOrder={},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(StoryStore,_EventEmitter),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(StoryStore,[{key:"raw",value:function raw(options){var _this2=this;return Object.values(this._data).filter((function(i){return!!i.getDecorated})).filter((function(i){return includeStory(i,options)})).map((function(_ref3){var id=_ref3.id;return _this2.fromId(id)}))}},{key:"extract",value:function extract(options){var _this3=this,stories=Object.entries(this._data);if(Object.values(this._data).length>0){var index=Object.keys(this._data).find((function(key){return!!(_this3._data[key]&&_this3._data[key].parameters&&_this3._data[key].parameters.options)}));if(index&&this._data[index].parameters.options.storySort){var sortFn=this._data[index].parameters.options.storySort;_stable.default.inplace(stories,sortFn)}else _stable.default.inplace(stories,(function(s1,s2){return _this3._kindOrder[s1[1].kind]-_this3._kindOrder[s2[1].kind]}))}return stories.reduce((function(a,_ref4){var _ref5=_slicedToArray(_ref4,2),k=_ref5[0],v=_ref5[1];return includeStory(v,options)?Object.assign(a,_defineProperty({},k,function toExtracted(obj){return Object.entries(obj).reduce((function(acc,_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return"function"==typeof value||"hooks"===key?acc:Array.isArray(value)?Object.assign(acc,_defineProperty({},key,value.slice().sort())):Object.assign(acc,_defineProperty({},key,value))}),{})}(v))):a}),{})}},{key:"setSelection",value:function setSelection(data,error){var _this4=this;this._selection=void 0===data?this._selection:{storyId:data.storyId,viewMode:data.viewMode},this._error=void 0===error?this._error:error;var isStarted=!1;this._channel&&(this._channel.emit(_coreEvents.default.STORY_RENDER),isStarted=!0),setTimeout((function(){_this4._channel&&!isStarted&&_this4._channel.emit(_coreEvents.default.STORY_RENDER),_this4.emit(_coreEvents.default.STORY_RENDER)}),1)}},{key:"addStory",value:function addStory(_ref6,_ref7){var id=_ref6.id,kind=_ref6.kind,name=_ref6.name,original=_ref6.storyFn,_ref6$parameters=_ref6.parameters,parameters=void 0===_ref6$parameters?{}:_ref6$parameters,getDecorators=_ref7.getDecorators,applyDecorators=_ref7.applyDecorators,_data=this._data;_data[id]&&_clientLogger.logger.warn((0,_tsDedent.default)(_templateObject(),id));var identification={id:id,kind:kind,name:name,story:name},getOriginal=function getOriginal(){return original},getDecorated=(0,_memoizerific.default)(1)((function(){return applyDecorators(getOriginal(),getDecorators())})),hooks=new _hooks.HooksContext,storyFn=function storyFn(p){return getDecorated()(Object.assign({},identification,{},p,{hooks:hooks,parameters:Object.assign({},parameters,{},p&&p.parameters)}))};_data[id]=Object.assign({},identification,{hooks:hooks,getDecorated:getDecorated,getOriginal:getOriginal,storyFn:storyFn,parameters:parameters}),isStoryDocsOnly(parameters)||this.addLegacyStory({kind:kind,name:name,storyFn:storyFn,parameters:parameters}),this._kindOrder[kind]||(this._kindOrder[kind]=1+Object.keys(this._kindOrder).length),this.pushToManager()}},{key:"getStoriesForKind",value:function getStoriesForKind(kind){return this.raw().filter((function(story){return story.kind===kind}))}},{key:"getRawStory",value:function getRawStory(kind,name){return this.getStoriesForKind(kind).find((function(s){return s.name===name}))}},{key:"getRevision",value:function getRevision(){return this._revision}},{key:"incrementRevision",value:function incrementRevision(){this._revision+=1}},{key:"addLegacyStory",value:function addLegacyStory(_ref8){var kind=_ref8.kind,name=_ref8.name,storyFn=_ref8.storyFn,parameters=_ref8.parameters,k=toKey(kind);this._legacydata[k]||(this._legacydata[k]={kind:kind,fileName:parameters.fileName,index:getId(),stories:{}}),this._legacydata[k].stories[toKey(name)]={name:name,index:getId(),story:storyFn,parameters:parameters}}},{key:"getStoryKinds",value:function getStoryKinds(){return Object.values(this._legacydata).filter((function(kind){return Object.keys(kind.stories).length>0})).sort((function(info1,info2){return info1.index-info2.index})).map((function(info){return info.kind}))}},{key:"getStories",value:function getStories(kind){var _this5=this,key=toKey(kind);return this._legacydata[key]?Object.keys(this._legacydata[key].stories).map((function(name){return _this5._legacydata[key].stories[name]})).sort((function(info1,info2){return info1.index-info2.index})).map((function(info){return info.name})):[]}},{key:"getStoryFileName",value:function getStoryFileName(kind){var key=toKey(kind),storiesKind=this._legacydata[key];return storiesKind?storiesKind.fileName:null}},{key:"getStoryAndParameters",value:function getStoryAndParameters(kind,name){if(!kind||!name)return null;var storiesKind=this._legacydata[toKey(kind)];if(!storiesKind)return null;var storyInfo=storiesKind.stories[toKey(name)];return storyInfo?{story:storyInfo.story,parameters:storyInfo.parameters}:null}},{key:"getStory",value:function getStory(kind,name){var data=this.getStoryAndParameters(kind,name);return data&&data.story}},{key:"getStoryWithContext",value:function getStoryWithContext(kind,name){var data=this.getStoryAndParameters(kind,name);return data?data.story:null}},{key:"removeStoryKind",value:function removeStoryKind(kind){this.hasStoryKind(kind)&&(this._legacydata[toKey(kind)].stories={},this.cleanHooksForKind(kind),this._data=Object.entries(this._data).reduce((function(acc,_ref9){var _ref10=_slicedToArray(_ref9,2),id=_ref10[0],story=_ref10[1];return story.kind!==kind&&Object.assign(acc,_defineProperty({},id,story)),acc}),{}),this.pushToManager())}},{key:"hasStoryKind",value:function hasStoryKind(kind){return Boolean(this._legacydata[toKey(kind)])}},{key:"hasStory",value:function hasStory(kind,name){return Boolean(this.getStory(kind,name))}},{key:"dumpStoryBook",value:function dumpStoryBook(){var _this6=this;return this.getStoryKinds().map((function(kind){return{kind:kind,stories:_this6.getStories(kind)}}))}},{key:"size",value:function size(){return Object.keys(this._legacydata).length}},{key:"clean",value:function clean(){var _this7=this;this.getStoryKinds().forEach((function(kind){return delete _this7._legacydata[toKey(kind)]}))}},{key:"cleanHooks",value:function cleanHooks(id){this._data[id]&&this._data[id].hooks.clean()}},{key:"cleanHooksForKind",value:function cleanHooksForKind(kind){var _this8=this;this.getStoriesForKind(kind).map((function(story){return _this8.cleanHooks(story.id)}))}}]),StoryStore}(_eventemitter.default);exports.default=StoryStore},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(25),aFunction=__webpack_require__(121),toObject=__webpack_require__(70),fails=__webpack_require__(35),arrayMethodIsStrict=__webpack_require__(137),test=[],nativeSort=test.sort,FAILS_ON_UNDEFINED=fails((function(){test.sort(void 0)})),FAILS_ON_NULL=fails((function(){test.sort(null)})),STRICT_METHOD=arrayMethodIsStrict("sort");$({target:"Array",proto:!0,forced:FAILS_ON_UNDEFINED||!FAILS_ON_NULL||!STRICT_METHOD},{sort:function sort(comparefn){return void 0===comparefn?nativeSort.call(toObject(this)):nativeSort.call(toObject(this),aFunction(comparefn))}})},function(module,exports,__webpack_require__){var $=__webpack_require__(25),DESCRIPTORS=__webpack_require__(49);$({target:"Object",stat:!0,forced:!DESCRIPTORS,sham:!DESCRIPTORS},{defineProperties:__webpack_require__(338)})},function(module,exports,__webpack_require__){var $=__webpack_require__(25),FREEZING=__webpack_require__(363),fails=__webpack_require__(35),isObject=__webpack_require__(40),onFreeze=__webpack_require__(171).onFreeze,nativeFreeze=Object.freeze;$({target:"Object",stat:!0,forced:fails((function(){nativeFreeze(1)})),sham:!FREEZING},{freeze:function freeze(it){return nativeFreeze&&isObject(it)?nativeFreeze(onFreeze(it)):it}})},function(module,exports,__webpack_require__){"use strict";var fixRegExpWellKnownSymbolLogic=__webpack_require__(264),anObject=__webpack_require__(51),toObject=__webpack_require__(70),toLength=__webpack_require__(90),toInteger=__webpack_require__(192),requireObjectCoercible=__webpack_require__(106),advanceStringIndex=__webpack_require__(352),regExpExec=__webpack_require__(265),max=Math.max,min=Math.min,floor=Math.floor,SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d\d?|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d\d?)/g;fixRegExpWellKnownSymbolLogic("replace",2,(function(REPLACE,nativeReplace,maybeCallNative,reason){var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=reason.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,REPLACE_KEEPS_$0=reason.REPLACE_KEEPS_$0,UNSAFE_SUBSTITUTE=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?"$":"$0";return[function replace(searchValue,replaceValue){var O=requireObjectCoercible(this),replacer=null==searchValue?void 0:searchValue[REPLACE];return void 0!==replacer?replacer.call(searchValue,O,replaceValue):nativeReplace.call(String(O),searchValue,replaceValue)},function(regexp,replaceValue){if(!REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE&&REPLACE_KEEPS_$0||"string"==typeof replaceValue&&-1===replaceValue.indexOf(UNSAFE_SUBSTITUTE)){var res=maybeCallNative(nativeReplace,regexp,this,replaceValue);if(res.done)return res.value}var rx=anObject(regexp),S=String(this),functionalReplace="function"==typeof replaceValue;functionalReplace||(replaceValue=String(replaceValue));var global=rx.global;if(global){var fullUnicode=rx.unicode;rx.lastIndex=0}for(var results=[];;){var result=regExpExec(rx,S);if(null===result)break;if(results.push(result),!global)break;""===String(result[0])&&(rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode))}for(var it,accumulatedResult="",nextSourcePosition=0,i=0;i<results.length;i++){result=results[i];for(var matched=String(result[0]),position=max(min(toInteger(result.index),S.length),0),captures=[],j=1;j<result.length;j++)captures.push(void 0===(it=result[j])?it:String(it));var namedCaptures=result.groups;if(functionalReplace){var replacerArgs=[matched].concat(captures,position,S);void 0!==namedCaptures&&replacerArgs.push(namedCaptures);var replacement=String(replaceValue.apply(void 0,replacerArgs))}else replacement=getSubstitution(matched,S,position,captures,namedCaptures,replaceValue);position>=nextSourcePosition&&(accumulatedResult+=S.slice(nextSourcePosition,position)+replacement,nextSourcePosition=position+matched.length)}return accumulatedResult+S.slice(nextSourcePosition)}];function getSubstitution(matched,str,position,captures,namedCaptures,replacement){var tailPos=position+matched.length,m=captures.length,symbols=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==namedCaptures&&(namedCaptures=toObject(namedCaptures),symbols=SUBSTITUTION_SYMBOLS),nativeReplace.call(replacement,symbols,(function(match,ch){var capture;switch(ch.charAt(0)){case"$":return"$";case"&":return matched;case"`":return str.slice(0,position);case"'":return str.slice(tailPos);case"<":capture=namedCaptures[ch.slice(1,-1)];break;default:var n=+ch;if(0===n)return match;if(n>m){var f=floor(n/10);return 0===f?match:f<=m?void 0===captures[f-1]?ch.charAt(1):captures[f-1]+ch.charAt(1):match}capture=captures[n-1]}return void 0===capture?"":capture}))}}))},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function addListener(emitter,event,fn,context,once){if("function"!=typeof fn)throw new TypeError("The listener must be a function");var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;return emitter._events[evt]?emitter._events[evt].fn?emitter._events[evt]=[emitter._events[evt],listener]:emitter._events[evt].push(listener):(emitter._events[evt]=listener,emitter._eventsCount++),emitter}function clearEvent(emitter,evt){0==--emitter._eventsCount?emitter._events=new Events:delete emitter._events[evt]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function eventNames(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function listeners(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++)ee[i]=handlers[i].fn;return ee},EventEmitter.prototype.listenerCount=function listenerCount(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];return listeners?listeners.fn?1:listeners.length:0},EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function on(event,fn,context){return addListener(this,event,fn,context,!1)},EventEmitter.prototype.once=function once(event,fn,context){return addListener(this,event,fn,context,!0)},EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return clearEvent(this,evt),this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||clearEvent(this,evt);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:clearEvent(this,evt)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&clearEvent(this,evt)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter},function(module,exports,__webpack_require__){var isObject=__webpack_require__(94),now=__webpack_require__(746),toNumber=__webpack_require__(747),nativeMax=Math.max,nativeMin=Math.min;module.exports=function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function remainingWait(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return leadingEdge(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function flush(){return void 0===timerId?result:trailingEdge(now())},debounced}},function(module,exports,__webpack_require__){var root=__webpack_require__(71);module.exports=function(){return root.Date.now()}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(94),isSymbol=__webpack_require__(204),reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NaN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NaN:+value}},function(module,exports,__webpack_require__){"use strict";function dedent(templ){for(var values=[],_i=1;_i<arguments.length;_i++)values[_i-1]=arguments[_i];var strings=Array.from("string"==typeof templ?[templ]:templ.raw);strings[strings.length-1]=strings[strings.length-1].replace(/\r?\n([\t ]*)$/,"");var indentLengths=strings.reduce((function(arr,str){var matches=str.match(/\n[\t ]+/g);return matches?arr.concat(matches.map((function(match){return match.length-1}))):arr}),[]);if(indentLengths.length){var pattern_1=new RegExp("\n[\t ]{"+Math.min.apply(Math,indentLengths)+"}","g");strings=strings.map((function(str){return str.replace(pattern_1,"\n")}))}strings[0]=strings[0].replace(/^\r?\n/,"");var string=strings[0];return values.forEach((function(value,i){string+=value+strings[i+1]})),string}Object.defineProperty(exports,"__esModule",{value:!0}),exports.dedent=dedent,exports.default=dedent},function(module,exports,__webpack_require__){module.exports=function(){"use strict";var stable=function(arr,comp){return exec(arr.slice(),comp)};function exec(arr,comp){"function"!=typeof comp&&(comp=function(a,b){return String(a).localeCompare(b)});var len=arr.length;if(len<=1)return arr;for(var buffer=new Array(len),chk=1;chk<len;chk*=2){pass(arr,comp,chk,buffer);var tmp=arr;arr=buffer,buffer=tmp}return arr}stable.inplace=function(arr,comp){var result=exec(arr,comp);return result!==arr&&pass(result,null,arr.length,arr),arr};var pass=function(arr,comp,chk,result){var l,r,e,li,ri,len=arr.length,i=0,dbl=2*chk;for(l=0;l<len;l+=dbl)for(e=(r=l+chk)+chk,r>len&&(r=len),e>len&&(e=len),li=l,ri=r;;)if(li<r&&ri<e)comp(arr[li],arr[ri])<=0?result[i++]=arr[li++]:result[i++]=arr[ri++];else if(li<r)result[i++]=arr[li++];else{if(!(ri<e))break;result[i++]=arr[ri++]}};return stable}()},function(module,exports,__webpack_require__){"use strict";__webpack_require__(144),__webpack_require__(388),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _coreEvents=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(172));function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var ConfigApi=function(){function ConfigApi(_ref){var _this=this,channel=_ref.channel,storyStore=_ref.storyStore,clientApi=_ref.clientApi,clearDecorators=_ref.clearDecorators;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ConfigApi),this._channel=void 0,this._storyStore=void 0,this._clearDecorators=void 0,this.clientApi=void 0,this.configure=function(loaders,module){module.hot&&(module.hot.accept(),module._StorybookPreserveDecorators||module.hot.dispose((function(){_this._clearDecorators()}))),_this._channel?(!function render(){var errors=[];try{loaders&&loaders()}catch(e){errors.push(e)}if(!errors.length)try{_this._renderMain()}catch(e){errors.push(e)}if(errors.length)throw _this._storyStore.setSelection(void 0,errors[0]),errors[0];_this._storyStore.setSelection(void 0,null)}(),setTimeout((function(){return _this._channel.emit(_coreEvents.default.STORIES_CONFIGURED)}),0)):loaders()},this._channel=channel,this._storyStore=storyStore,this._clearDecorators=clearDecorators,this.clientApi=clientApi}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ConfigApi,[{key:"_renderMain",value:function _renderMain(){this._storyStore.emit(_coreEvents.default.STORY_INIT)}},{key:"_renderError",value:function _renderError(err){var error={stack:err.stack,message:err.message};this._storyStore.setSelection(void 0,error)}}]),ConfigApi}();exports.default=ConfigApi},function(module,exports,__webpack_require__){"use strict";__webpack_require__(141),__webpack_require__(263),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function pathToId(path){var match=(path||"").match(/^\/story\/(.+)/);if(!match)throw new Error("Invalid path '".concat(path,"',  must start with '/story/'"));return match[1]}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(141),__webpack_require__(390),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getQueryParam=exports.getQueryParams=void 0;var _global=__webpack_require__(92),_qs=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(391));var getQueryParams=function getQueryParams(){return _global.document&&_global.document.location&&_global.document.location.search?_qs.default.parse(_global.document.location.search,{ignoreQueryPrefix:!0}):{}};exports.getQueryParams=getQueryParams;exports.getQueryParam=function getQueryParam(key){return getQueryParams()[key]}},function(module,exports){module.exports=Object.is||function is(x,y){return x===y?0!==x||1/x==1/y:x!=x&&y!=y}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(280),formats=__webpack_require__(392),has=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function brackets(prefix){return prefix+"[]"},comma:"comma",indices:function indices(prefix,key){return prefix+"["+key+"]"},repeat:function repeat(prefix){return prefix}},isArray=Array.isArray,push=Array.prototype.push,pushToArray=function(arr,valueOrArray){push.apply(arr,isArray(valueOrArray)?valueOrArray:[valueOrArray])},toISO=Date.prototype.toISOString,defaultFormat=formats.default,defaults={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats.formatters[defaultFormat],indices:!1,serializeDate:function serializeDate(date){return toISO.call(date)},skipNulls:!1,strictNullHandling:!1},stringify=function stringify(object,prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset){var obj=object;if("function"==typeof filter?obj=filter(prefix,obj):obj instanceof Date?obj=serializeDate(obj):"comma"===generateArrayPrefix&&isArray(obj)&&(obj=utils.maybeMap(obj,(function(value){return value instanceof Date?serializeDate(value):value})).join(",")),null===obj){if(strictNullHandling)return encoder&&!encodeValuesOnly?encoder(prefix,defaults.encoder,charset,"key"):prefix;obj=""}if(function isNonNullishPrimitive(v){return"string"==typeof v||"number"==typeof v||"boolean"==typeof v||"symbol"==typeof v||"bigint"==typeof v}(obj)||utils.isBuffer(obj))return encoder?[formatter(encodeValuesOnly?prefix:encoder(prefix,defaults.encoder,charset,"key"))+"="+formatter(encoder(obj,defaults.encoder,charset,"value"))]:[formatter(prefix)+"="+formatter(String(obj))];var objKeys,values=[];if(void 0===obj)return values;if(isArray(filter))objKeys=filter;else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var i=0;i<objKeys.length;++i){var key=objKeys[i],value=obj[key];if(!skipNulls||null!==value){var keyPrefix=isArray(obj)?"function"==typeof generateArrayPrefix?generateArrayPrefix(prefix,key):prefix:prefix+(allowDots?"."+key:"["+key+"]");pushToArray(values,stringify(value,keyPrefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset))}}return values};module.exports=function(object,opts){var objKeys,obj=object,options=function normalizeStringifyOptions(opts){if(!opts)return defaults;if(null!==opts.encoder&&void 0!==opts.encoder&&"function"!=typeof opts.encoder)throw new TypeError("Encoder has to be a function.");var charset=opts.charset||defaults.charset;if(void 0!==opts.charset&&"utf-8"!==opts.charset&&"iso-8859-1"!==opts.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var format=formats.default;if(void 0!==opts.format){if(!has.call(formats.formatters,opts.format))throw new TypeError("Unknown format option provided.");format=opts.format}var formatter=formats.formatters[format],filter=defaults.filter;return("function"==typeof opts.filter||isArray(opts.filter))&&(filter=opts.filter),{addQueryPrefix:"boolean"==typeof opts.addQueryPrefix?opts.addQueryPrefix:defaults.addQueryPrefix,allowDots:void 0===opts.allowDots?defaults.allowDots:!!opts.allowDots,charset:charset,charsetSentinel:"boolean"==typeof opts.charsetSentinel?opts.charsetSentinel:defaults.charsetSentinel,delimiter:void 0===opts.delimiter?defaults.delimiter:opts.delimiter,encode:"boolean"==typeof opts.encode?opts.encode:defaults.encode,encoder:"function"==typeof opts.encoder?opts.encoder:defaults.encoder,encodeValuesOnly:"boolean"==typeof opts.encodeValuesOnly?opts.encodeValuesOnly:defaults.encodeValuesOnly,filter:filter,formatter:formatter,serializeDate:"function"==typeof opts.serializeDate?opts.serializeDate:defaults.serializeDate,skipNulls:"boolean"==typeof opts.skipNulls?opts.skipNulls:defaults.skipNulls,sort:"function"==typeof opts.sort?opts.sort:null,strictNullHandling:"boolean"==typeof opts.strictNullHandling?opts.strictNullHandling:defaults.strictNullHandling}}(opts);"function"==typeof options.filter?obj=(0,options.filter)("",obj):isArray(options.filter)&&(objKeys=options.filter);var arrayFormat,keys=[];if("object"!=typeof obj||null===obj)return"";arrayFormat=opts&&opts.arrayFormat in arrayPrefixGenerators?opts.arrayFormat:opts&&"indices"in opts?opts.indices?"indices":"repeat":"indices";var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];objKeys||(objKeys=Object.keys(obj)),options.sort&&objKeys.sort(options.sort);for(var i=0;i<objKeys.length;++i){var key=objKeys[i];options.skipNulls&&null===obj[key]||pushToArray(keys,stringify(obj[key],key,generateArrayPrefix,options.strictNullHandling,options.skipNulls,options.encode?options.encoder:null,options.filter,options.sort,options.allowDots,options.serializeDate,options.formatter,options.encodeValuesOnly,options.charset))}var joined=keys.join(options.delimiter),prefix=!0===options.addQueryPrefix?"?":"";return options.charsetSentinel&&("iso-8859-1"===options.charset?prefix+="utf8=%26%2310003%3B&":prefix+="utf8=%E2%9C%93&"),joined.length>0?prefix+joined:""}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(280),has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(str){return str.replace(/&#(\d+);/g,(function($0,numberStr){return String.fromCharCode(parseInt(numberStr,10))}))},parseArrayValue=function(val,options){return val&&"string"==typeof val&&options.comma&&val.indexOf(",")>-1?val.split(","):val},parseKeys=function parseQueryStringKeys(givenKey,val,options,valuesParsed){if(givenKey){var key=options.allowDots?givenKey.replace(/\.([^.[]+)/g,"[$1]"):givenKey,child=/(\[[^[\]]*])/g,segment=options.depth>0&&/(\[[^[\]]*])/.exec(key),parent=segment?key.slice(0,segment.index):key,keys=[];if(parent){if(!options.plainObjects&&has.call(Object.prototype,parent)&&!options.allowPrototypes)return;keys.push(parent)}for(var i=0;options.depth>0&&null!==(segment=child.exec(key))&&i<options.depth;){if(i+=1,!options.plainObjects&&has.call(Object.prototype,segment[1].slice(1,-1))&&!options.allowPrototypes)return;keys.push(segment[1])}return segment&&keys.push("["+key.slice(segment.index)+"]"),function(chain,val,options,valuesParsed){for(var leaf=valuesParsed?val:parseArrayValue(val,options),i=chain.length-1;i>=0;--i){var obj,root=chain[i];if("[]"===root&&options.parseArrays)obj=[].concat(leaf);else{obj=options.plainObjects?Object.create(null):{};var cleanRoot="["===root.charAt(0)&&"]"===root.charAt(root.length-1)?root.slice(1,-1):root,index=parseInt(cleanRoot,10);options.parseArrays||""!==cleanRoot?!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&index>=0&&options.parseArrays&&index<=options.arrayLimit?(obj=[])[index]=leaf:obj[cleanRoot]=leaf:obj={0:leaf}}leaf=obj}return leaf}(keys,val,options,valuesParsed)}};module.exports=function(str,opts){var options=function normalizeParseOptions(opts){if(!opts)return defaults;if(null!==opts.decoder&&void 0!==opts.decoder&&"function"!=typeof opts.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==opts.charset&&"utf-8"!==opts.charset&&"iso-8859-1"!==opts.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var charset=void 0===opts.charset?defaults.charset:opts.charset;return{allowDots:void 0===opts.allowDots?defaults.allowDots:!!opts.allowDots,allowPrototypes:"boolean"==typeof opts.allowPrototypes?opts.allowPrototypes:defaults.allowPrototypes,arrayLimit:"number"==typeof opts.arrayLimit?opts.arrayLimit:defaults.arrayLimit,charset:charset,charsetSentinel:"boolean"==typeof opts.charsetSentinel?opts.charsetSentinel:defaults.charsetSentinel,comma:"boolean"==typeof opts.comma?opts.comma:defaults.comma,decoder:"function"==typeof opts.decoder?opts.decoder:defaults.decoder,delimiter:"string"==typeof opts.delimiter||utils.isRegExp(opts.delimiter)?opts.delimiter:defaults.delimiter,depth:"number"==typeof opts.depth||!1===opts.depth?+opts.depth:defaults.depth,ignoreQueryPrefix:!0===opts.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof opts.interpretNumericEntities?opts.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:"number"==typeof opts.parameterLimit?opts.parameterLimit:defaults.parameterLimit,parseArrays:!1!==opts.parseArrays,plainObjects:"boolean"==typeof opts.plainObjects?opts.plainObjects:defaults.plainObjects,strictNullHandling:"boolean"==typeof opts.strictNullHandling?opts.strictNullHandling:defaults.strictNullHandling}}(opts);if(""===str||null==str)return options.plainObjects?Object.create(null):{};for(var tempObj="string"==typeof str?function parseQueryStringValues(str,options){var i,obj={},cleanStr=options.ignoreQueryPrefix?str.replace(/^\?/,""):str,limit=options.parameterLimit===1/0?void 0:options.parameterLimit,parts=cleanStr.split(options.delimiter,limit),skipIndex=-1,charset=options.charset;if(options.charsetSentinel)for(i=0;i<parts.length;++i)0===parts[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===parts[i]?charset="utf-8":"utf8=%26%2310003%3B"===parts[i]&&(charset="iso-8859-1"),skipIndex=i,i=parts.length);for(i=0;i<parts.length;++i)if(i!==skipIndex){var key,val,part=parts[i],bracketEqualsPos=part.indexOf("]="),pos=-1===bracketEqualsPos?part.indexOf("="):bracketEqualsPos+1;-1===pos?(key=options.decoder(part,defaults.decoder,charset,"key"),val=options.strictNullHandling?null:""):(key=options.decoder(part.slice(0,pos),defaults.decoder,charset,"key"),val=utils.maybeMap(parseArrayValue(part.slice(pos+1),options),(function(encodedVal){return options.decoder(encodedVal,defaults.decoder,charset,"value")}))),val&&options.interpretNumericEntities&&"iso-8859-1"===charset&&(val=interpretNumericEntities(val)),part.indexOf("[]=")>-1&&(val=isArray(val)?[val]:val),has.call(obj,key)?obj[key]=utils.combine(obj[key],val):obj[key]=val}return obj}(str,options):str,obj=options.plainObjects?Object.create(null):{},keys=Object.keys(tempObj),i=0;i<keys.length;++i){var key=keys[i],newObj=parseKeys(key,tempObj[key],options,"string"==typeof str);obj=utils.merge(obj,newObj,options)}return utils.compact(obj)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(91),__webpack_require__(109),__webpack_require__(110),__webpack_require__(77),__webpack_require__(361),__webpack_require__(270),__webpack_require__(111),__webpack_require__(168),__webpack_require__(393),__webpack_require__(138),__webpack_require__(93),__webpack_require__(195),__webpack_require__(139),__webpack_require__(200),__webpack_require__(385),__webpack_require__(170),__webpack_require__(140),__webpack_require__(79),__webpack_require__(196),__webpack_require__(142),__webpack_require__(112),__webpack_require__(113),__webpack_require__(114),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function start(render){var _ref3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},decorateStory=_ref3.decorateStory,context=getContext(decorateStory),clientApi=context.clientApi,channel=context.channel,configApi=context.configApi,storyStore=context.storyStore,previousKind="",previousStory="",previousRevision=-1,previousViewMode="",previousId=null,renderMain=function renderMain(forceRender){var revision=storyStore.getRevision(),loadError=storyStore.getError(),_storyStore$getSelect=storyStore.getSelection(),storyId=_storyStore$getSelect.storyId,urlViewMode=_storyStore$getSelect.viewMode,data=storyStore.fromId(storyId),_ref4=data||{},kind=_ref4.kind,name=_ref4.name,getDecorated=_ref4.getDecorated,id=_ref4.id,parameters=_ref4.parameters,error=_ref4.error,viewMode=parameters&&parameters.docsOnly?"docs":urlViewMode,renderContext=Object.assign({},context,{},data,{selectedKind:kind,selectedStory:name,parameters:parameters,forceRender:forceRender});if(loadError||error)showErrorDisplay(loadError||error);else if(forceRender||revision!==previousRevision||viewMode!==previousViewMode||kind!==previousKind||name!==previousStory){switch(!forceRender&&previousKind&&previousStory&&_addons.default.getChannel().emit(_coreEvents.default.STORY_CHANGED,id),previousViewMode){case"docs":null==previousKind||kind===previousKind&&viewMode===previousViewMode||(storyStore.cleanHooksForKind(previousKind),_reactDom.default.unmountComponentAtNode(_global.document.getElementById("docs-root")));break;case"story":default:null==previousId||id===previousId&&viewMode===previousViewMode||(storyStore.cleanHooks(previousId),_reactDom.default.unmountComponentAtNode(_global.document.getElementById("root")))}if(viewMode!==previousViewMode)switch(viewMode){case"docs":showMain(),_global.document.getElementById("root").setAttribute("hidden",!0),_global.document.getElementById("docs-root").removeAttribute("hidden");break;case"story":default:"docs"===previousViewMode&&(_global.document.getElementById("docs-root").setAttribute("hidden",!0),_global.document.getElementById("root").removeAttribute("hidden"))}switch(viewMode){case"docs":var docs=parameters&&parameters.docs||{},DocsContainer=docs.container||function(_ref5){var children=_ref5.children;return _react.default.createElement(_react.default.Fragment,null,children)},Page=docs.page||_NoDocs.NoDocs;_reactDom.default.render(_react.default.createElement(DocsContainer,{context:renderContext},_react.default.createElement(Page,null)),_global.document.getElementById("docs-root"),(function(){return _addons.default.getChannel().emit(_coreEvents.default.DOCS_RENDERED,kind)}));break;case"story":default:getDecorated?_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,render(renderContext);case 3:_addons.default.getChannel().emit(_coreEvents.default.STORY_RENDERED,id),_context.next=9;break;case 6:_context.prev=6,_context.t0=_context.catch(0),showException(_context.t0);case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))():(showNopreview(),_addons.default.getChannel().emit(_coreEvents.default.STORY_MISSING,id))}previousRevision=revision,previousKind=kind,previousStory=name,previousViewMode=viewMode,previousId=id,forceRender||"docs"===viewMode||(_global.document.documentElement.scrollTop=0,_global.document.documentElement.scrollLeft=0)}else _addons.default.getChannel().emit(_coreEvents.default.STORY_UNCHANGED,{id:id,revision:revision,kind:kind,name:name,viewMode:viewMode})},renderUI=function renderUI(forceRender){if(isBrowser)try{renderMain(forceRender)}catch(ex){showException(ex)}},forceReRender=function forceReRender(){return renderUI(!0)};if(isBrowser){var deprecatedToId=(0,_utilDeprecate.default)(_csf.toId,"Passing name+kind to the SET_CURRENT_STORY event is deprecated, use a storyId instead");channel.on(_coreEvents.default.FORCE_RE_RENDER,forceReRender),channel.on(_coreEvents.default.SET_CURRENT_STORY,(function(_ref7){var inputStoryId=_ref7.storyId,name=_ref7.name,kind=_ref7.kind,viewMode=_ref7.viewMode,storyId=inputStoryId;if(!storyId){if(!name||!kind)throw new Error("You should pass `storyId` into SET_CURRENT_STORY");storyId=deprecatedToId(kind,name)}storyStore.setSelection({storyId:storyId,viewMode:viewMode}),(0,_url.setPath)({storyId:storyId,viewMode:viewMode})})),_global.window.onkeydown=function(event){if(!focusInInput(event)){var altKey=event.altKey,ctrlKey=event.ctrlKey,metaKey=event.metaKey,shiftKey=event.shiftKey,key=event.key,code=event.code,keyCode=event.keyCode;channel.emit(_coreEvents.default.PREVIEW_KEYDOWN,{event:{altKey:altKey,ctrlKey:ctrlKey,metaKey:metaKey,shiftKey:shiftKey,key:key,code:code,keyCode:keyCode}})}}}storyStore.on(_coreEvents.default.STORY_INIT,(function(){var _initializePath=(0,_url.initializePath)(storyStore),storyId=_initializePath.storyId,viewMode=_initializePath.viewMode;storyStore.setSelection({storyId:storyId,viewMode:viewMode})})),storyStore.on(_coreEvents.default.STORY_RENDER,renderUI),void 0!==_global.window&&(_global.window.__STORYBOOK_CLIENT_API__=clientApi,_global.window.__STORYBOOK_STORY_STORE__=storyStore,_global.window.__STORYBOOK_ADDONS_CHANNEL__=channel);var previousExports=new Map,loadStories=function loadStories(loadable,framework){return function(){var reqs=null;Array.isArray(loadable)?reqs=loadable:loadable.keys&&(reqs=[loadable]);var currentExports=new Map;if(reqs)reqs.forEach((function(req){req.keys().forEach((function(filename){var fileExports=req(filename);currentExports.set(fileExports,filename)}))}));else{var exported=loadable();Array.isArray(exported)&&exported.every((function(obj){return null!=obj.default}))?currentExports=new Map(exported.map((function(fileExports){return[fileExports,null]}))):exported&&_clientLogger.logger.warn("Loader function passed to 'configure' should return void or an array of module exports that all contain a 'default' export. Received: ".concat(JSON.stringify(exported)))}var removed=_toConsumableArray(previousExports.keys()).filter((function(exp){return!currentExports.has(exp)}));removed.forEach((function(exp){exp.default&&storyStore.removeStoryKind(exp.default.title)})),removed.length>0&&storyStore.incrementRevision(),_toConsumableArray(currentExports.keys()).filter((function(exp){return!previousExports.has(exp)})).forEach((function(fileExports){if(fileExports.default){if(!fileExports.default.title)throw new Error("Unexpected default export without title: ".concat(JSON.stringify(fileExports.default)));var meta=fileExports.default,__namedExportsOrder=fileExports.__namedExportsOrder,namedExports=_objectWithoutProperties(fileExports,["default","__namedExportsOrder"]),exports=namedExports;Array.isArray(__namedExportsOrder)&&(exports={},__namedExportsOrder.forEach((function(name){namedExports[name]&&(exports[name]=namedExports[name])})));var kindName=meta.title,componentId=meta.id,params=meta.parameters,decos=meta.decorators,component=meta.component,subcomponents=meta.subcomponents,kind=clientApi.storiesOf(kindName,!0);kind.addParameters(Object.assign({framework:framework,component:component,subcomponents:subcomponents,fileName:currentExports.get(fileExports)},params)),(decos||[]).forEach((function(decorator){kind.addDecorator(decorator)})),Object.keys(exports).forEach((function(key){if((0,_csf.isExportStory)(key,meta)){var storyFn=exports[key],_ref8=storyFn.story||{},name=_ref8.name,parameters=_ref8.parameters,decorators=_ref8.decorators;parameters&&parameters.decorators&&(0,_utilDeprecate.default)((function(){}),"".concat(kindName," => ").concat(name||key,": story.parameters.decorators is deprecated; use story.decorators instead."))();var decoratorParams=decorators?{decorators:decorators}:null,exportName=(0,_csf.storyNameFromExport)(key),idParams={__id:(0,_csf.toId)(componentId||kindName,exportName)};kind.add(name||exportName,storyFn,Object.assign({},parameters,{},decoratorParams,{},idParams))}}))}})),previousExports=currentExports}},loaded=!1,configure=function configure(loadable,m,framework){if("string"==typeof m)throw new Error("Invalid module '".concat(m,"'. Did you forget to pass `module` as the second argument to `configure`\"?"));if(m&&m.hot&&m.hot.dispose){var _ref9$previousExports=(m.hot.data||{}).previousExports;previousExports=void 0===_ref9$previousExports?new Map:_ref9$previousExports,m.hot.dispose((function(data){loaded=!1,data.previousExports=previousExports}))}loaded&&_clientLogger.logger.warn("Unexpected loaded state. Did you call `load` twice?"),loaded=!0,configApi.configure(loadStories(loadable,framework),m)};return{configure:configure,context:context,clientApi:clientApi,configApi:configApi,forceReRender:forceReRender}},exports.getContext=void 0,__webpack_require__(184);var _global=__webpack_require__(92),_react=_interopRequireDefault(__webpack_require__(5)),_reactDom=_interopRequireDefault(__webpack_require__(395)),_utilDeprecate=_interopRequireDefault(__webpack_require__(266)),_ansiToHtml=_interopRequireDefault(__webpack_require__(761)),_addons=_interopRequireDefault(__webpack_require__(267)),_channelPostmessage=_interopRequireDefault(__webpack_require__(768)),_clientApi2=__webpack_require__(341),_csf=__webpack_require__(201),_clientLogger=__webpack_require__(143),_coreEvents=_interopRequireDefault(__webpack_require__(172)),_url=__webpack_require__(777),_NoDocs=__webpack_require__(778);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var ansiConverter=new _ansiToHtml.default({escapeXML:!0}),classes_MAIN="sb-show-main",classes_NOPREVIEW="sb-show-nopreview",classes_ERROR="sb-show-errordisplay";function showMain(){_global.document.body.classList.remove(classes_NOPREVIEW),_global.document.body.classList.remove(classes_ERROR),_global.document.body.classList.add(classes_MAIN)}function showNopreview(){_global.document.body.classList.remove(classes_MAIN),_global.document.body.classList.remove(classes_ERROR),_global.document.body.classList.add(classes_NOPREVIEW)}function showErrorDisplay(_ref){var _ref$message=_ref.message,message=void 0===_ref$message?"":_ref$message,_ref$stack=_ref.stack,stack=void 0===_ref$stack?"":_ref$stack;_global.document.getElementById("error-message").innerHTML=ansiConverter.toHtml(message),_global.document.getElementById("error-stack").innerHTML=ansiConverter.toHtml(stack),_global.document.body.classList.remove(classes_MAIN),_global.document.body.classList.remove(classes_NOPREVIEW),_global.document.body.classList.add(classes_ERROR)}function showError(_ref2){var title=_ref2.title,description=_ref2.description;_addons.default.getChannel().emit(_coreEvents.default.STORY_ERRORED,{title:title,description:description}),showErrorDisplay({message:title,stack:description})}function showException(exception){_addons.default.getChannel().emit(_coreEvents.default.STORY_THREW_EXCEPTION,exception),showErrorDisplay(exception),_clientLogger.logger.error(exception)}var isBrowser=_global.navigator&&_global.navigator.userAgent&&"storyshots"!==_global.navigator.userAgent&&!(_global.navigator.userAgent.indexOf("Node.js")>-1)&&!(_global.navigator.userAgent.indexOf("jsdom")>-1),getContext=function(decorateStory){var storyStore,clientApi,channel=null;if(isBrowser)try{channel=_addons.default.getChannel()}catch(e){channel=(0,_channelPostmessage.default)({page:"preview"}),_addons.default.setChannel(channel)}void 0!==_global.window&&_global.window.__STORYBOOK_CLIENT_API__?storyStore=(clientApi=_global.window.__STORYBOOK_CLIENT_API__)._storyStore:(storyStore=new _clientApi2.StoryStore({channel:channel}),clientApi=new _clientApi2.ClientApi({storyStore:storyStore,decorateStory:decorateStory}));var clearDecorators=clientApi.clearDecorators;return{configApi:new _clientApi2.ConfigApi({clearDecorators:clearDecorators,storyStore:storyStore,channel:channel,clientApi:clientApi}),storyStore:storyStore,channel:channel,clientApi:clientApi,showMain:showMain,showError:showError,showException:showException}};function focusInInput(event){return/input|textarea/i.test(event.target.tagName)||null!==event.target.getAttribute("contenteditable")}exports.getContext=getContext},function(module,exports,__webpack_require__){"use strict";var l=__webpack_require__(394),n="function"==typeof Symbol&&Symbol.for,p=n?Symbol.for("react.element"):60103,q=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,t=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,v=n?Symbol.for("react.provider"):60109,w=n?Symbol.for("react.context"):60110,x=n?Symbol.for("react.forward_ref"):60112,y=n?Symbol.for("react.suspense"):60113,z=n?Symbol.for("react.memo"):60115,A=n?Symbol.for("react.lazy"):60116,B="function"==typeof Symbol&&Symbol.iterator;function C(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function F(a,b,c){this.props=a,this.context=b,this.refs=E,this.updater=c||D}function G(){}function H(a,b,c){this.props=a,this.context=b,this.refs=E,this.updater=c||D}F.prototype.isReactComponent={},F.prototype.setState=function(a,b){if("object"!=typeof a&&"function"!=typeof a&&null!=a)throw Error(C(85));this.updater.enqueueSetState(this,a,b,"setState")},F.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")},G.prototype=F.prototype;var I=H.prototype=new G;I.constructor=H,l(I,F.prototype),I.isPureReactComponent=!0;var J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};function M(a,b,c){var e,d={},g=null,k=null;if(null!=b)for(e in void 0!==b.ref&&(k=b.ref),void 0!==b.key&&(g=""+b.key),b)K.call(b,e)&&!L.hasOwnProperty(e)&&(d[e]=b[e]);var f=arguments.length-2;if(1===f)d.children=c;else if(1<f){for(var h=Array(f),m=0;m<f;m++)h[m]=arguments[m+2];d.children=h}if(a&&a.defaultProps)for(e in f=a.defaultProps)void 0===d[e]&&(d[e]=f[e]);return{$$typeof:p,type:a,key:g,ref:k,props:d,_owner:J.current}}function O(a){return"object"==typeof a&&null!==a&&a.$$typeof===p}var P=/\/+/g,Q=[];function R(a,b,c,e){if(Q.length){var d=Q.pop();return d.result=a,d.keyPrefix=b,d.func=c,d.context=e,d.count=0,d}return{result:a,keyPrefix:b,func:c,context:e,count:0}}function S(a){a.result=null,a.keyPrefix=null,a.func=null,a.context=null,a.count=0,10>Q.length&&Q.push(a)}function V(a,b,c){return null==a?0:function T(a,b,c,e){var d=typeof a;"undefined"!==d&&"boolean"!==d||(a=null);var g=!1;if(null===a)g=!0;else switch(d){case"string":case"number":g=!0;break;case"object":switch(a.$$typeof){case p:case q:g=!0}}if(g)return c(e,a,""===b?"."+U(a,0):b),1;if(g=0,b=""===b?".":b+":",Array.isArray(a))for(var k=0;k<a.length;k++){var f=b+U(d=a[k],k);g+=T(d,f,c,e)}else if(null===a||"object"!=typeof a?f=null:f="function"==typeof(f=B&&a[B]||a["@@iterator"])?f:null,"function"==typeof f)for(a=f.call(a),k=0;!(d=a.next()).done;)g+=T(d=d.value,f=b+U(d,k++),c,e);else if("object"===d)throw c=""+a,Error(C(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return g}(a,"",b,c)}function U(a,b){return"object"==typeof a&&null!==a&&null!=a.key?function escape(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,(function(a){return b[a]}))}(a.key):b.toString(36)}function W(a,b){a.func.call(a.context,b,a.count++)}function aa(a,b,c){var e=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++),Array.isArray(a)?X(a,e,c,(function(a){return a})):null!=a&&(O(a)&&(a=function N(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}(a,d+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+c)),e.push(a))}function X(a,b,c,e,d){var g="";null!=c&&(g=(""+c).replace(P,"$&/")+"/"),V(a,aa,b=R(b,g,e,d)),S(b)}var Y={current:null};function Z(){var a=Y.current;if(null===a)throw Error(C(321));return a}var ba={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:l};exports.Children={map:function(a,b,c){if(null==a)return a;var e=[];return X(a,e,null,b,c),e},forEach:function(a,b,c){if(null==a)return a;V(a,W,b=R(null,null,b,c)),S(b)},count:function(a){return V(a,(function(){return null}),null)},toArray:function(a){var b=[];return X(a,b,null,(function(a){return a})),b},only:function(a){if(!O(a))throw Error(C(143));return a}},exports.Component=F,exports.Fragment=r,exports.Profiler=u,exports.PureComponent=H,exports.StrictMode=t,exports.Suspense=y,exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba,exports.cloneElement=function(a,b,c){if(null==a)throw Error(C(267,a));var e=l({},a.props),d=a.key,g=a.ref,k=a._owner;if(null!=b){if(void 0!==b.ref&&(g=b.ref,k=J.current),void 0!==b.key&&(d=""+b.key),a.type&&a.type.defaultProps)var f=a.type.defaultProps;for(h in b)K.call(b,h)&&!L.hasOwnProperty(h)&&(e[h]=void 0===b[h]&&void 0!==f?f[h]:b[h])}var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){f=Array(h);for(var m=0;m<h;m++)f[m]=arguments[m+2];e.children=f}return{$$typeof:p,type:a.type,key:d,ref:g,props:e,_owner:k}},exports.createContext=function(a,b){return void 0===b&&(b=null),(a={$$typeof:w,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:v,_context:a},a.Consumer=a},exports.createElement=M,exports.createFactory=function(a){var b=M.bind(null,a);return b.type=a,b},exports.createRef=function(){return{current:null}},exports.forwardRef=function(a){return{$$typeof:x,render:a}},exports.isValidElement=O,exports.lazy=function(a){return{$$typeof:A,_ctor:a,_status:-1,_result:null}},exports.memo=function(a,b){return{$$typeof:z,type:a,compare:void 0===b?null:b}},exports.useCallback=function(a,b){return Z().useCallback(a,b)},exports.useContext=function(a,b){return Z().useContext(a,b)},exports.useDebugValue=function(){},exports.useEffect=function(a,b){return Z().useEffect(a,b)},exports.useImperativeHandle=function(a,b,c){return Z().useImperativeHandle(a,b,c)},exports.useLayoutEffect=function(a,b){return Z().useLayoutEffect(a,b)},exports.useMemo=function(a,b){return Z().useMemo(a,b)},exports.useReducer=function(a,b,c){return Z().useReducer(a,b,c)},exports.useRef=function(a){return Z().useRef(a)},exports.useState=function(a){return Z().useState(a)},exports.version="16.13.1"},function(module,exports,__webpack_require__){"use strict";var aa=__webpack_require__(5),n=__webpack_require__(394),r=__webpack_require__(759);function u(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(u(227));function ba(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var da=!1,ea=null,fa=!1,ha=null,ia={onError:function(a){da=!0,ea=a}};function ja(a,b,c,d,e,f,g,h,k){da=!1,ea=null,ba.apply(ia,arguments)}var la=null,ma=null,na=null;function oa(a,b,c){var d=a.type||"unknown-event";a.currentTarget=na(c),function ka(a,b,c,d,e,f,g,h,k){if(ja.apply(this,arguments),da){if(!da)throw Error(u(198));var l=ea;da=!1,ea=null,fa||(fa=!0,ha=l)}}(d,b,void 0,a),a.currentTarget=null}var pa=null,qa={};function ra(){if(pa)for(var a in qa){var b=qa[a],c=pa.indexOf(a);if(!(-1<c))throw Error(u(96,a));if(!sa[c]){if(!b.extractEvents)throw Error(u(97,a));for(var d in sa[c]=b,c=b.eventTypes){var e=void 0,f=c[d],g=b,h=d;if(ta.hasOwnProperty(h))throw Error(u(99,h));ta[h]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&ua(k[e],g,h);e=!0}else f.registrationName?(ua(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(u(98,d,a))}}}}function ua(a,b,c){if(va[a])throw Error(u(100,a));va[a]=b,wa[a]=b.eventTypes[c].dependencies}var sa=[],ta={},va={},wa={};function xa(a){var c,b=!1;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!qa.hasOwnProperty(c)||qa[c]!==d){if(qa[c])throw Error(u(102,c));qa[c]=d,b=!0}}b&&ra()}var ya=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),za=null,Aa=null,Ba=null;function Ca(a){if(a=ma(a)){if("function"!=typeof za)throw Error(u(280));var b=a.stateNode;b&&(b=la(b),za(a.stateNode,a.type,b))}}function Da(a){Aa?Ba?Ba.push(a):Ba=[a]:Aa=a}function Ea(){if(Aa){var a=Aa,b=Ba;if(Ba=Aa=null,Ca(a),b)for(a=0;a<b.length;a++)Ca(b[a])}}function Fa(a,b){return a(b)}function Ga(a,b,c,d,e){return a(b,c,d,e)}function Ha(){}var Ia=Fa,Ja=!1,Ka=!1;function La(){null===Aa&&null===Ba||(Ha(),Ea())}function Ma(a,b,c){if(Ka)return a(b,c);Ka=!0;try{return Ia(a,b,c)}finally{Ka=!1,La()}}var Na=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oa=Object.prototype.hasOwnProperty,Pa={},Qa={};function v(a,b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b,this.attributeName=d,this.attributeNamespace=e,this.mustUseProperty=c,this.propertyName=a,this.type=b,this.sanitizeURL=f}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(a){C[a]=new v(a,0,!1,a,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(a){var b=a[0];C[b]=new v(b,1,!1,a[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(a){C[a]=new v(a,2,!1,a.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(a){C[a]=new v(a,2,!1,a,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(a){C[a]=new v(a,3,!1,a.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(a){C[a]=new v(a,3,!0,a,null,!1)})),["capture","download"].forEach((function(a){C[a]=new v(a,4,!1,a,null,!1)})),["cols","rows","size","span"].forEach((function(a){C[a]=new v(a,6,!1,a,null,!1)})),["rowSpan","start"].forEach((function(a){C[a]=new v(a,5,!1,a.toLowerCase(),null,!1)}));var Ua=/[\-:]([a-z])/g;function Va(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(a){var b=a.replace(Ua,Va);C[b]=new v(b,1,!1,a,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(a){var b=a.replace(Ua,Va);C[b]=new v(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(a){var b=a.replace(Ua,Va);C[b]=new v(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(a){C[a]=new v(a,1,!1,a.toLowerCase(),null,!1)})),C.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(a){C[a]=new v(a,1,!1,a.toLowerCase(),null,!0)}));var Wa=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Xa(a,b,c,d){var e=C.hasOwnProperty(b)?C[b]:null;(null!==e?0===e.type:!d&&(2<b.length&&("o"===b[0]||"O"===b[0])&&("n"===b[1]||"N"===b[1])))||(function Ta(a,b,c,d){if(null==b||function Sa(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return!d&&(null!==c?!c.acceptsBooleans:"data-"!==(a=a.toLowerCase().slice(0,5))&&"aria-"!==a);default:return!1}}(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}(b,c,e,d)&&(c=null),d||null===e?function Ra(a){return!!Oa.call(Qa,a)||!Oa.call(Pa,a)&&(Na.test(a)?Qa[a]=!0:(Pa[a]=!0,!1))}(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3!==e.type&&"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(c=3===(e=e.type)||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}Wa.hasOwnProperty("ReactCurrentDispatcher")||(Wa.ReactCurrentDispatcher={current:null}),Wa.hasOwnProperty("ReactCurrentBatchConfig")||(Wa.ReactCurrentBatchConfig={suspense:null});var Ya=/^(.*)[\\\/]/,E="function"==typeof Symbol&&Symbol.for,Za=E?Symbol.for("react.element"):60103,$a=E?Symbol.for("react.portal"):60106,ab=E?Symbol.for("react.fragment"):60107,bb=E?Symbol.for("react.strict_mode"):60108,cb=E?Symbol.for("react.profiler"):60114,db=E?Symbol.for("react.provider"):60109,eb=E?Symbol.for("react.context"):60110,fb=E?Symbol.for("react.concurrent_mode"):60111,gb=E?Symbol.for("react.forward_ref"):60112,hb=E?Symbol.for("react.suspense"):60113,ib=E?Symbol.for("react.suspense_list"):60120,jb=E?Symbol.for("react.memo"):60115,kb=E?Symbol.for("react.lazy"):60116,lb=E?Symbol.for("react.block"):60121,mb="function"==typeof Symbol&&Symbol.iterator;function nb(a){return null===a||"object"!=typeof a?null:"function"==typeof(a=mb&&a[mb]||a["@@iterator"])?a:null}function pb(a){if(null==a)return null;if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a;switch(a){case ab:return"Fragment";case $a:return"Portal";case cb:return"Profiler";case bb:return"StrictMode";case hb:return"Suspense";case ib:return"SuspenseList"}if("object"==typeof a)switch(a.$$typeof){case eb:return"Context.Consumer";case db:return"Context.Provider";case gb:var b=a.render;return b=b.displayName||b.name||"",a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case jb:return pb(a.type);case lb:return pb(a.render);case kb:if(a=1===a._status?a._result:null)return pb(a)}return null}function qb(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=pb(a.type);c=null,d&&(c=pb(d.type)),d=f,f="",e?f=" (at "+e.fileName.replace(Ya,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")"),c="\n    in "+(d||"Unknown")+f}b+=c,a=a.return}while(a);return b}function rb(a){switch(typeof a){case"boolean":case"number":case"object":case"string":case"undefined":return a;default:return""}}function sb(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function xb(a){a._valueTracker||(a._valueTracker=function tb(a){var b=sb(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&void 0!==c&&"function"==typeof c.get&&"function"==typeof c.set){var e=c.get,f=c.set;return Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a,f.call(this,a)}}),Object.defineProperty(a,b,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null,delete a[b]}}}}(a))}function yb(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue(),d="";return a&&(d=sb(a)?a.checked?"true":"false":a.value),(a=d)!==c&&(b.setValue(a),!0)}function zb(a,b){var c=b.checked;return n({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Ab(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=rb(null!=b.value?b.value:c),a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function Bb(a,b){null!=(b=b.checked)&&Xa(a,"checked",b,!1)}function Cb(a,b){Bb(a,b);var c=rb(b.value),d=b.type;if(null!=c)"number"===d?(0===c&&""===a.value||a.value!=c)&&(a.value=""+c):a.value!==""+c&&(a.value=""+c);else if("submit"===d||"reset"===d)return void a.removeAttribute("value");b.hasOwnProperty("value")?Db(a,b.type,c):b.hasOwnProperty("defaultValue")&&Db(a,b.type,rb(b.defaultValue)),null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Eb(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue,c||b===a.value||(a.value=b),a.defaultValue=b}""!==(c=a.name)&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,""!==c&&(a.name=c)}function Db(a,b,c){"number"===b&&a.ownerDocument.activeElement===a||(null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c))}function Gb(a,b){return a=n({children:void 0},b),(b=function Fb(a){var b="";return aa.Children.forEach(a,(function(a){null!=a&&(b+=a)})),b}(b.children))&&(a.children=b),a}function Hb(a,b,c,d){if(a=a.options,b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{for(c=""+rb(c),b=null,e=0;e<a.length;e++){if(a[e].value===c)return a[e].selected=!0,void(d&&(a[e].defaultSelected=!0));null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Ib(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(u(91));return n({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Jb(a,b){var c=b.value;if(null==c){if(c=b.children,b=b.defaultValue,null!=c){if(null!=b)throw Error(u(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(u(93));c=c[0]}b=c}null==b&&(b=""),c=b}a._wrapperState={initialValue:rb(c)}}function Kb(a,b){var c=rb(b.value),d=rb(b.defaultValue);null!=c&&((c=""+c)!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c)),null!=d&&(a.defaultValue=""+d)}function Lb(a){var b=a.textContent;b===a._wrapperState.initialValue&&""!==b&&null!==b&&(a.value=b)}var Mb_html="http://www.w3.org/1999/xhtml",Mb_svg="http://www.w3.org/2000/svg";function Nb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nb(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}var Pb,Qb=function(a){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction((function(){return a(b,c)}))}:a}((function(a,b){if(a.namespaceURI!==Mb_svg||"innerHTML"in a)a.innerHTML=b;else{for((Pb=Pb||document.createElement("div")).innerHTML="<svg>"+b.valueOf().toString()+"</svg>",b=Pb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}));function Rb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType)return void(c.nodeValue=b)}a.textContent=b}function Sb(a,b){var c={};return c[a.toLowerCase()]=b.toLowerCase(),c["Webkit"+a]="webkit"+b,c["Moz"+a]="moz"+b,c}var Tb={animationend:Sb("Animation","AnimationEnd"),animationiteration:Sb("Animation","AnimationIteration"),animationstart:Sb("Animation","AnimationStart"),transitionend:Sb("Transition","TransitionEnd")},Ub={},Vb={};function Wb(a){if(Ub[a])return Ub[a];if(!Tb[a])return a;var c,b=Tb[a];for(c in b)if(b.hasOwnProperty(c)&&c in Vb)return Ub[a]=b[c];return a}ya&&(Vb=document.createElement("div").style,"AnimationEvent"in window||(delete Tb.animationend.animation,delete Tb.animationiteration.animation,delete Tb.animationstart.animation),"TransitionEvent"in window||delete Tb.transitionend.transition);var Xb=Wb("animationend"),Yb=Wb("animationiteration"),Zb=Wb("animationstart"),$b=Wb("transitionend"),ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bc=new("function"==typeof WeakMap?WeakMap:Map);function cc(a){var b=bc.get(a);return void 0===b&&(b=new Map,bc.set(a,b)),b}function dc(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do{0!=(1026&(b=a).effectTag)&&(c=b.return),a=b.return}while(a)}return 3===b.tag?c:null}function ec(a){if(13===a.tag){var b=a.memoizedState;if(null===b&&(null!==(a=a.alternate)&&(b=a.memoizedState)),null!==b)return b.dehydrated}return null}function fc(a){if(dc(a)!==a)throw Error(u(188))}function hc(a){if(!(a=function gc(a){var b=a.alternate;if(!b){if(null===(b=dc(a)))throw Error(u(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){if(null!==(d=e.return)){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return fc(e),a;if(f===d)return fc(e),b;f=f.sibling}throw Error(u(188))}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0,c=e,d=f;break}if(h===d){g=!0,d=e,c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===c){g=!0,c=f,d=e;break}if(h===d){g=!0,d=f,c=e;break}h=h.sibling}if(!g)throw Error(u(189))}}if(c.alternate!==d)throw Error(u(190))}if(3!==c.tag)throw Error(u(188));return c.stateNode.current===c?a:b}(a)))return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}}return null}function ic(a,b){if(null==b)throw Error(u(30));return null==a?b:Array.isArray(a)?Array.isArray(b)?(a.push.apply(a,b),a):(a.push(b),a):Array.isArray(b)?[a].concat(b):[a,b]}function jc(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var kc=null;function lc(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)oa(a,b[d],c[d]);else b&&oa(a,b,c);a._dispatchListeners=null,a._dispatchInstances=null,a.isPersistent()||a.constructor.release(a)}}function mc(a){if(null!==a&&(kc=ic(kc,a)),a=kc,kc=null,a){if(jc(a,lc),kc)throw Error(u(95));if(fa)throw a=ha,fa=!1,ha=null,a}}function nc(a){return(a=a.target||a.srcElement||window).correspondingUseElement&&(a=a.correspondingUseElement),3===a.nodeType?a.parentNode:a}function oc(a){if(!ya)return!1;var b=(a="on"+a)in document;return b||((b=document.createElement("div")).setAttribute(a,"return;"),b="function"==typeof b[a]),b}var pc=[];function qc(a){a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>pc.length&&pc.push(a)}function rc(a,b,c,d){if(pc.length){var e=pc.pop();return e.topLevelType=a,e.eventSystemFlags=d,e.nativeEvent=b,e.targetInst=c,e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function sc(a){var b=a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;5!==(b=c.tag)&&6!==b||a.ancestors.push(c),c=tc(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=nc(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,k=0;k<sa.length;k++){var l=sa[k];l&&(l=l.extractEvents(d,b,f,e,g))&&(h=ic(h,l))}mc(h)}}function uc(a,b,c){if(!c.has(a)){switch(a){case"scroll":vc(b,"scroll",!0);break;case"focus":case"blur":vc(b,"focus",!0),vc(b,"blur",!0),c.set("blur",null),c.set("focus",null);break;case"cancel":case"close":oc(a)&&vc(b,a,!0);break;case"invalid":case"submit":case"reset":break;default:-1===ac.indexOf(a)&&F(a,b)}c.set(a,null)}}var wc,xc,yc,zc=!1,Ac=[],Bc=null,Cc=null,Dc=null,Ec=new Map,Fc=new Map,Gc=[],Hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ic="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Kc(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:32|c,nativeEvent:e,container:d}}function Lc(a,b){switch(a){case"focus":case"blur":Bc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":Dc=null;break;case"pointerover":case"pointerout":Ec.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(b.pointerId)}}function Mc(a,b,c,d,e,f){return null===a||a.nativeEvent!==f?(a=Kc(b,c,d,e,f),null!==b&&(null!==(b=Nc(b))&&xc(b)),a):(a.eventSystemFlags|=d,a)}function Pc(a){var b=tc(a.target);if(null!==b){var c=dc(b);if(null!==c)if(13===(b=c.tag)){if(null!==(b=ec(c)))return a.blockedOn=b,void r.unstable_runWithPriority(a.priority,(function(){yc(c)}))}else if(3===b&&c.stateNode.hydrate)return void(a.blockedOn=3===c.tag?c.stateNode.containerInfo:null)}a.blockedOn=null}function Qc(a){if(null!==a.blockedOn)return!1;var b=Rc(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Nc(b);return null!==c&&xc(c),a.blockedOn=b,!1}return!0}function Sc(a,b,c){Qc(a)&&c.delete(b)}function Tc(){for(zc=!1;0<Ac.length;){var a=Ac[0];if(null!==a.blockedOn){null!==(a=Nc(a.blockedOn))&&wc(a);break}var b=Rc(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:Ac.shift()}null!==Bc&&Qc(Bc)&&(Bc=null),null!==Cc&&Qc(Cc)&&(Cc=null),null!==Dc&&Qc(Dc)&&(Dc=null),Ec.forEach(Sc),Fc.forEach(Sc)}function Uc(a,b){a.blockedOn===b&&(a.blockedOn=null,zc||(zc=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Tc)))}function Vc(a){function b(b){return Uc(b,a)}if(0<Ac.length){Uc(Ac[0],a);for(var c=1;c<Ac.length;c++){var d=Ac[c];d.blockedOn===a&&(d.blockedOn=null)}}for(null!==Bc&&Uc(Bc,a),null!==Cc&&Uc(Cc,a),null!==Dc&&Uc(Dc,a),Ec.forEach(b),Fc.forEach(b),c=0;c<Gc.length;c++)(d=Gc[c]).blockedOn===a&&(d.blockedOn=null);for(;0<Gc.length&&null===(c=Gc[0]).blockedOn;)Pc(c),null===c.blockedOn&&Gc.shift()}var Wc={},Yc=new Map,Zc=new Map,$c=["abort","abort",Xb,"animationEnd",Yb,"animationIteration",Zb,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$b,"transitionEnd","waiting","waiting"];function ad(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b},Zc.set(d,b),Yc.set(d,f),Wc[e]=f}}ad("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),ad("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),ad($c,2);for(var bd="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),cd=0;cd<bd.length;cd++)Zc.set(bd[cd],0);var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function F(a,b){vc(b,a,!1)}function vc(a,b,c){var d=Zc.get(b);switch(void 0===d?2:d){case 0:d=gd.bind(null,b,1,a);break;case 1:d=hd.bind(null,b,1,a);break;default:d=id.bind(null,b,1,a)}c?a.addEventListener(b,d,!0):a.addEventListener(b,d,!1)}function gd(a,b,c,d){Ja||Ha();var e=id,f=Ja;Ja=!0;try{Ga(e,a,b,c,d)}finally{(Ja=f)||La()}}function hd(a,b,c,d){ed(dd,id.bind(null,a,b,c,d))}function id(a,b,c,d){if(fd)if(0<Ac.length&&-1<Hc.indexOf(a))a=Kc(null,a,b,c,d),Ac.push(a);else{var e=Rc(a,b,c,d);if(null===e)Lc(a,d);else if(-1<Hc.indexOf(a))a=Kc(e,a,b,c,d),Ac.push(a);else if(!function Oc(a,b,c,d,e){switch(b){case"focus":return Bc=Mc(Bc,a,b,c,d,e),!0;case"dragenter":return Cc=Mc(Cc,a,b,c,d,e),!0;case"mouseover":return Dc=Mc(Dc,a,b,c,d,e),!0;case"pointerover":var f=e.pointerId;return Ec.set(f,Mc(Ec.get(f)||null,a,b,c,d,e)),!0;case"gotpointercapture":return f=e.pointerId,Fc.set(f,Mc(Fc.get(f)||null,a,b,c,d,e)),!0}return!1}(e,a,b,c,d)){Lc(a,d),a=rc(a,d,null,b);try{Ma(sc,a)}finally{qc(a)}}}}function Rc(a,b,c,d){if(null!==(c=tc(c=nc(d)))){var e=dc(c);if(null===e)c=null;else{var f=e.tag;if(13===f){if(null!==(c=ec(e)))return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=rc(a,d,c,b);try{Ma(sc,a)}finally{qc(a)}return null}var jd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kd=["Webkit","ms","Moz","O"];function ld(a,b,c){return null==b||"boolean"==typeof b||""===b?"":c||"number"!=typeof b||0===b||jd.hasOwnProperty(a)&&jd[a]?(""+b).trim():b+"px"}function md(a,b){for(var c in a=a.style,b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=ld(c,b[c],d);"float"===c&&(c="cssFloat"),d?a.setProperty(c,e):a[c]=e}}Object.keys(jd).forEach((function(a){kd.forEach((function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1),jd[b]=jd[a]}))}));var nd=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(a,b){if(b){if(nd[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(u(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(u(60));if("object"!=typeof b.dangerouslySetInnerHTML||!("__html"in b.dangerouslySetInnerHTML))throw Error(u(61))}if(null!=b.style&&"object"!=typeof b.style)throw Error(u(62,""))}}function pd(a,b){if(-1===a.indexOf("-"))return"string"==typeof b.is;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=Mb_html;function rd(a,b){var c=cc(a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument);b=wa[b];for(var d=0;d<b.length;d++)uc(b[d],a,c)}function sd(){}function td(a){if(void 0===(a=a||("undefined"!=typeof document?document:void 0)))return null;try{return a.activeElement||a.body}catch(b){return a.body}}function ud(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function vd(a,b){var d,c=ud(a);for(a=0;c;){if(3===c.nodeType){if(d=a+c.textContent.length,a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=ud(c)}}function xd(){for(var a=window,b=td();b instanceof a.HTMLIFrameElement;){try{var c="string"==typeof b.contentWindow.location.href}catch(d){c=!1}if(!c)break;b=td((a=b.contentWindow).document)}return b}function yd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}var Dd=null,Ed=null;function Fd(a,b){switch(a){case"button":case"input":case"select":case"textarea":return!!b.autoFocus}return!1}function Gd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"==typeof b.children||"number"==typeof b.children||"object"==typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var Hd="function"==typeof setTimeout?setTimeout:void 0,Id="function"==typeof clearTimeout?clearTimeout:void 0;function Jd(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function Kd(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if("$"===c||"$!"===c||"$?"===c){if(0===b)return a;b--}else"/$"===c&&b++}a=a.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),Md="__reactInternalInstance$"+Ld,Nd="__reactEventHandlers$"+Ld,Od="__reactContainere$"+Ld;function tc(a){var b=a[Md];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Od]||c[Md]){if(c=b.alternate,null!==b.child||null!==c&&null!==c.child)for(a=Kd(a);null!==a;){if(c=a[Md])return c;a=Kd(a)}return b}c=(a=c).parentNode}return null}function Nc(a){return!(a=a[Md]||a[Od])||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pd(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(u(33))}function Qd(a){return a[Nd]||null}function Rd(a){do{a=a.return}while(a&&5!==a.tag);return a||null}function Sd(a,b){var c=a.stateNode;if(!c)return null;var d=la(c);if(!d)return null;c=d[b];a:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(d=!("button"===(a=a.type)||"input"===a||"select"===a||"textarea"===a)),a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!=typeof c)throw Error(u(231,b,typeof c));return c}function Td(a,b,c){(b=Sd(a,c.dispatchConfig.phasedRegistrationNames[b]))&&(c._dispatchListeners=ic(c._dispatchListeners,b),c._dispatchInstances=ic(c._dispatchInstances,a))}function Ud(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=Rd(b);for(b=c.length;0<b--;)Td(c[b],"captured",a);for(b=0;b<c.length;b++)Td(c[b],"bubbled",a)}}function Vd(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Sd(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=ic(c._dispatchListeners,b),c._dispatchInstances=ic(c._dispatchInstances,a))}function Wd(a){a&&a.dispatchConfig.registrationName&&Vd(a._targetInst,null,a)}function Xd(a){jc(a,Ud)}var Yd=null,Zd=null,$d=null;function ae(){if($d)return $d;var a,d,b=Zd,c=b.length,e="value"in Yd?Yd.value:Yd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return $d=e.slice(a,1<d?1-d:void 0)}function be(){return!0}function ce(){return!1}function G(a,b,c,d){for(var e in this.dispatchConfig=a,this._targetInst=b,this.nativeEvent=c,a=this.constructor.Interface)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);return this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?be:ce,this.isPropagationStopped=ce,this}function ee(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();return this.call(e,a,b,c,d),e}return new this(a,b,c,d)}function fe(a){if(!(a instanceof this))throw Error(u(279));a.destructor(),10>this.eventPool.length&&this.eventPool.push(a)}function de(a){a.eventPool=[],a.getPooled=ee,a.release=fe}n(G.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!=typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=be)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!=typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=be)},persist:function(){this.isPersistent=be},isPersistent:ce,destructor:function(){var b,a=this.constructor.Interface;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce,this._dispatchInstances=this._dispatchListeners=null}}),G.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},G.extend=function(a){function b(){}function c(){return d.apply(this,arguments)}var d=this;b.prototype=d.prototype;var e=new b;return n(e,c.prototype),c.prototype=e,c.prototype.constructor=c,c.Interface=n({},d.Interface,a),c.extend=d.extend,de(c),c},de(G);var ge=G.extend({data:null}),he=G.extend({data:null}),ie=[9,13,27,32],je=ya&&"CompositionEvent"in window,ke=null;ya&&"documentMode"in document&&(ke=document.documentMode);var le=ya&&"TextEvent"in window&&!ke,me=ya&&(!je||ke&&8<ke&&11>=ke),ne=String.fromCharCode(32),oe={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},pe=!1;function qe(a,b){switch(a){case"keyup":return-1!==ie.indexOf(b.keyCode);case"keydown":return 229!==b.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function re(a){return"object"==typeof(a=a.detail)&&"data"in a?a.data:null}var se=!1;var ve={eventTypes:oe,extractEvents:function(a,b,c,d){var e;if(je)b:{switch(a){case"compositionstart":var f=oe.compositionStart;break b;case"compositionend":f=oe.compositionEnd;break b;case"compositionupdate":f=oe.compositionUpdate;break b}f=void 0}else se?qe(a,c)&&(f=oe.compositionEnd):"keydown"===a&&229===c.keyCode&&(f=oe.compositionStart);return f?(me&&"ko"!==c.locale&&(se||f!==oe.compositionStart?f===oe.compositionEnd&&se&&(e=ae()):(Zd="value"in(Yd=d)?Yd.value:Yd.textContent,se=!0)),f=ge.getPooled(f,b,c,d),e?f.data=e:null!==(e=re(c))&&(f.data=e),Xd(f),e=f):e=null,(a=le?function te(a,b){switch(a){case"compositionend":return re(b);case"keypress":return 32!==b.which?null:(pe=!0,ne);case"textInput":return(a=b.data)===ne&&pe?null:a;default:return null}}(a,c):function ue(a,b){if(se)return"compositionend"===a||!je&&qe(a,b)?(a=ae(),$d=Zd=Yd=null,se=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return me&&"ko"!==b.locale?null:b.data;default:return null}}(a,c))?((b=he.getPooled(oe.beforeInput,b,c,d)).data=a,Xd(b)):b=null,null===e?b:null===b?e:[e,b]}},we={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!we[a.type]:"textarea"===b}var ye={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ze(a,b,c){return(a=G.getPooled(ye.change,a,b,c)).type="change",Da(c),Xd(a),a}var Ae=null,Be=null;function Ce(a){mc(a)}function De(a){if(yb(Pd(a)))return a}function Ee(a,b){if("change"===a)return b}var Fe=!1;function Ge(){Ae&&(Ae.detachEvent("onpropertychange",He),Be=Ae=null)}function He(a){if("value"===a.propertyName&&De(Be))if(a=ze(Be,a,nc(a)),Ja)mc(a);else{Ja=!0;try{Fa(Ce,a)}finally{Ja=!1,La()}}}function Ie(a,b,c){"focus"===a?(Ge(),Be=c,(Ae=b).attachEvent("onpropertychange",He)):"blur"===a&&Ge()}function Je(a){if("selectionchange"===a||"keyup"===a||"keydown"===a)return De(Be)}function Ke(a,b){if("click"===a)return De(b)}function Le(a,b){if("input"===a||"change"===a)return De(b)}ya&&(Fe=oc("input")&&(!document.documentMode||9<document.documentMode));var Me={eventTypes:ye,_isInputEventSupported:Fe,extractEvents:function(a,b,c,d){var e=b?Pd(b):window,f=e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Ee;else if(xe(e))if(Fe)g=Le;else{g=Je;var h=Ie}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Ke);if(g&&(g=g(a,b)))return ze(g,c,d);h&&h(a,e,b),"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Db(e,"number",e.value)}},Ne=G.extend({view:null,detail:null}),Oe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pe(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):!!(a=Oe[a])&&!!b[a]}function Qe(){return Pe}var Re=0,Se=0,Te=!1,Ue=!1,Ve=Ne.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=Re;return Re=a.screenX,Te?"mousemove"===a.type?a.screenX-b:0:(Te=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=Se;return Se=a.screenY,Ue?"mousemove"===a.type?a.screenY-b:0:(Ue=!0,0)}}),We=Ve.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ye={eventTypes:Xe,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0==(32&e)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g)?(g=b,null!==(b=(b=c.relatedTarget||c.toElement)?tc(b):null)&&(b!==dc(b)||5!==b.tag&&6!==b.tag)&&(b=null)):g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a)var k=Ve,l=Xe.mouseLeave,m=Xe.mouseEnter,p="mouse";else"pointerout"!==a&&"pointerover"!==a||(k=We,l=Xe.pointerLeave,m=Xe.pointerEnter,p="pointer");if(a=null==g?f:Pd(g),f=null==b?f:Pd(b),(l=k.getPooled(l,g,c,d)).type=p+"leave",l.target=a,l.relatedTarget=f,(c=k.getPooled(m,b,c,d)).type=p+"enter",c.target=f,c.relatedTarget=a,p=b,(d=g)&&p)a:{for(m=p,g=0,a=k=d;a;a=Rd(a))g++;for(a=0,b=m;b;b=Rd(b))a++;for(;0<g-a;)k=Rd(k),g--;for(;0<a-g;)m=Rd(m),a--;for(;g--;){if(k===m||k===m.alternate)break a;k=Rd(k),m=Rd(m)}k=null}else k=null;for(m=k,k=[];d&&d!==m&&(null===(g=d.alternate)||g!==m);)k.push(d),d=Rd(d);for(d=[];p&&p!==m&&(null===(g=p.alternate)||g!==m);)d.push(p),p=Rd(p);for(p=0;p<k.length;p++)Vd(k[p],"bubbled",l);for(p=d.length;0<p--;)Vd(d[p],"captured",c);return 0==(64&e)?[l]:[l,c]}};var $e="function"==typeof Object.is?Object.is:function Ze(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},af=Object.prototype.hasOwnProperty;function bf(a,b){if($e(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!af.call(b,c[d])||!$e(a[c[d]],b[c[d]]))return!1;return!0}var cf=ya&&"documentMode"in document&&11>=document.documentMode,df={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ef=null,ff=null,gf=null,hf=!1;function jf(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;return hf||null==ef||ef!==td(c)?null:("selectionStart"in(c=ef)&&yd(c)?c={start:c.selectionStart,end:c.selectionEnd}:c={anchorNode:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset},gf&&bf(gf,c)?null:(gf=c,(a=G.getPooled(df.select,ff,a,b)).type="select",a.target=ef,Xd(a),a))}var kf={eventTypes:df,extractEvents:function(a,b,c,d,e,f){if(!(f=!(e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument)))){a:{e=cc(e),f=wa.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;switch(e=b?Pd(b):window,a){case"focus":(xe(e)||"true"===e.contentEditable)&&(ef=e,ff=b,gf=null);break;case"blur":gf=ff=ef=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":return hf=!1,jf(c,d);case"selectionchange":if(cf)break;case"keydown":case"keyup":return jf(c,d)}return null}},lf=G.extend({animationName:null,elapsedTime:null,pseudoElement:null}),mf=G.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),nf=Ne.extend({relatedTarget:null});function of(a){var b=a.keyCode;return"charCode"in a?0===(a=a.charCode)&&13===b&&(a=13):a=b,10===a&&(a=13),32<=a||13===a?a:0}var pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rf=Ne.extend({key:function(a){if(a.key){var b=pf[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?13===(a=of(a))?"Enter":String.fromCharCode(a):"keydown"===a.type||"keyup"===a.type?qf[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe,charCode:function(a){return"keypress"===a.type?of(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===a.type?of(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),sf=Ve.extend({dataTransfer:null}),tf=Ne.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe}),uf=G.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vf=Ve.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),wf={eventTypes:Wc,extractEvents:function(a,b,c,d){var e=Yc.get(a);if(!e)return null;switch(a){case"keypress":if(0===of(c))return null;case"keydown":case"keyup":a=rf;break;case"blur":case"focus":a=nf;break;case"click":if(2===c.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=Ve;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=tf;break;case Xb:case Yb:case Zb:a=lf;break;case $b:a=uf;break;case"scroll":a=Ne;break;case"wheel":a=vf;break;case"copy":case"cut":case"paste":a=mf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=We;break;default:a=G}return Xd(b=a.getPooled(e,b,c,d)),b}};if(pa)throw Error(u(101));pa=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),ra(),la=Qd,ma=Nc,na=Pd,xa({SimpleEventPlugin:wf,EnterLeaveEventPlugin:Ye,ChangeEventPlugin:Me,SelectEventPlugin:kf,BeforeInputEventPlugin:ve});var yf=[],zf=-1;function H(a){0>zf||(a.current=yf[zf],yf[zf]=null,zf--)}function I(a,b){zf++,yf[zf]=a.current,a.current=b}var Af={},J={current:Af},K={current:!1},Bf=Af;function Cf(a,b){var c=a.type.contextTypes;if(!c)return Af;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var f,e={};for(f in c)e[f]=b[f];return d&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e),e}function L(a){return null!=(a=a.childContextTypes)}function Df(){H(K),H(J)}function Ef(a,b,c){if(J.current!==Af)throw Error(u(168));I(J,b),I(K,c)}function Ff(a,b,c){var d=a.stateNode;if(a=b.childContextTypes,"function"!=typeof d.getChildContext)return c;for(var e in d=d.getChildContext())if(!(e in a))throw Error(u(108,pb(b)||"Unknown",e));return n({},c,{},d)}function Gf(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Af,Bf=J.current,I(J,a),I(K,K.current),!0}function Hf(a,b,c){var d=a.stateNode;if(!d)throw Error(u(169));c?(a=Ff(a,b,Bf),d.__reactInternalMemoizedMergedChildContext=a,H(K),H(J),I(J,a)):H(K),I(K,c)}var If=r.unstable_runWithPriority,Jf=r.unstable_scheduleCallback,Kf=r.unstable_cancelCallback,Lf=r.unstable_requestPaint,Mf=r.unstable_now,Nf=r.unstable_getCurrentPriorityLevel,Of=r.unstable_ImmediatePriority,Pf=r.unstable_UserBlockingPriority,Qf=r.unstable_NormalPriority,Rf=r.unstable_LowPriority,Sf=r.unstable_IdlePriority,Tf={},Uf=r.unstable_shouldYield,Vf=void 0!==Lf?Lf:function(){},Wf=null,Xf=null,Yf=!1,Zf=Mf(),$f=1e4>Zf?Mf:function(){return Mf()-Zf};function ag(){switch(Nf()){case Of:return 99;case Pf:return 98;case Qf:return 97;case Rf:return 96;case Sf:return 95;default:throw Error(u(332))}}function bg(a){switch(a){case 99:return Of;case 98:return Pf;case 97:return Qf;case 96:return Rf;case 95:return Sf;default:throw Error(u(332))}}function cg(a,b){return a=bg(a),If(a,b)}function dg(a,b,c){return a=bg(a),Jf(a,b,c)}function eg(a){return null===Wf?(Wf=[a],Xf=Jf(Of,fg)):Wf.push(a),Tf}function gg(){if(null!==Xf){var a=Xf;Xf=null,Kf(a)}fg()}function fg(){if(!Yf&&null!==Wf){Yf=!0;var a=0;try{var b=Wf;cg(99,(function(){for(;a<b.length;a++){var c=b[a];do{c=c(!0)}while(null!==c)}})),Wf=null}catch(c){throw null!==Wf&&(Wf=Wf.slice(a+1)),Jf(Of,gg),c}finally{Yf=!1}}}function hg(a,b,c){return 1073741821-(1+((1073741821-a+b/10)/(c/=10)|0))*c}function ig(a,b){if(a&&a.defaultProps)for(var c in b=n({},b),a=a.defaultProps)void 0===b[c]&&(b[c]=a[c]);return b}var jg={current:null},kg=null,lg=null,mg=null;function ng(){mg=lg=kg=null}function og(a){var b=jg.current;H(jg),a.type._context._currentValue=b}function pg(a,b){for(;null!==a;){var c=a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else{if(!(null!==c&&c.childExpirationTime<b))break;c.childExpirationTime=b}a=a.return}}function qg(a,b){kg=a,mg=lg=null,null!==(a=a.dependencies)&&null!==a.firstContext&&(a.expirationTime>=b&&(rg=!0),a.firstContext=null)}function sg(a,b){if(mg!==a&&!1!==b&&0!==b)if("number"==typeof b&&1073741823!==b||(mg=a,b=1073741823),b={context:a,observedBits:b,next:null},null===lg){if(null===kg)throw Error(u(308));lg=b,kg.dependencies={expirationTime:0,firstContext:b,responders:null}}else lg=lg.next=b;return a._currentValue}var tg=!1;function ug(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function vg(a,b){a=a.updateQueue,b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function wg(a,b){return(a={expirationTime:a,suspenseConfig:b,tag:0,payload:null,callback:null,next:null}).next=a}function xg(a,b){if(null!==(a=a.updateQueue)){var c=(a=a.shared).pending;null===c?b.next=b:(b.next=c.next,c.next=b),a.pending=b}}function yg(a,b){var c=a.alternate;null!==c&&vg(c,a),null===(c=(a=a.updateQueue).baseQueue)?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function zg(a,b,c,d){var e=a.updateQueue;tg=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next,g.next=h}f=g,e.shared.pending=null,null!==(h=a.alternate)&&(null!==(h=h.updateQueue)&&(h.baseQueue=g))}if(null!==f){h=f.next;var k=e.baseState,l=0,m=null,p=null,x=null;if(null!==h)for(var z=h;;){if((g=z.expirationTime)<d){var ca={expirationTime:z.expirationTime,suspenseConfig:z.suspenseConfig,tag:z.tag,payload:z.payload,callback:z.callback,next:null};null===x?(p=x=ca,m=k):x=x.next=ca,g>l&&(l=g)}else{null!==x&&(x=x.next={expirationTime:1073741823,suspenseConfig:z.suspenseConfig,tag:z.tag,payload:z.payload,callback:z.callback,next:null}),Ag(g,z.suspenseConfig);a:{var D=a,t=z;switch(g=b,ca=c,t.tag){case 1:if("function"==typeof(D=t.payload)){k=D.call(ca,k,g);break a}k=D;break a;case 3:D.effectTag=-4097&D.effectTag|64;case 0:if(null==(g="function"==typeof(D=t.payload)?D.call(ca,k,g):D))break a;k=n({},k,g);break a;case 2:tg=!0}}null!==z.callback&&(a.effectTag|=32,null===(g=e.effects)?e.effects=[z]:g.push(z))}if(null===(z=z.next)||z===h){if(null===(g=e.shared.pending))break;z=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}}null===x?m=k:x.next=p,e.baseState=m,e.baseQueue=x,Bg(l),a.expirationTime=l,a.memoizedState=k}}function Cg(a,b,c){if(a=b.effects,b.effects=null,null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){if(d.callback=null,d=e,e=c,"function"!=typeof d)throw Error(u(191,d));d.call(e)}}}var Dg=Wa.ReactCurrentBatchConfig,Eg=(new aa.Component).refs;function Fg(a,b,c,d){c=null==(c=c(d,b=a.memoizedState))?b:n({},b,c),a.memoizedState=c,0===a.expirationTime&&(a.updateQueue.baseState=c)}var Jg={isMounted:function(a){return!!(a=a._reactInternalFiber)&&dc(a)===a},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=Gg(),e=Dg.suspense;(e=wg(d=Hg(d,a,e),e)).payload=b,null!=c&&(e.callback=c),xg(a,e),Ig(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=Gg(),e=Dg.suspense;(e=wg(d=Hg(d,a,e),e)).tag=1,e.payload=b,null!=c&&(e.callback=c),xg(a,e),Ig(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=Gg(),d=Dg.suspense;(d=wg(c=Hg(c,a,d),d)).tag=2,null!=b&&(d.callback=b),xg(a,d),Ig(a,c)}};function Kg(a,b,c,d,e,f,g){return"function"==typeof(a=a.stateNode).shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):!b.prototype||!b.prototype.isPureReactComponent||(!bf(c,d)||!bf(e,f))}function Lg(a,b,c){var d=!1,e=Af,f=b.contextType;return"object"==typeof f&&null!==f?f=sg(f):(e=L(b)?Bf:J.current,f=(d=null!=(d=b.contextTypes))?Cf(a,e):Af),b=new b(c,f),a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null,b.updater=Jg,a.stateNode=b,b._reactInternalFiber=a,d&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f),b}function Mg(a,b,c,d){a=b.state,"function"==typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d),"function"==typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d),b.state!==a&&Jg.enqueueReplaceState(b,b.state,null)}function Ng(a,b,c,d){var e=a.stateNode;e.props=c,e.state=a.memoizedState,e.refs=Eg,ug(a);var f=b.contextType;"object"==typeof f&&null!==f?e.context=sg(f):(f=L(b)?Bf:J.current,e.context=Cf(a,f)),zg(a,c,e,d),e.state=a.memoizedState,"function"==typeof(f=b.getDerivedStateFromProps)&&(Fg(a,b,f,c),e.state=a.memoizedState),"function"==typeof b.getDerivedStateFromProps||"function"==typeof e.getSnapshotBeforeUpdate||"function"!=typeof e.UNSAFE_componentWillMount&&"function"!=typeof e.componentWillMount||(b=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Jg.enqueueReplaceState(e,e.state,null),zg(a,c,e,d),e.state=a.memoizedState),"function"==typeof e.componentDidMount&&(a.effectTag|=4)}var Og=Array.isArray;function Pg(a,b,c){if(null!==(a=c.ref)&&"function"!=typeof a&&"object"!=typeof a){if(c._owner){if(c=c._owner){if(1!==c.tag)throw Error(u(309));var d=c.stateNode}if(!d)throw Error(u(147,a));var e=""+a;return null!==b&&null!==b.ref&&"function"==typeof b.ref&&b.ref._stringRef===e?b.ref:((b=function(a){var b=d.refs;b===Eg&&(b=d.refs={}),null===a?delete b[e]:b[e]=a})._stringRef=e,b)}if("string"!=typeof a)throw Error(u(284));if(!c._owner)throw Error(u(290,a))}return a}function Qg(a,b){if("textarea"!==a.type)throw Error(u(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""))}function Rg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c,c.nextEffect=null,c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){return(a=Sg(a,b)).index=0,a.sibling=null,a}function f(b,c,d){return b.index=d,a?null!==(d=b.alternate)?(d=d.index)<c?(b.effectTag=2,c):d:(b.effectTag=2,c):c}function g(b){return a&&null===b.alternate&&(b.effectTag=2),b}function h(a,b,c,d){return null===b||6!==b.tag?((b=Tg(c,a.mode,d)).return=a,b):((b=e(b,c)).return=a,b)}function k(a,b,c,d){return null!==b&&b.elementType===c.type?((d=e(b,c.props)).ref=Pg(a,b,c),d.return=a,d):((d=Ug(c.type,c.key,c.props,null,a.mode,d)).ref=Pg(a,b,c),d.return=a,d)}function l(a,b,c,d){return null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation?((b=Vg(c,a.mode,d)).return=a,b):((b=e(b,c.children||[])).return=a,b)}function m(a,b,c,d,f){return null===b||7!==b.tag?((b=Wg(c,a.mode,d,f)).return=a,b):((b=e(b,c)).return=a,b)}function p(a,b,c){if("string"==typeof b||"number"==typeof b)return(b=Tg(""+b,a.mode,c)).return=a,b;if("object"==typeof b&&null!==b){switch(b.$$typeof){case Za:return(c=Ug(b.type,b.key,b.props,null,a.mode,c)).ref=Pg(a,null,b),c.return=a,c;case $a:return(b=Vg(b,a.mode,c)).return=a,b}if(Og(b)||nb(b))return(b=Wg(b,a.mode,c,null)).return=a,b;Qg(a,b)}return null}function x(a,b,c,d){var e=null!==b?b.key:null;if("string"==typeof c||"number"==typeof c)return null!==e?null:h(a,b,""+c,d);if("object"==typeof c&&null!==c){switch(c.$$typeof){case Za:return c.key===e?c.type===ab?m(a,b,c.props.children,d,e):k(a,b,c,d):null;case $a:return c.key===e?l(a,b,c,d):null}if(Og(c)||nb(c))return null!==e?null:m(a,b,c,d,null);Qg(a,c)}return null}function z(a,b,c,d,e){if("string"==typeof d||"number"==typeof d)return h(b,a=a.get(c)||null,""+d,e);if("object"==typeof d&&null!==d){switch(d.$$typeof){case Za:return a=a.get(null===d.key?c:d.key)||null,d.type===ab?m(b,a,d.props.children,e,d.key):k(b,a,d,e);case $a:return l(b,a=a.get(null===d.key?c:d.key)||null,d,e)}if(Og(d)||nb(d))return m(b,a=a.get(c)||null,d,e,null);Qg(b,d)}return null}function ca(e,g,h,k){for(var l=null,t=null,m=g,y=g=0,A=null;null!==m&&y<h.length;y++){m.index>y?(A=m,m=null):A=m.sibling;var q=x(e,m,h[y],k);if(null===q){null===m&&(m=A);break}a&&m&&null===q.alternate&&b(e,m),g=f(q,g,y),null===t?l=q:t.sibling=q,t=q,m=A}if(y===h.length)return c(e,m),l;if(null===m){for(;y<h.length;y++)null!==(m=p(e,h[y],k))&&(g=f(m,g,y),null===t?l=m:t.sibling=m,t=m);return l}for(m=d(e,m);y<h.length;y++)null!==(A=z(m,e,y,h[y],k))&&(a&&null!==A.alternate&&m.delete(null===A.key?y:A.key),g=f(A,g,y),null===t?l=A:t.sibling=A,t=A);return a&&m.forEach((function(a){return b(e,a)})),l}function D(e,g,h,l){var k=nb(h);if("function"!=typeof k)throw Error(u(150));if(null==(h=k.call(h)))throw Error(u(151));for(var m=k=null,t=g,y=g=0,A=null,q=h.next();null!==t&&!q.done;y++,q=h.next()){t.index>y?(A=t,t=null):A=t.sibling;var D=x(e,t,q.value,l);if(null===D){null===t&&(t=A);break}a&&t&&null===D.alternate&&b(e,t),g=f(D,g,y),null===m?k=D:m.sibling=D,m=D,t=A}if(q.done)return c(e,t),k;if(null===t){for(;!q.done;y++,q=h.next())null!==(q=p(e,q.value,l))&&(g=f(q,g,y),null===m?k=q:m.sibling=q,m=q);return k}for(t=d(e,t);!q.done;y++,q=h.next())null!==(q=z(t,e,y,q.value,l))&&(a&&null!==q.alternate&&t.delete(null===q.key?y:q.key),g=f(q,g,y),null===m?k=q:m.sibling=q,m=q);return a&&t.forEach((function(a){return b(e,a)})),k}return function(a,d,f,h){var k="object"==typeof f&&null!==f&&f.type===ab&&null===f.key;k&&(f=f.props.children);var l="object"==typeof f&&null!==f;if(l)switch(f.$$typeof){case Za:a:{for(l=f.key,k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ab){c(a,k.sibling),(d=e(k,f.props.children)).return=a,a=d;break a}break;default:if(k.elementType===f.type){c(a,k.sibling),(d=e(k,f.props)).ref=Pg(a,k,f),d.return=a,a=d;break a}}c(a,k);break}b(a,k),k=k.sibling}f.type===ab?((d=Wg(f.props.children,a.mode,h,f.key)).return=a,a=d):((h=Ug(f.type,f.key,f.props,null,a.mode,h)).ref=Pg(a,d,f),h.return=a,a=h)}return g(a);case $a:a:{for(k=f.key;null!==d;){if(d.key===k){if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling),(d=e(d,f.children||[])).return=a,a=d;break a}c(a,d);break}b(a,d),d=d.sibling}(d=Vg(f,a.mode,h)).return=a,a=d}return g(a)}if("string"==typeof f||"number"==typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),(d=e(d,f)).return=a,a=d):(c(a,d),(d=Tg(f,a.mode,h)).return=a,a=d),g(a);if(Og(f))return ca(a,d,f,h);if(nb(f))return D(a,d,f,h);if(l&&Qg(a,f),void 0===f&&!k)switch(a.tag){case 1:case 0:throw a=a.type,Error(u(152,a.displayName||a.name||"Component"))}return c(a,d)}}var Xg=Rg(!0),Yg=Rg(!1),Zg={},$g={current:Zg},ah={current:Zg},bh={current:Zg};function ch(a){if(a===Zg)throw Error(u(174));return a}function dh(a,b){switch(I(bh,b),I(ah,a),I($g,Zg),a=b.nodeType){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Ob(null,"");break;default:b=Ob(b=(a=8===a?b.parentNode:b).namespaceURI||null,a=a.tagName)}H($g),I($g,b)}function eh(){H($g),H(ah),H(bh)}function fh(a){ch(bh.current);var b=ch($g.current),c=Ob(b,a.type);b!==c&&(I(ah,a),I($g,c))}function gh(a){ah.current===a&&(H($g),H(ah))}var M={current:0};function hh(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(null===(c=c.dehydrated)||"$?"===c.data||"$!"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!=(64&b.effectTag))return b}else if(null!==b.child){b.child.return=b,b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}function ih(a,b){return{responder:a,props:b}}var jh=Wa.ReactCurrentDispatcher,kh=Wa.ReactCurrentBatchConfig,lh=0,N=null,O=null,P=null,mh=!1;function Q(){throw Error(u(321))}function nh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!$e(a[c],b[c]))return!1;return!0}function oh(a,b,c,d,e,f){if(lh=f,N=b,b.memoizedState=null,b.updateQueue=null,b.expirationTime=0,jh.current=null===a||null===a.memoizedState?ph:qh,a=c(d,e),b.expirationTime===lh){f=0;do{if(b.expirationTime=0,!(25>f))throw Error(u(301));f+=1,P=O=null,b.updateQueue=null,jh.current=rh,a=c(d,e)}while(b.expirationTime===lh)}if(jh.current=sh,b=null!==O&&null!==O.next,lh=0,P=O=N=null,mh=!1,b)throw Error(u(300));return a}function th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===P?N.memoizedState=P=a:P=P.next=a,P}function uh(){if(null===O){var a=N.alternate;a=null!==a?a.memoizedState:null}else a=O.next;var b=null===P?N.memoizedState:P.next;if(null!==b)P=b,O=a;else{if(null===a)throw Error(u(310));a={memoizedState:(O=a).memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},null===P?N.memoizedState=P=a:P=P.next=a}return P}function vh(a,b){return"function"==typeof b?b(a):b}function wh(a){var b=uh(),c=b.queue;if(null===c)throw Error(u(311));c.lastRenderedReducer=a;var d=O,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next,f.next=g}d.baseQueue=e=f,c.pending=null}if(null!==e){e=e.next,d=d.baseState;var h=g=f=null,k=e;do{var l=k.expirationTime;if(l<lh){var m={expirationTime:k.expirationTime,suspenseConfig:k.suspenseConfig,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null};null===h?(g=h=m,f=d):h=h.next=m,l>N.expirationTime&&(N.expirationTime=l,Bg(l))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:k.suspenseConfig,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),Ag(l,k.suspenseConfig),d=k.eagerReducer===a?k.eagerState:a(d,k.action);k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g,$e(d,b.memoizedState)||(rg=!0),b.memoizedState=d,b.baseState=f,b.baseQueue=h,c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}function xh(a){var b=uh(),c=b.queue;if(null===c)throw Error(u(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do{f=a(f,g.action),g=g.next}while(g!==e);$e(f,b.memoizedState)||(rg=!0),b.memoizedState=f,null===b.baseQueue&&(b.baseState=f),c.lastRenderedState=f}return[f,d]}function yh(a){var b=th();return"function"==typeof a&&(a=a()),b.memoizedState=b.baseState=a,a=(a=b.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:a}).dispatch=zh.bind(null,N,a),[b.memoizedState,a]}function Ah(a,b,c,d){return a={tag:a,create:b,destroy:c,deps:d,next:null},null===(b=N.updateQueue)?(b={lastEffect:null},N.updateQueue=b,b.lastEffect=a.next=a):null===(c=b.lastEffect)?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a),a}function Bh(){return uh().memoizedState}function Ch(a,b,c,d){var e=th();N.effectTag|=a,e.memoizedState=Ah(1|b,c,void 0,void 0===d?null:d)}function Dh(a,b,c,d){var e=uh();d=void 0===d?null:d;var f=void 0;if(null!==O){var g=O.memoizedState;if(f=g.destroy,null!==d&&nh(d,g.deps))return void Ah(b,c,f,d)}N.effectTag|=a,e.memoizedState=Ah(1|b,c,f,d)}function Eh(a,b){return Ch(516,4,a,b)}function Fh(a,b){return Dh(516,4,a,b)}function Gh(a,b){return Dh(4,2,a,b)}function Hh(a,b){return"function"==typeof b?(a=a(),b(a),function(){b(null)}):null!=b?(a=a(),b.current=a,function(){b.current=null}):void 0}function Ih(a,b,c){return c=null!=c?c.concat([a]):null,Dh(4,2,Hh.bind(null,b,a),c)}function Jh(){}function Kh(a,b){return th().memoizedState=[a,void 0===b?null:b],a}function Lh(a,b){var c=uh();b=void 0===b?null:b;var d=c.memoizedState;return null!==d&&null!==b&&nh(b,d[1])?d[0]:(c.memoizedState=[a,b],a)}function Mh(a,b){var c=uh();b=void 0===b?null:b;var d=c.memoizedState;return null!==d&&null!==b&&nh(b,d[1])?d[0]:(a=a(),c.memoizedState=[a,b],a)}function Nh(a,b,c){var d=ag();cg(98>d?98:d,(function(){a(!0)})),cg(97<d?97:d,(function(){var d=kh.suspense;kh.suspense=void 0===b?null:b;try{a(!1),c()}finally{kh.suspense=d}}))}function zh(a,b,c){var d=Gg(),e=Dg.suspense;e={expirationTime:d=Hg(d,a,e),suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;if(null===f?e.next=e:(e.next=f.next,f.next=e),b.pending=e,f=a.alternate,a===N||null!==f&&f===N)mh=!0,e.expirationTime=lh,N.expirationTime=lh;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&null!==(f=b.lastRenderedReducer))try{var g=b.lastRenderedState,h=f(g,c);if(e.eagerReducer=f,e.eagerState=h,$e(h,g))return}catch(k){}Ig(a,d)}}var sh={readContext:sg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useResponder:Q,useDeferredValue:Q,useTransition:Q},ph={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function(a,b,c){return c=null!=c?c.concat([a]):null,Ch(4,2,Hh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return Ch(4,2,a,b)},useMemo:function(a,b){var c=th();return b=void 0===b?null:b,a=a(),c.memoizedState=[a,b],a},useReducer:function(a,b,c){var d=th();return b=void 0!==c?c(b):b,d.memoizedState=d.baseState=b,a=(a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b}).dispatch=zh.bind(null,N,a),[d.memoizedState,a]},useRef:function(a){return a={current:a},th().memoizedState=a},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function(a,b){var c=yh(a),d=c[0],e=c[1];return Eh((function(){var c=kh.suspense;kh.suspense=void 0===b?null:b;try{e(a)}finally{kh.suspense=c}}),[a,b]),d},useTransition:function(a){var b=yh(!1),c=b[0];return b=b[1],[Kh(Nh.bind(null,b,a),[b,a]),c]}},qh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(a,b){var c=wh(vh),d=c[0],e=c[1];return Fh((function(){var c=kh.suspense;kh.suspense=void 0===b?null:b;try{e(a)}finally{kh.suspense=c}}),[a,b]),d},useTransition:function(a){var b=wh(vh),c=b[0];return b=b[1],[Lh(Nh.bind(null,b,a),[b,a]),c]}},rh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(a,b){var c=xh(vh),d=c[0],e=c[1];return Fh((function(){var c=kh.suspense;kh.suspense=void 0===b?null:b;try{e(a)}finally{kh.suspense=c}}),[a,b]),d},useTransition:function(a){var b=xh(vh),c=b[0];return b=b[1],[Lh(Nh.bind(null,b,a),[b,a]),c]}},Oh=null,Ph=null,Qh=!1;function Rh(a,b){var c=Sh(5,null,null,0);c.elementType="DELETED",c.type="DELETED",c.stateNode=b,c.return=a,c.effectTag=8,null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function Th(a,b){switch(a.tag){case 5:var c=a.type;return null!==(b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b)&&(a.stateNode=b,!0);case 6:return null!==(b=""===a.pendingProps||3!==b.nodeType?null:b)&&(a.stateNode=b,!0);case 13:default:return!1}}function Uh(a){if(Qh){var b=Ph;if(b){var c=b;if(!Th(a,b)){if(!(b=Jd(c.nextSibling))||!Th(a,b))return a.effectTag=-1025&a.effectTag|2,Qh=!1,void(Oh=a);Rh(Oh,c)}Oh=a,Ph=Jd(b.firstChild)}else a.effectTag=-1025&a.effectTag|2,Qh=!1,Oh=a}}function Vh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;Oh=a}function Wh(a){if(a!==Oh)return!1;if(!Qh)return Vh(a),Qh=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==b&&!Gd(b,a.memoizedProps))for(b=Ph;b;)Rh(a,b),b=Jd(b.nextSibling);if(Vh(a),13===a.tag){if(!(a=null!==(a=a.memoizedState)?a.dehydrated:null))throw Error(u(317));a:{for(a=a.nextSibling,b=0;a;){if(8===a.nodeType){var c=a.data;if("/$"===c){if(0===b){Ph=Jd(a.nextSibling);break a}b--}else"$"!==c&&"$!"!==c&&"$?"!==c||b++}a=a.nextSibling}Ph=null}}else Ph=Oh?Jd(a.stateNode.nextSibling):null;return!0}function Xh(){Ph=Oh=null,Qh=!1}var Yh=Wa.ReactCurrentOwner,rg=!1;function R(a,b,c,d){b.child=null===a?Yg(b,null,c,d):Xg(b,a.child,c,d)}function Zh(a,b,c,d,e){c=c.render;var f=b.ref;return qg(b,e),d=oh(a,b,c,d,f,e),null===a||rg?(b.effectTag|=1,R(a,b,d,e),b.child):(b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),$h(a,b,e))}function ai(a,b,c,d,e,f){if(null===a){var g=c.type;return"function"!=typeof g||bi(g)||void 0!==g.defaultProps||null!==c.compare||void 0!==c.defaultProps?((a=Ug(c.type,null,d,null,b.mode,f)).ref=b.ref,a.return=b,b.child=a):(b.tag=15,b.type=g,ci(a,b,g,d,e,f))}return g=a.child,e<f&&(e=g.memoizedProps,(c=null!==(c=c.compare)?c:bf)(e,d)&&a.ref===b.ref)?$h(a,b,f):(b.effectTag|=1,(a=Sg(g,d)).ref=b.ref,a.return=b,b.child=a)}function ci(a,b,c,d,e,f){return null!==a&&bf(a.memoizedProps,d)&&a.ref===b.ref&&(rg=!1,e<f)?(b.expirationTime=a.expirationTime,$h(a,b,f)):di(a,b,c,d,f)}function ei(a,b){var c=b.ref;(null===a&&null!==c||null!==a&&a.ref!==c)&&(b.effectTag|=128)}function di(a,b,c,d,e){var f=L(c)?Bf:J.current;return f=Cf(b,f),qg(b,e),c=oh(a,b,c,d,f,e),null===a||rg?(b.effectTag|=1,R(a,b,c,e),b.child):(b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),$h(a,b,e))}function fi(a,b,c,d,e){if(L(c)){var f=!0;Gf(b)}else f=!1;if(qg(b,e),null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Lg(b,c,d),Ng(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;"object"==typeof l&&null!==l?l=sg(l):l=Cf(b,l=L(c)?Bf:J.current);var m=c.getDerivedStateFromProps,p="function"==typeof m||"function"==typeof g.getSnapshotBeforeUpdate;p||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Mg(b,g,d,l),tg=!1;var x=b.memoizedState;g.state=x,zg(b,d,g,e),k=b.memoizedState,h!==d||x!==k||K.current||tg?("function"==typeof m&&(Fg(b,c,m,d),k=b.memoizedState),(h=tg||Kg(b,c,h,d,x,k,l))?(p||"function"!=typeof g.UNSAFE_componentWillMount&&"function"!=typeof g.componentWillMount||("function"==typeof g.componentWillMount&&g.componentWillMount(),"function"==typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"==typeof g.componentDidMount&&(b.effectTag|=4)):("function"==typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):("function"==typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,vg(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:ig(b.type,h),k=g.context,"object"==typeof(l=c.contextType)&&null!==l?l=sg(l):l=Cf(b,l=L(c)?Bf:J.current),(p="function"==typeof(m=c.getDerivedStateFromProps)||"function"==typeof g.getSnapshotBeforeUpdate)||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Mg(b,g,d,l),tg=!1,k=b.memoizedState,g.state=k,zg(b,d,g,e),x=b.memoizedState,h!==d||k!==x||K.current||tg?("function"==typeof m&&(Fg(b,c,m,d),x=b.memoizedState),(m=tg||Kg(b,c,h,d,k,x,l))?(p||"function"!=typeof g.UNSAFE_componentWillUpdate&&"function"!=typeof g.componentWillUpdate||("function"==typeof g.componentWillUpdate&&g.componentWillUpdate(d,x,l),"function"==typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,l)),"function"==typeof g.componentDidUpdate&&(b.effectTag|=4),"function"==typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=l,d=m):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),d=!1);return gi(a,b,c,d,f,e)}function gi(a,b,c,d,e,f){ei(a,b);var g=0!=(64&b.effectTag);if(!d&&!g)return e&&Hf(b,c,!1),$h(a,b,f);d=b.stateNode,Yh.current=b;var h=g&&"function"!=typeof c.getDerivedStateFromError?null:d.render();return b.effectTag|=1,null!==a&&g?(b.child=Xg(b,a.child,null,f),b.child=Xg(b,null,h,f)):R(a,b,h,f),b.memoizedState=d.state,e&&Hf(b,c,!0),b.child}function hi(a){var b=a.stateNode;b.pendingContext?Ef(0,b.pendingContext,b.pendingContext!==b.context):b.context&&Ef(0,b.context,!1),dh(a,b.containerInfo)}var ni,pi,qi,ii={dehydrated:null,retryTime:0};function ji(a,b,c){var h,d=b.mode,e=b.pendingProps,f=M.current,g=!1;if((h=0!=(64&b.effectTag))||(h=0!=(2&f)&&(null===a||null!==a.memoizedState)),h?(g=!0,b.effectTag&=-65):null!==a&&null===a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1),I(M,1&f),null===a){if(void 0!==e.fallback&&Uh(b),g){if(g=e.fallback,(e=Wg(null,d,0,null)).return=b,0==(2&b.mode))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;return(c=Wg(g,d,c,null)).return=b,e.sibling=c,b.memoizedState=ii,b.child=e,c}return d=e.children,b.memoizedState=null,b.child=Yg(b,null,d,c)}if(null!==a.memoizedState){if(d=(a=a.child).sibling,g){if(e=e.fallback,(c=Sg(a,a.pendingProps)).return=b,0==(2&b.mode)&&(g=null!==b.memoizedState?b.child.child:b.child)!==a.child)for(c.child=g;null!==g;)g.return=c,g=g.sibling;return(d=Sg(d,e)).return=b,c.sibling=d,c.childExpirationTime=0,b.memoizedState=ii,b.child=c,d}return c=Xg(b,a.child,e.children,c),b.memoizedState=null,b.child=c}if(a=a.child,g){if(g=e.fallback,(e=Wg(null,d,0,null)).return=b,e.child=a,null!==a&&(a.return=e),0==(2&b.mode))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;return(c=Wg(g,d,c,null)).return=b,e.sibling=c,c.effectTag|=2,e.childExpirationTime=0,b.memoizedState=ii,b.child=e,c}return b.memoizedState=null,b.child=Xg(b,a,e.children,c)}function ki(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b),pg(a.return,b)}function li(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function mi(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;if(R(a,b,d.children,c),0!=(2&(d=M.current)))d=1&d|2,b.effectTag|=64;else{if(null!==a&&0!=(64&a.effectTag))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&ki(a,c);else if(19===a.tag)ki(a,c);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}if(I(M,d),0==(2&b.mode))b.memoizedState=null;else switch(e){case"forwards":for(c=b.child,e=null;null!==c;)null!==(a=c.alternate)&&null===hh(a)&&(e=c),c=c.sibling;null===(c=e)?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null),li(b,!1,e,c,f,b.lastEffect);break;case"backwards":for(c=null,e=b.child,b.child=null;null!==e;){if(null!==(a=e.alternate)&&null===hh(a)){b.child=e;break}a=e.sibling,e.sibling=c,c=e,e=a}li(b,!0,c,null,f,b.lastEffect);break;case"together":li(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function $h(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;if(0!==d&&Bg(d),b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(u(153));if(null!==b.child){for(c=Sg(a=b.child,a.pendingProps),b.child=c,c.return=b;null!==a.sibling;)a=a.sibling,(c=c.sibling=Sg(a,a.pendingProps)).return=b;c.sibling=null}return b.child}function ri(a,b){switch(a.tailMode){case"hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function si(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L(b.type)&&Df(),null;case 3:return eh(),H(K),H(J),(c=b.stateNode).pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Wh(b)||(b.effectTag|=4),null;case 5:gh(b),c=ch(bh.current);var e=b.type;if(null!==a&&null!=b.stateNode)pi(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(u(166));return null}if(a=ch($g.current),Wh(b)){d=b.stateNode,e=b.type;var f=b.memoizedProps;switch(d[Md]=b,d[Nd]=f,e){case"iframe":case"object":case"embed":F("load",d);break;case"video":case"audio":for(a=0;a<ac.length;a++)F(ac[a],d);break;case"source":F("error",d);break;case"img":case"image":case"link":F("error",d),F("load",d);break;case"form":F("reset",d),F("submit",d);break;case"details":F("toggle",d);break;case"input":Ab(d,f),F("invalid",d),rd(c,"onChange");break;case"select":d._wrapperState={wasMultiple:!!f.multiple},F("invalid",d),rd(c,"onChange");break;case"textarea":Jb(d,f),F("invalid",d),rd(c,"onChange")}for(var g in od(e,f),a=null,f)if(f.hasOwnProperty(g)){var h=f[g];"children"===g?"string"==typeof h?d.textContent!==h&&(a=["children",h]):"number"==typeof h&&d.textContent!==""+h&&(a=["children",""+h]):va.hasOwnProperty(g)&&null!=h&&rd(c,g)}switch(e){case"input":xb(d),Eb(d,f,!0);break;case"textarea":xb(d),Lb(d);break;case"select":case"option":break;default:"function"==typeof f.onClick&&(d.onclick=sd)}c=a,b.updateQueue=c,null!==c&&(b.effectTag|=4)}else{switch(g=9===c.nodeType?c:c.ownerDocument,a===qd&&(a=Nb(e)),a===qd?"script"===e?((a=g.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):"string"==typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e),a[Md]=b,a[Nd]=d,ni(a,b),b.stateNode=a,g=pd(e,d),e){case"iframe":case"object":case"embed":F("load",a),h=d;break;case"video":case"audio":for(h=0;h<ac.length;h++)F(ac[h],a);h=d;break;case"source":F("error",a),h=d;break;case"img":case"image":case"link":F("error",a),F("load",a),h=d;break;case"form":F("reset",a),F("submit",a),h=d;break;case"details":F("toggle",a),h=d;break;case"input":Ab(a,d),h=zb(a,d),F("invalid",a),rd(c,"onChange");break;case"option":h=Gb(a,d);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},h=n({},d,{value:void 0}),F("invalid",a),rd(c,"onChange");break;case"textarea":Jb(a,d),h=Ib(a,d),F("invalid",a),rd(c,"onChange");break;default:h=d}od(e,h);var k=h;for(f in k)if(k.hasOwnProperty(f)){var l=k[f];"style"===f?md(a,l):"dangerouslySetInnerHTML"===f?null!=(l=l?l.__html:void 0)&&Qb(a,l):"children"===f?"string"==typeof l?("textarea"!==e||""!==l)&&Rb(a,l):"number"==typeof l&&Rb(a,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(va.hasOwnProperty(f)?null!=l&&rd(c,f):null!=l&&Xa(a,f,l,g))}switch(e){case"input":xb(a),Eb(a,d,!1);break;case"textarea":xb(a),Lb(a);break;case"option":null!=d.value&&a.setAttribute("value",""+rb(d.value));break;case"select":a.multiple=!!d.multiple,null!=(c=d.value)?Hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&Hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"==typeof h.onClick&&(a.onclick=sd)}Fd(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)qi(0,b,a.memoizedProps,d);else{if("string"!=typeof d&&null===b.stateNode)throw Error(u(166));c=ch(bh.current),ch($g.current),Wh(b)?(c=b.stateNode,d=b.memoizedProps,c[Md]=b,c.nodeValue!==d&&(b.effectTag|=4)):((c=(9===c.nodeType?c:c.ownerDocument).createTextNode(d))[Md]=b,b.stateNode=c)}return null;case 13:return H(M),d=b.memoizedState,0!=(64&b.effectTag)?(b.expirationTime=c,b):(c=null!==d,d=!1,null===a?void 0!==b.memoizedProps.fallback&&Wh(b):(d=null!==(e=a.memoizedState),c||null===e||null!==(e=a.child.sibling)&&(null!==(f=b.firstEffect)?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)),c&&!d&&0!=(2&b.mode)&&(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!=(1&M.current)?S===ti&&(S=ui):(S!==ti&&S!==ui||(S=vi),0!==wi&&null!==T&&(xi(T,U),yi(T,wi)))),(c||d)&&(b.effectTag|=4),null);case 4:return eh(),null;case 10:return og(b),null;case 17:return L(b.type)&&Df(),null;case 19:if(H(M),null===(d=b.memoizedState))return null;if(e=0!=(64&b.effectTag),null===(f=d.rendering)){if(e)ri(d,!1);else if(S!==ti||null!==a&&0!=(64&a.effectTag))for(f=b.child;null!==f;){if(null!==(a=hh(f))){for(b.effectTag|=64,ri(d,!1),null!==(e=a.updateQueue)&&(b.updateQueue=e,b.effectTag|=4),null===d.lastEffect&&(b.firstEffect=null),b.lastEffect=d.lastEffect,d=b.child;null!==d;)f=c,(e=d).effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,null===(a=e.alternate)?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;return I(M,1&M.current|2),b.child}f=f.sibling}}else{if(!e)if(null!==(a=hh(f))){if(b.effectTag|=64,e=!0,null!==(c=a.updateQueue)&&(b.updateQueue=c,b.effectTag|=4),ri(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return null!==(b=b.lastEffect=d.lastEffect)&&(b.nextEffect=null),null}else 2*$f()-d.renderingStartTime>d.tailExpiration&&1<c&&(b.effectTag|=64,e=!0,ri(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(null!==(c=d.last)?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=$f()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=$f(),c.sibling=null,b=M.current,I(M,e?1&b|2:1&b),c):null}throw Error(u(156,b.tag))}function zi(a){switch(a.tag){case 1:L(a.type)&&Df();var b=a.effectTag;return 4096&b?(a.effectTag=-4097&b|64,a):null;case 3:if(eh(),H(K),H(J),0!=(64&(b=a.effectTag)))throw Error(u(285));return a.effectTag=-4097&b|64,a;case 5:return gh(a),null;case 13:return H(M),4096&(b=a.effectTag)?(a.effectTag=-4097&b|64,a):null;case 19:return H(M),null;case 4:return eh(),null;case 10:return og(a),null;default:return null}}function Ai(a,b){return{value:a,source:b,stack:qb(b)}}ni=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},pi=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var h,k,g=b.stateNode;switch(ch($g.current),a=null,c){case"input":f=zb(g,f),d=zb(g,d),a=[];break;case"option":f=Gb(g,f),d=Gb(g,d),a=[];break;case"select":f=n({},f,{value:void 0}),d=n({},d,{value:void 0}),a=[];break;case"textarea":f=Ib(g,f),d=Ib(g,d),a=[];break;default:"function"!=typeof f.onClick&&"function"==typeof d.onClick&&(g.onclick=sd)}for(h in od(c,d),c=null,f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(k in g=f[h])g.hasOwnProperty(k)&&(c||(c={}),c[k]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(va.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var l=d[h];if(g=null!=f?f[h]:void 0,d.hasOwnProperty(h)&&l!==g&&(null!=l||null!=g))if("style"===h)if(g){for(k in g)!g.hasOwnProperty(k)||l&&l.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in l)l.hasOwnProperty(k)&&g[k]!==l[k]&&(c||(c={}),c[k]=l[k])}else c||(a||(a=[]),a.push(h,c)),c=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,g=g?g.__html:void 0,null!=l&&g!==l&&(a=a||[]).push(h,l)):"children"===h?g===l||"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(va.hasOwnProperty(h)?(null!=l&&rd(e,h),a||g===l||(a=[])):(a=a||[]).push(h,l))}c&&(a=a||[]).push("style",c),e=a,(b.updateQueue=e)&&(b.effectTag|=4)}},qi=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var Bi="function"==typeof WeakSet?WeakSet:Set;function Ci(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=qb(c)),null!==c&&pb(c.type),b=b.value,null!==a&&1===a.tag&&pb(a.type);try{console.error(b)}catch(e){setTimeout((function(){throw e}))}}function Fi(a){var b=a.ref;if(null!==b)if("function"==typeof b)try{b(null)}catch(c){Ei(a,c)}else b.current=null}function Gi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&b.effectTag&&null!==a){var c=a.memoizedProps,d=a.memoizedState;b=(a=b.stateNode).getSnapshotBeforeUpdate(b.elementType===b.type?c:ig(b.type,c),d),a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u(163))}function Hi(a,b){if(null!==(b=null!==(b=b.updateQueue)?b.lastEffect:null)){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0,void 0!==d&&d()}c=c.next}while(c!==b)}}function Ii(a,b){if(null!==(b=null!==(b=b.updateQueue)?b.lastEffect:null)){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function Ji(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:return void Ii(3,c);case 1:if(a=c.stateNode,4&c.effectTag)if(null===b)a.componentDidMount();else{var d=c.elementType===c.type?b.memoizedProps:ig(c.type,b.memoizedProps);a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}return void(null!==(b=c.updateQueue)&&Cg(c,b,a));case 3:if(null!==(b=c.updateQueue)){if(a=null,null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Cg(c,b,a)}return;case 5:return a=c.stateNode,void(null===b&&4&c.effectTag&&Fd(c.type,c.memoizedProps)&&a.focus());case 6:case 4:case 12:return;case 13:return void(null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Vc(c)))));case 19:case 17:case 20:case 21:return}throw Error(u(163))}function Ki(a,b,c){switch("function"==typeof Li&&Li(b),b.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(a=b.updateQueue)&&null!==(a=a.lastEffect)){var d=a.next;cg(97<c?97:c,(function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Ei(g,h)}}a=a.next}while(a!==d)}))}break;case 1:Fi(b),"function"==typeof(c=b.stateNode).componentWillUnmount&&function Di(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Ei(a,c)}}(b,c);break;case 5:Fi(b);break;case 4:Mi(a,b,c)}}function Ni(a){var b=a.alternate;a.return=null,a.child=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.alternate=null,a.firstEffect=null,a.lastEffect=null,a.pendingProps=null,a.memoizedProps=null,a.stateNode=null,null!==b&&Ni(b)}function Oi(a){return 5===a.tag||3===a.tag||4===a.tag}function Pi(a){a:{for(var b=a.return;null!==b;){if(Oi(b)){var c=b;break a}b=b.return}throw Error(u(160))}switch(b=c.stateNode,c.tag){case 5:var d=!1;break;case 3:case 4:b=b.containerInfo,d=!0;break;default:throw Error(u(161))}16&c.effectTag&&(Rb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Oi(c.return)){c=null;break a}c=c.return}for(c.sibling.return=c.return,c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(2&c.effectTag)continue b;if(null===c.child||4===c.tag)continue b;c.child.return=c,c=c.child}if(!(2&c.effectTag)){c=c.stateNode;break a}}d?function Qi(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode).insertBefore(a,c):(b=c).appendChild(a),null!==(c=c._reactRootContainer)&&void 0!==c||null!==b.onclick||(b.onclick=sd));else if(4!==d&&null!==(a=a.child))for(Qi(a,b,c),a=a.sibling;null!==a;)Qi(a,b,c),a=a.sibling}(a,c,b):function Ri(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&null!==(a=a.child))for(Ri(a,b,c),a=a.sibling;null!==a;)Ri(a,b,c),a=a.sibling}(a,c,b)}function Mi(a,b,c){for(var f,g,d=b,e=!1;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(u(160));switch(f=e.stateNode,e.tag){case 5:g=!1;break a;case 3:case 4:f=f.containerInfo,g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=a,k=d,l=c,m=k;;)if(Ki(h,m,l),null!==m.child&&4!==m.tag)m.child.return=m,m=m.child;else{if(m===k)break a;for(;null===m.sibling;){if(null===m.return||m.return===k)break a;m=m.return}m.sibling.return=m.return,m=m.sibling}g?(h=f,k=d.stateNode,8===h.nodeType?h.parentNode.removeChild(k):h.removeChild(k)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo,g=!0,d.child.return=d,d=d.child;continue}}else if(Ki(a,d,c),null!==d.child){d.child.return=d,d=d.child;continue}if(d===b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;4===(d=d.return).tag&&(e=!1)}d.sibling.return=d.return,d=d.sibling}}function Si(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:return void Hi(3,b);case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;if(b.updateQueue=null,null!==f){for(c[Nd]=d,"input"===a&&"radio"===d.type&&null!=d.name&&Bb(c,d),pd(a,e),b=pd(a,d),e=0;e<f.length;e+=2){var g=f[e],h=f[e+1];"style"===g?md(c,h):"dangerouslySetInnerHTML"===g?Qb(c,h):"children"===g?Rb(c,h):Xa(c,g,h,b)}switch(a){case"input":Cb(c,d);break;case"textarea":Kb(c,d);break;case"select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,null!=(a=d.value)?Hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?Hb(c,!!d.multiple,d.defaultValue,!0):Hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(u(162));return void(b.stateNode.nodeValue=b.memoizedProps);case 3:return void((b=b.stateNode).hydrate&&(b.hydrate=!1,Vc(b.containerInfo)));case 12:return;case 13:if(c=b,null===b.memoizedState?d=!1:(d=!0,c=b.child,Ti=$f()),null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?"function"==typeof(f=f.style).setProperty?f.setProperty("display","none","important"):f.display="none":(f=a.stateNode,e=null!=(e=a.memoizedProps.style)&&e.hasOwnProperty("display")?e.display:null,f.style.display=ld("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?"":a.memoizedProps;else{if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){(f=a.child.sibling).return=a,a=f;continue}if(null!==a.child){a.child.return=a,a=a.child;continue}}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return,a=a.sibling}return void Ui(b);case 19:return void Ui(b);case 17:return}throw Error(u(163))}function Ui(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Bi),b.forEach((function(b){var d=Vi.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))}))}}var Wi="function"==typeof WeakMap?WeakMap:Map;function Xi(a,b,c){(c=wg(c,null)).tag=3,c.payload={element:null};var d=b.value;return c.callback=function(){Yi||(Yi=!0,Zi=d),Ci(a,b)},c}function $i(a,b,c){(c=wg(c,null)).tag=3;var d=a.type.getDerivedStateFromError;if("function"==typeof d){var e=b.value;c.payload=function(){return Ci(a,b),d(e)}}var f=a.stateNode;return null!==f&&"function"==typeof f.componentDidCatch&&(c.callback=function(){"function"!=typeof d&&(null===aj?aj=new Set([this]):aj.add(this),Ci(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})}),c}var Rj,bj=Math.ceil,cj=Wa.ReactCurrentDispatcher,dj=Wa.ReactCurrentOwner,ti=0,ui=3,vi=4,W=0,T=null,X=null,U=0,S=ti,kj=null,lj=1073741823,mj=1073741823,nj=null,wi=0,oj=!1,Ti=0,Y=null,Yi=!1,Zi=null,aj=null,qj=!1,rj=null,sj=90,tj=null,uj=0,vj=null,wj=0;function Gg(){return 0!=(48&W)?1073741821-($f()/10|0):0!==wj?wj:wj=1073741821-($f()/10|0)}function Hg(a,b,c){if(0==(2&(b=b.mode)))return 1073741823;var d=ag();if(0==(4&b))return 99===d?1073741823:1073741822;if(0!=(16&W))return U;if(null!==c)a=hg(a,0|c.timeoutMs||5e3,250);else switch(d){case 99:a=1073741823;break;case 98:a=hg(a,150,100);break;case 97:case 96:a=hg(a,5e3,250);break;case 95:a=2;break;default:throw Error(u(326))}return null!==T&&a===U&&--a,a}function Ig(a,b){if(50<uj)throw uj=0,vj=null,Error(u(185));if(null!==(a=xj(a,b))){var c=ag();1073741823===b?0!=(8&W)&&0==(48&W)?yj(a):(Z(a),0===W&&gg()):Z(a),0==(4&W)||98!==c&&99!==c||(null===tj?tj=new Map([[a,b]]):(void 0===(c=tj.get(a))||c>b)&&tj.set(a,b))}}function xj(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){if(c=d.alternate,d.childExpirationTime<b&&(d.childExpirationTime=b),null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b),null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}return null!==e&&(T===e&&(Bg(b),S===vi&&xi(e,U)),yi(e,b)),e}function zj(a){var b=a.lastExpiredTime;if(0!==b)return b;if(!Aj(a,b=a.firstPendingTime))return b;var c=a.lastPingedTime;return 2>=(a=c>(a=a.nextKnownPendingLevel)?c:a)&&b!==a?0:a}function Z(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=eg(yj.bind(null,a));else{var b=zj(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=Gg();if(1073741823===b?d=99:1===b||2===b?d=95:d=0>=(d=10*(1073741821-b)-10*(1073741821-d))?99:250>=d?98:5250>=d?97:95,null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Tf&&Kf(c)}a.callbackExpirationTime=b,a.callbackPriority=d,b=1073741823===b?eg(yj.bind(null,a)):dg(d,Bj.bind(null,a),{timeout:10*(1073741821-b)-$f()}),a.callbackNode=b}}}function Bj(a,b){if(wj=0,b)return Cj(a,b=Gg()),Z(a),null;var c=zj(a);if(0!==c){if(b=a.callbackNode,0!=(48&W))throw Error(u(327));if(Dj(),a===T&&c===U||Ej(a,c),null!==X){var d=W;W|=16;for(var e=Fj();;)try{Gj();break}catch(h){Hj(a,h)}if(ng(),W=d,cj.current=e,1===S)throw b=kj,Ej(a,c),xi(a,c),Z(a),b;if(null===X)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=S,T=null,d){case ti:case 1:throw Error(u(345));case 2:Cj(a,2<c?2:c);break;case ui:if(xi(a,c),c===(d=a.lastSuspendedTime)&&(a.nextKnownPendingLevel=Ij(e)),1073741823===lj&&10<(e=Ti+500-$f())){if(oj){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=c,Ej(a,c);break}}if(0!==(f=zj(a))&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=Hd(Jj.bind(null,a),e);break}Jj(a);break;case vi:if(xi(a,c),c===(d=a.lastSuspendedTime)&&(a.nextKnownPendingLevel=Ij(e)),oj&&(0===(e=a.lastPingedTime)||e>=c)){a.lastPingedTime=c,Ej(a,c);break}if(0!==(e=zj(a))&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}if(1073741823!==mj?d=10*(1073741821-mj)-$f():1073741823===lj?d=0:(d=10*(1073741821-lj)-5e3,0>(d=(e=$f())-d)&&(d=0),(c=10*(1073741821-c)-e)<(d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*bj(d/1960))-d)&&(d=c)),10<d){a.timeoutHandle=Hd(Jj.bind(null,a),d);break}Jj(a);break;case 5:if(1073741823!==lj&&null!==nj){f=lj;var g=nj;if(0>=(d=0|g.busyMinDurationMs)?d=0:(e=0|g.busyDelayMs,d=(f=$f()-(10*(1073741821-f)-(0|g.timeoutMs||5e3)))<=e?0:e+d-f),10<d){xi(a,c),a.timeoutHandle=Hd(Jj.bind(null,a),d);break}}Jj(a);break;default:throw Error(u(329))}if(Z(a),a.callbackNode===b)return Bj.bind(null,a)}}return null}function yj(a){var b=a.lastExpiredTime;if(b=0!==b?b:1073741823,0!=(48&W))throw Error(u(327));if(Dj(),a===T&&b===U||Ej(a,b),null!==X){var c=W;W|=16;for(var d=Fj();;)try{Kj();break}catch(e){Hj(a,e)}if(ng(),W=c,cj.current=d,1===S)throw c=kj,Ej(a,b),xi(a,b),Z(a),c;if(null!==X)throw Error(u(261));a.finishedWork=a.current.alternate,a.finishedExpirationTime=b,T=null,Jj(a),Z(a)}return null}function Mj(a,b){var c=W;W|=1;try{return a(b)}finally{0===(W=c)&&gg()}}function Nj(a,b){var c=W;W&=-2,W|=8;try{return a(b)}finally{0===(W=c)&&gg()}}function Ej(a,b){a.finishedWork=null,a.finishedExpirationTime=0;var c=a.timeoutHandle;if(-1!==c&&(a.timeoutHandle=-1,Id(c)),null!==X)for(c=X.return;null!==c;){var d=c;switch(d.tag){case 1:null!=(d=d.type.childContextTypes)&&Df();break;case 3:eh(),H(K),H(J);break;case 5:gh(d);break;case 4:eh();break;case 13:case 19:H(M);break;case 10:og(d)}c=c.return}T=a,X=Sg(a.current,null),U=b,S=ti,kj=null,mj=lj=1073741823,nj=null,wi=0,oj=!1}function Hj(a,b){for(;;){try{if(ng(),jh.current=sh,mh)for(var c=N.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null),c=c.next}if(lh=0,P=O=N=null,mh=!1,null===X||null===X.return)return S=1,kj=b,X=null;a:{var e=a,f=X.return,g=X,h=b;if(b=U,g.effectTag|=2048,g.firstEffect=g.lastEffect=null,null!==h&&"object"==typeof h&&"function"==typeof h.then){var k=h;if(0==(2&g.mode)){var l=g.alternate;l?(g.updateQueue=l.updateQueue,g.memoizedState=l.memoizedState,g.expirationTime=l.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var m=0!=(1&M.current),p=f;do{var x;if(x=13===p.tag){var z=p.memoizedState;if(null!==z)x=null!==z.dehydrated;else{var ca=p.memoizedProps;x=void 0!==ca.fallback&&(!0!==ca.unstable_avoidThisFallback||!m)}}if(x){var D=p.updateQueue;if(null===D){var t=new Set;t.add(k),p.updateQueue=t}else D.add(k);if(0==(2&p.mode)){if(p.effectTag|=64,g.effectTag&=-2981,1===g.tag)if(null===g.alternate)g.tag=17;else{var y=wg(1073741823,null);y.tag=2,xg(g,y)}g.expirationTime=1073741823;break a}h=void 0,g=b;var A=e.pingCache;if(null===A?(A=e.pingCache=new Wi,h=new Set,A.set(k,h)):void 0===(h=A.get(k))&&(h=new Set,A.set(k,h)),!h.has(g)){h.add(g);var q=Oj.bind(null,e,k,g);k.then(q,q)}p.effectTag|=4096,p.expirationTime=b;break a}p=p.return}while(null!==p);h=Error((pb(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+qb(g))}5!==S&&(S=2),h=Ai(h,g),p=f;do{switch(p.tag){case 3:k=h,p.effectTag|=4096,p.expirationTime=b,yg(p,Xi(p,k,b));break a;case 1:k=h;var w=p.type,ub=p.stateNode;if(0==(64&p.effectTag)&&("function"==typeof w.getDerivedStateFromError||null!==ub&&"function"==typeof ub.componentDidCatch&&(null===aj||!aj.has(ub)))){p.effectTag|=4096,p.expirationTime=b,yg(p,$i(p,k,b));break a}}p=p.return}while(null!==p)}X=Pj(X)}catch(Xc){b=Xc;continue}break}}function Fj(){var a=cj.current;return cj.current=sh,null===a?sh:a}function Ag(a,b){a<lj&&2<a&&(lj=a),null!==b&&a<mj&&2<a&&(mj=a,nj=b)}function Bg(a){a>wi&&(wi=a)}function Kj(){for(;null!==X;)X=Qj(X)}function Gj(){for(;null!==X&&!Uf();)X=Qj(X)}function Qj(a){var b=Rj(a.alternate,a,U);return a.memoizedProps=a.pendingProps,null===b&&(b=Pj(a)),dj.current=null,b}function Pj(a){X=a;do{var b=X.alternate;if(a=X.return,0==(2048&X.effectTag)){if(b=si(b,X,U),1===U||1!==X.childExpirationTime){for(var c=0,d=X.child;null!==d;){var e=d.expirationTime,f=d.childExpirationTime;e>c&&(c=e),f>c&&(c=f),d=d.sibling}X.childExpirationTime=c}if(null!==b)return b;null!==a&&0==(2048&a.effectTag)&&(null===a.firstEffect&&(a.firstEffect=X.firstEffect),null!==X.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=X.firstEffect),a.lastEffect=X.lastEffect),1<X.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=X:a.firstEffect=X,a.lastEffect=X))}else{if(null!==(b=zi(X)))return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=2048)}if(null!==(b=X.sibling))return b;X=a}while(null!==X);return S===ti&&(S=5),null}function Ij(a){var b=a.expirationTime;return b>(a=a.childExpirationTime)?b:a}function Jj(a){var b=ag();return cg(99,Sj.bind(null,a,b)),null}function Sj(a,b){do{Dj()}while(null!==rj);if(0!=(48&W))throw Error(u(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;if(a.finishedWork=null,a.finishedExpirationTime=0,c===a.current)throw Error(u(177));a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90,a.nextKnownPendingLevel=0;var e=Ij(c);if(a.firstPendingTime=e,d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1),d<=a.lastPingedTime&&(a.lastPingedTime=0),d<=a.lastExpiredTime&&(a.lastExpiredTime=0),a===T&&(X=T=null,U=0),1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect,null!==e){var f=W;W|=32,dj.current=null,Dd=fd;var g=xd();if(yd(g)){if("selectionStart"in g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{var k=(h=(h=g.ownerDocument)&&h.defaultView||window).getSelection&&h.getSelection();if(k&&0!==k.rangeCount){h=k.anchorNode;var l=k.anchorOffset,m=k.focusNode;k=k.focusOffset;try{h.nodeType,m.nodeType}catch(wb){h=null;break a}var p=0,x=-1,z=-1,ca=0,D=0,t=g,y=null;b:for(;;){for(var A;t!==h||0!==l&&3!==t.nodeType||(x=p+l),t!==m||0!==k&&3!==t.nodeType||(z=p+k),3===t.nodeType&&(p+=t.nodeValue.length),null!==(A=t.firstChild);)y=t,t=A;for(;;){if(t===g)break b;if(y===h&&++ca===l&&(x=p),y===m&&++D===k&&(z=p),null!==(A=t.nextSibling))break;y=(t=y).parentNode}t=A}h=-1===x||-1===z?null:{start:x,end:z}}else h=null}h=h||{start:0,end:0}}else h=null;Ed={activeElementDetached:null,focusedElem:g,selectionRange:h},fd=!1,Y=e;do{try{Tj()}catch(wb){if(null===Y)throw Error(u(330));Ei(Y,wb),Y=Y.nextEffect}}while(null!==Y);Y=e;do{try{for(g=a,h=b;null!==Y;){var q=Y.effectTag;if(16&q&&Rb(Y.stateNode,""),128&q){var B=Y.alternate;if(null!==B){var w=B.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&q){case 2:Pi(Y),Y.effectTag&=-3;break;case 6:Pi(Y),Y.effectTag&=-3,Si(Y.alternate,Y);break;case 1024:Y.effectTag&=-1025;break;case 1028:Y.effectTag&=-1025,Si(Y.alternate,Y);break;case 4:Si(Y.alternate,Y);break;case 8:Mi(g,l=Y,h),Ni(l)}Y=Y.nextEffect}}catch(wb){if(null===Y)throw Error(u(330));Ei(Y,wb),Y=Y.nextEffect}}while(null!==Y);if(w=Ed,B=xd(),q=w.focusedElem,h=w.selectionRange,B!==q&&q&&q.ownerDocument&&function wd(a,b){return!(!a||!b)&&(a===b||(!a||3!==a.nodeType)&&(b&&3===b.nodeType?wd(a,b.parentNode):"contains"in a?a.contains(b):!!a.compareDocumentPosition&&!!(16&a.compareDocumentPosition(b))))}(q.ownerDocument.documentElement,q)){null!==h&&yd(q)&&(B=h.start,void 0===(w=h.end)&&(w=B),"selectionStart"in q?(q.selectionStart=B,q.selectionEnd=Math.min(w,q.value.length)):(w=(B=q.ownerDocument||document)&&B.defaultView||window).getSelection&&(w=w.getSelection(),l=q.textContent.length,g=Math.min(h.start,l),h=void 0===h.end?g:Math.min(h.end,l),!w.extend&&g>h&&(l=h,h=g,g=l),l=vd(q,g),m=vd(q,h),l&&m&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==m.node||w.focusOffset!==m.offset)&&((B=B.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),g>h?(w.addRange(B),w.extend(m.node,m.offset)):(B.setEnd(m.node,m.offset),w.addRange(B))))),B=[];for(w=q;w=w.parentNode;)1===w.nodeType&&B.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof q.focus&&q.focus(),q=0;q<B.length;q++)(w=B[q]).element.scrollLeft=w.left,w.element.scrollTop=w.top}fd=!!Dd,Ed=Dd=null,a.current=c,Y=e;do{try{for(q=a;null!==Y;){var ub=Y.effectTag;if(36&ub&&Ji(q,Y.alternate,Y),128&ub){B=void 0;var vb=Y.ref;if(null!==vb){var Xc=Y.stateNode;switch(Y.tag){case 5:B=Xc;break;default:B=Xc}"function"==typeof vb?vb(B):vb.current=B}}Y=Y.nextEffect}}catch(wb){if(null===Y)throw Error(u(330));Ei(Y,wb),Y=Y.nextEffect}}while(null!==Y);Y=null,Vf(),W=f}else a.current=c;if(qj)qj=!1,rj=a,sj=b;else for(Y=e;null!==Y;)b=Y.nextEffect,Y.nextEffect=null,Y=b;if(0===(b=a.firstPendingTime)&&(aj=null),1073741823===b?a===vj?uj++:(uj=0,vj=a):uj=0,"function"==typeof Uj&&Uj(c.stateNode,d),Z(a),Yi)throw Yi=!1,a=Zi,Zi=null,a;return 0!=(8&W)||gg(),null}function Tj(){for(;null!==Y;){var a=Y.effectTag;0!=(256&a)&&Gi(Y.alternate,Y),0==(512&a)||qj||(qj=!0,dg(97,(function(){return Dj(),null}))),Y=Y.nextEffect}}function Dj(){if(90!==sj){var a=97<sj?97:sj;return sj=90,cg(a,Vj)}}function Vj(){if(null===rj)return!1;var a=rj;if(rj=null,0!=(48&W))throw Error(u(331));var b=W;for(W|=32,a=a.current.firstEffect;null!==a;){try{var c=a;if(0!=(512&c.effectTag))switch(c.tag){case 0:case 11:case 15:case 22:Hi(5,c),Ii(5,c)}}catch(d){if(null===a)throw Error(u(330));Ei(a,d)}c=a.nextEffect,a.nextEffect=null,a=c}return W=b,gg(),!0}function Wj(a,b,c){xg(a,b=Xi(a,b=Ai(c,b),1073741823)),null!==(a=xj(a,1073741823))&&Z(a)}function Ei(a,b){if(3===a.tag)Wj(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Wj(c,a,b);break}if(1===c.tag){var d=c.stateNode;if("function"==typeof c.type.getDerivedStateFromError||"function"==typeof d.componentDidCatch&&(null===aj||!aj.has(d))){xg(c,a=$i(c,a=Ai(b,a),1073741823)),null!==(c=xj(c,1073741823))&&Z(c);break}}c=c.return}}function Oj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b),T===a&&U===c?S===vi||S===ui&&1073741823===lj&&$f()-Ti<500?Ej(a,U):oj=!0:Aj(a,c)&&(0!==(b=a.lastPingedTime)&&b<c||(a.lastPingedTime=c,Z(a)))}function Vi(a,b){var c=a.stateNode;null!==c&&c.delete(b),0===(b=0)&&(b=Hg(b=Gg(),a,null)),null!==(a=xj(a,b))&&Z(a)}Rj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||K.current)rg=!0;else{if(d<c){switch(rg=!1,b.tag){case 3:hi(b),Xh();break;case 5:if(fh(b),4&b.mode&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:L(b.type)&&Gf(b);break;case 4:dh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value,e=b.type._context,I(jg,e._currentValue),e._currentValue=d;break;case 13:if(null!==b.memoizedState)return 0!==(d=b.child.childExpirationTime)&&d>=c?ji(a,b,c):(I(M,1&M.current),null!==(b=$h(a,b,c))?b.sibling:null);I(M,1&M.current);break;case 19:if(d=b.childExpirationTime>=c,0!=(64&a.effectTag)){if(d)return mi(a,b,c);b.effectTag|=64}if(null!==(e=b.memoizedState)&&(e.rendering=null,e.tail=null),I(M,M.current),!d)return null}return $h(a,b,c)}rg=!1}}else rg=!1;switch(b.expirationTime=0,b.tag){case 2:if(d=b.type,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),a=b.pendingProps,e=Cf(b,J.current),qg(b,c),e=oh(null,b,d,a,e,c),b.effectTag|=1,"object"==typeof e&&null!==e&&"function"==typeof e.render&&void 0===e.$$typeof){if(b.tag=1,b.memoizedState=null,b.updateQueue=null,L(d)){var f=!0;Gf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,ug(b);var g=d.getDerivedStateFromProps;"function"==typeof g&&Fg(b,d,g,a),e.updater=Jg,b.stateNode=e,e._reactInternalFiber=b,Ng(b,d,a,c),b=gi(null,b,d,!0,f,c)}else b.tag=0,R(null,b,e,c),b=b.child;return b;case 16:a:{if(e=b.elementType,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),a=b.pendingProps,function ob(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b(),a._result=b,b.then((function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)}),(function(b){0===a._status&&(a._status=2,a._result=b)}))}}(e),1!==e._status)throw e._result;switch(e=e._result,b.type=e,f=b.tag=function Xj(a){if("function"==typeof a)return bi(a)?1:0;if(null!=a){if((a=a.$$typeof)===gb)return 11;if(a===jb)return 14}return 2}(e),a=ig(e,a),f){case 0:b=di(null,b,e,a,c);break a;case 1:b=fi(null,b,e,a,c);break a;case 11:b=Zh(null,b,e,a,c);break a;case 14:b=ai(null,b,e,ig(e.type,a),d,c);break a}throw Error(u(306,e,""))}return b;case 0:return d=b.type,e=b.pendingProps,di(a,b,d,e=b.elementType===d?e:ig(d,e),c);case 1:return d=b.type,e=b.pendingProps,fi(a,b,d,e=b.elementType===d?e:ig(d,e),c);case 3:if(hi(b),d=b.updateQueue,null===a||null===d)throw Error(u(282));if(d=b.pendingProps,e=null!==(e=b.memoizedState)?e.element:null,vg(a,b),zg(b,d,null,c),(d=b.memoizedState.element)===e)Xh(),b=$h(a,b,c);else{if((e=b.stateNode.hydrate)&&(Ph=Jd(b.stateNode.containerInfo.firstChild),Oh=b,e=Qh=!0),e)for(c=Yg(b,null,d,c),b.child=c;c;)c.effectTag=-3&c.effectTag|1024,c=c.sibling;else R(a,b,d,c),Xh();b=b.child}return b;case 5:return fh(b),null===a&&Uh(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Gd(d,e)?g=null:null!==f&&Gd(d,f)&&(b.effectTag|=16),ei(a,b),4&b.mode&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(R(a,b,g,c),b=b.child),b;case 6:return null===a&&Uh(b),null;case 13:return ji(a,b,c);case 4:return dh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Xg(b,null,d,c):R(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,Zh(a,b,d,e=b.elementType===d?e:ig(d,e),c);case 7:return R(a,b,b.pendingProps,c),b.child;case 8:case 12:return R(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context,e=b.pendingProps,g=b.memoizedProps,f=e.value;var h=b.type._context;if(I(jg,h._currentValue),h._currentValue=f,null!==g)if(h=g.value,0===(f=$e(h,f)?0:0|("function"==typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823))){if(g.children===e.children&&!K.current){b=$h(a,b,c);break a}}else for(null!==(h=b.child)&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=k.firstContext;null!==l;){if(l.context===d&&0!=(l.observedBits&f)){1===h.tag&&((l=wg(c,null)).tag=2,xg(h,l)),h.expirationTime<c&&(h.expirationTime=c),null!==(l=h.alternate)&&l.expirationTime<c&&(l.expirationTime=c),pg(h.return,c),k.expirationTime<c&&(k.expirationTime=c);break}l=l.next}}else g=10===h.tag&&h.type===b.type?null:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}if(null!==(h=g.sibling)){h.return=g.return,g=h;break}g=g.return}h=g}R(a,b,e.children,c),b=b.child}return b;case 9:return e=b.type,d=(f=b.pendingProps).children,qg(b,c),d=d(e=sg(e,f.unstable_observedBits)),b.effectTag|=1,R(a,b,d,c),b.child;case 14:return f=ig(e=b.type,b.pendingProps),ai(a,b,e,f=ig(e.type,f),d,c);case 15:return ci(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ig(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,L(d)?(a=!0,Gf(b)):a=!1,qg(b,c),Lg(b,d,e),Ng(b,d,e,c),gi(null,b,d,!0,a,c);case 19:return mi(a,b,c)}throw Error(u(156,b.tag))};var Uj=null,Li=null;function Zj(a,b,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sh(a,b,c,d){return new Zj(a,b,c,d)}function bi(a){return!(!(a=a.prototype)||!a.isReactComponent)}function Sg(a,b){var c=a.alternate;return null===c?((c=Sh(a.tag,b,a.key,a.mode)).elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null),c.childExpirationTime=a.childExpirationTime,c.expirationTime=a.expirationTime,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,b=a.dependencies,c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c}function Ug(a,b,c,d,e,f){var g=2;if(d=a,"function"==typeof a)bi(a)&&(g=1);else if("string"==typeof a)g=5;else a:switch(a){case ab:return Wg(c.children,e,f,b);case fb:g=8,e|=7;break;case bb:g=8,e|=1;break;case cb:return(a=Sh(12,c,b,8|e)).elementType=cb,a.type=cb,a.expirationTime=f,a;case hb:return(a=Sh(13,c,b,e)).type=hb,a.elementType=hb,a.expirationTime=f,a;case ib:return(a=Sh(19,c,b,e)).elementType=ib,a.expirationTime=f,a;default:if("object"==typeof a&&null!==a)switch(a.$$typeof){case db:g=10;break a;case eb:g=9;break a;case gb:g=11;break a;case jb:g=14;break a;case kb:g=16,d=null;break a;case lb:g=22;break a}throw Error(u(130,null==a?a:typeof a,""))}return(b=Sh(g,c,b,e)).elementType=a,b.type=d,b.expirationTime=f,b}function Wg(a,b,c,d){return(a=Sh(7,a,d,b)).expirationTime=c,a}function Tg(a,b,c){return(a=Sh(6,a,null,b)).expirationTime=c,a}function Vg(a,b,c){return(b=Sh(4,null!==a.children?a.children:[],a.key,b)).expirationTime=c,b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},b}function ak(a,b,c){this.tag=b,this.current=null,this.containerInfo=a,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=c,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Aj(a,b){var c=a.firstSuspendedTime;return a=a.lastSuspendedTime,0!==c&&c>=b&&a<=b}function xi(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;c<b&&(a.firstSuspendedTime=b),(d>b||0===c)&&(a.lastSuspendedTime=b),b<=a.lastPingedTime&&(a.lastPingedTime=0),b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yi(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Cj(a,b){var c=a.lastExpiredTime;(0===c||c>b)&&(a.lastExpiredTime=b)}function bk(a,b,c,d){var e=b.current,f=Gg(),g=Dg.suspense;f=Hg(f,e,g);a:if(c){b:{if(dc(c=c._reactInternalFiber)!==c||1!==c.tag)throw Error(u(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(L(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(u(171))}if(1===c.tag){var k=c.type;if(L(k)){c=Ff(c,k,h);break a}}c=h}else c=Af;return null===b.context?b.context=c:b.pendingContext=c,(b=wg(f,g)).payload={element:a},null!==(d=void 0===d?null:d)&&(b.callback=d),xg(e,b),Ig(e,f),f}function ck(a){if(!(a=a.current).child)return null;switch(a.child.tag){case 5:default:return a.child.stateNode}}function dk(a,b){null!==(a=a.memoizedState)&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function ek(a,b){dk(a,b),(a=a.alternate)&&dk(a,b)}function fk(a,b,c){var d=new ak(a,b,c=null!=c&&!0===c.hydrate),e=Sh(3,null,null,2===b?7:1===b?3:0);d.current=e,e.stateNode=d,ug(e),a[Od]=d.current,c&&0!==b&&function Jc(a,b){var c=cc(b);Hc.forEach((function(a){uc(a,b,c)})),Ic.forEach((function(a){uc(a,b,c)}))}(0,9===a.nodeType?a:a.ownerDocument),this._internalRoot=d}function gk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function ik(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if("function"==typeof e){var h=e;e=function(){var a=ck(g);h.call(a)}}bk(b,g,a,e)}else{if(f=c._reactRootContainer=function hk(a,b){if(b||(b=!(!(b=a?9===a.nodeType?a.documentElement:a.firstChild:null)||1!==b.nodeType||!b.hasAttribute("data-reactroot"))),!b)for(var c;c=a.lastChild;)a.removeChild(c);return new fk(a,0,b?{hydrate:!0}:void 0)}(c,d),g=f._internalRoot,"function"==typeof e){var k=e;e=function(){var a=ck(g);k.call(a)}}Nj((function(){bk(b,g,a,e)}))}return ck(g)}function jk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$a,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function kk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!gk(b))throw Error(u(200));return jk(a,b,null,c)}fk.prototype.render=function(a){bk(a,this._internalRoot,null,null)},fk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;bk(null,a,null,(function(){b[Od]=null}))},wc=function(a){if(13===a.tag){var b=hg(Gg(),150,100);Ig(a,b),ek(a,b)}},xc=function(a){13===a.tag&&(Ig(a,3),ek(a,3))},yc=function(a){if(13===a.tag){var b=Gg();Ig(a,b=Hg(b,a,null)),ek(a,b)}},za=function(a,b,c){switch(b){case"input":if(Cb(a,c),b=c.name,"radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]'),b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Qd(d);if(!e)throw Error(u(90));yb(d),Cb(d,e)}}}break;case"textarea":Kb(a,c);break;case"select":null!=(b=c.value)&&Hb(a,!!c.multiple,b,!1)}},Fa=Mj,Ga=function(a,b,c,d,e){var f=W;W|=4;try{return cg(98,a.bind(null,b,c,d,e))}finally{0===(W=f)&&gg()}},Ha=function(){0==(49&W)&&(function Lj(){if(null!==tj){var a=tj;tj=null,a.forEach((function(a,c){Cj(c,a),Z(c)})),gg()}}(),Dj())},Ia=function(a,b){var c=W;W|=2;try{return a(b)}finally{0===(W=c)&&gg()}};var a,b,lk={Events:[Nc,Pd,Qd,xa,ta,Xd,function(a){jc(a,Wd)},Da,Ea,id,mc,Dj,{current:!1}]};b=(a={findFiberByHostInstance:tc,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}).findFiberByHostInstance,function Yj(a){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);Uj=function(a){try{b.onCommitFiberRoot(c,a,void 0,64==(64&a.current.effectTag))}catch(e){}},Li=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}(n({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return null===(a=hc(a))?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk,exports.createPortal=kk,exports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===b){if("function"==typeof a.render)throw Error(u(188));throw Error(u(268,Object.keys(a)))}return a=null===(a=hc(b))?null:a.stateNode},exports.flushSync=function(a,b){if(0!=(48&W))throw Error(u(187));var c=W;W|=1;try{return cg(99,a.bind(null,b))}finally{W=c,gg()}},exports.hydrate=function(a,b,c){if(!gk(b))throw Error(u(200));return ik(null,a,b,!0,c)},exports.render=function(a,b,c){if(!gk(b))throw Error(u(200));return ik(null,a,b,!1,c)},exports.unmountComponentAtNode=function(a){if(!gk(a))throw Error(u(40));return!!a._reactRootContainer&&(Nj((function(){ik(null,null,a,!1,(function(){a._reactRootContainer=null,a[Od]=null}))})),!0)},exports.unstable_batchedUpdates=Mj,exports.unstable_createPortal=function(a,b){return kk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},exports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!gk(c))throw Error(u(200));if(null==a||void 0===a._reactInternalFiber)throw Error(u(38));return ik(a,b,c,!1,d)},exports.version="16.13.1"},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(760)},function(module,exports,__webpack_require__){"use strict";var f,g,h,k,l;if("undefined"==typeof window||"function"!=typeof MessageChannel){var p=null,q=null,t=function(){if(null!==p)try{var a=exports.unstable_now();p(!0,a),p=null}catch(b){throw setTimeout(t,0),b}},u=Date.now();exports.unstable_now=function(){return Date.now()-u},f=function(a){null!==p?setTimeout(f,0,a):(p=a,setTimeout(t,0))},g=function(a,b){q=setTimeout(a,b)},h=function(){clearTimeout(q)},k=function(){return!1},l=exports.unstable_forceFrameRate=function(){}}else{var w=window.performance,x=window.Date,y=window.setTimeout,z=window.clearTimeout;if("undefined"!=typeof console){var A=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof A&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof w&&"function"==typeof w.now)exports.unstable_now=function(){return w.now()};else{var B=x.now();exports.unstable_now=function(){return x.now()-B}}var C=!1,D=null,E=-1,F=5,G=0;k=function(){return exports.unstable_now()>=G},l=function(){},exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):F=0<a?Math.floor(1e3/a):5};var H=new MessageChannel,I=H.port2;H.port1.onmessage=function(){if(null!==D){var a=exports.unstable_now();G=a+F;try{D(!0,a)?I.postMessage(null):(C=!1,D=null)}catch(b){throw I.postMessage(null),b}}else C=!1},f=function(a){D=a,C||(C=!0,I.postMessage(null))},g=function(a,b){E=y((function(){a(exports.unstable_now())}),b)},h=function(){z(E),E=-1}}function J(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(!(void 0!==e&&0<K(e,b)))break a;a[d]=b,a[c]=e,c=d}}function L(a){return void 0===(a=a[0])?null:a}function M(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>K(n,c))void 0!==r&&0>K(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else{if(!(void 0!==r&&0>K(r,c)))break a;a[d]=r,a[v]=c,d=v}}}return b}return null}function K(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var N=[],O=[],P=1,Q=null,R=3,S=!1,T=!1,U=!1;function V(a){for(var b=L(O);null!==b;){if(null===b.callback)M(O);else{if(!(b.startTime<=a))break;M(O),b.sortIndex=b.expirationTime,J(N,b)}b=L(O)}}function W(a){if(U=!1,V(a),!T)if(null!==L(N))T=!0,f(X);else{var b=L(O);null!==b&&g(W,b.startTime-a)}}function X(a,b){T=!1,U&&(U=!1,h()),S=!0;var c=R;try{for(V(b),Q=L(N);null!==Q&&(!(Q.expirationTime>b)||a&&!k());){var d=Q.callback;if(null!==d){Q.callback=null,R=Q.priorityLevel;var e=d(Q.expirationTime<=b);b=exports.unstable_now(),"function"==typeof e?Q.callback=e:Q===L(N)&&M(N),V(b)}else M(N);Q=L(N)}if(null!==Q)var m=!0;else{var n=L(O);null!==n&&g(W,n.startTime-b),m=!1}return m}finally{Q=null,R=c,S=!1}}function Y(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Z=l;exports.unstable_IdlePriority=5,exports.unstable_ImmediatePriority=1,exports.unstable_LowPriority=4,exports.unstable_NormalPriority=3,exports.unstable_Profiling=null,exports.unstable_UserBlockingPriority=2,exports.unstable_cancelCallback=function(a){a.callback=null},exports.unstable_continueExecution=function(){T||S||(T=!0,f(X))},exports.unstable_getCurrentPriorityLevel=function(){return R},exports.unstable_getFirstCallbackNode=function(){return L(N)},exports.unstable_next=function(a){switch(R){case 1:case 2:case 3:var b=3;break;default:b=R}var c=R;R=b;try{return a()}finally{R=c}},exports.unstable_pauseExecution=function(){},exports.unstable_requestPaint=Z,exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=R;R=a;try{return b()}finally{R=c}},exports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();if("object"==typeof c&&null!==c){var e=c.delay;e="number"==typeof e&&0<e?d+e:d,c="number"==typeof c.timeout?c.timeout:Y(a)}else c=Y(a),e=d;return a={id:P++,callback:b,priorityLevel:a,startTime:e,expirationTime:c=e+c,sortIndex:-1},e>d?(a.sortIndex=e,J(O,a),null===L(N)&&a===L(O)&&(U?h():U=!0,g(W,e-d))):(a.sortIndex=c,J(N,a),T||S||(T=!0,f(X))),a},exports.unstable_shouldYield=function(){var a=exports.unstable_now();V(a);var b=L(N);return b!==Q&&null!==Q&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<Q.expirationTime||k()},exports.unstable_wrapCallback=function(a){var b=R;return function(){var c=R;R=b;try{return a.apply(this,arguments)}finally{R=c}}}},function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var entities=__webpack_require__(762),defaults={fg:"#FFF",bg:"#000",newline:!1,escapeXML:!1,stream:!1,colors:function getDefaultColors(){var colors={0:"#000",1:"#A00",2:"#0A0",3:"#A50",4:"#00A",5:"#A0A",6:"#0AA",7:"#AAA",8:"#555",9:"#F55",10:"#5F5",11:"#FF5",12:"#55F",13:"#F5F",14:"#5FF",15:"#FFF"};return range(0,5).forEach((function(red){range(0,5).forEach((function(green){range(0,5).forEach((function(blue){return function setStyleColor(red,green,blue,colors){var r=red>0?40*red+55:0,g=green>0?40*green+55:0,b=blue>0?40*blue+55:0;colors[16+36*red+6*green+blue]=function toColorHexString(ref){var results=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=ref[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var r=_step.value;results.push(toHexString(r))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return"#"+results.join("")}([r,g,b])}(red,green,blue,colors)}))}))})),range(0,23).forEach((function(gray){var c=gray+232,l=toHexString(10*gray+8);colors[c]="#"+l+l+l})),colors}()};function toHexString(num){for(var str=num.toString(16);str.length<2;)str="0"+str;return str}function generateOutput(stack,token,data,options){var result;return"text"===token?result=function pushText(text,options){if(options.escapeXML)return entities.encodeXML(text);return text}(data,options):"display"===token?result=function handleDisplay(stack,code,options){code=parseInt(code,10);var result,codeMap={"-1":function _(){return"<br/>"},0:function _(){return stack.length&&resetStyles(stack)},1:function _(){return pushTag(stack,"b")},3:function _(){return pushTag(stack,"i")},4:function _(){return pushTag(stack,"u")},8:function _(){return pushStyle(stack,"display:none")},9:function _(){return pushTag(stack,"strike")},22:function _(){return pushStyle(stack,"font-weight:normal;text-decoration:none;font-style:normal")},23:function _(){return closeTag(stack,"i")},24:function _(){return closeTag(stack,"u")},39:function _(){return pushForegroundColor(stack,options.fg)},49:function _(){return pushBackgroundColor(stack,options.bg)},53:function _(){return pushStyle(stack,"text-decoration:overline")}};codeMap[code]?result=codeMap[code]():4<code&&code<7?result=pushTag(stack,"blink"):29<code&&code<38?result=pushForegroundColor(stack,options.colors[code-30]):39<code&&code<48?result=pushBackgroundColor(stack,options.colors[code-40]):89<code&&code<98?result=pushForegroundColor(stack,options.colors[code-90+8]):99<code&&code<108&&(result=pushBackgroundColor(stack,options.colors[code-100+8]));return result}(stack,data,options):"xterm256"===token?result=pushForegroundColor(stack,options.colors[data]):"rgb"===token&&(result=function handleRgb(stack,data){var operation=+(data=data.substring(2).slice(0,-1)).substr(0,2),rgb=data.substring(5).split(";").map((function(value){return("0"+Number(value).toString(16)).substr(-2)})).join("");return pushStyle(stack,(38===operation?"color:#":"background-color:#")+rgb)}(stack,data)),result}function resetStyles(stack){var stackClone=stack.slice(0);return stack.length=0,stackClone.reverse().map((function(tag){return"</"+tag+">"})).join("")}function range(low,high){for(var results=[],j=low;j<=high;j++)results.push(j);return results}function categoryForCode(code){var result=null;return 0===(code=parseInt(code,10))?result="all":1===code?result="bold":2<code&&code<5?result="underline":4<code&&code<7?result="blink":8===code?result="hide":9===code?result="strike":29<code&&code<38||39===code||89<code&&code<98?result="foreground-color":(39<code&&code<48||49===code||99<code&&code<108)&&(result="background-color"),result}function pushTag(stack,tag,style){return style||(style=""),stack.push(tag),["<"+tag,style?' style="'+style+'"':void 0,">"].join("")}function pushStyle(stack,style){return pushTag(stack,"span",style)}function pushForegroundColor(stack,color){return pushTag(stack,"span","color:"+color)}function pushBackgroundColor(stack,color){return pushTag(stack,"span","background-color:"+color)}function closeTag(stack,style){var last;if(stack.slice(-1)[0]===style&&(last=stack.pop()),last)return"</"+style+">"}var Filter=function(){function Filter(options){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Filter),(options=options||{}).colors&&(options.colors=Object.assign({},defaults.colors,options.colors)),this.options=Object.assign({},defaults,options),this.stack=[],this.stickyStack=[]}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Filter,[{key:"toHtml",value:function toHtml(input){var _this=this;input="string"==typeof input?[input]:input;var stack=this.stack,options=this.options,buf=[];return this.stickyStack.forEach((function(element){var output=generateOutput(stack,element.token,element.data,options);output&&buf.push(output)})),function tokenize(text,options,callback){var ansiMatch=!1;function remove(){return""}function newline(m){return options.newline?callback("display",-1):callback("text",m),""}var tokens=[{pattern:/^\x08+/,sub:remove},{pattern:/^\x1b\[[012]?K/,sub:remove},{pattern:/^\x1b\[\(B/,sub:remove},{pattern:/^\x1b\[[34]8;2;\d+;\d+;\d+m/,sub:function rgb(m){return callback("rgb",m),""}},{pattern:/^\x1b\[38;5;(\d+)m/,sub:function removeXterm256(m,g1){return callback("xterm256",g1),""}},{pattern:/^\n/,sub:newline},{pattern:/^\r+\n/,sub:newline},{pattern:/^\x1b\[((?:\d{1,3};?)+|)m/,sub:function ansiMess(m,g1){ansiMatch=!0,0===g1.trim().length&&(g1="0"),g1=g1.trimRight(";").split(";");var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=g1[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var g=_step2.value;callback("display",g)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return""}},{pattern:/^\x1b\[\d?J/,sub:remove},{pattern:/^\x1b\[\d{0,3};\d{0,3}f/,sub:remove},{pattern:/^\x1b\[?[\d;]{0,3}/,sub:remove},{pattern:/^(([^\x1b\x08\r\n])+)/,sub:function realText(m){return callback("text",m),""}}];function process(handler,i){i>3&&ansiMatch||(ansiMatch=!1,text=text.replace(handler.pattern,handler.sub))}var results1=[],length=text.length;outer:for(;length>0;){for(var i=0,o=0,len=tokens.length;o<len;i=++o){if(process(tokens[i],i),text.length!==length){length=text.length;continue outer}}if(text.length===length)break;results1.push(0),length=text.length}return results1}(input.join(""),options,(function(token,data){var output=generateOutput(stack,token,data,options);output&&buf.push(output),options.stream&&(_this.stickyStack=function updateStickyStack(stickyStack,token,data){return"text"!==token&&(stickyStack=stickyStack.filter(function notCategory(category){return function(e){return(null===category||e.category!==category)&&"all"!==category}}(categoryForCode(data)))).push({token:token,data:data,category:categoryForCode(data)}),stickyStack}(_this.stickyStack,token,data))})),stack.length&&buf.push(resetStyles(stack)),buf.join("")}}]),Filter}();module.exports=Filter},function(module,exports,__webpack_require__){var encode=__webpack_require__(763),decode=__webpack_require__(764);exports.decode=function(data,level){return(!level||level<=0?decode.XML:decode.HTML)(data)},exports.decodeStrict=function(data,level){return(!level||level<=0?decode.XML:decode.HTMLStrict)(data)},exports.encode=function(data,level){return(!level||level<=0?encode.XML:encode.HTML)(data)},exports.encodeXML=encode.XML,exports.encodeHTML4=exports.encodeHTML5=exports.encodeHTML=encode.HTML,exports.decodeXML=exports.decodeXMLStrict=decode.XML,exports.decodeHTML4=exports.decodeHTML5=exports.decodeHTML=decode.HTML,exports.decodeHTML4Strict=exports.decodeHTML5Strict=exports.decodeHTMLStrict=decode.HTMLStrict,exports.escape=encode.escape},function(module,exports,__webpack_require__){var inverseXML=getInverseObj(__webpack_require__(396)),xmlReplacer=getInverseReplacer(inverseXML);exports.XML=getInverse(inverseXML,xmlReplacer);var inverseHTML=getInverseObj(__webpack_require__(397)),htmlReplacer=getInverseReplacer(inverseHTML);function getInverseObj(obj){return Object.keys(obj).sort().reduce((function(inverse,name){return inverse[obj[name]]="&"+name+";",inverse}),{})}function getInverseReplacer(inverse){var single=[],multiple=[];return Object.keys(inverse).forEach((function(k){1===k.length?single.push("\\"+k):multiple.push(k)})),multiple.unshift("["+single.join("")+"]"),new RegExp(multiple.join("|"),"g")}exports.HTML=getInverse(inverseHTML,htmlReplacer);var re_nonASCII=/[^\0-\x7F]/g,re_astralSymbols=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function singleCharReplacer(c){return"&#x"+c.charCodeAt(0).toString(16).toUpperCase()+";"}function astralReplacer(c){return"&#x"+(1024*(c.charCodeAt(0)-55296)+c.charCodeAt(1)-56320+65536).toString(16).toUpperCase()+";"}function getInverse(inverse,re){function func(name){return inverse[name]}return function(data){return data.replace(re,func).replace(re_astralSymbols,astralReplacer).replace(re_nonASCII,singleCharReplacer)}}var re_xmlChars=getInverseReplacer(inverseXML);exports.escape=function escapeXML(data){return data.replace(re_xmlChars,singleCharReplacer).replace(re_astralSymbols,astralReplacer).replace(re_nonASCII,singleCharReplacer)}},function(module,exports,__webpack_require__){var entityMap=__webpack_require__(397),legacyMap=__webpack_require__(765),xmlMap=__webpack_require__(396),decodeCodePoint=__webpack_require__(766),decodeXMLStrict=getStrictDecoder(xmlMap),decodeHTMLStrict=getStrictDecoder(entityMap);function getStrictDecoder(map){var keys=Object.keys(map).join("|"),replace=getReplacer(map),re=new RegExp("&(?:"+(keys+="|#[xX][\\da-fA-F]+|#\\d+")+");","g");return function(str){return String(str).replace(re,replace)}}var decodeHTML=function(){for(var legacy=Object.keys(legacyMap).sort(sorter),keys=Object.keys(entityMap).sort(sorter),i=0,j=0;i<keys.length;i++)legacy[j]===keys[i]?(keys[i]+=";?",j++):keys[i]+=";";var re=new RegExp("&(?:"+keys.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),replace=getReplacer(entityMap);function replacer(str){return";"!==str.substr(-1)&&(str+=";"),replace(str)}return function(str){return String(str).replace(re,replacer)}}();function sorter(a,b){return a<b?1:-1}function getReplacer(map){return function replace(str){return"#"===str.charAt(1)?"X"===str.charAt(2)||"x"===str.charAt(2)?decodeCodePoint(parseInt(str.substr(3),16)):decodeCodePoint(parseInt(str.substr(2),10)):map[str.slice(1,-1)]}}module.exports={XML:decodeXMLStrict,HTML:decodeHTML,HTMLStrict:decodeHTMLStrict}},function(module){module.exports=JSON.parse('{"Aacute":"","aacute":"","Acirc":"","acirc":"","acute":"","AElig":"","aelig":"","Agrave":"","agrave":"","amp":"&","AMP":"&","Aring":"","aring":"","Atilde":"","atilde":"","Auml":"","auml":"","brvbar":"","Ccedil":"","ccedil":"","cedil":"","cent":"","copy":"","COPY":"","curren":"","deg":"","divide":"","Eacute":"","eacute":"","Ecirc":"","ecirc":"","Egrave":"","egrave":"","ETH":"","eth":"","Euml":"","euml":"","frac12":"","frac14":"","frac34":"","gt":">","GT":">","Iacute":"","iacute":"","Icirc":"","icirc":"","iexcl":"","Igrave":"","igrave":"","iquest":"","Iuml":"","iuml":"","laquo":"","lt":"<","LT":"<","macr":"","micro":"","middot":"","nbsp":"","not":"","Ntilde":"","ntilde":"","Oacute":"","oacute":"","Ocirc":"","ocirc":"","Ograve":"","ograve":"","ordf":"","ordm":"","Oslash":"","oslash":"","Otilde":"","otilde":"","Ouml":"","ouml":"","para":"","plusmn":"","pound":"","quot":"\\"","QUOT":"\\"","raquo":"","reg":"","REG":"","sect":"","shy":"","sup1":"","sup2":"","sup3":"","szlig":"","THORN":"","thorn":"","times":"","Uacute":"","uacute":"","Ucirc":"","ucirc":"","Ugrave":"","ugrave":"","uml":"","Uuml":"","uuml":"","Yacute":"","yacute":"","yen":"","yuml":""}')},function(module,exports,__webpack_require__){var decodeMap=__webpack_require__(767);module.exports=function decodeCodePoint(codePoint){if(codePoint>=55296&&codePoint<=57343||codePoint>1114111)return"";codePoint in decodeMap&&(codePoint=decodeMap[codePoint]);var output="";codePoint>65535&&(codePoint-=65536,output+=String.fromCharCode(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint);return output+=String.fromCharCode(codePoint)}},function(module){module.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},function(module,exports,__webpack_require__){"use strict";__webpack_require__(91),__webpack_require__(109),__webpack_require__(110),__webpack_require__(77),__webpack_require__(111),__webpack_require__(168),__webpack_require__(138),__webpack_require__(93),__webpack_require__(139),__webpack_require__(362),__webpack_require__(769),__webpack_require__(772),__webpack_require__(144),__webpack_require__(79),__webpack_require__(196),__webpack_require__(142),__webpack_require__(112),__webpack_require__(113),__webpack_require__(114),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function createChannel(_ref2){var page=_ref2.page,transport=new PostmsgTransport({page:page});return new _channels.default({transport:transport})},exports.PostmsgTransport=exports.KEY=void 0;var _global=__webpack_require__(92),_channels=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(359)),_clientLogger=__webpack_require__(143),_telejson=__webpack_require__(774);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var KEY="storybook-channel";exports.KEY=KEY;var PostmsgTransport=function(){function PostmsgTransport(config){if(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PostmsgTransport),this.config=config,this.buffer=void 0,this.handler=void 0,this.connected=void 0,this.buffer=[],this.handler=null,_global.window.addEventListener("message",this.handleEvent.bind(this),!1),"manager"!==config.page&&"preview"!==config.page)throw new Error('postmsg-channel: "config.page" cannot be "'.concat(config.page,'"'))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PostmsgTransport,[{key:"setHandler",value:function setHandler(handler){var _this=this;this.handler=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];handler.apply(_this,args),!_this.connected&&_this.getWindow()&&(_this.flush(),_this.connected=!0)}}},{key:"send",value:function send(event,options){var _this2=this,iframeWindow=this.getWindow();if(!iframeWindow)return new Promise((function(resolve,reject){_this2.buffer.push({event:event,resolve:resolve,reject:reject})}));var depth=15,allowFunction=!0;options&&"boolean"==typeof options.allowFunction&&(allowFunction=options.allowFunction),options&&Number.isInteger(options.depth)&&(depth=options.depth);var data=(0,_telejson.stringify)({key:KEY,event:event},{maxDepth:depth,allowFunction:allowFunction});return iframeWindow.postMessage(data,"*"),Promise.resolve(null)}},{key:"flush",value:function flush(){var _this3=this,buffer=this.buffer;this.buffer=[],buffer.forEach((function(item){_this3.send(item.event).then(item.resolve).catch(item.reject)}))}},{key:"getWindow",value:function getWindow(){if("manager"===this.config.page){var iframe=_global.document.getElementById("storybook-preview-iframe");return iframe?iframe.contentWindow:null}return _global.window.parent}},{key:"handleEvent",value:function handleEvent(rawEvent){try{var data=rawEvent.data,_ref="string"==typeof data&&(0,_telejson.isJSON)(data)?(0,_telejson.parse)(data):data,key=_ref.key,event=_ref.event;key===KEY&&(_clientLogger.logger.debug.apply(_clientLogger.logger,["message arrived at ".concat(this.config.page),event.type].concat(_toConsumableArray(event.args))),this.handler(event))}catch(error){_clientLogger.logger.error(error)}}}]),PostmsgTransport}();exports.PostmsgTransport=PostmsgTransport},function(module,exports,__webpack_require__){"use strict";var DESCRIPTORS=__webpack_require__(49),global=__webpack_require__(30),isForced=__webpack_require__(193),redefine=__webpack_require__(69),has=__webpack_require__(50),classof=__webpack_require__(89),inheritIfRequired=__webpack_require__(364),toPrimitive=__webpack_require__(161),fails=__webpack_require__(35),create=__webpack_require__(136),getOwnPropertyNames=__webpack_require__(191).f,getOwnPropertyDescriptor=__webpack_require__(159).f,defineProperty=__webpack_require__(52).f,trim=__webpack_require__(770).trim,NativeNumber=global.Number,NumberPrototype=NativeNumber.prototype,BROKEN_CLASSOF="Number"==classof(create(NumberPrototype)),toNumber=function(argument){var first,third,radix,maxCode,digits,length,index,code,it=toPrimitive(argument,!1);if("string"==typeof it&&it.length>2)if(43===(first=(it=trim(it)).charCodeAt(0))||45===first){if(88===(third=it.charCodeAt(2))||120===third)return NaN}else if(48===first){switch(it.charCodeAt(1)){case 66:case 98:radix=2,maxCode=49;break;case 79:case 111:radix=8,maxCode=55;break;default:return+it}for(length=(digits=it.slice(2)).length,index=0;index<length;index++)if((code=digits.charCodeAt(index))<48||code>maxCode)return NaN;return parseInt(digits,radix)}return+it};if(isForced("Number",!NativeNumber(" 0o1")||!NativeNumber("0b1")||NativeNumber("+0x1"))){for(var key,NumberWrapper=function Number(value){var it=arguments.length<1?0:value,dummy=this;return dummy instanceof NumberWrapper&&(BROKEN_CLASSOF?fails((function(){NumberPrototype.valueOf.call(dummy)})):"Number"!=classof(dummy))?inheritIfRequired(new NativeNumber(toNumber(it)),dummy,NumberWrapper):toNumber(it)},keys=DESCRIPTORS?getOwnPropertyNames(NativeNumber):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;keys.length>j;j++)has(NativeNumber,key=keys[j])&&!has(NumberWrapper,key)&&defineProperty(NumberWrapper,key,getOwnPropertyDescriptor(NativeNumber,key));NumberWrapper.prototype=NumberPrototype,NumberPrototype.constructor=NumberWrapper,redefine(global,"Number",NumberWrapper)}},function(module,exports,__webpack_require__){var requireObjectCoercible=__webpack_require__(106),whitespace="["+__webpack_require__(771)+"]",ltrim=RegExp("^"+whitespace+whitespace+"*"),rtrim=RegExp(whitespace+whitespace+"*$"),createMethod=function(TYPE){return function($this){var string=String(requireObjectCoercible($this));return 1&TYPE&&(string=string.replace(ltrim,"")),2&TYPE&&(string=string.replace(rtrim,"")),string}};module.exports={start:createMethod(1),end:createMethod(2),trim:createMethod(3)}},function(module,exports){module.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(module,exports,__webpack_require__){__webpack_require__(25)({target:"Number",stat:!0},{isInteger:__webpack_require__(773)})},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40),floor=Math.floor;module.exports=function isInteger(it){return!isObject(it)&&isFinite(it)&&floor(it)===it}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=exports.stringify=exports.isJSON=exports.reviver=exports.replacer=void 0;var _isRegex=_interopRequireDefault(__webpack_require__(310)),_isFunction=_interopRequireDefault(__webpack_require__(775)),_isSymbol=_interopRequireDefault(__webpack_require__(301)),_isobject=_interopRequireDefault(__webpack_require__(776)),_get=_interopRequireDefault(__webpack_require__(383)),_memoizerific=_interopRequireDefault(__webpack_require__(389));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var isObject=_isobject.default,removeCodeComments=function removeCodeComments(code){var inQuoteChar=null,inBlockComment=!1,inLineComment=!1,inRegexLiteral=!1,newCode="";if(code.indexOf("//")>=0||code.indexOf("/*")>=0)for(var i=0;i<code.length;i+=1)inQuoteChar||inBlockComment||inLineComment||inRegexLiteral?(inQuoteChar&&(code[i]===inQuoteChar&&"\\"!==code[i-1]||"\n"===code[i]&&"`"!==inQuoteChar)&&(inQuoteChar=null),inRegexLiteral&&("/"===code[i]&&"\\"!==code[i-1]||"\n"===code[i])&&(inRegexLiteral=!1),inBlockComment&&"/"===code[i-1]&&"*"===code[i-2]&&(inBlockComment=!1),inLineComment&&"\n"===code[i]&&(inLineComment=!1)):'"'===code[i]||"'"===code[i]||"`"===code[i]?inQuoteChar=code[i]:"/"===code[i]&&"*"===code[i+1]?inBlockComment=!0:"/"===code[i]&&"/"===code[i+1]?inLineComment=!0:"/"===code[i]&&"/"!==code[i+1]&&(inRegexLiteral=!0),inBlockComment||inLineComment||(newCode+=code[i]);else newCode=code;return newCode},cleanCode=(0,_memoizerific.default)(1e4)((function(code){return removeCodeComments(code).replace(/\n\s*/g,"").trim()})),convertShorthandMethods=function convertShorthandMethods(key,stringified){var fnHead=stringified.slice(0,stringified.indexOf("{")),fnBody=stringified.slice(stringified.indexOf("{"));if(fnHead.includes("=>"))return stringified;if(fnHead.includes("function"))return stringified;var modifiedHead=fnHead;return(modifiedHead=modifiedHead.replace(key,"function"))+fnBody},dateFormat=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z$/,replacer=function replacer(options){var objects,stack,keys;return function replace(key,value){try{if(""===key)return keys=["root"],objects=[{keys:"root",value:value}],stack=[],value;for(;stack.length&&this!==stack[0];)stack.shift(),keys.pop();if((0,_isRegex.default)(value)){if(!options.allowRegExp)return;return"_regexp_".concat(value.flags,"|").concat(value.source)}if((0,_isFunction.default)(value)){if(!options.allowFunction)return;var name=value.name,stringified=value.toString();return stringified.match(/(\[native code\]|WEBPACK_IMPORTED_MODULE|__webpack_exports__|__webpack_require__)/)?"_function_".concat(name,"|").concat(function(){}.toString()):"_function_".concat(name,"|").concat(cleanCode(convertShorthandMethods(key,stringified)))}if((0,_isSymbol.default)(value)){if(!options.allowSymbol)return;return"_symbol_".concat(value.toString().slice(7,-1))}if("string"==typeof value&&dateFormat.test(value)){if(!options.allowDate)return;return"_date_".concat(value)}if(void 0===value){if(!options.allowUndefined)return;return"_undefined_"}if("number"==typeof value)return value===-1/0?"_-Infinity_":value===1/0?"_Infinity_":Number.isNaN(value)?"_NaN_":value;if("string"==typeof value)return value;if("boolean"==typeof value)return value;if(stack.length>=options.maxDepth)return Array.isArray(value)?"[Array(".concat(value.length,")]"):"[Object]";var found=objects.find((function(o){return o.value===value}));if(!found){if(value&&isObject(value)&&value.constructor&&value.constructor.name&&"Object"!==value.constructor.name){if(!options.allowClass)return;try{Object.assign(value,{"_constructor-name_":value.constructor.name})}catch(e){}}return keys.push(key),stack.unshift(value),objects.push({keys:keys.join("."),value:value}),value}return"_duplicate_".concat(found.keys)}catch(e){return}}};exports.replacer=replacer;var reviver=function reviver(options){var refs=[],root;return function revive(key,value){if(""===key&&(root=value,refs.forEach((function(_ref){var target=_ref.target,container=_ref.container,replacement=_ref.replacement;container[target]="root"===replacement?root:(0,_get.default)(root,replacement.replace("root.",""))}))),"_constructor-name_"===key)return value;if(isObject(value)&&value["_constructor-name_"]){var name=value["_constructor-name_"];if("Object"!==name){var Fn=new Function("return function ".concat(name,"(){}"))();Object.setPrototypeOf(value,new Fn)}return delete value["_constructor-name_"],value}if("string"==typeof value&&value.startsWith("_function_")){var _ref2=value.match(/_function_([^|]*)\|(.*)/)||[],_ref3=_slicedToArray(_ref2,3),_name=_ref3[1],source=_ref3[2];if(!options.lazyEval)return eval("(".concat(source,")"));var result=function result(){var f=eval("(".concat(source,")"));return f.apply(void 0,arguments)};return Object.defineProperty(result,"toString",{value:function value(){return source}}),Object.defineProperty(result,"name",{value:_name}),result}if("string"==typeof value&&value.startsWith("_regexp_")){var _ref4=value.match(/_regexp_([^|]*)\|(.*)/)||[],_ref5=_slicedToArray(_ref4,3),flags=_ref5[1],_source=_ref5[2];return new RegExp(_source,flags)}return"string"==typeof value&&value.startsWith("_date_")?new Date(value.replace("_date_","")):"string"==typeof value&&value.startsWith("_duplicate_")?(refs.push({target:key,container:this,replacement:value.replace("_duplicate_","")}),null):"string"==typeof value&&value.startsWith("_symbol_")?Symbol(value.replace("_symbol_","")):"string"==typeof value&&"_-Infinity_"===value?-1/0:"string"==typeof value&&"_Infinity_"===value?1/0:"string"==typeof value&&"_NaN_"===value?NaN:value}};exports.reviver=reviver;var isJSON=function isJSON(input){return input.match(/^[\[\{\"\}].*[\]\}\"]$/)};exports.isJSON=isJSON;var defaultOptions={maxDepth:10,space:void 0,allowFunction:!0,allowRegExp:!0,allowDate:!0,allowClass:!0,allowUndefined:!0,allowSymbol:!0,lazyEval:!0},stringify=function stringify(data){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},mergedOptions=_objectSpread({},defaultOptions,{},options);return JSON.stringify(data,replacer(mergedOptions),options.space)};exports.stringify=stringify;var mutator=function mutator(){var mutated=[];return function mutateUndefined(value){isObject(value)&&Object.entries(value).forEach((function(_ref6){var _ref7=_slicedToArray(_ref6,2),k=_ref7[0],v=_ref7[1];"_undefined_"===v?value[k]=void 0:mutated.includes(v)||(mutated.push(v),mutateUndefined(v))})),Array.isArray(value)&&value.forEach((function(v){mutated.push(v),mutateUndefined(v)}))}},parse=function parse(data){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},mergedOptions=_objectSpread({},defaultOptions,{},options),result=JSON.parse(data,reviver(mergedOptions));return mutator()(result),result};exports.parse=parse},function(module,exports){module.exports=function isFunction(fn){if(!fn)return!1;var string=toString.call(fn);return"[object Function]"===string||"function"==typeof fn&&"[object RegExp]"!==string||"undefined"!=typeof window&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)};var toString=Object.prototype.toString},function(module,__webpack_exports__,__webpack_require__){"use strict";function isObject(val){return null!=val&&"object"==typeof val&&!1===Array.isArray(val)}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return isObject}))},function(module,exports,__webpack_require__){"use strict";__webpack_require__(91),__webpack_require__(77),__webpack_require__(393),__webpack_require__(170),__webpack_require__(140),__webpack_require__(141),__webpack_require__(263),__webpack_require__(390),Object.defineProperty(exports,"__esModule",{value:!0}),exports.pathToId=pathToId,exports.initializePath=exports.parseQueryParameters=exports.getIdFromLegacyQuery=exports.setPath=void 0;var _global=__webpack_require__(92),_qs=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(391)),_csf=__webpack_require__(201);function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function pathToId(path){var match=(path||"").match(/^\/story\/(.+)/);if(!match)throw new Error("Invalid path '".concat(path,"',  must start with '/story/'"));return match[1]}var setPath=function setPath(_ref){var storyId=_ref.storyId,viewMode=_ref.viewMode,_qs$parse=_qs.default.parse(_global.document.location.search,{ignoreQueryPrefix:!0}),rest=(_qs$parse.path,_qs$parse.selectedKind,_qs$parse.selectedStory,_objectWithoutProperties(_qs$parse,["path","selectedKind","selectedStory"])),newPath="".concat(_global.document.location.pathname,"?").concat(_qs.default.stringify(Object.assign({},rest,{id:storyId,viewMode:viewMode})));_global.history.replaceState({},"",newPath)};exports.setPath=setPath;var getIdFromLegacyQuery=function getIdFromLegacyQuery(_ref2,storyStore){var path=_ref2.path,selectedKind=_ref2.selectedKind,selectedStory=_ref2.selectedStory;if(path)return pathToId(path);if(selectedKind&&selectedStory){var story=storyStore.getRawStory(selectedKind,selectedStory);return story?story.id:(0,_csf.toId)(selectedKind,selectedStory)}};exports.getIdFromLegacyQuery=getIdFromLegacyQuery;exports.parseQueryParameters=function parseQueryParameters(search){return _qs.default.parse(search,{ignoreQueryPrefix:!0}).id};exports.initializePath=function initializePath(storyStore){var query=_qs.default.parse(_global.document.location.search,{ignoreQueryPrefix:!0}),storyId=query.id,viewMode=query.viewMode;return storyId||(storyId=getIdFromLegacyQuery(query,storyStore))&&setPath({storyId:storyId,viewMode:viewMode}),{storyId:storyId,viewMode:viewMode}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NoDocs=void 0;var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(5));var _ref=_react.default.createElement("div",{style:{fontSize:"14px",letterSpacing:"0.2px",margin:"10px 0"},className:"sb-nodocs sb-wrapper"},_react.default.createElement("div",{style:{margin:"auto",padding:30,borderRadius:10,background:"rgba(0,0,0,0.03)"}},_react.default.createElement("h1",{style:{textAlign:"center"}},"No Docs"),_react.default.createElement("p",null,"Sorry, but there are no docs for the selected story. To add them, set the story's",_react.default.createElement("code",null,"docs")," parameter. If you think this is an error:"),_react.default.createElement("ul",null,_react.default.createElement("li",null,"Please check the story definition."),_react.default.createElement("li",null,"Please check the Storybook config."),_react.default.createElement("li",null,"Try reloading the page.")),_react.default.createElement("p",null,"If the problem persists, check the browser console, or the terminal you've run Storybook from."))),NoDocs=function NoDocs(){return _ref};exports.NoDocs=NoDocs,NoDocs.displayName="NoDocs"},function(module,exports,__webpack_require__){"use strict";var _global=__webpack_require__(92);_global.window&&(_global.window.STORYBOOK_ENV="react")},function(module,exports,__webpack_require__){"use strict";__webpack_require__(91),__webpack_require__(109),__webpack_require__(110),__webpack_require__(77),__webpack_require__(93),__webpack_require__(386),__webpack_require__(144),__webpack_require__(261),__webpack_require__(387),__webpack_require__(79),__webpack_require__(196),__webpack_require__(112),__webpack_require__(114),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function renderMain(_x){return _renderMain.apply(this,arguments)},__webpack_require__(184);var _global=__webpack_require__(92),_react=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(5)),_reactDom=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(395));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}var rootEl=_global.document?_global.document.getElementById("root"):null,render=function render(node,el){return new Promise((function(resolve){_reactDom.default.render(Object({NODE_ENV:"production",NODE_PATH:"",PUBLIC_URL:"."}).STORYBOOK_EXAMPLE_APP?_react.default.createElement(_react.StrictMode,null,node):node,el,resolve)}))},ErrorBoundary=function(_Component){function ErrorBoundary(){var _getPrototypeOf2,_this;_classCallCheck(this,ErrorBoundary);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ErrorBoundary)).call.apply(_getPrototypeOf2,[this].concat(args)))).state={hasError:!1},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ErrorBoundary,_Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ErrorBoundary,[{key:"componentDidMount",value:function componentDidMount(){var hasError=this.state.hasError,showMain=this.props.showMain;hasError||showMain()}},{key:"componentDidCatch",value:function componentDidCatch(err){(0,this.props.showException)(err)}},{key:"render",value:function render(){var hasError=this.state.hasError,children=this.props.children;return hasError?null:children}}],[{key:"getDerivedStateFromError",value:function getDerivedStateFromError(){return{hasError:!0}}}]),ErrorBoundary}(_react.Component);function _renderMain(){return(_renderMain=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var StoryFn,showMain,showException,forceRender,element;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return StoryFn=_ref.storyFn,showMain=_ref.showMain,showException=_ref.showException,forceRender=_ref.forceRender,element=_react.default.createElement(ErrorBoundary,{showMain:showMain,showException:showException},_react.default.createElement(StoryFn,null)),forceRender||_reactDom.default.unmountComponentAtNode(rootEl),_context.next=5,render(element,rootEl);case 5:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}},,,function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(174),_interopRequireWildcard=__webpack_require__(784);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"self",{enumerable:!0,get:function get(){return _globals.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function get(){return _globals.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function get(){return _globals.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function get(){return _globals.document}}),Object.defineProperty(exports,"process",{enumerable:!0,get:function get(){return _globals.process}}),Object.defineProperty(exports,"console",{enumerable:!0,get:function get(){return _globals.console}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function get(){return _isBrowser.default}}),Object.defineProperty(exports,"isBrowserMainThread",{enumerable:!0,get:function get(){return _isBrowser.isBrowserMainThread}}),Object.defineProperty(exports,"getBrowser",{enumerable:!0,get:function get(){return _getBrowser.default}}),Object.defineProperty(exports,"isMobile",{enumerable:!0,get:function get(){return _getBrowser.isMobile}}),Object.defineProperty(exports,"isElectron",{enumerable:!0,get:function get(){return _isElectron.default}});var _globals=__webpack_require__(401),_isBrowser=_interopRequireWildcard(__webpack_require__(402)),_getBrowser=_interopRequireWildcard(__webpack_require__(785)),_isElectron=_interopRequireDefault(__webpack_require__(281))},function(module,exports,__webpack_require__){var _typeof=__webpack_require__(210);function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return cache},cache}module.exports=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(174);Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMobile=function isMobile(){return void 0!==_globals.window.orientation},exports.default=function getBrowser(mockUserAgent){if(!mockUserAgent&&!(0,_isBrowser.default)())return"Node";if((0,_isElectron.default)(mockUserAgent))return"Electron";var navigator_="undefined"!=typeof navigator?navigator:{},userAgent=mockUserAgent||navigator_.userAgent||"";if(userAgent.indexOf("Edge")>-1)return"Edge";var isMSIE=-1!==userAgent.indexOf("MSIE "),isTrident=-1!==userAgent.indexOf("Trident/");if(isMSIE||isTrident)return"IE";if(_globals.window.chrome)return"Chrome";if(_globals.window.safari)return"Safari";if(_globals.window.mozInnerScreenX)return"Firefox";return"Unknown"};var _globals=__webpack_require__(401),_isBrowser=_interopRequireDefault(__webpack_require__(402)),_isElectron=_interopRequireDefault(__webpack_require__(281))},function(module,exports,__webpack_require__){var SphericalMercator=function(){var cache={},D2R=Math.PI/180,R2D=180/Math.PI,A=6378137,MAXEXTENT=20037508.342789244;function isFloat(n){return Number(n)===n&&n%1!=0}function SphericalMercator(options){if(options=options||{},this.size=options.size||256,!cache[this.size]){var size=this.size,c=cache[this.size]={};c.Bc=[],c.Cc=[],c.zc=[],c.Ac=[];for(var d=0;d<30;d++)c.Bc.push(size/360),c.Cc.push(size/(2*Math.PI)),c.zc.push(size/2),c.Ac.push(size),size*=2}this.Bc=cache[this.size].Bc,this.Cc=cache[this.size].Cc,this.zc=cache[this.size].zc,this.Ac=cache[this.size].Ac}return SphericalMercator.prototype.px=function(ll,zoom){if(isFloat(zoom)){var size=this.size*Math.pow(2,zoom),d=size/2,bc=size/360,cc=size/(2*Math.PI),ac=size,f=Math.min(Math.max(Math.sin(D2R*ll[1]),-.9999),.9999);return(x=d+ll[0]*bc)>ac&&(x=ac),(y=d+.5*Math.log((1+f)/(1-f))*-cc)>ac&&(y=ac),[x,y]}d=this.zc[zoom],f=Math.min(Math.max(Math.sin(D2R*ll[1]),-.9999),.9999);var x=Math.round(d+ll[0]*this.Bc[zoom]),y=Math.round(d+.5*Math.log((1+f)/(1-f))*-this.Cc[zoom]);return x>this.Ac[zoom]&&(x=this.Ac[zoom]),y>this.Ac[zoom]&&(y=this.Ac[zoom]),[x,y]},SphericalMercator.prototype.ll=function(px,zoom){if(isFloat(zoom)){var size=this.size*Math.pow(2,zoom),bc=size/360,cc=size/(2*Math.PI),zc=size/2,g=(px[1]-zc)/-cc;return[(px[0]-zc)/bc,R2D*(2*Math.atan(Math.exp(g))-.5*Math.PI)]}g=(px[1]-this.zc[zoom])/-this.Cc[zoom];return[(px[0]-this.zc[zoom])/this.Bc[zoom],R2D*(2*Math.atan(Math.exp(g))-.5*Math.PI)]},SphericalMercator.prototype.bbox=function(x,y,zoom,tms_style,srs){tms_style&&(y=Math.pow(2,zoom)-1-y);var ll=[x*this.size,(+y+1)*this.size],ur=[(+x+1)*this.size,y*this.size],bbox=this.ll(ll,zoom).concat(this.ll(ur,zoom));return"900913"===srs?this.convert(bbox,"900913"):bbox},SphericalMercator.prototype.xyz=function(bbox,zoom,tms_style,srs){"900913"===srs&&(bbox=this.convert(bbox,"WGS84"));var ll=[bbox[0],bbox[1]],ur=[bbox[2],bbox[3]],px_ll=this.px(ll,zoom),px_ur=this.px(ur,zoom),x=[Math.floor(px_ll[0]/this.size),Math.floor((px_ur[0]-1)/this.size)],y=[Math.floor(px_ur[1]/this.size),Math.floor((px_ll[1]-1)/this.size)],bounds={minX:Math.min.apply(Math,x)<0?0:Math.min.apply(Math,x),minY:Math.min.apply(Math,y)<0?0:Math.min.apply(Math,y),maxX:Math.max.apply(Math,x),maxY:Math.max.apply(Math,y)};if(tms_style){var tms={minY:Math.pow(2,zoom)-1-bounds.maxY,maxY:Math.pow(2,zoom)-1-bounds.minY};bounds.minY=tms.minY,bounds.maxY=tms.maxY}return bounds},SphericalMercator.prototype.convert=function(bbox,to){return"900913"===to?this.forward(bbox.slice(0,2)).concat(this.forward(bbox.slice(2,4))):this.inverse(bbox.slice(0,2)).concat(this.inverse(bbox.slice(2,4)))},SphericalMercator.prototype.forward=function(ll){var xy=[A*ll[0]*D2R,A*Math.log(Math.tan(.25*Math.PI+.5*ll[1]*D2R))];return xy[0]>MAXEXTENT&&(xy[0]=MAXEXTENT),xy[0]<-MAXEXTENT&&(xy[0]=-MAXEXTENT),xy[1]>MAXEXTENT&&(xy[1]=MAXEXTENT),xy[1]<-MAXEXTENT&&(xy[1]=-MAXEXTENT),xy},SphericalMercator.prototype.inverse=function(xy){return[xy[0]*R2D/A,(.5*Math.PI-2*Math.atan(Math.exp(-xy[1]/A)))*R2D]},SphericalMercator}();module.exports=SphericalMercator},function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(788);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},function(module,exports,__webpack_require__){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},,function(module,exports,__webpack_require__){var f;module.exports=((f=function(){function e(a){return c.appendChild(a.dom),a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?"block":"none";l=a}var l=0,c=document.createElement("div");c.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",c.addEventListener("click",(function(a){a.preventDefault(),u(++l%c.children.length)}),!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel("FPS","#0ff","#002")),h=e(new f.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var t=e(new f.Panel("MB","#f08","#201"));return u(0),{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();if(h.update(c-k,200),c>g+1e3&&(r.update(1e3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}}).Panel=function(e,f,l){var c=1/0,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement("canvas");q.width=r,q.height=h,q.style.cssText="width:80px;height:48px";var b=q.getContext("2d");return b.font="bold "+9*a+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=l,b.fillRect(0,0,r,h),b.fillStyle=f,b.fillText(e,t,v),b.fillRect(d,m,n,p),b.fillStyle=l,b.globalAlpha=.9,b.fillRect(d,m,n,p),{dom:q,update:function(h,w){c=Math.min(c,h),k=Math.max(k,h),b.fillStyle=l,b.globalAlpha=1,b.fillRect(0,0,r,m),b.fillStyle=f,b.fillText(g(h)+" "+e+" ("+g(c)+"-"+g(k)+")",t,v),b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p),b.fillRect(d+n-a,m,a,p),b.fillStyle=l,b.globalAlpha=.9,b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}},f)},,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"schemeCategory10",(function(){return category10})),__webpack_require__.d(__webpack_exports__,"schemeAccent",(function(){return Accent})),__webpack_require__.d(__webpack_exports__,"schemeDark2",(function(){return Dark2})),__webpack_require__.d(__webpack_exports__,"schemePaired",(function(){return Paired})),__webpack_require__.d(__webpack_exports__,"schemePastel1",(function(){return Pastel1})),__webpack_require__.d(__webpack_exports__,"schemePastel2",(function(){return Pastel2})),__webpack_require__.d(__webpack_exports__,"schemeSet1",(function(){return Set1})),__webpack_require__.d(__webpack_exports__,"schemeSet2",(function(){return Set2})),__webpack_require__.d(__webpack_exports__,"schemeSet3",(function(){return Set3})),__webpack_require__.d(__webpack_exports__,"schemeTableau10",(function(){return Tableau10})),__webpack_require__.d(__webpack_exports__,"interpolateBrBG",(function(){return BrBG})),__webpack_require__.d(__webpack_exports__,"schemeBrBG",(function(){return BrBG_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePRGn",(function(){return PRGn})),__webpack_require__.d(__webpack_exports__,"schemePRGn",(function(){return PRGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePiYG",(function(){return PiYG})),__webpack_require__.d(__webpack_exports__,"schemePiYG",(function(){return PiYG_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePuOr",(function(){return PuOr})),__webpack_require__.d(__webpack_exports__,"schemePuOr",(function(){return PuOr_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdBu",(function(){return RdBu})),__webpack_require__.d(__webpack_exports__,"schemeRdBu",(function(){return RdBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdGy",(function(){return RdGy})),__webpack_require__.d(__webpack_exports__,"schemeRdGy",(function(){return RdGy_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdYlBu",(function(){return RdYlBu})),__webpack_require__.d(__webpack_exports__,"schemeRdYlBu",(function(){return RdYlBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdYlGn",(function(){return RdYlGn})),__webpack_require__.d(__webpack_exports__,"schemeRdYlGn",(function(){return RdYlGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateSpectral",(function(){return Spectral})),__webpack_require__.d(__webpack_exports__,"schemeSpectral",(function(){return Spectral_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateBuGn",(function(){return BuGn})),__webpack_require__.d(__webpack_exports__,"schemeBuGn",(function(){return BuGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateBuPu",(function(){return BuPu})),__webpack_require__.d(__webpack_exports__,"schemeBuPu",(function(){return BuPu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateGnBu",(function(){return GnBu})),__webpack_require__.d(__webpack_exports__,"schemeGnBu",(function(){return GnBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateOrRd",(function(){return OrRd})),__webpack_require__.d(__webpack_exports__,"schemeOrRd",(function(){return OrRd_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePuBuGn",(function(){return PuBuGn})),__webpack_require__.d(__webpack_exports__,"schemePuBuGn",(function(){return PuBuGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePuBu",(function(){return PuBu})),__webpack_require__.d(__webpack_exports__,"schemePuBu",(function(){return PuBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePuRd",(function(){return PuRd})),__webpack_require__.d(__webpack_exports__,"schemePuRd",(function(){return PuRd_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdPu",(function(){return RdPu})),__webpack_require__.d(__webpack_exports__,"schemeRdPu",(function(){return RdPu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateYlGnBu",(function(){return YlGnBu})),__webpack_require__.d(__webpack_exports__,"schemeYlGnBu",(function(){return YlGnBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateYlGn",(function(){return YlGn})),__webpack_require__.d(__webpack_exports__,"schemeYlGn",(function(){return YlGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateYlOrBr",(function(){return YlOrBr})),__webpack_require__.d(__webpack_exports__,"schemeYlOrBr",(function(){return YlOrBr_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateYlOrRd",(function(){return YlOrRd})),__webpack_require__.d(__webpack_exports__,"schemeYlOrRd",(function(){return YlOrRd_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateBlues",(function(){return Blues})),__webpack_require__.d(__webpack_exports__,"schemeBlues",(function(){return Blues_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateGreens",(function(){return Greens})),__webpack_require__.d(__webpack_exports__,"schemeGreens",(function(){return Greens_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateGreys",(function(){return Greys})),__webpack_require__.d(__webpack_exports__,"schemeGreys",(function(){return Greys_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePurples",(function(){return Purples})),__webpack_require__.d(__webpack_exports__,"schemePurples",(function(){return Purples_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateReds",(function(){return Reds})),__webpack_require__.d(__webpack_exports__,"schemeReds",(function(){return Reds_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateOranges",(function(){return Oranges})),__webpack_require__.d(__webpack_exports__,"schemeOranges",(function(){return Oranges_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateCividis",(function(){return cividis})),__webpack_require__.d(__webpack_exports__,"interpolateCubehelixDefault",(function(){return sequential_multi_cubehelix})),__webpack_require__.d(__webpack_exports__,"interpolateRainbow",(function(){return rainbow})),__webpack_require__.d(__webpack_exports__,"interpolateWarm",(function(){return warm})),__webpack_require__.d(__webpack_exports__,"interpolateCool",(function(){return cool})),__webpack_require__.d(__webpack_exports__,"interpolateSinebow",(function(){return sinebow})),__webpack_require__.d(__webpack_exports__,"interpolateTurbo",(function(){return turbo})),__webpack_require__.d(__webpack_exports__,"interpolateViridis",(function(){return viridis})),__webpack_require__.d(__webpack_exports__,"interpolateMagma",(function(){return magma})),__webpack_require__.d(__webpack_exports__,"interpolateInferno",(function(){return inferno})),__webpack_require__.d(__webpack_exports__,"interpolatePlasma",(function(){return plasma}));var colors=function(specifier){for(var n=specifier.length/6|0,colors=new Array(n),i=0;i<n;)colors[i]="#"+specifier.slice(6*i,6*++i);return colors},category10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Accent=colors("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Dark2=colors("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Paired=colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Pastel1=colors("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Pastel2=colors("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Set1=colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Set2=colors("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Set3=colors("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Tableau10=colors("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),rgb=__webpack_require__(290),ramp=function(scheme){return Object(rgb.b)(scheme[scheme.length-1])},BrBG_scheme=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors),BrBG=ramp(BrBG_scheme),PRGn_scheme=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors),PRGn=ramp(PRGn_scheme),PiYG_scheme=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors),PiYG=ramp(PiYG_scheme),PuOr_scheme=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors),PuOr=ramp(PuOr_scheme),RdBu_scheme=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors),RdBu=ramp(RdBu_scheme),RdGy_scheme=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors),RdGy=ramp(RdGy_scheme),RdYlBu_scheme=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors),RdYlBu=ramp(RdYlBu_scheme),RdYlGn_scheme=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors),RdYlGn=ramp(RdYlGn_scheme),Spectral_scheme=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors),Spectral=ramp(Spectral_scheme),BuGn_scheme=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors),BuGn=ramp(BuGn_scheme),BuPu_scheme=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors),BuPu=ramp(BuPu_scheme),GnBu_scheme=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors),GnBu=ramp(GnBu_scheme),OrRd_scheme=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors),OrRd=ramp(OrRd_scheme),PuBuGn_scheme=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors),PuBuGn=ramp(PuBuGn_scheme),PuBu_scheme=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors),PuBu=ramp(PuBu_scheme),PuRd_scheme=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors),PuRd=ramp(PuRd_scheme),RdPu_scheme=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors),RdPu=ramp(RdPu_scheme),YlGnBu_scheme=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors),YlGnBu=ramp(YlGnBu_scheme),YlGn_scheme=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors),YlGn=ramp(YlGn_scheme),YlOrBr_scheme=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors),YlOrBr=ramp(YlOrBr_scheme),YlOrRd_scheme=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors),YlOrRd=ramp(YlOrRd_scheme),Blues_scheme=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors),Blues=ramp(Blues_scheme),Greens_scheme=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors),Greens=ramp(Greens_scheme),Greys_scheme=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors),Greys=ramp(Greys_scheme),Purples_scheme=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors),Purples=ramp(Purples_scheme),Reds_scheme=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors),Reds=ramp(Reds_scheme),Oranges_scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors),Oranges=ramp(Oranges_scheme),cividis=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},define=__webpack_require__(55),color=__webpack_require__(54),math=__webpack_require__(151),A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);o instanceof color.b||(o=Object(color.g)(o));var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-C*bl)/D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*math.b-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}function cubehelix_cubehelix(h,s,l,opacity){return 1===arguments.length?cubehelixConvert(h):new Cubehelix(h,s,l,null==opacity?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}Object(define.a)(Cubehelix,cubehelix_cubehelix,Object(define.b)(color.a,{brighter:function(k){return k=null==k?color.c:Math.pow(color.c,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?color.d:Math.pow(color.d,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=isNaN(this.h)?0:(this.h+120)*math.a,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new color.b(255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)),this.opacity)}}));var src_color=__webpack_require__(100);function src_cubehelix_cubehelix(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h=hue((start=cubehelix_cubehelix(start)).h,(end=cubehelix_cubehelix(end)).h),s=Object(src_color.a)(start.s,end.s),l=Object(src_color.a)(start.l,end.l),opacity=Object(src_color.a)(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}src_cubehelix_cubehelix(src_color.c);var cubehelixLong=src_cubehelix_cubehelix(src_color.a),sequential_multi_cubehelix=cubehelixLong(cubehelix_cubehelix(300,.5,0),cubehelix_cubehelix(-240,.5,1)),warm=cubehelixLong(cubehelix_cubehelix(-100,.75,.35),cubehelix_cubehelix(80,1.5,.8)),cool=cubehelixLong(cubehelix_cubehelix(260,.75,.35),cubehelix_cubehelix(80,1.5,.8)),c=cubehelix_cubehelix(),rainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var ts=Math.abs(t-.5);return c.h=360*t-100,c.s=1.5-1.5*ts,c.l=.8-.9*ts,c+""},sinebow_c=Object(color.f)(),pi_1_3=Math.PI/3,pi_2_3=2*Math.PI/3,sinebow=function(t){var x;return t=(.5-t)*Math.PI,sinebow_c.r=255*(x=Math.sin(t))*x,sinebow_c.g=255*(x=Math.sin(t+pi_1_3))*x,sinebow_c.b=255*(x=Math.sin(t+pi_2_3))*x,sinebow_c+""},turbo=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"};function viridis_ramp(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var viridis=viridis_ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),magma=viridis_ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=viridis_ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=viridis_ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"dsvFormat",(function(){return dsv})),__webpack_require__.d(__webpack_exports__,"csvParse",(function(){return csvParse})),__webpack_require__.d(__webpack_exports__,"csvParseRows",(function(){return csvParseRows})),__webpack_require__.d(__webpack_exports__,"csvFormat",(function(){return csvFormat})),__webpack_require__.d(__webpack_exports__,"csvFormatBody",(function(){return csvFormatBody})),__webpack_require__.d(__webpack_exports__,"csvFormatRows",(function(){return csvFormatRows})),__webpack_require__.d(__webpack_exports__,"csvFormatRow",(function(){return csvFormatRow})),__webpack_require__.d(__webpack_exports__,"csvFormatValue",(function(){return csvFormatValue})),__webpack_require__.d(__webpack_exports__,"tsvParse",(function(){return tsvParse})),__webpack_require__.d(__webpack_exports__,"tsvParseRows",(function(){return tsvParseRows})),__webpack_require__.d(__webpack_exports__,"tsvFormat",(function(){return tsvFormat})),__webpack_require__.d(__webpack_exports__,"tsvFormatBody",(function(){return tsvFormatBody})),__webpack_require__.d(__webpack_exports__,"tsvFormatRows",(function(){return tsvFormatRows})),__webpack_require__.d(__webpack_exports__,"tsvFormatRow",(function(){return tsvFormatRow})),__webpack_require__.d(__webpack_exports__,"tsvFormatValue",(function(){return tsvFormatValue})),__webpack_require__.d(__webpack_exports__,"autoType",(function(){return autoType}));var EOL={},EOF={};function objectConverter(columns){return new Function("d","return {"+columns.map((function(name,i){return JSON.stringify(name)+": d["+i+'] || ""'})).join(",")+"}")}function inferColumns(rows){var columnSet=Object.create(null),columns=[];return rows.forEach((function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)})),columns}function pad(value,width){var s=value+"",length=s.length;return length<width?new Array(width-length+1).join(0)+s:s}function formatDate(date){var hours=date.getUTCHours(),minutes=date.getUTCMinutes(),seconds=date.getUTCSeconds(),milliseconds=date.getUTCMilliseconds();return isNaN(date)?"Invalid Date":function formatYear(year){return year<0?"-"+pad(-year,6):year>9999?"+"+pad(year,6):pad(year,4)}(date.getUTCFullYear())+"-"+pad(date.getUTCMonth()+1,2)+"-"+pad(date.getUTCDate(),2)+(milliseconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"."+pad(milliseconds,3)+"Z":seconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"Z":minutes||hours?"T"+pad(hours,2)+":"+pad(minutes,2)+"Z":"")}var dsv=function(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF;if(eol)return eol=!1,EOL;var i,c,j=I;if(34===text.charCodeAt(j)){for(;I++<N&&34!==text.charCodeAt(I)||34===text.charCodeAt(++I););return(i=I)>=N?eof=!0:10===(c=text.charCodeAt(I++))?eol=!0:13===c&&(eol=!0,10===text.charCodeAt(I)&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if(10===(c=text.charCodeAt(i=I++)))eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(10===text.charCodeAt(N-1)&&--N,13===text.charCodeAt(N-1)&&--N;(t=token())!==EOF;){for(var row=[];t!==EOL&&t!==EOF;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function preformatBody(rows,columns){return rows.map((function(row){return columns.map((function(column){return formatValue(row[column])})).join(delimiter)}))}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(value){return null==value?"":value instanceof Date?formatDate(value):reFormat.test(value+="")?'"'+value.replace(/"/g,'""')+'"':value}return{parse:function parse(text,f){var convert,columns,rows=parseRows(text,(function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter(row)}));return rows.columns=columns||[],rows},parseRows:parseRows,format:function format(rows,columns){return null==columns&&(columns=inferColumns(rows)),[columns.map(formatValue).join(delimiter)].concat(preformatBody(rows,columns)).join("\n")},formatBody:function formatBody(rows,columns){return null==columns&&(columns=inferColumns(rows)),preformatBody(rows,columns).join("\n")},formatRows:function formatRows(rows){return rows.map(formatRow).join("\n")},formatRow:formatRow,formatValue:formatValue}},csv=dsv(","),csvParse=csv.parse,csvParseRows=csv.parseRows,csvFormat=csv.format,csvFormatBody=csv.formatBody,csvFormatRows=csv.formatRows,csvFormatRow=csv.formatRow,csvFormatValue=csv.formatValue,tsv=dsv("\t"),tsvParse=tsv.parse,tsvParseRows=tsv.parseRows,tsvFormat=tsv.format,tsvFormatBody=tsv.formatBody,tsvFormatRows=tsv.formatRows,tsvFormatRow=tsv.formatRow,tsvFormatValue=tsv.formatValue;function autoType(object){for(var key in object){var number,m,value=object[key].trim();if(value)if("true"===value)value=!0;else if("false"===value)value=!1;else if("NaN"===value)value=NaN;else if(isNaN(number=+value)){if(!(m=value.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;fixtz&&m[4]&&!m[7]&&(value=value.replace(/-/g,"/").replace(/T/," ")),value=new Date(value)}else value=number;else value=null;object[key]=value}return object}var fixtz=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours()},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return stubRemovedMethods}));var _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9);function stubRemovedMethods(instance,className,version,methodNames){var upgradeMessage="See luma.gl ".concat(version," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),prototype=Object.getPrototypeOf(instance);methodNames.forEach((function(methodName){prototype.methodName||(prototype[methodName]=function(){throw _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.g.removed("Calling removed method ".concat(className,".").concat(methodName,": "),upgradeMessage)(),new Error(methodName)})}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return hasFeature})),__webpack_require__.d(__webpack_exports__,"c",(function(){return hasFeatures})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getFeatures}));var _webgl_features_table__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(286),_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(23);function hasFeature(gl,feature){return hasFeatures(gl,feature)}function hasFeatures(gl,features){return(features=Array.isArray(features)?features:[features]).every((function(feature){return isFeatureSupported(gl,feature)}))}function getFeatures(gl){for(var cap in gl.luma=gl.luma||{},gl.luma.caps=gl.luma.caps||{},_webgl_features_table__WEBPACK_IMPORTED_MODULE_0__.b)void 0===gl.luma.caps[cap]&&(gl.luma.caps[cap]=isFeatureSupported(gl,cap));return gl.luma.caps}function isFeatureSupported(gl,cap){return gl.luma=gl.luma||{},gl.luma.caps=gl.luma.caps||{},void 0===gl.luma.caps[cap]&&(gl.luma.caps[cap]=function queryFeature(gl,cap){var isSupported,feature=_webgl_features_table__WEBPACK_IMPORTED_MODULE_0__.b[cap];Object(_utils__WEBPACK_IMPORTED_MODULE_2__.a)(feature,cap);var featureDefinition=Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_1__.f)(gl)&&feature[1]||feature[0];if("function"==typeof featureDefinition)isSupported=featureDefinition(gl);else if(Array.isArray(featureDefinition)){isSupported=!0;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=featureDefinition[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var extension=_step.value;isSupported=isSupported&&Boolean(gl.getExtension(extension))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else"string"==typeof featureDefinition?isSupported=Boolean(gl.getExtension(featureDefinition)):"boolean"==typeof featureDefinition?isSupported=featureDefinition:Object(_utils__WEBPACK_IMPORTED_MODULE_2__.a)(!1);return isSupported}(gl,cap)),gl.luma.caps[cap]||_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_1__.g.log(2,"Feature: ".concat(cap," not supported"))(),gl.luma.caps[cap]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return log_Log}));var esm_typeof=__webpack_require__(14),toConsumableArray=__webpack_require__(15),defineProperty=__webpack_require__(0),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),is_browser=__webpack_require__(214),VERSION="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",isBrowser=Object(is_browser.a)();function getStorage(type){try{var storage=window[type],x="__storage_test__";return storage.setItem(x,x),storage.removeItem(x),storage}catch(e){return null}}var local_storage_LocalStorage=function(){function LocalStorage(id,defaultSettings){var type=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(classCallCheck.a)(this,LocalStorage),this.storage=getStorage(type),this.id=id,this.config={},Object.assign(this.config,defaultSettings),this._loadConfiguration()}return Object(createClass.a)(LocalStorage,[{key:"getConfiguration",value:function getConfiguration(){return this.config}},{key:"setConfiguration",value:function setConfiguration(configuration){return this.config={},this.updateConfiguration(configuration)}},{key:"updateConfiguration",value:function updateConfiguration(configuration){if(Object.assign(this.config,configuration),this.storage){var serialized=JSON.stringify(this.config);this.storage.setItem(this.id,serialized)}return this}},{key:"_loadConfiguration",value:function _loadConfiguration(){var configuration={};if(this.storage){var serializedConfiguration=this.storage.getItem(this.id);configuration=serializedConfiguration?JSON.parse(serializedConfiguration):{}}return Object.assign(this.config,configuration),this}}]),LocalStorage}();function formatImage(image,message,scale){var maxWidth=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,imageUrl=image.src.replace(/\(/g,"%28").replace(/\)/g,"%29");image.width>maxWidth&&(scale=Math.min(scale,maxWidth/image.width));var width=image.width*scale,height=image.height*scale,style=["font-size:1px;","padding:".concat(Math.floor(height/2),"px ").concat(Math.floor(width/2),"px;"),"line-height:".concat(height,"px;"),"background:url(".concat(imageUrl,");"),"background-size:".concat(width,"px ").concat(height,"px;"),"color:transparent;"].join("");return["".concat(message," %c+"),style]}var COLOR={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function getColor(color){return"string"==typeof color?COLOR[color.toUpperCase()]||COLOR.WHITE:color}function _createForOfIteratorHelper(o){if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(o=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))){var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var it,err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function autobind(obj){var _step,predefined=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],proto=Object.getPrototypeOf(obj),propNames=Object.getOwnPropertyNames(proto),_iterator=_createForOfIteratorHelper(propNames);try{var _loop=function _loop(){var key=_step.value;"function"==typeof obj[key]&&(predefined.find((function(name){return key===name}))||(obj[key]=obj[key].bind(obj)))};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}function assert_assert(condition,message){if(!condition)throw new Error(message||"Assertion failed")}var globals=__webpack_require__(64);function getHiResTimestamp(){var timestamp;if(isBrowser&&globals.b.performance)timestamp=globals.b.performance.now();else if(globals.a.hrtime){var timeParts=globals.a.hrtime();timestamp=1e3*timeParts[0]+timeParts[1]/1e6}else timestamp=Date.now();return timestamp}var originalConsole={debug:isBrowser&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},DEFAULT_SETTINGS={enabled:!0,level:0};function noop(){}var cache={},ONCE={once:!0};function getTableHeader(table){for(var key in table)for(var title in table[key])return title||"untitled";return"empty"}var log_Log=function(){function Log(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},id=_ref.id;Object(classCallCheck.a)(this,Log),this.id=id,this.VERSION=VERSION,this._startTs=getHiResTimestamp(),this._deltaTs=getHiResTimestamp(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new local_storage_LocalStorage("__probe-".concat(this.id,"__"),DEFAULT_SETTINGS),this.userData={},this.timeStamp("".concat(this.id," started")),autobind(this),Object.seal(this)}return Object(createClass.a)(Log,[{key:"isEnabled",value:function isEnabled(){return this._storage.config.enabled}},{key:"getLevel",value:function getLevel(){return this._storage.config.level}},{key:"getTotal",value:function getTotal(){return Number((getHiResTimestamp()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function getDelta(){return Number((getHiResTimestamp()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function getPriority(){return this.level}},{key:"enable",value:function enable(){var enabled=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:enabled}),this}},{key:"setLevel",value:function setLevel(level){return this._storage.updateConfiguration({level:level}),this}},{key:"assert",value:function assert(condition,message){assert_assert(condition,message)}},{key:"warn",value:function warn(message){return this._getLogFunction(0,message,originalConsole.warn,arguments,ONCE)}},{key:"error",value:function error(message){return this._getLogFunction(0,message,originalConsole.error,arguments)}},{key:"deprecated",value:function deprecated(oldUsage,newUsage){return this.warn("`".concat(oldUsage,"` is deprecated and will be removed in a later version. Use `").concat(newUsage,"` instead"))}},{key:"removed",value:function removed(oldUsage,newUsage){return this.error("`".concat(oldUsage,"` has been removed. Use `").concat(newUsage,"` instead"))}},{key:"probe",value:function probe(logLevel,message){return this._getLogFunction(logLevel,message,originalConsole.log,arguments,{time:!0,once:!0})}},{key:"log",value:function log(logLevel,message){return this._getLogFunction(logLevel,message,originalConsole.debug,arguments)}},{key:"info",value:function info(logLevel,message){return this._getLogFunction(logLevel,message,console.info,arguments)}},{key:"once",value:function once(logLevel,message){return this._getLogFunction(logLevel,message,originalConsole.debug||originalConsole.info,arguments,ONCE)}},{key:"table",value:function table(logLevel,_table,columns){return _table?this._getLogFunction(logLevel,_table,console.table||noop,columns&&[columns],{tag:getTableHeader(_table)}):noop}},{key:"image",value:function image(_ref2){var logLevel=_ref2.logLevel,priority=_ref2.priority,_image=_ref2.image,_ref2$message=_ref2.message,message=void 0===_ref2$message?"":_ref2$message,_ref2$scale=_ref2.scale,scale=void 0===_ref2$scale?1:_ref2$scale;return this._shouldLog(logLevel||priority)?isBrowser?function logImageInBrowser(_ref4){var image=_ref4.image,_ref4$message=_ref4.message,message=void 0===_ref4$message?"":_ref4$message,_ref4$scale=_ref4.scale,scale=void 0===_ref4$scale?1:_ref4$scale;if("string"==typeof image){var img=new Image;return img.onload=function(){var _console,args=formatImage(img,message,scale);(_console=console).log.apply(_console,Object(toConsumableArray.a)(args))},img.src=image,noop}var element=image.nodeName||"";if("img"===element.toLowerCase()){var _console2;return(_console2=console).log.apply(_console2,Object(toConsumableArray.a)(formatImage(image,message,scale))),noop}if("canvas"===element.toLowerCase()){var _img=new Image;return _img.onload=function(){var _console3;return(_console3=console).log.apply(_console3,Object(toConsumableArray.a)(formatImage(_img,message,scale)))},_img.src=image.toDataURL(),noop}return noop}({image:_image,message:message,scale:scale}):function logImageInNode(_ref3){var image=_ref3.image,_ref3$scale=(_ref3.message,_ref3.scale),scale=void 0===_ref3$scale?1:_ref3$scale,asciify=null;try{asciify=__webpack_require__(782)}catch(error){}if(asciify)return function(){return asciify(image,{fit:"box",width:"".concat(Math.round(80*scale),"%")}).then((function(data){return console.log(data)}))};return noop}({image:_image,message:message,scale:scale}):noop}},{key:"settings",value:function settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function get(setting){return this._storage.config[setting]}},{key:"set",value:function set(setting,value){this._storage.updateConfiguration(Object(defineProperty.a)({},setting,value))}},{key:"time",value:function time(logLevel,message){return this._getLogFunction(logLevel,message,console.time?console.time:console.info)}},{key:"timeEnd",value:function timeEnd(logLevel,message){return this._getLogFunction(logLevel,message,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function timeStamp(logLevel,message){return this._getLogFunction(logLevel,message,console.timeStamp||noop)}},{key:"group",value:function group(logLevel,message){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},_opts=opts=normalizeArguments({logLevel:logLevel,message:message,opts:opts}),collapsed=_opts.collapsed;return opts.method=(collapsed?console.groupCollapsed:console.group)||console.info,this._getLogFunction(opts)}},{key:"groupCollapsed",value:function groupCollapsed(logLevel,message){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(logLevel,message,Object.assign({},opts,{collapsed:!0}))}},{key:"groupEnd",value:function groupEnd(logLevel){return this._getLogFunction(logLevel,"",console.groupEnd||noop)}},{key:"withGroup",value:function withGroup(logLevel,message,func){this.group(logLevel,message)();try{func()}finally{this.groupEnd(logLevel)()}}},{key:"trace",value:function trace(){console.trace&&console.trace()}},{key:"_shouldLog",value:function _shouldLog(logLevel){return this.isEnabled()&&this.getLevel()>=normalizeLogLevel(logLevel)}},{key:"_getLogFunction",value:function _getLogFunction(logLevel,message,method){var args=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],opts=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(logLevel)){var _method;opts=normalizeArguments({logLevel:logLevel,message:message,args:args,opts:opts}),assert_assert(method=method||opts.method),opts.total=this.getTotal(),opts.delta=this.getDelta(),this._deltaTs=getHiResTimestamp();var tag=opts.tag||opts.message;if(opts.once){if(cache[tag])return noop;cache[tag]=getHiResTimestamp()}return message=decorateMessage(this.id,opts.message,opts),(_method=method).bind.apply(_method,[console,message].concat(Object(toConsumableArray.a)(opts.args)))}return noop}},{key:"level",set:function set(newLevel){this.setLevel(newLevel)},get:function get(){return this.getLevel()}},{key:"priority",set:function set(newPriority){this.level=newPriority},get:function get(){return this.level}}]),Log}();function normalizeLogLevel(logLevel){if(!logLevel)return 0;var resolvedLevel;switch(Object(esm_typeof.a)(logLevel)){case"number":resolvedLevel=logLevel;break;case"object":resolvedLevel=logLevel.logLevel||logLevel.priority||0;break;default:return 0}return assert_assert(Number.isFinite(resolvedLevel)&&resolvedLevel>=0),resolvedLevel}function normalizeArguments(opts){var logLevel=opts.logLevel,message=opts.message;opts.logLevel=normalizeLogLevel(logLevel);for(var args=opts.args?Array.from(opts.args):[];args.length&&args.shift()!==message;);switch(opts.args=args,Object(esm_typeof.a)(logLevel)){case"string":case"function":void 0!==message&&args.unshift(message),opts.message=logLevel;break;case"object":Object.assign(opts,logLevel)}"function"==typeof opts.message&&(opts.message=opts.message());var messageType=Object(esm_typeof.a)(opts.message);return assert_assert("string"===messageType||"object"===messageType),Object.assign(opts,opts.opts)}function decorateMessage(id,message,opts){if("string"==typeof message){var time=opts.time?function leftPad(string){var length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,padLength=Math.max(length-string.length,0);return"".concat(" ".repeat(padLength)).concat(string)}(function formatTime(ms){return ms<10?"".concat(ms.toFixed(2),"ms"):ms<100?"".concat(ms.toFixed(1),"ms"):ms<1e3?"".concat(ms.toFixed(0),"ms"):"".concat((ms/1e3).toFixed(2),"s")}(opts.total)):"";message=function addColor(string,color,background){return isBrowser||"string"!=typeof string||(color&&(color=getColor(color),string="[".concat(color,"m").concat(string,"[39m")),background&&(color=getColor(background),string="[".concat(background+10,"m").concat(string,"[49m"))),string}(message=opts.time?"".concat(id,": ").concat(time,"  ").concat(message):"".concat(id,": ").concat(message),opts.color,opts.background)}return message}log_Log.VERSION=VERSION},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return stats_Stats}));var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),hi_res_timestamp=__webpack_require__(175),stat_Stat=function(){function Stat(name,type){Object(classCallCheck.a)(this,Stat),this.name=name,this.type=type,this.sampleSize=1,this.reset()}return Object(createClass.a)(Stat,[{key:"setSampleSize",value:function setSampleSize(samples){return this.sampleSize=samples,this}},{key:"incrementCount",value:function incrementCount(){return this.addCount(1),this}},{key:"decrementCount",value:function decrementCount(){return this.subtractCount(1),this}},{key:"addCount",value:function addCount(value){return this._count+=value,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function subtractCount(value){return this._count-=value,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function addTime(time){return this._time+=time,this.lastTiming=time,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function timeStart(){return this._startTime=Object(hi_res_timestamp.a)(),this._timerPending=!0,this}},{key:"timeEnd",value:function timeEnd(){return this._timerPending?(this.addTime(Object(hi_res_timestamp.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function getAverageCount(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function getAverageTime(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function getHz(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function _checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),Stat}(),stats_Stats=function(){function Stats(_ref){var id=_ref.id,stats=_ref.stats;Object(classCallCheck.a)(this,Stats),this.id=id,this.stats={},this._initializeStats(stats),Object.seal(this)}return Object(createClass.a)(Stats,[{key:"get",value:function get(name){var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:name,type:type})}},{key:"reset",value:function reset(){for(var key in this.stats)this.stats[key].reset();return this}},{key:"forEach",value:function forEach(fn){for(var key in this.stats)fn(this.stats[key])}},{key:"getTable",value:function getTable(){var table={};return this.forEach((function(stat){table[stat.name]={time:stat.time||0,count:stat.count||0,average:stat.getAverageTime()||0,hz:stat.getHz()||0}})),table}},{key:"_initializeStats",value:function _initializeStats(){var _this=this,stats=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];stats.forEach((function(stat){return _this._getOrCreate(stat)}))}},{key:"_getOrCreate",value:function _getOrCreate(stat){if(!stat||!stat.name)return null;var name=stat.name,type=stat.type;return this.stats[name]||(this.stats[name]=stat instanceof stat_Stat?stat:new stat_Stat(name,type)),this.stats[name]}},{key:"size",get:function get(){return Object.keys(this.stats).length}}]),Stats}()},,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TransformFeedback}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8),_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9),_resource__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(48),_buffer__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(41),_webgl_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(102),_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(154),TransformFeedback=function(_Resource){function TransformFeedback(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,TransformFeedback),Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_9__.a)(gl),(_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__.a)(TransformFeedback).call(this,gl,props))).initialize(props),_this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__.a)(_this)),_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__.a)(TransformFeedback,_Resource),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(TransformFeedback,null,[{key:"isSupported",value:function isSupported(gl){return Object(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_6__.f)(gl)}}]),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(TransformFeedback,[{key:"initialize",value:function initialize(){var _this2=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(_utils__WEBPACK_IMPORTED_MODULE_10__.a)(this.buffers)||this.bind((function(){return _this2._unbindBuffers()})),this.setProps(props),this}},{key:"setProps",value:function setProps(props){"program"in props&&(this.configuration=props.program&&props.program.configuration),"configuration"in props&&(this.configuration=props.configuration),"bindOnUse"in props&&(props=props.bindOnUse),"buffers"in props&&this.setBuffers(props.buffers)}},{key:"setBuffers",value:function setBuffers(){var _this3=this,buffers=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var bufferName in buffers)_this3.setBuffer(bufferName,buffers[bufferName])})),this}},{key:"setBuffer",value:function setBuffer(locationOrName,bufferOrParams){var _this4=this,location=this._getVaryingIndex(locationOrName),_this$_getBufferParam=this._getBufferParams(bufferOrParams),buffer=_this$_getBufferParam.buffer,byteSize=_this$_getBufferParam.byteSize,byteOffset=_this$_getBufferParam.byteOffset;return location<0?(this.unused[locationOrName]=buffer,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_6__.g.warn((function(){return"".concat(_this4.id," unused varying buffer ").concat(locationOrName)}))(),this):(this.buffers[location]=bufferOrParams,this.bindOnUse||this._bindBuffer(location,buffer,byteOffset,byteSize),this)}},{key:"begin",value:function begin(){var primitiveMode=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(primitiveMode),this}},{key:"end",value:function end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function _getBufferParams(bufferOrParams){var byteOffset,byteSize,buffer;return bufferOrParams instanceof _buffer__WEBPACK_IMPORTED_MODULE_8__.a==!1?(buffer=bufferOrParams.buffer,byteSize=bufferOrParams.byteSize,byteOffset=bufferOrParams.byteOffset):buffer=bufferOrParams,void 0===byteOffset&&void 0===byteSize||(byteOffset=byteOffset||0,byteSize=byteSize||buffer.byteLength-byteOffset),{buffer:buffer,byteOffset:byteOffset,byteSize:byteSize}}},{key:"_getVaryingInfo",value:function _getVaryingInfo(locationOrName){return this.configuration&&this.configuration.getVaryingInfo(locationOrName)}},{key:"_getVaryingIndex",value:function _getVaryingIndex(locationOrName){if(this.configuration)return this.configuration.getVaryingInfo(locationOrName).location;var location=Number(locationOrName);return Number.isFinite(location)?location:-1}},{key:"_bindBuffers",value:function _bindBuffers(){if(this.bindOnUse)for(var bufferIndex in this.buffers){var _this$_getBufferParam2=this._getBufferParams(this.buffers[bufferIndex]),buffer=_this$_getBufferParam2.buffer,byteSize=_this$_getBufferParam2.byteSize,byteOffset=_this$_getBufferParam2.byteOffset;this._bindBuffer(bufferIndex,buffer,byteOffset,byteSize)}}},{key:"_unbindBuffers",value:function _unbindBuffers(){if(this.bindOnUse)for(var bufferIndex in this.buffers)this._bindBuffer(bufferIndex,null)}},{key:"_bindBuffer",value:function _bindBuffer(index,buffer){var byteOffset=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,byteSize=arguments.length>3?arguments[3]:void 0,handle=buffer&&buffer.handle;return handle&&void 0!==byteSize?this.gl.bindBufferRange(35982,index,handle,byteOffset,byteSize):this.gl.bindBufferBase(35982,index,handle),this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function _bindHandle(handle){this.gl.bindTransformFeedback(36386,this.handle)}}]),TransformFeedback}(_resource__WEBPACK_IMPORTED_MODULE_7__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Geometry}));var _babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(216),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_luma_gl_webgl__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(154),_luma_gl_webgl__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(23),DRAW_MODE={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Geometry=function(){function Geometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,Geometry);var _props$id=props.id,id=void 0===_props$id?Object(_luma_gl_webgl__WEBPACK_IMPORTED_MODULE_3__.c)("geometry"):_props$id,_props$drawMode=props.drawMode,drawMode=void 0===_props$drawMode?DRAW_MODE.TRIANGLES:_props$drawMode,_props$attributes=props.attributes,attributes=void 0===_props$attributes?{}:_props$attributes,_props$indices=props.indices,indices=void 0===_props$indices?null:_props$indices,_props$vertexCount=props.vertexCount,vertexCount=void 0===_props$vertexCount?null:_props$vertexCount;this.id=id,this.drawMode=0|drawMode,this.attributes={},this.userData={},this._setAttributes(attributes,indices),this.vertexCount=vertexCount||this._calculateVertexCount(this.attributes,this.indices)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(Geometry,null,[{key:"DRAW_MODE",get:function get(){return DRAW_MODE}}]),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(Geometry,[{key:"getVertexCount",value:function getVertexCount(){return this.vertexCount}},{key:"getAttributes",value:function getAttributes(){return this.indices?Object(_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function _print(attributeName){return"Geometry ".concat(this.id," attribute ").concat(attributeName)}},{key:"_setAttributes",value:function _setAttributes(attributes,indices){for(var attributeName in indices&&(this.indices=ArrayBuffer.isView(indices)?{value:indices,size:1}:indices),attributes){var attribute=attributes[attributeName];attribute=ArrayBuffer.isView(attribute)?{value:attribute}:attribute,Object(_luma_gl_webgl__WEBPACK_IMPORTED_MODULE_4__.a)(ArrayBuffer.isView(attribute.value),"".concat(this._print(attributeName),": must be typed array or object with value as typed array")),"POSITION"!==attributeName&&"positions"!==attributeName||attribute.size||(attribute.size=3),"indices"===attributeName?(Object(_luma_gl_webgl__WEBPACK_IMPORTED_MODULE_4__.a)(!this.indices),this.indices=attribute):this.attributes[attributeName]=attribute}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function _calculateVertexCount(attributes,indices){if(indices)return indices.value.length;var vertexCount=1/0;for(var attributeName in attributes){var attribute=attributes[attributeName],value=attribute.value,size=attribute.size;!attribute.constant&&value&&size>=1&&(vertexCount=Math.min(vertexCount,value.length/size))}return Object(_luma_gl_webgl__WEBPACK_IMPORTED_MODULE_4__.a)(Number.isFinite(vertexCount)),vertexCount}},{key:"mode",get:function get(){return this.drawMode}}]),Geometry}()},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,process){__webpack_require__.d(__webpack_exports__,"a",(function(){return global_})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isBrowser})),__webpack_require__.d(__webpack_exports__,"c",(function(){return nodeVersion}));var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global&&global,document:"undefined"!=typeof document&&document},global_=globals.global||globals.self||globals.window,isBrowser="object"!==(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))||"[object process]"!==String(process)||process.browser,matches=void 0!==process&&process.version&&process.version.match(/v([0-9]*)/),nodeVersion=matches&&parseFloat(matches[1])||0}).call(this,__webpack_require__(43),__webpack_require__(58))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return hcl}));var _define_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(55),_color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(54),_math_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(151),t1=6/29,t2=3*t1*t1;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl)return hcl2lab(o);o instanceof _color_js__WEBPACK_IMPORTED_MODULE_1__.b||(o=Object(_color_js__WEBPACK_IMPORTED_MODULE_1__.g)(o));var x,z,r=rgb2lrgb(o.r),g=rgb2lrgb(o.g),b=rgb2lrgb(o.b),y=xyz2lab((.2225045*r+.7168786*g+.0606169*b)/1);return r===g&&g===b?x=z=y:(x=xyz2lab((.4360747*r+.3850649*g+.1430804*b)/.96422),z=xyz2lab((.0139322*r+.0971045*g+.7141733*b)/.82521)),new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity)}function Lab(l,a,b,opacity){this.l=+l,this.a=+a,this.b=+b,this.opacity=+opacity}function xyz2lab(t){return t>.008856451679035631?Math.pow(t,1/3):t/t2+4/29}function lab2xyz(t){return t>t1?t*t*t:t2*(t-4/29)}function lrgb2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2lrgb(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);if(o instanceof Lab||(o=labConvert(o)),0===o.a&&0===o.b)return new Hcl(NaN,0<o.l&&o.l<100?0:NaN,o.l,o.opacity);var h=Math.atan2(o.b,o.a)*_math_js__WEBPACK_IMPORTED_MODULE_2__.b;return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function hcl(h,c,l,opacity){return 1===arguments.length?hclConvert(h):new Hcl(h,c,l,null==opacity?1:opacity)}function Hcl(h,c,l,opacity){this.h=+h,this.c=+c,this.l=+l,this.opacity=+opacity}function hcl2lab(o){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h=o.h*_math_js__WEBPACK_IMPORTED_MODULE_2__.a;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.a)(Lab,(function lab(l,a,b,opacity){return 1===arguments.length?labConvert(l):new Lab(l,a,b,null==opacity?1:opacity)}),Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.b)(_color_js__WEBPACK_IMPORTED_MODULE_1__.a,{brighter:function(k){return new Lab(this.l+18*(null==k?1:k),this.a,this.b,this.opacity)},darker:function(k){return new Lab(this.l-18*(null==k?1:k),this.a,this.b,this.opacity)},rgb:function(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;return x=.96422*lab2xyz(x),y=1*lab2xyz(y),z=.82521*lab2xyz(z),new _color_js__WEBPACK_IMPORTED_MODULE_1__.b(lrgb2rgb(3.1338561*x-1.6168667*y-.4906146*z),lrgb2rgb(-.9787684*x+1.9161415*y+.033454*z),lrgb2rgb(.0719453*x-.2289914*y+1.4052427*z),this.opacity)}})),Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.a)(Hcl,hcl,Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.b)(_color_js__WEBPACK_IMPORTED_MODULE_1__.a,{brighter:function(k){return new Hcl(this.h,this.c,this.l+18*(null==k?1:k),this.opacity)},darker:function(k){return new Hcl(this.h,this.c,this.l-18*(null==k?1:k),this.opacity)},rgb:function(){return hcl2lab(this).rgb()}}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=function(a,b){return a=+a,b=+b,function(t){return Math.round(a*(1-t)+b*t)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return tickIncrement})),__webpack_require__.d(__webpack_exports__,"c",(function(){return tickStep}));var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),stop<start?-step1:step1}__webpack_exports__.a=function(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)===(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement(start,stop,count))||!isFinite(step))return[];if(step>0)for(start=Math.ceil(start/step),stop=Math.floor(stop/step),ticks=new Array(n=Math.ceil(stop-start+1));++i<n;)ticks[i]=(start+i)*step;else for(step=-step,start=Math.floor(start*step),stop=Math.ceil(stop*step),ticks=new Array(n=Math.ceil(stop-start+1));++i<n;)ticks[i]=(start+i)/step;return reverse&&ticks.reverse(),ticks}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=function(values,valueof){let min,max;if(void 0===valueof)for(const value of values)null!=value&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)));else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)))}return[min,max]}},function(module,__webpack_exports__,__webpack_require__){"use strict";function max(values,valueof){let max;if(void 0===valueof)for(const value of values)null!=value&&(max<value||void 0===max&&value>=value)&&(max=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(max<value||void 0===max&&value>=value)&&(max=value)}return max}__webpack_require__.d(__webpack_exports__,"a",(function(){return max}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CompositeLayer}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(22),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8),_layer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(220),_debug__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(36),_utils_flatten__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(116),CompositeLayer=function(_Layer){function CompositeLayer(){return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,CompositeLayer),Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(CompositeLayer).apply(this,arguments))}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__.a)(CompositeLayer,_Layer),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(CompositeLayer,[{key:"getSubLayers",value:function getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function initializeState(){}},{key:"setState",value:function setState(updateObject){Object(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(CompositeLayer.prototype),"setState",this).call(this,updateObject),this.setNeedsUpdate()}},{key:"getPickingInfo",value:function getPickingInfo(_ref){var info=_ref.info,object=info.object;return object&&object.__source&&object.__source.parent&&object.__source.parent.id===this.id?Object.assign(info,{object:object.__source.object,index:object.__source.index}):info}},{key:"renderLayers",value:function renderLayers(){return null}},{key:"shouldRenderSubLayer",value:function shouldRenderSubLayer(id,data){var overridingProps=this.props._subLayerProps;return data&&data.length||overridingProps&&overridingProps[id]}},{key:"getSubLayerClass",value:function getSubLayerClass(id,DefaultLayerClass){var overridingProps=this.props._subLayerProps;return overridingProps&&overridingProps[id]&&overridingProps[id].type||DefaultLayerClass}},{key:"getSubLayerRow",value:function getSubLayerRow(row,sourceObject,sourceObjectIndex){return row.__source={parent:this,object:sourceObject,index:sourceObjectIndex},row}},{key:"getSubLayerAccessor",value:function getSubLayerAccessor(accessor){if("function"==typeof accessor){var objectInfo={data:this.props.data,target:[]};return function(x,i){return x.__source?(objectInfo.index=x.__source.index,accessor(x.__source.object,objectInfo)):accessor(x,i)}}return accessor}},{key:"getSubLayerProps",value:function getSubLayerProps(){var sublayerProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$props=this.props,opacity=_this$props.opacity,pickable=_this$props.pickable,visible=_this$props.visible,parameters=_this$props.parameters,getPolygonOffset=_this$props.getPolygonOffset,highlightedObjectIndex=_this$props.highlightedObjectIndex,autoHighlight=_this$props.autoHighlight,highlightColor=_this$props.highlightColor,coordinateSystem=_this$props.coordinateSystem,coordinateOrigin=_this$props.coordinateOrigin,wrapLongitude=_this$props.wrapLongitude,positionFormat=_this$props.positionFormat,modelMatrix=_this$props.modelMatrix,extensions=_this$props.extensions,overridingProps=_this$props._subLayerProps,newProps={opacity:opacity,pickable:pickable,visible:visible,parameters:parameters,getPolygonOffset:getPolygonOffset,highlightedObjectIndex:highlightedObjectIndex,autoHighlight:autoHighlight,highlightColor:highlightColor,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,wrapLongitude:wrapLongitude,positionFormat:positionFormat,modelMatrix:modelMatrix,extensions:extensions},overridingSublayerProps=overridingProps&&overridingProps[sublayerProps.id],overridingSublayerTriggers=overridingSublayerProps&&overridingSublayerProps.updateTriggers,sublayerId=sublayerProps.id||"sublayer";if(overridingSublayerProps){var propTypes=this.constructor._propTypes;for(var key in overridingSublayerProps){var propType=propTypes[key];propType&&"accessor"===propType.type&&(overridingSublayerProps[key]=this.getSubLayerAccessor(overridingSublayerProps[key]))}}Object.assign(newProps,sublayerProps,overridingSublayerProps,{id:"".concat(this.props.id,"-").concat(sublayerId),updateTriggers:Object.assign({all:this.props.updateTriggers.all},sublayerProps.updateTriggers,overridingSublayerTriggers)});var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=extensions[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var extension=_step.value,passThroughProps=extension.getSubLayerProps.call(this,extension);passThroughProps&&Object.assign(newProps,passThroughProps,{updateTriggers:Object.assign(newProps.updateTriggers,passThroughProps.updateTriggers)})}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return newProps}},{key:"_getAttributeManager",value:function _getAttributeManager(){return null}},{key:"_renderLayers",value:function _renderLayers(){var subLayers=this.internalState.subLayers,shouldUpdate=!subLayers||this.needsUpdate();shouldUpdate&&(subLayers=this.renderLayers(),subLayers=Object(_utils_flatten__WEBPACK_IMPORTED_MODULE_8__.b)(subLayers,Boolean),this.internalState.subLayers=subLayers),Object(_debug__WEBPACK_IMPORTED_MODULE_7__.a)("compositeLayer.renderLayers",this,shouldUpdate,subLayers);var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=subLayers[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){_step2.value.parent=this}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}},{key:"isComposite",get:function get(){return!0}},{key:"isLoaded",get:function get(){return Object(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(CompositeLayer.prototype),"isLoaded",this)&&this.getSubLayers().every((function(layer){return layer.isLoaded}))}}]),CompositeLayer}(_layer__WEBPACK_IMPORTED_MODULE_6__.a);CompositeLayer.layerName="CompositeLayer"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return load}));var regenerator=__webpack_require__(10),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(17),esm_typeof=__webpack_require__(14),isBoolean=function isBoolean(x){return"boolean"==typeof x},isFunction=function isFunction(x){return"function"==typeof x},is_type_isObject=function isObject(x){return null!==x&&"object"===Object(esm_typeof.a)(x)},isIterable=function isIterable(x){return x&&"function"==typeof x[Symbol.iterator]},isAsyncIterable=function isAsyncIterable(x){return x&&"function"==typeof x[Symbol.asyncIterator]},isResponse=function isResponse(x){return"undefined"!=typeof Response&&x instanceof Response||x&&x.arrayBuffer&&x.text&&x.json},isBlob=function isBlob(x){return"undefined"!=typeof Blob&&x instanceof Blob},isReadableStream=function isReadableStream(x){return function isReadableDOMStream(x){return"undefined"!=typeof ReadableStream&&x instanceof ReadableStream||is_type_isObject(x)&&isFunction(x.tee)&&isFunction(x.cancel)&&isFunction(x.getReader)}(x)||function isReadableNodeStream(x){return is_type_isObject(x)&&isFunction(x.read)&&isFunction(x.pipe)&&isBoolean(x.readable)}(x)},pathPrefix="",fileAliases={};function resolvePath(filename){for(var alias in fileAliases)if(filename.startsWith(alias)){var replacement=fileAliases[alias];filename=filename.replace(alias,replacement)}return filename.startsWith("http://")||filename.startsWith("https://")||(filename="".concat(pathPrefix).concat(filename)),filename}var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),assert=__webpack_require__(181),fetch_file_browser_FileReadableResponse=function(){function FileReadableResponse(fileOrBlob,options){Object(classCallCheck.a)(this,FileReadableResponse),this._fileOrBlob=fileOrBlob,this.bodyUsed=!1}var _json,_text,_arrayBuffer;return Object(createClass.a)(FileReadableResponse,[{key:"arrayBuffer",value:(_arrayBuffer=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(){var _this$_getFileReader,reader,promise;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _this$_getFileReader=this._getFileReader(),reader=_this$_getFileReader.reader,promise=_this$_getFileReader.promise,reader.readAsArrayBuffer(this._fileOrBlob),_context.abrupt("return",promise);case 3:case"end":return _context.stop()}}),_callee,this)}))),function arrayBuffer(){return _arrayBuffer.apply(this,arguments)})},{key:"text",value:(_text=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(){var _this$_getFileReader2,reader,promise;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _this$_getFileReader2=this._getFileReader(),reader=_this$_getFileReader2.reader,promise=_this$_getFileReader2.promise,reader.readAsText(this._fileOrBlob),_context2.abrupt("return",promise);case 3:case"end":return _context2.stop()}}),_callee2,this)}))),function text(){return _text.apply(this,arguments)})},{key:"json",value:(_json=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee3(){var text;return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,this.text();case 2:return text=_context3.sent,_context3.abrupt("return",JSON.parse(text));case 4:case"end":return _context3.stop()}}),_callee3,this)}))),function json(){return _json.apply(this,arguments)})},{key:"_getFileReader",value:function _getFileReader(){Object(assert.a)(!this.bodyUsed),this.bodyUsed=!0;var reader=new FileReader,promise=new Promise((function(resolve,reject){try{reader.onerror=function(_){return reject(new Error("Read error"))},reader.onabort=function(){return reject(new Error("Read aborted."))},reader.onload=function(){return resolve(reader.result)}}catch(error){reject(error)}}));return{reader:reader,promise:promise}}},{key:"headers",get:function get(){return new Headers({"Content-Length":this._fileOrBlob.size,"Content-Type":this._fileOrBlob.type})}},{key:"ok",get:function get(){return!0}},{key:"status",get:function get(){return 200}},{key:"url",get:function get(){return this._fileOrBlob.name||""}}]),FileReadableResponse}();function fetchFileReadable(fileOrBlob,options){return Promise.resolve(new fetch_file_browser_FileReadableResponse(fileOrBlob,options))}function getErrorMessageFromResponse(_x){return _getErrorMessageFromResponse.apply(this,arguments)}function _getErrorMessageFromResponse(){return(_getErrorMessageFromResponse=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(response){var message;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(message="Failed to fetch resource ".concat(response.url," (").concat(response.status,"): "),_context.prev=1,!response.headers.get("Content-Type").includes("application/json")){_context.next=10;break}return _context.t0=message,_context.next=7,response.text();case 7:message=_context.t0+=_context.sent,_context.next=11;break;case 10:message+=response.statusText;case 11:_context.next=16;break;case 13:return _context.prev=13,_context.t1=_context.catch(1),_context.abrupt("return",message);case 16:return _context.abrupt("return",message);case 17:case"end":return _context.stop()}}),_callee,null,[[1,13]])})))).apply(this,arguments)}function fetchFile(_x){return _fetchFile.apply(this,arguments)}function _fetchFile(){return(_fetchFile=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(url){var options,response,_args=arguments;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(options=_args.length>1&&void 0!==_args[1]?_args[1]:{},!isBlob(url)){_context.next=3;break}return _context.abrupt("return",fetchFileReadable(url,options));case 3:return url=resolvePath(url),_context.next=6,fetch(url,options);case 6:if((response=_context.sent).ok||!options.throws){_context.next=13;break}return _context.t0=Error,_context.next=11,getErrorMessageFromResponse(response);case 11:throw _context.t1=_context.sent,new _context.t0(_context.t1);case 13:return _context.abrupt("return",response);case 14:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}var normalize_loader=__webpack_require__(97);function validateLoaderVersion(loader){var coreVersion=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2.2.8";Object(assert.a)(loader,"no loader provided");var loaderVersion=loader.version;coreVersion&&loaderVersion&&(coreVersion=parseVersion(coreVersion),loaderVersion=parseVersion(loaderVersion))}function parseVersion(version){var parts=version.split(".").map(Number);return{major:parts[0],minor:parts[1]}}var merge_options=__webpack_require__(179),_marked=regenerator_default.a.mark(makeStringIterator);function makeStringIterator(string){var options,_options$chunkSize,chunkSize,offset,textEncoder,chunkLength,chunk,_args=arguments;return regenerator_default.a.wrap((function makeStringIterator$(_context){for(;;)switch(_context.prev=_context.next){case 0:options=_args.length>1&&void 0!==_args[1]?_args[1]:{},_options$chunkSize=options.chunkSize,chunkSize=void 0===_options$chunkSize?262144:_options$chunkSize,offset=0,textEncoder=new TextEncoder;case 4:if(!(offset<string.length)){_context.next=12;break}return chunkLength=Math.min(string.length-offset,chunkSize),chunk=string.slice(offset,offset+chunkLength),offset+=chunkLength,_context.next=10,textEncoder.encode(chunk);case 10:_context.next=4;break;case 12:case"end":return _context.stop()}}),_marked)}var array_buffer_iterator_marked=regenerator_default.a.mark(makeArrayBufferIterator);function makeArrayBufferIterator(arrayBuffer){var options,_options$chunkSize,chunkSize,byteOffset,chunkByteLength,chunk,sourceArray,_args=arguments;return regenerator_default.a.wrap((function makeArrayBufferIterator$(_context){for(;;)switch(_context.prev=_context.next){case 0:options=_args.length>1&&void 0!==_args[1]?_args[1]:{},_options$chunkSize=options.chunkSize,chunkSize=void 0===_options$chunkSize?262144:_options$chunkSize,byteOffset=0;case 3:if(!(byteOffset<arrayBuffer.byteLength)){_context.next=14;break}return chunkByteLength=Math.min(arrayBuffer.byteLength-byteOffset,chunkSize),chunk=new ArrayBuffer(chunkByteLength),sourceArray=new Uint8Array(arrayBuffer,byteOffset,chunkByteLength),new Uint8Array(chunk).set(sourceArray),byteOffset+=chunkByteLength,_context.next=12,chunk;case 12:_context.next=3;break;case 14:case"end":return _context.stop()}}),array_buffer_iterator_marked)}function _AwaitValue(value){this.wrapped=value}function _awaitAsyncGenerator(value){return new _AwaitValue(value)}function AsyncGenerator(gen){var front,back;function resume(key,arg){try{var result=gen[key](arg),value=result.value,wrappedAwait=value instanceof _AwaitValue;Promise.resolve(wrappedAwait?value.wrapped:value).then((function(arg){wrappedAwait?resume("return"===key?"return":"next",arg):settle(result.done?"return":"normal",arg)}),(function(err){resume("throw",err)}))}catch(err){settle("throw",err)}}function settle(type,value){switch(type){case"return":front.resolve({value:value,done:!0});break;case"throw":front.reject(value);break;default:front.resolve({value:value,done:!1})}(front=front.next)?resume(front.key,front.arg):back=null}this._invoke=function send(key,arg){return new Promise((function(resolve,reject){var request={key:key,arg:arg,resolve:resolve,reject:reject,next:null};back?back=back.next=request:(front=back=request,resume(key,arg))}))},"function"!=typeof gen.return&&(this.return=void 0)}function _wrapAsyncGenerator(fn){return function(){return new AsyncGenerator(fn.apply(this,arguments))}}"function"==typeof Symbol&&Symbol.asyncIterator&&(AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),AsyncGenerator.prototype.next=function(arg){return this._invoke("next",arg)},AsyncGenerator.prototype.throw=function(arg){return this._invoke("throw",arg)},AsyncGenerator.prototype.return=function(arg){return this._invoke("return",arg)};function makeBlobIterator(_x){return _makeBlobIterator.apply(this,arguments)}function _makeBlobIterator(){return(_makeBlobIterator=_wrapAsyncGenerator(regenerator_default.a.mark((function _callee(file){var options,chunkSize,offset,end,slice,chunk,_args=arguments;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:options=_args.length>1&&void 0!==_args[1]?_args[1]:{},chunkSize=options.chunkSize||1048576,offset=0;case 3:if(!(offset<file.size)){_context.next=14;break}return end=offset+chunkSize,slice=file.slice(offset,end),_context.next=8,_awaitAsyncGenerator(readFileSlice(slice));case 8:return chunk=_context.sent,offset=end,_context.next=12,chunk;case 12:_context.next=3;break;case 14:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function readFileSlice(_x2){return _readFileSlice.apply(this,arguments)}function _readFileSlice(){return(_readFileSlice=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(slice){return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,new Promise((function(resolve,reject){var fileReader=new FileReader;fileReader.onloadend=function(event){return resolve(event.target.result)},fileReader.onerror=function(error){return reject(error)},fileReader.readAsArrayBuffer(slice)}));case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}var globals=__webpack_require__(807);function makeStreamIterator(stream){if(globals.b||globals.c>=10){if("function"==typeof stream[Symbol.asyncIterator])return stream;if("function"==typeof stream.getIterator)return stream.getIterator()}return globals.b?function makeBrowserStreamIterator(_x){return _makeBrowserStreamIterator.apply(this,arguments)}(stream):function makeNodeStreamIterator(_x2){return _makeNodeStreamIterator.apply(this,arguments)}(stream)}function _makeBrowserStreamIterator(){return(_makeBrowserStreamIterator=_wrapAsyncGenerator(regenerator_default.a.mark((function _callee(stream){var reader,_yield$_awaitAsyncGen,done,value;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:reader=stream.getReader(),_context.prev=1;case 2:return _context.next=5,_awaitAsyncGenerator(reader.read());case 5:if(_yield$_awaitAsyncGen=_context.sent,done=_yield$_awaitAsyncGen.done,value=_yield$_awaitAsyncGen.value,!done){_context.next=10;break}return _context.abrupt("return");case 10:return _context.next=12,value;case 12:_context.next=2;break;case 14:_context.next=19;break;case 16:_context.prev=16,_context.t0=_context.catch(1),reader.releaseLock();case 19:case"end":return _context.stop()}}),_callee,null,[[1,16]])})))).apply(this,arguments)}function _makeNodeStreamIterator(){return(_makeNodeStreamIterator=_wrapAsyncGenerator(regenerator_default.a.mark((function _callee2(stream){var data;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_awaitAsyncGenerator(stream);case 2:stream=_context2.sent;case 3:if(null===(data=stream.read())){_context2.next=9;break}return _context2.next=8,data;case 8:return _context2.abrupt("continue",3);case 9:if(!stream._readableState.ended){_context2.next=11;break}return _context2.abrupt("return");case 11:return _context2.next=13,_awaitAsyncGenerator(onceReadable(stream));case 13:_context2.next=3;break;case 15:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}function onceReadable(_x3){return _onceReadable.apply(this,arguments)}function _onceReadable(){return(_onceReadable=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee3(stream){return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",new Promise((function(resolve){stream.once("readable",resolve)})));case 1:case"end":return _context3.stop()}}),_callee3)})))).apply(this,arguments)}function makeIterator(data){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof data?makeStringIterator(data,options):data instanceof ArrayBuffer?makeArrayBufferIterator(data,options):isBlob(data)?makeBlobIterator(data,options):isReadableStream(data)?makeStreamIterator(data):isResponse(data)?makeStreamIterator(data.body):Object(assert.a)(!1)}var esm_asyncIterator=__webpack_require__(217);function concatenateArrayBuffers(source1,source2){var sourceArray1=source1 instanceof ArrayBuffer?new Uint8Array(source1):source1,sourceArray2=source2 instanceof ArrayBuffer?new Uint8Array(source2):source2,temp=new Uint8Array(sourceArray1.byteLength+sourceArray2.byteLength);return temp.set(sourceArray1,0),temp.set(sourceArray2,sourceArray1.byteLength),temp}function concatenateChunksAsync(_x3){return _concatenateChunksAsync.apply(this,arguments)}function _concatenateChunksAsync(){return(_concatenateChunksAsync=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(asyncIterator){var arrayBuffer,string,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,_value,chunk;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:arrayBuffer=new ArrayBuffer(0),string="",_iteratorNormalCompletion=!0,_didIteratorError=!1,_context2.prev=4,_iterator=Object(esm_asyncIterator.a)(asyncIterator);case 6:return _context2.next=8,_iterator.next();case 8:return _step=_context2.sent,_iteratorNormalCompletion=_step.done,_context2.next=12,_step.value;case 12:if(_value=_context2.sent,_iteratorNormalCompletion){_context2.next=19;break}"string"==typeof(chunk=_value)?string+=chunk:arrayBuffer=concatenateArrayBuffers(arrayBuffer,chunk);case 16:_iteratorNormalCompletion=!0,_context2.next=6;break;case 19:_context2.next=25;break;case 21:_context2.prev=21,_context2.t0=_context2.catch(4),_didIteratorError=!0,_iteratorError=_context2.t0;case 25:if(_context2.prev=25,_context2.prev=26,_iteratorNormalCompletion||null==_iterator.return){_context2.next=30;break}return _context2.next=30,_iterator.return();case 30:if(_context2.prev=30,!_didIteratorError){_context2.next=33;break}throw _iteratorError;case 33:return _context2.finish(30);case 34:return _context2.finish(25);case 35:return _context2.abrupt("return",string||arrayBuffer);case 36:case"end":return _context2.stop()}}),_callee2,null,[[4,21,25,35],[26,,30,34]])})))).apply(this,arguments)}function checkFetchResponseStatus(_x){return _checkFetchResponseStatus.apply(this,arguments)}function _checkFetchResponseStatus(){return(_checkFetchResponseStatus=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(response){var errorMessage,text;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(response.ok){_context.next=12;break}return errorMessage="fetch failed ".concat(response.status," ").concat(response.statusText),_context.prev=2,_context.next=5,response.text().slice(10);case 5:text=_context.sent,errorMessage+=text,_context.next=11;break;case 9:_context.prev=9,_context.t0=_context.catch(2);case 11:throw new Error(errorMessage);case 12:case"end":return _context.stop()}}),_callee,null,[[2,9]])})))).apply(this,arguments)}var ERR_DATA="Cannot convert supplied data type";function getUrlFromData(data,url){return isResponse(data)?url=url||data.url:isBlob(url)&&(url=url.name),"string"==typeof url?url.replace(/\?.*/,""):url}function getArrayBufferOrStringFromDataSync(data,loader){if(loader.text&&"string"==typeof data)return data;if(data instanceof ArrayBuffer){var arrayBuffer=data;return loader.text&&!loader.binary?new TextDecoder("utf8").decode(arrayBuffer):arrayBuffer}if(ArrayBuffer.isView(data)||function isBuffer(x){return x&&"object"===Object(esm_typeof.a)(x)&&x.isBuffer}(data)){if(loader.text&&!loader.binary)return new TextDecoder("utf8").decode(data);var _arrayBuffer=data.buffer,byteLength=data.byteLength||data.length;return 0===data.byteOffset&&byteLength===_arrayBuffer.byteLength||(_arrayBuffer=_arrayBuffer.slice(data.byteOffset,data.byteOffset+byteLength)),_arrayBuffer}throw new Error(ERR_DATA)}function getArrayBufferOrStringFromData(_x,_x2){return _getArrayBufferOrStringFromData.apply(this,arguments)}function _getArrayBufferOrStringFromData(){return(_getArrayBufferOrStringFromData=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(data,loader){var isArrayBuffer,response;return regenerator_default.a.wrap((function _callee$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,data;case 2:if(data=_context3.sent,isArrayBuffer=data instanceof ArrayBuffer||ArrayBuffer.isView(data),"string"!=typeof data&&!isArrayBuffer){_context3.next=6;break}return _context3.abrupt("return",getArrayBufferOrStringFromDataSync(data,loader));case 6:if(!isBlob(data)){_context3.next=10;break}return _context3.next=9,fetchFileReadable(data);case 9:data=_context3.sent;case 10:if(!isResponse(data)){_context3.next=24;break}return response=data,_context3.next=14,checkFetchResponseStatus(response);case 14:if(!loader.binary){_context3.next=20;break}return _context3.next=17,response.arrayBuffer();case 17:_context3.t0=_context3.sent,_context3.next=23;break;case 20:return _context3.next=22,response.text();case 22:_context3.t0=_context3.sent;case 23:return _context3.abrupt("return",_context3.t0);case 24:if(isReadableStream(data)&&(data=makeIterator(data)),!isIterable(data)&&!isAsyncIterable(data)){_context3.next=27;break}return _context3.abrupt("return",concatenateChunksAsync(data));case 27:throw new Error(ERR_DATA);case 28:case"end":return _context3.stop()}}),_callee)})))).apply(this,arguments)}var toConsumableArray=__webpack_require__(15),defineProperty=__webpack_require__(0);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function getLoaderContext(context,options){var previousContext=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return previousContext||(context=_objectSpread({fetch:context.fetch||fetchFile},context),Array.isArray(context.loaders)||(context.loaders=null),context)}function getLoaders(loaders,context){if(!context&&!Array.isArray(loaders))return loaders;var candidateLoaders;if(loaders&&(candidateLoaders=Array.isArray(loaders)?loaders:[loaders]),context&&context.loaders){var contextLoaders=Array.isArray(context.loaders)?context.loaders:[context.loaders];candidateLoaders=candidateLoaders?[].concat(Object(toConsumableArray.a)(candidateLoaders),Object(toConsumableArray.a)(contextLoaders)):contextLoaders}return candidateLoaders&&candidateLoaders.length?candidateLoaders:null}var workerURLCache=new Map;function buildScript(workerUrl){return"try {\n  importScripts('".concat(workerUrl,"');\n} catch (error) {\n  console.error(error);\n}")}function getTransferList(object){var recursive=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],transfers=arguments.length>2?arguments[2]:void 0,transfersSet=transfers||new Set;if(object){if(isTransferable(object))transfersSet.add(object);else if(isTransferable(object.buffer))transfersSet.add(object.buffer);else if(ArrayBuffer.isView(object));else if(recursive&&"object"===Object(esm_typeof.a)(object))for(var key in object)getTransferList(object[key],recursive,transfersSet)}else;return void 0===transfers?Array.from(transfersSet):null}function isTransferable(object){return!!object&&(object instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&object instanceof MessagePort||("undefined"!=typeof ImageBitmap&&object instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&object instanceof OffscreenCanvas)))}var count=0;function defaultOnMessage(_ref){var data=_ref.data;(0,_ref.resolve)(data)}var worker_thread_WorkerThread=function(){function WorkerThread(_ref2){var source=_ref2.source,_ref2$name=_ref2.name,name=void 0===_ref2$name?"web-worker-".concat(count++):_ref2$name,onMessage=_ref2.onMessage;Object(classCallCheck.a)(this,WorkerThread);var url=function getWorkerURL(workerSource){if(Object(assert.a)("string"==typeof workerSource,"worker source"),workerSource.startsWith("url(")&&workerSource.endsWith(")")){var workerUrl=workerSource.match(/^url\((.*)\)$/)[1];if(workerUrl&&!workerUrl.startsWith("http"))return workerUrl;workerSource=buildScript(workerUrl)}var workerURL=workerURLCache.get(workerSource);if(!workerURL){var blob=new Blob([workerSource],{type:"application/javascript"});workerURL=URL.createObjectURL(blob),workerURLCache.set(workerSource,workerURL)}return workerURL}(source,name);this.worker=new Worker(url,{name:name}),this.name=name,this.onMessage=onMessage||defaultOnMessage}var _process;return Object(createClass.a)(WorkerThread,[{key:"process",value:(_process=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(data){var _this=this;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve,reject){_this.worker.onmessage=function(event){return _this.onMessage({worker:_this.worker,data:event.data,resolve:resolve,reject:reject})},_this.worker.onerror=function(error){var message="".concat(_this.name,": WorkerThread.process() failed");error.message&&(message+=" ".concat(error.message," ").concat(error.filename,":").concat(error.lineno,":").concat(error.colno));var betterError=new Error(message);console.error(error),reject(betterError)};var transferList=getTransferList(data);_this.worker.postMessage(data,transferList)})));case 1:case"end":return _context.stop()}}),_callee)}))),function process(_x){return _process.apply(this,arguments)})},{key:"destroy",value:function destroy(){this.worker.terminate(),this.worker=null}}]),WorkerThread}(),worker_pool_WorkerPool=function(){function WorkerPool(_ref){var source=_ref.source,_ref$name=_ref.name,name=void 0===_ref$name?"unnamed":_ref$name,_ref$maxConcurrency=_ref.maxConcurrency,maxConcurrency=void 0===_ref$maxConcurrency?1:_ref$maxConcurrency,onMessage=_ref.onMessage,_ref$onDebug=_ref.onDebug,onDebug=void 0===_ref$onDebug?function(){}:_ref$onDebug;Object(classCallCheck.a)(this,WorkerPool),this.source=source,this.name=name,this.maxConcurrency=maxConcurrency,this.onMessage=onMessage,this.onDebug=onDebug,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1}var _process;return Object(createClass.a)(WorkerPool,[{key:"destroy",value:function destroy(){this.idleQueue.forEach((function(worker){return worker.destroy()})),this.isDestroyed=!0}},{key:"process",value:(_process=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(data,jobName){var _this=this;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve,reject){_this.jobQueue.push({data:data,jobName:jobName,resolve:resolve,reject:reject}),_this._startQueuedJob()})));case 1:case"end":return _context.stop()}}),_callee)}))),function process(_x,_x2){return _process.apply(this,arguments)})},{key:"_startQueuedJob",value:function _startQueuedJob(){var _this2=this;if(this.jobQueue.length){var worker=this._getAvailableWorker();if(worker){var job=this.jobQueue.shift();this.onDebug({message:"processing",worker:worker.name,job:job.jobName,backlog:this.jobQueue.length}),worker.process(job.data).then((function(result){return job.resolve(result)})).catch((function(error){return job.reject(error)})).then((function(){return _this2._onWorkerDone(worker)}))}}}},{key:"_onWorkerDone",value:function _onWorkerDone(worker){this.isDestroyed?worker.destroy():(this.idleQueue.push(worker),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function _getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var name="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new worker_thread_WorkerThread({source:this.source,onMessage:this.onMessage,name:name})}return null}}]),WorkerPool}(),worker_farm_WorkerFarm=function(){function WorkerFarm(_ref){var _ref$maxConcurrency=_ref.maxConcurrency,maxConcurrency=void 0===_ref$maxConcurrency?5:_ref$maxConcurrency,onMessage=_ref.onMessage,_ref$onDebug=_ref.onDebug,onDebug=void 0===_ref$onDebug?function(){}:_ref$onDebug;Object(classCallCheck.a)(this,WorkerFarm),this.maxConcurrency=maxConcurrency,this.onMessage=onMessage,this.onDebug=onDebug,this.workerPools=new Map}var _process;return Object(createClass.a)(WorkerFarm,null,[{key:"isSupported",value:function isSupported(){return"undefined"!=typeof Worker}}]),Object(createClass.a)(WorkerFarm,[{key:"setProps",value:function setProps(props){"maxConcurrency"in props&&(this.maxConcurrency=props.maxConcurrency),"onDebug"in props&&(this.onDebug=props.onDebug)}},{key:"destroy",value:function destroy(){this.workerPools.forEach((function(workerPool){return workerPool.destroy()}))}},{key:"process",value:(_process=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(workerSource,workerName,data){var workerPool;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return workerPool=this._getWorkerPool(workerSource,workerName),_context.abrupt("return",workerPool.process(data));case 2:case"end":return _context.stop()}}),_callee,this)}))),function process(_x,_x2,_x3){return _process.apply(this,arguments)})},{key:"_getWorkerPool",value:function _getWorkerPool(workerSource,workerName){var workerPool=this.workerPools.get(workerName);return workerPool||(workerPool=new worker_pool_WorkerPool({source:workerSource,name:workerName,onMessage:this.onMessage,maxConcurrency:this.maxConcurrency,onDebug:this.onDebug}),this.workerPools.set(workerName,workerPool)),workerPool}}]),WorkerFarm}(),to_array_buffer_ignored_=__webpack_require__(287);function toArrayBuffer(data){if(to_array_buffer_ignored_.toArrayBuffer&&(data=Object(to_array_buffer_ignored_.toArrayBuffer)(data)),data instanceof ArrayBuffer)return data;if(ArrayBuffer.isView(data))return data.buffer;if("string"==typeof data){var text=data;return(new TextEncoder).encode(text).buffer}return Object(assert.a)(!1)}function canParseWithWorker(loader,data,options,context){if(!worker_farm_WorkerFarm.isSupported())return!1;var loaderOptions=options&&options[loader.id];return!!("local"===options.worker&&loaderOptions&&loaderOptions.localWorkerUrl||options.worker&&loaderOptions&&loaderOptions.workerUrl)&&(!loader.useWorker||loader.useWorker(options))}function parseWithWorker(loader,data,options,context){var worker=(options||{}).worker,loaderOptions=options&&options[loader.id]||{},workerUrl="local"===worker?loaderOptions.localWorkerUrl:loaderOptions.workerUrl,workerSource="url(".concat(workerUrl,")"),workerName=loader.name,workerFarm=function getWorkerFarm(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},props={};options.maxConcurrency&&(props.maxConcurrency=options.maxConcurrency);options.onDebug&&(props.onDebug=options.onDebug);_workerFarm||(_workerFarm=new worker_farm_WorkerFarm({onMessage:onWorkerMessage}));return _workerFarm.setProps(props),_workerFarm}(options);options=JSON.parse(JSON.stringify(options));var warning="2.2.8"!==loader.version?"(core version ".concat("2.2.8",")"):"";return workerFarm.process(workerSource,"".concat(workerName,"-worker@").concat(loader.version).concat(warning),{arraybuffer:toArrayBuffer(data),options:options,source:"loaders.gl@".concat("2.2.8"),type:"parse"})}var _workerFarm=null;function onWorkerMessage(_x){return _onWorkerMessage.apply(this,arguments)}function _onWorkerMessage(){return(_onWorkerMessage=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(_ref2){var worker,data,resolve,reject,result;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:worker=_ref2.worker,data=_ref2.data,resolve=_ref2.resolve,reject=_ref2.reject,_context.t0=data.type,_context.next="done"===_context.t0?4:"parse"===_context.t0?6:"error"===_context.t0?17:19;break;case 4:return resolve(data.result),_context.abrupt("break",19);case 6:return _context.prev=6,_context.next=9,parse(data.arraybuffer,data.options,data.url);case 9:result=_context.sent,worker.postMessage({type:"parse-done",id:data.id,result:result},getTransferList(result)),_context.next=16;break;case 13:_context.prev=13,_context.t1=_context.catch(6),worker.postMessage({type:"parse-error",id:data.id,message:_context.t1.message});case 16:return _context.abrupt("break",19);case 17:return reject(data.message),_context.abrupt("break",19);case 19:case"end":return _context.stop()}}),_callee,null,[[6,13]])})))).apply(this,arguments)}var DATA_URL_PATTERN=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,MIME_TYPE_PATTERN=/^([-\w.]+\/[-\w.+]+)/;function parseMIMETypeFromURL(dataUrl){if("string"!=typeof dataUrl)return"";var matches=dataUrl.match(DATA_URL_PATTERN);return matches?matches[1]:""}var QUERY_STRING_PATTERN=/\?.*/;function getResourceUrlAndType(resource){if(isResponse(resource)){var contentType=function parseMIMEType(mimeString){if("string"!=typeof mimeString)return"";var matches=mimeString.match(MIME_TYPE_PATTERN);return matches?matches[1]:mimeString}(resource.headers.get("content-type")),urlType=parseMIMETypeFromURL(resource.url);return{url:stripQueryString(resource.url||""),type:contentType||urlType||null}}return isBlob(resource)?{url:stripQueryString(resource.url||""),type:resource.type||""}:"string"==typeof resource?{url:stripQueryString(resource),type:parseMIMETypeFromURL(resource)}:{url:"",type:""}}function stripQueryString(url){return url.replace(QUERY_STRING_PATTERN,"")}var register_loaders=__webpack_require__(414);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var EXT_PATTERN=/\.([^.]+)$/;function selectLoader(data){var loaders=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},context=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(loaders&&!Array.isArray(loaders))return Object(normalize_loader.b)(loaders);normalizeLoaders(loaders=[].concat(Object(toConsumableArray.a)(loaders||[]),Object(toConsumableArray.a)(Object(register_loaders.a)())));var _getResourceUrlAndTyp=getResourceUrlAndType(data),url=_getResourceUrlAndTyp.url,type=_getResourceUrlAndTyp.type,loader=findLoaderByUrl(loaders,url||context.url);if(!(loader=(loader=loader||findLoaderByContentType(loaders,type))||findLoaderByExamingInitialData(loaders,data))&&!options.nothrow)throw new Error(getNoValidLoaderMessage(data,url,type));return loader}function getNoValidLoaderMessage(data,url,contentType){var message="No valid loader found";return data&&(message+=' data: "'.concat(function getFirstCharacters(data){var length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof data)return data.slice(0,length);if(ArrayBuffer.isView(data))return getMagicString(data.buffer,data.byteOffset,length);if(data instanceof ArrayBuffer){var byteOffset=0;return getMagicString(data,byteOffset,length)}return""}(data),'"')),url&&(message+=" for ".concat(url)),message}function normalizeLoaders(loaders){var _step,_iterator=_createForOfIteratorHelper(loaders);try{for(_iterator.s();!(_step=_iterator.n()).done;){var loader=_step.value;Object(normalize_loader.b)(loader)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}function findLoaderByUrl(loaders,url){var match=url&&url.match(EXT_PATTERN),extension=match&&match[1];return extension&&function findLoaderByExtension(loaders,extension){extension=extension.toLowerCase();var _step2,_iterator2=_createForOfIteratorHelper(loaders);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step3,loader=_step2.value,_iterator3=_createForOfIteratorHelper(loader.extensions);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){if(_step3.value.toLowerCase()===extension)return loader}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return null}(loaders,extension)}function findLoaderByContentType(loaders,mimeType){var _step4,_iterator4=_createForOfIteratorHelper(loaders);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var loader=_step4.value;if(loader.mimeTypes&&loader.mimeTypes.includes(mimeType))return loader;if(mimeType==="application/x.".concat(loader.id))return loader}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}return null}function findLoaderByExamingInitialData(loaders,data){if(!data)return null;var _step5,_iterator5=_createForOfIteratorHelper(loaders);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var loader=_step5.value;if("string"==typeof data){if(testText(data,loader))return loader}else if(ArrayBuffer.isView(data)){if(testBinary(data.buffer,data.byteOffset,loader))return loader}else if(data instanceof ArrayBuffer){if(testBinary(data,0,loader))return loader}}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}return null}function testText(data,loader){return loader.testText&&loader.testText(data)}function testBinary(data,byteOffset,loader){switch(Array.isArray(loader.test)?"array":Object(esm_typeof.a)(loader.test)){case"function":return loader.test(data,loader);case"string":case"array":return(Array.isArray(loader.test)?loader.test:[loader.test]).some((function(test){return test===getMagicString(data,byteOffset,test.length)}));default:return!1}}function getMagicString(arrayBuffer,byteOffset,length){if(arrayBuffer.byteLength<=byteOffset+length)return"";for(var dataView=new DataView(arrayBuffer),magic="",i=0;i<length;i++)magic+=String.fromCharCode(dataView.getUint8(byteOffset+i));return magic}function parse(_x,_x2,_x3,_x4){return _parse.apply(this,arguments)}function _parse(){return(_parse=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(data,loaders,options,context){var url,autoUrl,candidateLoaders,loader;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!loaders||Array.isArray(loaders)||Object(normalize_loader.a)(loaders)||(context=options,options=loaders,loaders=null),url="","string"==typeof context&&(url=context,context=null),options=options||{},autoUrl=getUrlFromData(data,url),candidateLoaders=getLoaders(loaders,context),loader=selectLoader(data,candidateLoaders,options,{url:autoUrl})){_context.next=9;break}return _context.abrupt("return",null);case 9:return options=Object(merge_options.b)(loader,options,autoUrl),context=getLoaderContext({url:autoUrl,parse:parse,loaders:candidateLoaders},options,context),_context.next=13,parseWithLoader(loader,data,options,context);case 13:return _context.abrupt("return",_context.sent);case 14:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function parseWithLoader(_x5,_x6,_x7,_x8){return _parseWithLoader.apply(this,arguments)}function _parseWithLoader(){return(_parseWithLoader=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(loader,data,options,context){return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return validateLoaderVersion(loader),_context2.next=3,getArrayBufferOrStringFromData(data,loader);case 3:if(data=_context2.sent,!loader.parseTextSync||"string"!=typeof data){_context2.next=7;break}return options.dataType="text",_context2.abrupt("return",loader.parseTextSync(data,options,context,loader));case 7:if(!canParseWithWorker(loader,0,options)){_context2.next=11;break}return _context2.next=10,parseWithWorker(loader,data,options);case 10:return _context2.abrupt("return",_context2.sent);case 11:if(!loader.parse){_context2.next=15;break}return _context2.next=14,loader.parse(data,options,context,loader);case 14:return _context2.abrupt("return",_context2.sent);case 15:return Object(assert.a)(!loader.parseSync),_context2.abrupt("return",Object(assert.a)(!1));case 17:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}function load(_x,_x2,_x3){return _load.apply(this,arguments)}function _load(){return(_load=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(url,loaders,options){var data;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(Array.isArray(loaders)||Object(normalize_loader.a)(loaders)||(options=loaders,loaders=null),data=url,"string"!=typeof url){_context.next=8;break}return _context.next=5,fetchFile(url,options);case 5:data=_context.sent,_context.next=9;break;case 8:url=null;case 9:if(!isBlob(url)){_context.next=14;break}return _context.next=12,fetchFile(url,options);case 12:data=_context.sent,url=null;case 14:return _context.next=16,parse(data,loaders,options,url);case 16:return _context.abrupt("return",_context.sent);case 17:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return geojson_layer_GeoJsonLayer}));var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(7),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(8),log=__webpack_require__(20),composite_layer=__webpack_require__(813),get=__webpack_require__(22),project32=__webpack_require__(399),picking=__webpack_require__(410),lib_layer=__webpack_require__(220),model=__webpack_require__(419),geometry_geometry=__webpack_require__(806),DEFAULT_COLOR=[0,0,0,255],defaultProps={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,getPosition:{type:"accessor",value:function value(x){return x.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:DEFAULT_COLOR},getLineColor:{type:"accessor",value:DEFAULT_COLOR},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},scatterplot_layer_ScatterplotLayer=function(_Layer){function ScatterplotLayer(){return Object(classCallCheck.a)(this,ScatterplotLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ScatterplotLayer).apply(this,arguments))}return Object(inherits.a)(ScatterplotLayer,_Layer),Object(createClass.a)(ScatterplotLayer,[{key:"getShaders",value:function getShaders(id){return Object(get.a)(Object(getPrototypeOf.a)(ScatterplotLayer.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = smoothedge(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter);\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[project32.a,picking.a]})}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function updateState(_ref){var props=_ref.props,oldProps=_ref.oldProps,changeFlags=_ref.changeFlags;if(Object(get.a)(Object(getPrototypeOf.a)(ScatterplotLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags}),changeFlags.extensionsChanged){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function draw(_ref2){var uniforms=_ref2.uniforms,viewport=this.context.viewport,_this$props=this.props,radiusUnits=_this$props.radiusUnits,radiusScale=_this$props.radiusScale,radiusMinPixels=_this$props.radiusMinPixels,radiusMaxPixels=_this$props.radiusMaxPixels,stroked=_this$props.stroked,filled=_this$props.filled,lineWidthUnits=_this$props.lineWidthUnits,lineWidthScale=_this$props.lineWidthScale,lineWidthMinPixels=_this$props.lineWidthMinPixels,lineWidthMaxPixels=_this$props.lineWidthMaxPixels,pointRadiusMultiplier="pixels"===radiusUnits?viewport.metersPerPixel:1,lineWidthMultiplier="pixels"===lineWidthUnits?viewport.metersPerPixel:1;this.state.model.setUniforms(uniforms).setUniforms({stroked:stroked?1:0,filled:filled,radiusScale:radiusScale*pointRadiusMultiplier,radiusMinPixels:radiusMinPixels,radiusMaxPixels:radiusMaxPixels,lineWidthScale:lineWidthScale*lineWidthMultiplier,lineWidthMinPixels:lineWidthMinPixels,lineWidthMaxPixels:lineWidthMaxPixels}).draw()}},{key:"_getModel",value:function _getModel(gl){return new model.a(gl,Object.assign(this.getShaders(),{id:this.props.id,geometry:new geometry_geometry.a({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0}))}}]),ScatterplotLayer}(lib_layer.a);scatterplot_layer_ScatterplotLayer.layerName="ScatterplotLayer",scatterplot_layer_ScatterplotLayer.defaultProps=defaultProps;var defineProperty=__webpack_require__(0),iterable_utils=__webpack_require__(84),typed_array_manager=__webpack_require__(98),assert=__webpack_require__(26),classes_buffer=__webpack_require__(41),tesselator_Tesselator=function(){function Tesselator(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,Tesselator);var _opts$attributes=opts.attributes,attributes=void 0===_opts$attributes?{}:_opts$attributes;this.typedArrayManager=typed_array_manager.a,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=attributes,this.opts=opts,this.updateGeometry(opts),Object.seal(this)}return Object(createClass.a)(Tesselator,[{key:"updateGeometry",value:function updateGeometry(opts){Object.assign(this.opts,opts);var _this$opts=this.opts,data=_this$opts.data,_this$opts$buffers=_this$opts.buffers,buffers=void 0===_this$opts$buffers?{}:_this$opts$buffers,getGeometry=_this$opts.getGeometry,geometryBuffer=_this$opts.geometryBuffer,positionFormat=_this$opts.positionFormat,dataChanged=_this$opts.dataChanged,_this$opts$normalize=_this$opts.normalize,normalize=void 0===_this$opts$normalize||_this$opts$normalize;if(this.data=data,this.getGeometry=getGeometry,this.positionSize=geometryBuffer&&geometryBuffer.size||("XY"===positionFormat?2:3),this.buffers=buffers,this.normalize=normalize,geometryBuffer&&(Object(assert.a)(data.startIndices,"binary data missing startIndices"),this.getGeometry=this.getGeometryFromBuffer(geometryBuffer),normalize||(buffers.positions=geometryBuffer)),this.geometryBuffer=buffers.positions,Array.isArray(dataChanged)){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=dataChanged[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var dataRange=_step.value;this._rebuildGeometry(dataRange)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function updatePartialGeometry(_ref){var startRow=_ref.startRow,endRow=_ref.endRow;this._rebuildGeometry({startRow:startRow,endRow:endRow})}},{key:"normalizeGeometry",value:function normalizeGeometry(geometry){return geometry}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(geometry,startIndex,size){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function getGeometrySize(geometry){throw new Error("Not implemented")}},{key:"getGeometryFromBuffer",value:function getGeometryFromBuffer(geometryBuffer){var value=geometryBuffer.value||geometryBuffer;return Object(assert.a)(ArrayBuffer.isView(value),"cannot read geometries"),Object(iterable_utils.b)(value,{size:this.positionSize,offset:geometryBuffer.offset,stride:geometryBuffer.stride,startIndices:this.data.startIndices})}},{key:"_allocate",value:function _allocate(instanceCount,copy){var attributes=this.attributes,buffers=this.buffers,_attributeDefs=this._attributeDefs,typedArrayManager=this.typedArrayManager;for(var name in _attributeDefs)if(name in buffers)typedArrayManager.release(attributes[name]),attributes[name]=null;else{var def=_attributeDefs[name];def.copy=copy,attributes[name]=typedArrayManager.allocate(attributes[name],instanceCount,def)}}},{key:"_forEachGeometry",value:function _forEachGeometry(visitor,startRow,endRow){var data=this.data,getGeometry=this.getGeometry,_createIterable=Object(iterable_utils.a)(data,startRow,endRow),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=iterable[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var object=_step2.value;objectInfo.index++,visitor(getGeometry(object,objectInfo),objectInfo.index)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}},{key:"_rebuildGeometry",value:function _rebuildGeometry(dataRange){var _this=this;if(this.data&&this.getGeometry){var indexStarts=this.indexStarts,vertexStarts=this.vertexStarts,instanceCount=this.instanceCount,data=this.data,geometryBuffer=this.geometryBuffer,_ref2=dataRange||{},_ref2$startRow=_ref2.startRow,startRow=void 0===_ref2$startRow?0:_ref2$startRow,_ref2$endRow=_ref2.endRow,endRow=void 0===_ref2$endRow?1/0:_ref2$endRow,normalizedData={};if(dataRange||(indexStarts=[0],vertexStarts=[0]),this.normalize||!geometryBuffer)this._forEachGeometry((function(geometry,dataIndex){geometry=_this.normalizeGeometry(geometry),normalizedData[dataIndex]=geometry,vertexStarts[dataIndex+1]=vertexStarts[dataIndex]+_this.getGeometrySize(geometry)}),startRow,endRow),instanceCount=vertexStarts[vertexStarts.length-1];else if(geometryBuffer.buffer instanceof classes_buffer.a){var byteStride=geometryBuffer.stride||4*this.positionSize;vertexStarts=data.startIndices,instanceCount=vertexStarts[data.length]||geometryBuffer.buffer.byteLength/byteStride}else{var bufferValue=geometryBuffer.value||geometryBuffer,elementStride=geometryBuffer.stride/bufferValue.BYTES_PER_ELEMENT||this.positionSize;vertexStarts=data.startIndices,instanceCount=vertexStarts[data.length]||bufferValue.length/elementStride}this._allocate(instanceCount,Boolean(dataRange)),this.indexStarts=indexStarts,this.vertexStarts=vertexStarts,this.instanceCount=instanceCount;var context={};this._forEachGeometry((function(geometry,dataIndex){geometry=normalizedData[dataIndex]||geometry,context.vertexStart=vertexStarts[dataIndex],context.indexStart=indexStarts[dataIndex];var vertexEnd=dataIndex<vertexStarts.length-1?vertexStarts[dataIndex+1]:instanceCount;context.geometrySize=vertexEnd-vertexStarts[dataIndex],context.geometryIndex=dataIndex,_this.updateGeometryAttributes(geometry,context)}),startRow,endRow),this.vertexCount=indexStarts[indexStarts.length-1]}}}]),Tesselator}(),common=__webpack_require__(24);!function(){function Polygon(points){Object(classCallCheck.a)(this,Polygon),this.points=points,this.isClosed=Object(common.c)(this.points[this.points.length-1],this.points[0]),Object.freeze(this)}Object(createClass.a)(Polygon,[{key:"getSignedArea",value:function getSignedArea(){var area=0;return this.forEachSegment((function(p1,p2){area+=(p1[0]+p2[0])*(p1[1]-p2[1])})),area/2}},{key:"getArea",value:function getArea(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function getWindingDirection(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function forEachSegment(visitor){for(var length=this.points.length,i=0;i<length-1;i++)visitor(this.points[i],this.points[i+1],i,i+1);this.isClosed||visitor(this.points[length-1],this.points[0],length-1,0)}}])}();function push(target,source){var size=source.length,startIndex=target.length;if(startIndex>0){for(var isDuplicate=!0,i=0;i<size;i++)if(target[startIndex-size+i]!==source[i]){isDuplicate=!1;break}if(isDuplicate)return!1}for(var _i=0;_i<size;_i++)target[startIndex+_i]=source[_i];return!0}function copy(target,source){for(var size=source.length,i=0;i<size;i++)target[i]=source[i]}function getPointAtIndex(positions,index,size,offset){for(var out=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],startI=offset+index*size,i=0;i<size;i++)out[i]=positions[startI+i];return out}function intersect(a,b,edge,bbox){var t,snap,out=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&edge)t=(bbox[3]-a[1])/(b[1]-a[1]),snap=3;else if(4&edge)t=(bbox[1]-a[1])/(b[1]-a[1]),snap=1;else if(2&edge)t=(bbox[2]-a[0])/(b[0]-a[0]),snap=2;else{if(!(1&edge))return null;t=(bbox[0]-a[0])/(b[0]-a[0]),snap=0}for(var i=0;i<a.length;i++)out[i]=(1&snap)===i?bbox[snap]:t*b[i]+(1-t)*a[i];return out}function bitCode(p,bbox){var code=0;return p[0]<bbox[0]?code|=1:p[0]>bbox[2]&&(code|=2),p[1]<bbox[1]?code|=4:p[1]>bbox[3]&&(code|=8),code}function cutPolylineByGrid(positions){var b,codeB,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_options$size=options.size,size=void 0===_options$size?2:_options$size,_options$broken=options.broken,broken=void 0!==_options$broken&&_options$broken,_options$gridResoluti=options.gridResolution,gridResolution=void 0===_options$gridResoluti?10:_options$gridResoluti,_options$gridOffset=options.gridOffset,gridOffset=void 0===_options$gridOffset?[0,0]:_options$gridOffset,_options$startIndex=options.startIndex,startIndex=void 0===_options$startIndex?0:_options$startIndex,_options$endIndex=options.endIndex,endIndex=void 0===_options$endIndex?positions.length:_options$endIndex,numPoints=(endIndex-startIndex)/size,part=[],result=[part],a=getPointAtIndex(positions,0,size,startIndex),cell=getGridCell(a,gridResolution,gridOffset,[]),scratchPoint=[];push(part,a);for(var i=1;i<numPoints;i++){for(codeB=bitCode(b=getPointAtIndex(positions,i,size,startIndex,b),cell);codeB;){intersect(a,b,codeB,cell,scratchPoint);var codeAlt=bitCode(scratchPoint,cell);codeAlt&&(intersect(a,scratchPoint,codeAlt,cell,scratchPoint),codeB=codeAlt),push(part,scratchPoint),copy(a,scratchPoint),moveToNeighborCell(cell,gridResolution,codeB),broken&&part.length>size&&(part=[],result.push(part),push(part,a)),codeB=bitCode(b,cell)}push(part,b),copy(a,b)}return broken?result:result[0]}function cutPolygonByGrid(positions,holeIndices){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!positions.length)return[];for(var _options$size2=options.size,size=void 0===_options$size2?2:_options$size2,_options$gridResoluti2=options.gridResolution,gridResolution=void 0===_options$gridResoluti2?10:_options$gridResoluti2,_options$gridOffset2=options.gridOffset,gridOffset=void 0===_options$gridOffset2?[0,0]:_options$gridOffset2,_options$edgeTypes=options.edgeTypes,edgeTypes=void 0!==_options$edgeTypes&&_options$edgeTypes,result=[],queue=[{pos:positions,types:edgeTypes&&new Array(positions.length/size).fill(1),holes:holeIndices||[]}],bbox=[[],[]],cell=[];queue.length;){var _queue$shift=queue.shift(),pos=_queue$shift.pos,types=_queue$shift.types,holes=_queue$shift.holes;getBoundingBox(pos,size,bbox),cell=getGridCell(bbox[0],gridResolution,gridOffset,cell);var code=bitCode(bbox[1],cell);if(code){var parts=bisectPolygon(pos,types,size,0,holes[0]||pos.length,cell,code),polygonLow={pos:parts[0].pos,types:parts[0].types,holes:[]},polygonHigh={pos:parts[1].pos,types:parts[1].types,holes:[]};queue.push(polygonLow,polygonHigh);for(var i=0;i<holes.length;i++)(parts=bisectPolygon(pos,types,size,holes[i],holes[i+1]||pos.length,cell,code))[0]&&(polygonLow.holes.push(polygonLow.pos.length),polygonLow.pos=polygonLow.pos.concat(parts[0].pos),edgeTypes&&(polygonLow.types=polygonLow.types.concat(parts[0].types))),parts[1]&&(polygonHigh.holes.push(polygonHigh.pos.length),polygonHigh.pos=polygonHigh.pos.concat(parts[1].pos),edgeTypes&&(polygonHigh.types=polygonHigh.types.concat(parts[1].types)))}else{var polygon={positions:pos};edgeTypes&&(polygon.edgeTypes=types),holes.length&&(polygon.holeIndices=holes),result.push(polygon)}}return result}function bisectPolygon(positions,edgeTypes,size,startIndex,endIndex,bbox,edge){for(var p,side,type,numPoints=(endIndex-startIndex)/size,resultLow=[],resultHigh=[],typesLow=[],typesHigh=[],scratchPoint=[],prev=getPointAtIndex(positions,numPoints-1,size,startIndex),prevSide=Math.sign(8&edge?prev[1]-bbox[3]:prev[0]-bbox[2]),prevType=edgeTypes&&edgeTypes[numPoints-1],lowPointCount=0,highPointCount=0,i=0;i<numPoints;i++)p=getPointAtIndex(positions,i,size,startIndex,p),side=Math.sign(8&edge?p[1]-bbox[3]:p[0]-bbox[2]),type=edgeTypes&&edgeTypes[startIndex/size+i],side&&prevSide&&prevSide!==side&&(intersect(prev,p,edge,bbox,scratchPoint),push(resultLow,scratchPoint)&&typesLow.push(prevType),push(resultHigh,scratchPoint)&&typesHigh.push(prevType)),side<=0?(push(resultLow,p)&&typesLow.push(type),lowPointCount-=side):typesLow.length&&(typesLow[typesLow.length-1]=0),side>=0?(push(resultHigh,p)&&typesHigh.push(type),highPointCount+=side):typesHigh.length&&(typesHigh[typesHigh.length-1]=0),copy(prev,p),prevSide=side,prevType=type;return[lowPointCount?{pos:resultLow,types:edgeTypes&&typesLow}:null,highPointCount?{pos:resultHigh,types:edgeTypes&&typesHigh}:null]}function getGridCell(p,gridResolution,gridOffset,out){var left=Math.floor((p[0]-gridOffset[0])/gridResolution)*gridResolution+gridOffset[0],bottom=Math.floor((p[1]-gridOffset[1])/gridResolution)*gridResolution+gridOffset[1];return out[0]=left,out[1]=bottom,out[2]=left+gridResolution,out[3]=bottom+gridResolution,out}function moveToNeighborCell(cell,gridResolution,edge){8&edge?(cell[1]+=gridResolution,cell[3]+=gridResolution):4&edge?(cell[1]-=gridResolution,cell[3]-=gridResolution):2&edge?(cell[0]+=gridResolution,cell[2]+=gridResolution):1&edge&&(cell[0]-=gridResolution,cell[2]-=gridResolution)}function getBoundingBox(positions,size,out){for(var minX=1/0,maxX=-1/0,minY=1/0,maxY=-1/0,i=0;i<positions.length;i+=size){var x=positions[i],y=positions[i+1];minX=x<minX?x:minX,maxX=x>maxX?x:maxX,minY=y<minY?y:minY,maxY=y>maxY?y:maxY}return out[0][0]=minX,out[0][1]=minY,out[1][0]=maxX,out[1][1]=maxY,out}function findSplitIndex(positions,size,startIndex,endIndex){for(var maxLat=-1,pointIndex=-1,i=startIndex+1;i<endIndex;i+=size){var lat=Math.abs(positions[i]);lat>maxLat&&(maxLat=lat,pointIndex=i-1)}return pointIndex}function insertPoleVertices(positions,size,startIndex,endIndex){var maxLatitude=arguments.length>4&&void 0!==arguments[4]?arguments[4]:85.051129,firstLng=positions[startIndex],lastLng=positions[endIndex-size];if(Math.abs(firstLng-lastLng)>180){var p=getPointAtIndex(positions,0,size,startIndex);p[0]+=360*Math.round((lastLng-firstLng)/360),push(positions,p),p[1]=Math.sign(p[1])*maxLatitude,push(positions,p),p[0]=firstLng,push(positions,p)}}function wrapLongitudesForShortestPath(positions,size,startIndex,endIndex){for(var lng,prevLng=positions[0],i=startIndex;i<endIndex;i+=size){var delta=(lng=positions[i])-prevLng;(delta>180||delta<-180)&&(lng-=360*Math.round(delta/360)),positions[i]=prevLng=lng}}function shiftLongitudesIntoRange(positions,size){for(var refLng,pointCount=positions.length/size,i=0;i<pointCount&&((refLng=positions[i*size])+180)%360==0;i++);var delta=360*-Math.round(refLng/360);if(0!==delta)for(var _i2=0;_i2<pointCount;_i2++)positions[_i2*size]+=delta}function normalizePath(path,size,gridResolution,wrapLongitude){var flatPath=path;if(Array.isArray(path[0])){var length=path.length*size;flatPath=new Array(length);for(var i=0;i<path.length;i++)for(var j=0;j<size;j++)flatPath[i*size+j]=path[i][j]||0}return gridResolution?cutPolylineByGrid(flatPath,{size:size,gridResolution:gridResolution}):wrapLongitude?function cutPolylineByMercatorBounds(positions){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_options$size=options.size,size=void 0===_options$size?2:_options$size,_options$startIndex=options.startIndex,startIndex=void 0===_options$startIndex?0:_options$startIndex,_options$endIndex=options.endIndex,endIndex=void 0===_options$endIndex?positions.length:_options$endIndex,_options$normalize=options.normalize,normalize=void 0===_options$normalize||_options$normalize,newPositions=positions.slice(startIndex,endIndex);wrapLongitudesForShortestPath(newPositions,size,0,endIndex-startIndex);var parts=cutPolylineByGrid(newPositions,{size:size,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(normalize){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=parts[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var part=_step.value;shiftLongitudesIntoRange(part,size)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}return parts}(flatPath,{size:size}):flatPath}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var path_tesselator_PathTesselator=function(_Tesselator){function PathTesselator(opts){return Object(classCallCheck.a)(this,PathTesselator),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PathTesselator).call(this,function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},opts,{attributes:{positions:{size:3,padding:18,initialize:!0,type:opts.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})))}return Object(inherits.a)(PathTesselator,_Tesselator),Object(createClass.a)(PathTesselator,[{key:"getGeometryFromBuffer",value:function getGeometryFromBuffer(buffer){return this.normalize?Object(get.a)(Object(getPrototypeOf.a)(PathTesselator.prototype),"getGeometryFromBuffer",this).call(this,buffer):function(){return null}}},{key:"normalizeGeometry",value:function normalizeGeometry(path){return this.normalize?normalizePath(path,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):path}},{key:"get",value:function get(attributeName){return this.attributes[attributeName]}},{key:"getGeometrySize",value:function getGeometrySize(path){if(Array.isArray(path[0])){var size=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=path[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var subPath=_step.value;size+=this.getGeometrySize(subPath)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return size}var numPoints=this.getPathLength(path);return numPoints<2?0:this.isClosed(path)?numPoints<3?0:numPoints+2:numPoints}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(path,context){if(0!==context.geometrySize)if(path&&Array.isArray(path[0])){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=path[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var subPath=_step2.value,geometrySize=this.getGeometrySize(subPath);context.geometrySize=geometrySize,this.updateGeometryAttributes(subPath,context),context.vertexStart+=geometrySize}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}else this._updateSegmentTypes(path,context),this._updatePositions(path,context)}},{key:"_updateSegmentTypes",value:function _updateSegmentTypes(path,context){var segmentTypes=this.attributes.segmentTypes,isPathClosed=this.isClosed(path),vertexStart=context.vertexStart,geometrySize=context.geometrySize;segmentTypes.fill(0,vertexStart,vertexStart+geometrySize),isPathClosed?(segmentTypes[vertexStart]=4,segmentTypes[vertexStart+geometrySize-2]=4):(segmentTypes[vertexStart]+=1,segmentTypes[vertexStart+geometrySize-2]+=2),segmentTypes[vertexStart+geometrySize-1]=4}},{key:"_updatePositions",value:function _updatePositions(path,context){var positions=this.attributes.positions;if(positions)for(var vertexStart=context.vertexStart,geometrySize=context.geometrySize,p=new Array(3),i=vertexStart,ptIndex=0;ptIndex<geometrySize;i++,ptIndex++)this.getPointOnPath(path,ptIndex,p),positions[3*i]=p[0],positions[3*i+1]=p[1],positions[3*i+2]=p[2]}},{key:"getPathLength",value:function getPathLength(path){return path.length/this.positionSize}},{key:"getPointOnPath",value:function getPointOnPath(path,index){var target=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],positionSize=this.positionSize;index*positionSize>=path.length&&(index+=1-path.length/positionSize);var i=index*positionSize;return target[0]=path[i],target[1]=path[i+1],target[2]=3===positionSize&&path[i+2]||0,target}},{key:"isClosed",value:function isClosed(path){if(!this.normalize)return this.opts.loop;var positionSize=this.positionSize,lastPointIndex=path.length-positionSize;return path[0]===path[lastPointIndex]&&path[1]===path[lastPointIndex+1]&&(2===positionSize||path[2]===path[lastPointIndex+2])}}]),PathTesselator}(tesselator_Tesselator),path_layer_DEFAULT_COLOR=[0,0,0,255],path_layer_defaultProps={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:function value(object){return object.path}},getColor:{type:"accessor",value:path_layer_DEFAULT_COLOR},getWidth:{type:"accessor",value:1}},ATTRIBUTE_TRANSITION={enter:function enter(value,chunk){return chunk.length?chunk.subarray(chunk.length-value.length):value}},path_layer_PathLayer=function(_Layer){function PathLayer(){return Object(classCallCheck.a)(this,PathLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PathLayer).apply(this,arguments))}return Object(inherits.a)(PathLayer,_Layer),Object(createClass.a)(PathLayer,[{key:"getShaders",value:function getShaders(){return Object(get.a)(Object(getPrototypeOf.a)(PathLayer.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * jointType * 4.0 * flipIfTrue(isStartCap), isJoint);\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return currPoint + offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.worldPosition = instanceStartPositions;\n  geometry.worldPositionAlt = instanceEndPositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    vec2 width = project_pixel_size_to_clipspace(widthPixels);\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      width\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    vec2 width = project_pixel_size(widthPixels);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition, width),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (jointType > 0.0 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (jointType == 0.0 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[project32.a,picking.a]})}},{key:"initializeState",value:function initializeState(){var _this=this;this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:ATTRIBUTE_TRANSITION,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:ATTRIBUTE_TRANSITION,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:ATTRIBUTE_TRANSITION,defaultValue:path_layer_DEFAULT_COLOR},instancePickingColors:{size:3,type:5121,accessor:function accessor(object,_ref){var index=_ref.index,value=_ref.target;return _this.encodePickingColor(object&&object.__source?object.__source.index:index,value)}}}),this.setState({pathTesselator:new path_tesselator_PathTesselator({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&log.a.removed("getDashArray","PathStyleExtension")()}},{key:"updateState",value:function updateState(_ref2){var oldProps=_ref2.oldProps,props=_ref2.props,changeFlags=_ref2.changeFlags;Object(get.a)(Object(getPrototypeOf.a)(PathLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags});var attributeManager=this.getAttributeManager();if(changeFlags.dataChanged||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getPath)){var pathTesselator=this.state.pathTesselator,buffers=props.data.attributes||{};pathTesselator.updateGeometry({data:props.data,geometryBuffer:buffers.getPath,buffers:buffers,normalize:!props._pathType,loop:"loop"===props._pathType,getGeometry:props.getPath,positionFormat:props.positionFormat,wrapLongitude:props.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:changeFlags.dataChanged}),this.setState({numInstances:pathTesselator.instanceCount,startIndices:pathTesselator.vertexStarts}),changeFlags.dataChanged||attributeManager.invalidateAll()}if(changeFlags.extensionsChanged){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),attributeManager.invalidateAll()}}},{key:"getPickingInfo",value:function getPickingInfo(params){var info=Object(get.a)(Object(getPrototypeOf.a)(PathLayer.prototype),"getPickingInfo",this).call(this,params),index=info.index,data=this.props.data;return data[0]&&data[0].__source&&(info.object=data.find((function(d){return d.__source.index===index}))),info}},{key:"draw",value:function draw(_ref3){var uniforms=_ref3.uniforms,viewport=this.context.viewport,_this$props=this.props,rounded=_this$props.rounded,billboard=_this$props.billboard,miterLimit=_this$props.miterLimit,widthUnits=_this$props.widthUnits,widthScale=_this$props.widthScale,widthMinPixels=_this$props.widthMinPixels,widthMaxPixels=_this$props.widthMaxPixels,widthMultiplier="pixels"===widthUnits?viewport.metersPerPixel:1;this.state.model.setUniforms(Object.assign({},uniforms,{jointType:Number(rounded),billboard:billboard,widthScale:widthScale*widthMultiplier,miterLimit:miterLimit,widthMinPixels:widthMinPixels,widthMaxPixels:widthMaxPixels})).draw()}},{key:"_getModel",value:function _getModel(gl){return new model.a(gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new geometry_geometry.a({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0}))}},{key:"calculatePositions",value:function calculatePositions(attribute){var pathTesselator=this.state.pathTesselator;attribute.startIndices=pathTesselator.vertexStarts,attribute.value=pathTesselator.get("positions")}},{key:"calculateSegmentTypes",value:function calculateSegmentTypes(attribute){var pathTesselator=this.state.pathTesselator;attribute.startIndices=pathTesselator.vertexStarts,attribute.value=pathTesselator.get("segmentTypes")}},{key:"wrapLongitude",get:function get(){return!1}}]),PathLayer}(lib_layer.a);path_layer_PathLayer.layerName="PathLayer",path_layer_PathLayer.defaultProps=path_layer_defaultProps;var phong_lighting=__webpack_require__(821),constants=__webpack_require__(18),features_features=__webpack_require__(797),webgl_features_table=__webpack_require__(286),earcut=__webpack_require__(416),earcut_default=__webpack_require__.n(earcut);function isFlatRingClosed(positions,size,startIndex,endIndex){for(var i=0;i<size;i++)if(positions[startIndex+i]!==positions[endIndex-size+i])return!1;return!0}function copyNestedRing(target,targetStartIndex,simplePolygon,size){for(var targetIndex=targetStartIndex,len=simplePolygon.length,i=0;i<len;i++)for(var j=0;j<size;j++)target[targetIndex++]=simplePolygon[i][j]||0;if(!function isNestedRingClosed(simplePolygon){var p0=simplePolygon[0],p1=simplePolygon[simplePolygon.length-1];return p0[0]===p1[0]&&p0[1]===p1[1]&&p0[2]===p1[2]}(simplePolygon))for(var _j=0;_j<size;_j++)target[targetIndex++]=simplePolygon[0][_j]||0;return targetIndex}function copyFlatRing(target,targetStartIndex,positions,size){var srcStartIndex=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,srcEndIndex=arguments.length>5?arguments[5]:void 0,srcLength=(srcEndIndex=srcEndIndex||positions.length)-srcStartIndex;if(srcLength<=0)return targetStartIndex;for(var targetIndex=targetStartIndex,i=0;i<srcLength;i++)target[targetIndex++]=positions[srcStartIndex+i];if(!isFlatRingClosed(positions,size,srcStartIndex,srcEndIndex))for(var _i=0;_i<size;_i++)target[targetIndex++]=positions[srcStartIndex+_i];return targetIndex}function polygon_normalize(polygon,positionSize){!function validate(polygon){if(polygon=polygon&&polygon.positions||polygon,!Array.isArray(polygon)&&!ArrayBuffer.isView(polygon))throw new Error("invalid polygon")}(polygon);var positions=[],holeIndices=[];if(polygon.positions){var _polygon=polygon,srcPositions=_polygon.positions,srcHoleIndices=_polygon.holeIndices;if(srcHoleIndices){for(var targetIndex=0,i=0;i<=srcHoleIndices.length;i++)targetIndex=copyFlatRing(positions,targetIndex,srcPositions,positionSize,srcHoleIndices[i-1],srcHoleIndices[i]),holeIndices.push(targetIndex);return holeIndices.pop(),{positions:positions,holeIndices:holeIndices}}polygon=srcPositions}if(Number.isFinite(polygon[0]))return copyFlatRing(positions,0,polygon,positionSize),positions;if(!function isSimple(polygon){return polygon.length>=1&&polygon[0].length>=2&&Number.isFinite(polygon[0][0])}(polygon)){var _targetIndex=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=polygon[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_targetIndex=copyNestedRing(positions,_targetIndex,_step.value,positionSize),holeIndices.push(_targetIndex)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return holeIndices.pop(),{positions:positions,holeIndices:holeIndices}}return copyNestedRing(positions,0,polygon,positionSize),positions}function polygon_tesselator_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var polygon_tesselator_PolygonTesselator=function(_Tesselator){function PolygonTesselator(opts){Object(classCallCheck.a)(this,PolygonTesselator);var fp64=opts.fp64,_opts$IndexType=opts.IndexType,IndexType=void 0===_opts$IndexType?Uint32Array:_opts$IndexType;return Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PolygonTesselator).call(this,function polygon_tesselator_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?polygon_tesselator_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):polygon_tesselator_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},opts,{attributes:{positions:{size:3,type:fp64?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:IndexType,size:1}}})))}return Object(inherits.a)(PolygonTesselator,_Tesselator),Object(createClass.a)(PolygonTesselator,[{key:"get",value:function get(attributeName){var attributes=this.attributes;return"indices"===attributeName?attributes.indices&&attributes.indices.subarray(0,this.vertexCount):attributes[attributeName]}},{key:"updateGeometry",value:function updateGeometry(opts){Object(get.a)(Object(getPrototypeOf.a)(PolygonTesselator.prototype),"updateGeometry",this).call(this,opts);var externalIndices=this.buffers.indices;externalIndices&&(this.vertexCount=(externalIndices.value||externalIndices).length)}},{key:"normalizeGeometry",value:function normalizeGeometry(polygon){if(this.normalize){if(polygon=polygon_normalize(polygon,this.positionSize),this.opts.resolution)return cutPolygonByGrid(polygon.positions||polygon,polygon.holeIndices,{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0});if(this.opts.wrapLongitude)return function cutPolygonByMercatorBounds(positions,holeIndices){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_options$size2=options.size,size=void 0===_options$size2?2:_options$size2,_options$normalize2=options.normalize,normalize=void 0===_options$normalize2||_options$normalize2,_options$edgeTypes=options.edgeTypes,edgeTypes=void 0!==_options$edgeTypes&&_options$edgeTypes;holeIndices=holeIndices||[];for(var newPositions=[],newHoleIndices=[],srcStartIndex=0,targetIndex=0,ringIndex=0;ringIndex<=holeIndices.length;ringIndex++){for(var srcEndIndex=holeIndices[ringIndex]||positions.length,targetStartIndex=targetIndex,splitIndex=findSplitIndex(positions,size,srcStartIndex,srcEndIndex),i=splitIndex;i<srcEndIndex;i++)newPositions[targetIndex++]=positions[i];for(var _i=srcStartIndex;_i<splitIndex;_i++)newPositions[targetIndex++]=positions[_i];wrapLongitudesForShortestPath(newPositions,size,targetStartIndex,targetIndex),insertPoleVertices(newPositions,size,targetStartIndex,targetIndex,options.maxLatitude),srcStartIndex=srcEndIndex,newHoleIndices[ringIndex]=targetIndex}newHoleIndices.pop();var parts=cutPolygonByGrid(newPositions,newHoleIndices,{size:size,gridResolution:360,gridOffset:[-180,-180],edgeTypes:edgeTypes});if(normalize){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=parts[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var part=_step2.value;shiftLongitudesIntoRange(part.positions,size)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}return parts}(polygon.positions||polygon,polygon.holeIndices,{size:this.positionSize,maxLatitude:86,edgeTypes:!0})}return polygon}},{key:"getGeometrySize",value:function getGeometrySize(polygon){if(Array.isArray(polygon)&&!Number.isFinite(polygon[0])){var size=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=polygon[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var subPolygon=_step.value;size+=this.getGeometrySize(subPolygon)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return size}return(polygon.positions||polygon).length/this.positionSize}},{key:"getGeometryFromBuffer",value:function getGeometryFromBuffer(buffer){return this.normalize||!this.buffers.indices?Object(get.a)(Object(getPrototypeOf.a)(PolygonTesselator.prototype),"getGeometryFromBuffer",this).call(this,buffer):function(){return null}}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(polygon,context){if(Array.isArray(polygon)&&!Number.isFinite(polygon[0])){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=polygon[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var subPolygon=_step2.value,geometrySize=this.getGeometrySize(subPolygon);context.geometrySize=geometrySize,this.updateGeometryAttributes(subPolygon,context),context.vertexStart+=geometrySize,context.indexStart=this.indexStarts[context.geometryIndex+1]}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}else this._updateIndices(polygon,context),this._updatePositions(polygon,context),this._updateVertexValid(polygon,context)}},{key:"_updateIndices",value:function _updateIndices(polygon,_ref){var geometryIndex=_ref.geometryIndex,offset=_ref.vertexStart,indexStart=_ref.indexStart,attributes=this.attributes,indexStarts=this.indexStarts,typedArrayManager=this.typedArrayManager,target=attributes.indices;if(target){var i=indexStart,indices=function getSurfaceIndices(normalizedPolygon,positionSize,preproject){var holeIndices=null;normalizedPolygon.holeIndices&&(holeIndices=normalizedPolygon.holeIndices.map((function(positionIndex){return positionIndex/positionSize})));var positions=normalizedPolygon.positions||normalizedPolygon;if(preproject){var n=positions.length;positions=positions.slice();for(var p=[],i=0;i<n;i+=positionSize){p[0]=positions[i],p[1]=positions[i+1];var xy=preproject(p);positions[i]=xy[0],positions[i+1]=xy[1]}}return earcut_default()(positions,holeIndices,positionSize)}(polygon,this.positionSize,this.opts.preproject);target=typedArrayManager.allocate(target,indexStart+indices.length,{copy:!0});for(var j=0;j<indices.length;j++)target[i++]=indices[j]+offset;indexStarts[geometryIndex+1]=indexStart+indices.length,attributes.indices=target}}},{key:"_updatePositions",value:function _updatePositions(polygon,_ref2){var vertexStart=_ref2.vertexStart,geometrySize=_ref2.geometrySize,positions=this.attributes.positions,positionSize=this.positionSize;if(positions)for(var polygonPositions=polygon.positions||polygon,i=vertexStart,j=0;j<geometrySize;i++,j++){var x=polygonPositions[j*positionSize],y=polygonPositions[j*positionSize+1],z=positionSize>2?polygonPositions[j*positionSize+2]:0;positions[3*i]=x,positions[3*i+1]=y,positions[3*i+2]=z}}},{key:"_updateVertexValid",value:function _updateVertexValid(polygon,_ref3){var vertexStart=_ref3.vertexStart,geometrySize=_ref3.geometrySize,vertexValid=this.attributes.vertexValid,positionSize=this.positionSize,holeIndices=polygon&&polygon.holeIndices;if(polygon&&polygon.edgeTypes?vertexValid.set(polygon.edgeTypes,vertexStart):vertexValid.fill(1,vertexStart,vertexStart+geometrySize),holeIndices)for(var j=0;j<holeIndices.length;j++)vertexValid[vertexStart+holeIndices[j]/positionSize-1]=0;vertexValid[vertexStart+geometrySize-1]=0}}]),PolygonTesselator}(tesselator_Tesselator),solid_polygon_layer_vertex_main_glsl="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n  isValid = vertexValid;\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n  isValid = 1.0;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n    \n#ifdef IS_SIDE_VERTEX\n    normal = vec3(props.positions.y - props.nextPositions.y, props.nextPositions.x - props.positions.x, 0.0);\n    normal = project_offset_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n    geometry.normal = normal;\n  }\n\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",solid_polygon_layer_vertex_top_glsl="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(solid_polygon_layer_vertex_main_glsl,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),solid_polygon_layer_vertex_side_glsl="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(solid_polygon_layer_vertex_main_glsl,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = instancePositions;\n  props.positions64Low = instancePositions64Low;\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n  props.nextPositions = nextPositions;\n  props.nextPositions64Low = nextPositions64Low;\n\n  calculatePosition(props);\n}\n"),solid_polygon_layer_DEFAULT_COLOR=[0,0,0,255],solid_polygon_layer_defaultProps={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function value(f){return f.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:solid_polygon_layer_DEFAULT_COLOR},getLineColor:{type:"accessor",value:solid_polygon_layer_DEFAULT_COLOR},material:!0},solid_polygon_layer_ATTRIBUTE_TRANSITION={enter:function enter(value,chunk){return chunk.length?chunk.subarray(chunk.length-value.length):value}},solid_polygon_layer_SolidPolygonLayer=function(_Layer){function SolidPolygonLayer(){return Object(classCallCheck.a)(this,SolidPolygonLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(SolidPolygonLayer).apply(this,arguments))}return Object(inherits.a)(SolidPolygonLayer,_Layer),Object(createClass.a)(SolidPolygonLayer,[{key:"getShaders",value:function getShaders(vs){return Object(get.a)(Object(getPrototypeOf.a)(SolidPolygonLayer.prototype),"getShaders",this).call(this,{vs:vs,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid < 0.5) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{},modules:[project32.a,phong_lighting.a,picking.a]})}},{key:"initializeState",value:function initializeState(){var _this=this,_this$context=this.context,gl=_this$context.gl,viewport=_this$context.viewport,coordinateSystem=this.props.coordinateSystem;viewport.isGeospatial&&coordinateSystem===constants.a.DEFAULT&&(coordinateSystem=constants.a.LNGLAT),this.setState({numInstances:0,polygonTesselator:new polygon_tesselator_PolygonTesselator({preproject:coordinateSystem===constants.a.LNGLAT&&viewport.projectFlat,fp64:this.use64bitPositions(),IndexType:!gl||Object(features_features.c)(gl,webgl_features_table.a.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var attributeManager=this.getAttributeManager();attributeManager.remove(["instancePickingColors"]),attributeManager.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:solid_polygon_layer_ATTRIBUTE_TRANSITION,accessor:"getPolygon",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:solid_polygon_layer_ATTRIBUTE_TRANSITION,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:solid_polygon_layer_ATTRIBUTE_TRANSITION,accessor:"getFillColor",defaultValue:solid_polygon_layer_DEFAULT_COLOR,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:solid_polygon_layer_ATTRIBUTE_TRANSITION,accessor:"getLineColor",defaultValue:solid_polygon_layer_DEFAULT_COLOR,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:function accessor(object,_ref){var index=_ref.index,value=_ref.target;return _this.encodePickingColor(object&&object.__source?object.__source.index:index,value)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"getPickingInfo",value:function getPickingInfo(params){var info=Object(get.a)(Object(getPrototypeOf.a)(SolidPolygonLayer.prototype),"getPickingInfo",this).call(this,params),index=info.index,data=this.props.data;return data[0]&&data[0].__source&&(info.object=data.find((function(d){return d.__source.index===index}))),info}},{key:"draw",value:function draw(_ref2){var uniforms=_ref2.uniforms,_this$props=this.props,extruded=_this$props.extruded,filled=_this$props.filled,wireframe=_this$props.wireframe,elevationScale=_this$props.elevationScale,_this$state=this.state,topModel=_this$state.topModel,sideModel=_this$state.sideModel,polygonTesselator=_this$state.polygonTesselator,renderUniforms=Object.assign({},uniforms,{extruded:Boolean(extruded),elevationScale:elevationScale});sideModel&&(sideModel.setInstanceCount(polygonTesselator.instanceCount-1),sideModel.setUniforms(renderUniforms),wireframe&&(sideModel.setDrawMode(3),sideModel.setUniforms({isWireframe:!0}).draw()),filled&&(sideModel.setDrawMode(6),sideModel.setUniforms({isWireframe:!1}).draw())),topModel&&(topModel.setVertexCount(polygonTesselator.vertexCount),topModel.setUniforms(renderUniforms).draw())}},{key:"updateState",value:function updateState(updateParams){Object(get.a)(Object(getPrototypeOf.a)(SolidPolygonLayer.prototype),"updateState",this).call(this,updateParams),this.updateGeometry(updateParams);var props=updateParams.props,oldProps=updateParams.oldProps,changeFlags=updateParams.changeFlags,attributeManager=this.getAttributeManager();(changeFlags.extensionsChanged||props.filled!==oldProps.filled||props.extruded!==oldProps.extruded)&&(this.state.models&&this.state.models.forEach((function(model){return model.delete()})),this.setState(this._getModels(this.context.gl)),attributeManager.invalidateAll())}},{key:"updateGeometry",value:function updateGeometry(_ref3){var props=_ref3.props,changeFlags=(_ref3.oldProps,_ref3.changeFlags);if(changeFlags.dataChanged||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getPolygon)){var polygonTesselator=this.state.polygonTesselator,buffers=props.data.attributes||{};polygonTesselator.updateGeometry({data:props.data,normalize:props._normalize,geometryBuffer:buffers.getPolygon,buffers:buffers,getGeometry:props.getPolygon,positionFormat:props.positionFormat,wrapLongitude:props.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:changeFlags.dataChanged}),this.setState({numInstances:polygonTesselator.instanceCount,startIndices:polygonTesselator.vertexStarts}),changeFlags.dataChanged||this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function _getModels(gl){var topModel,sideModel,_this$props2=this.props,id=_this$props2.id,filled=_this$props2.filled,extruded=_this$props2.extruded;if(filled){var shaders=this.getShaders(solid_polygon_layer_vertex_top_glsl);shaders.defines.NON_INSTANCED_MODEL=1,topModel=new model.a(gl,Object.assign({},shaders,{id:"".concat(id,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0}))}return extruded&&((sideModel=new model.a(gl,Object.assign({},this.getShaders(solid_polygon_layer_vertex_side_glsl),{id:"".concat(id,"-side"),geometry:new geometry_geometry.a({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}))).userData.excludeAttributes={indices:!0}),{models:[sideModel,topModel].filter(Boolean),topModel:topModel,sideModel:sideModel}}},{key:"calculateIndices",value:function calculateIndices(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.startIndices=polygonTesselator.indexStarts,attribute.value=polygonTesselator.get("indices")}},{key:"calculatePositions",value:function calculatePositions(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.startIndices=polygonTesselator.vertexStarts,attribute.value=polygonTesselator.get("positions")}},{key:"calculateVertexValid",value:function calculateVertexValid(attribute){attribute.value=this.state.polygonTesselator.get("vertexValid")}},{key:"wrapLongitude",get:function get(){return!1}}]),SolidPolygonLayer}(lib_layer.a);function replaceInRange(_ref){for(var data=_ref.data,getIndex=_ref.getIndex,dataRange=_ref.dataRange,replace=_ref.replace,_dataRange$startRow=dataRange.startRow,startRow=void 0===_dataRange$startRow?0:_dataRange$startRow,_dataRange$endRow=dataRange.endRow,endRow=void 0===_dataRange$endRow?1/0:_dataRange$endRow,count=data.length,replaceStart=count,replaceEnd=count,i=0;i<count;i++){var row=getIndex(data[i]);if(replaceStart>i&&row>=startRow&&(replaceStart=i),row>=endRow){replaceEnd=i;break}}for(var index=replaceStart,dataLengthChanged=replaceEnd-replaceStart!==replace.length,endChunk=dataLengthChanged&&data.slice(replaceEnd),_i=0;_i<replace.length;_i++)data[index++]=replace[_i];if(dataLengthChanged){for(var _i2=0;_i2<endChunk.length;_i2++)data[index++]=endChunk[_i2];data.length=index}return{startRow:replaceStart,endRow:replaceStart+replace.length}}function separateGeojsonFeatures(features,wrapFeature){for(var dataRange=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},separated={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},_dataRange$startRow=dataRange.startRow,startRow=void 0===_dataRange$startRow?0:_dataRange$startRow,_dataRange$endRow=dataRange.endRow,endRow=void 0===_dataRange$endRow?features.length:_dataRange$endRow,featureIndex=startRow;featureIndex<endRow;featureIndex++){var feature=features[featureIndex];log.a.assert(feature&&feature.geometry,"GeoJSON does not have geometry");var geometry=feature.geometry;if("GeometryCollection"===geometry.type){log.a.assert(Array.isArray(geometry.geometries),"GeoJSON does not have geometries array");for(var geometries=geometry.geometries,i=0;i<geometries.length;i++){var subGeometry=geometries[i];separateGeometry(subGeometry,separated,wrapFeature,feature,featureIndex)}}else separateGeometry(geometry,separated,wrapFeature,feature,featureIndex)}return separated}function separateGeometry(geometry,separated,wrapFeature,sourceFeature,sourceFeatureIndex){var type=geometry.type,coordinates=geometry.coordinates,pointFeatures=separated.pointFeatures,lineFeatures=separated.lineFeatures,polygonFeatures=separated.polygonFeatures,polygonOutlineFeatures=separated.polygonOutlineFeatures;if(function validateGeometry(type,coordinates){var nestLevel=COORDINATE_NEST_LEVEL[type];log.a.assert(nestLevel,"Unknown GeoJSON type ".concat(type));for(;coordinates&&--nestLevel>0;)coordinates=coordinates[0];return coordinates&&Number.isFinite(coordinates[0])}(type,coordinates))switch(type){case"Point":pointFeatures.push(wrapFeature({geometry:geometry},sourceFeature,sourceFeatureIndex));break;case"MultiPoint":coordinates.forEach((function(point){pointFeatures.push(wrapFeature({geometry:{type:"Point",coordinates:point}},sourceFeature,sourceFeatureIndex))}));break;case"LineString":lineFeatures.push(wrapFeature({geometry:geometry},sourceFeature,sourceFeatureIndex));break;case"MultiLineString":coordinates.forEach((function(path){lineFeatures.push(wrapFeature({geometry:{type:"LineString",coordinates:path}},sourceFeature,sourceFeatureIndex))}));break;case"Polygon":polygonFeatures.push(wrapFeature({geometry:geometry},sourceFeature,sourceFeatureIndex)),coordinates.forEach((function(path){polygonOutlineFeatures.push(wrapFeature({geometry:{type:"LineString",coordinates:path}},sourceFeature,sourceFeatureIndex))}));break;case"MultiPolygon":coordinates.forEach((function(polygon){polygonFeatures.push(wrapFeature({geometry:{type:"Polygon",coordinates:polygon}},sourceFeature,sourceFeatureIndex)),polygon.forEach((function(path){polygonOutlineFeatures.push(wrapFeature({geometry:{type:"LineString",coordinates:path}},sourceFeature,sourceFeatureIndex))}))}))}else log.a.warn("".concat(type," coordinates are malformed"))()}solid_polygon_layer_SolidPolygonLayer.layerName="SolidPolygonLayer",solid_polygon_layer_SolidPolygonLayer.defaultProps=solid_polygon_layer_defaultProps;var COORDINATE_NEST_LEVEL={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};var geojson_layer_defaultProps={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusUnits:"meters",pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:{type:"accessor",value:[0,0,0,255]},getFillColor:{type:"accessor",value:[0,0,0,255]},getRadius:{type:"accessor",value:1},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};function getCoordinates(f){return f.geometry.coordinates}var geojson_layer_GeoJsonLayer=function(_CompositeLayer){function GeoJsonLayer(){return Object(classCallCheck.a)(this,GeoJsonLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(GeoJsonLayer).apply(this,arguments))}return Object(inherits.a)(GeoJsonLayer,_CompositeLayer),Object(createClass.a)(GeoJsonLayer,[{key:"initializeState",value:function initializeState(){this.state={features:{}},this.props.getLineDashArray&&log.a.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function updateState(_ref){var props=_ref.props,changeFlags=_ref.changeFlags;if(changeFlags.dataChanged){var features=function getGeojsonFeatures(geojson){if(Array.isArray(geojson))return geojson;switch(log.a.assert(geojson.type,"GeoJSON does not have type"),geojson.type){case"Feature":return[geojson];case"FeatureCollection":return log.a.assert(Array.isArray(geojson.features),"GeoJSON does not have features array"),geojson.features;default:return[{geometry:geojson}]}}(props.data),wrapFeature=this.getSubLayerRow.bind(this);if(Array.isArray(changeFlags.dataChanged)){var oldFeatures=this.state.features,newFeatures={},featuresDiff={};for(var key in oldFeatures)newFeatures[key]=oldFeatures[key].slice(),featuresDiff[key]=[];var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=changeFlags.dataChanged[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var dataRange=_step.value,partialFeatures=separateGeojsonFeatures(features,wrapFeature,dataRange);for(var _key in oldFeatures)featuresDiff[_key].push(replaceInRange({data:newFeatures[_key],getIndex:function getIndex(f){return f.__source.index},dataRange:dataRange,replace:partialFeatures[_key]}))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.setState({features:newFeatures,featuresDiff:featuresDiff})}else this.setState({features:separateGeojsonFeatures(features,wrapFeature),featuresDiff:{}})}}},{key:"renderLayers",value:function renderLayers(){var _this$state=this.state,features=_this$state.features,featuresDiff=_this$state.featuresDiff,pointFeatures=features.pointFeatures,lineFeatures=features.lineFeatures,polygonFeatures=features.polygonFeatures,polygonOutlineFeatures=features.polygonOutlineFeatures,_this$props=this.props,stroked=_this$props.stroked,filled=_this$props.filled,extruded=_this$props.extruded,wireframe=_this$props.wireframe,material=_this$props.material,transitions=_this$props.transitions,_this$props2=this.props,lineWidthUnits=_this$props2.lineWidthUnits,lineWidthScale=_this$props2.lineWidthScale,lineWidthMinPixels=_this$props2.lineWidthMinPixels,lineWidthMaxPixels=_this$props2.lineWidthMaxPixels,lineJointRounded=_this$props2.lineJointRounded,lineMiterLimit=_this$props2.lineMiterLimit,pointRadiusUnits=_this$props2.pointRadiusUnits,pointRadiusScale=_this$props2.pointRadiusScale,pointRadiusMinPixels=_this$props2.pointRadiusMinPixels,pointRadiusMaxPixels=_this$props2.pointRadiusMaxPixels,elevationScale=_this$props2.elevationScale,lineDashJustified=_this$props2.lineDashJustified,_this$props3=this.props,getLineColor=_this$props3.getLineColor,getFillColor=_this$props3.getFillColor,getRadius=_this$props3.getRadius,getLineWidth=_this$props3.getLineWidth,getLineDashArray=_this$props3.getLineDashArray,getElevation=_this$props3.getElevation,updateTriggers=_this$props3.updateTriggers,PolygonFillLayer=this.getSubLayerClass("polygons-fill",solid_polygon_layer_SolidPolygonLayer),PolygonStrokeLayer=this.getSubLayerClass("polygons-stroke",path_layer_PathLayer),LineStringsLayer=this.getSubLayerClass("line-strings",path_layer_PathLayer),PointsLayer=this.getSubLayerClass("points",scatterplot_layer_ScatterplotLayer),polygonFillLayer=this.shouldRenderSubLayer("polygons-fill",polygonFeatures)&&new PolygonFillLayer({_dataDiff:featuresDiff.polygonFeatures&&function(){return featuresDiff.polygonFeatures},extruded:extruded,elevationScale:elevationScale,filled:filled,wireframe:wireframe,material:material,getElevation:this.getSubLayerAccessor(getElevation),getFillColor:this.getSubLayerAccessor(getFillColor),getLineColor:this.getSubLayerAccessor(getLineColor),transitions:transitions&&{getPolygon:transitions.geometry,getElevation:transitions.getElevation,getFillColor:transitions.getFillColor,getLineColor:transitions.getLineColor}},this.getSubLayerProps({id:"polygons-fill",updateTriggers:{getElevation:updateTriggers.getElevation,getFillColor:updateTriggers.getFillColor,getLineColor:updateTriggers.getLineColor}}),{data:polygonFeatures,getPolygon:getCoordinates});return[!extruded&&polygonFillLayer,!extruded&&stroked&&this.shouldRenderSubLayer("polygons-stroke",polygonOutlineFeatures)&&new PolygonStrokeLayer({_dataDiff:featuresDiff.polygonOutlineFeatures&&function(){return featuresDiff.polygonOutlineFeatures},widthUnits:lineWidthUnits,widthScale:lineWidthScale,widthMinPixels:lineWidthMinPixels,widthMaxPixels:lineWidthMaxPixels,rounded:lineJointRounded,miterLimit:lineMiterLimit,dashJustified:lineDashJustified,getColor:this.getSubLayerAccessor(getLineColor),getWidth:this.getSubLayerAccessor(getLineWidth),getDashArray:this.getSubLayerAccessor(getLineDashArray),transitions:transitions&&{getPath:transitions.geometry,getColor:transitions.getLineColor,getWidth:transitions.getLineWidth}},this.getSubLayerProps({id:"polygons-stroke",updateTriggers:{getColor:updateTriggers.getLineColor,getWidth:updateTriggers.getLineWidth,getDashArray:updateTriggers.getLineDashArray}}),{data:polygonOutlineFeatures,getPath:getCoordinates}),this.shouldRenderSubLayer("linestrings",lineFeatures)&&new LineStringsLayer({_dataDiff:featuresDiff.lineFeatures&&function(){return featuresDiff.lineFeatures},widthUnits:lineWidthUnits,widthScale:lineWidthScale,widthMinPixels:lineWidthMinPixels,widthMaxPixels:lineWidthMaxPixels,rounded:lineJointRounded,miterLimit:lineMiterLimit,dashJustified:lineDashJustified,getColor:this.getSubLayerAccessor(getLineColor),getWidth:this.getSubLayerAccessor(getLineWidth),getDashArray:this.getSubLayerAccessor(getLineDashArray),transitions:transitions&&{getPath:transitions.geometry,getColor:transitions.getLineColor,getWidth:transitions.getLineWidth}},this.getSubLayerProps({id:"line-strings",updateTriggers:{getColor:updateTriggers.getLineColor,getWidth:updateTriggers.getLineWidth,getDashArray:updateTriggers.getLineDashArray}}),{data:lineFeatures,getPath:getCoordinates}),this.shouldRenderSubLayer("points",pointFeatures)&&new PointsLayer({_dataDiff:featuresDiff.pointFeatures&&function(){return featuresDiff.pointFeatures},stroked:stroked,filled:filled,radiusUnits:pointRadiusUnits,radiusScale:pointRadiusScale,radiusMinPixels:pointRadiusMinPixels,radiusMaxPixels:pointRadiusMaxPixels,lineWidthUnits:lineWidthUnits,lineWidthScale:lineWidthScale,lineWidthMinPixels:lineWidthMinPixels,lineWidthMaxPixels:lineWidthMaxPixels,getFillColor:this.getSubLayerAccessor(getFillColor),getLineColor:this.getSubLayerAccessor(getLineColor),getRadius:this.getSubLayerAccessor(getRadius),getLineWidth:this.getSubLayerAccessor(getLineWidth),transitions:transitions&&{getPosition:transitions.geometry,getFillColor:transitions.getFillColor,getLineColor:transitions.getLineColor,getRadius:transitions.getRadius,getLineWidth:transitions.getLineWidth}},this.getSubLayerProps({id:"points",updateTriggers:{getFillColor:updateTriggers.getFillColor,getLineColor:updateTriggers.getLineColor,getRadius:updateTriggers.getRadius,getLineWidth:updateTriggers.getLineWidth}}),{data:pointFeatures,getPosition:getCoordinates,highlightedObjectIndex:this._getHighlightedIndex(pointFeatures)}),extruded&&polygonFillLayer]}},{key:"_getHighlightedIndex",value:function _getHighlightedIndex(data){var highlightedObjectIndex=this.props.highlightedObjectIndex;return Number.isFinite(highlightedObjectIndex)?data.findIndex((function(d){return d.__source.index===highlightedObjectIndex})):null}}]),GeoJsonLayer}(composite_layer.a);geojson_layer_GeoJsonLayer.layerName="GeoJsonLayer",geojson_layer_GeoJsonLayer.defaultProps=geojson_layer_defaultProps},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return defaultLocale_format})),__webpack_require__.d(__webpack_exports__,"b",(function(){return defaultLocale_formatPrefix}));var prefixExponent,defaultLocale_locale,defaultLocale_format,defaultLocale_formatPrefix,src_exponent=__webpack_require__(85),formatSpecifier=__webpack_require__(288),formatDecimal=__webpack_require__(128),formatRounded=function(x,p){var d=Object(formatDecimal.a)(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")},formatTypes={"%":function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function(x){return Math.round(x).toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(100*x,p)},r:formatRounded,s:function(x,p){var d=Object(formatDecimal.a)(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+Object(formatDecimal.a)(x,Math.max(0,p+i-1))[0]},X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}},identity=function(x){return x},map=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],src_locale=function(locale){var grouping,thousands,group=void 0===locale.grouping||void 0===locale.thousands?identity:(grouping=map.call(locale.grouping,Number),thousands=locale.thousands+"",function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}),currencyPrefix=void 0===locale.currency?"":locale.currency[0]+"",currencySuffix=void 0===locale.currency?"":locale.currency[1]+"",decimal=void 0===locale.decimal?".":locale.decimal+"",numerals=void 0===locale.numerals?identity:function(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(map.call(locale.numerals,String)),percent=void 0===locale.percent?"%":locale.percent+"",minus=void 0===locale.minus?"-":locale.minus+"",nan=void 0===locale.nan?"NaN":locale.nan+"";function newFormat(specifier){var fill=(specifier=Object(formatSpecifier.a)(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0||1/value<0;if(value=isNaN(value)?nan:formatType(Math.abs(value),precision),trim&&(value=function(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(!+s[i])break out;i0>0&&(i0=0)}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}(value)),valueNegative&&0==+value&&"+"!==sign&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function formatPrefix(specifier,value){var f=newFormat(((specifier=Object(formatSpecifier.a)(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(Object(src_exponent.a)(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}};!function defaultLocale(definition){return defaultLocale_locale=src_locale(definition),defaultLocale_format=defaultLocale_locale.format,defaultLocale_formatPrefix=defaultLocale_locale.formatPrefix,defaultLocale_locale}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})},function(module,__webpack_exports__,__webpack_require__){"use strict";var adder=function(){return new Adder};function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(y){add(temp,y,this.t),add(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add(adder,a,b){var x=adder.s=a+b,bv=x-a,av=x-bv;adder.t=a-av+(b-bv)}var pi=Math.PI,halfPi=pi/2,quarterPi=pi/4,tau=2*pi,degrees=180/pi,radians=pi/180,abs=Math.abs,atan2=(Math.atan,Math.atan2),cos=Math.cos,sin=(Math.ceil,Math.exp,Math.floor,Math.log,Math.pow,Math.sin),sqrt=(Math.sign,Math.sqrt);Math.tan;function noop(){}function streamGeometry(geometry,stream){geometry&&streamGeometryType.hasOwnProperty(geometry.type)&&streamGeometryType[geometry.type](geometry,stream)}var streamObjectType={Feature:function(object,stream){streamGeometry(object.geometry,stream)},FeatureCollection:function(object,stream){for(var features=object.features,i=-1,n=features.length;++i<n;)streamGeometry(features[i].geometry,stream)}},streamGeometryType={Sphere:function(object,stream){stream.sphere()},Point:function(object,stream){object=object.coordinates,stream.point(object[0],object[1],object[2])},MultiPoint:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],stream.point(object[0],object[1],object[2])},LineString:function(object,stream){streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamLine(coordinates[i],stream,0)},Polygon:function(object,stream){streamPolygon(object.coordinates,stream)},MultiPolygon:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamPolygon(coordinates[i],stream)},GeometryCollection:function(object,stream){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)streamGeometry(geometries[i],stream)}};function streamLine(coordinates,stream,closed){var coordinate,i=-1,n=coordinates.length-closed;for(stream.lineStart();++i<n;)coordinate=coordinates[i],stream.point(coordinate[0],coordinate[1],coordinate[2]);stream.lineEnd()}function streamPolygon(coordinates,stream){var i=-1,n=coordinates.length;for(stream.polygonStart();++i<n;)streamLine(coordinates[i],stream,1);stream.polygonEnd()}var lambda00,phi00,lambda0,cosPhi0,sinPhi0,stream=function(object,stream){object&&streamObjectType.hasOwnProperty(object.type)?streamObjectType[object.type](object,stream):streamGeometry(object,stream)},areaRingSum=adder(),areaSum=adder(),areaStream={point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){areaRingSum.reset(),areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){var areaRing=+areaRingSum;areaSum.add(areaRing<0?tau+areaRing:areaRing),this.lineStart=this.lineEnd=this.point=noop},sphere:function(){areaSum.add(tau)}};function areaRingStart(){areaStream.point=areaPointFirst}function areaRingEnd(){areaPoint(lambda00,phi00)}function areaPointFirst(lambda,phi){areaStream.point=areaPoint,lambda00=lambda,phi00=phi,lambda0=lambda*=radians,cosPhi0=cos(phi=(phi*=radians)/2+quarterPi),sinPhi0=sin(phi)}function areaPoint(lambda,phi){var dLambda=(lambda*=radians)-lambda0,sdLambda=dLambda>=0?1:-1,adLambda=sdLambda*dLambda,cosPhi=cos(phi=(phi*=radians)/2+quarterPi),sinPhi=sin(phi),k=sinPhi0*sinPhi,u=cosPhi0*cosPhi+k*cos(adLambda),v=k*sdLambda*sin(adLambda);areaRingSum.add(atan2(v,u)),lambda0=lambda,cosPhi0=cosPhi,sinPhi0=sinPhi}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}var bounds_lambda0,phi0,lambda1,phi1,lambda2,bounds_lambda00,bounds_phi00,p0,ranges,range,deltaSum=adder(),boundsStream={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream.point=boundsRingPoint,boundsStream.lineStart=boundsRingStart,boundsStream.lineEnd=boundsRingEnd,deltaSum.reset(),areaStream.polygonStart()},polygonEnd:function(){areaStream.polygonEnd(),boundsStream.point=boundsPoint,boundsStream.lineStart=boundsLineStart,boundsStream.lineEnd=boundsLineEnd,areaRingSum<0?(bounds_lambda0=-(lambda1=180),phi0=-(phi1=90)):deltaSum>1e-6?phi1=90:deltaSum<-1e-6&&(phi0=-90),range[0]=bounds_lambda0,range[1]=lambda1},sphere:function(){bounds_lambda0=-(lambda1=180),phi0=-(phi1=90)}};function boundsPoint(lambda,phi){ranges.push(range=[bounds_lambda0=lambda,lambda1=lambda]),phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi)}function linePoint(lambda,phi){var p=function cartesian_cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=cos(phi);return[cosPhi*cos(lambda),cosPhi*sin(lambda),sin(phi)]}([lambda*radians,phi*radians]);if(p0){var normal=cartesianCross(p0,p),inflection=cartesianCross([normal[1],-normal[0],0],normal);!function cartesianNormalizeInPlace(d){var l=sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}(inflection),inflection=function cartesian_spherical(cartesian){return[atan2(cartesian[1],cartesian[0]),(x=cartesian[2],x>1?halfPi:x<-1?-halfPi:Math.asin(x))];var x}(inflection);var phii,delta=lambda-lambda2,sign=delta>0?1:-1,lambdai=inflection[0]*degrees*sign,antimeridian=abs(delta)>180;antimeridian^(sign*lambda2<lambdai&&lambdai<sign*lambda)?(phii=inflection[1]*degrees)>phi1&&(phi1=phii):antimeridian^(sign*lambda2<(lambdai=(lambdai+360)%360-180)&&lambdai<sign*lambda)?(phii=-inflection[1]*degrees)<phi0&&(phi0=phii):(phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi)),antimeridian?lambda<lambda2?angle(bounds_lambda0,lambda)>angle(bounds_lambda0,lambda1)&&(lambda1=lambda):angle(lambda,lambda1)>angle(bounds_lambda0,lambda1)&&(bounds_lambda0=lambda):lambda1>=bounds_lambda0?(lambda<bounds_lambda0&&(bounds_lambda0=lambda),lambda>lambda1&&(lambda1=lambda)):lambda>lambda2?angle(bounds_lambda0,lambda)>angle(bounds_lambda0,lambda1)&&(lambda1=lambda):angle(lambda,lambda1)>angle(bounds_lambda0,lambda1)&&(bounds_lambda0=lambda)}else ranges.push(range=[bounds_lambda0=lambda,lambda1=lambda]);phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi),p0=p,lambda2=lambda}function boundsLineStart(){boundsStream.point=linePoint}function boundsLineEnd(){range[0]=bounds_lambda0,range[1]=lambda1,boundsStream.point=boundsPoint,p0=null}function boundsRingPoint(lambda,phi){if(p0){var delta=lambda-lambda2;deltaSum.add(abs(delta)>180?delta+(delta>0?360:-360):delta)}else bounds_lambda00=lambda,bounds_phi00=phi;areaStream.point(lambda,phi),linePoint(lambda,phi)}function boundsRingStart(){areaStream.lineStart()}function boundsRingEnd(){boundsRingPoint(bounds_lambda00,bounds_phi00),areaStream.lineEnd(),abs(deltaSum)>1e-6&&(bounds_lambda0=-(lambda1=180)),range[0]=bounds_lambda0,range[1]=lambda1,p0=null}function angle(lambda0,lambda1){return(lambda1-=lambda0)<0?lambda1+360:lambda1}function rangeCompare(a,b){return a[0]-b[0]}function rangeContains(range,x){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}__webpack_exports__.a=function(feature){var i,n,a,b,merged,deltaMax,delta;if(phi1=lambda1=-(bounds_lambda0=phi0=1/0),ranges=[],stream(feature,boundsStream),n=ranges.length){for(ranges.sort(rangeCompare),i=1,merged=[a=ranges[0]];i<n;++i)rangeContains(a,(b=ranges[i])[0])||rangeContains(a,b[1])?(angle(a[0],b[1])>angle(a[0],a[1])&&(a[1]=b[1]),angle(b[0],a[1])>angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(deltaMax=-1/0,i=0,a=merged[n=merged.length-1];i<=n;a=b,++i)b=merged[i],(delta=angle(a[1],b[0]))>deltaMax&&(deltaMax=delta,bounds_lambda0=b[0],lambda1=a[1])}return ranges=range=null,bounds_lambda0===1/0||phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[bounds_lambda0,phi0],[lambda1,phi1]]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return program_Program}));var _UNIFORM_SETTERS,classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(7),assertThisInitialized=__webpack_require__(6),getPrototypeOf=__webpack_require__(3),get=__webpack_require__(22),inherits=__webpack_require__(8),resource=__webpack_require__(48),classes_texture=__webpack_require__(60),classes_framebuffer=__webpack_require__(82),defineProperty=__webpack_require__(0),esm=__webpack_require__(9),renderbuffer=__webpack_require__(129),assert=__webpack_require__(23),UNIFORM_SETTERS=(_UNIFORM_SETTERS={},Object(defineProperty.a)(_UNIFORM_SETTERS,5126,getArraySetter.bind(null,"uniform1fv",toFloatArray,1,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35664,getArraySetter.bind(null,"uniform2fv",toFloatArray,2,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35665,getArraySetter.bind(null,"uniform3fv",toFloatArray,3,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35666,getArraySetter.bind(null,"uniform4fv",toFloatArray,4,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,5124,getArraySetter.bind(null,"uniform1iv",toIntArray,1,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35667,getArraySetter.bind(null,"uniform2iv",toIntArray,2,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35668,getArraySetter.bind(null,"uniform3iv",toIntArray,3,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35669,getArraySetter.bind(null,"uniform4iv",toIntArray,4,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35670,getArraySetter.bind(null,"uniform1iv",toIntArray,1,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35671,getArraySetter.bind(null,"uniform2iv",toIntArray,2,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35672,getArraySetter.bind(null,"uniform3iv",toIntArray,3,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35673,getArraySetter.bind(null,"uniform4iv",toIntArray,4,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35674,getArraySetter.bind(null,"uniformMatrix2fv",toFloatArray,4,setMatrixUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35675,getArraySetter.bind(null,"uniformMatrix3fv",toFloatArray,9,setMatrixUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35676,getArraySetter.bind(null,"uniformMatrix4fv",toFloatArray,16,setMatrixUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35678,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,35680,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,5125,getArraySetter.bind(null,"uniform1uiv",toUIntArray,1,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,36294,getArraySetter.bind(null,"uniform2uiv",toUIntArray,2,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,36295,getArraySetter.bind(null,"uniform3uiv",toUIntArray,3,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,36296,getArraySetter.bind(null,"uniform4uiv",toUIntArray,4,setVectorUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35685,getArraySetter.bind(null,"uniformMatrix2x3fv",toFloatArray,6,setMatrixUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35686,getArraySetter.bind(null,"uniformMatrix2x4fv",toFloatArray,8,setMatrixUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35687,getArraySetter.bind(null,"uniformMatrix3x2fv",toFloatArray,6,setMatrixUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35688,getArraySetter.bind(null,"uniformMatrix3x4fv",toFloatArray,12,setMatrixUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35689,getArraySetter.bind(null,"uniformMatrix4x2fv",toFloatArray,8,setMatrixUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35690,getArraySetter.bind(null,"uniformMatrix4x3fv",toFloatArray,12,setMatrixUniform)),Object(defineProperty.a)(_UNIFORM_SETTERS,35679,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,35682,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,36289,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,36292,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,36293,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,36298,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,36299,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,36300,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,36303,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,36306,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,36307,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,36308,getSamplerSetter),Object(defineProperty.a)(_UNIFORM_SETTERS,36311,getSamplerSetter),_UNIFORM_SETTERS),FLOAT_ARRAY={},INT_ARRAY={},UINT_ARRAY={},array1=[0];function toTypedArray(value,uniformLength,Type,cache){1===uniformLength&&"boolean"==typeof value&&(value=value?1:0),Number.isFinite(value)&&(array1[0]=value,value=array1);var length=value.length;if(length%uniformLength&&esm.g.warn("Uniform size should be multiples of ".concat(uniformLength),value)(),value instanceof Type)return value;var result=cache[length];result||(result=new Type(length),cache[length]=result);for(var i=0;i<length;i++)result[i]=value[i];return result}function toFloatArray(value,uniformLength){return toTypedArray(value,uniformLength,Float32Array,FLOAT_ARRAY)}function toIntArray(value,uniformLength){return toTypedArray(value,uniformLength,Int32Array,INT_ARRAY)}function toUIntArray(value,uniformLength){return toTypedArray(value,uniformLength,Uint32Array,UINT_ARRAY)}function parseUniformName(name){if("]"!==name[name.length-1])return{name:name,length:1,isArray:!1};var matches=name.match(/([^[]*)(\[[0-9]+\])?/);if(!matches||matches.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(name));return{name:matches[1],length:matches[2]||1,isArray:Boolean(matches[2])}}function getUniformSetter(gl,location,info){var setter=UNIFORM_SETTERS[info.type];if(!setter)throw new Error("Unknown GLSL uniform type ".concat(info.type));return setter().bind(null,gl,location)}function checkUniformValues(uniforms,source,uniformMap){for(var uniformName in uniforms){var value=uniforms[uniformName];if((!uniformMap||Boolean(uniformMap[uniformName]))&&!checkUniformValue(value))throw source=source?"".concat(source," "):"",console.error("".concat(source," Bad uniform ").concat(uniformName),value),new Error("".concat(source," Bad uniform ").concat(uniformName))}return!0}function checkUniformValue(value){return Array.isArray(value)||ArrayBuffer.isView(value)?function checkUniformArray(value){if(0===value.length)return!1;for(var checkLength=Math.min(value.length,16),i=0;i<checkLength;++i)if(!Number.isFinite(value[i]))return!1;return!0}(value):!!isFinite(value)||(!0===value||!1===value||(value instanceof classes_texture.a||(value instanceof renderbuffer.a||value instanceof classes_framebuffer.a&&Boolean(value.texture))))}function copyUniform(uniforms,key,value){if(Array.isArray(value)||ArrayBuffer.isView(value))if(uniforms[key])for(var dest=uniforms[key],i=0,len=value.length;i<len;++i)dest[i]=value[i];else uniforms[key]=value.slice();else uniforms[key]=value}function getSamplerSetter(){var cache=null;return function(gl,location,value){var update=cache!==value;return update&&(gl.uniform1i(location,value),cache=value),update}}function getArraySetter(functionName,toArray,size,uniformSetter){var cache=null,cacheLength=null;return function(gl,location,value){var arrayValue=toArray(value,size),length=arrayValue.length,update=!1;if(null===cache)cache=new Float32Array(length),cacheLength=length,update=!0;else{Object(assert.a)(cacheLength===length,"Uniform length cannot change.");for(var i=0;i<length;++i)if(arrayValue[i]!==cache[i]){update=!0;break}}return update&&(uniformSetter(gl,functionName,location,arrayValue),cache.set(arrayValue)),update}}function setVectorUniform(gl,functionName,location,value){gl[functionName](location,value)}function setMatrixUniform(gl,functionName,location,value){gl[functionName](location,!1,value)}function getShaderName(shader){var defaultName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",SHADER_NAME_REGEXP=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,match=shader.match(SHADER_NAME_REGEXP);return match?match[1]:defaultName}function parseGLSLCompilerError(errLog,src,shaderType,shaderName){for(var errorStrings=errLog.split(/\r?\n/),errors={},warnings={},name=shaderName||getShaderName(src)||"(unnamed)",shaderDescription="".concat(function getShaderTypeName(type){switch(type){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(shaderType)," shader ").concat(name),i=0;i<errorStrings.length;i++){var errorString=errorStrings[i];if(!(errorString.length<=1)){var segments=errorString.split(":"),type=segments[0],line=parseInt(segments[2],10);if(isNaN(line))throw new Error("GLSL compilation error in ".concat(shaderDescription,": ").concat(errLog));"WARNING"!==type?errors[line]=errorString:warnings[line]=errorString}}var lines=function addLineNumbers(string){var start=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,delim=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",lines=string.split(/\r?\n/),maxDigits=String(lines.length+start-1).length;return lines.map((function(line,i){var lineNumber=i+start,digits=String(lineNumber).length;return padLeft(lineNumber,maxDigits-digits)+delim+line}))}(src);return{shaderName:shaderDescription,errors:formatErrors(errors,lines),warnings:formatErrors(warnings,lines)}}function formatErrors(errors,lines){for(var message="",i=0;i<lines.length;i++){var line=lines[i];if((errors[i+3]||errors[i+2]||errors[i+1])&&(message+="".concat(line,"\n"),errors[i+1])){var error=errors[i+1],segments=error.split(":",3),type=segments[0],column=parseInt(segments[1],10)||0,err=error.substring(segments.join(":").length+1).trim();message+=padLeft("^^^ ".concat(type,": ").concat(err,"\n\n"),column)}}return message}function padLeft(string,digits){for(var result="",i=0;i<digits;++i)result+=" ";return"".concat(result).concat(string)}var webgl_checks=__webpack_require__(102),utils=__webpack_require__(154),shader_Shader=function(_Resource){function Shader(gl,props){var _this;Object(classCallCheck.a)(this,Shader),Object(webgl_checks.b)(gl),Object(assert.a)("string"==typeof props.source,"Shader: GLSL source code must be a JavaScript string");var id=getShaderName(props.source,null)||props.id||Object(utils.c)("unnamed ".concat(Shader.getTypeName(props.shaderType)));return(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Shader).call(this,gl,{id:id}))).shaderType=props.shaderType,_this.source=props.source,_this.initialize(props),_this}return Object(inherits.a)(Shader,_Resource),Object(createClass.a)(Shader,null,[{key:"getTypeName",value:function getTypeName(shaderType){switch(shaderType){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Object(assert.a)(!1),"unknown"}}}]),Object(createClass.a)(Shader,[{key:"initialize",value:function initialize(_ref){var source=_ref.source,shaderName=getShaderName(source,null);shaderName&&(this.id=Object(utils.c)(shaderName)),this._compile(source)}},{key:"getParameter",value:function getParameter(pname){return this.gl.getShaderParameter(this.handle,pname)}},{key:"toString",value:function toString(){return"".concat(Shader.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function getName(){return getShaderName(this.source)||"unnamed-shader"}},{key:"getSource",value:function getSource(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function getTranslatedSource(){var extension=this.gl.getExtension("WEBGL.debug_shaders");return extension?extension.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"}},{key:"_compile",value:function _compile(){var source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;source.startsWith("#version ")||(source="#version 100\n".concat(source)),this.source=source,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var compileStatus=this.getParameter(35713);if(!compileStatus){var infoLog=this.gl.getShaderInfoLog(this.handle),_parseGLSLCompilerErr=parseGLSLCompilerError(infoLog,this.source,this.shaderType,this.id),shaderName=_parseGLSLCompilerErr.shaderName,errors=_parseGLSLCompilerErr.errors,warnings=_parseGLSLCompilerErr.warnings;throw esm.g.error("GLSL compilation errors in ".concat(shaderName,"\n").concat(errors))(),esm.g.warn("GLSL compilation warnings in ".concat(shaderName,"\n").concat(warnings))(),new Error("GLSL compilation errors in ".concat(shaderName))}}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function _getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}]),Shader}(resource.a),shader_VertexShader=function(_Shader){function VertexShader(gl,props){return Object(classCallCheck.a)(this,VertexShader),"string"==typeof props&&(props={source:props}),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(VertexShader).call(this,gl,Object.assign({},props,{shaderType:35633})))}return Object(inherits.a)(VertexShader,_Shader),Object(createClass.a)(VertexShader,[{key:"_createHandle",value:function _createHandle(){return this.gl.createShader(35633)}}]),VertexShader}(shader_Shader),shader_FragmentShader=function(_Shader2){function FragmentShader(gl,props){return Object(classCallCheck.a)(this,FragmentShader),"string"==typeof props&&(props={source:props}),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(FragmentShader).call(this,gl,Object.assign({},props,{shaderType:35632})))}return Object(inherits.a)(FragmentShader,_Shader2),Object(createClass.a)(FragmentShader,[{key:"_createHandle",value:function _createHandle(){return this.gl.createShader(35632)}}]),FragmentShader}(shader_Shader),classes_accessor=__webpack_require__(66),attribute_utils=__webpack_require__(96),program_configuration_ProgramConfiguration=function(){function ProgramConfiguration(program){Object(classCallCheck.a)(this,ProgramConfiguration),this.id=program.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(program),this._readVaryingsFromProgram(program)}return Object(createClass.a)(ProgramConfiguration,[{key:"getAttributeInfo",value:function getAttributeInfo(locationOrName){var location=Number(locationOrName);return Number.isFinite(location)?this.attributeInfosByLocation[location]:this.attributeInfosByName[locationOrName]||null}},{key:"getAttributeLocation",value:function getAttributeLocation(locationOrName){var attributeInfo=this.getAttributeInfo(locationOrName);return attributeInfo?attributeInfo.location:-1}},{key:"getAttributeAccessor",value:function getAttributeAccessor(locationOrName){var attributeInfo=this.getAttributeInfo(locationOrName);return attributeInfo?attributeInfo.accessor:null}},{key:"getVaryingInfo",value:function getVaryingInfo(locationOrName){var location=Number(locationOrName);return Number.isFinite(location)?this.varyingInfos[location]:this.varyingInfosByName[locationOrName]||null}},{key:"getVaryingIndex",value:function getVaryingIndex(locationOrName){var varying=this.getVaryingInfo();return varying?varying.location:-1}},{key:"getVaryingAccessor",value:function getVaryingAccessor(locationOrName){var varying=this.getVaryingInfo();return varying?varying.accessor:null}},{key:"_readAttributesFromProgram",value:function _readAttributesFromProgram(program){for(var gl=program.gl,count=gl.getProgramParameter(program.handle,35721),index=0;index<count;index++){var _gl$getActiveAttrib=gl.getActiveAttrib(program.handle,index),name=_gl$getActiveAttrib.name,type=_gl$getActiveAttrib.type,size=_gl$getActiveAttrib.size,location=gl.getAttribLocation(program.handle,name);location>=0&&this._addAttribute(location,name,type,size)}this.attributeInfos.sort((function(a,b){return a.location-b.location}))}},{key:"_readVaryingsFromProgram",value:function _readVaryingsFromProgram(program){var gl=program.gl;if(Object(esm.f)(gl)){for(var count=gl.getProgramParameter(program.handle,35971),location=0;location<count;location++){var _gl$getTransformFeedb=gl.getTransformFeedbackVarying(program.handle,location),name=_gl$getTransformFeedb.name,type=_gl$getTransformFeedb.type,size=_gl$getTransformFeedb.size;this._addVarying(location,name,type,size)}this.varyingInfos.sort((function(a,b){return a.location-b.location}))}}},{key:"_addAttribute",value:function _addAttribute(location,name,compositeType,size){var _decomposeCompositeGL=Object(attribute_utils.a)(compositeType),accessor={type:_decomposeCompositeGL.type,size:size*_decomposeCompositeGL.components};this._inferProperties(location,name,accessor);var attributeInfo={location:location,name:name,accessor:new classes_accessor.a(accessor)};this.attributeInfos.push(attributeInfo),this.attributeInfosByLocation[location]=attributeInfo,this.attributeInfosByName[attributeInfo.name]=attributeInfo}},{key:"_inferProperties",value:function _inferProperties(location,name,accessor){/instance/i.test(name)&&(accessor.divisor=1)}},{key:"_addVarying",value:function _addVarying(location,name,compositeType,size){var _decomposeCompositeGL2=Object(attribute_utils.a)(compositeType),type=_decomposeCompositeGL2.type,components=_decomposeCompositeGL2.components,varying={location:location,name:name,accessor:new classes_accessor.a({type:type,size:size*components})};this.varyingInfos.push(varying),this.varyingInfosByName[varying.name]=varying}}]),ProgramConfiguration}(),constants_to_keys=__webpack_require__(117),V6_DEPRECATED_METHODS=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],program_Program=function(_Resource){function Program(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Program),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Program).call(this,gl,props))).stubRemovedMethods("Program","v6.0",V6_DEPRECATED_METHODS),_this._isCached=!1,_this.initialize(props),Object.seal(Object(assertThisInitialized.a)(_this)),_this._setId(props.id),_this}return Object(inherits.a)(Program,_Resource),Object(createClass.a)(Program,[{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},hash=props.hash,vs=props.vs,fs=props.fs,varyings=props.varyings,_props$bufferMode=props.bufferMode,bufferMode=void 0===_props$bufferMode?35981:_props$bufferMode;return this.hash=hash||"",this.vs="string"==typeof vs?new shader_VertexShader(this.gl,{id:"".concat(props.id,"-vs"),source:vs}):vs,this.fs="string"==typeof fs?new shader_FragmentShader(this.gl,{id:"".concat(props.id,"-fs"),source:fs}):fs,Object(assert.a)(this.vs instanceof shader_VertexShader),Object(assert.a)(this.fs instanceof shader_FragmentShader),this.uniforms={},this._textureUniforms={},this._texturesRenderable=!0,varyings&&varyings.length>0&&(Object(webgl_checks.a)(this.gl),this.varyings=varyings,this.gl.transformFeedbackVaryings(this.handle,varyings,bufferMode)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new program_configuration_ProgramConfiguration(this),this.setProps(props)}},{key:"delete",value:function _delete(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:Object(get.a)(Object(getPrototypeOf.a)(Program.prototype),"delete",this).call(this,options)}},{key:"setProps",value:function setProps(props){return"uniforms"in props&&this.setUniforms(props.uniforms),this}},{key:"draw",value:function draw(_ref){var _this2=this,logPriority=_ref.logPriority,_ref$drawMode=_ref.drawMode,drawMode=void 0===_ref$drawMode?4:_ref$drawMode,vertexCount=_ref.vertexCount,_ref$offset=_ref.offset,offset=void 0===_ref$offset?0:_ref$offset,start=_ref.start,end=_ref.end,_ref$isIndexed=_ref.isIndexed,isIndexed=void 0!==_ref$isIndexed&&_ref$isIndexed,_ref$indexType=_ref.indexType,indexType=void 0===_ref$indexType?5123:_ref$indexType,_ref$instanceCount=_ref.instanceCount,instanceCount=void 0===_ref$instanceCount?0:_ref$instanceCount,_ref$isInstanced=_ref.isInstanced,isInstanced=void 0===_ref$isInstanced?instanceCount>0:_ref$isInstanced,_ref$vertexArray=_ref.vertexArray,vertexArray=void 0===_ref$vertexArray?null:_ref$vertexArray,transformFeedback=_ref.transformFeedback,framebuffer=_ref.framebuffer,_ref$parameters=_ref.parameters,parameters=void 0===_ref$parameters?{}:_ref$parameters,uniforms=_ref.uniforms,samplers=_ref.samplers;if((uniforms||samplers)&&(esm.g.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(uniforms||{})),esm.g.priority>=logPriority){var fb=framebuffer?framebuffer.id:"default",message="mode=".concat(Object(constants_to_keys.a)(this.gl,drawMode)," verts=").concat(vertexCount," ")+"instances=".concat(instanceCount," indexType=").concat(Object(constants_to_keys.a)(this.gl,indexType)," ")+"isInstanced=".concat(isInstanced," isIndexed=").concat(isIndexed," ")+"Framebuffer=".concat(fb);esm.g.log(logPriority,message)()}return Object(assert.a)(vertexArray),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===vertexCount||isInstanced&&0===instanceCount)&&(vertexArray.bindForDraw(vertexCount,instanceCount,(function(){if(void 0!==framebuffer&&(parameters=Object.assign({},parameters,{framebuffer:framebuffer})),transformFeedback){var primitiveMode=Object(attribute_utils.c)(drawMode);transformFeedback.begin(primitiveMode)}_this2._bindTextures(),Object(esm.k)(_this2.gl,parameters,(function(){isIndexed&&isInstanced?_this2.gl.drawElementsInstanced(drawMode,vertexCount,indexType,offset,instanceCount):isIndexed&&Object(esm.f)(_this2.gl)&&!isNaN(start)&&!isNaN(end)?_this2.gl.drawRangeElements(drawMode,start,end,vertexCount,indexType,offset):isIndexed?_this2.gl.drawElements(drawMode,vertexCount,indexType,offset):isInstanced?_this2.gl.drawArraysInstanced(drawMode,offset,vertexCount,instanceCount):_this2.gl.drawArrays(drawMode,offset,vertexCount)})),transformFeedback&&transformFeedback.end()})),!0)}},{key:"setUniforms",value:function setUniforms(){var uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var uniformName in esm.g.priority>=2&&checkUniformValues(uniforms,this.id,this._uniformSetters),this.gl.useProgram(this.handle),uniforms){var uniform=uniforms[uniformName],uniformSetter=this._uniformSetters[uniformName];if(uniformSetter){var value=uniform,textureUpdate=!1;if(value instanceof classes_framebuffer.a&&(value=value.texture),value instanceof classes_texture.a)if(textureUpdate=this.uniforms[uniformName]!==uniform){void 0===uniformSetter.textureIndex&&(uniformSetter.textureIndex=this._textureIndexCounter++);var texture=value,textureIndex=uniformSetter.textureIndex;texture.bind(textureIndex),value=textureIndex,texture.loaded||(this._texturesRenderable=!1),this._textureUniforms[uniformName]=texture}else value=uniformSetter.textureIndex;else this._textureUniforms[uniformName]&&delete this._textureUniforms[uniformName];(uniformSetter(value)||textureUpdate)&&copyUniform(this.uniforms,uniformName,uniform)}}return this}},{key:"_areTexturesRenderable",value:function _areTexturesRenderable(){if(this._texturesRenderable)return!0;for(var uniformName in this._texturesRenderable=!0,this._textureUniforms){var texture=this._textureUniforms[uniformName];this._texturesRenderable=this._texturesRenderable&&texture.loaded}return this._texturesRenderable}},{key:"_bindTextures",value:function _bindTextures(){for(var uniformName in this._textureUniforms){var textureIndex=this._uniformSetters[uniformName].textureIndex;this._textureUniforms[uniformName].bind(textureIndex)}}},{key:"_createHandle",value:function _createHandle(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function _getOptionsFromHandle(handle){var shaderHandles=this.gl.getAttachedShaders(handle),opts={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=shaderHandles[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var shaderHandle=_step.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:opts.vs=new shader_VertexShader({handle:shaderHandle});break;case 35632:opts.fs=new shader_FragmentShader({handle:shaderHandle})}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return opts}},{key:"_getParameter",value:function _getParameter(pname){return this.gl.getProgramParameter(this.handle,pname)}},{key:"_setId",value:function _setId(id){if(!id){var programName=this._getName();this.id=Object(utils.c)(programName)}}},{key:"_getName",value:function _getName(){var programName=this.vs.getName()||this.fs.getName();return programName=(programName=programName.replace(/shader/i,""))?"".concat(programName,"-program"):"program"}},{key:"_compileAndLink",value:function _compileAndLink(){var gl=this.gl;if((gl.attachShader(this.handle,this.vs.handle),gl.attachShader(this.handle,this.fs.handle),esm.g.time(4,"linkProgram for ".concat(this._getName()))(),gl.linkProgram(this.handle),esm.g.timeEnd(4,"linkProgram for ".concat(this._getName()))(),gl.debug||esm.g.level>0)&&(gl.validateProgram(this.handle),!gl.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(gl.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function _readUniformLocationsFromLinkedProgram(){var gl=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var i=0;i<this._uniformCount;i++){var info=this.gl.getActiveUniform(this.handle,i),_parseUniformName=parseUniformName(info.name),name=_parseUniformName.name,location=(_parseUniformName.isArray,gl.getUniformLocation(this.handle,name));if(this._uniformSetters[name]=getUniformSetter(gl,location,info),info.size>1)for(var l=0;l<info.size;l++)location=gl.getUniformLocation(this.handle,"".concat(name,"[").concat(l,"]")),this._uniformSetters["".concat(name,"[").concat(l,"]")]=getUniformSetter(gl,location,info)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function getActiveUniforms(uniformIndices,pname){return this.gl.getActiveUniforms(this.handle,uniformIndices,pname)}},{key:"getUniformBlockIndex",value:function getUniformBlockIndex(blockName){return this.gl.getUniformBlockIndex(this.handle,blockName)}},{key:"getActiveUniformBlockParameter",value:function getActiveUniformBlockParameter(blockIndex,pname){return this.gl.getActiveUniformBlockParameter(this.handle,blockIndex,pname)}},{key:"uniformBlockBinding",value:function uniformBlockBinding(blockIndex,blockBinding){this.gl.uniformBlockBinding(this.handle,blockIndex,blockBinding)}}]),Program}(resource.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";var color=__webpack_require__(54),rgb=__webpack_require__(290),numberArray=function(a,b){b||(b=[]);var i,n=a?Math.min(b.length,a.length):0,c=b.slice();return function(t){for(i=0;i<n;++i)c[i]=a[i]*(1-t)+b[i]*t;return c}};function isNumberArray(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}function genericArray(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=value(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}var date=function(a,b){var d=new Date;return a=+a,b=+b,function(t){return d.setTime(a*(1-t)+b*t),d}},number=__webpack_require__(177),object=function(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=value(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}},reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");var string=function(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:Object(number.a)(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one(b){return function(t){return b(t)+""}}(q[0].x):function zero(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})},constant=__webpack_require__(152),value=__webpack_exports__.a=function(a,b){var c,t=typeof b;return null==b||"boolean"===t?Object(constant.a)(b):("number"===t?number.a:"string"===t?(c=Object(color.e)(b))?(b=c,rgb.a):string:b instanceof color.e?rgb.a:b instanceof Date?date:isNumberArray(b)?numberArray:Array.isArray(b)?genericArray:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?object:number.a)(a,b)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return sequentialPow}));var value=__webpack_require__(819),round=__webpack_require__(809),continuous=__webpack_require__(47),init=__webpack_require__(61);__webpack_require__(147),__webpack_require__(810),__webpack_require__(816);var pow=__webpack_require__(415);function transformer(){var t0,t1,k10,transform,unknown,x0=0,x1=1,interpolator=continuous.c,clamp=!1;function scale(x){return isNaN(x=+x)?unknown:interpolator(0===k10?.5:(x=(transform(x)-t0)*k10,clamp?Math.max(0,Math.min(1,x)):x))}function range(interpolate){return function(_){var r0,r1;return arguments.length?([r0,r1]=_,interpolator=interpolate(r0,r1),scale):[interpolator(0),interpolator(1)]}}return scale.domain=function(_){return arguments.length?([x0,x1]=_,t0=transform(x0=+x0),t1=transform(x1=+x1),k10=t0===t1?0:1/(t1-t0),scale):[x0,x1]},scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.range=range(value.a),scale.rangeRound=range(round.a),scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t){return transform=t,t0=t(x0),t1=t(x1),k10=t0===t1?0:1/(t1-t0),scale}}function copy(source,target){return target.domain(source.domain()).interpolator(source.interpolator()).clamp(source.clamp()).unknown(source.unknown())}function sequentialPow(){var scale=Object(pow.b)(transformer());return scale.copy=function(){return copy(scale,sequentialPow()).exponent(scale.exponent())},init.a.apply(scale,arguments)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return gouraudLighting}));var lights_glsl="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",lights={name:"lights",vs:lights_glsl,fs:lights_glsl,getUniforms:function getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:INITIAL_MODULE_OPTIONS;if("lightSources"in opts){var _ref3=opts.lightSources||{},ambientLight=_ref3.ambientLight,pointLights=_ref3.pointLights,directionalLights=_ref3.directionalLights,hasLights=ambientLight||pointLights&&pointLights.length>0||directionalLights&&directionalLights.length>0;return hasLights?Object.assign({},getLightSourceUniforms({ambientLight:ambientLight,pointLights:pointLights,directionalLights:directionalLights}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in opts){var lightSources={pointLights:[],directionalLights:[]},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=(opts.lights||[])[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var light=_step.value;switch(light.type){case"ambient":lightSources.ambientLight=light;break;case"directional":lightSources.directionalLights.push(light);break;case"point":lightSources.pointLights.push(light)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return getUniforms({lightSources:lightSources})}return{}},defines:{MAX_LIGHTS:3}},INITIAL_MODULE_OPTIONS={};function convertColor(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$color=_ref.color,color=void 0===_ref$color?[0,0,0]:_ref$color,_ref$intensity=_ref.intensity,intensity=void 0===_ref$intensity?1:_ref$intensity;return color.map((function(component){return component*intensity/255}))}function getLightSourceUniforms(_ref2){var ambientLight=_ref2.ambientLight,_ref2$pointLights=_ref2.pointLights,pointLights=void 0===_ref2$pointLights?[]:_ref2$pointLights,_ref2$directionalLigh=_ref2.directionalLights,directionalLights=void 0===_ref2$directionalLigh?[]:_ref2$directionalLigh,lightSourceUniforms={};return lightSourceUniforms["lighting_uAmbientLight.color"]=ambientLight?convertColor(ambientLight):[0,0,0],pointLights.forEach((function(pointLight,index){lightSourceUniforms["lighting_uPointLight[".concat(index,"].color")]=convertColor(pointLight),lightSourceUniforms["lighting_uPointLight[".concat(index,"].position")]=pointLight.position,lightSourceUniforms["lighting_uPointLight[".concat(index,"].attenuation")]=pointLight.attenuation||[1,0,0]})),lightSourceUniforms.lighting_uPointLightCount=pointLights.length,directionalLights.forEach((function(directionalLight,index){lightSourceUniforms["lighting_uDirectionalLight[".concat(index,"].color")]=convertColor(directionalLight),lightSourceUniforms["lighting_uDirectionalLight[".concat(index,"].direction")]=directionalLight.direction})),lightSourceUniforms.lighting_uDirectionalLightCount=directionalLights.length,lightSourceUniforms}var phong_lighting_glsl="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",gouraudLighting={name:"gouraud-lighting",dependencies:[lights],vs:phong_lighting_glsl,defines:{LIGHTING_VERTEX:1},getUniforms:phong_lighting_getUniforms},phong_lighting_INITIAL_MODULE_OPTIONS={};function getMaterialUniforms(material){var _material$ambient=material.ambient,ambient=void 0===_material$ambient?.35:_material$ambient,_material$diffuse=material.diffuse,diffuse=void 0===_material$diffuse?.6:_material$diffuse,_material$shininess=material.shininess,shininess=void 0===_material$shininess?32:_material$shininess,_material$specularCol=material.specularColor;return{lighting_uAmbient:ambient,lighting_uDiffuse:diffuse,lighting_uShininess:shininess,lighting_uSpecularColor:(void 0===_material$specularCol?[30,30,30]:_material$specularCol).map((function(x){return x/255}))}}function phong_lighting_getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:phong_lighting_INITIAL_MODULE_OPTIONS;if(!("material"in opts))return{};var material=opts.material;return material?getMaterialUniforms(material):{lighting_uEnabled:!1}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return bisectLeft}));var ascending=__webpack_require__(219);var compare,ascendingBisect=(1===(compare=ascending.a).length&&(compare=function ascendingComparator(f){return function(d,x){return Object(ascending.a)(f(d),x)}}(compare)),{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left;__webpack_exports__.b=bisectRight},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return rollup}));var identity=function(x){return x};function rollup(values,reduce,...keys){return nest(values,identity,reduce,keys)}function nest(values,map,reduce,keys){return function regroup(values,i){if(i>=keys.length)return reduce(values);const groups=new Map,keyof=keys[i++];let index=-1;for(const value of values){const key=keyof(value,++index,values),group=groups.get(key);group?group.push(value):groups.set(key,[value])}for(const[key,values]of groups)groups.set(key,regroup(values,i));return map(groups)}(values,0)}}]]);
//# sourceMappingURL=vendors~main.d966d09d83fafc1d18e0.bundle.js.map