(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,"a",(function(){return _defineProperty}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}__webpack_require__.d(__webpack_exports__,"a",(function(){return _createClass}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}__webpack_require__.d(__webpack_exports__,"a",(function(){return _classCallCheck}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}__webpack_require__.d(__webpack_exports__,"a",(function(){return _getPrototypeOf}))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(765)()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return _possibleConstructorReturn}));var _helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7);function _possibleConstructorReturn(self,call){return!call||"object"!==Object(_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(call)&&"function"!=typeof call?Object(_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__.a)(self):call}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return _inherits}));var _setPrototypeOf__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(156);function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Object(_setPrototypeOf__WEBPACK_IMPORTED_MODULE_0__.a)(subClass,superClass)}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}__webpack_require__.d(__webpack_exports__,"a",(function(){return _assertThisInitialized}))},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(737)},function(module,__webpack_exports__,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}__webpack_require__.d(__webpack_exports__,"a",(function(){return _slicedToArray}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var probe_gl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(440);__webpack_exports__.a=new probe_gl__WEBPACK_IMPORTED_MODULE_0__.a({id:"deck"}).enable()},function(module,exports,__webpack_require__){module.exports=__webpack_require__(763)},function(module,__webpack_exports__,__webpack_require__){"use strict";function _typeof2(obj){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof2(obj){return typeof obj}:function _typeof2(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function _typeof(obj){return _typeof2(obj)}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)})(obj)}__webpack_require__.d(__webpack_exports__,"a",(function(){return _typeof}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return EPSILON})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ARRAY_TYPE})),__webpack_require__.d(__webpack_exports__,"c",(function(){return RANDOM}));var EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var y=0,i=arguments.length;i--;)y+=arguments[i]*arguments[i];return Math.sqrt(y)})},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"deck.gl: assertion failed.")}__webpack_require__.d(__webpack_exports__,"a",(function(){return assert}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"p",(function(){return transpose})),__webpack_require__.d(__webpack_exports__,"e",(function(){return invert})),__webpack_require__.d(__webpack_exports__,"a",(function(){return determinant})),__webpack_require__.d(__webpack_exports__,"g",(function(){return multiply})),__webpack_require__.d(__webpack_exports__,"o",(function(){return translate})),__webpack_require__.d(__webpack_exports__,"n",(function(){return scale})),__webpack_require__.d(__webpack_exports__,"j",(function(){return rotate})),__webpack_require__.d(__webpack_exports__,"k",(function(){return rotateX})),__webpack_require__.d(__webpack_exports__,"l",(function(){return rotateY})),__webpack_require__.d(__webpack_exports__,"m",(function(){return rotateZ})),__webpack_require__.d(__webpack_exports__,"c",(function(){return fromQuat})),__webpack_require__.d(__webpack_exports__,"d",(function(){return frustum})),__webpack_require__.d(__webpack_exports__,"i",(function(){return perspective})),__webpack_require__.d(__webpack_exports__,"h",(function(){return ortho})),__webpack_require__.d(__webpack_exports__,"f",(function(){return lookAt})),__webpack_require__.d(__webpack_exports__,"b",(function(){return equals}));var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13);function transpose(out,a){if(out===a){var a01=a[1],a02=a[2],a03=a[3],a12=a[6],a13=a[7],a23=a[11];out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a01,out[6]=a[9],out[7]=a[13],out[8]=a02,out[9]=a12,out[11]=a[14],out[12]=a03,out[13]=a13,out[14]=a23}else out[0]=a[0],out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a[1],out[5]=a[5],out[6]=a[9],out[7]=a[13],out[8]=a[2],out[9]=a[6],out[10]=a[10],out[11]=a[14],out[12]=a[3],out[13]=a[7],out[14]=a[11],out[15]=a[15];return out}function invert(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;return det?(det=1/det,out[0]=(a11*b11-a12*b10+a13*b09)*det,out[1]=(a02*b10-a01*b11-a03*b09)*det,out[2]=(a31*b05-a32*b04+a33*b03)*det,out[3]=(a22*b04-a21*b05-a23*b03)*det,out[4]=(a12*b08-a10*b11-a13*b07)*det,out[5]=(a00*b11-a02*b08+a03*b07)*det,out[6]=(a32*b02-a30*b05-a33*b01)*det,out[7]=(a20*b05-a22*b02+a23*b01)*det,out[8]=(a10*b10-a11*b08+a13*b06)*det,out[9]=(a01*b08-a00*b10-a03*b06)*det,out[10]=(a30*b04-a31*b02+a33*b00)*det,out[11]=(a21*b02-a20*b04-a23*b00)*det,out[12]=(a11*b07-a10*b09-a12*b06)*det,out[13]=(a00*b09-a01*b07+a02*b06)*det,out[14]=(a31*b01-a30*b03-a32*b00)*det,out[15]=(a20*b03-a21*b01+a22*b00)*det,out):null}function determinant(a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];return(a00*a11-a01*a10)*(a22*a33-a23*a32)-(a00*a12-a02*a10)*(a21*a33-a23*a31)+(a00*a13-a03*a10)*(a21*a32-a22*a31)+(a01*a12-a02*a11)*(a20*a33-a23*a30)-(a01*a13-a03*a11)*(a20*a32-a22*a30)+(a02*a13-a03*a12)*(a20*a31-a21*a30)}function multiply(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return out[0]=b0*a00+b1*a10+b2*a20+b3*a30,out[1]=b0*a01+b1*a11+b2*a21+b3*a31,out[2]=b0*a02+b1*a12+b2*a22+b3*a32,out[3]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[4],b1=b[5],b2=b[6],b3=b[7],out[4]=b0*a00+b1*a10+b2*a20+b3*a30,out[5]=b0*a01+b1*a11+b2*a21+b3*a31,out[6]=b0*a02+b1*a12+b2*a22+b3*a32,out[7]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[8],b1=b[9],b2=b[10],b3=b[11],out[8]=b0*a00+b1*a10+b2*a20+b3*a30,out[9]=b0*a01+b1*a11+b2*a21+b3*a31,out[10]=b0*a02+b1*a12+b2*a22+b3*a32,out[11]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[12],b1=b[13],b2=b[14],b3=b[15],out[12]=b0*a00+b1*a10+b2*a20+b3*a30,out[13]=b0*a01+b1*a11+b2*a21+b3*a31,out[14]=b0*a02+b1*a12+b2*a22+b3*a32,out[15]=b0*a03+b1*a13+b2*a23+b3*a33,out}function translate(out,a,v){var a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,x=v[0],y=v[1],z=v[2];return a===out?(out[12]=a[0]*x+a[4]*y+a[8]*z+a[12],out[13]=a[1]*x+a[5]*y+a[9]*z+a[13],out[14]=a[2]*x+a[6]*y+a[10]*z+a[14],out[15]=a[3]*x+a[7]*y+a[11]*z+a[15]):(a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],out[0]=a00,out[1]=a01,out[2]=a02,out[3]=a03,out[4]=a10,out[5]=a11,out[6]=a12,out[7]=a13,out[8]=a20,out[9]=a21,out[10]=a22,out[11]=a23,out[12]=a00*x+a10*y+a20*z+a[12],out[13]=a01*x+a11*y+a21*z+a[13],out[14]=a02*x+a12*y+a22*z+a[14],out[15]=a03*x+a13*y+a23*z+a[15]),out}function scale(out,a,v){var x=v[0],y=v[1],z=v[2];return out[0]=a[0]*x,out[1]=a[1]*x,out[2]=a[2]*x,out[3]=a[3]*x,out[4]=a[4]*y,out[5]=a[5]*y,out[6]=a[6]*y,out[7]=a[7]*y,out[8]=a[8]*z,out[9]=a[9]*z,out[10]=a[10]*z,out[11]=a[11]*z,out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out}function rotate(out,a,rad,axis){var s,c,t,a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,b00,b01,b02,b10,b11,b12,b20,b21,b22,x=axis[0],y=axis[1],z=axis[2],len=Math.hypot(x,y,z);return len<_common_js__WEBPACK_IMPORTED_MODULE_0__.b?null:(x*=len=1/len,y*=len,z*=len,s=Math.sin(rad),t=1-(c=Math.cos(rad)),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],b00=x*x*t+c,b01=y*x*t+z*s,b02=z*x*t-y*s,b10=x*y*t-z*s,b11=y*y*t+c,b12=z*y*t+x*s,b20=x*z*t+y*s,b21=y*z*t-x*s,b22=z*z*t+c,out[0]=a00*b00+a10*b01+a20*b02,out[1]=a01*b00+a11*b01+a21*b02,out[2]=a02*b00+a12*b01+a22*b02,out[3]=a03*b00+a13*b01+a23*b02,out[4]=a00*b10+a10*b11+a20*b12,out[5]=a01*b10+a11*b11+a21*b12,out[6]=a02*b10+a12*b11+a22*b12,out[7]=a03*b10+a13*b11+a23*b12,out[8]=a00*b20+a10*b21+a20*b22,out[9]=a01*b20+a11*b21+a21*b22,out[10]=a02*b20+a12*b21+a22*b22,out[11]=a03*b20+a13*b21+a23*b22,a!==out&&(out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out)}function rotateX(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a!==out&&(out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[4]=a10*c+a20*s,out[5]=a11*c+a21*s,out[6]=a12*c+a22*s,out[7]=a13*c+a23*s,out[8]=a20*c-a10*s,out[9]=a21*c-a11*s,out[10]=a22*c-a12*s,out[11]=a23*c-a13*s,out}function rotateY(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a!==out&&(out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[0]=a00*c-a20*s,out[1]=a01*c-a21*s,out[2]=a02*c-a22*s,out[3]=a03*c-a23*s,out[8]=a00*s+a20*c,out[9]=a01*s+a21*c,out[10]=a02*s+a22*c,out[11]=a03*s+a23*c,out}function rotateZ(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7];return a!==out&&(out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[0]=a00*c+a10*s,out[1]=a01*c+a11*s,out[2]=a02*c+a12*s,out[3]=a03*c+a13*s,out[4]=a10*c-a00*s,out[5]=a11*c-a01*s,out[6]=a12*c-a02*s,out[7]=a13*c-a03*s,out}function fromQuat(out,q){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,yx=y*x2,yy=y*y2,zx=z*x2,zy=z*y2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-yy-zz,out[1]=yx+wz,out[2]=zx-wy,out[3]=0,out[4]=yx-wz,out[5]=1-xx-zz,out[6]=zy+wx,out[7]=0,out[8]=zx+wy,out[9]=zy-wx,out[10]=1-xx-yy,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out}function frustum(out,left,right,bottom,top,near,far){var rl=1/(right-left),tb=1/(top-bottom),nf=1/(near-far);return out[0]=2*near*rl,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=2*near*tb,out[6]=0,out[7]=0,out[8]=(right+left)*rl,out[9]=(top+bottom)*tb,out[10]=(far+near)*nf,out[11]=-1,out[12]=0,out[13]=0,out[14]=far*near*2*nf,out[15]=0,out}function perspective(out,fovy,aspect,near,far){var nf,f=1/Math.tan(fovy/2);return out[0]=f/aspect,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=f,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[11]=-1,out[12]=0,out[13]=0,out[15]=0,null!=far&&far!==1/0?(nf=1/(near-far),out[10]=(far+near)*nf,out[14]=2*far*near*nf):(out[10]=-1,out[14]=-2*near),out}function ortho(out,left,right,bottom,top,near,far){var lr=1/(left-right),bt=1/(bottom-top),nf=1/(near-far);return out[0]=-2*lr,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=-2*bt,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=2*nf,out[11]=0,out[12]=(left+right)*lr,out[13]=(top+bottom)*bt,out[14]=(far+near)*nf,out[15]=1,out}function lookAt(out,eye,center,up){var x0,x1,x2,y0,y1,y2,z0,z1,z2,len,eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2],centerx=center[0],centery=center[1],centerz=center[2];return Math.abs(eyex-centerx)<_common_js__WEBPACK_IMPORTED_MODULE_0__.b&&Math.abs(eyey-centery)<_common_js__WEBPACK_IMPORTED_MODULE_0__.b&&Math.abs(eyez-centerz)<_common_js__WEBPACK_IMPORTED_MODULE_0__.b?function identity(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out}(out):(z0=eyex-centerx,z1=eyey-centery,z2=eyez-centerz,x0=upy*(z2*=len=1/Math.hypot(z0,z1,z2))-upz*(z1*=len),x1=upz*(z0*=len)-upx*z2,x2=upx*z1-upy*z0,(len=Math.hypot(x0,x1,x2))?(x0*=len=1/len,x1*=len,x2*=len):(x0=0,x1=0,x2=0),y0=z1*x2-z2*x1,y1=z2*x0-z0*x2,y2=z0*x1-z1*x0,(len=Math.hypot(y0,y1,y2))?(y0*=len=1/len,y1*=len,y2*=len):(y0=0,y1=0,y2=0),out[0]=x0,out[1]=y0,out[2]=z0,out[3]=0,out[4]=x1,out[5]=y1,out[6]=z1,out[7]=0,out[8]=x2,out[9]=y2,out[10]=z2,out[11]=0,out[12]=-(x0*eyex+x1*eyey+x2*eyez),out[13]=-(y0*eyex+y1*eyey+y2*eyez),out[14]=-(z0*eyex+z1*eyey+z2*eyez),out[15]=1,out)}function equals(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8],a9=a[9],a10=a[10],a11=a[11],a12=a[12],a13=a[13],a14=a[14],a15=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];return Math.abs(a0-b0)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a8),Math.abs(b8))&&Math.abs(a9-b9)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a9),Math.abs(b9))&&Math.abs(a10-b10)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a10),Math.abs(b10))&&Math.abs(a11-b11)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a11),Math.abs(b11))&&Math.abs(a12-b12)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a12),Math.abs(b12))&&Math.abs(a13-b13)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a13),Math.abs(b13))&&Math.abs(a14-b14)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a14),Math.abs(b14))&&Math.abs(a15-b15)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a15),Math.abs(b15))}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}__webpack_require__.d(__webpack_exports__,"a",(function(){return _toConsumableArray}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"luma.gl: assertion failed.")}__webpack_require__.d(__webpack_exports__,"a",(function(){return assert}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}__webpack_require__.d(__webpack_exports__,"a",(function(){return _asyncToGenerator}))},function(module,exports,__webpack_require__){var global=__webpack_require__(29),getOwnPropertyDescriptor=__webpack_require__(145).f,createNonEnumerableProperty=__webpack_require__(74),redefine=__webpack_require__(75),setGlobal=__webpack_require__(275),copyConstructorProperties=__webpack_require__(349),isForced=__webpack_require__(212);module.exports=function(options,source){var target,key,targetProperty,sourceProperty,descriptor,TARGET=options.target,GLOBAL=options.global,STATIC=options.stat;if(target=GLOBAL?global:STATIC?global[TARGET]||setGlobal(TARGET,{}):(global[TARGET]||{}).prototype)for(key in source){if(sourceProperty=source[key],targetProperty=options.noTargetGet?(descriptor=getOwnPropertyDescriptor(target,key))&&descriptor.value:target[key],!isForced(GLOBAL?key:TARGET+(STATIC?".":"#")+key,options.forced)&&void 0!==targetProperty){if(typeof sourceProperty==typeof targetProperty)continue;copyConstructorProperties(sourceProperty,targetProperty)}(options.sham||targetProperty&&targetProperty.sham)&&createNonEnumerableProperty(sourceProperty,"sham",!0),redefine(target,key,sourceProperty,options)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var getPrototypeOf=__webpack_require__(3);function get_get(target,property,receiver){return(get_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=Object(getPrototypeOf.a)(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}})(target,property,receiver||target)}__webpack_require__.d(__webpack_exports__,"a",(function(){return get_get}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return config})),__webpack_require__.d(__webpack_exports__,"e",(function(){return formatValue})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isArray})),__webpack_require__.d(__webpack_exports__,"h",(function(){return radians})),__webpack_require__.d(__webpack_exports__,"c",(function(){return degrees})),__webpack_require__.d(__webpack_exports__,"a",(function(){return clamp})),__webpack_require__.d(__webpack_exports__,"g",(function(){return lerp})),__webpack_require__.d(__webpack_exports__,"d",(function(){return equals}));var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),RADIANS_TO_DEGREES=(__webpack_require__(157),__webpack_require__(16),__webpack_require__(195),1/Math.PI*180),DEGREES_TO_RADIANS=1/180*Math.PI,config={};function formatValue(value){var _ref$precision=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,precision=void 0===_ref$precision?config.precision||4:_ref$precision;return value=function round(value){return Math.round(value/config.EPSILON)*config.EPSILON}(value),"".concat(parseFloat(value.toPrecision(precision)))}function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)&&void 0!==value.length}function map(value,func,result){if(isArray(value)){result=result||function duplicateArray(array){return array.clone?array.clone():new Array(array.length)}(value);for(var i=0;i<result.length&&i<value.length;++i)result[i]=func(value[i],i,result);return result}return func(value)}function radians(degrees,result){return map(degrees,(function(degrees){return degrees*DEGREES_TO_RADIANS}),result)}function degrees(radians,result){return map(radians,(function(radians){return radians*RADIANS_TO_DEGREES}),result)}function clamp(value,min,max){return map(value,(function(value){return Math.max(min,Math.min(max,value))}))}function lerp(a,b,t){return isArray(a)?a.map((function(ai,i){return lerp(ai,b[i],t)})):t*b+(1-t)*a}function equals(a,b,epsilon){var oldEpsilon=config.EPSILON;epsilon&&(config.EPSILON=epsilon);try{if(a===b)return!0;if(isArray(a)&&isArray(b)){if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i)if(!equals(a[i],b[i]))return!1;return!0}return a&&"object"===Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(a)&&a.equals?a.equals(b):b&&"object"===Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(b)&&b.equals?b.equals(a):Math.abs(a-b)<=config.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}finally{config.EPSILON=oldEpsilon}}config.EPSILON=1e-12,config.debug=!1,config.precision=4,config.printTypes=!1,config.printDegrees=!1,config.printRowMajor=!0},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"l",(function(){return zoomToScale})),__webpack_require__.d(__webpack_exports__,"i",(function(){return scaleToZoom})),__webpack_require__.d(__webpack_exports__,"g",(function(){return lngLatToWorld})),__webpack_require__.d(__webpack_exports__,"j",(function(){return worldToLngLat})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getMeterZoom})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getDistanceScales})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addMetersToLngLat})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getViewMatrix})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getProjectionParameters})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getProjectionMatrix})),__webpack_require__.d(__webpack_exports__,"k",(function(){return worldToPixels})),__webpack_require__.d(__webpack_exports__,"h",(function(){return pixelsToWorld}));var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_math_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(56),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(15),gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(48),gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(52),_assert__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(93),PI=Math.PI,PI_4=PI/4,DEGREES_TO_RADIANS=PI/180,RADIANS_TO_DEGREES=180/PI,TILE_SIZE=512,EARTH_CIRCUMFERENCE=4003e4,DEFAULT_ALTITUDE=1.5;function zoomToScale(zoom){return Math.pow(2,zoom)}function scaleToZoom(scale){return Math.log2(scale)}function lngLatToWorld(_ref,scale){var _ref2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_ref,2),lng=_ref2[0],lat=_ref2[1];Object(_assert__WEBPACK_IMPORTED_MODULE_5__.a)(Number.isFinite(lng)&&Number.isFinite(scale)),Object(_assert__WEBPACK_IMPORTED_MODULE_5__.a)(Number.isFinite(lat)&&lat>=-90&&lat<=90,"invalid latitude");var phi2=lat*DEGREES_TO_RADIANS;return[(scale*=TILE_SIZE)*(lng*DEGREES_TO_RADIANS+PI)/(2*PI),scale*(PI-Math.log(Math.tan(PI_4+.5*phi2)))/(2*PI)]}function worldToLngLat(_ref3,scale){var _ref4=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_ref3,2),x=_ref4[0],y=_ref4[1],lambda2=x/(scale*=TILE_SIZE)*(2*PI)-PI,phi2=2*(Math.atan(Math.exp(PI-y/scale*(2*PI)))-PI_4);return[lambda2*RADIANS_TO_DEGREES,phi2*RADIANS_TO_DEGREES]}function getMeterZoom(_ref5){var latitude=_ref5.latitude;Object(_assert__WEBPACK_IMPORTED_MODULE_5__.a)(Number.isFinite(latitude));var latCosine=Math.cos(latitude*DEGREES_TO_RADIANS);return scaleToZoom(EARTH_CIRCUMFERENCE*latCosine)-9}function getDistanceScales(_ref6){var latitude=_ref6.latitude,longitude=_ref6.longitude,zoom=_ref6.zoom,scale=_ref6.scale,_ref6$highPrecision=_ref6.highPrecision,highPrecision=void 0!==_ref6$highPrecision&&_ref6$highPrecision;scale=void 0!==scale?scale:zoomToScale(zoom),Object(_assert__WEBPACK_IMPORTED_MODULE_5__.a)(Number.isFinite(latitude)&&Number.isFinite(longitude)&&Number.isFinite(scale));var result={},worldSize=TILE_SIZE*scale,latCosine=Math.cos(latitude*DEGREES_TO_RADIANS),pixelsPerDegreeX=worldSize/360,pixelsPerDegreeY=pixelsPerDegreeX/latCosine,altPixelsPerMeter=worldSize/EARTH_CIRCUMFERENCE/latCosine;if(result.pixelsPerMeter=[altPixelsPerMeter,-altPixelsPerMeter,altPixelsPerMeter],result.metersPerPixel=[1/altPixelsPerMeter,-1/altPixelsPerMeter,1/altPixelsPerMeter],result.pixelsPerDegree=[pixelsPerDegreeX,-pixelsPerDegreeY,altPixelsPerMeter],result.degreesPerPixel=[1/pixelsPerDegreeX,-1/pixelsPerDegreeY,1/altPixelsPerMeter],highPrecision){var latCosine2=DEGREES_TO_RADIANS*Math.tan(latitude*DEGREES_TO_RADIANS)/latCosine,pixelsPerDegreeY2=pixelsPerDegreeX*latCosine2/2,altPixelsPerDegree2=worldSize/EARTH_CIRCUMFERENCE*latCosine2,altPixelsPerMeter2=altPixelsPerDegree2/pixelsPerDegreeY*altPixelsPerMeter;result.pixelsPerDegree2=[0,-pixelsPerDegreeY2,altPixelsPerDegree2],result.pixelsPerMeter2=[altPixelsPerMeter2,0,altPixelsPerMeter2]}return result}function addMetersToLngLat(lngLatZ,xyz){var _lngLatZ=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(lngLatZ,3),longitude=_lngLatZ[0],latitude=_lngLatZ[1],z0=_lngLatZ[2],_xyz=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],_getDistanceScales=getDistanceScales({longitude:longitude,latitude:latitude,scale:1,highPrecision:!0}),pixelsPerMeter=_getDistanceScales.pixelsPerMeter,pixelsPerMeter2=_getDistanceScales.pixelsPerMeter2,worldspace=lngLatToWorld(lngLatZ,1);worldspace[0]+=x*(pixelsPerMeter[0]+pixelsPerMeter2[0]*y),worldspace[1]+=y*(pixelsPerMeter[1]+pixelsPerMeter2[1]*y);var newLngLat=worldToLngLat(worldspace,1),newZ=(z0||0)+(z||0);return Number.isFinite(z0)||Number.isFinite(z)?[newLngLat[0],newLngLat[1],newZ]:newLngLat}function getViewMatrix(_ref7){var height=_ref7.height,pitch=_ref7.pitch,bearing=_ref7.bearing,altitude=_ref7.altitude,_ref7$center=_ref7.center,center=void 0===_ref7$center?null:_ref7$center,_ref7$flipY=_ref7.flipY,flipY=void 0!==_ref7$flipY&&_ref7$flipY,vm=Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.a)();return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.o(vm,vm,[0,0,-altitude]),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.n(vm,vm,[1,1,1/height]),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.k(vm,vm,-pitch*DEGREES_TO_RADIANS),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.m(vm,vm,bearing*DEGREES_TO_RADIANS),flipY&&gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.n(vm,vm,[1,-1,1]),center&&gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.o(vm,vm,gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_4__.d([],center)),vm}function getProjectionParameters(_ref8){var width=_ref8.width,height=_ref8.height,_ref8$altitude=_ref8.altitude,altitude=void 0===_ref8$altitude?DEFAULT_ALTITUDE:_ref8$altitude,_ref8$pitch=_ref8.pitch,pitch=void 0===_ref8$pitch?0:_ref8$pitch,_ref8$nearZMultiplier=_ref8.nearZMultiplier,nearZMultiplier=void 0===_ref8$nearZMultiplier?1:_ref8$nearZMultiplier,_ref8$farZMultiplier=_ref8.farZMultiplier,farZMultiplier=void 0===_ref8$farZMultiplier?1:_ref8$farZMultiplier,pitchRadians=pitch*DEGREES_TO_RADIANS,halfFov=Math.atan(.5/altitude),topHalfSurfaceDistance=Math.sin(halfFov)*altitude/Math.sin(Math.PI/2-pitchRadians-halfFov),farZ=Math.cos(Math.PI/2-pitchRadians)*topHalfSurfaceDistance+altitude;return{fov:2*Math.atan(height/2/altitude),aspect:width/height,focalDistance:altitude,near:nearZMultiplier,far:farZ*farZMultiplier}}function getProjectionMatrix(_ref9){var width=_ref9.width,height=_ref9.height,pitch=_ref9.pitch,_getProjectionParamet=getProjectionParameters({width:width,height:height,altitude:_ref9.altitude,pitch:pitch,nearZMultiplier:_ref9.nearZMultiplier,farZMultiplier:_ref9.farZMultiplier}),fov=_getProjectionParamet.fov,aspect=_getProjectionParamet.aspect,near=_getProjectionParamet.near,far=_getProjectionParamet.far;return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.i([],fov,aspect,near,far)}function worldToPixels(xyz,pixelProjectionMatrix){var _xyz2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(xyz,3),x=_xyz2[0],y=_xyz2[1],_xyz2$=_xyz2[2],z=void 0===_xyz2$?0:_xyz2$;return Object(_assert__WEBPACK_IMPORTED_MODULE_5__.a)(Number.isFinite(x)&&Number.isFinite(y)&&Number.isFinite(z)),Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.d)(pixelProjectionMatrix,[x,y,z,1])}function pixelsToWorld(xyz,pixelUnprojectionMatrix){var targetZ=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,_xyz3=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(xyz,3),x=_xyz3[0],y=_xyz3[1],z=_xyz3[2];if(Object(_assert__WEBPACK_IMPORTED_MODULE_5__.a)(Number.isFinite(x)&&Number.isFinite(y),"invalid pixel coordinate"),Number.isFinite(z))return Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.d)(pixelUnprojectionMatrix,[x,y,z,1]);var coord0=Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.d)(pixelUnprojectionMatrix,[x,y,0,1]),coord1=Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.d)(pixelUnprojectionMatrix,[x,y,1,1]),z0=coord0[2],z1=coord1[2],t=z0===z1?0:((targetZ||0)-z0)/(z1-z0);return gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_3__.c([],coord0,coord1,t)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return COORDINATE_SYSTEM})),__webpack_require__.d(__webpack_exports__,"b",(function(){return EVENTS}));var COORDINATE_SYSTEM={LNGLAT:1,LNGLAT_DEPRECATED:5,METER_OFFSETS:2,METERS:2,LNGLAT_OFFSETS:3,IDENTITY:0},EVENTS={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return VERTEX_SHADER})),__webpack_require__.d(__webpack_exports__,"a",(function(){return FRAGMENT_SHADER}));var VERTEX_SHADER="vs",FRAGMENT_SHADER="fs"},function(module,__webpack_exports__,__webpack_require__){"use strict";var probe_gl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(440);__webpack_exports__.a=new probe_gl__WEBPACK_IMPORTED_MODULE_0__.a({id:"luma"}).enable()},,function(module,exports,__webpack_require__){var $=__webpack_require__(19),DESCRIPTORS=__webpack_require__(49);$({target:"Object",stat:!0,forced:!DESCRIPTORS,sham:!DESCRIPTORS},{defineProperty:__webpack_require__(61).f})},,function(module,exports,__webpack_require__){(function(global){var check=function(it){return it&&it.Math==Math&&it};module.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||Function("return this")()}).call(this,__webpack_require__(36))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},isBrowser="undefined"!=typeof window&&window.addEventListener,timers=new Map,isReady=function isReady(){return isBrowser&&window.__SEER_INITIALIZED__},throttle=function throttle(key,delay){var time=timers.get(key),now=Date.now();return!!(time&&now-time<delay)||(timers.set(key,now),!1)},replacer=function replacer(seen){return function(key,value){if(!value||"object"!==(void 0===value?"undefined":_typeof(value))||!seen.has(value))return seen.add(value),Object.prototype.toString.call(value).slice(8,-1).includes("Array")?Array.prototype.slice.call(value,0,20):value}},send=function send(type){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(isBrowser&&isReady()){var seen=new Set,payload=JSON.stringify(data,replacer(seen));try{window.postMessage({type:type,payload:payload,source:"seer-agent"},"*")}catch(e){if(throttle("seer-log",2e3))return;console.log(e)}}},listeners=new Map,listener=function listener(message){if(message&&message.data&&"seer-core"===message.data.source){var _message$data=message.data,type=_message$data.type,payload=_message$data.payload,typeListeners=listeners.get(type);typeListeners&&typeListeners.forEach((function(cb){return cb(payload)}))}},init=function init(){isBrowser&&!window.__SEER_LISTENER__&&(window.addEventListener("message",listener),window.__SEER_LISTENER__=!0)};exports.default={send:send,throttle:throttle,isReady:isReady,list:function list(key,data){return send("LIST",{key:key,data:data})},listItem:function listItem(key,itemKey){var data=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return send("LIST_ITEM",{key:key,itemKey:itemKey,data:data})},updateItem:function updateItem(key,itemKey,path,data){return send("UPDATE_ITEM",{key:key,itemKey:itemKey,path:path,data:data})},multiUpdate:function multiUpdate(key,itemKey,array){return send("MULTI_UPDATE_ITEM",{key:key,itemKey:itemKey,array:array})},deleteItem:function deleteItem(key,itemKey){return send("DELETE_ITEM",{key:key,itemKey:itemKey})},addLog:function addLog(key,itemKey,msg){return send("ADD_LOG",{key:key,itemKey:itemKey,msg:msg})},listeners:listeners,listenFor:function listenFor(type,cb){if(isBrowser){if(!type||!cb)throw new Error("Please provide a type and callback");listeners.has(type)||listeners.set(type,[]),window.__SEER_LISTENER__||init(),listeners.get(type).push(cb)}},removeListener:function removeListener(cb){listeners.forEach((function(typeListeners,key){listeners.set(key,typeListeners.filter((function(l){return l!==cb})))}))},init:init,clean:function clean(){isBrowser&&window.__SEER_LISTENER__&&(window.removeEventListener("message",listener),delete window.__SEER_LISTENER__)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PROJECT_COORDINATE_SYSTEM}));var PROJECT_COORDINATE_SYSTEM={LNG_LAT:1,LNGLAT_AUTO_OFFSET:4,METER_OFFSETS:2,LNGLAT_OFFSETS:3,IDENTITY:0}},function(module,exports,__webpack_require__){"use strict";var keys=__webpack_require__(266),hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),toStr=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,supportsDescriptors=origDefineProperty&&function(){var obj={};try{for(var _ in origDefineProperty(obj,"x",{enumerable:!1,value:obj}),obj)return!1;return obj.x===obj}catch(e){return!1}}(),defineProperty=function(object,name,value,predicate){var fn;name in object&&("function"!=typeof(fn=predicate)||"[object Function]"!==toStr.call(fn)||!predicate())||(supportsDescriptors?origDefineProperty(object,name,{configurable:!0,enumerable:!1,value:value,writable:!0}):object[name]=value)},defineProperties=function(object,map){var predicates=arguments.length>2?arguments[2]:{},props=keys(map);hasSymbols&&(props=concat.call(props,Object.getOwnPropertySymbols(map)));for(var i=0;i<props.length;i+=1)defineProperty(object,props[i],map[props[i]],predicates[props[i]])};defineProperties.supportsDescriptors=!!supportsDescriptors,module.exports=defineProperties},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(error){return!0}}},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return checkNumber})),__webpack_require__.d(__webpack_exports__,"b",(function(){return checkVector})),__webpack_require__.d(__webpack_exports__,"c",(function(){return deprecated}));var _common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21);function checkNumber(value){if(!Number.isFinite(value))throw new Error("Invalid number ".concat(value));return value}function checkVector(v,length,callerName){if(_common__WEBPACK_IMPORTED_MODULE_0__.b.debug&&!function validateVector(v,length){if(v.length!==length)return!1;for(var i=0;i<v.length;++i)if(!Number.isFinite(v[i]))return!1;return!0}(v,length))throw new Error("math.gl: ".concat(""|callerName," some fields set to invalid numbers'"));return v}var map={};function deprecated(method,version){map[method]||(map[method]=!0,console.warn("".concat(method," has been removed in version ").concat(version,", see upgrade guide for more information")))}},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){var global=__webpack_require__(29),shared=__webpack_require__(173),uid=__webpack_require__(209),NATIVE_SYMBOL=__webpack_require__(353),Symbol=global.Symbol,store=shared("wks");module.exports=function(name){return store[name]||(store[name]=NATIVE_SYMBOL&&Symbol[name]||(NATIVE_SYMBOL?Symbol:uid)("Symbol."+name))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Buffer}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6),_resource__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(47),_accessor__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(66),_webgl_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(39),_webgl_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(113),_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(317),_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(17),_utils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(25),DEPRECATED_PROPS={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},PROP_CHECKS_INITIALIZE={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:DEPRECATED_PROPS},PROP_CHECKS_SET_PROPS={removedProps:DEPRECATED_PROPS},Buffer=function(_Resource){function Buffer(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Buffer),(_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(Buffer).call(this,gl,props))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),_this.target=props.target||(_this.gl.webgl2?36662:34962),_this.initialize(props),Object.seal(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__.a)(_this)),_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__.a)(Buffer,_Resource),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Buffer,[{key:"getElementCount",value:function getElementCount(){var accessor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/_accessor__WEBPACK_IMPORTED_MODULE_7__.a.getBytesPerElement(accessor))}},{key:"getVertexCount",value:function getVertexCount(){var accessor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/_accessor__WEBPACK_IMPORTED_MODULE_7__.a.getBytesPerVertex(accessor))}},{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(props)&&(props={data:props}),Number.isFinite(props)&&(props={byteLength:props}),props=Object(_utils__WEBPACK_IMPORTED_MODULE_10__.a)("Buffer",props,PROP_CHECKS_INITIALIZE),this.usage=props.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},props,props.accessor)),props.data?this._setData(props.data):this._setByteLength(props.byteLength||0),this}},{key:"setProps",value:function setProps(props){return"accessor"in(props=Object(_utils__WEBPACK_IMPORTED_MODULE_10__.a)("Buffer",props,PROP_CHECKS_SET_PROPS))&&this.setAccessor(props.accessor),this}},{key:"setAccessor",value:function setAccessor(accessor){return delete(accessor=Object.assign({},accessor)).buffer,this.accessor=new _accessor__WEBPACK_IMPORTED_MODULE_7__.a(accessor),this}},{key:"reallocate",value:function reallocate(byteLength){return byteLength>this.byteLength?(this._setByteLength(byteLength),!0):(this.bytesUsed=byteLength,!1)}},{key:"setData",value:function setData(props){return this.initialize(props)}},{key:"subData",value:function subData(props){ArrayBuffer.isView(props)&&(props={data:props});var _props=props,data=_props.data,_props$offset=_props.offset,offset=void 0===_props$offset?0:_props$offset,_props$srcOffset=_props.srcOffset,srcOffset=void 0===_props$srcOffset?0:_props$srcOffset,byteLength=props.byteLength||props.length;Object(_utils__WEBPACK_IMPORTED_MODULE_11__.a)(data);var target=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(target,this.handle),0!==srcOffset||void 0!==byteLength?(Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_8__.a)(this.gl),this.gl.bufferSubData(this.target,offset,data,srcOffset,byteLength)):this.gl.bufferSubData(target,offset,data),this.gl.bindBuffer(target,null),this.debugData=null,this._inferType(data),this}},{key:"copyData",value:function copyData(_ref){var sourceBuffer=_ref.sourceBuffer,_ref$readOffset=_ref.readOffset,readOffset=void 0===_ref$readOffset?0:_ref$readOffset,_ref$writeOffset=_ref.writeOffset,writeOffset=void 0===_ref$writeOffset?0:_ref$writeOffset,size=_ref.size,gl=this.gl;return Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_8__.a)(gl),gl.bindBuffer(36662,sourceBuffer.handle),gl.bindBuffer(36663,this.handle),gl.copyBufferSubData(36662,36663,readOffset,writeOffset,size),gl.bindBuffer(36662,null),gl.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function getData(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref2$dstData=_ref2.dstData,dstData=void 0===_ref2$dstData?null:_ref2$dstData,_ref2$srcByteOffset=_ref2.srcByteOffset,srcByteOffset=void 0===_ref2$srcByteOffset?0:_ref2$srcByteOffset,_ref2$dstOffset=_ref2.dstOffset,dstOffset=void 0===_ref2$dstOffset?0:_ref2$dstOffset,_ref2$length=_ref2.length,length=void 0===_ref2$length?0:_ref2$length;Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_8__.a)(this.gl);var dstAvailableElementCount,dstElementCount,ArrayType=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_9__.c)(this.accessor.type||5126,{clamped:!1}),sourceAvailableElementCount=this._getAvailableElementCount(srcByteOffset),dstElementOffset=dstOffset;dstData?dstAvailableElementCount=(dstElementCount=dstData.length)-dstElementOffset:dstElementCount=dstElementOffset+(dstAvailableElementCount=Math.min(sourceAvailableElementCount,length||sourceAvailableElementCount));var copyElementCount=Math.min(sourceAvailableElementCount,dstAvailableElementCount);return length=length||copyElementCount,Object(_utils__WEBPACK_IMPORTED_MODULE_11__.a)(length<=copyElementCount),dstData=dstData||new ArrayType(dstElementCount),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,srcByteOffset,dstData,dstOffset,length),this.gl.bindBuffer(36662,null),dstData}},{key:"bind",value:function bind(){var _ref3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref3$target=_ref3.target,target=void 0===_ref3$target?this.target:_ref3$target,_ref3$index=_ref3.index,index=void 0===_ref3$index?this.accessor&&this.accessor.index:_ref3$index,_ref3$offset=_ref3.offset,offset=void 0===_ref3$offset?0:_ref3$offset,size=_ref3.size;return 35345===target||35982===target?void 0!==size?this.gl.bindBufferRange(target,index,this.handle,offset,size):(Object(_utils__WEBPACK_IMPORTED_MODULE_11__.a)(0===offset),this.gl.bindBufferBase(target,index,this.handle)):this.gl.bindBuffer(target,this.handle),this}},{key:"unbind",value:function unbind(){var _ref4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref4$target=_ref4.target,target=void 0===_ref4$target?this.target:_ref4$target,_ref4$index=_ref4.index,index=void 0===_ref4$index?this.accessor&&this.accessor.index:_ref4$index,isIndexedBuffer=35345===target||35982===target;return isIndexedBuffer?this.gl.bindBufferBase(target,index,null):this.gl.bindBuffer(target,null),this}},{key:"getDebugData",value:function getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function invalidateDebugData(){this.debugData=null}},{key:"_setData",value:function _setData(data){var usage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(_utils__WEBPACK_IMPORTED_MODULE_11__.a)(ArrayBuffer.isView(data)),this._trackDeallocatedMemory();var target=this._getTarget();this.gl.bindBuffer(target,this.handle),this.gl.bufferData(target,data,usage),this.gl.bindBuffer(target,null),this.usage=usage,this.debugData=data.slice(0,10),this.bytesUsed=data.byteLength,this._trackAllocatedMemory(data.byteLength);var type=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_9__.b)(data);return Object(_utils__WEBPACK_IMPORTED_MODULE_11__.a)(type),this.setAccessor(new _accessor__WEBPACK_IMPORTED_MODULE_7__.a(this.accessor,{type:type})),this}},{key:"_setByteLength",value:function _setByteLength(byteLength){var usage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(_utils__WEBPACK_IMPORTED_MODULE_11__.a)(byteLength>=0),this._trackDeallocatedMemory();var data=byteLength;0===byteLength&&(data=new Float32Array(0));var target=this._getTarget();return this.gl.bindBuffer(target,this.handle),this.gl.bufferData(target,data,usage),this.gl.bindBuffer(target,null),this.usage=usage,this.debugData=null,this.bytesUsed=byteLength,this._trackAllocatedMemory(byteLength),this}},{key:"_getTarget",value:function _getTarget(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function _getAvailableElementCount(srcByteOffset){var sourceElementOffset=srcByteOffset/Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_9__.c)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-sourceElementOffset}},{key:"_inferType",value:function _inferType(data){this.accessor.type||this.setAccessor(new _accessor__WEBPACK_IMPORTED_MODULE_7__.a(this.accessor,{type:Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_9__.b)(data)}))}},{key:"_createHandle",value:function _createHandle(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function _getParameter(pname){this.gl.bindBuffer(this.target,this.handle);var value=this.gl.getBufferParameter(this.target,pname);return this.gl.bindBuffer(this.target,null),value}},{key:"setByteLength",value:function setByteLength(byteLength){return _utils__WEBPACK_IMPORTED_MODULE_12__.a.deprecated("setByteLength","reallocate")(),this.reallocate(byteLength)}},{key:"updateAccessor",value:function updateAccessor(opts){return _utils__WEBPACK_IMPORTED_MODULE_12__.a.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new _accessor__WEBPACK_IMPORTED_MODULE_7__.a(this.accessor,opts),this}},{key:"type",get:function get(){return _utils__WEBPACK_IMPORTED_MODULE_12__.a.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function get(){return _utils__WEBPACK_IMPORTED_MODULE_12__.a.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),Buffer}(_resource__WEBPACK_IMPORTED_MODULE_6__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return isWebGL})),__webpack_require__.d(__webpack_exports__,"d",(function(){return isWebGL2})),__webpack_require__.d(__webpack_exports__,"b",(function(){return assertWebGLContext})),__webpack_require__.d(__webpack_exports__,"a",(function(){return assertWebGL2Context}));var _utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(17),ERR_CONTEXT="Invalid WebGLRenderingContext",ERR_WEBGL2="Requires WebGL2";function isWebGL(gl){return Boolean(gl&&Number.isFinite(gl._version))}function isWebGL2(gl){return Boolean(gl&&2===gl._version)}function assertWebGLContext(gl){Object(_utils__WEBPACK_IMPORTED_MODULE_0__.a)(isWebGL(gl),ERR_CONTEXT)}function assertWebGL2Context(gl){Object(_utils__WEBPACK_IMPORTED_MODULE_0__.a)(isWebGL2(gl),ERR_WEBGL2)}},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,__webpack_exports__,__webpack_require__){"use strict";function defaultEqualityCheck(a,b){return a===b}function areArgumentsShallowlyEqual(equalityCheck,prev,next){if(null===prev||null===next||prev.length!==next.length)return!1;for(var length=prev.length,i=0;i<length;i++)if(!equalityCheck(prev[i],next[i]))return!1;return!0}function getDependencies(funcs){var dependencies=Array.isArray(funcs[0])?funcs[0]:funcs;if(!dependencies.every((function(dep){return"function"==typeof dep}))){var dependencyTypes=dependencies.map((function(dep){return typeof dep})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+dependencyTypes+"]")}return dependencies}__webpack_require__.d(__webpack_exports__,"a",(function(){return createSelector}));var createSelector=function createSelectorCreator(memoize){for(var _len=arguments.length,memoizeOptions=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)memoizeOptions[_key-1]=arguments[_key];return function(){for(var _len2=arguments.length,funcs=Array(_len2),_key2=0;_key2<_len2;_key2++)funcs[_key2]=arguments[_key2];var recomputations=0,resultFunc=funcs.pop(),dependencies=getDependencies(funcs),memoizedResultFunc=memoize.apply(void 0,[function(){return recomputations++,resultFunc.apply(null,arguments)}].concat(memoizeOptions)),selector=memoize((function(){for(var params=[],length=dependencies.length,i=0;i<length;i++)params.push(dependencies[i].apply(null,arguments));return memoizedResultFunc.apply(null,params)}));return selector.resultFunc=resultFunc,selector.dependencies=dependencies,selector.recomputations=function(){return recomputations},selector.resetRecomputations=function(){return recomputations=0},selector}}((function defaultMemoize(func){var equalityCheck=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultEqualityCheck,lastArgs=null,lastResult=null;return function(){return areArgumentsShallowlyEqual(equalityCheck,lastArgs,arguments)||(lastResult=func.apply(null,arguments)),lastArgs=arguments,lastResult}}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(6),math_array=__webpack_require__(257),validators=__webpack_require__(35),assert=__webpack_require__(195),vector_Vector=function(_MathArray){function Vector(){return Object(classCallCheck.a)(this,Vector),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Vector).apply(this,arguments))}return Object(inherits.a)(Vector,_MathArray),Object(createClass.a)(Vector,[{key:"len",value:function len(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function magnitude(){return this.len()}},{key:"lengthSquared",value:function lengthSquared(){for(var length=0,i=0;i<this.ELEMENTS;++i)length+=this[i]*this[i];return length}},{key:"magnitudeSquared",value:function magnitudeSquared(){return this.lengthSquared()}},{key:"distance",value:function distance(mathArray){return Math.sqrt(this.distanceSquared(mathArray))}},{key:"distanceSquared",value:function distanceSquared(mathArray){for(var length=0,i=0;i<this.ELEMENTS;++i){var dist=this[i]-mathArray[i];length+=dist*dist}return Object(validators.a)(length)}},{key:"dot",value:function dot(mathArray){for(var product=0,i=0;i<this.ELEMENTS;++i)product+=this[i]*mathArray[i];return Object(validators.a)(product)}},{key:"normalize",value:function normalize(){var length=this.magnitude();if(0!==length)for(var i=0;i<this.ELEMENTS;++i)this[i]/=length;return this.check()}},{key:"multiply",value:function multiply(){for(var _len=arguments.length,vectors=new Array(_len),_key=0;_key<_len;_key++)vectors[_key]=arguments[_key];for(var _i=0,_vectors=vectors;_i<_vectors.length;_i++)for(var vector=_vectors[_i],i=0;i<this.ELEMENTS;++i)this[i]*=vector[i];return this.check()}},{key:"divide",value:function divide(){for(var _len2=arguments.length,vectors=new Array(_len2),_key2=0;_key2<_len2;_key2++)vectors[_key2]=arguments[_key2];for(var _i2=0,_vectors2=vectors;_i2<_vectors2.length;_i2++)for(var vector=_vectors2[_i2],i=0;i<this.ELEMENTS;++i)this[i]/=vector[i];return this.check()}},{key:"lengthSq",value:function lengthSq(){return this.lengthSquared()}},{key:"distanceTo",value:function distanceTo(vector){return this.distance(vector)}},{key:"distanceToSquared",value:function distanceToSquared(vector){return this.distanceSquared(vector)}},{key:"getComponent",value:function getComponent(i){return Object(assert.a)(i>=0&&i<this.ELEMENTS,"index is out of range"),Object(validators.a)(this[i])}},{key:"setComponent",value:function setComponent(i,value){return Object(assert.a)(i>=0&&i<this.ELEMENTS,"index is out of range"),this[i]=value,this.check()}},{key:"addVectors",value:function addVectors(a,b){return this.copy(a).add(b)}},{key:"subVectors",value:function subVectors(a,b){return this.copy(a).subtract(b)}},{key:"multiplyVectors",value:function multiplyVectors(a,b){return this.copy(a).multiply(b)}},{key:"addScaledVector",value:function addScaledVector(a,b){return this.add(new this.constructor(a).multiplyScalar(b))}},{key:"x",get:function get(){return this[0]},set:function set(value){return this[0]=Object(validators.a)(value)}},{key:"y",get:function get(){return this[1]},set:function set(value){return this[1]=Object(validators.a)(value)}}]),Vector}(math_array.a),common=__webpack_require__(21),vec3=__webpack_require__(52),gl_matrix_extras=__webpack_require__(164);__webpack_require__.d(__webpack_exports__,"a",(function(){return vector3_Vector3}));var ORIGIN=[0,0,0],vector3_Vector3=function(_Vector){function Vector3(){var _this,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(classCallCheck.a)(this,Vector3),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Vector3).call(this,-0,-0,-0)),1===arguments.length&&Object(common.f)(x)?_this.copy(x):(common.b.debug&&(Object(validators.a)(x),Object(validators.a)(y),Object(validators.a)(z)),_this[0]=x,_this[1]=y,_this[2]=z),_this}return Object(inherits.a)(Vector3,_Vector),Object(createClass.a)(Vector3,[{key:"set",value:function set(x,y,z){return this[0]=x,this[1]=y,this[2]=z,this.check()}},{key:"copy",value:function copy(array){return this[0]=array[0],this[1]=array[1],this[2]=array[2],this.check()}},{key:"fromObject",value:function fromObject(object){return common.b.debug&&(Object(validators.a)(object.x),Object(validators.a)(object.y),Object(validators.a)(object.z)),this[0]=object.x,this[1]=object.y,this[2]=object.z,this.check()}},{key:"toObject",value:function toObject(object){return object.x=this[0],object.y=this[1],object.z=this[2],object}},{key:"angle",value:function angle(vector){return vec3.a(this,vector)}},{key:"cross",value:function cross(vector){return vec3.b(this,this,vector),this.check()}},{key:"rotateX",value:function rotateX(_ref){var radians=_ref.radians,_ref$origin=_ref.origin,origin=void 0===_ref$origin?ORIGIN:_ref$origin;return vec3.e(this,this,origin,radians),this.check()}},{key:"rotateY",value:function rotateY(_ref2){var radians=_ref2.radians,_ref2$origin=_ref2.origin,origin=void 0===_ref2$origin?ORIGIN:_ref2$origin;return vec3.f(this,this,origin,radians),this.check()}},{key:"rotateZ",value:function rotateZ(_ref3){var radians=_ref3.radians,_ref3$origin=_ref3.origin,origin=void 0===_ref3$origin?ORIGIN:_ref3$origin;return vec3.g(this,this,origin,radians),this.check()}},{key:"transform",value:function transform(matrix4){return this.transformAsPoint(matrix4)}},{key:"transformAsPoint",value:function transformAsPoint(matrix4){return vec3.j(this,this,matrix4),this.check()}},{key:"transformAsVector",value:function transformAsVector(matrix4){return Object(gl_matrix_extras.c)(this,this,matrix4),this.check()}},{key:"transformByMatrix3",value:function transformByMatrix3(matrix3){return vec3.i(this,this,matrix3),this.check()}},{key:"transformByMatrix2",value:function transformByMatrix2(matrix2){return Object(gl_matrix_extras.b)(this,this,matrix2),this.check()}},{key:"transformByQuaternion",value:function transformByQuaternion(quaternion){return vec3.k(this,this,quaternion),this.check()}},{key:"ELEMENTS",get:function get(){return 3}},{key:"z",get:function get(){return this[2]},set:function set(value){return this[2]=Object(validators.a)(value)}}]),Vector3}(vector_Vector)},,function(module,exports,__webpack_require__){"use strict";var $TypeError=TypeError,ThrowTypeError=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new $TypeError},hasSymbols=__webpack_require__(84)(),getProto=Object.getPrototypeOf||function(x){return x.__proto__},asyncGenIterator=void 0,TypedArray="undefined"==typeof Uint8Array?void 0:getProto(Uint8Array),INTRINSICS={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":asyncGenIterator&&hasSymbols&&Symbol.asyncIterator?asyncGenIterator[Symbol.asyncIterator]():void 0,"$ %Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&hasSymbols?getProto((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&hasSymbols?getProto((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":hasSymbols?Symbol:void 0,"$ %SymbolPrototype%":hasSymbols?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":ThrowTypeError,"$ %TypedArray%":TypedArray,"$ %TypedArrayPrototype%":TypedArray?TypedArray.prototype:void 0,"$ %TypeError%":$TypeError,"$ %TypeErrorPrototype%":$TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},$replace=__webpack_require__(64).call(Function.call,String.prototype.replace),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function stringToPath(string){var result=[];return $replace(string,rePropName,(function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match})),result},getBaseIntrinsic=function getBaseIntrinsic(name,allowMissing){var key="$ "+name;if(!(key in INTRINSICS))throw new SyntaxError("intrinsic "+name+" does not exist!");if(void 0===INTRINSICS[key]&&!allowMissing)throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!");return INTRINSICS[key]};module.exports=function GetIntrinsic(name,allowMissing){if(arguments.length>1&&"boolean"!=typeof allowMissing)throw new TypeError('"allowMissing" argument must be a boolean');var parts=stringToPath(name);if(0===parts.length)return getBaseIntrinsic(name,allowMissing);for(var value=getBaseIntrinsic("%"+parts[0]+"%",allowMissing),i=1;i<parts.length;i+=1)null!=value&&(value=value[parts[i]]);return value}},function(module,exports,__webpack_require__){var path=__webpack_require__(276),has=__webpack_require__(60),wrappedWellKnownSymbolModule=__webpack_require__(357),defineProperty=__webpack_require__(61).f;module.exports=function(NAME){var Symbol=path.Symbol||(path.Symbol={});has(Symbol,NAME)||defineProperty(Symbol,NAME,{value:wrappedWellKnownSymbolModule.f(NAME)})}},function(module,__webpack_exports__,__webpack_require__){"use strict";var bisect=__webpack_require__(796),src=__webpack_require__(54),constant=function(x){return function(){return x}},number=function(x){return+x};__webpack_require__.d(__webpack_exports__,"c",(function(){return identity})),__webpack_require__.d(__webpack_exports__,"a",(function(){return copy})),__webpack_require__.d(__webpack_exports__,"d",(function(){return transformer})),__webpack_require__.d(__webpack_exports__,"b",(function(){return continuous}));var unit=[0,1];function identity(x){return x}function normalize(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:constant(isNaN(b)?NaN:.5)}function bimap(domain,range,interpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];return d1<d0?(d0=normalize(d1,d0),r0=interpolate(r1,r0)):(d0=normalize(d0,d1),r0=interpolate(r0,r1)),function(x){return r0(d0(x))}}function polymap(domain,range,interpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;for(domain[j]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++i<j;)d[i]=normalize(domain[i],domain[i+1]),r[i]=interpolate(range[i],range[i+1]);return function(x){var i=Object(bisect.b)(domain,x,1,j)-1;return r[i](d[i](x))}}function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function transformer(){var transform,untransform,unknown,piecewise,output,input,domain=unit,range=unit,interpolate=src.a,clamp=identity;function rescale(){var n=Math.min(domain.length,range.length);return clamp!==identity&&(clamp=function clamper(a,b){var t;return a>b&&(t=a,a=b,b=t),function(x){return Math.max(a,Math.min(b,x))}}(domain[0],domain[n-1])),piecewise=n>2?polymap:bimap,output=input=null,scale}function scale(x){return isNaN(x=+x)?unknown:(output||(output=piecewise(domain.map(transform),range,interpolate)))(transform(clamp(x)))}return scale.invert=function(y){return clamp(untransform((input||(input=piecewise(range,domain.map(transform),src.c)))(y)))},scale.domain=function(_){return arguments.length?(domain=Array.from(_,number),rescale()):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()},scale.rangeRound=function(_){return range=Array.from(_),interpolate=src.e,rescale()},scale.clamp=function(_){return arguments.length?(clamp=!!_||identity,rescale()):clamp!==identity},scale.interpolate=function(_){return arguments.length?(interpolate=_,rescale()):interpolate},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t,u){return transform=t,untransform=u,rescale()}}function continuous(){return transformer()(identity,identity)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Resource}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_init__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(200),_webgl_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(39),_webgl_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(128),_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(127),_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(17),_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(775),ERR_RESOURCE_METHOD_UNDEFINED="Resource subclass must define virtual methods",Resource=function(){function Resource(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Resource),Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_3__.b)(gl);var id=opts.id,_opts$userData=opts.userData,userData=void 0===_opts$userData?{}:_opts$userData;this.gl=gl,this.id=id||Object(_utils__WEBPACK_IMPORTED_MODULE_5__.c)(this.constructor.name),this.userData=userData,this._bound=!1,this._handle=opts.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Resource,[{key:"toString",value:function toString(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function _delete(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$deleteChildren=_ref.deleteChildren,deleteChildren=void 0!==_ref$deleteChildren&&_ref$deleteChildren,children=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,children&&deleteChildren&&children.filter(Boolean).forEach((function(child){child.delete()})),this}},{key:"bind",value:function bind(){var value,funcOrHandle=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof funcOrHandle?(this._bindHandle(funcOrHandle),this):(this._bound?value=funcOrHandle():(this._bindHandle(this.handle),this._bound=!0,value=funcOrHandle(),this._bound=!1,this._bindHandle(null)),value)}},{key:"unbind",value:function unbind(){this.bind(null)}},{key:"getParameter",value:function getParameter(pname){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pname=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_4__.b)(this.gl,pname),Object(_utils__WEBPACK_IMPORTED_MODULE_6__.a)(pname);var parameters=this.constructor.PARAMETERS||{},parameter=parameters[pname];if(parameter){var isWebgl2=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_3__.d)(this.gl),parameterAvailable=(!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension));if(!parameterAvailable){var webgl1Default=parameter.webgl1,webgl2Default="webgl2"in parameter?parameter.webgl2:parameter.webgl1,defaultValue=isWebgl2?webgl2Default:webgl1Default;return defaultValue}}return this._getParameter(pname,opts)}},{key:"getParameters",value:function getParameters(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref2={},parameters=_ref2.parameters,keys=_ref2.keys,PARAMETERS=this.constructor.PARAMETERS||{},isWebgl2=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_3__.d)(this.gl),values={},parameterKeys=parameters||Object.keys(PARAMETERS),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=parameterKeys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var pname=_step.value,parameter=PARAMETERS[pname],parameterAvailable=parameter&&(!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension));if(parameterAvailable){var key=keys?Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_4__.a)(this.gl,pname):pname;values[key]=this.getParameter(pname,opts),keys&&"GLenum"===parameter.type&&(values[key]=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_4__.a)(this.gl,values[key]))}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return values}},{key:"setParameter",value:function setParameter(pname,value){pname=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_4__.b)(this.gl,pname),Object(_utils__WEBPACK_IMPORTED_MODULE_6__.a)(pname);var parameter=(this.constructor.PARAMETERS||{})[pname];if(parameter){var isWebgl2=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_3__.d)(this.gl);if(!((!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension))))throw new Error("Parameter not available on this platform");"GLenum"===parameter.type&&(value=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_4__.b)(value))}return this._setParameter(pname,value),this}},{key:"setParameters",value:function setParameters(parameters){for(var pname in parameters)this.setParameter(pname,parameters[pname]);return this}},{key:"stubRemovedMethods",value:function stubRemovedMethods(className,version,methodNames){return Object(_utils__WEBPACK_IMPORTED_MODULE_7__.a)(this,className,version,methodNames)}},{key:"initialize",value:function initialize(opts){}},{key:"_createHandle",value:function _createHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_deleteHandle",value:function _deleteHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_bindHandle",value:function _bindHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_getOptsFromHandle",value:function _getOptsFromHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_getParameter",value:function _getParameter(pname,opts){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_setParameter",value:function _setParameter(pname,value){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_context",value:function _context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function _addStats(){var name=this.constructor.name,stats=_init__WEBPACK_IMPORTED_MODULE_2__.a.get("Resource Counts");stats.get("Resources Created").incrementCount(),stats.get("".concat(name,"s Created")).incrementCount(),stats.get("".concat(name,"s Active")).incrementCount()}},{key:"_removeStats",value:function _removeStats(){var name=this.constructor.name;_init__WEBPACK_IMPORTED_MODULE_2__.a.get("Resource Counts").get("".concat(name,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function _trackAllocatedMemory(bytes){var name=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,stats=_init__WEBPACK_IMPORTED_MODULE_2__.a.get("Memory Usage");stats.get("GPU Memory").addCount(bytes),stats.get("".concat(name," Memory")).addCount(bytes),this.byteLength=bytes}},{key:"_trackDeallocatedMemory",value:function _trackDeallocatedMemory(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,stats=_init__WEBPACK_IMPORTED_MODULE_2__.a.get("Memory Usage");stats.get("GPU Memory").subtractCount(this.byteLength),stats.get("".concat(name," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function get(){return this._handle}}]),Resource}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return add})),__webpack_require__.d(__webpack_exports__,"e",(function(){return scale})),__webpack_require__.d(__webpack_exports__,"b",(function(){return length})),__webpack_require__.d(__webpack_exports__,"d",(function(){return negate})),__webpack_require__.d(__webpack_exports__,"c",(function(){return lerp})),__webpack_require__.d(__webpack_exports__,"g",(function(){return transformMat4})),__webpack_require__.d(__webpack_exports__,"f",(function(){return sub}));var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13);function add(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out}function scale(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out}function length(a){var x=a[0],y=a[1];return Math.hypot(x,y)}function negate(out,a){return out[0]=-a[0],out[1]=-a[1],out}function lerp(out,a,b,t){var ax=a[0],ay=a[1];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out}function transformMat4(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[4]*y+m[12],out[1]=m[1]*x+m[5]*y+m[13],out}var vec,sub=function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out};vec=function create(){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.a(2);return _common_js__WEBPACK_IMPORTED_MODULE_0__.a!=Float32Array&&(out[0]=0,out[1]=0),out}()},function(module,exports,__webpack_require__){var fails=__webpack_require__(33);module.exports=!fails((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40);module.exports=function(it){if(!isObject(it))throw TypeError(String(it)+" is not an object");return it}},function(module,__webpack_exports__,__webpack_require__){"use strict";var flatten=__webpack_require__(83),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),iterable_utils=__webpack_require__(90),typed_array_manager=__webpack_require__(139),tesselator_Tesselator=function(){function Tesselator(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,Tesselator);var _opts$attributes=opts.attributes,attributes=void 0===_opts$attributes?{}:_opts$attributes;this.typedArrayManager=typed_array_manager.a,this.indexLayout=null,this.bufferLayout=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=attributes,this.updateGeometry(opts),Object.seal(this)}return Object(createClass.a)(Tesselator,[{key:"updateGeometry",value:function updateGeometry(_ref){var data=_ref.data,getGeometry=_ref.getGeometry,positionFormat=_ref.positionFormat,dataChanged=_ref.dataChanged;if(this.data=data,this.getGeometry=getGeometry,this.positionSize="XY"===positionFormat?2:3,Array.isArray(dataChanged)){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=dataChanged[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var dataRange=_step.value;this._rebuildGeometry(dataRange)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function updatePartialGeometry(_ref2){var startRow=_ref2.startRow,endRow=_ref2.endRow;this._rebuildGeometry({startRow:startRow,endRow:endRow})}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(geometry,startIndex,size){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function getGeometrySize(geometry){throw new Error("Not implemented")}},{key:"_forEachGeometry",value:function _forEachGeometry(visitor,startRow,endRow){var data=this.data,getGeometry=this.getGeometry,_createIterable=Object(iterable_utils.a)(data,startRow,endRow),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=iterable[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var object=_step2.value;objectInfo.index++,visitor(getGeometry(object,objectInfo),objectInfo.index)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}},{key:"_rebuildGeometry",value:function _rebuildGeometry(dataRange){var _this=this;if(this.data&&this.getGeometry){var indexLayout=this.indexLayout,bufferLayout=this.bufferLayout;dataRange||(indexLayout=[],bufferLayout=[]);var _ref3=dataRange||{},_ref3$startRow=_ref3.startRow,startRow=void 0===_ref3$startRow?0:_ref3$startRow,_ref3$endRow=_ref3.endRow,endRow=void 0===_ref3$endRow?1/0:_ref3$endRow;this._forEachGeometry((function(geometry,dataIndex){bufferLayout[dataIndex]=_this.getGeometrySize(geometry)}),startRow,endRow);var instanceCount=0,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=bufferLayout[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){instanceCount+=_step3.value}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}var attributes=this.attributes,_attributeDefs=this._attributeDefs,typedArrayManager=this.typedArrayManager,fp64=this.fp64;for(var name in _attributeDefs){var def=_attributeDefs[name];def.copy=Boolean(dataRange),def.fp64Only&&!fp64||(attributes[name]=typedArrayManager.allocate(attributes[name],instanceCount,def))}this.indexLayout=indexLayout,this.bufferLayout=bufferLayout,this.instanceCount=instanceCount;for(var context={vertexStart:0,indexStart:0},i=0;i<startRow;i++)context.vertexStart+=bufferLayout[i],context.indexStart+=indexLayout[i]||0;this._forEachGeometry((function(geometry,dataIndex){var geometrySize=bufferLayout[dataIndex];context.geometryIndex=dataIndex,context.geometrySize=geometrySize,_this.updateGeometryAttributes(geometry,context),context.vertexStart+=geometrySize,context.indexStart+=indexLayout[dataIndex]||0}),startRow,endRow);for(var vertexCount=context.indexStart,_i=endRow;_i<indexLayout.length;_i++)vertexCount+=indexLayout[_i];this.vertexCount=vertexCount}}}]),Tesselator}(),count=__webpack_require__(251),memoize=__webpack_require__(138);__webpack_require__.d(__webpack_exports__,"a",(function(){return experimental}));var experimental={Tesselator:tesselator_Tesselator,flattenVertices:flatten.c,fillArray:flatten.a,count:count.a,memoize:memoize.a}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return length})),__webpack_require__.d(__webpack_exports__,"d",(function(){return negate})),__webpack_require__.d(__webpack_exports__,"b",(function(){return cross})),__webpack_require__.d(__webpack_exports__,"j",(function(){return transformMat4})),__webpack_require__.d(__webpack_exports__,"i",(function(){return transformMat3})),__webpack_require__.d(__webpack_exports__,"k",(function(){return transformQuat})),__webpack_require__.d(__webpack_exports__,"e",(function(){return rotateX})),__webpack_require__.d(__webpack_exports__,"f",(function(){return rotateY})),__webpack_require__.d(__webpack_exports__,"g",(function(){return rotateZ})),__webpack_require__.d(__webpack_exports__,"a",(function(){return angle})),__webpack_require__.d(__webpack_exports__,"h",(function(){return sub}));var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13);function length(a){var x=a[0],y=a[1],z=a[2];return Math.hypot(x,y,z)}function fromValues(x,y,z){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.a(3);return out[0]=x,out[1]=y,out[2]=z,out}function negate(out,a){return out[0]=-a[0],out[1]=-a[1],out[2]=-a[2],out}function normalize(out,a){var x=a[0],y=a[1],z=a[2],len=x*x+y*y+z*z;return len>0&&(len=1/Math.sqrt(len)),out[0]=a[0]*len,out[1]=a[1]*len,out[2]=a[2]*len,out}function cross(out,a,b){var ax=a[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2];return out[0]=ay*bz-az*by,out[1]=az*bx-ax*bz,out[2]=ax*by-ay*bx,out}function transformMat4(out,a,m){var x=a[0],y=a[1],z=a[2],w=m[3]*x+m[7]*y+m[11]*z+m[15];return w=w||1,out[0]=(m[0]*x+m[4]*y+m[8]*z+m[12])/w,out[1]=(m[1]*x+m[5]*y+m[9]*z+m[13])/w,out[2]=(m[2]*x+m[6]*y+m[10]*z+m[14])/w,out}function transformMat3(out,a,m){var x=a[0],y=a[1],z=a[2];return out[0]=x*m[0]+y*m[3]+z*m[6],out[1]=x*m[1]+y*m[4]+z*m[7],out[2]=x*m[2]+y*m[5]+z*m[8],out}function transformQuat(out,a,q){var qx=q[0],qy=q[1],qz=q[2],qw=q[3],x=a[0],y=a[1],z=a[2],uvx=qy*z-qz*y,uvy=qz*x-qx*z,uvz=qx*y-qy*x,uuvx=qy*uvz-qz*uvy,uuvy=qz*uvx-qx*uvz,uuvz=qx*uvy-qy*uvx,w2=2*qw;return uvx*=w2,uvy*=w2,uvz*=w2,uuvx*=2,uuvy*=2,uuvz*=2,out[0]=x+uvx+uuvx,out[1]=y+uvy+uuvy,out[2]=z+uvz+uuvz,out}function rotateX(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0],r[1]=p[1]*Math.cos(c)-p[2]*Math.sin(c),r[2]=p[1]*Math.sin(c)+p[2]*Math.cos(c),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out}function rotateY(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[2]*Math.sin(c)+p[0]*Math.cos(c),r[1]=p[1],r[2]=p[2]*Math.cos(c)-p[0]*Math.sin(c),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out}function rotateZ(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0]*Math.cos(c)-p[1]*Math.sin(c),r[1]=p[0]*Math.sin(c)+p[1]*Math.cos(c),r[2]=p[2],out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out}function angle(a,b){var tempA=fromValues(a[0],a[1],a[2]),tempB=fromValues(b[0],b[1],b[2]);normalize(tempA,tempA),normalize(tempB,tempB);var cosine=function dot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}(tempA,tempB);return cosine>1?0:cosine<-1?Math.PI:Math.acos(cosine)}var vec,sub=function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out};vec=function create(){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.a(3);return _common_js__WEBPACK_IMPORTED_MODULE_0__.a!=Float32Array&&(out[0]=0,out[1]=0,out[2]=0),out}()},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,process){__webpack_require__.d(__webpack_exports__,"b",(function(){return window_})),__webpack_require__.d(__webpack_exports__,"a",(function(){return process_}));var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global&&global,document:"undefined"!=typeof document&&document,process:"object"===(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))&&process},window_=globals.window||globals.self||globals.global,process_=globals.process||{};console}).call(this,__webpack_require__(36),__webpack_require__(72))},function(module,__webpack_exports__,__webpack_require__){"use strict";var src_color=__webpack_require__(59);function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}var constant=function(x){return function(){return x}};function linear(a,d){return function(t){return a+t*d}}function color_hue(a,b){var d=b-a;return d?linear(a,d>180||d<-180?d-360*Math.round(d/360):d):constant(isNaN(a)?b:a)}function gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):constant(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):constant(isNaN(a)?b:a)}var src_rgb=function rgbGamma(y){var color=gamma(y);function rgb(start,end){var r=color((start=Object(src_color.g)(start)).r,(end=Object(src_color.g)(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=Object(src_color.g)(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}var rgbBasis=rgbSpline((function(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}})),array=(rgbSpline((function(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}})),function(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=src_value(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}),date=function(a,b){var d=new Date;return b-=a=+a,function(t){return d.setTime(a+b*t),d}},number=function(a,b){return b-=a=+a,function(t){return a+b*t}},object=function(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=src_value(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}},reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");var cssNode,cssRoot,cssView,svgNode,string=function(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:number(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one(b){return function(t){return b(t)+""}}(q[0].x):function zero(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})},src_value=function(a,b){var c,t=typeof b;return null==b||"boolean"===t?constant(b):("number"===t?number:"string"===t?(c=Object(src_color.e)(b))?(b=c,src_rgb):string:b instanceof src_color.e?src_rgb:b instanceof Date?date:Array.isArray(b)?array:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?object:number)(a,b)},round=function(a,b){return b-=a=+a,function(t){return Math.round(a+b*t)}},degrees=180/Math.PI,identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},decompose=function(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX,scaleY:scaleY}};function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:number(xa,xb)},{i:i-2,x:number(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function rotate(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:number(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:number(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:number(xa,xb)},{i:i-2,x:number(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}interpolateTransform((function parseCss(value){return"none"===value?identity:(cssNode||(cssNode=document.createElement("DIV"),cssRoot=document.documentElement,cssView=document.defaultView),cssNode.style.transform=value,value=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform"),cssRoot.removeChild(cssNode),value=value.slice(7,-1).split(","),decompose(+value[0],+value[1],+value[2],+value[3],+value[4],+value[5]))}),"px, ","px)","deg)"),interpolateTransform((function parseSvg(value){return null==value?identity:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?(value=value.matrix,decompose(value.a,value.b,value.c,value.d,value.e,value.f)):identity)}),", ",")",")"),Math.SQRT2;function hsl(hue){return function(start,end){var h=hue((start=Object(src_color.f)(start)).h,(end=Object(src_color.f)(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(t),start.opacity=opacity(t),start+""}}}hsl(color_hue),hsl(nogamma);var lab=__webpack_require__(786);function hcl(hue){return function(start,end){var h=hue((start=Object(lab.b)(start)).h,(end=Object(lab.b)(end)).h),c=nogamma(start.c,end.c),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.c=c(t),start.l=l(t),start.opacity=opacity(t),start+""}}}hcl(color_hue),hcl(nogamma);var src_cubehelix=__webpack_require__(787);function cubehelix_cubehelix(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h=hue((start=Object(src_cubehelix.a)(start)).h,(end=Object(src_cubehelix.a)(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}cubehelix_cubehelix(color_hue);var cubehelixLong=cubehelix_cubehelix(nogamma);__webpack_require__.d(__webpack_exports__,"a",(function(){return src_value})),__webpack_require__.d(__webpack_exports__,"c",(function(){return number})),__webpack_require__.d(__webpack_exports__,"e",(function(){return round})),__webpack_require__.d(__webpack_exports__,"d",(function(){return rgbBasis})),__webpack_require__.d(__webpack_exports__,"b",(function(){return cubehelixLong}))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"b",(function(){return window_})),__webpack_require__.d(__webpack_exports__,"a",(function(){return global_}));var globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global&&global,document:"undefined"!=typeof document&&document},window_=globals.window||globals.self||globals.global,global_=globals.global||globals.self||globals.window}).call(this,__webpack_require__(36))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createMat4})),__webpack_require__.d(__webpack_exports__,"d",(function(){return transformVector})),__webpack_require__.d(__webpack_exports__,"c",(function(){return mod})),__webpack_require__.d(__webpack_exports__,"b",(function(){return lerp}));var gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(106);function createMat4(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function transformVector(matrix,vector){var result=gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_0__.b([],vector,matrix);return gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_0__.a(result,result,1/result[3]),result}function mod(value,divisor){var modulus=value%divisor;return modulus<0?divisor+modulus:modulus}function lerp(start,end,step){return step*end+(1-step)*start}},function(module,__webpack_exports__,__webpack_require__){"use strict";var base_attribute=__webpack_require__(163);function padArrayChunk(_ref){var source=_ref.source,target=_ref.target,_ref$start=_ref.start,start=void 0===_ref$start?0:_ref$start,end=_ref.end,getData=_ref.getData;end=end||target.length;var sourceLength=source.length,targetLength=end-start;if(sourceLength>targetLength)target.set(source.subarray(0,targetLength),start);else if(target.set(source,start),getData)for(var i=sourceLength;i<targetLength;)for(var datum=getData(i,source),j=0;j<datum.length;j++)target[start+i]=datum[j],i++}__webpack_require__.d(__webpack_exports__,"e",(function(){return normalizeTransitionSettings})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getSourceBufferAttribute})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getAttributeTypeFromSize})),__webpack_require__.d(__webpack_exports__,"a",(function(){return cycleBuffers})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getAttributeBufferLength})),__webpack_require__.d(__webpack_exports__,"f",(function(){return padBuffer}));var DEFAULT_TRANSITION_SETTINGS={interpolation:{duration:0,easing:function easing(t){return t}},spring:{stiffness:.05,damping:.5}};function normalizeTransitionSettings(userSettings,layerSettings){return userSettings?(Number.isFinite(userSettings)&&(userSettings={duration:userSettings}),userSettings.type=userSettings.type||"interpolation",Object.assign({},DEFAULT_TRANSITION_SETTINGS[userSettings.type],layerSettings,userSettings)):null}function getSourceBufferAttribute(gl,attribute){var size=attribute.size,value=attribute.value,normalized=attribute.normalized,constant=attribute.constant;if(constant)return new base_attribute.a(gl,{constant:constant,value:value,size:size});var buffer=attribute.getBuffer();return new base_attribute.a(gl,{divisor:0,constant:constant,buffer:buffer,size:size,normalized:normalized})}function getAttributeTypeFromSize(size){switch(size){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(size,'"'))}}function cycleBuffers(buffers){buffers.push(buffers.shift())}function getAttributeBufferLength(attribute,numInstances){var doublePrecision=attribute.doublePrecision,userData=attribute.userData,value=attribute.value,size=attribute.size,multiplier=doublePrecision?2:1;return(userData.noAlloc?value.length:numInstances*size)*multiplier}function padBuffer(_ref){var buffer=_ref.buffer,numInstances=_ref.numInstances,attribute=_ref.attribute,fromLength=_ref.fromLength,fromBufferLayout=_ref.fromBufferLayout,_ref$getData=_ref.getData,getData=void 0===_ref$getData?function(x){return x}:_ref$getData,precisionMultiplier=attribute.doublePrecision?2:1,size=attribute.size*precisionMultiplier,offset=attribute.elementOffset*precisionMultiplier,toBufferLayout=attribute.bufferLayout,hasBufferLayout=fromBufferLayout&&toBufferLayout,toLength=getAttributeBufferLength(attribute,numInstances);if(hasBufferLayout||!(fromLength>=toLength)){var toData=attribute.constant?attribute.getValue():attribute.getBuffer().getData({});if(attribute.normalized){var getter=getData;getData=function getData(value,chunk){return attribute._normalizeConstant(getter(value,chunk))}}var getMissingData=attribute.constant?function(i,chunk){return getData(toData,chunk)}:function(i,chunk){return getData(toData.subarray(i,i+size),chunk)},source=buffer.getData({length:fromLength}),data=new Float32Array(toLength);!function padArray(_ref2){var source=_ref2.source,target=_ref2.target,size=_ref2.size,_ref2$offset=_ref2.offset,offset=void 0===_ref2$offset?0:_ref2$offset,getData=_ref2.getData,sourceLayout=_ref2.sourceLayout,targetLayout=_ref2.targetLayout;if(!Array.isArray(targetLayout))return padArrayChunk({source:source,target:target,getData:getData}),target;for(var sourceIndex=offset,targetIndex=offset,getChunkData=getData&&function(i,chunk){return getData(i+targetIndex,chunk)},n=Math.min(sourceLayout.length,targetLayout.length),i=0;i<n;i++){var sourceChunkLength=sourceLayout[i]*size,targetChunkLength=targetLayout[i]*size;padArrayChunk({source:source.subarray(sourceIndex,sourceIndex+sourceChunkLength),target:target,start:targetIndex,end:targetIndex+targetChunkLength,getData:getChunkData}),sourceIndex+=sourceChunkLength,targetIndex+=targetChunkLength}return targetIndex<target.length&&padArrayChunk({source:[],target:target,start:targetIndex,getData:getChunkData}),target}({source:source,target:data,sourceLayout:fromBufferLayout,targetLayout:toBufferLayout,offset:offset,size:size,getData:getMissingData}),buffer.setData({data:data})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Texture}));var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6),_resource__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(47),_buffer__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(38),_texture_formats__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(110),_context__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(114),_webgl_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(39),_webgl_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(197),_utils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(127),_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(25),_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(17),NPOT_MIN_FILTERS=[9729,9728],Texture=function(_Resource){function Texture(gl,props){var _this;Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,Texture);var _props$id=props.id,id=void 0===_props$id?Object(_utils__WEBPACK_IMPORTED_MODULE_12__.c)("texture"):_props$id,handle=props.handle,target=props.target;return(_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(Texture).call(this,gl,{id:id,handle:handle}))).target=target,_this.textureUnit=void 0,_this.loaded=!1,_this.width=void 0,_this.height=void 0,_this.depth=void 0,_this.format=void 0,_this.type=void 0,_this.dataFormat=void 0,_this.border=void 0,_this.textureUnit=void 0,_this.mipmaps=void 0,_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__.a)(Texture,_Resource),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(Texture,null,[{key:"isSupported",value:function isSupported(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},format=_ref.format,linearFiltering=_ref.linearFiltering,supported=!0;return format&&(supported=(supported=supported&&Object(_texture_formats__WEBPACK_IMPORTED_MODULE_8__.d)(gl,format))&&(!linearFiltering||Object(_texture_formats__WEBPACK_IMPORTED_MODULE_8__.e)(gl,format))),supported}}]),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(Texture,[{key:"toString",value:function toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function initialize(){var _this2=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},data=props.data;if(data instanceof Promise)return data.then((function(resolvedImageData){return _this2.initialize(Object.assign({},props,{pixels:resolvedImageData,data:resolvedImageData}))})),this;var _props$pixels=props.pixels,pixels=void 0===_props$pixels?null:_props$pixels,_props$format=props.format,format=void 0===_props$format?6408:_props$format,_props$border=props.border,border=void 0===_props$border?0:_props$border,_props$recreate=props.recreate,recreate=void 0!==_props$recreate&&_props$recreate,_props$parameters=props.parameters,parameters=void 0===_props$parameters?{}:_props$parameters,_props$pixelStore=props.pixelStore,pixelStore=void 0===_props$pixelStore?{}:_props$pixelStore,_props$textureUnit=props.textureUnit,textureUnit=void 0===_props$textureUnit?void 0:_props$textureUnit,_props$unpackFlipY=props.unpackFlipY,unpackFlipY=void 0===_props$unpackFlipY||_props$unpackFlipY,_props$mipmaps=props.mipmaps,mipmaps=void 0===_props$mipmaps||_props$mipmaps;data||(data=pixels);var width=props.width,height=props.height,dataFormat=props.dataFormat,type=props.type,_props$depth=props.depth,depth=void 0===_props$depth?0:_props$depth,_this$_deduceParamete=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:!1,data:data,width:width,height:height});width=_this$_deduceParamete.width,height=_this$_deduceParamete.height,dataFormat=_this$_deduceParamete.dataFormat,type=_this$_deduceParamete.type,this.width=width,this.height=height,this.depth=depth,this.format=format,this.type=type,this.dataFormat=dataFormat,this.border=border,this.textureUnit=textureUnit,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var DEFAULT_TEXTURE_SETTINGS=Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},37440,unpackFlipY),glSettings=Object.assign({},DEFAULT_TEXTURE_SETTINGS,pixelStore);return mipmaps&&this._isNPOT()&&(_utils__WEBPACK_IMPORTED_MODULE_13__.a.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),mipmaps=!1,this._updateForNPOT(parameters)),this.mipmaps=mipmaps,this.setImageData({data:data,width:width,height:height,depth:depth,format:format,type:type,dataFormat:dataFormat,border:border,mipmaps:mipmaps,parameters:glSettings}),mipmaps&&this.generateMipmap(),this.setParameters(parameters),recreate&&(this.data=data),this}},{key:"resize",value:function resize(_ref2){var height=_ref2.height,width=_ref2.width,_ref2$mipmaps=_ref2.mipmaps,mipmaps=void 0!==_ref2$mipmaps&&_ref2$mipmaps;return width!==this.width||height!==this.height?this.initialize({width:width,height:height,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:mipmaps}):this}},{key:"generateMipmap",value:function generateMipmap(){var _this3=this,params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(_utils__WEBPACK_IMPORTED_MODULE_13__.a.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Object(_context__WEBPACK_IMPORTED_MODULE_9__.a)(this.gl,params,(function(){_this3.gl.generateMipmap(_this3.target)})),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function setImageData(options){this._trackDeallocatedMemory("Texture");var _options$target=options.target,target=void 0===_options$target?this.target:_options$target,_options$pixels=options.pixels,pixels=void 0===_options$pixels?null:_options$pixels,_options$level=options.level,level=void 0===_options$level?0:_options$level,_options$format=options.format,format=void 0===_options$format?this.format:_options$format,_options$border=options.border,border=void 0===_options$border?this.border:_options$border,_options$offset=options.offset,offset=void 0===_options$offset?0:_options$offset,_options$parameters=options.parameters,parameters=void 0===_options$parameters?{}:_options$parameters,_options$data=options.data,data=void 0===_options$data?null:_options$data,_options$type=options.type,type=void 0===_options$type?this.type:_options$type,_options$width=options.width,width=void 0===_options$width?this.width:_options$width,_options$height=options.height,height=void 0===_options$height?this.height:_options$height,_options$dataFormat=options.dataFormat,dataFormat=void 0===_options$dataFormat?this.dataFormat:_options$dataFormat,_options$compressed=options.compressed,compressed=void 0!==_options$compressed&&_options$compressed;data||(data=pixels);var _this$_deduceParamete2=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:compressed,data:data,width:width,height:height});type=_this$_deduceParamete2.type,dataFormat=_this$_deduceParamete2.dataFormat,compressed=_this$_deduceParamete2.compressed,width=_this$_deduceParamete2.width,height=_this$_deduceParamete2.height;var gl=this.gl;gl.bindTexture(this.target,this.handle);var dataType,_this$_getDataType=this._getDataType({data:data,compressed:compressed});if(data=_this$_getDataType.data,dataType=_this$_getDataType.dataType,Object(_context__WEBPACK_IMPORTED_MODULE_9__.a)(this.gl,parameters,(function(){switch(dataType){case"null":gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data);break;case"typed-array":gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data,offset);break;case"buffer":Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_10__.a)(gl),gl.bindBuffer(35052,data.handle||data),gl.texImage2D(target,level,format,width,height,border,dataFormat,type,offset),gl.bindBuffer(35052,null);break;case"browser-object":Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_10__.d)(gl)?gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data):gl.texImage2D(target,level,format,dataFormat,type,data);break;case"compressed":gl.compressedTexImage2D(target,level,format,width,height,border,data);break;default:Object(_utils__WEBPACK_IMPORTED_MODULE_14__.a)(!1,"Unknown image data type")}})),data&&data.byteLength)this._trackAllocatedMemory(data.byteLength,"Texture");else{var channels=_texture_formats__WEBPACK_IMPORTED_MODULE_8__.a[this.dataFormat]||4,channelSize=_texture_formats__WEBPACK_IMPORTED_MODULE_8__.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*channels*channelSize,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function setSubImageData(_ref3){var _this4=this,_ref3$target=_ref3.target,target=void 0===_ref3$target?this.target:_ref3$target,_ref3$pixels=_ref3.pixels,pixels=void 0===_ref3$pixels?null:_ref3$pixels,_ref3$data=_ref3.data,data=void 0===_ref3$data?null:_ref3$data,_ref3$x=_ref3.x,x=void 0===_ref3$x?0:_ref3$x,_ref3$y=_ref3.y,y=void 0===_ref3$y?0:_ref3$y,_ref3$width=_ref3.width,width=void 0===_ref3$width?this.width:_ref3$width,_ref3$height=_ref3.height,height=void 0===_ref3$height?this.height:_ref3$height,_ref3$level=_ref3.level,level=void 0===_ref3$level?0:_ref3$level,_ref3$format=_ref3.format,format=void 0===_ref3$format?this.format:_ref3$format,_ref3$type=_ref3.type,type=void 0===_ref3$type?this.type:_ref3$type,_ref3$dataFormat=_ref3.dataFormat,dataFormat=void 0===_ref3$dataFormat?this.dataFormat:_ref3$dataFormat,_ref3$compressed=_ref3.compressed,compressed=void 0!==_ref3$compressed&&_ref3$compressed,_ref3$offset=_ref3.offset,offset=void 0===_ref3$offset?0:_ref3$offset,_ref3$border=_ref3.border,_ref3$parameters=(void 0===_ref3$border&&this.border,_ref3.parameters),parameters=void 0===_ref3$parameters?{}:_ref3$parameters,_this$_deduceParamete3=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:compressed,data:data,width:width,height:height});if(type=_this$_deduceParamete3.type,dataFormat=_this$_deduceParamete3.dataFormat,compressed=_this$_deduceParamete3.compressed,width=_this$_deduceParamete3.width,height=_this$_deduceParamete3.height,Object(_utils__WEBPACK_IMPORTED_MODULE_14__.a)(0===this.depth,"texSubImage not supported for 3D textures"),data||(data=pixels),data&&data.data){var ndarray=data;data=ndarray.data,width=ndarray.shape[0],height=ndarray.shape[1]}data instanceof _buffer__WEBPACK_IMPORTED_MODULE_7__.a&&(data=data.handle),this.gl.bindTexture(this.target,this.handle),Object(_context__WEBPACK_IMPORTED_MODULE_9__.a)(this.gl,parameters,(function(){compressed?_this4.gl.compressedTexSubImage2D(target,level,x,y,width,height,format,data):null===data?_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,null):ArrayBuffer.isView(data)?_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,data,offset):data instanceof _webgl_utils__WEBPACK_IMPORTED_MODULE_11__.b?(Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_10__.a)(_this4.gl),_this4.gl.bindBuffer(35052,data),_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,offset),_this4.gl.bindBuffer(35052,null)):Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_10__.d)(_this4.gl)?_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,data):_this4.gl.texSubImage2D(target,level,x,y,dataFormat,type,data)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function copyFramebuffer(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils__WEBPACK_IMPORTED_MODULE_13__.a.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function getActiveUnit(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function bind(){var textureUnit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,gl=this.gl;return void 0!==textureUnit&&(this.textureUnit=textureUnit,gl.activeTexture(33984+textureUnit)),gl.bindTexture(this.target,this.handle),textureUnit}},{key:"unbind",value:function unbind(){var textureUnit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,gl=this.gl;return void 0!==textureUnit&&(this.textureUnit=textureUnit,gl.activeTexture(33984+textureUnit)),gl.bindTexture(this.target,null),textureUnit}},{key:"_getDataType",value:function _getDataType(_ref4){var data=_ref4.data,_ref4$compressed=_ref4.compressed;return void 0!==_ref4$compressed&&_ref4$compressed?{data:data,dataType:"compressed"}:null===data?{data:data,dataType:"null"}:ArrayBuffer.isView(data)?{data:data,dataType:"typed-array"}:data instanceof _buffer__WEBPACK_IMPORTED_MODULE_7__.a?{data:data.handle,dataType:"buffer"}:data instanceof _webgl_utils__WEBPACK_IMPORTED_MODULE_11__.b?{data:data,dataType:"buffer"}:{data:data,dataType:"browser-object"}}},{key:"_deduceParameters",value:function _deduceParameters(opts){var format=opts.format,data=opts.data,width=opts.width,height=opts.height,dataFormat=opts.dataFormat,type=opts.type,compressed=opts.compressed,textureFormat=_texture_formats__WEBPACK_IMPORTED_MODULE_8__.b[format];dataFormat=dataFormat||textureFormat&&textureFormat.dataFormat,type=type||textureFormat&&textureFormat.types[0],compressed=compressed||textureFormat&&textureFormat.compressed;var _this$_deduceImageSiz=this._deduceImageSize(data,width,height);return{dataFormat:dataFormat,type:type,compressed:compressed,width:width=_this$_deduceImageSiz.width,height:height=_this$_deduceImageSiz.height,format:format,data:data}}},{key:"_deduceImageSize",value:function _deduceImageSize(data,width,height){var size;return size="undefined"!=typeof ImageData&&data instanceof ImageData?{width:data.width,height:data.height}:"undefined"!=typeof HTMLImageElement&&data instanceof HTMLImageElement?{width:data.naturalWidth,height:data.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&data instanceof HTMLCanvasElement?{width:data.width,height:data.height}:"undefined"!=typeof ImageBitmap&&data instanceof ImageBitmap?{width:data.width,height:data.height}:"undefined"!=typeof HTMLVideoElement&&data instanceof HTMLVideoElement?{width:data.videoWidth,height:data.videoHeight}:data?{width:width,height:height}:{width:width>=0?width:1,height:height>=0?height:1},Object(_utils__WEBPACK_IMPORTED_MODULE_14__.a)(size,"Could not deduced texture size"),Object(_utils__WEBPACK_IMPORTED_MODULE_14__.a)(void 0===width||size.width===width,"Deduced texture width does not match supplied width"),Object(_utils__WEBPACK_IMPORTED_MODULE_14__.a)(void 0===height||size.height===height,"Deduced texture height does not match supplied height"),size}},{key:"_createHandle",value:function _createHandle(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function _getParameter(pname){switch(pname){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var value=this.gl.getTexParameter(this.target,pname);return this.gl.bindTexture(this.target,null),value}}},{key:"_setParameter",value:function _setParameter(pname,param){switch(this.gl.bindTexture(this.target,this.handle),param=this._getNPOTParam(pname,param),pname){case 33082:case 33083:this.gl.texParameterf(this.handle,pname,param);break;case 4096:case 4097:Object(_utils__WEBPACK_IMPORTED_MODULE_14__.a)(!1);break;default:this.gl.texParameteri(this.target,pname,param)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function _isNPOT(){return!Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_10__.d)(this.gl)&&(!(!this.width||!this.height)&&(!Object(_utils__WEBPACK_IMPORTED_MODULE_12__.b)(this.width)||!Object(_utils__WEBPACK_IMPORTED_MODULE_12__.b)(this.height)))}},{key:"_updateForNPOT",value:function _updateForNPOT(parameters){void 0===parameters[this.gl.TEXTURE_MIN_FILTER]&&(parameters[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===parameters[this.gl.TEXTURE_WRAP_S]&&(parameters[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===parameters[this.gl.TEXTURE_WRAP_T]&&(parameters[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function _getNPOTParam(pname,param){if(this._isNPOT())switch(pname){case 10241:-1===NPOT_MIN_FILTERS.indexOf(param)&&(param=9729);break;case 10242:case 10243:33071!==param&&(param=33071)}return param}}]),Texture}(_resource__WEBPACK_IMPORTED_MODULE_6__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Color})),__webpack_require__.d(__webpack_exports__,"d",(function(){return darker})),__webpack_require__.d(__webpack_exports__,"c",(function(){return brighter})),__webpack_require__.d(__webpack_exports__,"e",(function(){return color})),__webpack_require__.d(__webpack_exports__,"h",(function(){return rgbConvert})),__webpack_require__.d(__webpack_exports__,"g",(function(){return rgb})),__webpack_require__.d(__webpack_exports__,"b",(function(){return Rgb})),__webpack_require__.d(__webpack_exports__,"f",(function(){return hsl}));var _define_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(63);function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;return format=(format+"").trim().toLowerCase(),(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn(m):3===l?new Rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===l?new Rgb(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===l?new Rgb(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function rgbConvert(o){return o instanceof Color||(o=color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}function rgb(r,g,b,opacity){return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}function hex(value){return((value=Math.max(0,Math.min(255,Math.round(value)||0)))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function hsl(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.a)(Color,color,{copy:function(channels){return Object.assign(new this.constructor,this,channels)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:function color_formatHsl(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.a)(Rgb,rgb,Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.b)(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){return k=null==k?darker:Math.pow(darker,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.a)(Hsl,hsl,Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.b)(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?darker:Math.pow(darker,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}))},function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),IE8_DOM_DEFINE=__webpack_require__(346),anObject=__webpack_require__(50),toPrimitive=__webpack_require__(172),nativeDefineProperty=Object.defineProperty;exports.f=DESCRIPTORS?nativeDefineProperty:function defineProperty(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return nativeDefineProperty(O,P,Attributes)}catch(error){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported");return"value"in Attributes&&(O[P]=Attributes.value),O}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createMat4})),__webpack_require__.d(__webpack_exports__,"b",(function(){return extractCameraVectors})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getFrustumPlanes})),__webpack_require__.d(__webpack_exports__,"d",(function(){return toDoublePrecisionArray}));var _typed_array_manager__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(139),math_gl__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(42);function createMat4(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function extractCameraVectors(_ref){var viewMatrix=_ref.viewMatrix,viewMatrixInverse=_ref.viewMatrixInverse;return{eye:[viewMatrixInverse[12],viewMatrixInverse[13],viewMatrixInverse[14]],direction:[-viewMatrix[2],-viewMatrix[6],-viewMatrix[10]],up:[viewMatrix[1],viewMatrix[5],viewMatrix[9]],right:[viewMatrix[0],viewMatrix[4],viewMatrix[8]]}}var scratchArray,cameraPosition=new math_gl__WEBPACK_IMPORTED_MODULE_1__.a,cameraDirection=new math_gl__WEBPACK_IMPORTED_MODULE_1__.a,cameraUp=new math_gl__WEBPACK_IMPORTED_MODULE_1__.a,cameraRight=new math_gl__WEBPACK_IMPORTED_MODULE_1__.a,nearCenter=new math_gl__WEBPACK_IMPORTED_MODULE_1__.a,farCenter=new math_gl__WEBPACK_IMPORTED_MODULE_1__.a,a=new math_gl__WEBPACK_IMPORTED_MODULE_1__.a;function getFrustumPlanes(_ref2){var aspect=_ref2.aspect,near=_ref2.near,far=_ref2.far,fovyRadians=_ref2.fovyRadians,position=_ref2.position,direction=_ref2.direction,up=_ref2.up,right=_ref2.right;cameraDirection.copy(direction);var nearFarScale=1/cameraDirection.len();cameraDirection.normalize(),cameraPosition.copy(position),cameraUp.copy(up).normalize(),cameraRight.copy(right).normalize();var nearHeight=2*Math.tan(fovyRadians/2)*near,nearWidth=nearHeight*aspect;nearCenter.copy(cameraDirection).scale(near*nearFarScale).add(cameraPosition),farCenter.copy(cameraDirection).scale(far*nearFarScale).add(cameraPosition);var normal=cameraDirection.clone().negate(),distance=normal.dot(nearCenter),planes={near:{distance:distance,normal:normal},far:{distance:cameraDirection.dot(farCenter),normal:cameraDirection.clone()}};return a.copy(cameraRight).scale(.5*nearWidth).add(nearCenter).subtract(cameraPosition).normalize(),normal=new math_gl__WEBPACK_IMPORTED_MODULE_1__.a(cameraUp).cross(a),distance=cameraPosition.dot(normal),planes.right={normal:normal,distance:distance},a.copy(cameraRight).scale(.5*-nearWidth).add(nearCenter).subtract(cameraPosition).normalize(),normal=new math_gl__WEBPACK_IMPORTED_MODULE_1__.a(a).cross(cameraUp),distance=cameraPosition.dot(normal),planes.left={normal:normal,distance:distance},a.copy(cameraUp).scale(.5*nearHeight).add(nearCenter).subtract(cameraPosition).normalize(),normal=new math_gl__WEBPACK_IMPORTED_MODULE_1__.a(a).cross(cameraRight),distance=cameraPosition.dot(normal),planes.top={normal:normal,distance:distance},a.copy(cameraUp).scale(.5*-nearHeight).add(nearCenter).subtract(cameraPosition).normalize(),normal=new math_gl__WEBPACK_IMPORTED_MODULE_1__.a(cameraRight).cross(a),distance=cameraPosition.dot(normal),planes.bottom={normal:normal,distance:distance},planes}function toDoublePrecisionArray(typedArray,_ref3){var _ref3$size=_ref3.size,size=void 0===_ref3$size?1:_ref3$size,_ref3$startIndex=_ref3.startIndex,startIndex=void 0===_ref3$startIndex?0:_ref3$startIndex,endIndex=_ref3.endIndex;Number.isFinite(endIndex)||(endIndex=typedArray.length);var count=(endIndex-startIndex)/size;scratchArray=_typed_array_manager__WEBPACK_IMPORTED_MODULE_0__.a.allocate(scratchArray,count,{type:Float32Array,size:2*size});for(var x,sourceIndex=startIndex,targetIndex=0;sourceIndex<endIndex;){for(var j=0;j<size;j++){var value=typedArray[sourceIndex++];scratchArray[targetIndex+j]=value,scratchArray[targetIndex+j+size]=(x=value)-Math.fround(x)}targetIndex+=2*size}return scratchArray.subarray(0,count*size*2)}},function(module,__webpack_exports__,__webpack_require__){"use strict";function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}__webpack_require__.d(__webpack_exports__,"b",(function(){return extend})),__webpack_exports__.a=function(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(471);module.exports=Function.prototype.bind||implementation},function(module,__webpack_exports__,__webpack_require__){"use strict";function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain)}return this}function initInterpolator(domain,interpolator){switch(arguments.length){case 0:break;case 1:"function"==typeof domain?this.interpolator(domain):this.range(domain);break;default:this.domain(domain),"function"==typeof interpolator?this.interpolator(interpolator):this.range(interpolator)}return this}__webpack_require__.d(__webpack_exports__,"b",(function(){return initRange})),__webpack_require__.d(__webpack_exports__,"a",(function(){return initInterpolator}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Accessor}));var _babel_runtime_helpers_esm_construct__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(157),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_webgl_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(113),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(17),_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(317),DEFAULT_ACCESSOR_VALUES={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},PROP_CHECKS={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},Accessor=function(){function Accessor(){var _this=this;Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,Accessor);for(var _len2=arguments.length,accessors=new Array(_len2),_key2=0;_key2<_len2;_key2++)accessors[_key2]=arguments[_key2];accessors.forEach((function(accessor){return _this._assign(accessor)})),Object.freeze(this)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(Accessor,null,[{key:"getBytesPerElement",value:function getBytesPerElement(accessor){return Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_3__.c)(accessor.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function getBytesPerVertex(accessor){return Object(_utils__WEBPACK_IMPORTED_MODULE_4__.a)(accessor.size),Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_3__.c)(accessor.type||5126).BYTES_PER_ELEMENT*accessor.size}},{key:"resolve",value:function resolve(){for(var _len=arguments.length,accessors=new Array(_len),_key=0;_key<_len;_key++)accessors[_key]=arguments[_key];return Object(_babel_runtime_helpers_esm_construct__WEBPACK_IMPORTED_MODULE_0__.a)(Accessor,[DEFAULT_ACCESSOR_VALUES].concat(accessors))}}]),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(Accessor,[{key:"toString",value:function toString(){return JSON.stringify(this)}},{key:"_assign",value:function _assign(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(props=Object(_utils__WEBPACK_IMPORTED_MODULE_5__.a)("Accessor",props,PROP_CHECKS)).type&&(this.type=props.type,5124!==props.type&&5125!==props.type||(this.integer=!0)),void 0!==props.size&&(this.size=props.size),void 0!==props.offset&&(this.offset=props.offset),void 0!==props.stride&&(this.stride=props.stride),void 0!==props.normalized&&(this.normalized=props.normalized),void 0!==props.integer&&(this.integer=props.integer),void 0!==props.divisor&&(this.divisor=props.divisor),void 0!==props.buffer&&(this.buffer=props.buffer),void 0!==props.index&&("boolean"==typeof index?this.index=props.index?1:0:this.index=props.index),void 0!==props.instanced&&(this.divisor=props.instanced?1:0),void 0!==props.isInstanced&&(this.divisor=props.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function get(){return Accessor.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function get(){return Accessor.getBytesPerVertex(this)}}]),Accessor}()},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"b",(function(){return window_})),__webpack_require__.d(__webpack_exports__,"a",(function(){return document_}));var window_="undefined"!=typeof window?window:global,document_=(void 0!==global||window,"undefined"!=typeof document?document:{})}).call(this,__webpack_require__(36))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return GL_PARAMETER_DEFAULTS})),__webpack_require__.d(__webpack_exports__,"d",(function(){return GL_PARAMETER_SETTERS})),__webpack_require__.d(__webpack_exports__,"a",(function(){return GL_COMPOSITE_PARAMETER_SETTERS})),__webpack_require__.d(__webpack_exports__,"c",(function(){return GL_PARAMETER_GETTERS}));var _GL_PARAMETER_DEFAULT,_GL_PARAMETER_SETTERS,_GL_PARAMETER_GETTERS,_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(16),_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(439),GL_PARAMETER_DEFAULTS=(_GL_PARAMETER_DEFAULT={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3042,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32773,new Float32Array([0,0,0,0])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32777,32774),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,34877,32774),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32969,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32968,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32971,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32970,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3106,new Float32Array([0,0,0,0])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3107,[!0,!0,!0,!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2884,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2885,1029),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2929,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2931,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2932,513),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2928,new Float32Array([0,1])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2930,!0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3024,!0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,36006,null),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2886,2305),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,33170,4352),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2849,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32823,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32824,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,10752,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32938,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32939,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3089,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3088,new Int32Array([0,0,1024,1024])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2960,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2961,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2968,4294967295),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,36005,4294967295),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2962,519),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2967,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2963,4294967295),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,34816,519),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,36003,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,36004,4294967295),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2964,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2965,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2966,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,34817,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,34818,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,34819,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2978,new Int32Array([0,0,1024,1024])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3333,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3317,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,37440,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,37441,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,37443,37444),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,35723,4352),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,36010,null),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,35977,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3330,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3332,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3331,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3314,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32878,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3316,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3315,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32877,0),_GL_PARAMETER_DEFAULT),enable=function enable(gl,value,key){return value?gl.enable(key):gl.disable(key)},hint=function hint(gl,value,key){return gl.hint(key,value)},pixelStorei=function pixelStorei(gl,value,key){return gl.pixelStorei(key,value)},GL_PARAMETER_SETTERS=(_GL_PARAMETER_SETTERS={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3042,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32773,(function(gl,value){return gl.blendColor.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32777,"blendEquation"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,34877,"blendEquation"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32969,"blendFunc"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32968,"blendFunc"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32971,"blendFunc"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32970,"blendFunc"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3106,(function(gl,value){return gl.clearColor.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3107,(function(gl,value){return gl.colorMask.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2884,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2885,(function(gl,value){return gl.cullFace(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2929,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2931,(function(gl,value){return gl.clearDepth(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2932,(function(gl,value){return gl.depthFunc(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2928,(function(gl,value){return gl.depthRange.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2930,(function(gl,value){return gl.depthMask(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3024,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,35723,hint),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,36006,(function drawFramebuffer(gl,value){var target=Object(_utils__WEBPACK_IMPORTED_MODULE_2__.b)(gl)?36009:36160;return gl.bindFramebuffer(target,value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2886,(function(gl,value){return gl.frontFace(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,33170,hint),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2849,(function(gl,value){return gl.lineWidth(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32823,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32824,"polygonOffset"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,10752,"polygonOffset"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,35977,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32938,"sampleCoverage"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32939,"sampleCoverage"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3089,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3088,(function(gl,value){return gl.scissor.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2960,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2961,(function(gl,value){return gl.clearStencil(value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2968,(function(gl,value){return gl.stencilMaskSeparate(1028,value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,36005,(function(gl,value){return gl.stencilMaskSeparate(1029,value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2962,"stencilFuncFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2967,"stencilFuncFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2963,"stencilFuncFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,34816,"stencilFuncBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,36003,"stencilFuncBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,36004,"stencilFuncBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2964,"stencilOpFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2965,"stencilOpFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2966,"stencilOpFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,34817,"stencilOpBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,34818,"stencilOpBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,34819,"stencilOpBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2978,(function(gl,value){return gl.viewport.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(value))})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3333,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3317,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,37440,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,37441,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,37443,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3330,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3332,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3331,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,36010,(function readFramebuffer(gl,value){return gl.bindFramebuffer(36008,value)})),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3314,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32878,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3316,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3315,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32877,pixelStorei),_GL_PARAMETER_SETTERS),GL_COMPOSITE_PARAMETER_SETTERS={blendEquation:function blendEquation(gl,values){return gl.blendEquationSeparate(values[32777],values[34877])},blendFunc:function blendFunc(gl,values){return gl.blendFuncSeparate(values[32969],values[32968],values[32971],values[32970])},polygonOffset:function polygonOffset(gl,values){return gl.polygonOffset(values[32824],values[10752])},sampleCoverage:function sampleCoverage(gl,values){return gl.sampleCoverage(values[32938],values[32939])},stencilFuncFront:function stencilFuncFront(gl,values){return gl.stencilFuncSeparate(1028,values[2962],values[2967],values[2963])},stencilFuncBack:function stencilFuncBack(gl,values){return gl.stencilFuncSeparate(1029,values[34816],values[36003],values[36004])},stencilOpFront:function stencilOpFront(gl,values){return gl.stencilOpSeparate(1028,values[2964],values[2965],values[2966])},stencilOpBack:function stencilOpBack(gl,values){return gl.stencilOpSeparate(1029,values[34817],values[34818],values[34819])}},isEnabled=function isEnabled(gl,key){return gl.isEnabled(key)},GL_PARAMETER_GETTERS=(_GL_PARAMETER_GETTERS={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,3042,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,2884,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,2929,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,3024,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,32823,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,32926,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,32928,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,3089,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,2960,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,35977,isEnabled),_GL_PARAMETER_GETTERS)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Framebuffer}));var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3),_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(20),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6),_resource__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(47),_texture_2d__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(161),_renderbuffer__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(140),_clear__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(259),_copy_and_blit_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(316),_features__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(318),_webgl_utils__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(39),_webgl_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(128),_utils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(17),_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(25),Framebuffer=function(_Resource){function Framebuffer(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__.a)(this,Framebuffer),(_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__.a)(Framebuffer).call(this,gl,opts))).width=null,_this.height=null,_this.attachments={},_this.readBuffer=36064,_this.drawBuffers=[36064],_this.ownResources=[],_this.initialize(opts),Object.seal(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__.a)(_this)),_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__.a)(Framebuffer,_Resource),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(Framebuffer,[{key:"MAX_COLOR_ATTACHMENTS",get:function get(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function get(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function isSupported(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},colorBufferFloat=_ref.colorBufferFloat,colorBufferHalfFloat=_ref.colorBufferHalfFloat,supported=!0;return colorBufferFloat&&(supported=Boolean(gl.getExtension("EXT_color_buffer_float")||gl.getExtension("WEBGL_color_buffer_float")||gl.getExtension("OES_texture_float"))),colorBufferHalfFloat&&(supported=supported&&Boolean(gl.getExtension("EXT_color_buffer_float")||gl.getExtension("EXT_color_buffer_half_float"))),supported}},{key:"getDefaultFramebuffer",value:function getDefaultFramebuffer(gl){return gl.luma=gl.luma||{},gl.luma.defaultFramebuffer=gl.luma.defaultFramebuffer||new Framebuffer(gl,{id:"default-framebuffer",handle:null,attachments:{}}),gl.luma.defaultFramebuffer}}]),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(Framebuffer,[{key:"initialize",value:function initialize(_ref2){var _ref2$width=_ref2.width,width=void 0===_ref2$width?1:_ref2$width,_ref2$height=_ref2.height,height=void 0===_ref2$height?1:_ref2$height,_ref2$attachments=_ref2.attachments,attachments=void 0===_ref2$attachments?null:_ref2$attachments,_ref2$color=_ref2.color,color=void 0===_ref2$color||_ref2$color,_ref2$depth=_ref2.depth,depth=void 0===_ref2$depth||_ref2$depth,_ref2$stencil=_ref2.stencil,stencil=void 0!==_ref2$stencil&&_ref2$stencil,_ref2$check=_ref2.check,check=void 0===_ref2$check||_ref2$check,readBuffer=_ref2.readBuffer,drawBuffers=_ref2.drawBuffers;if(Object(_utils__WEBPACK_IMPORTED_MODULE_17__.a)(width>=0&&height>=0,"Width and height need to be integers"),this.width=width,this.height=height,attachments)for(var attachment in attachments){var target=attachments[attachment];(Array.isArray(target)?target[0]:target).resize({width:width,height:height})}else attachments=this._createDefaultAttachments(color,depth,stencil,width,height);this.update({clearAttachments:!0,attachments:attachments,readBuffer:readBuffer,drawBuffers:drawBuffers}),attachments&&check&&this.checkStatus()}},{key:"delete",value:function _delete(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.ownResources[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.delete()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}Object(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__.a)(Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__.a)(Framebuffer.prototype),"delete",this).call(this)}},{key:"update",value:function update(_ref3){var _ref3$attachments=_ref3.attachments,attachments=void 0===_ref3$attachments?{}:_ref3$attachments,readBuffer=_ref3.readBuffer,drawBuffers=_ref3.drawBuffers,_ref3$clearAttachment=_ref3.clearAttachments,clearAttachments=void 0!==_ref3$clearAttachment&&_ref3$clearAttachment,_ref3$resizeAttachmen=_ref3.resizeAttachments,resizeAttachments=void 0===_ref3$resizeAttachmen||_ref3$resizeAttachmen;this.attach(attachments,{clearAttachments:clearAttachments,resizeAttachments:resizeAttachments});var gl=this.gl,prevHandle=gl.bindFramebuffer(36160,this.handle);return readBuffer&&this._setReadBuffer(readBuffer),drawBuffers&&this._setDrawBuffers(drawBuffers),gl.bindFramebuffer(36160,prevHandle||null),this}},{key:"resize",value:function resize(){var _ref4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=_ref4.width,height=_ref4.height;if(null===this.handle)return Object(_utils__WEBPACK_IMPORTED_MODULE_17__.a)(void 0===width&&void 0===height),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var attachmentPoint in void 0===width&&(width=this.gl.drawingBufferWidth),void 0===height&&(height=this.gl.drawingBufferHeight),width!==this.width&&height!==this.height&&_utils__WEBPACK_IMPORTED_MODULE_18__.a.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(width,"x").concat(height))(),this.attachments)this.attachments[attachmentPoint].resize({width:width,height:height});return this.width=width,this.height=height,this}},{key:"attach",value:function attach(attachments){var _this2=this,_ref5=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref5$clearAttachment=_ref5.clearAttachments,clearAttachments=void 0!==_ref5$clearAttachment&&_ref5$clearAttachment,_ref5$resizeAttachmen=_ref5.resizeAttachments,resizeAttachments=void 0===_ref5$resizeAttachmen||_ref5$resizeAttachmen,newAttachments={};clearAttachments&&Object.keys(this.attachments).forEach((function(key){newAttachments[key]=null})),Object.assign(newAttachments,attachments);var prevHandle=this.gl.bindFramebuffer(36160,this.handle);for(var key in newAttachments){Object(_utils__WEBPACK_IMPORTED_MODULE_17__.a)(void 0!==key,"Misspelled framebuffer binding point?");var attachment=Number(key),descriptor=newAttachments[attachment],object=descriptor;if(object)if(object instanceof _renderbuffer__WEBPACK_IMPORTED_MODULE_11__.a)this._attachRenderbuffer({attachment:attachment,renderbuffer:object});else if(Array.isArray(descriptor)){var _descriptor=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(descriptor,3),texture=_descriptor[0],_descriptor$=_descriptor[1],layer=void 0===_descriptor$?0:_descriptor$,_descriptor$2=_descriptor[2],level=void 0===_descriptor$2?0:_descriptor$2;object=texture,this._attachTexture({attachment:attachment,texture:texture,layer:layer,level:level})}else this._attachTexture({attachment:attachment,texture:object,layer:0,level:0});else this._unattach(attachment);resizeAttachments&&object&&object.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,prevHandle||null),Object.assign(this.attachments,attachments),Object.keys(this.attachments).filter((function(key){return!_this2.attachments[key]})).forEach((function(key){delete _this2.attachments[key]}))}},{key:"checkStatus",value:function checkStatus(){this.gl;var status=this.getStatus();if(36053!==status)throw new Error(_getFrameBufferStatus(status));return this}},{key:"getStatus",value:function getStatus(){var gl=this.gl,prevHandle=gl.bindFramebuffer(36160,this.handle),status=gl.checkFramebufferStatus(36160);return gl.bindFramebuffer(36160,prevHandle||null),status}},{key:"clear",value:function clear(){var _ref6=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},color=_ref6.color,depth=_ref6.depth,stencil=_ref6.stencil,_ref6$drawBuffers=_ref6.drawBuffers,drawBuffers=void 0===_ref6$drawBuffers?[]:_ref6$drawBuffers,prevHandle=this.gl.bindFramebuffer(36160,this.handle);return(color||depth||stencil)&&Object(_clear__WEBPACK_IMPORTED_MODULE_12__.a)(this.gl,{color:color,depth:depth,stencil:stencil}),drawBuffers.forEach((function(value,drawBuffer){Object(_clear__WEBPACK_IMPORTED_MODULE_12__.b)({drawBuffer:drawBuffer,value:value})})),this.gl.bindFramebuffer(36160,prevHandle||null),this}},{key:"readPixels",value:function readPixels(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils__WEBPACK_IMPORTED_MODULE_18__.a.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function readPixelsToBuffer(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils__WEBPACK_IMPORTED_MODULE_18__.a.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function copyToDataUrl(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils__WEBPACK_IMPORTED_MODULE_18__.a.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function copyToImage(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils__WEBPACK_IMPORTED_MODULE_18__.a.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function copyToTexture(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils__WEBPACK_IMPORTED_MODULE_18__.a.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function blit(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils__WEBPACK_IMPORTED_MODULE_18__.a.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function invalidate(_ref7){var _ref7$attachments=_ref7.attachments,attachments=void 0===_ref7$attachments?[]:_ref7$attachments,_ref7$x=_ref7.x,x=void 0===_ref7$x?0:_ref7$x,_ref7$y=_ref7.y,y=void 0===_ref7$y?0:_ref7$y,width=_ref7.width,height=_ref7.height,gl=this.gl;Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_15__.a)(gl);var prevHandle=gl.bindFramebuffer(36008,this.handle);return 0===x&&0===y&&void 0===width&&void 0===height?gl.invalidateFramebuffer(36008,attachments):gl.invalidateFramebuffer(36008,attachments,x,y,width,height),gl.bindFramebuffer(36008,prevHandle),this}},{key:"getAttachmentParameter",value:function getAttachmentParameter(attachment,pname,keys){var value=this._getAttachmentParameterFallback(pname);return null===value&&(this.gl.bindFramebuffer(36160,this.handle),value=this.gl.getFramebufferAttachmentParameter(36160,attachment,pname),this.gl.bindFramebuffer(36160,null)),keys&&value>1e3&&(value=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_16__.a)(this.gl,value)),value}},{key:"getAttachmentParameters",value:function getAttachmentParameters(){var attachment=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,keys=arguments.length>1?arguments[1]:void 0,parameters=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],values={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=parameters[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var pname=_step2.value,key=keys?Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_16__.a)(this.gl,pname):pname;values[key]=this.getAttachmentParameter(attachment,pname,keys)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return values}},{key:"getParameters",value:function getParameters(){for(var keys=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],attachments=Object.keys(this.attachments),parameters={},_i=0,_attachments=attachments;_i<_attachments.length;_i++){var attachmentName=_attachments[_i],attachment=Number(attachmentName),key=keys?Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_16__.a)(this.gl,attachment):attachment;parameters[key]=this.getAttachmentParameters(attachment,keys)}return parameters}},{key:"show",value:function show(){return"undefined"!=typeof window&&window.open(Object(_copy_and_blit_js__WEBPACK_IMPORTED_MODULE_13__.a)(this),"luma-debug-texture"),this}},{key:"log",value:function log(){var priority=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,message=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(priority>_utils__WEBPACK_IMPORTED_MODULE_18__.a.priority||"undefined"==typeof window)return this;message=message||"Framebuffer ".concat(this.id);var image=Object(_copy_and_blit_js__WEBPACK_IMPORTED_MODULE_13__.a)(this,{maxHeight:100});return _utils__WEBPACK_IMPORTED_MODULE_18__.a.image({priority:priority,message:message,image:image},message)(),this}},{key:"bind",value:function bind(){var _ref8=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref8$target=_ref8.target,target=void 0===_ref8$target?36160:_ref8$target;return this.gl.bindFramebuffer(target,this.handle),this}},{key:"unbind",value:function unbind(){var _ref9=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref9$target=_ref9.target,target=void 0===_ref9$target?36160:_ref9$target;return this.gl.bindFramebuffer(target,null),this}},{key:"_createDefaultAttachments",value:function _createDefaultAttachments(color,depth,stencil,width,height){var _parameters,defaultAttachments=null;color&&((defaultAttachments=defaultAttachments||{})[36064]=new _texture_2d__WEBPACK_IMPORTED_MODULE_10__.a(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:width,height:height,mipmaps:!1,parameters:(_parameters={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_parameters,10241,9729),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_parameters,10240,9729),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_parameters,10242,33071),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_parameters,10243,33071),_parameters)}),this.ownResources.push(defaultAttachments[36064]));return depth&&stencil?((defaultAttachments=defaultAttachments||{})[33306]=new _renderbuffer__WEBPACK_IMPORTED_MODULE_11__.a(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:width,height:111}),this.ownResources.push(defaultAttachments[33306])):depth?((defaultAttachments=defaultAttachments||{})[36096]=new _renderbuffer__WEBPACK_IMPORTED_MODULE_11__.a(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:width,height:height}),this.ownResources.push(defaultAttachments[36096])):stencil&&Object(_utils__WEBPACK_IMPORTED_MODULE_17__.a)(!1),defaultAttachments}},{key:"_unattach",value:function _unattach(attachment){var oldAttachment=this.attachments[attachment];oldAttachment&&(oldAttachment instanceof _renderbuffer__WEBPACK_IMPORTED_MODULE_11__.a?this.gl.framebufferRenderbuffer(36160,attachment,36161,null):this.gl.framebufferTexture2D(36160,attachment,3553,null,0),delete this.attachments[attachment])}},{key:"_attachRenderbuffer",value:function _attachRenderbuffer(_ref10){var _ref10$attachment=_ref10.attachment,attachment=void 0===_ref10$attachment?36064:_ref10$attachment,renderbuffer=_ref10.renderbuffer;this.gl.framebufferRenderbuffer(36160,attachment,36161,renderbuffer.handle),this.attachments[attachment]=renderbuffer}},{key:"_attachTexture",value:function _attachTexture(_ref11){var _ref11$attachment=_ref11.attachment,attachment=void 0===_ref11$attachment?36064:_ref11$attachment,texture=_ref11.texture,layer=_ref11.layer,level=_ref11.level,gl=this.gl;switch(gl.bindTexture(texture.target,texture.handle),texture.target){case 35866:case 32879:gl.framebufferTextureLayer(36160,attachment,texture.target,level,layer);break;case 34067:var face=function mapIndexToCubeMapFace(layer){return layer<34069?layer+34069:layer}(layer);gl.framebufferTexture2D(36160,attachment,face,texture.handle,level);break;case 3553:gl.framebufferTexture2D(36160,attachment,3553,texture.handle,level);break;default:Object(_utils__WEBPACK_IMPORTED_MODULE_17__.a)(!1,"Illegal texture type")}gl.bindTexture(texture.target,null),this.attachments[attachment]=texture}},{key:"_setReadBuffer",value:function _setReadBuffer(readBuffer){var gl=this.gl;Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_15__.d)(gl)?gl.readBuffer(readBuffer):Object(_utils__WEBPACK_IMPORTED_MODULE_17__.a)(36064===readBuffer||1029===readBuffer,"Multiple render targets not supported"),this.readBuffer=readBuffer}},{key:"_setDrawBuffers",value:function _setDrawBuffers(drawBuffers){var gl=this.gl;if(Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_15__.d)(gl))gl.drawBuffers(drawBuffers);else{var ext=gl.getExtension("WEBGL.draw_buffers");ext?ext.drawBuffersWEBGL(drawBuffers):Object(_utils__WEBPACK_IMPORTED_MODULE_17__.a)(1===drawBuffers.length&&(36064===drawBuffers[0]||1029===drawBuffers[0]),"Multiple render targets not supported")}this.drawBuffers=drawBuffers}},{key:"_getAttachmentParameterFallback",value:function _getAttachmentParameterFallback(pname){var caps=Object(_features__WEBPACK_IMPORTED_MODULE_14__.a)(this.gl);switch(pname){case 36052:return caps.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return caps.webgl2?null:8;case 33297:return caps.webgl2?null:5125;case 33296:return caps.webgl2||caps.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function _createHandle(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function _bindHandle(handle){return this.gl.bindFramebuffer(36160,handle)}},{key:"color",get:function get(){return this.attachments[36064]||null}},{key:"texture",get:function get(){return this.attachments[36064]||null}},{key:"depth",get:function get(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function get(){return this.attachments[36128]||this.attachments[33306]||null}}]),Framebuffer}(_resource__WEBPACK_IMPORTED_MODULE_9__.a);function _getFrameBufferStatus(status){return(Framebuffer.STATUS||{})[status]||"Framebuffer error ".concat(status)}Framebuffer.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return setPropOverrides})),__webpack_require__.d(__webpack_exports__,"a",(function(){return applyPropOverrides})),__webpack_require__.d(__webpack_exports__,"c",(function(){return layerEditListener})),__webpack_require__.d(__webpack_exports__,"e",(function(){return seerInitListener})),__webpack_require__.d(__webpack_exports__,"b",(function(){return initLayerInSeer})),__webpack_require__.d(__webpack_exports__,"g",(function(){return updateLayerInSeer})),__webpack_require__.d(__webpack_exports__,"d",(function(){return removeLayerInSeer}));var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(16),seer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(30),seer__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(seer__WEBPACK_IMPORTED_MODULE_1__),overrides=new Map,setPropOverrides=function setPropOverrides(id,valuePath,value){seer__WEBPACK_IMPORTED_MODULE_1___default.a.isReady()&&(overrides.has(id)||overrides.set(id,new Map),overrides.get(id).set(valuePath,value))},applyPropOverrides=function applyPropOverrides(props){if(seer__WEBPACK_IMPORTED_MODULE_1___default.a.isReady()&&props.id){var overs=overrides.get(props.id);overs&&overs.forEach((function(value,valuePath){!function recursiveSet(obj,path,value){obj&&(path.length>1?recursiveSet(obj[path[0]],path.slice(1),value):obj[path[0]]=value)}(props,valuePath,value),"data"===valuePath[0]&&(props.data=Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(props.data))}))}},layerEditListener=function layerEditListener(cb){seer__WEBPACK_IMPORTED_MODULE_1___default.a.isReady()&&seer__WEBPACK_IMPORTED_MODULE_1___default.a.listenFor("deck.gl",cb)},seerInitListener=function seerInitListener(cb){seer__WEBPACK_IMPORTED_MODULE_1___default.a.isReady()&&seer__WEBPACK_IMPORTED_MODULE_1___default.a.listenFor("init",cb)},initLayerInSeer=function initLayerInSeer(layer){if(seer__WEBPACK_IMPORTED_MODULE_1___default.a.isReady()&&layer){var badges=[layer.constructor.layerName];seer__WEBPACK_IMPORTED_MODULE_1___default.a.listItem("deck.gl",layer.id,{badges:badges,links:layer.state&&layer.state.model?["luma.gl:".concat(layer.state.model.id)]:void 0,parent:layer.parent?layer.parent.id:void 0})}},updateLayerInSeer=function updateLayerInSeer(layer){if(seer__WEBPACK_IMPORTED_MODULE_1___default.a.isReady()&&!seer__WEBPACK_IMPORTED_MODULE_1___default.a.throttle("deck.gl:".concat(layer.id),1e3)){var data=function logPayload(layer){var data=[{path:"objects.props",data:layer.props}],badges=[layer.constructor.layerName];if(layer.state){if(layer.getAttributeManager()){var attrs=layer.getAttributeManager().getAttributes();data.push({path:"objects.attributes",data:attrs})}if(layer.state.model){layer.state.model.setProps({timerQueryEnabled:!0});var lastFrameTime=layer.state.model.stats.lastFrameTime;lastFrameTime&&badges.push("".concat((1e3*lastFrameTime).toFixed(0),"s"))}}return data.push({path:"badges",data:badges}),data}(layer);seer__WEBPACK_IMPORTED_MODULE_1___default.a.multiUpdate("deck.gl",layer.id,data)}},removeLayerInSeer=function removeLayerInSeer(id){seer__WEBPACK_IMPORTED_MODULE_1___default.a.isReady()&&id&&seer__WEBPACK_IMPORTED_MODULE_1___default.a.deleteItem("deck.gl",id)}},,function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),fails=__webpack_require__(33),isArray=__webpack_require__(177),isObject=__webpack_require__(40),toObject=__webpack_require__(77),toLength=__webpack_require__(76),createProperty=__webpack_require__(280),arraySpeciesCreate=__webpack_require__(352),arrayMethodHasSpeciesSupport=__webpack_require__(213),wellKnownSymbol=__webpack_require__(37),V8_VERSION=__webpack_require__(281),IS_CONCAT_SPREADABLE=wellKnownSymbol("isConcatSpreadable"),IS_CONCAT_SPREADABLE_SUPPORT=V8_VERSION>=51||!fails((function(){var array=[];return array[IS_CONCAT_SPREADABLE]=!1,array.concat()[0]!==array})),SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("concat"),isConcatSpreadable=function(O){if(!isObject(O))return!1;var spreadable=O[IS_CONCAT_SPREADABLE];return void 0!==spreadable?!!spreadable:isArray(O)};$({target:"Array",proto:!0,forced:!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT},{concat:function concat(arg){var i,k,length,len,E,O=toObject(this),A=arraySpeciesCreate(O,0),n=0;for(i=-1,length=arguments.length;i<length;i++)if(E=-1===i?O:arguments[i],isConcatSpreadable(E)){if(n+(len=toLength(E.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(k=0;k<len;k++,n++)k in E&&createProperty(A,n,E[k])}else{if(n>=9007199254740991)throw TypeError("Maximum allowed index exceeded");createProperty(A,n++,E)}return A.length=n,A}})},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),definePropertyModule=__webpack_require__(61),createPropertyDescriptor=__webpack_require__(171);module.exports=DESCRIPTORS?function(object,key,value){return definePropertyModule.f(object,key,createPropertyDescriptor(1,value))}:function(object,key,value){return object[key]=value,object}},function(module,exports,__webpack_require__){var global=__webpack_require__(29),shared=__webpack_require__(173),createNonEnumerableProperty=__webpack_require__(74),has=__webpack_require__(60),setGlobal=__webpack_require__(275),nativeFunctionToString=__webpack_require__(347),InternalStateModule=__webpack_require__(118),getInternalState=InternalStateModule.get,enforceInternalState=InternalStateModule.enforce,TEMPLATE=String(nativeFunctionToString).split("toString");shared("inspectSource",(function(it){return nativeFunctionToString.call(it)})),(module.exports=function(O,key,value,options){var unsafe=!!options&&!!options.unsafe,simple=!!options&&!!options.enumerable,noTargetGet=!!options&&!!options.noTargetGet;"function"==typeof value&&("string"!=typeof key||has(value,"name")||createNonEnumerableProperty(value,"name",key),enforceInternalState(value).source=TEMPLATE.join("string"==typeof key?key:"")),O!==global?(unsafe?!noTargetGet&&O[key]&&(simple=!0):delete O[key],simple?O[key]=value:createNonEnumerableProperty(O,key,value)):simple?O[key]=value:setGlobal(key,value)})(Function.prototype,"toString",(function toString(){return"function"==typeof this&&getInternalState(this).source||nativeFunctionToString.call(this)}))},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(211),min=Math.min;module.exports=function(argument){return argument>0?min(toInteger(argument),9007199254740991):0}},function(module,exports,__webpack_require__){var requireObjectCoercible=__webpack_require__(85);module.exports=function(argument){return Object(requireObjectCoercible(argument))}},function(module,exports,__webpack_require__){var redefine=__webpack_require__(75),toString=__webpack_require__(552),ObjectPrototype=Object.prototype;toString!==ObjectPrototype.toString&&redefine(ObjectPrototype,"toString",toString,{unsafe:!0})},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(389),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Viewport}));var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_utils_log__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(62),math_gl__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(21),math_gl__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(201),math_gl__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(42),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(15),viewport_mercator_project__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(22),_utils_assert__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(14),DEGREES_TO_RADIANS=Math.PI/180,IDENTITY=Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.a)(),ZERO_VECTOR=[0,0,0],Viewport=function(){function Viewport(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,Viewport);var _opts$id=opts.id,id=void 0===_opts$id?null:_opts$id,_opts$x=opts.x,x=void 0===_opts$x?0:_opts$x,_opts$y=opts.y,y=void 0===_opts$y?0:_opts$y,_opts$width=opts.width,width=void 0===_opts$width?1:_opts$width,_opts$height=opts.height,height=void 0===_opts$height?1:_opts$height;this.id=id||this.constructor.displayName||"viewport",this.x=x,this.y=y,this.width=width||1,this.height=height||1,this._frustumPlanes={},this._initViewMatrix(opts),this._initProjectionMatrix(opts),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(Viewport,[{key:"equals",value:function equals(viewport){return viewport instanceof Viewport&&(viewport.width===this.width&&viewport.height===this.height&&viewport.scale===this.scale&&Object(math_gl__WEBPACK_IMPORTED_MODULE_5__.d)(viewport.projectionMatrix,this.projectionMatrix)&&Object(math_gl__WEBPACK_IMPORTED_MODULE_5__.d)(viewport.viewMatrix,this.viewMatrix))}},{key:"project",value:function project(xyz){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$topLeft=_ref.topLeft,topLeft=void 0===_ref$topLeft||_ref$topLeft,worldPosition=this.projectPosition(xyz),coord=Object(viewport_mercator_project__WEBPACK_IMPORTED_MODULE_9__.k)(worldPosition,this.pixelProjectionMatrix),_coord=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(coord,2),x=_coord[0],y=_coord[1],y2=topLeft?y:this.height-y;return 2===xyz.length?[x,y2]:[x,y2,coord[2]]}},{key:"unproject",value:function unproject(xyz){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$topLeft=_ref2.topLeft,topLeft=void 0===_ref2$topLeft||_ref2$topLeft,targetZ=_ref2.targetZ,_xyz=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],y2=topLeft?y:this.height-y,targetZWorld=targetZ&&targetZ*this.distanceScales.pixelsPerMeter[2],coord=Object(viewport_mercator_project__WEBPACK_IMPORTED_MODULE_9__.h)([x,y2,z],this.pixelUnprojectionMatrix,targetZWorld),_this$unprojectPositi=this.unprojectPosition(coord),_this$unprojectPositi2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_this$unprojectPositi,3),X=_this$unprojectPositi2[0],Y=_this$unprojectPositi2[1],Z=_this$unprojectPositi2[2];return Number.isFinite(z)?[X,Y,Z]:Number.isFinite(targetZ)?[X,Y,targetZ]:[X,Y]}},{key:"projectPosition",value:function projectPosition(xyz){var _this$projectFlat=this.projectFlat(xyz),_this$projectFlat2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_this$projectFlat,2);return[_this$projectFlat2[0],_this$projectFlat2[1],(xyz[2]||0)*this.distanceScales.pixelsPerMeter[2]]}},{key:"unprojectPosition",value:function unprojectPosition(xyz){var _this$unprojectFlat=this.unprojectFlat(xyz),_this$unprojectFlat2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_this$unprojectFlat,2);return[_this$unprojectFlat2[0],_this$unprojectFlat2[1],(xyz[2]||0)*this.distanceScales.metersPerPixel[2]]}},{key:"projectFlat",value:function projectFlat(xyz){var scale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return Object(viewport_mercator_project__WEBPACK_IMPORTED_MODULE_9__.g)(xyz,scale);var pixelsPerMeter=this.distanceScales.pixelsPerMeter;return[xyz[0]*pixelsPerMeter[0],xyz[1]*pixelsPerMeter[1]]}},{key:"unprojectFlat",value:function unprojectFlat(xyz){var scale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return Object(viewport_mercator_project__WEBPACK_IMPORTED_MODULE_9__.j)(xyz,scale);var metersPerPixel=this.distanceScales.metersPerPixel;return[xyz[0]*metersPerPixel[0],xyz[1]*metersPerPixel[1]]}},{key:"getDistanceScales",value:function getDistanceScales(){var coordinateOrigin=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return coordinateOrigin?Object(viewport_mercator_project__WEBPACK_IMPORTED_MODULE_9__.b)({longitude:coordinateOrigin[0],latitude:coordinateOrigin[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:"getMatrices",value:function getMatrices(){var _ref3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref3$modelMatrix=_ref3.modelMatrix,modelMatrix=void 0===_ref3$modelMatrix?null:_ref3$modelMatrix,modelViewProjectionMatrix=this.viewProjectionMatrix,pixelProjectionMatrix=this.pixelProjectionMatrix,pixelUnprojectionMatrix=this.pixelUnprojectionMatrix;modelMatrix&&(modelViewProjectionMatrix=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_8__.g([],this.viewProjectionMatrix,modelMatrix),pixelProjectionMatrix=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_8__.g([],this.pixelProjectionMatrix,modelMatrix),pixelUnprojectionMatrix=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_8__.e([],pixelProjectionMatrix));var matrices=Object.assign({modelViewProjectionMatrix:modelViewProjectionMatrix,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:pixelProjectionMatrix,pixelUnprojectionMatrix:pixelUnprojectionMatrix,width:this.width,height:this.height,scale:this.scale});return matrices}},{key:"containsPixel",value:function containsPixel(_ref4){var x=_ref4.x,y=_ref4.y,_ref4$width=_ref4.width,width=void 0===_ref4$width?1:_ref4$width,_ref4$height=_ref4.height,height=void 0===_ref4$height?1:_ref4$height;return x<this.x+this.width&&this.x<x+width&&y<this.y+this.height&&this.y<y+height}},{key:"getFrustumPlanes",value:function getFrustumPlanes(){if(this._frustumPlanes.near)return this._frustumPlanes;var _this$projectionProps=this.projectionProps,near=_this$projectionProps.near,far=_this$projectionProps.far,fovyRadians=_this$projectionProps.fovyRadians,aspect=_this$projectionProps.aspect;return Object.assign(this._frustumPlanes,Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.c)({aspect:aspect,near:near,far:far,fovyRadians:fovyRadians,position:this.cameraPosition,direction:this.cameraDirection,up:this.cameraUp,right:this.cameraRight})),this._frustumPlanes}},{key:"getCameraPosition",value:function getCameraPosition(){return this.cameraPosition}},{key:"getCameraDirection",value:function getCameraDirection(){return this.cameraDirection}},{key:"getCameraUp",value:function getCameraUp(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function _createProjectionMatrix(_ref5){var orthographic=_ref5.orthographic,fovyRadians=_ref5.fovyRadians,aspect=_ref5.aspect,focalDistance=_ref5.focalDistance,near=_ref5.near,far=_ref5.far;return Object(_utils_assert__WEBPACK_IMPORTED_MODULE_10__.a)(Number.isFinite(fovyRadians)),orthographic?(new math_gl__WEBPACK_IMPORTED_MODULE_6__.a).orthographic({fovy:fovyRadians,aspect:aspect,focalDistance:focalDistance,near:near,far:far}):(new math_gl__WEBPACK_IMPORTED_MODULE_6__.a).perspective({fovy:fovyRadians,aspect:aspect,near:near,far:far})}},{key:"_initViewMatrix",value:function _initViewMatrix(opts){var _opts$viewMatrix=opts.viewMatrix,viewMatrix=void 0===_opts$viewMatrix?IDENTITY:_opts$viewMatrix,_opts$longitude=opts.longitude,longitude=void 0===_opts$longitude?null:_opts$longitude,_opts$latitude=opts.latitude,latitude=void 0===_opts$latitude?null:_opts$latitude,_opts$zoom=opts.zoom,zoom=void 0===_opts$zoom?null:_opts$zoom,_opts$position=opts.position,position=void 0===_opts$position?null:_opts$position,_opts$modelMatrix=opts.modelMatrix,modelMatrix=void 0===_opts$modelMatrix?null:_opts$modelMatrix,_opts$focalDistance=opts.focalDistance,focalDistance=void 0===_opts$focalDistance?1:_opts$focalDistance,_opts$distanceScales=opts.distanceScales,distanceScales=void 0===_opts$distanceScales?null:_opts$distanceScales;this.isGeospatial=Number.isFinite(latitude)&&Number.isFinite(longitude),this.zoom=zoom,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?Object(viewport_mercator_project__WEBPACK_IMPORTED_MODULE_9__.c)({latitude:latitude})+Math.log2(focalDistance):0);var scale=Math.pow(2,this.zoom);this.scale=scale,this.distanceScales=this.isGeospatial?Object(viewport_mercator_project__WEBPACK_IMPORTED_MODULE_9__.b)({latitude:latitude,longitude:longitude,scale:this.scale}):distanceScales||{pixelsPerMeter:[scale,scale,scale],metersPerPixel:[1/scale,1/scale,1/scale]},this.focalDistance=focalDistance,this.distanceScales.metersPerPixel=new math_gl__WEBPACK_IMPORTED_MODULE_7__.a(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new math_gl__WEBPACK_IMPORTED_MODULE_7__.a(this.distanceScales.pixelsPerMeter),this.position=ZERO_VECTOR,this.meterOffset=ZERO_VECTOR,position&&(this.position=position,this.modelMatrix=modelMatrix,this.meterOffset=modelMatrix?modelMatrix.transformVector(position):position),this.isGeospatial?(this.longitude=longitude,this.latitude=latitude,this.center=this._getCenterInWorld({longitude:longitude,latitude:latitude}),this.viewMatrixUncentered=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_8__.n([],viewMatrix,[1,-1,1])):(this.center=position?this.projectPosition(position):[0,0,0],this.viewMatrixUncentered=viewMatrix),this.viewMatrix=(new math_gl__WEBPACK_IMPORTED_MODULE_6__.a).multiplyRight(this.viewMatrixUncentered).translate(new math_gl__WEBPACK_IMPORTED_MODULE_7__.a(this.center||ZERO_VECTOR).negate())}},{key:"_getCenterInWorld",value:function _getCenterInWorld(_ref6){var longitude=_ref6.longitude,latitude=_ref6.latitude,meterOffset=this.meterOffset,scale=this.scale,distanceScales=this.distanceScales,center2d=this.projectFlat([longitude,latitude],scale),center=new math_gl__WEBPACK_IMPORTED_MODULE_7__.a(center2d[0],center2d[1],0);if(meterOffset){var pixelPosition=new math_gl__WEBPACK_IMPORTED_MODULE_7__.a(meterOffset).scale(distanceScales.pixelsPerMeter);center.add(pixelPosition)}return center}},{key:"_initProjectionMatrix",value:function _initProjectionMatrix(opts){var _opts$projectionMatri=opts.projectionMatrix,projectionMatrix=void 0===_opts$projectionMatri?null:_opts$projectionMatri,_opts$orthographic=opts.orthographic,orthographic=void 0!==_opts$orthographic&&_opts$orthographic,fovyRadians=opts.fovyRadians,fovyDegrees=opts.fovyDegrees,fovy=opts.fovy,_opts$near=opts.near,near=void 0===_opts$near?.1:_opts$near,_opts$far=opts.far,far=void 0===_opts$far?1e3:_opts$far,_opts$focalDistance2=opts.focalDistance,focalDistance=void 0===_opts$focalDistance2?1:_opts$focalDistance2,orthographicFocalDistance=opts.orthographicFocalDistance,radians=fovyRadians||(fovyDegrees||fovy||75)*DEGREES_TO_RADIANS;this.projectionProps={orthographic:orthographic,fovyRadians:radians,aspect:this.width/this.height,focalDistance:orthographicFocalDistance||focalDistance,near:near,far:far},this.projectionMatrix=projectionMatrix||this._createProjectionMatrix(this.projectionProps)}},{key:"_initPixelMatrices",value:function _initPixelMatrices(){var vpm=Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.a)();gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_8__.g(vpm,vpm,this.projectionMatrix),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_8__.g(vpm,vpm,this.viewMatrix),this.viewProjectionMatrix=vpm,this.viewMatrixInverse=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_8__.e([],this.viewMatrix)||this.viewMatrix;var _extractCameraVectors=Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.b)({viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse}),eye=_extractCameraVectors.eye,direction=_extractCameraVectors.direction,up=_extractCameraVectors.up,right=_extractCameraVectors.right;this.cameraPosition=eye,this.cameraDirection=direction,this.cameraUp=up,this.cameraRight=right;var viewportMatrix=Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.a)(),pixelProjectionMatrix=Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.a)();gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_8__.n(viewportMatrix,viewportMatrix,[this.width/2,-this.height/2,1]),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_8__.o(viewportMatrix,viewportMatrix,[1,-1,0]),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_8__.g(pixelProjectionMatrix,viewportMatrix,this.viewProjectionMatrix),this.pixelProjectionMatrix=pixelProjectionMatrix,this.viewportMatrix=viewportMatrix,this.pixelUnprojectionMatrix=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_8__.e(Object(_utils_math_utils__WEBPACK_IMPORTED_MODULE_4__.a)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||_utils_log__WEBPACK_IMPORTED_MODULE_3__.a.warn("Pixel project matrix not invertible")()}}]),Viewport}();Viewport.displayName="Viewport"},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"loader assertion failed.")}__webpack_require__.d(__webpack_exports__,"a",(function(){return assert}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isLoaderObject})),__webpack_require__.d(__webpack_exports__,"b",(function(){return normalizeLoader}));var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_utils_assert__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(81);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function isLoaderObject(loader){return!!loader&&(Array.isArray(loader)&&(loader=loader[0]),loader.parseTextSync||loader.parseSync||loader.parse||loader.loadAndParse||loader.parseStream||loader.parseInBatches||loader.worker)}function normalizeLoader(loader){var options;return Object(_utils_assert__WEBPACK_IMPORTED_MODULE_1__.a)(isLoaderObject(loader)),Array.isArray(loader)&&(options=loader[1],loader=_objectSpread({},loader=loader[0],{options:_objectSpread({},loader.options,{},options)})),loader.extension&&(loader.extensions=loader.extensions||loader.extension,delete loader.extension),Array.isArray(loader.extensions)||(loader.extensions=[loader.extensions]),Object(_utils_assert__WEBPACK_IMPORTED_MODULE_1__.a)(loader.extensions&&loader.extensions.length>0&&loader.extensions[0]),loader.parseTextSync&&(loader.text=!0),loader.text||(loader.binary=!0),loader}},function(module,__webpack_exports__,__webpack_require__){"use strict";function flatten(array){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$filter=_ref.filter,filter=void 0===_ref$filter?function(){return!0}:_ref$filter,_ref$map=_ref.map,map=void 0===_ref$map?function(x){return x}:_ref$map,_ref$result=_ref.result,result=void 0===_ref$result?[]:_ref$result;return Array.isArray(array)?function flattenArray(array,filter,map,result){var index=-1;for(;++index<array.length;){var value=array[index];Array.isArray(value)?flattenArray(value,filter,map,result):filter(value)&&result.push(map(value))}return result}(array,filter,map,result):filter(array)?[map(array)]:[]}function flattenVertices(nestedArray){for(var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$result=_ref2.result,result=void 0===_ref2$result?[]:_ref2$result,_ref2$dimensions=_ref2.dimensions,dimensions=void 0===_ref2$dimensions?3:_ref2$dimensions,index=-1,vertexLength=0;++index<nestedArray.length;){var value=nestedArray[index];Array.isArray(value)||ArrayBuffer.isView(value)?flattenVertices(value,{result:result,dimensions:dimensions}):vertexLength<dimensions&&(result.push(value),vertexLength++)}return vertexLength>0&&vertexLength<dimensions&&result.push(0),result}function fillArray(_ref3){for(var target=_ref3.target,source=_ref3.source,_ref3$start=_ref3.start,start=void 0===_ref3$start?0:_ref3$start,_ref3$count=_ref3.count,count=void 0===_ref3$count?1:_ref3$count,length=source.length,total=count*length,copied=0,i=start;copied<length;copied++)target[i++]=source[copied];for(;copied<total;)copied<total-copied?(target.copyWithin(start+copied,start,start+copied),copied*=2):(target.copyWithin(start+copied,start,start+total-copied),copied=total);return target}__webpack_require__.d(__webpack_exports__,"b",(function(){return flatten})),__webpack_require__.d(__webpack_exports__,"c",(function(){return flattenVertices})),__webpack_require__.d(__webpack_exports__,"a",(function(){return fillArray}))},function(module,exports,__webpack_require__){"use strict";(function(global){var origSymbol=global.Symbol,hasSymbolSham=__webpack_require__(480);module.exports=function hasNativeSymbols(){return"function"==typeof origSymbol&&("function"==typeof Symbol&&("symbol"==typeof origSymbol("foo")&&("symbol"==typeof Symbol("bar")&&hasSymbolSham())))}}).call(this,__webpack_require__(36))},function(module,exports){module.exports=function(it){if(null==it)throw TypeError("Can't call method on "+it);return it}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),global=__webpack_require__(29),IS_PURE=__webpack_require__(174),DESCRIPTORS=__webpack_require__(49),NATIVE_SYMBOL=__webpack_require__(353),fails=__webpack_require__(33),has=__webpack_require__(60),isArray=__webpack_require__(177),isObject=__webpack_require__(40),anObject=__webpack_require__(50),toObject=__webpack_require__(77),toIndexedObject=__webpack_require__(97),toPrimitive=__webpack_require__(172),createPropertyDescriptor=__webpack_require__(171),nativeObjectCreate=__webpack_require__(146),objectKeys=__webpack_require__(178),getOwnPropertyNamesModule=__webpack_require__(210),getOwnPropertyNamesExternal=__webpack_require__(553),getOwnPropertySymbolsModule=__webpack_require__(279),getOwnPropertyDescriptorModule=__webpack_require__(145),definePropertyModule=__webpack_require__(61),propertyIsEnumerableModule=__webpack_require__(206),createNonEnumerableProperty=__webpack_require__(74),redefine=__webpack_require__(75),shared=__webpack_require__(173),sharedKey=__webpack_require__(208),hiddenKeys=__webpack_require__(175),uid=__webpack_require__(209),wellKnownSymbol=__webpack_require__(37),wrappedWellKnownSymbolModule=__webpack_require__(357),defineWellKnownSymbol=__webpack_require__(45),setToStringTag=__webpack_require__(129),InternalStateModule=__webpack_require__(118),$forEach=__webpack_require__(130).forEach,HIDDEN=sharedKey("hidden"),TO_PRIMITIVE=wellKnownSymbol("toPrimitive"),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("Symbol"),ObjectPrototype=Object.prototype,$Symbol=global.Symbol,JSON=global.JSON,nativeJSONStringify=JSON&&JSON.stringify,nativeGetOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,nativeDefineProperty=definePropertyModule.f,nativeGetOwnPropertyNames=getOwnPropertyNamesExternal.f,nativePropertyIsEnumerable=propertyIsEnumerableModule.f,AllSymbols=shared("symbols"),ObjectPrototypeSymbols=shared("op-symbols"),StringToSymbolRegistry=shared("string-to-symbol-registry"),SymbolToStringRegistry=shared("symbol-to-string-registry"),WellKnownSymbolsStore=shared("wks"),QObject=global.QObject,USE_SETTER=!QObject||!QObject.prototype||!QObject.prototype.findChild,setSymbolDescriptor=DESCRIPTORS&&fails((function(){return 7!=nativeObjectCreate(nativeDefineProperty({},"a",{get:function(){return nativeDefineProperty(this,"a",{value:7}).a}})).a}))?function(O,P,Attributes){var ObjectPrototypeDescriptor=nativeGetOwnPropertyDescriptor(ObjectPrototype,P);ObjectPrototypeDescriptor&&delete ObjectPrototype[P],nativeDefineProperty(O,P,Attributes),ObjectPrototypeDescriptor&&O!==ObjectPrototype&&nativeDefineProperty(ObjectPrototype,P,ObjectPrototypeDescriptor)}:nativeDefineProperty,wrap=function(tag,description){var symbol=AllSymbols[tag]=nativeObjectCreate($Symbol.prototype);return setInternalState(symbol,{type:"Symbol",tag:tag,description:description}),DESCRIPTORS||(symbol.description=description),symbol},isSymbol=NATIVE_SYMBOL&&"symbol"==typeof $Symbol.iterator?function(it){return"symbol"==typeof it}:function(it){return Object(it)instanceof $Symbol},$defineProperty=function defineProperty(O,P,Attributes){O===ObjectPrototype&&$defineProperty(ObjectPrototypeSymbols,P,Attributes),anObject(O);var key=toPrimitive(P,!0);return anObject(Attributes),has(AllSymbols,key)?(Attributes.enumerable?(has(O,HIDDEN)&&O[HIDDEN][key]&&(O[HIDDEN][key]=!1),Attributes=nativeObjectCreate(Attributes,{enumerable:createPropertyDescriptor(0,!1)})):(has(O,HIDDEN)||nativeDefineProperty(O,HIDDEN,createPropertyDescriptor(1,{})),O[HIDDEN][key]=!0),setSymbolDescriptor(O,key,Attributes)):nativeDefineProperty(O,key,Attributes)},$defineProperties=function defineProperties(O,Properties){anObject(O);var properties=toIndexedObject(Properties),keys=objectKeys(properties).concat($getOwnPropertySymbols(properties));return $forEach(keys,(function(key){DESCRIPTORS&&!$propertyIsEnumerable.call(properties,key)||$defineProperty(O,key,properties[key])})),O},$propertyIsEnumerable=function propertyIsEnumerable(V){var P=toPrimitive(V,!0),enumerable=nativePropertyIsEnumerable.call(this,P);return!(this===ObjectPrototype&&has(AllSymbols,P)&&!has(ObjectPrototypeSymbols,P))&&(!(enumerable||!has(this,P)||!has(AllSymbols,P)||has(this,HIDDEN)&&this[HIDDEN][P])||enumerable)},$getOwnPropertyDescriptor=function getOwnPropertyDescriptor(O,P){var it=toIndexedObject(O),key=toPrimitive(P,!0);if(it!==ObjectPrototype||!has(AllSymbols,key)||has(ObjectPrototypeSymbols,key)){var descriptor=nativeGetOwnPropertyDescriptor(it,key);return!descriptor||!has(AllSymbols,key)||has(it,HIDDEN)&&it[HIDDEN][key]||(descriptor.enumerable=!0),descriptor}},$getOwnPropertyNames=function getOwnPropertyNames(O){var names=nativeGetOwnPropertyNames(toIndexedObject(O)),result=[];return $forEach(names,(function(key){has(AllSymbols,key)||has(hiddenKeys,key)||result.push(key)})),result},$getOwnPropertySymbols=function getOwnPropertySymbols(O){var IS_OBJECT_PROTOTYPE=O===ObjectPrototype,names=nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE?ObjectPrototypeSymbols:toIndexedObject(O)),result=[];return $forEach(names,(function(key){!has(AllSymbols,key)||IS_OBJECT_PROTOTYPE&&!has(ObjectPrototype,key)||result.push(AllSymbols[key])})),result};NATIVE_SYMBOL||(redefine(($Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor");var description=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,tag=uid(description),setter=function(value){this===ObjectPrototype&&setter.call(ObjectPrototypeSymbols,value),has(this,HIDDEN)&&has(this[HIDDEN],tag)&&(this[HIDDEN][tag]=!1),setSymbolDescriptor(this,tag,createPropertyDescriptor(1,value))};return DESCRIPTORS&&USE_SETTER&&setSymbolDescriptor(ObjectPrototype,tag,{configurable:!0,set:setter}),wrap(tag,description)}).prototype,"toString",(function toString(){return getInternalState(this).tag})),propertyIsEnumerableModule.f=$propertyIsEnumerable,definePropertyModule.f=$defineProperty,getOwnPropertyDescriptorModule.f=$getOwnPropertyDescriptor,getOwnPropertyNamesModule.f=getOwnPropertyNamesExternal.f=$getOwnPropertyNames,getOwnPropertySymbolsModule.f=$getOwnPropertySymbols,DESCRIPTORS&&(nativeDefineProperty($Symbol.prototype,"description",{configurable:!0,get:function description(){return getInternalState(this).description}}),IS_PURE||redefine(ObjectPrototype,"propertyIsEnumerable",$propertyIsEnumerable,{unsafe:!0})),wrappedWellKnownSymbolModule.f=function(name){return wrap(wellKnownSymbol(name),name)}),$({global:!0,wrap:!0,forced:!NATIVE_SYMBOL,sham:!NATIVE_SYMBOL},{Symbol:$Symbol}),$forEach(objectKeys(WellKnownSymbolsStore),(function(name){defineWellKnownSymbol(name)})),$({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL},{for:function(key){var string=String(key);if(has(StringToSymbolRegistry,string))return StringToSymbolRegistry[string];var symbol=$Symbol(string);return StringToSymbolRegistry[string]=symbol,SymbolToStringRegistry[symbol]=string,symbol},keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(sym+" is not a symbol");if(has(SymbolToStringRegistry,sym))return SymbolToStringRegistry[sym]},useSetter:function(){USE_SETTER=!0},useSimple:function(){USE_SETTER=!1}}),$({target:"Object",stat:!0,forced:!NATIVE_SYMBOL,sham:!DESCRIPTORS},{create:function create(O,Properties){return void 0===Properties?nativeObjectCreate(O):$defineProperties(nativeObjectCreate(O),Properties)},defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor}),$({target:"Object",stat:!0,forced:!NATIVE_SYMBOL},{getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$({target:"Object",stat:!0,forced:fails((function(){getOwnPropertySymbolsModule.f(1)}))},{getOwnPropertySymbols:function getOwnPropertySymbols(it){return getOwnPropertySymbolsModule.f(toObject(it))}}),JSON&&$({target:"JSON",stat:!0,forced:!NATIVE_SYMBOL||fails((function(){var symbol=$Symbol();return"[null]"!=nativeJSONStringify([symbol])||"{}"!=nativeJSONStringify({a:symbol})||"{}"!=nativeJSONStringify(Object(symbol))}))},{stringify:function stringify(it){for(var replacer,$replacer,args=[it],index=1;arguments.length>index;)args.push(arguments[index++]);if($replacer=replacer=args[1],(isObject(replacer)||void 0!==it)&&!isSymbol(it))return isArray(replacer)||(replacer=function(key,value){if("function"==typeof $replacer&&(value=$replacer.call(this,key,value)),!isSymbol(value))return value}),args[1]=replacer,nativeJSONStringify.apply(JSON,args)}}),$Symbol.prototype[TO_PRIMITIVE]||createNonEnumerableProperty($Symbol.prototype,TO_PRIMITIVE,$Symbol.prototype.valueOf),setToStringTag($Symbol,"Symbol"),hiddenKeys[HIDDEN]=!0},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),forEach=__webpack_require__(360);$({target:"Array",proto:!0,forced:[].forEach!=forEach},{forEach:forEach})},function(module,exports,__webpack_require__){var global=__webpack_require__(29),DOMIterables=__webpack_require__(361),forEach=__webpack_require__(360),createNonEnumerableProperty=__webpack_require__(74);for(var COLLECTION_NAME in DOMIterables){var Collection=global[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype&&CollectionPrototype.forEach!==forEach)try{createNonEnumerableProperty(CollectionPrototype,"forEach",forEach)}catch(error){CollectionPrototype.forEach=forEach}}},function(module,exports,__webpack_require__){"use strict";var toIndexedObject=__webpack_require__(97),addToUnscopables=__webpack_require__(282),Iterators=__webpack_require__(182),InternalStateModule=__webpack_require__(118),defineIterator=__webpack_require__(284),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("Array Iterator");module.exports=defineIterator(Array,"Array",(function(iterated,kind){setInternalState(this,{type:"Array Iterator",target:toIndexedObject(iterated),index:0,kind:kind})}),(function(){var state=getInternalState(this),target=state.target,kind=state.kind,index=state.index++;return!target||index>=target.length?(state.target=void 0,{value:void 0,done:!0}):"keys"==kind?{value:index,done:!1}:"values"==kind?{value:target[index],done:!1}:{value:[index,target[index]],done:!1}}),"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createIterable})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isAsyncIterable}));var EMPTY_ARRAY=[],placeholderArray=[];function createIterable(data){var startRow=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,endRow=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,iterable=EMPTY_ARRAY,objectInfo={index:-1,data:data,target:[]};return data?"function"==typeof data[Symbol.iterator]?iterable=data:data.length>0&&(placeholderArray.length=data.length,iterable=placeholderArray):iterable=EMPTY_ARRAY,(startRow>0||Number.isFinite(endRow))&&(iterable=(Array.isArray(iterable)?iterable:Array.from(iterable)).slice(startRow,endRow),objectInfo.index=startRow-1),{iterable:iterable,objectInfo:objectInfo}}function isAsyncIterable(data){return data&&data[Symbol.asyncIterator]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Transition}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);function noop(){}var DEFAULT_SETTINGS={onStart:noop,onUpdate:noop,onInterrupt:noop,onEnd:noop},Transition=function(){function Transition(timeline){Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Transition),this._inProgress=!1,this._handle=null,this.timeline=timeline,this.settings={}}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Transition,[{key:"start",value:function start(props){this.cancel(),this.settings=Object.assign({},DEFAULT_SETTINGS,props),this._inProgress=!0;var timeline=this.timeline,settings=this.settings;this._handle=timeline.addChannel({delay:timeline.getTime(),duration:settings.duration}),settings.onStart(this)}},{key:"end",value:function end(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function cancel(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function update(){return!!this._inProgress&&(this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0)}},{key:"_onUpdate",value:function _onUpdate(){}},{key:"inProgress",get:function get(){return this._inProgress}}]),Transition}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getHiResTimestamp}));var _globals__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(108),_globals__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(53);function getHiResTimestamp(){var timestamp;if(_globals__WEBPACK_IMPORTED_MODULE_0__.b&&_globals__WEBPACK_IMPORTED_MODULE_1__.b.performance)timestamp=_globals__WEBPACK_IMPORTED_MODULE_1__.b.performance.now();else if(_globals__WEBPACK_IMPORTED_MODULE_1__.a.hrtime){var timeParts=_globals__WEBPACK_IMPORTED_MODULE_1__.a.hrtime();timestamp=1e3*timeParts[0]+timeParts[1]/1e6}else timestamp=Date.now();return timestamp}},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"viewport-mercator-project: assertion failed.")}__webpack_require__.d(__webpack_exports__,"a",(function(){return assert}))},,,,function(module,exports,__webpack_require__){var IndexedObject=__webpack_require__(207),requireObjectCoercible=__webpack_require__(85);module.exports=function(it){return IndexedObject(requireObjectCoercible(it))}},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),DESCRIPTORS=__webpack_require__(49),global=__webpack_require__(29),has=__webpack_require__(60),isObject=__webpack_require__(40),defineProperty=__webpack_require__(61).f,copyConstructorProperties=__webpack_require__(349),NativeSymbol=global.Symbol;if(DESCRIPTORS&&"function"==typeof NativeSymbol&&(!("description"in NativeSymbol.prototype)||void 0!==NativeSymbol().description)){var EmptyStringDescriptionStore={},SymbolWrapper=function Symbol(){var description=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),result=this instanceof SymbolWrapper?new NativeSymbol(description):void 0===description?NativeSymbol():NativeSymbol(description);return""===description&&(EmptyStringDescriptionStore[result]=!0),result};copyConstructorProperties(SymbolWrapper,NativeSymbol);var symbolPrototype=SymbolWrapper.prototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString,native="Symbol(test)"==String(NativeSymbol("test")),regexp=/^Symbol\((.*)\)[^)]+$/;defineProperty(symbolPrototype,"description",{configurable:!0,get:function description(){var symbol=isObject(this)?this.valueOf():this,string=symbolToString.call(symbol);if(has(EmptyStringDescriptionStore,symbol))return"";var desc=native?string.slice(7,-1):string.replace(regexp,"$1");return""===desc?void 0:desc}}),$({global:!0,forced:!0},{Symbol:SymbolWrapper})}},function(module,exports,__webpack_require__){__webpack_require__(45)("iterator")},function(module,exports,__webpack_require__){(function(global){var win;win="undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{},module.exports=win}).call(this,__webpack_require__(36))},function(module,exports,__webpack_require__){"use strict";var charAt=__webpack_require__(370).charAt,InternalStateModule=__webpack_require__(118),defineIterator=__webpack_require__(284),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("String Iterator");defineIterator(String,"String",(function(iterated){setInternalState(this,{type:"String Iterator",string:String(iterated),index:0})}),(function next(){var point,state=getInternalState(this),string=state.string,index=state.index;return index>=string.length?{value:void 0,done:!0}:(point=charAt(string,index),state.index+=point.length,{value:point,done:!1})}))},function(module,exports,__webpack_require__){var global=__webpack_require__(29),DOMIterables=__webpack_require__(361),ArrayIteratorMethods=__webpack_require__(89),createNonEnumerableProperty=__webpack_require__(74),wellKnownSymbol=__webpack_require__(37),ITERATOR=wellKnownSymbol("iterator"),TO_STRING_TAG=wellKnownSymbol("toStringTag"),ArrayValues=ArrayIteratorMethods.values;for(var COLLECTION_NAME in DOMIterables){var Collection=global[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype){if(CollectionPrototype[ITERATOR]!==ArrayValues)try{createNonEnumerableProperty(CollectionPrototype,ITERATOR,ArrayValues)}catch(error){CollectionPrototype[ITERATOR]=ArrayValues}if(CollectionPrototype[TO_STRING_TAG]||createNonEnumerableProperty(CollectionPrototype,TO_STRING_TAG,COLLECTION_NAME),DOMIterables[COLLECTION_NAME])for(var METHOD_NAME in ArrayIteratorMethods)if(CollectionPrototype[METHOD_NAME]!==ArrayIteratorMethods[METHOD_NAME])try{createNonEnumerableProperty(CollectionPrototype,METHOD_NAME,ArrayIteratorMethods[METHOD_NAME])}catch(error){CollectionPrototype[METHOD_NAME]=ArrayIteratorMethods[METHOD_NAME]}}}},function(module,exports){module.exports=function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return getPrimitiveDrawMode})),__webpack_require__.d(__webpack_exports__,"a",(function(){return decomposeCompositeGLType})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getCompositeGLType}));var _COMPOSITE_GL_TYPES,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(17),GL_BYTE=5120,GL_UNSIGNED_BYTE=5121,GL_SHORT=5122,GL_UNSIGNED_SHORT=5123,GL_POINTS=0,GL_LINES=1,GL_LINE_LOOP=2,GL_LINE_STRIP=3,GL_TRIANGLES=4,GL_TRIANGLE_STRIP=5,GL_TRIANGLE_FAN=6,GL_FLOAT=5126,COMPOSITE_GL_TYPES=(_COMPOSITE_GL_TYPES={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,GL_FLOAT,[GL_FLOAT,1,"float"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35664,[GL_FLOAT,2,"vec2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35665,[GL_FLOAT,3,"vec3"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35666,[GL_FLOAT,4,"vec4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,5124,[5124,1,"int"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35667,[5124,2,"ivec2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35668,[5124,3,"ivec3"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35669,[5124,4,"ivec4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,5125,[5125,1,"uint"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,36294,[5125,2,"uvec2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,36295,[5125,3,"uvec3"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,36296,[5125,4,"uvec4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35670,[GL_FLOAT,1,"bool"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35671,[GL_FLOAT,2,"bvec2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35672,[GL_FLOAT,3,"bvec3"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35673,[GL_FLOAT,4,"bvec4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35674,[GL_FLOAT,8,"mat2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35685,[GL_FLOAT,8,"mat2x3"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35686,[GL_FLOAT,8,"mat2x4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35675,[GL_FLOAT,12,"mat3"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35687,[GL_FLOAT,12,"mat3x2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35688,[GL_FLOAT,12,"mat3x4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35676,[GL_FLOAT,16,"mat4"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35689,[GL_FLOAT,16,"mat4x2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_COMPOSITE_GL_TYPES,35690,[GL_FLOAT,16,"mat4x3"]),_COMPOSITE_GL_TYPES);function getPrimitiveDrawMode(drawMode){switch(drawMode){case GL_POINTS:return GL_POINTS;case GL_LINES:case GL_LINE_STRIP:case GL_LINE_LOOP:return GL_LINES;case GL_TRIANGLES:case GL_TRIANGLE_STRIP:case GL_TRIANGLE_FAN:return GL_TRIANGLES;default:return Object(_utils__WEBPACK_IMPORTED_MODULE_2__.a)(!1),0}}function decomposeCompositeGLType(compositeGLType){var typeAndSize=COMPOSITE_GL_TYPES[compositeGLType];if(!typeAndSize)return null;var _typeAndSize=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(typeAndSize,2);return{type:_typeAndSize[0],components:_typeAndSize[1]}}function getCompositeGLType(type,components){switch(type){case GL_BYTE:case GL_UNSIGNED_BYTE:case GL_SHORT:case GL_UNSIGNED_SHORT:type=GL_FLOAT}for(var glType in COMPOSITE_GL_TYPES){var _COMPOSITE_GL_TYPES$g=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(COMPOSITE_GL_TYPES[glType],3),compType=_COMPOSITE_GL_TYPES$g[0],compComponents=_COMPOSITE_GL_TYPES$g[1],name=_COMPOSITE_GL_TYPES$g[2];if(compType===type&&compComponents===components)return{glType:glType,name:name}}return null}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return scale})),__webpack_require__.d(__webpack_exports__,"b",(function(){return transformMat4}));var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13);function scale(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out}function transformMat4(out,a,m){var x=a[0],y=a[1],z=a[2],w=a[3];return out[0]=m[0]*x+m[4]*y+m[8]*z+m[12]*w,out[1]=m[1]*x+m[5]*y+m[9]*z+m[13]*w,out[2]=m[2]*x+m[6]*y+m[10]*z+m[14]*w,out[3]=m[3]*x+m[7]*y+m[11]*z+m[15]*w,out}var vec;vec=function create(){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.a(4);return _common_js__WEBPACK_IMPORTED_MODULE_0__.a!=Float32Array&&(out[0]=0,out[1]=0,out[2]=0,out[3]=0),out}()},function(module,exports){module.exports={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return VERSION})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isBrowser}));var _env_is_browser__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(247),VERSION="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",isBrowser=Object(_env_is_browser__WEBPACK_IMPORTED_MODULE_0__.a)()},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"webgl2-polyfill: assertion failed.")}__webpack_require__.d(__webpack_exports__,"a",(function(){return assert}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return TEXTURE_FORMATS})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DATA_FORMAT_CHANNELS})),__webpack_require__.d(__webpack_exports__,"c",(function(){return TYPE_SIZES})),__webpack_require__.d(__webpack_exports__,"d",(function(){return isFormatSupported})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isLinearFilteringSupported}));var _TEXTURE_FORMATS,_DATA_FORMAT_CHANNELS,_TYPE_SIZES,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_webgl_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39),TEXTURE_FORMATS=(_TEXTURE_FORMATS={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,6407,{dataFormat:6407,types:[5121,33635]}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,6406,{dataFormat:6406,types:[5121]}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,6409,{dataFormat:6409,types:[5121]}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,6410,{dataFormat:6410,types:[5121]}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TEXTURE_FORMATS,34836,{dataFormat:6408,types:[5126],gl2:!0}),_TEXTURE_FORMATS),DATA_FORMAT_CHANNELS=(_DATA_FORMAT_CHANNELS={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6403,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,36244,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,33319,2),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,33320,2),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6407,3),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,36248,3),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6408,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,36249,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6402,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,34041,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6406,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6409,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_DATA_FORMAT_CHANNELS,6410,2),_DATA_FORMAT_CHANNELS),TYPE_SIZES=(_TYPE_SIZES={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5126,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5125,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5124,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5123,2),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5122,2),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5131,2),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5120,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_TYPE_SIZES,5121,1),_TYPE_SIZES);function isFormatSupported(gl,format){var info=TEXTURE_FORMATS[format];if(!info)return!1;if(void 0===info.gl1&&void 0===info.gl2)return!0;var value=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_1__.d)(gl)&&info.gl2||info.gl1;return"string"==typeof value?gl.getExtension(value):value}function isLinearFilteringSupported(gl,format){var info=TEXTURE_FORMATS[format];switch(info&&info.types[0]){case 5126:return gl.getExtension("OES_texture_float_linear");case 5131:return gl.getExtension("OES_texture_half_float_linear");default:return!0}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return LIFECYCLE}));var LIFECYCLE={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"}},function(module,__webpack_exports__,__webpack_require__){"use strict";var formatDecimal=function(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]},src_exponent=function(x){return(x=formatDecimal(Math.abs(x)))?x[1]:NaN},re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier(specifier){this.fill=void 0===specifier.fill?" ":specifier.fill+"",this.align=void 0===specifier.align?">":specifier.align+"",this.sign=void 0===specifier.sign?"-":specifier.sign+"",this.symbol=void 0===specifier.symbol?"":specifier.symbol+"",this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":specifier.type+""}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var prefixExponent,defaultLocale_locale,defaultLocale_format,defaultLocale_formatPrefix,formatTrim=function(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(i0>0){if(!+s[i])break out;i0=0}}return i0>0?s.slice(0,i0)+s.slice(i1+1):s},formatRounded=function(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")},formatTypes={"%":function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function(x){return Math.round(x).toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(100*x,p)},r:formatRounded,s:function(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimal(x,Math.max(0,p+i-1))[0]},X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}},identity=function(x){return x},map=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],src_locale=function(locale){var grouping,thousands,group=void 0===locale.grouping||void 0===locale.thousands?identity:(grouping=map.call(locale.grouping,Number),thousands=locale.thousands+"",function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}),currencyPrefix=void 0===locale.currency?"":locale.currency[0]+"",currencySuffix=void 0===locale.currency?"":locale.currency[1]+"",decimal=void 0===locale.decimal?".":locale.decimal+"",numerals=void 0===locale.numerals?identity:function(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(map.call(locale.numerals,String)),percent=void 0===locale.percent?"%":locale.percent+"",minus=void 0===locale.minus?"-":locale.minus+"",nan=void 0===locale.nan?"NaN":locale.nan+"";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0;if(value=isNaN(value)?nan:formatType(Math.abs(value),precision),trim&&(value=formatTrim(value)),valueNegative&&0==+value&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function formatPrefix(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(src_exponent(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}};!function defaultLocale(definition){return defaultLocale_locale=src_locale(definition),defaultLocale_format=defaultLocale_locale.format,defaultLocale_formatPrefix=defaultLocale_locale.formatPrefix,defaultLocale_locale}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var precisionFixed=function(step){return Math.max(0,-src_exponent(Math.abs(step)))},precisionPrefix=function(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(src_exponent(value)/3)))-src_exponent(Math.abs(step)))},precisionRound=function(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,src_exponent(max)-src_exponent(step))+1};__webpack_require__.d(__webpack_exports__,"a",(function(){return defaultLocale_format})),__webpack_require__.d(__webpack_exports__,"b",(function(){return defaultLocale_formatPrefix})),__webpack_require__.d(__webpack_exports__,"c",(function(){return formatSpecifier})),__webpack_require__.d(__webpack_exports__,"d",(function(){return precisionFixed})),__webpack_require__.d(__webpack_exports__,"e",(function(){return precisionPrefix})),__webpack_require__.d(__webpack_exports__,"f",(function(){return precisionRound}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getGLTypeFromTypedArray})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getTypedArrayFromGLType})),__webpack_require__.d(__webpack_exports__,"a",(function(){return flipRows})),__webpack_require__.d(__webpack_exports__,"d",(function(){return scalePixels}));var ERR_TYPE_DEDUCTION="Failed to deduce GL constant from typed array";function getGLTypeFromTypedArray(arrayOrType){switch(ArrayBuffer.isView(arrayOrType)?arrayOrType.constructor:arrayOrType){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(ERR_TYPE_DEDUCTION)}}function getTypedArrayFromGLType(glType){var _ref$clamped=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,clamped=void 0===_ref$clamped||_ref$clamped;switch(glType){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return clamped?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function flipRows(_ref2){var data=_ref2.data,width=_ref2.width,height=_ref2.height,_ref2$bytesPerPixel=_ref2.bytesPerPixel,bytesPerPixel=void 0===_ref2$bytesPerPixel?4:_ref2$bytesPerPixel,temp=_ref2.temp,bytesPerRow=width*bytesPerPixel;temp=temp||new Uint8Array(bytesPerRow);for(var y=0;y<height/2;++y){var topOffset=y*bytesPerRow,bottomOffset=(height-y-1)*bytesPerRow;temp.set(data.subarray(topOffset,topOffset+bytesPerRow)),data.copyWithin(topOffset,bottomOffset,bottomOffset+bytesPerRow),data.set(temp,bottomOffset)}}function scalePixels(_ref3){for(var data=_ref3.data,width=_ref3.width,height=_ref3.height,newWidth=Math.round(width/2),newHeight=Math.round(height/2),newData=new Uint8Array(newWidth*newHeight*4),y=0;y<newHeight;y++)for(var x=0;x<newWidth;x++)for(var c=0;c<4;c++)newData[4*(y*newWidth+x)+c]=data[4*(2*y*width+2*x)+c];return{data:newData,width:newWidth,height:newHeight}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return withParameters}));var _track_context_state__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(258),_unified_parameter_api_set_parameters__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(315),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(439),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(167);function withParameters(gl,parameters,func){if(Object(_utils__WEBPACK_IMPORTED_MODULE_2__.a)(parameters))return func(gl);var value,_parameters$nocatch=parameters.nocatch,nocatch=void 0===_parameters$nocatch||_parameters$nocatch;if(Object(_utils__WEBPACK_IMPORTED_MODULE_3__.a)(!parameters.frameBuffer),Object(_track_context_state__WEBPACK_IMPORTED_MODULE_0__.c)(gl),Object(_unified_parameter_api_set_parameters__WEBPACK_IMPORTED_MODULE_1__.a)(gl,parameters),nocatch)value=func(gl),Object(_track_context_state__WEBPACK_IMPORTED_MODULE_0__.b)(gl);else try{value=func(gl)}finally{Object(_track_context_state__WEBPACK_IMPORTED_MODULE_0__.b)(gl)}return value}},,function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(64);module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(44),callBind=__webpack_require__(205),$indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function callBoundIntrinsic(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);return"function"==typeof intrinsic&&$indexOf(name,".prototype.")?callBind(intrinsic):intrinsic}},function(module,exports,__webpack_require__){var set,get,has,NATIVE_WEAK_MAP=__webpack_require__(348),global=__webpack_require__(29),isObject=__webpack_require__(40),createNonEnumerableProperty=__webpack_require__(74),objectHas=__webpack_require__(60),sharedKey=__webpack_require__(208),hiddenKeys=__webpack_require__(175),WeakMap=global.WeakMap;if(NATIVE_WEAK_MAP){var store=new WeakMap,wmget=store.get,wmhas=store.has,wmset=store.set;set=function(it,metadata){return wmset.call(store,it,metadata),metadata},get=function(it){return wmget.call(store,it)||{}},has=function(it){return wmhas.call(store,it)}}else{var STATE=sharedKey("state");hiddenKeys[STATE]=!0,set=function(it,metadata){return createNonEnumerableProperty(it,STATE,metadata),metadata},get=function(it){return objectHas(it,STATE)?it[STATE]:{}},has=function(it){return objectHas(it,STATE)}}module.exports={set:set,get:get,has:has,enforce:function(it){return has(it)?get(it):set(it,{})},getterFor:function(TYPE){return function(it){var state;if(!isObject(it)||(state=get(it)).type!==TYPE)throw TypeError("Incompatible receiver, "+TYPE+" required");return state}}}},function(module,exports,__webpack_require__){var $=__webpack_require__(19),toObject=__webpack_require__(77),nativeKeys=__webpack_require__(178);$({target:"Object",stat:!0,forced:__webpack_require__(33)((function(){nativeKeys(1)}))},{keys:function keys(it){return nativeKeys(toObject(it))}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MODULAR_SHADERS}));var MODULAR_SHADERS={vs:"#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n",fs:"#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n",uniforms:{}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Effect}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),Effect=function(){function Effect(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Effect);var _props$id=props.id,id=void 0===_props$id?"effect":_props$id;this.id=id,this.props={},Object.assign(this.props,props)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Effect,[{key:"prepare",value:function prepare(){}},{key:"getParameters",value:function getParameters(){}},{key:"cleanup",value:function cleanup(){}}]),Effect}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return LayersPass}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),_pass__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(253),_luma_gl_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(114),_luma_gl_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(259),_luma_gl_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(315),_luma_gl_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(319),LayersPass=function(_Pass){function LayersPass(){return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,LayersPass),Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(LayersPass).apply(this,arguments))}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(LayersPass,_Pass),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(LayersPass,[{key:"render",value:function render(params){var _this=this,gl=this.gl;return Object(_luma_gl_core__WEBPACK_IMPORTED_MODULE_6__.a)(gl,{framebuffer:params.outputBuffer},(function(){return _this.drawLayers(params)}))}},{key:"drawLayers",value:function drawLayers(_ref){var _this2=this,layers=_ref.layers,viewports=_ref.viewports,views=_ref.views,onViewportActive=_ref.onViewportActive,_ref$deviceRect=_ref.deviceRect,deviceRect=void 0===_ref$deviceRect?null:_ref$deviceRect,_ref$parameters=_ref.parameters,parameters=void 0===_ref$parameters?{}:_ref$parameters,_ref$pass=_ref.pass,pass=void 0===_ref$pass?"draw":_ref$pass,_ref$redrawReason=_ref.redrawReason,redrawReason=void 0===_ref$redrawReason?"":_ref$redrawReason,_ref$clearCanvas=_ref.clearCanvas,clearCanvas=void 0===_ref$clearCanvas||_ref$clearCanvas,effects=_ref.effects,effectProps=_ref.effectProps,gl=this.gl;clearCanvas&&this.clearCanvas(gl);var renderStats=[];return viewports.forEach((function(viewportOrDescriptor,i){var viewport=_this2.getViewportFromDescriptor(viewportOrDescriptor),view=views&&views[viewport.id];onViewportActive(viewport);var stats=_this2.drawLayersInViewport(gl,{layers:layers,viewport:viewport,view:view,deviceRect:deviceRect,parameters:parameters,pass:pass,redrawReason:redrawReason,effects:effects,effectProps:effectProps});renderStats.push(stats)})),renderStats}},{key:"drawLayersInViewport",value:function drawLayersInViewport(gl,_ref2){var _this3=this,layers=_ref2.layers,viewport=_ref2.viewport,view=_ref2.view,_ref2$parameters=(_ref2.deviceRect,_ref2.parameters),parameters=void 0===_ref2$parameters?{}:_ref2$parameters,effects=(_ref2.pass,_ref2.redrawReason,_ref2.effects),effectProps=_ref2.effectProps,glViewport=this.getGLViewport(gl,{viewport:viewport});if(view&&view.props.clear){var clearOpts=!0===view.props.clear?{color:!0,depth:!0}:view.props.clear;Object(_luma_gl_core__WEBPACK_IMPORTED_MODULE_6__.a)(gl,{scissorTest:!0,scissor:glViewport},(function(){return Object(_luma_gl_core__WEBPACK_IMPORTED_MODULE_7__.a)(gl,clearOpts)}))}var renderStatus={totalCount:layers.length,visibleCount:0,compositeCount:0,pickableCount:0};return Object(_luma_gl_core__WEBPACK_IMPORTED_MODULE_8__.a)(gl,parameters||{}),layers.forEach((function(layer,layerIndex){var shouldDrawLayer=_this3.shouldDrawLayer(layer,viewport);shouldDrawLayer&&layer.props.pickable&&renderStatus.pickableCount++,layer.isComposite&&renderStatus.compositeCount++,shouldDrawLayer&&(renderStatus.visibleCount++,_this3.drawLayerInViewport({gl:gl,layer:layer,layerIndex:layerIndex,glViewport:glViewport,parameters:parameters,effects:effects,effectProps:effectProps}))})),renderStatus}},{key:"drawLayerInViewport",value:function drawLayerInViewport(_ref3){_ref3.gl;var layer=_ref3.layer,layerIndex=_ref3.layerIndex,glViewport=_ref3.glViewport,parameters=_ref3.parameters,effects=_ref3.effects,effectProps=_ref3.effectProps,moduleParameters=this.getModuleParameters(layer,effects,effectProps),uniforms=Object.assign({},layer.context.uniforms,{layerIndex:layerIndex}),layerParameters=this.getLayerParameters(layer,layerIndex,glViewport,parameters);layer.drawLayer({moduleParameters:moduleParameters,uniforms:uniforms,parameters:layerParameters})}},{key:"getViewportFromDescriptor",value:function getViewportFromDescriptor(viewportOrDescriptor){return viewportOrDescriptor.viewport?viewportOrDescriptor.viewport:viewportOrDescriptor}},{key:"shouldDrawLayer",value:function shouldDrawLayer(layer,viewport){var layerFilter=this.props.layerFilter,shouldDrawLayer=!layer.isComposite&&layer.props.visible;return shouldDrawLayer&&layerFilter&&(shouldDrawLayer=layerFilter({layer:layer,viewport:viewport,isPicking:!1})),shouldDrawLayer}},{key:"getModuleParameters",value:function getModuleParameters(layer){return Object.assign(Object.create(layer.props),{viewport:layer.context.viewport,mousePosition:layer.context.mousePosition,pickingActive:0,devicePixelRatio:Object(_luma_gl_core__WEBPACK_IMPORTED_MODULE_9__.b)(this.gl)})}},{key:"getLayerParameters",value:function getLayerParameters(layer,layerIndex,glViewport,parameters){var layerParameters=Object.assign({},layer.props.parameters||{},parameters);return Object.assign(layerParameters,{viewport:glViewport}),layerParameters}},{key:"getGLViewport",value:function getGLViewport(gl,_ref4){var viewport=_ref4.viewport,height=gl.canvas?gl.canvas.clientHeight||gl.canvas.height:100,dimensions=viewport,pixelRatio=Object(_luma_gl_core__WEBPACK_IMPORTED_MODULE_9__.b)(this.gl);return[dimensions.x*pixelRatio,(height-dimensions.y-dimensions.height)*pixelRatio,dimensions.width*pixelRatio,dimensions.height*pixelRatio]}},{key:"clearCanvas",value:function clearCanvas(gl){var width=gl.drawingBufferWidth,height=gl.drawingBufferHeight;Object(_luma_gl_core__WEBPACK_IMPORTED_MODULE_6__.a)(gl,{viewport:[0,0,width,height]},(function(){gl.clear(16640)}))}}]),LayersPass}(_pass__WEBPACK_IMPORTED_MODULE_5__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(9);var defineProperty=__webpack_require__(0),constants=__webpack_require__(24),resolve_modules=__webpack_require__(137);var assert=__webpack_require__(141),GL_VENDOR=7936,GL_RENDERER=7937,GL_VERSION=7938,GL_SHADING_LANGUAGE_VERSION=35724,WEBGL_FEATURES={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},FEATURES={};Object.keys(WEBGL_FEATURES).forEach((function(key){FEATURES[key]=key}));var compiledGlslExtensions={};function canCompileGLGSExtension(gl,cap){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},feature=WEBGL_FEATURES[cap];if(Object(assert.a)(feature,cap),!function isOldIE(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},navigator="undefined"!=typeof window&&window.navigator||{},userAgent=opts.userAgent||navigator.userAgent||"",isMSIE=-1!==userAgent.indexOf("MSIE "),isTrident=-1!==userAgent.indexOf("Trident/");return isMSIE||isTrident}(opts))return!0;if(cap in compiledGlslExtensions)return compiledGlslExtensions[cap];var extensionName=feature[0],behavior=opts.behavior||"enable",source="#extension GL_".concat(extensionName," : ").concat(behavior,"\nvoid main(void) {}"),shader=gl.createShader(35633);gl.shaderSource(shader,source),gl.compileShader(shader);var canCompile=gl.getShaderParameter(shader,35713);return gl.deleteShader(shader),compiledGlslExtensions[cap]=canCompile,canCompile}function getFeature(gl,cap){var feature=WEBGL_FEATURES[cap];Object(assert.a)(feature,cap);var extensionName=function isWebGL2(gl){return Boolean(gl&&2===gl._version)}(gl)&&feature[1]||feature[0],value="string"==typeof extensionName?Boolean(gl.getExtension(extensionName)):extensionName;return Object(assert.a)(!1===value||!0===value),value}function hasFeatures(gl,features){return(features=Array.isArray(features)?features:[features]).every((function(feature){return getFeature(gl,feature)}))}function getPlatformShaderDefines(gl){switch(function getContextInfo(gl){var info=gl.getExtension("WEBGL_debug_renderer_info"),vendor=gl.getParameter(info&&info.UNMASKED_VENDOR_WEBGL||GL_VENDOR),renderer=gl.getParameter(info&&info.UNMASKED_RENDERER_WEBGL||GL_RENDERER);return{gpuVendor:function identifyGPUVendor(vendor,renderer){if(vendor.match(/NVIDIA/i)||renderer.match(/NVIDIA/i))return"NVIDIA";if(vendor.match(/INTEL/i)||renderer.match(/INTEL/i))return"INTEL";if(vendor.match(/AMD/i)||renderer.match(/AMD/i)||vendor.match(/ATI/i)||renderer.match(/ATI/i))return"AMD";return"UNKNOWN GPU"}(vendor,renderer),vendor:vendor,renderer:renderer,version:gl.getParameter(GL_VERSION),shadingLanguageVersion:gl.getParameter(GL_SHADING_LANGUAGE_VERSION)}}(gl).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}var _SHADER_TYPE,_HOOK_FUNCTIONS,_MODULE_INJECTIONS,inject_shader=__webpack_require__(193);__webpack_require__.d(__webpack_exports__,"b",(function(){return createModuleInjection})),__webpack_require__.d(__webpack_exports__,"a",(function(){return assembleShaders}));var INJECT_SHADER_DECLARATIONS="\n\n".concat(inject_shader.a,"\n\n"),SHADER_TYPE=(_SHADER_TYPE={},Object(defineProperty.a)(_SHADER_TYPE,constants.b,"vertex"),Object(defineProperty.a)(_SHADER_TYPE,constants.a,"fragment"),_SHADER_TYPE),HOOK_FUNCTIONS=(_HOOK_FUNCTIONS={},Object(defineProperty.a)(_HOOK_FUNCTIONS,constants.b,{}),Object(defineProperty.a)(_HOOK_FUNCTIONS,constants.a,{}),_HOOK_FUNCTIONS),MODULE_INJECTIONS=(_MODULE_INJECTIONS={},Object(defineProperty.a)(_MODULE_INJECTIONS,constants.b,{}),Object(defineProperty.a)(_MODULE_INJECTIONS,constants.a,{}),_MODULE_INJECTIONS),FRAGMENT_SHADER_PROLOGUE="precision highp float;\n\n";function createModuleInjection(moduleName,opts){var hook=opts.hook,injection=opts.injection,_opts$order=opts.order,order=void 0===_opts$order?0:_opts$order,shaderStage=hook.slice(0,2),moduleInjections=MODULE_INJECTIONS[shaderStage];moduleInjections[moduleName]=moduleInjections[moduleName]||{},Object(assert.a)(!moduleInjections[moduleName][hook],"Module injection already created"),moduleInjections[moduleName][hook]={injection:injection,order:order}}function assembleShaders(gl,opts){var vs=opts.vs,fs=opts.fs,modules=Object(resolve_modules.c)(opts.modules||[]);return{gl:gl,vs:assembleShader(gl,Object.assign({},opts,{source:vs,type:constants.b,modules:modules})),fs:assembleShader(gl,Object.assign({},opts,{source:fs,type:constants.a,modules:modules})),getUniforms:assembleGetUniforms(modules),modules:assembleModuleMap(modules)}}function assembleShader(gl,_ref){var _hookFunctions,_moduleInjections,id=_ref.id,source=_ref.source,type=_ref.type,modules=_ref.modules,_ref$defines=_ref.defines,defines=void 0===_ref$defines?{}:_ref$defines,_ref$hookFunctions=_ref.hookFunctions,hookFunctions=void 0===_ref$hookFunctions?HOOK_FUNCTIONS:_ref$hookFunctions,_ref$moduleInjections=_ref.moduleInjections,moduleInjections=void 0===_ref$moduleInjections?MODULE_INJECTIONS:_ref$moduleInjections,_ref$inject=_ref.inject,inject=void 0===_ref$inject?{}:_ref$inject,_ref$prologue=_ref.prologue,prologue=void 0===_ref$prologue||_ref$prologue,log=_ref.log;(Object(assert.a)("string"==typeof source,"shader source must be a string"),hookFunctions!==HOOK_FUNCTIONS)&&(_hookFunctions={},Object(defineProperty.a)(_hookFunctions,constants.b,Object.assign({},HOOK_FUNCTIONS[constants.b],hookFunctions[constants.b])),Object(defineProperty.a)(_hookFunctions,constants.a,Object.assign({},HOOK_FUNCTIONS[constants.a],hookFunctions[constants.a])),hookFunctions=_hookFunctions);moduleInjections!==MODULE_INJECTIONS&&(_moduleInjections={},Object(defineProperty.a)(_moduleInjections,constants.b,Object.assign({},MODULE_INJECTIONS[constants.b],moduleInjections[constants.b])),Object(defineProperty.a)(_moduleInjections,constants.a,Object.assign({},MODULE_INJECTIONS[constants.a],moduleInjections[constants.a])),moduleInjections=_moduleInjections);var isVertex=type===constants.b,sourceLines=source.split("\n"),glslVersion=100,versionLine="",coreSource=source;0===sourceLines[0].indexOf("#version ")?(glslVersion=300,versionLine=sourceLines[0],coreSource=sourceLines.slice(1).join("\n")):versionLine="#version ".concat(glslVersion);var allDefines={};modules.forEach((function(module){Object.assign(allDefines,module.getDefines())})),Object.assign(allDefines,defines);var assembledSource=prologue?"".concat(versionLine,"\n").concat(function getShaderName(_ref3){var id=_ref3.id,source=_ref3.source,type=_ref3.type;return id&&"string"==typeof id&&-1===source.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(id,"_").concat(SHADER_TYPE[type],"\n\n"):""}({id:id,source:source,type:type}),"\n").concat(function getShaderType(_ref2){var type=_ref2.type;return"\n#define SHADER_TYPE_".concat(SHADER_TYPE[type].toUpperCase(),"\n")}({type:type}),"\n").concat(getPlatformShaderDefines(gl),"\n").concat(function getVersionDefines(gl,glslVersion,isFragment){var versionDefines="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return hasFeatures(gl,FEATURES.GLSL_FRAG_DEPTH)&&(versionDefines+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),hasFeatures(gl,FEATURES.GLSL_DERIVATIVES)&&canCompileGLGSExtension(gl,FEATURES.GLSL_DERIVATIVES)&&(versionDefines+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),hasFeatures(gl,FEATURES.GLSL_FRAG_DATA)&&canCompileGLGSExtension(gl,FEATURES.GLSL_FRAG_DATA,{behavior:"require"})&&(versionDefines+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),hasFeatures(gl,FEATURES.GLSL_TEXTURE_LOD)&&(versionDefines+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),versionDefines}(gl),"\n").concat(function getApplicationDefines(){var defines=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},count=0,sourceText="";for(var define in defines){0===count&&(sourceText+="\n// APPLICATION DEFINES\n"),count++;var value=defines[define];(value||Number.isFinite(value))&&(sourceText+="#define ".concat(define.toUpperCase()," ").concat(defines[define],"\n"))}0===count&&(sourceText+="\n");return sourceText}(allDefines),"\n").concat(isVertex?"":FRAGMENT_SHADER_PROLOGUE,"\n"):"".concat(versionLine,"\n"),injectStandardStubs=!1,hookInjections={},mainInjections={};for(var key in inject){var injection="string"==typeof inject[key]?{injection:inject[key],order:0}:inject[key];key.match(/^(v|f)s:/)?"#"===key[3]?mainInjections[key]=[injection]:hookInjections[key]=[injection]:mainInjections[key]=[injection]}var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=modules[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var module=_step.value;switch(module.name){case"inject":injectStandardStubs=!0;break;default:if(log&&module.checkDeprecations(coreSource,log),assembledSource+=module.getModuleSource(type,glslVersion),moduleInjections[type][module.name]){var injections=moduleInjections[type][module.name];for(var _key in injections)_key.match(/^(v|f)s:#/)?(mainInjections[_key]=mainInjections[_key]||[],mainInjections[_key].push(injections[_key])):(hookInjections[_key]=hookInjections[_key]||[],hookInjections[_key].push(injections[_key]))}}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return assembledSource+=INJECT_SHADER_DECLARATIONS,assembledSource+=function getHookFunctions(hookFunctions,hookInjections){var result="";for(var hookName in hookFunctions){var hookFunction=hookFunctions[hookName];if(result+="void ".concat(hookFunction.signature," {\n"),hookFunction.header&&(result+="  ".concat(hookFunction.header)),hookInjections[hookName]){var injections=hookInjections[hookName];injections.sort((function(a,b){return a.order-b.order}));var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=injections[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var injection=_step4.value;result+="  ".concat(injection.injection,"\n")}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}hookFunction.footer&&(result+="  ".concat(hookFunction.footer)),result+="}\n"}return result}(hookFunctions[type],hookInjections),assembledSource+=coreSource,assembledSource=Object(inject_shader.c)(assembledSource,type,mainInjections,injectStandardStubs)}function assembleGetUniforms(modules){return function getUniforms(opts){var uniforms={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=modules[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var moduleUniforms=_step2.value.getUniforms(opts,uniforms);Object.assign(uniforms,moduleUniforms)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return uniforms}}function assembleModuleMap(modules){var result={},_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=modules[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var moduleName=_step3.value,shaderModule=Object(resolve_modules.a)(moduleName);result[moduleName]=shaderModule}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return result}},function(module,__webpack_exports__,__webpack_require__){"use strict";var fp32=__webpack_require__(792),constants=__webpack_require__(31),COORDINATE_SYSTEM_GLSL_CONSTANTS=Object.keys(constants.a).map((function(key){return"const float COORDINATE_SYSTEM_".concat(key," = ").concat(constants.a[key],".;")})).join(""),project_glsl="".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS,"\n\nuniform float project_uCoordinateSystem;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\nvec4 project_position(vec4 position, vec2 position64xyLow) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\n    return project_uModelMatrix * vec4(\n      project_mercator_(position.xy) * WORLD_SCALE * project_uScale,\n      project_size(position.z),\n      position.w\n    );\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    float X = position.x - project_uCoordinateOrigin.x;\n    float Y = position.y - project_uCoordinateOrigin.y;\n    return project_offset_(vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w));\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return project_offset_(position);\n  }\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_IDENTITY) {\n    position_world.xyz -= project_uCoordinateOrigin;\n    position_world += project_uModelMatrix * vec4(position64xyLow, 0.0, 0.0);\n  }\n\n  return project_offset_(position_world);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_XY_LOW);\n}\n\nvec3 project_position(vec3 position, vec2 position64xyLow) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64xyLow);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    position.w *= project_uCommonUnitsPerMeter.z;\n  }\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters);\n}\nfloat project_pixel_size(float pixels) {\n  return pixels;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels;\n}\nfloat project_scale(float meters) {\n  return project_size(meters);\n}\nvec2 project_scale(vec2 meters) {\n  return project_size(meters);\n}\nvec3 project_scale(vec3 meters) {\n  return project_size(meters);\n}\nvec4 project_scale(vec4 meters) {\n  return project_size(meters);\n}\nvec4 project_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position);\n}\nvec4 project_pixel_to_clipspace(vec2 pixels) {\n  return vec4(project_pixel_size_to_clipspace(pixels), 0.0, 0.0);\n}\n"),viewport_uniforms=__webpack_require__(250),INITIAL_MODULE_OPTIONS={};__webpack_exports__.a={name:"project",dependencies:[fp32.a],vs:project_glsl,getUniforms:function getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:INITIAL_MODULE_OPTIONS;return opts.viewport?Object(viewport_uniforms.b)(opts):{}},deprecations:[{type:"function",old:"project_scale",new:"project_size"},{type:"function",old:"project_to_clipspace",new:"project_common_position_to_clipspace"},{type:"function",old:"project_pixel_to_clipspace",new:"project_pixel_size_to_clipspace"}]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return _objectSpread}));var _defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key){Object(_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(target,key,source[key])}))}return target}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process,global){__webpack_require__.d(__webpack_exports__,"a",(function(){return global_}));var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),global_=("object"!==(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))||"[object process]"!==String(process)||process.browser,"undefined"!=typeof window&&window,void 0!==global?global:window);"undefined"!=typeof document&&document}).call(this,__webpack_require__(72),__webpack_require__(36))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return uid})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isPowerOfTwo})),__webpack_require__.d(__webpack_exports__,"a",(function(){return isObjectEmpty}));var _assert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(17),uidCounters={};function uid(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";uidCounters[id]=uidCounters[id]||1;var count=uidCounters[id]++;return"".concat(id,"-").concat(count)}function isPowerOfTwo(n){return Object(_assert__WEBPACK_IMPORTED_MODULE_0__.a)("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function isObjectEmpty(obj){var isEmpty=!0;for(var key in obj){isEmpty=!1;break}return isEmpty}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getKeyValue})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getKey}));var _utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(17);function getKeyValue(gl,name){if("string"!=typeof name)return name;var number=Number(name);if(!isNaN(number))return number;var value=gl[name=name.replace(/^.*\./,"")];return Object(_utils__WEBPACK_IMPORTED_MODULE_0__.a)(void 0!==value,"Accessing undefined constant GL.".concat(name)),value}function getKey(gl,value){for(var key in value=Number(value),gl)if(gl[key]===value)return"GL.".concat(key);return String(value)}},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(61).f,has=__webpack_require__(60),TO_STRING_TAG=__webpack_require__(37)("toStringTag");module.exports=function(it,TAG,STATIC){it&&!has(it=STATIC?it:it.prototype,TO_STRING_TAG)&&defineProperty(it,TO_STRING_TAG,{configurable:!0,value:TAG})}},function(module,exports,__webpack_require__){var bind=__webpack_require__(179),IndexedObject=__webpack_require__(207),toObject=__webpack_require__(77),toLength=__webpack_require__(76),arraySpeciesCreate=__webpack_require__(352),push=[].push,createMethod=function(TYPE){var IS_MAP=1==TYPE,IS_FILTER=2==TYPE,IS_SOME=3==TYPE,IS_EVERY=4==TYPE,IS_FIND_INDEX=6==TYPE,NO_HOLES=5==TYPE||IS_FIND_INDEX;return function($this,callbackfn,that,specificCreate){for(var value,result,O=toObject($this),self=IndexedObject(O),boundFunction=bind(callbackfn,that,3),length=toLength(self.length),index=0,create=specificCreate||arraySpeciesCreate,target=IS_MAP?create($this,length):IS_FILTER?create($this,0):void 0;length>index;index++)if((NO_HOLES||index in self)&&(result=boundFunction(value=self[index],index,O),TYPE))if(IS_MAP)target[index]=result;else if(result)switch(TYPE){case 3:return!0;case 5:return value;case 6:return index;case 2:push.call(target,value)}else if(IS_EVERY)return!1;return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:target}};module.exports={forEach:createMethod(0),map:createMethod(1),filter:createMethod(2),some:createMethod(3),every:createMethod(4),find:createMethod(5),findIndex:createMethod(6)}},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(String(it)+" is not a function");return it}},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){__webpack_require__(19)({target:"Array",stat:!0},{isArray:__webpack_require__(177)})},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports){module.exports=function isObjectLike(value){return null!=value&&"object"==typeof value}},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(645),getValue=__webpack_require__(648);module.exports=function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),shader_module=__webpack_require__(160),assert=__webpack_require__(141),shader_module_registry_ShaderModuleRegistry=function(){function ShaderModuleRegistry(){Object(classCallCheck.a)(this,ShaderModuleRegistry),this.shaderModules={},this.defaultShaderModules=[]}return Object(createClass.a)(ShaderModuleRegistry,[{key:"setDefaultShaderModules",value:function setDefaultShaderModules(modules){this.defaultShaderModules=this.resolveModules(modules)}},{key:"getDefaultShaderModules",value:function getDefaultShaderModules(){return this.defaultShaderModules}},{key:"registerShaderModules",value:function registerShaderModules(shaderModuleList){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$ignoreMultipleRe=_ref.ignoreMultipleRegistrations,ignoreMultipleRegistrations=void 0!==_ref$ignoreMultipleRe&&_ref$ignoreMultipleRe,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=shaderModuleList[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var shaderModule=_step.value;this._registerShaderModule(shaderModule,ignoreMultipleRegistrations)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"getShaderModule",value:function getShaderModule(moduleOrName){if(moduleOrName instanceof shader_module.a)return moduleOrName;if("string"!=typeof moduleOrName)return this._registerShaderModule(moduleOrName,!0);var module=this.shaderModules[moduleOrName];return module||Object(assert.a)(!1,"Unknown shader module ".concat(moduleOrName)),module}},{key:"resolveModules",value:function resolveModules(modules){var _this=this;return modules.map((function(moduleOrName){return _this.getShaderModule(moduleOrName)}))}},{key:"_registerShaderModule",value:function _registerShaderModule(module){var ignoreMultipleRegistrations=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(module instanceof shader_module.a)return module;if(Object(assert.a)(module.name,"shader module has no name"),this.shaderModules[module.name]&&!ignoreMultipleRegistrations)throw new Error("shader module ".concat(module.name," already registered"));return(module=new shader_module.a(module)).dependencies=this.resolveModules(module.dependencies),this.shaderModules[module.name]=module,this.shaderModules[module.name]}}]),ShaderModuleRegistry}();__webpack_require__.d(__webpack_exports__,"b",(function(){return registerShaderModules})),__webpack_require__.d(__webpack_exports__,"c",(function(){return resolveModules})),__webpack_require__.d(__webpack_exports__,"a",(function(){return resolve_modules_getShaderModule}));var shaderModuleRegistry=new shader_module_registry_ShaderModuleRegistry;function registerShaderModules(shaderModuleList){var _ref$ignoreMultipleRe=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,ignoreMultipleRegistrations=void 0!==_ref$ignoreMultipleRe&&_ref$ignoreMultipleRe;shaderModuleRegistry.registerShaderModules(shaderModuleList,{ignoreMultipleRegistrations:ignoreMultipleRegistrations})}function resolveModules(modules){return modules=modules.concat(shaderModuleRegistry.defaultShaderModules),getShaderDependencies(modules=shaderModuleRegistry.resolveModules(modules))}function resolve_modules_getShaderModule(moduleOrName){return shaderModuleRegistry.getShaderModule(moduleOrName)}function getShaderDependencies(modules){var moduleMap={},moduleDepth={};return getDependencyGraph({modules:modules,level:0,moduleMap:moduleMap,moduleDepth:moduleDepth}),Object.keys(moduleDepth).sort((function(a,b){return moduleDepth[b]-moduleDepth[a]})).map((function(name){return moduleMap[name]}))}function getDependencyGraph(_ref2){var modules=_ref2.modules,level=_ref2.level,moduleMap=_ref2.moduleMap,moduleDepth=_ref2.moduleDepth;if(level>=5)throw new Error("Possible loop in shader dependency graph");var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=modules[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var module=_step.value;moduleMap[module.name]=module,(void 0===moduleDepth[module.name]||moduleDepth[module.name]<level)&&(moduleDepth[module.name]=level)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=modules[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _module=_step2.value;_module.dependencies&&getDependencyGraph({modules:_module.dependencies,level:level+1,moduleMap:moduleMap,moduleDepth:moduleDepth})}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function isEqual(a,b){if(a===b)return!0;if(Array.isArray(a)){var len=a.length;if(!b||b.length!==len)return!1;for(var i=0;i<len;i++)if(a[i]!==b[i])return!1;return!0}return!1}function memoize(compute){var cachedResult,cachedArgs={};return function(args){for(var key in args)if(!isEqual(args[key],cachedArgs[key])){cachedResult=compute(args),cachedArgs=args;break}return cachedResult}}__webpack_require__.d(__webpack_exports__,"a",(function(){return memoize}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),TypedArrayManager=function(){function TypedArrayManager(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$overAlloc=_ref.overAlloc,overAlloc=void 0===_ref$overAlloc?2:_ref$overAlloc,_ref$poolSize=_ref.poolSize,poolSize=void 0===_ref$poolSize?100:_ref$poolSize;Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,TypedArrayManager),this.overAlloc=overAlloc,this.poolSize=poolSize,this._pool=[]}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(TypedArrayManager,[{key:"allocate",value:function allocate(typedArray,count,_ref2){var _ref2$size=_ref2.size,size=void 0===_ref2$size?1:_ref2$size,type=_ref2.type,_ref2$padding=_ref2.padding,padding=void 0===_ref2$padding?0:_ref2$padding,_ref2$copy=_ref2.copy,copy=void 0!==_ref2$copy&&_ref2$copy,Type=type||typedArray&&typedArray.constructor||Float32Array,newSize=count*size+padding;if(ArrayBuffer.isView(typedArray)){if(newSize<=typedArray.length)return typedArray;if(newSize*typedArray.BYTES_PER_ELEMENT<=typedArray.buffer.byteLength)return new Type(typedArray.buffer,0,newSize)}var newArray=this._allocate(Type,newSize);return typedArray&&copy?newArray.set(typedArray):newArray.fill(0,0,4),this._release(typedArray),newArray}},{key:"release",value:function release(typedArray){this._release(typedArray)}},{key:"_allocate",value:function _allocate(Type,size){size=Math.max(Math.ceil(size*this.overAlloc),1);var pool=this._pool,byteLength=Type.BYTES_PER_ELEMENT*size,i=pool.findIndex((function(b){return b.byteLength>=byteLength}));return i>=0?new Type(pool.splice(i,1)[0],0,size):new Type(size)}},{key:"_release",value:function _release(typedArray){if(ArrayBuffer.isView(typedArray)){var pool=this._pool,buffer=typedArray.buffer,byteLength=buffer.byteLength,i=pool.findIndex((function(b){return b.byteLength>=byteLength}));i<0?pool.push(buffer):(i>0||pool.length<this.poolSize)&&pool.splice(i,0,buffer),pool.length>this.poolSize&&pool.shift()}}}]),TypedArrayManager}();__webpack_exports__.a=new TypedArrayManager},function(module,__webpack_exports__,__webpack_require__){"use strict";var _$33190$36012$,classCallCheck=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),assertThisInitialized=__webpack_require__(7),createClass=__webpack_require__(1),inherits=__webpack_require__(6),resource=__webpack_require__(47),defineProperty=__webpack_require__(0),EXT_FLOAT_WEBGL2="EXT_color_buffer_float",renderbuffer_formats=(_$33190$36012$={},Object(defineProperty.a)(_$33190$36012$,33189,{bpp:2}),Object(defineProperty.a)(_$33190$36012$,33190,{gl2:!0,bpp:3}),Object(defineProperty.a)(_$33190$36012$,36012,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36168,{bpp:1}),Object(defineProperty.a)(_$33190$36012$,34041,{bpp:4}),Object(defineProperty.a)(_$33190$36012$,35056,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36013,{gl2:!0,bpp:5}),Object(defineProperty.a)(_$33190$36012$,32854,{bpp:2}),Object(defineProperty.a)(_$33190$36012$,36194,{bpp:2}),Object(defineProperty.a)(_$33190$36012$,32855,{bpp:2}),Object(defineProperty.a)(_$33190$36012$,33321,{gl2:!0,bpp:1}),Object(defineProperty.a)(_$33190$36012$,33330,{gl2:!0,bpp:1}),Object(defineProperty.a)(_$33190$36012$,33329,{gl2:!0,bpp:1}),Object(defineProperty.a)(_$33190$36012$,33332,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33331,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33334,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33333,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33323,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33336,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33335,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33338,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33337,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33340,{gl2:!0,bpp:8}),Object(defineProperty.a)(_$33190$36012$,33339,{gl2:!0,bpp:8}),Object(defineProperty.a)(_$33190$36012$,32849,{gl2:!0,bpp:3}),Object(defineProperty.a)(_$33190$36012$,32856,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,32857,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36220,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36238,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36975,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36214,{gl2:!0,bpp:8}),Object(defineProperty.a)(_$33190$36012$,36232,{gl2:!0,bpp:8}),Object(defineProperty.a)(_$33190$36012$,36226,{gl2:!0,bpp:16}),Object(defineProperty.a)(_$33190$36012$,36208,{gl2:!0,bpp:16}),Object(defineProperty.a)(_$33190$36012$,33325,{gl2:EXT_FLOAT_WEBGL2,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33327,{gl2:EXT_FLOAT_WEBGL2,bpp:4}),Object(defineProperty.a)(_$33190$36012$,34842,{gl2:EXT_FLOAT_WEBGL2,bpp:8}),Object(defineProperty.a)(_$33190$36012$,33326,{gl2:EXT_FLOAT_WEBGL2,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33328,{gl2:EXT_FLOAT_WEBGL2,bpp:8}),Object(defineProperty.a)(_$33190$36012$,34836,{gl2:EXT_FLOAT_WEBGL2,bpp:16}),Object(defineProperty.a)(_$33190$36012$,35898,{gl2:EXT_FLOAT_WEBGL2,bpp:4}),_$33190$36012$),webgl_checks=__webpack_require__(39),assert=__webpack_require__(17);function isFormatSupported(gl,format,formats){var info=formats[format];if(!info)return!1;var value=Object(webgl_checks.d)(gl)&&info.gl2||info.gl1;return"string"==typeof value?gl.getExtension(value):value}__webpack_require__.d(__webpack_exports__,"a",(function(){return renderbuffer_Renderbuffer}));var renderbuffer_Renderbuffer=function(_Resource){function Renderbuffer(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Renderbuffer),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Renderbuffer).call(this,gl,opts))).initialize(opts),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(Renderbuffer,_Resource),Object(createClass.a)(Renderbuffer,null,[{key:"isSupported",value:function isSupported(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},format=_ref.format;return!format||isFormatSupported(gl,format,renderbuffer_formats)}},{key:"getSamplesForFormat",value:function getSamplesForFormat(gl,_ref2){var format=_ref2.format;return gl.getInternalformatParameter(36161,format,32937)}}]),Object(createClass.a)(Renderbuffer,[{key:"initialize",value:function initialize(_ref3){var format=_ref3.format,_ref3$width=_ref3.width,width=void 0===_ref3$width?1:_ref3$width,_ref3$height=_ref3.height,height=void 0===_ref3$height?1:_ref3$height,_ref3$samples=_ref3.samples,samples=void 0===_ref3$samples?0:_ref3$samples;return Object(assert.a)(format,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==samples&&Object(webgl_checks.d)(this.gl)?this.gl.renderbufferStorageMultisample(36161,samples,format,width,height):this.gl.renderbufferStorage(36161,format,width,height),this.format=format,this.width=width,this.height=height,this.samples=samples,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*renderbuffer_formats[this.format].bpp),this}},{key:"resize",value:function resize(_ref4){var width=_ref4.width,height=_ref4.height;return width!==this.width||height!==this.height?this.initialize({width:width,height:height,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function _bindHandle(handle){this.gl.bindRenderbuffer(36161,handle)}},{key:"_syncHandle",value:function _syncHandle(handle){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function _getParameter(pname){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,pname)}}]),Renderbuffer}(resource.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"shadertools: assertion failed.")}__webpack_require__.d(__webpack_exports__,"a",(function(){return assert}))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"b",(function(){return userAgent})),__webpack_require__.d(__webpack_exports__,"c",(function(){return window_})),__webpack_require__.d(__webpack_exports__,"a",(function(){return passiveSupported}));var userAgent="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",window_="undefined"!=typeof window?window:global,passiveSupported=(void 0!==global||window,"undefined"!=typeof document&&document,!1);try{var options={get passive(){return passiveSupported=!0,!0}};window_.addEventListener("test",options,options),window_.removeEventListener("test",options,options)}catch(err){}}).call(this,__webpack_require__(36))},,function(module,exports,__webpack_require__){"use strict";var trimStart=__webpack_require__(514),trimEnd=__webpack_require__(516),inspect=__webpack_require__(267),ES2018=__webpack_require__(272),assign=__webpack_require__(169),MAX_SAFE_INTEGER=__webpack_require__(327),$TypeError=__webpack_require__(44)("%TypeError%"),ES2019=assign(assign({},ES2018),{AddEntriesFromIterable:function AddEntriesFromIterable(target,iterable,adder){if(!this.IsCallable(adder))throw new $TypeError("Assertion failed: `adder` is not callable");if(null==iterable)throw new $TypeError("Assertion failed: `iterable` is present, and not nullish");for(var iteratorRecord=this.GetIterator(iterable);;){var next=this.IteratorStep(iteratorRecord);if(!next)return target;var nextItem=this.IteratorValue(next);if("Object"!==this.Type(nextItem)){var error=new $TypeError("iterator next must return an Object, got "+inspect(nextItem));return this.IteratorClose(iteratorRecord,(function(){throw error}))}try{var k=this.Get(nextItem,"0"),v=this.Get(nextItem,"1");this.Call(adder,target,[k,v])}catch(e){return this.IteratorClose(iteratorRecord,(function(){throw e}))}}},FlattenIntoArray:function FlattenIntoArray(target,source,sourceLen,start,depth){var mapperFunction;arguments.length>5&&(mapperFunction=arguments[5]);for(var targetIndex=start,sourceIndex=0;sourceIndex<sourceLen;){var P=this.ToString(sourceIndex),exists=this.HasProperty(source,P);if(!0===exists){var element=this.Get(source,P);if(void 0!==mapperFunction){if(arguments.length<=6)throw new $TypeError("Assertion failed: thisArg is required when mapperFunction is provided");element=this.Call(mapperFunction,arguments[6],[element,sourceIndex,source])}var shouldFlatten=!1;if(depth>0&&(shouldFlatten=this.IsArray(element)),shouldFlatten){var elementLen=this.ToLength(this.Get(element,"length"));targetIndex=this.FlattenIntoArray(target,element,elementLen,targetIndex,depth-1)}else{if(targetIndex>=MAX_SAFE_INTEGER)throw new $TypeError("index too large");this.CreateDataPropertyOrThrow(target,this.ToString(targetIndex),element),targetIndex+=1}}sourceIndex+=1}return targetIndex},TrimString:function TrimString(string,where){var T,str=this.RequireObjectCoercible(string),S=this.ToString(str);if("start"===where)T=trimStart(S);else if("end"===where)T=trimEnd(S);else{if("start+end"!==where)throw new $TypeError('Assertion failed: invalid `where` value; must be "start", "end", or "start+end"');T=trimStart(trimEnd(S))}return T}});module.exports=ES2019},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),propertyIsEnumerableModule=__webpack_require__(206),createPropertyDescriptor=__webpack_require__(171),toIndexedObject=__webpack_require__(97),toPrimitive=__webpack_require__(172),has=__webpack_require__(60),IE8_DOM_DEFINE=__webpack_require__(346),nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;exports.f=DESCRIPTORS?nativeGetOwnPropertyDescriptor:function getOwnPropertyDescriptor(O,P){if(O=toIndexedObject(O),P=toPrimitive(P,!0),IE8_DOM_DEFINE)try{return nativeGetOwnPropertyDescriptor(O,P)}catch(error){}if(has(O,P))return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O,P),O[P])}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(50),defineProperties=__webpack_require__(355),enumBugKeys=__webpack_require__(278),hiddenKeys=__webpack_require__(175),html=__webpack_require__(356),documentCreateElement=__webpack_require__(274),IE_PROTO=__webpack_require__(208)("IE_PROTO"),Empty=function(){},createDict=function(){var iframeDocument,iframe=documentCreateElement("iframe"),length=enumBugKeys.length;for(iframe.style.display="none",html.appendChild(iframe),iframe.src=String("javascript:"),(iframeDocument=iframe.contentWindow.document).open(),iframeDocument.write("<script>document.F=Object<\/script>"),iframeDocument.close(),createDict=iframeDocument.F;length--;)delete createDict.prototype[enumBugKeys[length]];return createDict()};module.exports=Object.create||function create(O,Properties){var result;return null!==O?(Empty.prototype=anObject(O),result=new Empty,Empty.prototype=null,result[IE_PROTO]=O):result=createDict(),void 0===Properties?result:defineProperties(result,Properties)},hiddenKeys[IE_PROTO]=!0},function(module,exports,__webpack_require__){var $=__webpack_require__(19),assign=__webpack_require__(589);$({target:"Object",stat:!0,forced:Object.assign!==assign},{assign:assign})},function(module,exports,__webpack_require__){"use strict";(function(global){__webpack_require__(73),__webpack_require__(27),Object.defineProperty(exports,"__esModule",{value:!0}),exports.logger=void 0;var console=global.console,logger={debug:function debug(message){for(var _len=arguments.length,rest=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)rest[_key-1]=arguments[_key];return console.debug.apply(console,[message].concat(rest))},log:function log(message){for(var _len2=arguments.length,rest=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)rest[_key2-1]=arguments[_key2];return console.log.apply(console,[message].concat(rest))},info:function info(message){for(var _len3=arguments.length,rest=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)rest[_key3-1]=arguments[_key3];return console.info.apply(console,[message].concat(rest))},warn:function warn(message){for(var _len4=arguments.length,rest=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)rest[_key4-1]=arguments[_key4];return console.warn.apply(console,[message].concat(rest))},error:function error(message){for(var _len5=arguments.length,rest=new Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++)rest[_key5-1]=arguments[_key5];return console.error.apply(console,[message].concat(rest))}};exports.logger=logger}).call(this,__webpack_require__(36))},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),exec=__webpack_require__(225);$({target:"RegExp",proto:!0,forced:/./.exec!==exec},{exec:exec})},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(230),getRawTag=__webpack_require__(620),objectToString=__webpack_require__(621),nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getQualifierDetails})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getPassthroughFS})),__webpack_require__.d(__webpack_exports__,"d",(function(){return typeToChannelSuffix})),__webpack_require__.d(__webpack_exports__,"c",(function(){return typeToChannelCount}));var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(141),FS100="void main() {gl_FragColor = vec4(0);}",FS_GLES="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",FS300="#version 300 es\n".concat(FS_GLES);function getQualifierDetails(line,qualifiers){qualifiers=Array.isArray(qualifiers)?qualifiers:[qualifiers];var words=line.replace(/^\s+/,"").split(/\s+/),_words=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(words,3),qualifier=_words[0],type=_words[1],definition=_words[2];return qualifiers.includes(qualifier)&&type&&definition?{qualifier:qualifier,type:type,name:definition.split(";")[0]}:null}function getPassthroughFS(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$version=_ref.version,version=void 0===_ref$version?100:_ref$version,input=_ref.input,inputType=_ref.inputType,output=_ref.output;if(!input)return 300===version?FS300:version>300?"#version ".concat(version,"\n").concat(FS_GLES):FS100;var outputValue=function convertToVec4(variable,type){switch(type){case"float":return"vec4(".concat(variable,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(variable,", 0.0, 1.0)");case"vec3":return"vec4(".concat(variable,", 1.0)");case"vec4":return variable;default:return Object(_utils__WEBPACK_IMPORTED_MODULE_1__.a)(!1),null}}(input,inputType);return version>=300?"#version ".concat(version," ").concat(300===version?"es":"","\nin ").concat(inputType," ").concat(input,";\nout vec4 ").concat(output,";\nvoid main() {\n  ").concat(output," = ").concat(outputValue,";\n}"):"varying ".concat(inputType," ").concat(input,";\nvoid main() {\n  gl_FragColor = ").concat(outputValue,";\n}")}function typeToChannelSuffix(type){switch(type){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Object(_utils__WEBPACK_IMPORTED_MODULE_1__.a)(!1),null}}function typeToChannelCount(type){switch(type){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Object(_utils__WEBPACK_IMPORTED_MODULE_1__.a)(!1),null}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TRANSITION_EVENTS})),__webpack_require__.d(__webpack_exports__,"b",(function(){return TransitionManager}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_transitions_linear_interpolator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(155),_transitions_transition__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(91),_utils_assert__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(14),noop=function noop(){},TRANSITION_EVENTS={BREAK:1,SNAP_TO_END:2,IGNORE:3},DEFAULT_PROPS={transitionDuration:0,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new _transitions_linear_interpolator__WEBPACK_IMPORTED_MODULE_2__.a,transitionInterruption:TRANSITION_EVENTS.BREAK,onTransitionStart:noop,onTransitionInterrupt:noop,onTransitionEnd:noop},TransitionManager=function(){function TransitionManager(ControllerState){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,TransitionManager),Object(_utils_assert__WEBPACK_IMPORTED_MODULE_4__.a)(ControllerState),this.ControllerState=ControllerState,this.props=Object.assign({},DEFAULT_PROPS,props),this.propsInTransition=null,this.transition=new _transitions_transition__WEBPACK_IMPORTED_MODULE_3__.a(props.timeline),this.onViewStateChange=props.onViewStateChange,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(TransitionManager,[{key:"finalize",value:function finalize(){this.transition.cancel()}},{key:"getViewportInTransition",value:function getViewportInTransition(){return this.propsInTransition}},{key:"processViewStateChange",value:function processViewStateChange(nextProps){var transitionTriggered=!1,currentProps=this.props;if(nextProps=Object.assign({},DEFAULT_PROPS,nextProps),this.props=nextProps,this._shouldIgnoreViewportChange(currentProps,nextProps))return transitionTriggered;if(this._isTransitionEnabled(nextProps)){var _this$transition$sett=this.transition.settings,interruption=_this$transition$sett.interruption,endProps=_this$transition$sett.endProps,startProps=Object.assign({},currentProps,interruption===TRANSITION_EVENTS.SNAP_TO_END?endProps:this.propsInTransition||currentProps);this._triggerTransition(startProps,nextProps),transitionTriggered=!0}else this.transition.cancel();return transitionTriggered}},{key:"updateTransition",value:function updateTransition(){this.transition.update()}},{key:"_isTransitionEnabled",value:function _isTransitionEnabled(props){return props.transitionDuration>0&&props.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function _isUpdateDueToCurrentTransition(props){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(props,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function _shouldIgnoreViewportChange(currentProps,nextProps){return this.transition.inProgress?this.transition.settings.interruption===TRANSITION_EVENTS.IGNORE||this._isUpdateDueToCurrentTransition(nextProps):!this._isTransitionEnabled(nextProps)||nextProps.transitionInterpolator.arePropsEqual(currentProps,nextProps)}},{key:"_triggerTransition",value:function _triggerTransition(startProps,endProps){Object(_utils_assert__WEBPACK_IMPORTED_MODULE_4__.a)(this._isTransitionEnabled(endProps),"Transition is not enabled");var startViewstate=new this.ControllerState(startProps),endViewStateProps=new this.ControllerState(endProps).shortestPathFrom(startViewstate),initialProps=endProps.transitionInterpolator.initializeProps(startProps,endViewStateProps);this.propsInTransition={},this.transition.start({duration:endProps.transitionDuration,easing:endProps.transitionEasing,interpolator:endProps.transitionInterpolator,interruption:endProps.transitionInterruption,startProps:initialProps.start,endProps:initialProps.end,onStart:endProps.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(endProps.onTransitionInterrupt),onEnd:this._onTransitionEnd(endProps.onTransitionEnd)}),this.updateTransition()}},{key:"_onTransitionEnd",value:function _onTransitionEnd(callback){var _this=this;return function(transition){_this.propsInTransition=null,callback(transition)}}},{key:"_onTransitionUpdate",value:function _onTransitionUpdate(transition){var time=transition.time,_transition$settings=transition.settings,interpolator=_transition$settings.interpolator,startProps=_transition$settings.startProps,endProps=_transition$settings.endProps,duration=_transition$settings.duration,t=(0,_transition$settings.easing)(time/duration),viewport=interpolator.interpolateProps(startProps,endProps,t);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,viewport)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0},oldViewState:this.props})}}]),TransitionManager}();TransitionManager.defaultProps=DEFAULT_PROPS},function(module,__webpack_exports__,__webpack_require__){"use strict";var slicedToArray=__webpack_require__(9),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(6),constants=__webpack_require__(23),attribute_manager=__webpack_require__(244),seer_integration=__webpack_require__(70),defineProperty=__webpack_require__(0),attribute_transition_utils=__webpack_require__(57),common=__webpack_require__(21),transitions_transition=__webpack_require__(91),cpu_interpolation_transition_CPUInterpolationTransition=function(_Transition){function CPUInterpolationTransition(){return Object(classCallCheck.a)(this,CPUInterpolationTransition),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(CPUInterpolationTransition).apply(this,arguments))}return Object(inherits.a)(CPUInterpolationTransition,_Transition),Object(createClass.a)(CPUInterpolationTransition,[{key:"_onUpdate",value:function _onUpdate(){var time=this.time,_this$settings=this.settings,fromValue=_this$settings.fromValue,toValue=_this$settings.toValue,duration=_this$settings.duration,t=(0,_this$settings.easing)(time/duration);this._value=Object(common.g)(fromValue,toValue,t)}},{key:"value",get:function get(){return this._value}}]),CPUInterpolationTransition}(transitions_transition.a);function updateSpringElement(prev,cur,dest,damping,stiffness){var velocity=cur-prev;return(dest-cur)*stiffness+-velocity*damping+velocity+cur}function distance(value1,value2){if(Array.isArray(value1)){for(var distanceSquare=0,i=0;i<value1.length;i++){var d=value1[i]-value2[i];distanceSquare+=d*d}return Math.sqrt(distanceSquare)}return Math.abs(value1-value2)}var cpu_spring_transition_CPUSpringTransition=function(_Transition){function CPUSpringTransition(){return Object(classCallCheck.a)(this,CPUSpringTransition),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(CPUSpringTransition).apply(this,arguments))}return Object(inherits.a)(CPUSpringTransition,_Transition),Object(createClass.a)(CPUSpringTransition,[{key:"_onUpdate",value:function _onUpdate(){var _this$settings=this.settings,fromValue=_this$settings.fromValue,toValue=_this$settings.toValue,damping=_this$settings.damping,stiffness=_this$settings.stiffness,_this$_prevValue=this._prevValue,_prevValue=void 0===_this$_prevValue?fromValue:_this$_prevValue,_this$_currValue=this._currValue,_currValue=void 0===_this$_currValue?fromValue:_this$_currValue,nextValue=function updateSpring(prev,cur,dest,damping,stiffness){if(Array.isArray(dest)){for(var next=[],i=0;i<dest.length;i++)next[i]=updateSpringElement(prev[i],cur[i],dest[i],damping,stiffness);return next}return updateSpringElement(prev,cur,dest,damping,stiffness)}(_prevValue,_currValue,toValue,damping,stiffness),delta=distance(nextValue,toValue),velocity=distance(nextValue,_currValue);delta<1e-5&&velocity<1e-5&&(nextValue=toValue,this.end()),this._prevValue=_currValue,this._currValue=nextValue}},{key:"value",get:function get(){return this._currValue}}]),CPUSpringTransition}(transitions_transition.a),log=__webpack_require__(10);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var TRANSITION_TYPES={interpolation:cpu_interpolation_transition_CPUInterpolationTransition,spring:cpu_spring_transition_CPUSpringTransition},uniform_transition_manager_UniformTransitionManager=function(){function UniformTransitionManager(timeline){Object(classCallCheck.a)(this,UniformTransitionManager),this.transitions=new Map,this.timeline=timeline}return Object(createClass.a)(UniformTransitionManager,[{key:"add",value:function add(key,fromValue,toValue,settings){var transitions=this.transitions;transitions.has(key)&&(fromValue=transitions.get(key).value,this.remove(key));if(settings=Object(attribute_transition_utils.e)(settings)){var TransitionType=TRANSITION_TYPES[settings.type];if(TransitionType){var transition=new TransitionType(this.timeline);transition.start(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},settings,{fromValue:fromValue,toValue:toValue})),transitions.set(key,transition)}else log.a.error("unsupported transition type '".concat(settings.type,"'"))()}}},{key:"remove",value:function remove(key){var transitions=this.transitions;transitions.has(key)&&(transitions.get(key).cancel(),transitions.delete(key))}},{key:"update",value:function update(){var propsInTransition={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.transitions[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=Object(slicedToArray.a)(_step.value,2),key=_step$value[0],transition=_step$value[1];transition.update(),propsInTransition[key]=transition.value,transition.inProgress||this.remove(key)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return propsInTransition}},{key:"clear",value:function clear(){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.transitions.keys()[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var key=_step2.value;this.remove(key)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}},{key:"active",get:function get(){return this.transitions.size>0}}]),UniformTransitionManager}(),esm_typeof=__webpack_require__(12),assert=__webpack_require__(14);function props_diffProps(props,oldProps){var propsChangedReason=compareProps({newProps:props,oldProps:oldProps,propTypes:getPropTypes(props),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),dataChangedReason=function diffDataProps(props,oldProps){if(null===oldProps)return"oldProps is null, initial diff";var dataChanged=null,dataComparator=props.dataComparator,_dataDiff=props._dataDiff;dataComparator?dataComparator(props.data,oldProps.data)||(dataChanged="Data comparator detected a change"):props.data!==oldProps.data&&(dataChanged="A new data container was supplied");dataChanged&&_dataDiff&&(dataChanged=_dataDiff(props.data,oldProps.data)||dataChanged);return dataChanged}(props,oldProps),updateTriggersChangedReason=!1;return dataChangedReason||(updateTriggersChangedReason=function diffUpdateTriggers(props,oldProps){if(null===oldProps)return"oldProps is null, initial diff";if("all"in props.updateTriggers){if(diffUpdateTrigger(props,oldProps,"all"))return{all:!0}}var triggerChanged={},reason=!1;for(var triggerName in props.updateTriggers){if("all"!==triggerName)diffUpdateTrigger(props,oldProps,triggerName)&&(triggerChanged[triggerName]=!0,reason=triggerChanged)}return reason}(props,oldProps)),{dataChanged:dataChangedReason,propsChanged:propsChangedReason,updateTriggersChanged:updateTriggersChangedReason,extensionsChanged:diffExtensions(props,oldProps),transitionsChanged:diffTransitions(props,oldProps)}}function diffTransitions(props,oldProps){if(!props.transitions)return null;var result={},propTypes=getPropTypes(props);for(var key in props.transitions){var propType=propTypes[key],type=propType&&propType.type;("number"===type||"color"===type||"array"===type)&&comparePropValues(props[key],oldProps[key],propType)&&(result[key]=!0)}return result}function compareProps(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},newProps=_ref.newProps,oldProps=_ref.oldProps,_ref$ignoreProps=_ref.ignoreProps,ignoreProps=void 0===_ref$ignoreProps?{}:_ref$ignoreProps,_ref$propTypes=_ref.propTypes,propTypes=void 0===_ref$propTypes?{}:_ref$propTypes,_ref$triggerName=_ref.triggerName,triggerName=void 0===_ref$triggerName?"props":_ref$triggerName;if(Object(assert.a)(void 0!==oldProps&&void 0!==newProps,"compareProps args"),oldProps===newProps)return null;if("object"!==Object(esm_typeof.a)(newProps)||null===newProps)return"".concat(triggerName," changed shallowly");if("object"!==Object(esm_typeof.a)(oldProps)||null===oldProps)return"".concat(triggerName," changed shallowly");for(var _i=0,_Object$keys=Object.keys(newProps);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];if(!(key in ignoreProps)){if(!(key in oldProps))return"".concat(triggerName,".").concat(key," added");var changed=comparePropValues(newProps[key],oldProps[key],propTypes[key]);if(changed)return"".concat(triggerName,".").concat(key," ").concat(changed)}}for(var _i2=0,_Object$keys2=Object.keys(oldProps);_i2<_Object$keys2.length;_i2++){var _key=_Object$keys2[_i2];if(!(_key in ignoreProps)){if(!(_key in newProps))return"".concat(triggerName,".").concat(_key," dropped");if(!Object.hasOwnProperty.call(newProps,_key)){var _changed=comparePropValues(newProps[_key],oldProps[_key],propTypes[_key]);if(_changed)return"".concat(triggerName,".").concat(_key," ").concat(_changed)}}}return null}function comparePropValues(newProp,oldProp,propType){var equal=propType&&propType.equal;return equal&&!equal(newProp,oldProp,propType)?"changed deeply":equal||!(equal=newProp&&oldProp&&newProp.equals)||equal.call(newProp,oldProp)?equal||oldProp===newProp?null:"changed shallowly":"changed deeply"}function diffExtensions(props,oldProps){if(null===oldProps)return"oldProps is null, initial diff";var oldExtensions=oldProps.extensions,extensions=props.extensions;if(extensions===oldExtensions)return!1;if(extensions.length!==oldExtensions.length)return!0;for(var i=0;i<extensions.length;i++)if(!extensions[i].equals(oldExtensions[i]))return!0;return!1}function diffUpdateTrigger(props,oldProps,triggerName){var newTriggers=props.updateTriggers[triggerName];newTriggers=null==newTriggers?{}:newTriggers;var oldTriggers=oldProps.updateTriggers[triggerName];return compareProps({oldProps:oldTriggers=null==oldTriggers?{}:oldTriggers,newProps:newTriggers,triggerName:triggerName})}function getPropTypes(props){var layer=props._component,LayerType=layer&&layer.constructor;return LayerType?LayerType._propTypes:{}}var utils_count=__webpack_require__(251),with_parameters=__webpack_require__(114);function mergeShaders(target,source){if(!source)return target;var result=Object.assign({},target,source);if("defines"in source&&(result.defines=Object.assign({},target.defines,source.defines)),"modules"in source&&(result.modules=(target.modules||[]).concat(source.modules),source.modules.some((function(module){return"project64"===module||"project64"===module.name})))){var index=result.modules.findIndex((function(module){return"project32"===module||"project32"===module.name}));index>=0&&result.modules.splice(index,1)}return"inject"in source&&(result.inject=Object.assign({},target.inject,source.inject)),result}var viewport_uniforms=__webpack_require__(250),vec4=__webpack_require__(106),vec3=__webpack_require__(52),web_mercator_utils=__webpack_require__(22);function lngLatZToWorldPosition(lngLatZ,viewport){var offsetMode=arguments.length>2&&void 0!==arguments[2]&&arguments[2],_lngLatZ=Object(slicedToArray.a)(lngLatZ,3),longitude=_lngLatZ[0],latitude=_lngLatZ[1],_lngLatZ$=_lngLatZ[2],z=void 0===_lngLatZ$?0:_lngLatZ$,_viewport$projectFlat=viewport.projectFlat(lngLatZ),_viewport$projectFlat2=Object(slicedToArray.a)(_viewport$projectFlat,2);return[_viewport$projectFlat2[0],_viewport$projectFlat2[1],z*(offsetMode?Object(web_mercator_utils.b)({longitude:longitude,latitude:latitude,scale:viewport.scale}):viewport.getDistanceScales()).pixelsPerMeter[2]]}function getWorldPosition(position,_ref){var viewport=_ref.viewport,modelMatrix=_ref.modelMatrix,coordinateSystem=_ref.coordinateSystem,coordinateOrigin=_ref.coordinateOrigin,offsetMode=_ref.offsetMode,_position=Object(slicedToArray.a)(position,3),x=_position[0],y=_position[1],z=_position[2];if(modelMatrix){var _vec4$transformMat=vec4.b([],[x,y,z,1],modelMatrix),_vec4$transformMat2=Object(slicedToArray.a)(_vec4$transformMat,3);x=_vec4$transformMat2[0],y=_vec4$transformMat2[1],z=_vec4$transformMat2[2]}switch(coordinateSystem){case constants.a.LNGLAT:case constants.a.LNGLAT_DEPRECATED:return lngLatZToWorldPosition([x,y,z],viewport,offsetMode);case constants.a.LNGLAT_OFFSETS:return lngLatZToWorldPosition([x+coordinateOrigin[0],y+coordinateOrigin[1],z+(coordinateOrigin[2]||0)],viewport,offsetMode);case constants.a.METER_OFFSETS:return lngLatZToWorldPosition(Object(web_mercator_utils.a)(coordinateOrigin,[x,y,z]),viewport,offsetMode);case constants.a.IDENTITY:default:return viewport.projectPosition([x,y,z])}}function project_functions_projectPosition(position,params){var _normalizeParameters=function normalizeParameters(opts){var normalizedParams=Object.assign({},opts),viewport=opts.viewport,coordinateSystem=opts.coordinateSystem,coordinateOrigin=opts.coordinateOrigin,fromCoordinateSystem=opts.fromCoordinateSystem,fromCoordinateOrigin=opts.fromCoordinateOrigin;return void 0===fromCoordinateSystem&&(normalizedParams.fromCoordinateSystem=coordinateSystem),void 0===fromCoordinateOrigin&&(normalizedParams.fromCoordinateOrigin=coordinateOrigin),coordinateSystem===constants.a.LNGLAT&&viewport.zoom>=viewport_uniforms.a&&(normalizedParams.coordinateSystem=constants.a.LNGLAT_OFFSETS,normalizedParams.coordinateOrigin=[Math.fround(viewport.longitude),Math.fround(viewport.latitude)]),normalizedParams}(params),viewport=_normalizeParameters.viewport,coordinateSystem=_normalizeParameters.coordinateSystem,coordinateOrigin=_normalizeParameters.coordinateOrigin,modelMatrix=_normalizeParameters.modelMatrix,fromCoordinateSystem=_normalizeParameters.fromCoordinateSystem,fromCoordinateOrigin=_normalizeParameters.fromCoordinateOrigin;switch(coordinateSystem){case constants.a.LNGLAT_OFFSETS:case constants.a.METER_OFFSETS:var worldPosition=getWorldPosition(position,{viewport:viewport,modelMatrix:modelMatrix,coordinateSystem:fromCoordinateSystem,coordinateOrigin:fromCoordinateOrigin,offsetMode:!0}),originWorld=lngLatZToWorldPosition(coordinateOrigin,viewport,!0);return vec3.h(worldPosition,worldPosition,originWorld),worldPosition;case constants.a.LNGLAT:case constants.a.LNGLAT_DEPRECATED:case constants.a.IDENTITY:default:return getWorldPosition(position,{viewport:viewport,modelMatrix:modelMatrix,coordinateSystem:fromCoordinateSystem,coordinateOrigin:fromCoordinateOrigin,offsetMode:!1})}}var lifecycle_constants=__webpack_require__(111),iterable_utils=__webpack_require__(90),TYPE_DEFINITIONS={boolean:{validate:function validate(value,propType){return!0},equal:function equal(value1,value2,propType){return Boolean(value1)===Boolean(value2)}},number:{validate:function validate(value,propType){return Number.isFinite(value)&&(!("max"in propType)||value<=propType.max)&&(!("min"in propType)||value>=propType.min)}},color:{validate:function validate(value,propType){return isArray(value)&&(3===value.length||4===value.length)},equal:function equal(value1,value2,propType){return arrayEqual(value1,value2)}},accessor:{validate:function validate(value,propType){var valueType=getTypeOf(value);return"function"===valueType||valueType===getTypeOf(propType.value)},equal:function equal(value1,value2,propType){return"function"==typeof value2||arrayEqual(value1,value2)}},array:{validate:function validate(value,propType){return propType.optional&&!value||isArray(value)},equal:function equal(value1,value2,propType){return propType.compare?arrayEqual(value1,value2):value1===value2}},function:{validate:function validate(value,propType){return propType.optional&&!value||"function"==typeof value},equal:function equal(value1,value2,propType){return!propType.compare||value1===value2}}};function arrayEqual(array1,array2){if(array1===array2)return!0;if(!isArray(array1)||!isArray(array2))return!1;var len=array1.length;if(len!==array2.length)return!1;for(var i=0;i<len;i++)if(array1[i]!==array2[i])return!1;return!0}function parsePropType(name,propDef){switch(getTypeOf(propDef)){case"object":return normalizePropDefinition(name,propDef);case"array":return normalizePropDefinition(name,{type:"array",value:propDef,compare:!1});case"boolean":return normalizePropDefinition(name,{type:"boolean",value:propDef});case"number":return normalizePropDefinition(name,{type:"number",value:propDef});case"function":return normalizePropDefinition(name,{type:"function",value:propDef,compare:!0});default:return{name:name,type:"unknown",value:propDef}}}function normalizePropDefinition(name,propDef){return"type"in propDef?Object.assign({name:name},TYPE_DEFINITIONS[propDef.type],propDef):"value"in propDef?Object.assign({name:name,type:getTypeOf(propDef.value)},propDef):{name:name,type:"object",value:propDef}}function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)}function getTypeOf(value){return isArray(value)?"array":null===value?"null":Object(esm_typeof.a)(value)}function createProps(){for(var propTypeDefs=getPropsPrototypeAndTypes(this.constructor),propsPrototype=propTypeDefs.defaultProps,propsInstance=Object.create(propsPrototype,{_component:{enumerable:!1,value:this},_asyncPropOriginalValues:{enumerable:!1,value:{}},_asyncPropResolvedValues:{enumerable:!1,value:{}}}),i=0;i<arguments.length;++i)Object.assign(propsInstance,arguments[i]);var layerName=this.constructor.layerName,deprecatedProps=propTypeDefs.deprecatedProps;return checkDeprecatedProps(layerName,propsInstance,deprecatedProps),checkDeprecatedProps(layerName,propsInstance.updateTriggers,deprecatedProps),checkDeprecatedProps(layerName,propsInstance.transitions,deprecatedProps),Object(seer_integration.a)(propsInstance),Object.freeze(propsInstance),propsInstance}function checkDeprecatedProps(layerName,propsInstance,deprecatedProps){if(propsInstance)for(var name in deprecatedProps)if(create_props_hasOwnProperty(propsInstance,name)){var nameStr="".concat(layerName||"Layer",": ").concat(name),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=deprecatedProps[name][Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var newPropName=_step.value;create_props_hasOwnProperty(propsInstance,newPropName)||(propsInstance[newPropName]=propsInstance[name])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}log.a.deprecated(nameStr,deprecatedProps[name].join("/"))()}}function getPropsPrototypeAndTypes(componentClass){var props=getOwnProperty(componentClass,"_mergedDefaultProps");return props?{defaultProps:props,propTypes:getOwnProperty(componentClass,"_propTypes"),deprecatedProps:getOwnProperty(componentClass,"_deprecatedProps")}:function createPropsPrototypeAndTypes(componentClass){var parent=componentClass.prototype;if(!parent)return{defaultProps:{}};var parentClass=Object.getPrototypeOf(componentClass),parentPropDefs=parent&&getPropsPrototypeAndTypes(parentClass)||null,componentPropDefs=function parsePropTypes(propDefs){for(var propTypes={},defaultProps={},deprecatedProps={},_i=0,_Object$entries=Object.entries(propDefs);_i<_Object$entries.length;_i++){var _Object$entries$_i=Object(slicedToArray.a)(_Object$entries[_i],2),propName=_Object$entries$_i[0],propDef=_Object$entries$_i[1];if(propDef&&propDef.deprecatedFor)deprecatedProps[propName]=Array.isArray(propDef.deprecatedFor)?propDef.deprecatedFor:[propDef.deprecatedFor];else{var propType=parsePropType(propName,propDef);propTypes[propName]=propType,defaultProps[propName]=propType.value}}return{propTypes:propTypes,defaultProps:defaultProps,deprecatedProps:deprecatedProps}}(getOwnProperty(componentClass,"defaultProps")||{}),propTypes=Object.assign({},parentPropDefs&&parentPropDefs.propTypes,componentPropDefs.propTypes),defaultProps=function createPropsPrototype(props,parentProps,propTypes,componentClass){var defaultProps=Object.create(null);Object.assign(defaultProps,parentProps,props);var id=function getComponentName(componentClass){var componentName=getOwnProperty(componentClass,"layerName")||getOwnProperty(componentClass,"componentName");componentName||log.a.once(0,"".concat(componentClass.name,".componentName not specified"))();return componentName||componentClass.name}(componentClass);return delete props.id,Object.defineProperties(defaultProps,{id:{configurable:!1,writable:!0,value:id}}),function addAsyncPropsToPropPrototype(defaultProps,propTypes){var defaultValues={},descriptors={_asyncPropDefaultValues:{enumerable:!1,value:defaultValues},_asyncPropOriginalValues:{enumerable:!1,value:{}}};for(var propName in propTypes){var propType=propTypes[propName],name=propType.name,value=propType.value;propType.async&&(defaultValues[name]=value,descriptors[name]=getDescriptorForAsyncProp(name))}Object.defineProperties(defaultProps,descriptors)}(defaultProps,propTypes),defaultProps}(componentPropDefs.defaultProps,parentPropDefs&&parentPropDefs.defaultProps,propTypes,componentClass),deprecatedProps=Object.assign({},parentPropDefs&&parentPropDefs.deprecatedProps,componentPropDefs.deprecatedProps);return componentClass._mergedDefaultProps=defaultProps,componentClass._propTypes=propTypes,componentClass._deprecatedProps=deprecatedProps,{propTypes:propTypes,defaultProps:defaultProps,deprecatedProps:deprecatedProps}}(componentClass)}function getDescriptorForAsyncProp(name){return{configurable:!1,enumerable:!0,set:function set(newValue){"string"==typeof newValue||newValue instanceof Promise||Object(iterable_utils.b)(newValue)?this._asyncPropOriginalValues[name]=newValue:this._asyncPropResolvedValues[name]=newValue},get:function get(){if(this._asyncPropResolvedValues){if(name in this._asyncPropResolvedValues){var value=this._asyncPropResolvedValues[name];return"data"===name?value||this._asyncPropDefaultValues[name]:value}if(name in this._asyncPropOriginalValues){var state=this._component&&this._component.internalState;if(state&&state.hasAsyncProp(name))return state.getAsyncProp(name)}}return this._asyncPropDefaultValues[name]}}}function create_props_hasOwnProperty(object,prop){return Object.prototype.hasOwnProperty.call(object,prop)}function getOwnProperty(object,prop){return create_props_hasOwnProperty(object,prop)&&object[prop]}var regenerator=__webpack_require__(11),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(18);function _asyncIterator(iterable){var method;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(method=iterable[Symbol.asyncIterator]))return method.call(iterable);if(Symbol.iterator&&null!=(method=iterable[Symbol.iterator]))return method.call(iterable)}throw new TypeError("Object is not async iterable")}var EMPTY_PROPS=Object.freeze({}),component_state_ComponentState=function(){function ComponentState(){var component=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(classCallCheck.a)(this,ComponentState),this.component=component,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=EMPTY_PROPS,this.oldAsyncProps=null}var _resolveAsyncIterable2;return Object(createClass.a)(ComponentState,[{key:"getOldProps",value:function getOldProps(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function freezeAsyncOldProps(){if(!this.oldAsyncProps)for(var propName in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,propName,{enumerable:!0,value:this.oldProps[propName]})}},{key:"hasAsyncProp",value:function hasAsyncProp(propName){return propName in this.asyncProps}},{key:"getAsyncProp",value:function getAsyncProp(propName){var asyncProp=this.asyncProps[propName];return asyncProp&&asyncProp.resolvedValue}},{key:"isAsyncPropLoading",value:function isAsyncPropLoading(propName){var asyncProp=this.asyncProps[propName];return Boolean(asyncProp&&asyncProp.pendingLoadCount>0&&asyncProp.pendingLoadCount!==asyncProp.resolvedLoadCount)}},{key:"setAsyncProps",value:function setAsyncProps(props){var resolvedValues=props._asyncPropResolvedValues||{},originalValues=props._asyncPropOriginalValues||props,defaultValues=props._asyncPropDefaultValues||{};for(var propName in resolvedValues){var value=resolvedValues[propName];this._createAsyncPropData(propName,value,defaultValues[propName]),this._updateAsyncProp(propName,value)}for(var _propName in originalValues){var _value2=originalValues[_propName];this._createAsyncPropData(_propName,_value2,defaultValues[_propName]),this._updateAsyncProp(_propName,_value2)}}},{key:"_updateAsyncProp",value:function _updateAsyncProp(propName,value){if(this._didAsyncInputValueChange(propName,value)){if("string"==typeof value){var fetch=this.layer&&this.layer.props.fetch;fetch&&(value=fetch(value,{propName:propName,layer:this.layer}))}value instanceof Promise?this._watchPromise(propName,value):Object(iterable_utils.b)(value)?this._resolveAsyncIterable(propName,value):this._setPropValue(propName,value)}}},{key:"_didAsyncInputValueChange",value:function _didAsyncInputValueChange(propName,value){var asyncProp=this.asyncProps[propName];return value!==asyncProp.lastValue&&(asyncProp.lastValue=value,!0)}},{key:"_setPropValue",value:function _setPropValue(propName,value){var asyncProp=this.asyncProps[propName];asyncProp.value=value,asyncProp.resolvedValue=value,asyncProp.pendingLoadCount++,asyncProp.resolvedLoadCount=asyncProp.pendingLoadCount}},{key:"_setAsyncPropValue",value:function _setAsyncPropValue(propName,value,loadCount){var asyncProp=this.asyncProps[propName];asyncProp&&loadCount>=asyncProp.resolvedLoadCount&&(Object(assert.a)(void 0!==value),this.freezeAsyncOldProps(),asyncProp.resolvedValue=value,asyncProp.resolvedLoadCount=loadCount,this.onAsyncPropUpdated(propName,value))}},{key:"_watchPromise",value:function _watchPromise(propName,promise){var _this=this,asyncProp=this.asyncProps[propName];asyncProp.pendingLoadCount++;var loadCount=asyncProp.pendingLoadCount;promise.then((function(data){data=_this._postProcessValue(propName,data),_this._setAsyncPropValue(propName,data,loadCount);var onDataLoad=_this.layer&&_this.layer.props.onDataLoad;"data"===propName&&onDataLoad&&onDataLoad(data,{propName:propName,layer:_this.layer})})).catch((function(error){return log.a.error(error)()}))}},{key:"_resolveAsyncIterable",value:(_resolveAsyncIterable2=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(propName,iterable){var asyncProp,loadCount,data,count,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,_value,chunk,onDataLoad;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:"data"!==propName&&this._setPropValue(propName,iterable),(asyncProp=this.asyncProps[propName]).pendingLoadCount++,loadCount=asyncProp.pendingLoadCount,data=[],count=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_context.prev=8,_iterator=_asyncIterator(iterable);case 10:return _context.next=12,_iterator.next();case 12:return _step=_context.sent,_iteratorNormalCompletion=_step.done,_context.next=16,_step.value;case 16:if(_value=_context.sent,_iteratorNormalCompletion){_context.next=26;break}chunk=_value,data=this._postProcessValue(propName,chunk,data),Object.defineProperty(data,"__diff",{enumerable:!1,value:[{startRow:count,endRow:data.length}]}),count=data.length,this._setAsyncPropValue(propName,data,loadCount);case 23:_iteratorNormalCompletion=!0,_context.next=10;break;case 26:_context.next=32;break;case 28:_context.prev=28,_context.t0=_context.catch(8),_didIteratorError=!0,_iteratorError=_context.t0;case 32:if(_context.prev=32,_context.prev=33,_iteratorNormalCompletion||null==_iterator.return){_context.next=37;break}return _context.next=37,_iterator.return();case 37:if(_context.prev=37,!_didIteratorError){_context.next=40;break}throw _iteratorError;case 40:return _context.finish(37);case 41:return _context.finish(32);case 42:(onDataLoad=this.layer&&this.layer.props.onDataLoad)&&onDataLoad(data,{propName:propName,layer:this.layer});case 44:case"end":return _context.stop()}}),_callee,this,[[8,28,32,42],[33,,37,41]])}))),function _resolveAsyncIterable(_x,_x2){return _resolveAsyncIterable2.apply(this,arguments)})},{key:"_postProcessValue",value:function _postProcessValue(propName,value,previousValue){var dataTransform=(this.component?this.component.props:{}).dataTransform;return"data"!==propName?value:dataTransform?dataTransform(value,previousValue):previousValue?previousValue.concat(value):value}},{key:"_createAsyncPropData",value:function _createAsyncPropData(propName,value,defaultValue){this.asyncProps[propName]||(this.asyncProps[propName]={lastValue:null,resolvedValue:defaultValue,pendingLoadCount:0,resolvedLoadCount:0})}}]),ComponentState}(),counter=0,component_Component=function(){function Component(){Object(classCallCheck.a)(this,Component),this.props=createProps.apply(this,arguments),this.id=this.props.id,this.count=counter++,this.lifecycle=lifecycle_constants.a.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return Object(createClass.a)(Component,[{key:"clone",value:function clone(newProps){var props=this.props,asyncProps={};for(var key in props._asyncPropDefaultValues)key in props._asyncPropResolvedValues?asyncProps[key]=props._asyncPropResolvedValues[key]:key in props._asyncPropOriginalValues&&(asyncProps[key]=props._asyncPropOriginalValues[key]);return new this.constructor(Object.assign({},props,asyncProps,newProps))}},{key:"_initState",value:function _initState(){this.internalState=new component_state_ComponentState({})}},{key:"stats",get:function get(){return this.internalState.stats}}]),Component}();component_Component.componentName="Component",component_Component.defaultProps={};var layer_state_LayerState=function(_ComponentState){function LayerState(_ref){var _this,attributeManager=_ref.attributeManager,layer=_ref.layer;return Object(classCallCheck.a)(this,LayerState),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(LayerState).call(this,layer))).attributeManager=attributeManager,_this.model=null,_this.needsRedraw=!0,_this.subLayers=null,_this}return Object(inherits.a)(LayerState,_ComponentState),Object(createClass.a)(LayerState,[{key:"layer",get:function get(){return this.component},set:function set(layer){this.component=layer}}]),LayerState}(component_state_ComponentState),isFetchResponse=function isFetchResponse(x){return"undefined"!=typeof Response&&x instanceof Response||x.arrayBuffer&&x.text&&x.json},isFileReadable=function isFileReadable(x){return function isFile(x){return"undefined"!=typeof File&&x instanceof File}(x)||function isBlob(x){return"undefined"!=typeof Blob&&x instanceof Blob}(x)},pathPrefix="",fileAliases={};function resolvePath(filename){for(var alias in fileAliases)if(filename.startsWith(alias)){var replacement=fileAliases[alias];return filename.replace(alias,replacement)}return filename+=pathPrefix}var utils_assert=__webpack_require__(81),fetch_file_browser_FileReadableResponse=function(){function FileReadableResponse(fileOrBlob){Object(classCallCheck.a)(this,FileReadableResponse),this._fileOrBlob=fileOrBlob,this.bodyUsed=!1}var _json,_text,_arrayBuffer;return Object(createClass.a)(FileReadableResponse,[{key:"url",value:function url(){return this._fileOrBlob.name||""}},{key:"arrayBuffer",value:(_arrayBuffer=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(){var _this$_getFileReader,reader,promise;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _this$_getFileReader=this._getFileReader(),reader=_this$_getFileReader.reader,promise=_this$_getFileReader.promise,reader.readAsArrayBuffer(this._fileOrBlob),_context.abrupt("return",promise);case 3:case"end":return _context.stop()}}),_callee,this)}))),function arrayBuffer(){return _arrayBuffer.apply(this,arguments)})},{key:"text",value:(_text=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(){var _this$_getFileReader2,reader,promise;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _this$_getFileReader2=this._getFileReader(),reader=_this$_getFileReader2.reader,promise=_this$_getFileReader2.promise,reader.readAsText(this._fileOrBlob),_context2.abrupt("return",promise);case 3:case"end":return _context2.stop()}}),_callee2,this)}))),function text(){return _text.apply(this,arguments)})},{key:"json",value:(_json=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee3(){var text;return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,this.text();case 2:return text=_context3.sent,_context3.abrupt("return",JSON.parse(text));case 4:case"end":return _context3.stop()}}),_callee3,this)}))),function json(){return _json.apply(this,arguments)})},{key:"_getFileReader",value:function _getFileReader(){var reader;Object(utils_assert.a)(!this.bodyUsed),this.bodyUsed=!0;var promise=new Promise((function(resolve,reject){try{(reader=new FileReader).onerror=function(error){return reject(new Error(error))},reader.onabort=function(){return reject(new Error("Read aborted."))},reader.onload=function(){return resolve(reader.result)}}catch(error){reject(error)}}));return{reader:reader,promise:promise}}},{key:"headers",get:function get(){return new Headers({"Content-Length":this._fileOrBlob.size,"Content-Type":this._fileOrBlob.type})}},{key:"ok",get:function get(){return!0}},{key:"status",get:function get(){return 200}}]),FileReadableResponse}();function fetchFileReadable(fileOrBlob,options){return Promise.resolve(new fetch_file_browser_FileReadableResponse(fileOrBlob,options))}function fetchFile(_x,_x2){return _fetchFile.apply(this,arguments)}function _fetchFile(){return(_fetchFile=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(url,options){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!isFileReadable(url)){_context.next=2;break}return _context.abrupt("return",fetchFileReadable(url,options));case 2:return url=resolvePath(url),_context.abrupt("return",fetch(url,options));case 4:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}var normalize_loader=__webpack_require__(82),null_log_NullLog=function(){function NullLog(){Object(classCallCheck.a)(this,NullLog)}return Object(createClass.a)(NullLog,[{key:"log",value:function log(){}},{key:"info",value:function info(){}},{key:"warn",value:function warn(){}},{key:"error",value:function error(){}}]),NullLog}();function mergeLoaderAndUserOptions(options,loader){return null===(options=Object.assign({},loader&&loader.DEFAULT_OPTIONS,loader&&loader.defaultOptions,loader&&loader.options,options,{dataType:"arraybuffer"})).log&&(options.log=new null_log_NullLog),"log"in options||(options.log=console),options}var register_loaders=__webpack_require__(431),EXT_PATTERN=/[^.]+$/;function selectLoader(loaders){var url=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",data=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,_ref$nothrow=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).nothrow,nothrow=void 0!==_ref$nothrow&&_ref$nothrow;if(url=url||"",loaders&&!Array.isArray(loaders)){var _loader=loaders;return Object(normalize_loader.b)(_loader),_loader}(function normalizeLoaders(loaders){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=loaders[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var loader=_step.value;Object(normalize_loader.b)(loader)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}})(loaders=loaders||Object(register_loaders.a)()),url=url.replace(/\?.*/,"");var loader=null;if(!(loader=(loader=loader||function findLoaderByUrl(loaders,url){var match=url.match(EXT_PATTERN),extension=match&&match[0];return extension&&function findLoaderByExtension(loaders,extension){extension=extension.toLowerCase();var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=loaders[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var loader=_step2.value,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=loader.extensions[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){if(_step3.value.toLowerCase()===extension)return loader}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return null}(loaders,extension)}(loaders,url))||function findLoaderByExamingInitialData(loaders,data){if(!data)return null;var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=loaders[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var loader=_step4.value;if("string"==typeof data){if(testText(data,loader))return loader}else if(ArrayBuffer.isView(data)){if(testBinary(data.buffer,data.byteOffset,loader))return loader}else if(data instanceof ArrayBuffer){if(testBinary(data,0,loader))return loader}}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}return null}(loaders,data))){if(nothrow)return null;throw new Error("No valid loader found for ".concat(url))}return loader}function testText(data,loader){return loader.testText&&loader.testText(data)}function testBinary(data,byteOffset,loader){switch(Array.isArray(loader.test)?"array":Object(esm_typeof.a)(loader.test)){case"function":return loader.test(data,loader);case"string":case"array":return(Array.isArray(loader.test)?loader.test:[loader.test]).some((function(test){return test===function getMagicString(arrayBuffer,byteOffset,length){if(arrayBuffer.byteLength<=byteOffset+length)return"";for(var dataView=new DataView(arrayBuffer),magic="",i=0;i<length;i++)magic+=String.fromCharCode(dataView.getUint8(byteOffset+i));return magic}(data,byteOffset,test.length)}));default:return!1}}function _AwaitValue(value){this.wrapped=value}function AsyncGenerator(gen){var front,back;function resume(key,arg){try{var result=gen[key](arg),value=result.value,wrappedAwait=value instanceof _AwaitValue;Promise.resolve(wrappedAwait?value.wrapped:value).then((function(arg){wrappedAwait?resume("next",arg):settle(result.done?"return":"normal",arg)}),(function(err){resume("throw",err)}))}catch(err){settle("throw",err)}}function settle(type,value){switch(type){case"return":front.resolve({value:value,done:!0});break;case"throw":front.reject(value);break;default:front.resolve({value:value,done:!1})}(front=front.next)?resume(front.key,front.arg):back=null}this._invoke=function send(key,arg){return new Promise((function(resolve,reject){var request={key:key,arg:arg,resolve:resolve,reject:reject,next:null};back?back=back.next=request:(front=back=request,resume(key,arg))}))},"function"!=typeof gen.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),AsyncGenerator.prototype.next=function(arg){return this._invoke("next",arg)},AsyncGenerator.prototype.throw=function(arg){return this._invoke("throw",arg)},AsyncGenerator.prototype.return=function(arg){return this._invoke("return",arg)};__webpack_require__(260);function checkFetchResponseStatus(_x){return _checkFetchResponseStatus.apply(this,arguments)}function _checkFetchResponseStatus(){return(_checkFetchResponseStatus=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(response){var errorMessage,text;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(response.ok){_context.next=12;break}return errorMessage="fetch failed ".concat(response.status," "),_context.prev=2,_context.next=5,response.text();case 5:text=_context.sent,errorMessage+=text,_context.next=11;break;case 9:_context.prev=9,_context.t0=_context.catch(2);case 11:throw new Error(errorMessage);case 12:case"end":return _context.stop()}}),_callee,null,[[2,9]])})))).apply(this,arguments)}var ERR_DATA="Cannot convert supplied data type";function getUrlFromData(data,url){return isFetchResponse(data)?url=url||data.url:isFileReadable(url)&&(url=url.name),"string"==typeof url?url.replace(/\?.*/,""):url}function getArrayBufferOrStringFromDataSync(data,loader){if(loader.text&&"string"==typeof data)return data;if(data instanceof ArrayBuffer||ArrayBuffer.isView(data)){var arrayBuffer=data.buffer||data;return loader.text&&!loader.binary?new TextDecoder("utf8").decode(arrayBuffer):arrayBuffer}throw new Error(ERR_DATA)}function getArrayBufferOrStringFromData(_x,_x2){return _getArrayBufferOrStringFromData.apply(this,arguments)}function _getArrayBufferOrStringFromData(){return(_getArrayBufferOrStringFromData=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(data,loader){var isArrayBuffer;return regenerator_default.a.wrap((function _callee$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,data;case 2:if(data=_context2.sent,isArrayBuffer=data instanceof ArrayBuffer||ArrayBuffer.isView(data),"string"!=typeof data&&!isArrayBuffer){_context2.next=6;break}return _context2.abrupt("return",getArrayBufferOrStringFromDataSync(data,loader));case 6:if(!isFileReadable(data)){_context2.next=10;break}return _context2.next=9,fetchFileReadable(data);case 9:data=_context2.sent;case 10:if(!isFetchResponse(data)){_context2.next=23;break}return _context2.next=13,checkFetchResponseStatus(data);case 13:if(!loader.binary){_context2.next=19;break}return _context2.next=16,data.arrayBuffer();case 16:_context2.t0=_context2.sent,_context2.next=22;break;case 19:return _context2.next=21,data.text();case 21:_context2.t0=_context2.sent;case 22:return _context2.abrupt("return",_context2.t0);case 23:throw new Error(ERR_DATA);case 24:case"end":return _context2.stop()}}),_callee)})))).apply(this,arguments)}function get_loader_context_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function getLoaderContext(context,options){return function get_loader_context_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?get_loader_context_ownKeys(source,!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):get_loader_context_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({fetch:"undefined"!=typeof window&&window.fetch},context)}var to_array_buffer_ignored_=__webpack_require__(312);function toArrayBuffer(data){if(to_array_buffer_ignored_.toArrayBuffer&&(data=Object(to_array_buffer_ignored_.toArrayBuffer)(data)),data instanceof ArrayBuffer)return data;if(ArrayBuffer.isView(data))return data.buffer;if("string"==typeof data){var text=data;return(new TextEncoder).encode(text).buffer}return Object(utils_assert.a)(!1)}function getTransferList(object){var recursive=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],transfers=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(object){if(object instanceof ArrayBuffer)transfers.push(object);else if(object.buffer&&object.buffer instanceof ArrayBuffer)transfers.push(object.buffer);else if(recursive&&"object"===Object(esm_typeof.a)(object))for(var key in object)getTransferList(object[key],recursive,transfers)}else;return transfers}var workerURLCache=new Map;var worker_thread_count=0;function defaultOnMessage(_ref){var data=_ref.data;(0,_ref.resolve)(data)}var worker_thread_WorkerThread=function(){function WorkerThread(_ref2){var source=_ref2.source,_ref2$name=_ref2.name,name=void 0===_ref2$name?"web-worker-".concat(worker_thread_count++):_ref2$name,onMessage=_ref2.onMessage;Object(classCallCheck.a)(this,WorkerThread);var url=function getWorkerURL(workerSource){if(Object(utils_assert.a)("string"==typeof workerSource,"worker source"),workerSource.startsWith("url(")&&workerSource.endsWith(")"))return workerSource.match(/^url\((.*)\)$/)[1];var workerURL=workerURLCache.get(workerSource);if(!workerURL){var blob=new Blob([workerSource],{type:"application/javascript"});workerURL=URL.createObjectURL(blob),workerURLCache.set(workerSource,workerURL)}return workerURL}(source);this.worker=new Worker(url,{name:name}),this.name=name,this.onMessage=onMessage||defaultOnMessage}var _process;return Object(createClass.a)(WorkerThread,[{key:"process",value:(_process=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(data){var _this=this;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve,reject){_this.worker.onmessage=function(event){return _this.onMessage({worker:_this.worker,data:event.data,resolve:resolve,reject:reject})},_this.worker.onerror=function(error){return reject(error)};var transferList=getTransferList(data);_this.worker.postMessage(data,transferList)})));case 1:case"end":return _context.stop()}}),_callee)}))),function process(_x){return _process.apply(this,arguments)})},{key:"destroy",value:function destroy(){this.worker.terminate(),this.worker=null}}]),WorkerThread}(),worker_pool_WorkerPool=function(){function WorkerPool(_ref){var source=_ref.source,_ref$name=_ref.name,name=void 0===_ref$name?"unnamed":_ref$name,_ref$maxConcurrency=_ref.maxConcurrency,maxConcurrency=void 0===_ref$maxConcurrency?1:_ref$maxConcurrency,onMessage=_ref.onMessage,_ref$onDebug=_ref.onDebug,onDebug=void 0===_ref$onDebug?function(){}:_ref$onDebug;Object(classCallCheck.a)(this,WorkerPool),this.source=source,this.name=name,this.maxConcurrency=maxConcurrency,this.onMessage=onMessage,this.onDebug=onDebug,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1}var _process;return Object(createClass.a)(WorkerPool,[{key:"destroy",value:function destroy(){this.idleQueue.forEach((function(worker){return worker.destroy()})),this.isDestroyed=!0}},{key:"process",value:(_process=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(data,jobName){var _this=this;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve,reject){_this.jobQueue.push({data:data,jobName:jobName,resolve:resolve,reject:reject}),_this._startQueuedJob()})));case 1:case"end":return _context.stop()}}),_callee)}))),function process(_x,_x2){return _process.apply(this,arguments)})},{key:"_startQueuedJob",value:function _startQueuedJob(){var _this2=this;if(this.jobQueue.length){var worker=this._getAvailableWorker();if(worker){var job=this.jobQueue.shift();this.onDebug({message:"processing",worker:worker.name,job:job.jobName,backlog:this.jobQueue.length}),worker.process(job.data).then((function(result){return job.resolve(result)})).catch((function(error){return job.reject(error)})).then((function(){return _this2._onWorkerDone(worker)}))}}}},{key:"_onWorkerDone",value:function _onWorkerDone(worker){this.isDestroyed?worker.destroy():(this.idleQueue.push(worker),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function _getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var name="".concat(this.name.toLowerCase(),"-worker-").concat(this.count,"-of-").concat(this.maxConcurrency);return new worker_thread_WorkerThread({source:this.source,onMessage:this.onMessage,name:name})}return null}}]),WorkerPool}(),DEFAULT_MAX_CONCURRENCY=5,worker_farm_WorkerFarm=function(){function WorkerFarm(_ref){var _ref$maxConcurrency=_ref.maxConcurrency,maxConcurrency=void 0===_ref$maxConcurrency?DEFAULT_MAX_CONCURRENCY:_ref$maxConcurrency,onMessage=_ref.onMessage,_ref$onDebug=_ref.onDebug,onDebug=void 0===_ref$onDebug?function(){}:_ref$onDebug;Object(classCallCheck.a)(this,WorkerFarm),this.maxConcurrency=maxConcurrency,this.onMessage=onMessage,this.onDebug=onDebug,this.workerPools=new Map}var _process;return Object(createClass.a)(WorkerFarm,[{key:"setProps",value:function setProps(props){"maxConcurrency"in props&&(this.maxConcurrency=props.maxConcurrency),"onDebug"in props&&(this.onDebug=props.onDebug)}},{key:"destroy",value:function destroy(){this.workerPools.forEach((function(workerPool){return workerPool.destroy()}))}},{key:"process",value:(_process=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(workerSource,workerName,data){var workerPool;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return workerPool=this._getWorkerPool(workerSource,workerName),_context.abrupt("return",workerPool.process(data));case 2:case"end":return _context.stop()}}),_callee,this)}))),function process(_x,_x2,_x3){return _process.apply(this,arguments)})},{key:"_getWorkerPool",value:function _getWorkerPool(workerSource,workerName){var workerPool=this.workerPools.get(workerName);return workerPool||(workerPool=new worker_pool_WorkerPool({source:workerSource,name:workerName,onMessage:this.onMessage,maxConcurrency:this.maxConcurrency,onDebug:this.onDebug}),this.workerPools.set(workerName,workerPool)),workerPool}}]),WorkerFarm}(),_workerFarm=null;function onWorkerMessage(_x){return _onWorkerMessage.apply(this,arguments)}function _onWorkerMessage(){return(_onWorkerMessage=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(_ref){var worker,data,resolve,reject,result;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:worker=_ref.worker,data=_ref.data,resolve=_ref.resolve,reject=_ref.reject,_context.t0=data.type,_context.next="done"===_context.t0?4:"process"===_context.t0?6:"error"===_context.t0?17:19;break;case 4:return resolve(data.result),_context.abrupt("break",19);case 6:return _context.prev=6,_context.next=9,parse(data.arraybuffer,data.options,data.url);case 9:result=_context.sent,worker.postMessage({type:"process-done",id:data.id,result:result},getTransferList(result)),_context.next=16;break;case 13:_context.prev=13,_context.t1=_context.catch(6),worker.postMessage({type:"process-error",id:data.id,message:_context.t1.message});case 16:return _context.abrupt("break",19);case 17:return reject(data.message),_context.abrupt("break",19);case 19:case"end":return _context.stop()}}),_callee,null,[[6,13]])})))).apply(this,arguments)}function parseWithWorker(workerSource,workerName,data){var options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},workerFarm=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],function getWorkerFarm(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},props={};return options.maxConcurrency&&(props.maxConcurrency=options.maxConcurrency),options.onDebug&&(props.onDebug=options.onDebug),_workerFarm||(_workerFarm=new worker_farm_WorkerFarm({onMessage:onWorkerMessage})),_workerFarm.setProps(props),_workerFarm}(options));return options=JSON.parse(JSON.stringify(options)),workerFarm.process(workerSource,"loaders.gl-".concat(workerName),{arraybuffer:toArrayBuffer(data),options:options,source:"loaders.gl",type:"process"})}function parse(_x,_x2,_x3,_x4){return _parse.apply(this,arguments)}function _parse(){return(_parse=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(data,loaders,options,url){var autoUrl,loader,context;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return!loaders||Array.isArray(loaders)||Object(normalize_loader.a)(loaders)||(url=options,options=loaders,loaders=null),options=options||{},autoUrl=getUrlFromData(data,url),loader=selectLoader(loaders,autoUrl,data),options=mergeLoaderAndUserOptions(options,loader),context=getLoaderContext({url:autoUrl,parse:parse}),_context.next=8,parseWithLoader(loader,data,options,context);case 8:return _context.abrupt("return",_context.sent);case 9:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function parseWithLoader(_x5,_x6,_x7,_x8){return _parseWithLoader.apply(this,arguments)}function _parseWithLoader(){return(_parseWithLoader=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(loader,data,options,context){return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,getArrayBufferOrStringFromData(data,loader);case 2:if(data=_context2.sent,!loader.parseTextSync||"string"!=typeof data){_context2.next=6;break}return options.dataType="text",_context2.abrupt("return",loader.parseTextSync(data,options,context,loader));case 6:if(!loader.parse){_context2.next=10;break}return _context2.next=9,loader.parse(data,options,context,loader);case 9:return _context2.abrupt("return",_context2.sent);case 10:if(!loader.parseSync){_context2.next=12;break}return _context2.abrupt("return",loader.parseSync(data,options,context,loader));case 12:if(!loader.worker){_context2.next=16;break}return _context2.next=15,parseWithWorker(loader.worker,loader.name,data,options,context,loader);case 15:return _context2.abrupt("return",_context2.sent);case 16:return _context2.abrupt("return",Object(utils_assert.a)(!1));case 17:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}function _load(){return(_load=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(url,loaders,options){var autoUrl,loader,loaderOptions,data;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(Array.isArray(loaders)||Object(normalize_loader.a)(loaders)||(options=loaders,loaders=null),autoUrl=isFileReadable(url)?url.name:url,!(loader=selectLoader(loaders,autoUrl,null,{nothrow:!0}))){_context2.next=9;break}if(!loader.loadAndParse){_context2.next=9;break}return loaderOptions=mergeLoaderAndUserOptions(options,loader),_context2.next=8,loader.loadAndParse(url,loaderOptions);case 8:return _context2.abrupt("return",_context2.sent);case 9:if(!isFileReadable(data=url)&&"string"!=typeof data){_context2.next=14;break}return _context2.next=13,fetchFile(url,options);case 13:data=_context2.sent;case 14:return _context2.abrupt("return",parse(data,loaders,options,url));case 15:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}__webpack_require__.d(__webpack_exports__,"a",(function(){return layer_Layer}));var EMPTY_ARRAY=Object.freeze([]),pickingColorCache=new Uint8ClampedArray(0),layer_defaultProps={data:{type:"data",value:EMPTY_ARRAY,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function value(data){return data&&data.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function value(url,_ref){return function load(_x4,_x5,_x6){return _load.apply(this,arguments)}(url,_ref.layer.getLoadOptions())},compare:!1},updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:.8},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:constants.a.LNGLAT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},uniforms:{},extensions:[],framebuffer:null,animation:null,getPolygonOffset:{type:"function",value:function value(_ref2){return[0,100*-_ref2.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"color",value:[0,0,128,128]}},layer_Layer=function(_Component){function Layer(){return Object(classCallCheck.a)(this,Layer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Layer).apply(this,arguments))}return Object(inherits.a)(Layer,_Component),Object(createClass.a)(Layer,[{key:"toString",value:function toString(){var className=this.constructor.layerName||this.constructor.name;return"".concat(className,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function setState(updateObject){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,updateObject),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var redraw=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=redraw)}},{key:"setNeedsUpdate",value:function setNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(opts)}},{key:"needsUpdate",value:function needsUpdate(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function hasUniformTransition(){return this.internalState.uniformTransitions.active}},{key:"isPickable",value:function isPickable(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getSingleModel",value:function getSingleModel(){return this.state&&this.state.model}},{key:"getAttributeManager",value:function getAttributeManager(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function getCurrentLayer(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function getLoadOptions(){return this.props.loadOptions}},{key:"getFirstObject",value:function getFirstObject(){var data=this.props.data,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=data[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){return _step.value}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null}},{key:"project",value:function project(xyz){var viewport=this.context.viewport,worldPosition=getWorldPosition(xyz,{viewport:viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),_worldToPixels=Object(web_mercator_utils.k)(worldPosition,viewport.pixelProjectionMatrix),_worldToPixels2=Object(slicedToArray.a)(_worldToPixels,3),x=_worldToPixels2[0],y=_worldToPixels2[1],z=_worldToPixels2[2];return 2===xyz.length?[x,y]:[x,y,z]}},{key:"unproject",value:function unproject(xy){var viewport=this.context.viewport;return Object(assert.a)(Array.isArray(xy)),viewport.unproject(xy)}},{key:"projectPosition",value:function projectPosition(xyz){return Object(assert.a)(Array.isArray(xyz)),project_functions_projectPosition(xyz,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"projectFlat",value:function projectFlat(lngLat){log.a.deprecated("layer.projectFlat","layer.projectPosition")();var viewport=this.context.viewport;return Object(assert.a)(Array.isArray(lngLat)),viewport.projectFlat(lngLat)}},{key:"unprojectFlat",value:function unprojectFlat(xy){log.a.deprecated("layer.unprojectFlat")();var viewport=this.context.viewport;return Object(assert.a)(Array.isArray(xy)),viewport.unprojectFlat(xy)}},{key:"use64bitPositions",value:function use64bitPositions(){return this.props.coordinateSystem===constants.a.LNGLAT||this.props.coordinateSystem===constants.a.IDENTITY}},{key:"onHover",value:function onHover(info,pickingEvent){return!!this.props.onHover&&this.props.onHover(info,pickingEvent)}},{key:"onClick",value:function onClick(info,pickingEvent){return!!this.props.onClick&&this.props.onClick(info,pickingEvent)}},{key:"nullPickingColor",value:function nullPickingColor(){return[0,0,0]}},{key:"encodePickingColor",value:function encodePickingColor(i){var target=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(assert.a)(i<16777215,"index out of picking color range"),target[0]=i+1&255,target[1]=i+1>>8&255,target[2]=i+1>>8>>8&255,target}},{key:"decodePickingColor",value:function decodePickingColor(color){Object(assert.a)(color instanceof Uint8Array);var _color=Object(slicedToArray.a)(color,3);return _color[0]+256*_color[1]+65536*_color[2]-1}},{key:"initializeState",value:function initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function getShaders(shaders){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.props.extensions[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var extension=_step2.value;shaders=mergeShaders(shaders,extension.getShaders.call(this,extension))}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return shaders}},{key:"shouldUpdateState",value:function shouldUpdateState(_ref3){_ref3.oldProps,_ref3.props,_ref3.context;return _ref3.changeFlags.propsOrDataChanged}},{key:"updateState",value:function updateState(_ref4){_ref4.oldProps,_ref4.props,_ref4.context;var changeFlags=_ref4.changeFlags,attributeManager=this.getAttributeManager();if(changeFlags.dataChanged&&attributeManager){var dataChanged=changeFlags.dataChanged;if(Array.isArray(dataChanged)){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=dataChanged[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var dataRange=_step3.value;attributeManager.invalidateAll(dataRange)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}else attributeManager.invalidateAll()}}},{key:"finalizeState",value:function finalizeState(){var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){_step4.value.delete()}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}var attributeManager=this.getAttributeManager();attributeManager&&attributeManager.finalize(),this.internalState.uniformTransitions.clear()}},{key:"draw",value:function draw(opts){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){_step5.value.draw(opts)}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{_iteratorNormalCompletion5||null==_iterator5.return||_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}},{key:"getPickingInfo",value:function getPickingInfo(_ref5){var info=_ref5.info,index=(_ref5.mode,info.index);return index>=0&&Array.isArray(this.props.data)&&(info.object=this.props.data[index]),info}},{key:"invalidateAttribute",value:function invalidateAttribute(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",diffReason=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",attributeManager=this.getAttributeManager();attributeManager&&("all"===name?(log.a.log(1,"updateTriggers invalidating all attributes: ".concat(diffReason))(),attributeManager.invalidateAll()):(log.a.log(1,"updateTriggers invalidating attribute ".concat(name,": ").concat(diffReason))(),attributeManager.invalidate(name)))}},{key:"updateAttributes",value:function updateAttributes(changedAttributes){var _iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var model=_step6.value;this._setModelAttributes(model,changedAttributes)}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{_iteratorNormalCompletion6||null==_iterator6.return||_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}}},{key:"_updateAttributes",value:function _updateAttributes(props){var attributeManager=this.getAttributeManager();if(attributeManager){var numInstances=this.getNumInstances(props),bufferLayout=this.getBufferLayout(props);attributeManager.update({data:props.data,numInstances:numInstances,bufferLayout:bufferLayout,props:props,transitions:props.transitions,buffers:props,context:this,ignoreUnknownAttributes:!0});var changedAttributes=attributeManager.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(changedAttributes)}}},{key:"_updateAttributeTransition",value:function _updateAttributeTransition(){var attributeManager=this.getAttributeManager();attributeManager&&attributeManager.updateTransition()}},{key:"_updateUniformTransition",value:function _updateUniformTransition(){var uniformTransitions=this.internalState.uniformTransitions;if(uniformTransitions.active){var propsInTransition=uniformTransitions.update(),props=Object.create(this.props);for(var key in propsInTransition)Object.defineProperty(props,key,{value:propsInTransition[key]});return props}return this.props}},{key:"calculateInstancePickingColors",value:function calculateInstancePickingColors(attribute,_ref6){var numInstances=_ref6.numInstances,startRow=_ref6.startRow,endRow=_ref6.endRow,value=attribute.value,size=attribute.size,cacheSize=pickingColorCache.length/size;if(cacheSize<numInstances){var newPickingColorCache=new Uint8ClampedArray(numInstances*size);newPickingColorCache.set(pickingColorCache);for(var pickingColor=[],i=cacheSize;i<numInstances;i++)this.encodePickingColor(i,pickingColor),newPickingColorCache[i*size+0]=pickingColor[0],newPickingColorCache[i*size+1]=pickingColor[1],newPickingColorCache[i*size+2]=pickingColor[2];pickingColorCache=newPickingColorCache}endRow=Math.min(endRow,numInstances),value.set(pickingColorCache.subarray(startRow*size,endRow*size),startRow*size)}},{key:"_setModelAttributes",value:function _setModelAttributes(model,changedAttributes){var shaderAttributes={},excludeAttributes=model.userData.excludeAttributes||{};for(var attributeName in changedAttributes)excludeAttributes[attributeName]||Object.assign(shaderAttributes,changedAttributes[attributeName].getShaderAttributes());model.setAttributes(shaderAttributes)}},{key:"clearPickingColor",value:function clearPickingColor(color){var _this$getAttributeMan=this.getAttributeManager().attributes,pickingColors=_this$getAttributeMan.pickingColors,instancePickingColors=_this$getAttributeMan.instancePickingColors,colors=pickingColors||instancePickingColors,i=this.decodePickingColor(color),start=colors.getVertexOffset(i),end=colors.getVertexOffset(i+1);colors.buffer.subData({data:new Uint8Array(end-start),offset:start})}},{key:"restorePickingColors",value:function restorePickingColors(){var _this$getAttributeMan2=this.getAttributeManager().attributes,pickingColors=_this$getAttributeMan2.pickingColors,instancePickingColors=_this$getAttributeMan2.instancePickingColors,colors=pickingColors||instancePickingColors;colors.update({value:colors.value})}},{key:"getNumInstances",value:function getNumInstances(props){if(void 0!==(props=props||this.props).numInstances)return props.numInstances;if(this.state&&void 0!==this.state.numInstances)return this.state.numInstances;var data=this.props.data;return Object(utils_count.a)(data)}},{key:"getBufferLayout",value:function getBufferLayout(props){return void 0!==(props=props||this.props).bufferLayout?props.bufferLayout:this.state&&void 0!==this.state.bufferLayout?this.state.bufferLayout:null}},{key:"_initialize",value:function _initialize(){this._initState(),this.initializeState(this.context);var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=this.props.extensions[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){var extension=_step7.value;extension.initializeState.call(this,this.context,extension)}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{_iteratorNormalCompletion7||null==_iterator7.return||_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}this.state.attributeManager=this.getAttributeManager(),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState();var model=this.getSingleModel();model&&(model.id=this.props.id,model.program.id="".concat(this.props.id,"-program"))}},{key:"_update",value:function _update(){this.needsUpdate()&&this._updateState()}},{key:"_updateState",value:function _updateState(){var currentProps=this.props,propsInTransition=this._updateUniformTransition();this.internalState.propsInTransition=propsInTransition,this.props=propsInTransition;var updateParams=this._getUpdateParams();if(this.context.gl)this.updateState(updateParams);else try{this.updateState(updateParams)}catch(error){}var _iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _step8,_iterator8=this.props.extensions[Symbol.iterator]();!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){var extension=_step8.value;extension.updateState.call(this,updateParams,extension)}}catch(err){_didIteratorError8=!0,_iteratorError8=err}finally{try{_iteratorNormalCompletion8||null==_iterator8.return||_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}this.isComposite?this._renderLayers(updateParams):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.props=currentProps,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}},{key:"_finalize",value:function _finalize(){Object(assert.a)(this.internalState&&this.state),this.finalizeState(this.context);var _iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _step9,_iterator9=this.props.extensions[Symbol.iterator]();!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=!0){var extension=_step9.value;extension.finalizeState.call(this,extension)}}catch(err){_didIteratorError9=!0,_iteratorError9=err}finally{try{_iteratorNormalCompletion9||null==_iterator9.return||_iterator9.return()}finally{if(_didIteratorError9)throw _iteratorError9}}Object(seer_integration.d)(this.id)}},{key:"drawLayer",value:function drawLayer(_ref7){var _this=this,_ref7$moduleParameter=_ref7.moduleParameters,moduleParameters=void 0===_ref7$moduleParameter?null:_ref7$moduleParameter,_ref7$uniforms=_ref7.uniforms,uniforms=void 0===_ref7$uniforms?{}:_ref7$uniforms,_ref7$parameters=_ref7.parameters,parameters=void 0===_ref7$parameters?{}:_ref7$parameters;this._updateAttributeTransition();var currentProps=this.props;this.props=this.internalState.propsInTransition;var opacity=this.props.opacity;uniforms.opacity=Math.pow(opacity,1/2.2),moduleParameters&&this.setModuleParameters(moduleParameters);var getPolygonOffset=this.props.getPolygonOffset,offsets=getPolygonOffset&&getPolygonOffset(uniforms)||[0,0];parameters.polygonOffset=offsets,Object(with_parameters.a)(this.context.gl,parameters,(function(){_this.draw({moduleParameters:moduleParameters,uniforms:uniforms,parameters:parameters,context:_this.context})})),this.props=currentProps}},{key:"pickLayer",value:function pickLayer(opts){return this.getPickingInfo(opts)}},{key:"getChangeFlags",value:function getChangeFlags(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function setChangeFlags(flags){var _this2=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var changeFlags=this.internalState.changeFlags;flags.dataChanged&&!changeFlags.dataChanged&&(changeFlags.dataChanged=flags.dataChanged,log.a.log(2,(function(){return"dataChanged: ".concat(flags.dataChanged," in ").concat(_this2.id)}))()),flags.updateTriggersChanged&&!changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged=changeFlags.updateTriggersChanged&&flags.updateTriggersChanged?Object.assign({},flags.updateTriggersChanged,changeFlags.updateTriggersChanged):flags.updateTriggersChanged||changeFlags.updateTriggersChanged,log.a.log(2,(function(){return"updateTriggersChanged: "+"".concat(Object.keys(flags.updateTriggersChanged).join(", ")," in ").concat(_this2.id)}))()),flags.propsChanged&&!changeFlags.propsChanged&&(changeFlags.propsChanged=flags.propsChanged,log.a.log(2,(function(){return"propsChanged: ".concat(flags.propsChanged," in ").concat(_this2.id)}))()),flags.extensionsChanged&&!changeFlags.extensionsChanged&&(changeFlags.extensionsChanged=flags.extensionsChanged,log.a.log(2,(function(){return"extensionsChanged: ".concat(flags.extensionsChanged," in ").concat(_this2.id)}))()),flags.viewportChanged&&!changeFlags.viewportChanged&&(changeFlags.viewportChanged=flags.viewportChanged,log.a.log(3,(function(){return"viewportChanged: ".concat(flags.viewportChanged," in ").concat(_this2.id)}))()),flags.stateChanged&&!changeFlags.stateChanged&&(changeFlags.stateChanged=flags.stateChanged,log.a.log(2,(function(){return"stateChanged: ".concat(flags.stateChanged," in ").concat(_this2.id)}))());var propsOrDataChanged=flags.dataChanged||flags.updateTriggersChanged||flags.propsChanged||flags.extensionsChanged;changeFlags.propsOrDataChanged=changeFlags.propsOrDataChanged||propsOrDataChanged,changeFlags.somethingChanged=changeFlags.somethingChanged||propsOrDataChanged||flags.viewportChanged||flags.stateChanged}},{key:"clearChangeFlags",value:function clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"printChangeFlags",value:function printChangeFlags(){var flags=this.internalState.changeFlags;return"".concat(flags.dataChanged?"data ":"").concat(flags.propsChanged?"props ":"").concat(flags.updateTriggersChanged?"triggers ":"").concat(flags.viewportChanged?"viewport":"")}},{key:"diffProps",value:function diffProps(newProps,oldProps){var changeFlags=props_diffProps(newProps,oldProps);if(changeFlags.updateTriggersChanged)for(var key in changeFlags.updateTriggersChanged)changeFlags.updateTriggersChanged[key]&&this._activeUpdateTrigger(key);if(changeFlags.transitionsChanged)for(var _key in changeFlags.transitionsChanged)this.internalState.uniformTransitions.add(_key,oldProps[_key],newProps[_key],newProps.transitions[_key]);return this.setChangeFlags(changeFlags)}},{key:"validateProps",value:function validateProps(){!function props_validateProps(props){var propTypes=getPropTypes(props);for(var propName in propTypes){var propType=propTypes[propName],validate=propType.validate;if(validate&&!validate(props[propName],propType))throw new Error("Invalid prop ".concat(propName,": ").concat(props[propName]))}}(this.props)}},{key:"setModuleParameters",value:function setModuleParameters(moduleParameters){var _iteratorNormalCompletion10=!0,_didIteratorError10=!1,_iteratorError10=void 0;try{for(var _step10,_iterator10=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=!0){_step10.value.updateModuleSettings(moduleParameters)}}catch(err){_didIteratorError10=!0,_iteratorError10=err}finally{try{_iteratorNormalCompletion10||null==_iterator10.return||_iterator10.return()}finally{if(_didIteratorError10)throw _iteratorError10}}}},{key:"_getUpdateParams",value:function _getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function _getNeedsRedraw(opts){if(!this.internalState)return!1;var redraw=!1;redraw=redraw||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!opts.clearRedrawFlags;var attributeManager=this.getAttributeManager(),attributeManagerNeedsRedraw=attributeManager&&attributeManager.getNeedsRedraw(opts);return redraw=redraw||attributeManagerNeedsRedraw}},{key:"_getAttributeManager",value:function _getAttributeManager(){return new attribute_manager.a(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function _initState(){Object(assert.a)(!this.internalState&&!this.state);var attributeManager=this._getAttributeManager();attributeManager&&attributeManager.addInstanced({instancePickingColors:{type:5121,size:3,update:this.calculateInstancePickingColors}}),this.internalState=new layer_state_LayerState({attributeManager:attributeManager,layer:this}),this.state={},this.state.attributeManager=attributeManager,this.internalState.uniformTransitions=new uniform_transition_manager_UniformTransitionManager(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function _transferState(oldLayer){var state=oldLayer.state,internalState=oldLayer.internalState;if(Object(assert.a)(state&&internalState),this!==oldLayer){this.internalState=internalState,this.internalState.component=this,this.state=state,state.layer=this,this.internalState.setAsyncProps(this.props);var _iteratorNormalCompletion11=!0,_didIteratorError11=!1,_iteratorError11=void 0;try{for(var _step11,_iterator11=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=!0){_step11.value.userData.layer=this}}catch(err){_didIteratorError11=!0,_iteratorError11=err}finally{try{_iteratorNormalCompletion11||null==_iterator11.return||_iterator11.return()}finally{if(_didIteratorError11)throw _iteratorError11}}this.diffProps(this.props,this.internalState.getOldProps())}}},{key:"_onAsyncPropUpdated",value:function _onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}},{key:"_activeUpdateTrigger",value:function _activeUpdateTrigger(propName){this.invalidateAttribute(propName)}},{key:"setLayerNeedsUpdate",value:function setLayerNeedsUpdate(){log.a.deprecated("layer.setLayerNeedsUpdate","layer.setNeedsUpdate")(),this.setNeedsUpdate()}},{key:"setUniforms",value:function setUniforms(uniformMap){var _iteratorNormalCompletion12=!0,_didIteratorError12=!1,_iteratorError12=void 0;try{for(var _step12,_iterator12=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=!0){_step12.value.setUniforms(uniformMap)}}catch(err){_didIteratorError12=!0,_iteratorError12=err}finally{try{_iteratorNormalCompletion12||null==_iterator12.return||_iterator12.return()}finally{if(_didIteratorError12)throw _iteratorError12}}this.setNeedsRedraw(),log.a.deprecated("layer.setUniforms","model.setUniforms")()}},{key:"use64bitProjection",value:function use64bitProjection(){return log.a.removed("use64bitProjection","Fp64Extension")(),!1}}]),Layer}(component_Component);layer_Layer.layerName="Layer",layer_Layer.defaultProps=layer_defaultProps},function(module,__webpack_exports__,__webpack_require__){"use strict";var esm_typeof=__webpack_require__(12),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),viewport=__webpack_require__(80),PERCENT_OR_PIXELS_REGEX=/([0-9]+\.?[0-9]*)(%|px)/;function parsePosition(value){switch(Object(esm_typeof.a)(value)){case"number":return{position:value,relative:!1};case"string":var match=value.match(PERCENT_OR_PIXELS_REGEX);if(match&&match.length>=3){var relative="%"===match[2],position=parseFloat(match[1]);return{position:relative?position/100:position,relative:relative}}default:throw new Error("Could not parse position string ".concat(value))}}function getPosition(position,extent){return position.relative?Math.round(position.position*extent):position.position}var deep_equal=__webpack_require__(158),assert=__webpack_require__(14);__webpack_require__.d(__webpack_exports__,"a",(function(){return view_View}));var view_View=function(){function View(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,View);var _props$id=props.id,id=void 0===_props$id?null:_props$id,_props$x=props.x,x=void 0===_props$x?0:_props$x,_props$y=props.y,y=void 0===_props$y?0:_props$y,_props$width=props.width,width=void 0===_props$width?"100%":_props$width,_props$height=props.height,height=void 0===_props$height?"100%":_props$height,_props$projectionMatr=props.projectionMatrix,projectionMatrix=void 0===_props$projectionMatr?null:_props$projectionMatr,_props$fovy=props.fovy,fovy=void 0===_props$fovy?50:_props$fovy,_props$near=props.near,near=void 0===_props$near?.1:_props$near,_props$far=props.far,far=void 0===_props$far?1e3:_props$far,_props$modelMatrix=props.modelMatrix,modelMatrix=void 0===_props$modelMatrix?null:_props$modelMatrix,_props$viewportInstan=props.viewportInstance,viewportInstance=void 0===_props$viewportInstan?null:_props$viewportInstan,_props$type=props.type,type=void 0===_props$type?viewport.a:_props$type;Object(assert.a)(!viewportInstance||viewportInstance instanceof viewport.a),this.viewportInstance=viewportInstance,this.id=id||this.constructor.displayName||"view",this.type=type,this.props=Object.assign({},props,{id:this.id,projectionMatrix:projectionMatrix,fovy:fovy,near:near,far:far,modelMatrix:modelMatrix}),this._parseDimensions({x:x,y:y,width:width,height:height}),this.equals=this.equals.bind(this),Object.seal(this)}return Object(createClass.a)(View,[{key:"equals",value:function equals(view){return this===view||(this.viewportInstance?view.viewportInstance&&this.viewportInstance.equals(view.viewportInstance):Object(deep_equal.a)(this.props,view.props))}},{key:"makeViewport",value:function makeViewport(_ref){var width=_ref.width,height=_ref.height,viewState=_ref.viewState;if(this.viewportInstance)return this.viewportInstance;viewState=this.filterViewState(viewState);var viewportDimensions=this.getDimensions({width:width,height:height}),props=Object.assign({viewState:viewState},viewState,this.props,viewportDimensions);return this._getViewport(props)}},{key:"getViewStateId",value:function getViewStateId(){switch(Object(esm_typeof.a)(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function filterViewState(viewState){if(this.props.viewState&&"object"===Object(esm_typeof.a)(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var newViewState=Object.assign({},viewState);for(var key in this.props.viewState)"id"!==key&&(newViewState[key]=this.props.viewState[key]);return newViewState}return viewState}},{key:"getDimensions",value:function getDimensions(_ref2){var width=_ref2.width,height=_ref2.height;return{x:getPosition(this._x,width),y:getPosition(this._y,height),width:getPosition(this._width,width),height:getPosition(this._height,height)}}},{key:"_getControllerProps",value:function _getControllerProps(defaultOpts){var opts=this.props.controller;return opts?!0===opts?defaultOpts:("function"==typeof opts&&(opts={type:opts}),Object.assign({},defaultOpts,opts)):null}},{key:"_getViewport",value:function _getViewport(props){return new(0,this.type)(props)}},{key:"_parseDimensions",value:function _parseDimensions(_ref3){var x=_ref3.x,y=_ref3.y,width=_ref3.width,height=_ref3.height;this._x=parsePosition(x),this._y=parsePosition(y),this._width=parsePosition(width),this._height=parsePosition(height)}}]),View}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(6),common=__webpack_require__(21),assert=__webpack_require__(14),transition_interpolator_TransitionInterpolator=function(){function TransitionInterpolator(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,TransitionInterpolator),Array.isArray(opts)&&(opts={compare:opts,extract:opts,required:opts});var _opts=opts,compare=_opts.compare,extract=_opts.extract,required=_opts.required;this._propsToCompare=compare,this._propsToExtract=extract,this._requiredProps=required}return Object(createClass.a)(TransitionInterpolator,[{key:"arePropsEqual",value:function arePropsEqual(currentProps,nextProps){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=(this._propsToCompare||Object.keys(nextProps))[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;if(!(key in currentProps&&key in nextProps&&Object(common.d)(currentProps[key],nextProps[key])))return!1}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return!0}},{key:"initializeProps",value:function initializeProps(startProps,endProps){var result;if(this._propsToExtract){var startViewStateProps={},endViewStateProps={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this._propsToExtract[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var key=_step2.value;startViewStateProps[key]=startProps[key],endViewStateProps[key]=endProps[key]}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}result={start:startViewStateProps,end:endViewStateProps}}else result={start:startProps,end:endProps};return this._checkRequiredProps(result.start),this._checkRequiredProps(result.end),result}},{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){Object(assert.a)(!1,"interpolateProps is not implemented")}},{key:"_checkRequiredProps",value:function _checkRequiredProps(props){this._requiredProps&&this._requiredProps.forEach((function(propName){var value=props[propName];Object(assert.a)(Number.isFinite(value)||Array.isArray(value),"".concat(propName," is required for transition"))}))}}]),TransitionInterpolator}();__webpack_require__.d(__webpack_exports__,"a",(function(){return linear_interpolator_LinearInterpolator}));var VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom","bearing","pitch"],linear_interpolator_LinearInterpolator=function(_TransitionInterpolat){function LinearInterpolator(){var transitionProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:VIEWPORT_TRANSITION_PROPS;return Object(classCallCheck.a)(this,LinearInterpolator),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(LinearInterpolator).call(this,transitionProps))}return Object(inherits.a)(LinearInterpolator,_TransitionInterpolat),Object(createClass.a)(LinearInterpolator,[{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){var viewport={};for(var key in endProps)viewport[key]=Object(common.g)(startProps[key],endProps[key],t);return viewport}}]),LinearInterpolator}(transition_interpolator_TransitionInterpolator)},function(module,__webpack_exports__,__webpack_require__){"use strict";function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__.d(__webpack_exports__,"a",(function(){return _setPrototypeOf}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return _construct}));var _setPrototypeOf__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(156);function _construct(Parent,args,Class){return(_construct=function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&Object(_setPrototypeOf__WEBPACK_IMPORTED_MODULE_0__.a)(instance,Class.prototype),instance}).apply(null,arguments)}},function(module,__webpack_exports__,__webpack_require__){"use strict";function deepEqual(a,b){return a===b||Object.keys(a).every((function(key){return Array.isArray(a[key])&&Array.isArray(b[key])?deepEqual(a[key],b[key]):a[key]===b[key]}))}__webpack_require__.d(__webpack_exports__,"a",(function(){return deepEqual}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(16),_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(123),_project_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(31),math_gl__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(201),math_gl__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(42),_utils_memoize__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(138),viewport_mercator_project__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(22),getMemoizedViewportCenterPosition=Object(_utils_memoize__WEBPACK_IMPORTED_MODULE_6__.a)((function getViewportCenterPosition(_ref){var viewport=_ref.viewport,center=_ref.center;return new math_gl__WEBPACK_IMPORTED_MODULE_4__.a(viewport.viewProjectionMatrix).invert().transform(center)})),getMemoizedViewProjectionMatrices=Object(_utils_memoize__WEBPACK_IMPORTED_MODULE_6__.a)((function getViewProjectionMatrices(_ref2){var viewport=_ref2.viewport,shadowMatrices=_ref2.shadowMatrices,projectionMatrices=[],pixelUnprojectionMatrix=viewport.pixelUnprojectionMatrix,farZ=viewport.isGeospatial?void 0:1,corners=[[0,0,farZ],[viewport.width,0,farZ],[0,viewport.height,farZ],[viewport.width,viewport.height,farZ],[0,0,-1],[viewport.width,0,-1],[0,viewport.height,-1],[viewport.width,viewport.height,-1]].map((function(pixel){return function screenToCommonSpace(xyz,pixelUnprojectionMatrix){var _xyz=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],coord=Object(viewport_mercator_project__WEBPACK_IMPORTED_MODULE_7__.h)([x,y,z],pixelUnprojectionMatrix);if(Number.isFinite(z))return coord;return[coord[0],coord[1],0]}(pixel,pixelUnprojectionMatrix)})),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function _loop(){var shadowMatrix=_step.value,viewMatrix=shadowMatrix.clone().translate(new math_gl__WEBPACK_IMPORTED_MODULE_5__.a(viewport.center).negate()),positions=corners.map((function(corner){return viewMatrix.transform(corner)})),projectionMatrix=(new math_gl__WEBPACK_IMPORTED_MODULE_4__.a).ortho({left:Math.min.apply(Math,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(positions.map((function(position){return position[0]})))),right:Math.max.apply(Math,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(positions.map((function(position){return position[0]})))),bottom:Math.min.apply(Math,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(positions.map((function(position){return position[1]})))),top:Math.max.apply(Math,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(positions.map((function(position){return position[1]})))),near:Math.min.apply(Math,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(positions.map((function(position){return-position[2]})))),far:Math.max.apply(Math,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(positions.map((function(position){return-position[2]}))))});projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix))},_iterator=shadowMatrices[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return projectionMatrices}));Object(_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__.b)("shadow",{hook:"vs:DECKGL_FILTER_GL_POSITION",injection:"\nposition = shadow_setVertexPosition(geometry.position);\n  "}),Object(_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__.b)("shadow",{hook:"fs:DECKGL_FILTER_COLOR",injection:"\ncolor = shadow_filterShadowColor(color);\n  "});var DEFAULT_SHADOW_COLOR=[0,0,0,1],VECTOR_TO_POINT_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function createShadowUniforms(){for(var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},uniforms={shadow_uDrawShadowMap:Boolean(opts.drawToShadowMap),shadow_uUseShadowMap:!!opts.shadowMaps&&opts.shadowMaps.length>0,shadow_uColor:opts.shadowColor||DEFAULT_SHADOW_COLOR,shadow_uLightId:opts.shadowLightId||0,shadow_uLightCount:opts.shadowMatrices.length},center=getMemoizedViewportCenterPosition({viewport:opts.viewport,center:context.project_uCenter}),projectCenters=[],viewProjectionMatrices=getMemoizedViewProjectionMatrices({shadowMatrices:opts.shadowMatrices,viewport:opts.viewport}).slice(),i=0;i<opts.shadowMatrices.length;i++){var viewProjectionMatrix=viewProjectionMatrices[i],viewProjectionMatrixCentered=viewProjectionMatrix.clone().translate(new math_gl__WEBPACK_IMPORTED_MODULE_5__.a(opts.viewport.center).negate());context.project_uCoordinateSystem===_project_constants__WEBPACK_IMPORTED_MODULE_3__.a.LNG_LAT?(viewProjectionMatrices[i]=viewProjectionMatrixCentered,projectCenters[i]=[0,0,0,0]):(viewProjectionMatrices[i]=viewProjectionMatrix.clone().multiplyRight(VECTOR_TO_POINT_MATRIX),projectCenters[i]=viewProjectionMatrixCentered.transform(center))}for(var _i=0;_i<viewProjectionMatrices.length;_i++)uniforms["shadow_uViewProjectionMatrices[".concat(_i,"]")]=viewProjectionMatrices[_i],uniforms["shadow_uProjectCenters[".concat(_i,"]")]=projectCenters[_i],opts.shadowMaps&&opts.shadowMaps.length>0?uniforms["shadow_uShadowMap".concat(_i)]=opts.shadowMaps[_i]:uniforms["shadow_uShadowMap".concat(_i)]=opts.dummyShadowMap;return uniforms}__webpack_exports__.a={name:"shadow",dependencies:["project"],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",getUniforms:function getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(opts.drawToShadowMap||opts.shadowMaps&&opts.shadowMaps.length>0){var shadowUniforms={},_opts$shadowEnabled=opts.shadowEnabled,shadowEnabled=void 0===_opts$shadowEnabled||_opts$shadowEnabled;return shadowEnabled&&opts.shadowMatrices&&opts.shadowMatrices.length>0?Object.assign(shadowUniforms,createShadowUniforms(opts,context)):Object.assign(shadowUniforms,{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}),shadowUniforms}return{}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1);function transpileShader(source,targetGLSLVersion,isVertex){switch(targetGLSLVersion){case 300:return isVertex?function convertVertexShaderTo300(source){return source.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(source):function convertFragmentShaderTo300(source){return source.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(source);case 100:return isVertex?function convertVertexShaderTo100(source){return source.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(source):function convertFragmentShaderTo100(source){return source.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(source);default:throw new Error("unknown GLSL version ".concat(targetGLSLVersion))}}var assert=__webpack_require__(141),esm_typeof=__webpack_require__(12),TYPE_DEFINITIONS={number:{validate:function validate(value,propType){return Number.isFinite(value)&&(!("max"in propType)||value<=propType.max)&&(!("min"in propType)||value>=propType.min)}},array:{validate:function validate(value,propType){return Array.isArray(value)||ArrayBuffer.isView(value)}}};function parsePropType(propDef){var type=getTypeOf(propDef);return"object"===type?propDef?"type"in propDef?Object.assign({},propDef,TYPE_DEFINITIONS[propDef.type]):"value"in propDef?(type=getTypeOf(propDef.value),Object.assign({type:type},propDef,TYPE_DEFINITIONS[type])):{type:"object",value:propDef}:{type:"object",value:null}:Object.assign({type:type,value:propDef},TYPE_DEFINITIONS[type])}function getTypeOf(value){return Array.isArray(value)||ArrayBuffer.isView(value)?"array":Object(esm_typeof.a)(value)}__webpack_require__.d(__webpack_exports__,"a",(function(){return shader_module_ShaderModule})),__webpack_require__.d(__webpack_exports__,"b",(function(){return normalizeShaderModule}));var shader_module_ShaderModule=function(){function ShaderModule(_ref){var name=_ref.name,vs=_ref.vs,fs=_ref.fs,_ref$dependencies=_ref.dependencies,dependencies=void 0===_ref$dependencies?[]:_ref$dependencies,uniforms=_ref.uniforms,getUniforms=_ref.getUniforms,_ref$deprecations=_ref.deprecations,deprecations=void 0===_ref$deprecations?[]:_ref$deprecations,_ref$defines=_ref.defines,defines=void 0===_ref$defines?{}:_ref$defines,vertexShader=_ref.vertexShader,fragmentShader=_ref.fragmentShader;Object(classCallCheck.a)(this,ShaderModule),Object(assert.a)("string"==typeof name),this.name=name,this.vs=vs||vertexShader,this.fs=fs||fragmentShader,this.getModuleUniforms=getUniforms,this.dependencies=dependencies,this.deprecations=this._parseDeprecationDefinitions(deprecations),this.defines=defines,uniforms&&(this.uniforms=function parsePropTypes(propDefs){var propTypes={};for(var propName in propDefs){var propType=parsePropType(propDefs[propName]);propTypes[propName]=propType}return propTypes}(uniforms))}return Object(createClass.a)(ShaderModule,[{key:"getModuleSource",value:function getModuleSource(type,targetGLSLVersion){var moduleSource;switch(type){case"vs":moduleSource=transpileShader(this.vs||"",targetGLSLVersion,!0);break;case"fs":moduleSource=transpileShader(this.fs||"",targetGLSLVersion,!1);break;default:Object(assert.a)(!1)}return"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(moduleSource,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function getUniforms(opts,uniforms){return this.getModuleUniforms?this.getModuleUniforms(opts,uniforms):this.uniforms?this._defaultGetUniforms(opts):{}}},{key:"getDefines",value:function getDefines(){return this.defines}},{key:"checkDeprecations",value:function checkDeprecations(shaderSource,log){this.deprecations.forEach((function(def){def.regex.test(shaderSource)&&(def.deprecated?log.deprecated(def.old,def.new)():log.removed(def.old,def.new)())}))}},{key:"_parseDeprecationDefinitions",value:function _parseDeprecationDefinitions(deprecations){return deprecations.forEach((function(def){switch(def.type){case"function":def.regex=new RegExp("\\b".concat(def.old,"\\("));break;default:def.regex=new RegExp("".concat(def.type," ").concat(def.old,";"))}})),deprecations}},{key:"_defaultGetUniforms",value:function _defaultGetUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},uniforms={},propTypes=this.uniforms;for(var key in propTypes){var propDef=propTypes[key];key in opts&&!propDef.private?(propDef.validate&&Object(assert.a)(propDef.validate(opts[key],propDef),"".concat(this.name,": invalid ").concat(key)),uniforms[key]=opts[key]):uniforms[key]=propDef.value}return uniforms}}]),ShaderModule}();function normalizeShaderModule(module){if(!module.normalized&&(module.normalized=!0,module.uniforms&&!module.getUniforms)){var shaderModule=new shader_module_ShaderModule(module);module.getUniforms=shaderModule.getUniforms.bind(shaderModule)}return module}},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),assertThisInitialized=__webpack_require__(7),createClass=__webpack_require__(1),inherits=__webpack_require__(6),texture=__webpack_require__(58),webgl_checks=__webpack_require__(39),assert=__webpack_require__(17),pathPrefix="";__webpack_require__.d(__webpack_exports__,"a",(function(){return texture_2d_Texture2D}));var texture_2d_Texture2D=function(_Texture){function Texture2D(gl){var _this,url,opts,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Texture2D),Object(webgl_checks.b)(gl),(props instanceof Promise||"string"==typeof props)&&(props={data:props}),"string"==typeof props.data&&(props=Object.assign({},props,{data:(url=props.data,Object(assert.a)("string"==typeof url),url=pathPrefix+url,new Promise((function(resolve,reject){try{var image=new Image;image.onload=function(){return resolve(image)},image.onerror=function(){return reject(new Error("Could not load image ".concat(url,".")))},image.crossOrigin=opts&&opts.crossOrigin||"anonymous",image.src=url}catch(error){reject(error)}})))})),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Texture2D).call(this,gl,Object.assign({},props,{target:3553})))).initialize(props),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(Texture2D,_Texture),Object(createClass.a)(Texture2D,null,[{key:"isSupported",value:function isSupported(gl,opts){return texture.a.isSupported(gl,opts)}}]),Texture2D}(texture.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";var ticks=__webpack_require__(788),continuous=__webpack_require__(46),init=__webpack_require__(65),src=__webpack_require__(112),tickFormat=function(start,stop,count,specifier){var precision,step=Object(ticks.c)(start,stop,count);switch((specifier=Object(src.c)(null==specifier?",f":specifier)).type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=specifier.precision||isNaN(precision=Object(src.e)(step,value))||(specifier.precision=precision),Object(src.b)(specifier,value);case"":case"e":case"g":case"p":case"r":null!=specifier.precision||isNaN(precision=Object(src.f)(step,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":null!=specifier.precision||isNaN(precision=Object(src.d)(step))||(specifier.precision=precision-2*("%"===specifier.type))}return Object(src.a)(specifier)};function linearish(scale){var domain=scale.domain;return scale.ticks=function(count){var d=domain();return Object(ticks.a)(d[0],d[d.length-1],null==count?10:count)},scale.tickFormat=function(count,specifier){var d=domain();return tickFormat(d[0],d[d.length-1],null==count?10:count,specifier)},scale.nice=function(count){null==count&&(count=10);var step,d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1];return stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step),(step=Object(ticks.b)(start,stop,count))>0?(start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step,step=Object(ticks.b)(start,stop,count)):step<0&&(start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step,step=Object(ticks.b)(start,stop,count)),step>0?(d[i0]=Math.floor(start/step)*step,d[i1]=Math.ceil(stop/step)*step,domain(d)):step<0&&(d[i0]=Math.ceil(start*step)/step,d[i1]=Math.floor(stop*step)/step,domain(d)),scale},scale}function linear(){var scale=Object(continuous.b)();return scale.copy=function(){return Object(continuous.a)(scale,linear())},init.b.apply(scale,arguments),linearish(scale)}__webpack_require__.d(__webpack_exports__,"b",(function(){return linearish})),__webpack_require__.d(__webpack_exports__,"a",(function(){return linear}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BaseAttribute}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(318),_luma_gl_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(198),_luma_gl_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(38),_luma_gl_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(66),_luma_gl_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(127),_luma_gl_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(25),BaseAttribute=function(){function BaseAttribute(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,BaseAttribute);var _opts$id=opts.id,id=void 0===_opts$id?Object(_luma_gl_core__WEBPACK_IMPORTED_MODULE_6__.c)("attribute"):_opts$id,type=opts.type,_opts$isIndexed=opts.isIndexed,isIndexed=void 0!==_opts$isIndexed&&_opts$isIndexed;this.gl=gl,this.id=id,this.isIndexed=isIndexed,this.target=isIndexed?34963:34962,this.type=type,isIndexed&&!type&&(this.type=gl&&Object(_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__.b)(gl,_luma_gl_core__WEBPACK_IMPORTED_MODULE_3__.a.ELEMENT_INDEX_UINT32)?5125:5123),this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(opts),this._validateAttributeDefinition()}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(BaseAttribute,[{key:"delete",value:function _delete(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function update(opts){var value=opts.value,buffer=opts.buffer,_opts$constant=opts.constant,constant=void 0===_opts$constant?this.constant||!1:_opts$constant;if(this.constant=constant,buffer)this.externalBuffer=buffer,this.constant=!1,this.value=value||null,this.type=opts.type||buffer.accessor.type,void 0!==buffer.accessor.divisor&&(this.divisor=buffer.accessor.divisor),void 0!==opts.divisor&&(this.divisor=opts.divisor);else if(value){this.externalBuffer=null;var size=this.size||opts.size||0;if(constant&&value.length!==size){this.value=new Float32Array(size),this._setAccessor(opts);for(var index=this.elementOffset,i=0;i<this.size;++i)this.value[i]=value[index+i]}else this.value=value;!constant&&this.gl&&(this.buffer=this.buffer||this._createBuffer(opts),this.buffer.setData({data:value}),this.type=this.buffer.accessor.type)}this._setAccessor(opts),constant&&this.normalized&&(this.value=this._normalizeConstant(this.value))}},{key:"getBuffer",value:function getBuffer(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function getValue(){if(this.constant)return this.value;var buffer=this.externalBuffer||this.buffer;return buffer?[buffer,this]:null}},{key:"_createBuffer",value:function _createBuffer(opts){var props=Object.assign({},opts,{id:this.id,target:this.target,accessor:{type:this.type}});return Number.isFinite(props.divisor)&&(props.accessor.divisor=props.divisor),delete props.divisor,Number.isFinite(props.size)&&(props.accessor.size=props.size),delete props.size,new _luma_gl_core__WEBPACK_IMPORTED_MODULE_4__.a(this.gl,props)}},{key:"_setAccessor",value:function _setAccessor(opts){var _opts$size=opts.size,size=void 0===_opts$size?this.size:_opts$size,_opts$offset=opts.offset,offset=void 0===_opts$offset?this.offset||0:_opts$offset,_opts$stride=opts.stride,stride=void 0===_opts$stride?this.stride||0:_opts$stride,_opts$normalized=opts.normalized,normalized=void 0===_opts$normalized?this.normalized||!1:_opts$normalized,_opts$integer=opts.integer,integer=void 0===_opts$integer?this.integer||!1:_opts$integer,_opts$divisor=opts.divisor,divisor=void 0===_opts$divisor?this.divisor||0:_opts$divisor,instanced=opts.instanced,isInstanced=opts.isInstanced;this.size=size,this.offset=offset,this.elementOffset=offset/_luma_gl_core__WEBPACK_IMPORTED_MODULE_5__.a.getBytesPerElement(this),this.stride=stride,this.normalized=normalized,this.integer=integer,this.divisor=divisor,void 0!==isInstanced&&(_luma_gl_core__WEBPACK_IMPORTED_MODULE_7__.a.deprecated("Attribute.isInstanced")(),this.divisor=isInstanced?1:0),void 0!==instanced&&(_luma_gl_core__WEBPACK_IMPORTED_MODULE_7__.a.deprecated("Attribute.instanced")(),this.divisor=instanced?1:0)}},{key:"_normalizeConstant",value:function _normalizeConstant(value){switch(this.type){case 5120:return new Float32Array(value).map((function(x){return(x+128)/255*2-1}));case 5122:return new Float32Array(value).map((function(x){return(x+32768)/65535*2-1}));case 5121:return new Float32Array(value).map((function(x){return x/255}));case 5123:return new Float32Array(value).map((function(x){return x/65535}));default:return value}}},{key:"_validateAttributeDefinition",value:function _validateAttributeDefinition(){}}]),BaseAttribute}()},function(module,__webpack_exports__,__webpack_require__){"use strict";function vec2_transformMat4AsVector(out,a,m){var x=a[0],y=a[1],w=m[3]*x+m[7]*y||1;return out[0]=(m[0]*x+m[4]*y)/w,out[1]=(m[1]*x+m[5]*y)/w,out}function vec3_transformMat4AsVector(out,a,m){var x=a[0],y=a[1],z=a[2],w=m[3]*x+m[7]*y+m[11]*z||1;return out[0]=(m[0]*x+m[4]*y+m[8]*z)/w,out[1]=(m[1]*x+m[5]*y+m[9]*z)/w,out[2]=(m[2]*x+m[6]*y+m[10]*z)/w,out}function vec3_transformMat2(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y,out[1]=m[1]*x+m[3]*y,out[2]=a[2],out}__webpack_require__.d(__webpack_exports__,"a",(function(){return vec2_transformMat4AsVector})),__webpack_require__.d(__webpack_exports__,"c",(function(){return vec3_transformMat4AsVector})),__webpack_require__.d(__webpack_exports__,"b",(function(){return vec3_transformMat2}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return deg2rad})),__webpack_require__.d(__webpack_exports__,"b",(function(){return rad2deg}));var deg2rad=Math.PI/180,rad2deg=180/Math.PI},function(module,__webpack_exports__,__webpack_require__){"use strict";var _WEBGL_PARAMETERS,_WEBGL2_CONTEXT_POLYF,defineProperty=__webpack_require__(0),assert=__webpack_require__(109),getWebGL2ValueOrZero=function getWebGL2ValueOrZero(gl){return isWebGL2(gl)?void 0:0},WEBGL_PARAMETERS=(_WEBGL_PARAMETERS={},Object(defineProperty.a)(_WEBGL_PARAMETERS,3074,(function(gl){return isWebGL2(gl)?void 0:36064})),Object(defineProperty.a)(_WEBGL_PARAMETERS,35723,(function(gl){return isWebGL2(gl)?void 0:4352})),Object(defineProperty.a)(_WEBGL_PARAMETERS,35977,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,32937,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,36795,(function(gl,getParameter){var ext=isWebGL2(gl)?gl.getExtension("EXT_disjoint_timer_query_webgl2"):gl.getExtension("EXT_disjoint_timer_query");return ext&&ext.GPU_DISJOINT_EXT?getParameter(ext.GPU_DISJOINT_EXT):0})),Object(defineProperty.a)(_WEBGL_PARAMETERS,37445,(function(gl,getParameter){var ext=gl.getExtension("WEBGL_debug_renderer_info");return getParameter(ext&&ext.UNMASKED_VENDOR_WEBGL||7936)})),Object(defineProperty.a)(_WEBGL_PARAMETERS,37446,(function(gl,getParameter){var ext=gl.getExtension("WEBGL_debug_renderer_info");return getParameter(ext&&ext.UNMASKED_RENDERER_WEBGL||7937)})),Object(defineProperty.a)(_WEBGL_PARAMETERS,34047,(function(gl,getParameter){var ext=gl.luma.extensions.EXT_texture_filter_anisotropic;return ext?getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),Object(defineProperty.a)(_WEBGL_PARAMETERS,32883,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35071,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,37447,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,36063,(function(gl,getParameter){if(!isWebGL2(gl)){var ext=gl.getExtension("WEBGL_draw_buffers");return ext?getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),Object(defineProperty.a)(_WEBGL_PARAMETERS,35379,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35374,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35377,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,34852,(function(gl){if(!isWebGL2(gl)){var ext=gl.getExtension("WEBGL_draw_buffers");return ext?ext.MAX_DRAW_BUFFERS_WEBGL:0}})),Object(defineProperty.a)(_WEBGL_PARAMETERS,36203,(function(gl){return gl.getExtension("OES_element_index")?2147483647:65535})),Object(defineProperty.a)(_WEBGL_PARAMETERS,33001,(function(gl){return gl.getExtension("OES_element_index")?16777216:65535})),Object(defineProperty.a)(_WEBGL_PARAMETERS,33e3,(function(gl){return 16777216})),Object(defineProperty.a)(_WEBGL_PARAMETERS,37157,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35373,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35657,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,36183,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,37137,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,34045,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35978,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35979,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35968,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35376,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35375,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35659,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,37154,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35371,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35658,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35076,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35077,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35380,getWebGL2ValueOrZero),_WEBGL_PARAMETERS);function isWebGL2(gl){return Boolean(gl&&2===gl._version)}__webpack_require__.d(__webpack_exports__,"b",(function(){return WEBGL2_CONTEXT_POLYFILLS})),__webpack_require__.d(__webpack_exports__,"a",(function(){return WEBGL2_CONTEXT_OVERRIDES}));function polyfill_table_isWebGL2(gl){return Boolean(gl&&2===gl._version)}var WEBGL2_CONTEXT_POLYFILLS=(_WEBGL2_CONTEXT_POLYF={},Object(defineProperty.a)(_WEBGL2_CONTEXT_POLYF,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function createVertexArray(){Object(assert.a)(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function deleteVertexArray(){},bindVertexArray:function bindVertexArray(){},isVertexArray:function isVertexArray(){return!1}}),Object(defineProperty.a)(_WEBGL2_CONTEXT_POLYF,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function vertexAttribDivisor(location,divisor){Object(assert.a)(0===divisor,"WebGL instanced rendering not supported")},drawElementsInstanced:function drawElementsInstanced(){},drawArraysInstanced:function drawArraysInstanced(){}}),Object(defineProperty.a)(_WEBGL2_CONTEXT_POLYF,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function drawBuffers(){Object(assert.a)(!1)}}),Object(defineProperty.a)(_WEBGL2_CONTEXT_POLYF,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function createQuery(){Object(assert.a)(!1)},deleteQuery:function deleteQuery(){Object(assert.a)(!1)},beginQuery:function beginQuery(){Object(assert.a)(!1)},endQuery:function endQuery(){},getQuery:function getQuery(handle,pname){return this.getQueryObject(handle,pname)},getQueryParameter:function getQueryParameter(handle,pname){return this.getQueryObject(handle,pname)},getQueryObject:function getQueryObject(){}}),_WEBGL2_CONTEXT_POLYF),WEBGL2_CONTEXT_OVERRIDES={readBuffer:function readBuffer(gl,originalFunc,attachment){polyfill_table_isWebGL2(gl)&&originalFunc(attachment)},getVertexAttrib:function getVertexAttrib(gl,originalFunc,location,pname){var result,_getExtensionData=function getExtensionData(gl,extension){return{webgl2:polyfill_table_isWebGL2(gl),ext:gl.getExtension(extension)}}(gl,"ANGLE_instanced_arrays"),webgl2=_getExtensionData.webgl2,ext=_getExtensionData.ext;switch(pname){case 35069:result=!!webgl2&&void 0;break;case 35070:result=webgl2||ext?void 0:0}return void 0!==result?result:originalFunc(location,pname)},getProgramParameter:function getProgramParameter(gl,originalFunc,program,pname){if(!polyfill_table_isWebGL2(gl))switch(pname){case 35967:return 35981;case 35971:case 35382:return 0}return originalFunc(program,pname)},getInternalformatParameter:function getInternalformatParameter(gl,originalFunc,target,format,pname){if(!polyfill_table_isWebGL2(gl))switch(pname){case 32937:return new Int32Array([0])}return gl.getInternalformatParameter(target,format,pname)},getTexParameter:function getTexParameter(gl,originalFunc,target,pname){switch(pname){case 34046:var ext=gl.luma.extensions.EXT_texture_filter_anisotropic;pname=ext&&ext.TEXTURE_MAX_ANISOTROPY_EXT||34046}return originalFunc(target,pname)},getParameter:function getParameterPolyfill(gl,originalGetParameter,pname){var limit=WEBGL_PARAMETERS[pname],value="function"==typeof limit?limit(gl,originalGetParameter,pname):limit;return void 0!==value?value:originalGetParameter(pname)},hint:function hint(gl,originalFunc,pname,value){return originalFunc(pname,value)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"luma.gl: assertion failed.")}__webpack_require__.d(__webpack_exports__,"a",(function(){return assert}))},,function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(44),has=__webpack_require__(116),$assign=GetIntrinsic("%Object%").assign;module.exports=function assign(target,source){if($assign)return $assign(target,source);for(var key in source)has(source,key)&&(target[key]=source[key]);return target}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(338)},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40);module.exports=function(input,PREFERRED_STRING){if(!isObject(input))return input;var fn,val;if(PREFERRED_STRING&&"function"==typeof(fn=input.toString)&&!isObject(val=fn.call(input)))return val;if("function"==typeof(fn=input.valueOf)&&!isObject(val=fn.call(input)))return val;if(!PREFERRED_STRING&&"function"==typeof(fn=input.toString)&&!isObject(val=fn.call(input)))return val;throw TypeError("Can't convert object to primitive value")}},function(module,exports,__webpack_require__){var IS_PURE=__webpack_require__(174),store=__webpack_require__(550);(module.exports=function(key,value){return store[key]||(store[key]=void 0!==value?value:{})})("versions",[]).push({version:"3.3.5",mode:IS_PURE?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(module,exports){module.exports=!1},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){var path=__webpack_require__(276),global=__webpack_require__(29),aFunction=function(variable){return"function"==typeof variable?variable:void 0};module.exports=function(namespace,method){return arguments.length<2?aFunction(path[namespace])||aFunction(global[namespace]):path[namespace]&&path[namespace][method]||global[namespace]&&global[namespace][method]}},function(module,exports,__webpack_require__){var classof=__webpack_require__(98);module.exports=Array.isArray||function isArray(arg){return"Array"==classof(arg)}},function(module,exports,__webpack_require__){var internalObjectKeys=__webpack_require__(350),enumBugKeys=__webpack_require__(278);module.exports=Object.keys||function keys(O){return internalObjectKeys(O,enumBugKeys)}},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(131);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 0:return function(){return fn.call(that)};case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports,__webpack_require__){"use strict";var fails=__webpack_require__(33);module.exports=function(METHOD_NAME,argument){var method=[][METHOD_NAME];return!method||!fails((function(){method.call(null,argument||function(){throw 1},1)}))}},function(module,exports,__webpack_require__){var $=__webpack_require__(19),from=__webpack_require__(585);$({target:"Array",stat:!0,forced:!__webpack_require__(283)((function(iterable){Array.from(iterable)}))},{from:from})},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){var redefine=__webpack_require__(75),DatePrototype=Date.prototype,nativeDateToString=DatePrototype.toString,getTime=DatePrototype.getTime;new Date(NaN)+""!="Invalid Date"&&redefine(DatePrototype,"toString",(function toString(){var value=getTime.call(this);return value==value?nativeDateToString.call(this):"Invalid Date"}))},function(module,exports,__webpack_require__){"use strict";var redefine=__webpack_require__(75),anObject=__webpack_require__(50),fails=__webpack_require__(33),flags=__webpack_require__(369),RegExpPrototype=RegExp.prototype,nativeToString=RegExpPrototype.toString,NOT_GENERIC=fails((function(){return"/a/b"!=nativeToString.call({source:"a",flags:"b"})})),INCORRECT_NAME="toString"!=nativeToString.name;(NOT_GENERIC||INCORRECT_NAME)&&redefine(RegExp.prototype,"toString",(function toString(){var R=anObject(this),p=String(R.source),rf=R.flags;return"/"+p+"/"+String(void 0===rf&&R instanceof RegExp&&!("flags"in RegExpPrototype)?flags.call(R):rf)}),{unsafe:!0})},function(module,exports,__webpack_require__){var hiddenKeys=__webpack_require__(175),isObject=__webpack_require__(40),has=__webpack_require__(60),defineProperty=__webpack_require__(61).f,uid=__webpack_require__(209),FREEZING=__webpack_require__(380),METADATA=uid("meta"),id=0,isExtensible=Object.isExtensible||function(){return!0},setMetadata=function(it){defineProperty(it,METADATA,{value:{objectID:"O"+ ++id,weakData:{}}})},meta=module.exports={REQUIRED:!1,fastKey:function(it,create){if(!isObject(it))return"symbol"==typeof it?it:("string"==typeof it?"S":"P")+it;if(!has(it,METADATA)){if(!isExtensible(it))return"F";if(!create)return"E";setMetadata(it)}return it[METADATA].objectID},getWeakData:function(it,create){if(!has(it,METADATA)){if(!isExtensible(it))return!0;if(!create)return!1;setMetadata(it)}return it[METADATA].weakData},onFreeze:function(it){return FREEZING&&meta.REQUIRED&&isExtensible(it)&&!has(it,METADATA)&&setMetadata(it),it}};hiddenKeys[METADATA]=!0},function(module,exports,__webpack_require__){"use strict";var events;__webpack_require__(27),Object.defineProperty(exports,"__esModule",{value:!0}),exports.DOCS_RENDERED=exports.STORY_THREW_EXCEPTION=exports.STORY_CHANGED=exports.STORY_ERRORED=exports.STORY_MISSING=exports.STORY_RENDERED=exports.STORY_RENDER=exports.STORY_ADDED=exports.STORY_INIT=exports.REGISTER_SUBSCRIPTION=exports.FORCE_RE_RENDER=exports.PREVIEW_KEYDOWN=exports.SELECT_STORY=exports.STORIES_CONFIGURED=exports.SET_STORIES=exports.GET_STORIES=exports.SET_CURRENT_STORY=exports.GET_CURRENT_STORY=exports.CHANNEL_CREATED=exports.default=void 0,function(events){events.CHANNEL_CREATED="channelCreated",events.GET_CURRENT_STORY="getCurrentStory",events.SET_CURRENT_STORY="setCurrentStory",events.GET_STORIES="getStories",events.SET_STORIES="setStories",events.STORIES_CONFIGURED="storiesConfigured",events.SELECT_STORY="selectStory",events.PREVIEW_KEYDOWN="previewKeydown",events.STORY_ADDED="storyAdded",events.STORY_CHANGED="storyChanged",events.STORY_UNCHANGED="storyUnchanged",events.FORCE_RE_RENDER="forceReRender",events.REGISTER_SUBSCRIPTION="registerSubscription",events.STORY_INIT="storyInit",events.STORY_RENDER="storyRender",events.STORY_RENDERED="storyRendered",events.STORY_MISSING="storyMissing",events.STORY_ERRORED="storyErrored",events.STORY_THREW_EXCEPTION="storyThrewException",events.DOCS_RENDERED="docsRendered"}(events||(events={}));var _default=events;exports.default=_default;var CHANNEL_CREATED=events.CHANNEL_CREATED,GET_CURRENT_STORY=events.GET_CURRENT_STORY,SET_CURRENT_STORY=events.SET_CURRENT_STORY,GET_STORIES=events.GET_STORIES,SET_STORIES=events.SET_STORIES,STORIES_CONFIGURED=events.STORIES_CONFIGURED,SELECT_STORY=events.SELECT_STORY,PREVIEW_KEYDOWN=events.PREVIEW_KEYDOWN,FORCE_RE_RENDER=events.FORCE_RE_RENDER,REGISTER_SUBSCRIPTION=events.REGISTER_SUBSCRIPTION,STORY_INIT=events.STORY_INIT,STORY_ADDED=events.STORY_ADDED,STORY_RENDER=events.STORY_RENDER,STORY_RENDERED=events.STORY_RENDERED,STORY_MISSING=events.STORY_MISSING,STORY_ERRORED=events.STORY_ERRORED,STORY_CHANGED=events.STORY_CHANGED,STORY_THREW_EXCEPTION=events.STORY_THREW_EXCEPTION,DOCS_RENDERED=events.DOCS_RENDERED;exports.DOCS_RENDERED=DOCS_RENDERED,exports.STORY_THREW_EXCEPTION=STORY_THREW_EXCEPTION,exports.STORY_CHANGED=STORY_CHANGED,exports.STORY_ERRORED=STORY_ERRORED,exports.STORY_MISSING=STORY_MISSING,exports.STORY_RENDERED=STORY_RENDERED,exports.STORY_RENDER=STORY_RENDER,exports.STORY_ADDED=STORY_ADDED,exports.STORY_INIT=STORY_INIT,exports.REGISTER_SUBSCRIPTION=REGISTER_SUBSCRIPTION,exports.FORCE_RE_RENDER=FORCE_RE_RENDER,exports.PREVIEW_KEYDOWN=PREVIEW_KEYDOWN,exports.SELECT_STORY=SELECT_STORY,exports.STORIES_CONFIGURED=STORIES_CONFIGURED,exports.SET_STORIES=SET_STORIES,exports.GET_STORIES=GET_STORIES,exports.SET_CURRENT_STORY=SET_CURRENT_STORY,exports.GET_CURRENT_STORY=GET_CURRENT_STORY,exports.CHANNEL_CREATED=CHANNEL_CREATED},function(module,exports){module.exports=function eq(value,other){return value===other||value!=value&&other!=other}},function(module,exports,__webpack_require__){"use strict";(function(module){__webpack_require__(27),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"storiesOf",{enumerable:!0,get:function get(){return _preview.storiesOf}}),Object.defineProperty(exports,"setAddon",{enumerable:!0,get:function get(){return _preview.setAddon}}),Object.defineProperty(exports,"addDecorator",{enumerable:!0,get:function get(){return _preview.addDecorator}}),Object.defineProperty(exports,"DecoratorFn",{enumerable:!0,get:function get(){return _preview.DecoratorFn}}),Object.defineProperty(exports,"addParameters",{enumerable:!0,get:function get(){return _preview.addParameters}}),Object.defineProperty(exports,"configure",{enumerable:!0,get:function get(){return _preview.configure}}),Object.defineProperty(exports,"getStorybook",{enumerable:!0,get:function get(){return _preview.getStorybook}}),Object.defineProperty(exports,"raw",{enumerable:!0,get:function get(){return _preview.raw}}),Object.defineProperty(exports,"forceReRender",{enumerable:!0,get:function get(){return _preview.forceReRender}});var _preview=__webpack_require__(579);module&&module.hot&&module.hot.decline&&module.hot.decline()}).call(this,__webpack_require__(132)(module))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DirectionalLight}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),DirectionalLight=function(_BaseDirectionalLight){function DirectionalLight(props){var _this;Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,DirectionalLight),_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(DirectionalLight).call(this,props));var _props$_shadow=props._shadow,_shadow=void 0!==_props$_shadow&&_props$_shadow;return _this.shadow=_shadow,_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(DirectionalLight,_BaseDirectionalLight),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(DirectionalLight,[{key:"getProjectedLight",value:function getProjectedLight(){return this}}]),DirectionalLight}(__webpack_require__(777).b)},function(module,__webpack_exports__,__webpack_require__){"use strict";var resolve_modules=__webpack_require__(137),program_manager=__webpack_require__(429),fp32=__webpack_require__(792),lights_glsl="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",lights={name:"lights",vs:lights_glsl,fs:lights_glsl,getUniforms:function getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:INITIAL_MODULE_OPTIONS;if("lightSources"in opts){var _ref3=opts.lightSources||{},ambientLight=_ref3.ambientLight,pointLights=_ref3.pointLights,directionalLights=_ref3.directionalLights;return ambientLight||pointLights&&pointLights.length>0||directionalLights&&directionalLights.length>0?Object.assign({},function getLightSourceUniforms(_ref2){var ambientLight=_ref2.ambientLight,_ref2$pointLights=_ref2.pointLights,pointLights=void 0===_ref2$pointLights?[]:_ref2$pointLights,_ref2$directionalLigh=_ref2.directionalLights,directionalLights=void 0===_ref2$directionalLigh?[]:_ref2$directionalLigh,lightSourceUniforms={};lightSourceUniforms["lighting_uAmbientLight.color"]=ambientLight?convertColor(ambientLight):[0,0,0];return pointLights.forEach((function(pointLight,index){lightSourceUniforms["lighting_uPointLight[".concat(index,"].color")]=convertColor(pointLight),lightSourceUniforms["lighting_uPointLight[".concat(index,"].position")]=pointLight.position,lightSourceUniforms["lighting_uPointLight[".concat(index,"].attenuation")]=pointLight.attenuation})),lightSourceUniforms.lighting_uPointLightCount=pointLights.length,directionalLights.forEach((function(directionalLight,index){lightSourceUniforms["lighting_uDirectionalLight[".concat(index,"].color")]=convertColor(directionalLight),lightSourceUniforms["lighting_uDirectionalLight[".concat(index,"].direction")]=directionalLight.direction})),lightSourceUniforms.lighting_uDirectionalLightCount=directionalLights.length,lightSourceUniforms}({ambientLight:ambientLight,pointLights:pointLights,directionalLights:directionalLights}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in opts){var lightSources={pointLights:[],directionalLights:[]},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=(opts.lights||[])[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var light=_step.value;switch(light.type){case"ambient":lightSources.ambientLight=light;break;case"directional":lightSources.directionalLights.push(light);break;case"point":lightSources.pointLights.push(light)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return getUniforms({lightSources:lightSources})}return{}},defines:{MAX_LIGHTS:3}},INITIAL_MODULE_OPTIONS={};function convertColor(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$color=_ref.color,color=void 0===_ref$color?[0,0,0]:_ref$color,_ref$intensity=_ref.intensity,intensity=void 0===_ref$intensity?1:_ref$intensity;return color.map((function(component){return component*intensity/255}))}var phong_lighting_glsl="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",gouraudlighting={name:"gouraud-lighting",dependencies:[lights],vs:phong_lighting_glsl,defines:{LIGHTING_VERTEX:1},getUniforms:phong_lighting_getUniforms},phonglighting={name:"phong-lighting",dependencies:[lights],fs:phong_lighting_glsl,defines:{LIGHTING_FRAGMENT:1},getUniforms:phong_lighting_getUniforms},phong_lighting_INITIAL_MODULE_OPTIONS={};function phong_lighting_getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:phong_lighting_INITIAL_MODULE_OPTIONS;if(!("material"in opts))return{};var material=opts.material;return material?function getMaterialUniforms(material){var materialUniforms={};return materialUniforms.lighting_uAmbient=material.ambient,materialUniforms.lighting_uDiffuse=material.diffuse,materialUniforms.lighting_uShininess=material.shininess,materialUniforms.lighting_uSpecularColor=material.specularColor.map((function(x){return x/255})),materialUniforms}(material):{lighting_uEnabled:!1}}var DEFAULT_MODULE_OPTIONS={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingThreshold:1,pickingActive:!1};var picking={name:"picking",vs:"uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n\n  if (selected) {\n    vec4 highLightColor = picking_uHighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function picking_getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DEFAULT_MODULE_OPTIONS,uniforms={};if(void 0!==opts.pickingSelectedColor)if(null===opts.pickingSelectedColor)uniforms.picking_uSelectedColorValid=0;else{var selectedColor=[opts.pickingSelectedColor[0],opts.pickingSelectedColor[1],opts.pickingSelectedColor[2]];uniforms.picking_uSelectedColorValid=1,uniforms.picking_uSelectedColor=selectedColor}return void 0!==opts.pickingHighlightColor&&(uniforms.picking_uHighlightColor=opts.pickingHighlightColor),void 0!==opts.pickingThreshold&&(uniforms.picking_uThreshold=opts.pickingThreshold),void 0!==opts.pickingActive&&(uniforms.picking_uActive=opts.pickingActive?1:0),uniforms}},geometry={name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n} geometry;\n",fs:"\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n"},project=__webpack_require__(124),project32={name:"project32",dependencies:[project.a],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64xyLow);\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64xyLow, offset, commonPosition);\n}\n"};__webpack_require__.d(__webpack_exports__,"b",(function(){return initializeShaderModules})),__webpack_require__.d(__webpack_exports__,"a",(function(){return createProgramManager}));var DEFAULT_MODULES=[geometry,project.a],SHADER_HOOKS=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"],MODULE_INJECTIONS={picking:[{hook:"fs:DECKGL_FILTER_COLOR",order:99,injection:"\n    // use highlight color if this fragment belongs to the selected object.\n    color = picking_filterHighlightColor(color);\n\n    // use picking color if rendering to picking FBO.\n    color = picking_filterPickingColor(color);\n  "}]};function initializeShaderModules(){Object(resolve_modules.b)([fp32.a,project.a,project32,gouraudlighting,phonglighting,picking])}function createProgramManager(gl){var programManager=program_manager.a.getDefaultProgramManager(gl),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=DEFAULT_MODULES[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var shaderModule=_step.value;programManager.addDefaultModule(shaderModule)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=SHADER_HOOKS[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var shaderHook=_step2.value;programManager.addShaderHook(shaderHook)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}for(var moduleName in MODULE_INJECTIONS){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=MODULE_INJECTIONS[moduleName][Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var injection=_step3.value;programManager.addModuleInjection(moduleName,injection)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}return programManager}},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(6),effect=__webpack_require__(121),with_parameters=__webpack_require__(114),lib_model=__webpack_require__(255),geometry=__webpack_require__(430),CLIPSPACE_VERTEX_SHADER="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",POSITIONS=[-1,-1,1,-1,-1,1,1,1],clip_space_ClipSpace=function(_Model){function ClipSpace(gl,opts){var _this;Object(classCallCheck.a)(this,ClipSpace);var TEX_COORDS=POSITIONS.map((function(coord){return-1===coord?0:coord}));return(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ClipSpace).call(this,gl,Object.assign({},opts,{vs:CLIPSPACE_VERTEX_SHADER,geometry:new geometry.a({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(POSITIONS)},aTexCoord:{size:2,value:new Float32Array(TEX_COORDS)},aCoordinate:{size:2,value:new Float32Array(TEX_COORDS)}}})})))).setVertexCount(4),_this}return Object(inherits.a)(ClipSpace,_Model),ClipSpace}(lib_model.a),clear=__webpack_require__(259),screen_pass_ScreenPass=function(_Pass){function ScreenPass(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,ScreenPass),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ScreenPass).call(this,gl,props));var module=props.module,fs=props.fs,id=props.id,moduleProps=props.moduleProps;return _this.model=_this._getModel(gl,module,fs,id,moduleProps),_this}return Object(inherits.a)(ScreenPass,_Pass),Object(createClass.a)(ScreenPass,[{key:"render",value:function render(params){var _this2=this,gl=this.gl;Object(with_parameters.a)(gl,{framebuffer:params.outputBuffer,clearColor:[0,0,0,0]},(function(){return _this2._renderPass(gl,params)}))}},{key:"delete",value:function _delete(){this.model.delete(),this.model=null}},{key:"_getModel",value:function _getModel(gl,module,fs,id,userProps){var model=new clip_space_ClipSpace(gl,{id:id,fs:fs,modules:[module]}),uniforms=Object.assign(module.getUniforms(),module.getUniforms(userProps));return model.setUniforms(uniforms),model}},{key:"_renderPass",value:function _renderPass(gl,_ref){var inputBuffer=_ref.inputBuffer;_ref.outputBuffer;Object(clear.a)(gl,{color:!0}),this.model.draw({uniforms:{texture:inputBuffer,texSize:[inputBuffer.width,inputBuffer.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),ScreenPass}(__webpack_require__(253).a),shader_module=__webpack_require__(160);__webpack_require__.d(__webpack_exports__,"a",(function(){return post_process_effect_PostProcessEffect}));var post_process_effect_PostProcessEffect=function(_Effect){function PostProcessEffect(module){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,PostProcessEffect),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PostProcessEffect).call(this,props))).id="".concat(module.name,"-pass"),Object(shader_module.b)(module),_this.module=module,_this}return Object(inherits.a)(PostProcessEffect,_Effect),Object(createClass.a)(PostProcessEffect,[{key:"prepare",value:function prepare(gl){this.passes||(this.passes=function createPasses(gl,module,id,moduleProps){if(module.filter||module.sampler){var fs=getFragmentShaderForRenderPass(module);return[new screen_pass_ScreenPass(gl,{id:id,module:module,fs:fs,moduleProps:moduleProps})]}return(module.passes||[]).map((function(pass,index){var fs=getFragmentShaderForRenderPass(module,pass),idn="".concat(id,"-").concat(index);return new screen_pass_ScreenPass(gl,{id:idn,module:module,fs:fs,moduleProps:moduleProps})}))}(gl,this.module,this.id,this.props))}},{key:"render",value:function render(params){for(var _params$target=params.target,target=void 0===_params$target?null:_params$target,switchBuffer=!1,index=0;index<this.passes.length;index++){var inputBuffer=switchBuffer?params.outputBuffer:params.inputBuffer,outputBuffer=switchBuffer?params.inputBuffer:params.outputBuffer;target&&index===this.passes.length-1&&(outputBuffer=target),this.passes[index].render({inputBuffer:inputBuffer,outputBuffer:outputBuffer}),switchBuffer=!switchBuffer}return{inputBuffer:switchBuffer?params.outputBuffer:params.inputBuffer,outputBuffer:switchBuffer?params.inputBuffer:params.outputBuffer}}},{key:"cleanup",value:function cleanup(){if(this.passes){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.passes[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.delete()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.passes=null}}}]),PostProcessEffect}(effect.a);var FILTER_FS_TEMPLATE=function FILTER_FS_TEMPLATE(func){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(func,"(gl_FragColor, texSize, texCoord);\n}\n")},SAMPLER_FS_TEMPLATE=function SAMPLER_FS_TEMPLATE(func){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(func,"(texture, texSize, texCoord);\n}\n")};function getFragmentShaderForRenderPass(module){var pass=arguments.length>1&&void 0!==arguments[1]?arguments[1]:module;if(pass.filter){var func="string"==typeof pass.filter?pass.filter:"".concat(module.name,"_filterColor");return FILTER_FS_TEMPLATE(func)}if(pass.sampler){var _func="string"==typeof pass.sampler?pass.sampler:"".concat(module.name,"_sampleColor");return SAMPLER_FS_TEMPLATE(_func)}return null}},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(6),program_manager=__webpack_require__(429),texture_2d=__webpack_require__(161),light_source=__webpack_require__(777),directional_light=__webpack_require__(189),effect=__webpack_require__(121),matrix4=__webpack_require__(201),vector3=__webpack_require__(42),defineProperty=__webpack_require__(0),get=__webpack_require__(20),layers_pass=__webpack_require__(122),renderbuffer=__webpack_require__(140),framebuffer=__webpack_require__(69),with_parameters=__webpack_require__(114),device_pixels=__webpack_require__(319),shadow_pass_ShadowPass=function(_LayersPass){function ShadowPass(gl,props){var _parameters,_attachments,_this;return Object(classCallCheck.a)(this,ShadowPass),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ShadowPass).call(this,gl,props))).shadowMap=new texture_2d.a(gl,{width:1,height:1,parameters:(_parameters={},Object(defineProperty.a)(_parameters,10241,9729),Object(defineProperty.a)(_parameters,10240,9729),Object(defineProperty.a)(_parameters,10242,33071),Object(defineProperty.a)(_parameters,10243,33071),_parameters)}),_this.depthBuffer=new renderbuffer.a(gl,{format:33189,width:1,height:1}),_this.fbo=new framebuffer.a(gl,{id:"shadowmap",width:1,height:1,attachments:(_attachments={},Object(defineProperty.a)(_attachments,36064,_this.shadowMap),Object(defineProperty.a)(_attachments,36096,_this.depthBuffer),_attachments)}),_this}return Object(inherits.a)(ShadowPass,_LayersPass),Object(createClass.a)(ShadowPass,[{key:"render",value:function render(params){var _this2=this,target=this.fbo;Object(with_parameters.a)(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(function(){var viewport=params.viewports[0],pixelRatio=Object(device_pixels.b)(_this2.gl),width=viewport.width*pixelRatio,height=viewport.height*pixelRatio;width===target.width&&height===target.height||target.resize({width:width,height:height}),Object(get.a)(Object(getPrototypeOf.a)(ShadowPass.prototype),"render",_this2).call(_this2,Object.assign(params,{outputBuffer:target}))}))}},{key:"getModuleParameters",value:function getModuleParameters(layer,effects,effectProps){var moduleParameters=Object.assign(Object.create(layer.props),{viewport:layer.context.viewport,pickingActive:0,drawToShadowMap:!0,devicePixelRatio:Object(device_pixels.b)(this.gl)});return Object.assign(moduleParameters,effectProps),moduleParameters}},{key:"delete",value:function _delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),ShadowPass}(layers_pass.a),shadow=__webpack_require__(159);__webpack_require__.d(__webpack_exports__,"a",(function(){return lighting_effect_LightingEffect}));var DEFAULT_AMBIENT_LIGHT_PROPS={color:[255,255,255],intensity:1},DEFAULT_DIRECTIONAL_LIGHT_PROPS=[{color:[255,255,255],intensity:1,direction:[-1,-3,-1]},{color:[255,255,255],intensity:.9,direction:[1,8,-2.5]}],DEFAULT_SHADOW_COLOR=[0,0,0,200/255],lighting_effect_LightingEffect=function(_Effect){function LightingEffect(props){var _this;for(var key in Object(classCallCheck.a)(this,LightingEffect),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(LightingEffect).call(this,props))).ambientLight=null,_this.directionalLights=[],_this.pointLights=[],_this.shadowColor=DEFAULT_SHADOW_COLOR,_this.shadowPasses=[],_this.dummyShadowMap=null,_this.shadow=!1,_this.programManager=null,props){var lightSource=props[key];switch(lightSource.type){case"ambient":_this.ambientLight=lightSource;break;case"directional":_this.directionalLights.push(lightSource);break;case"point":_this.pointLights.push(lightSource)}}return _this._applyDefaultLights(),_this.shadow=_this.directionalLights.some((function(light){return light.shadow})),_this}return Object(inherits.a)(LightingEffect,_Effect),Object(createClass.a)(LightingEffect,[{key:"prepare",value:function prepare(gl,_ref){var layers=_ref.layers,viewports=_ref.viewports,onViewportActive=_ref.onViewportActive,views=_ref.views;if(!this.shadow)return{};var shadowMatrices=this._createLightMatrix();0===this.shadowPasses.length&&this._createShadowPasses(gl),this.programManager||(this.programManager=program_manager.a.getDefaultProgramManager(gl),shadow.a&&this.programManager.addDefaultModule(shadow.a)),this.dummyShadowMap||(this.dummyShadowMap=new texture_2d.a(gl,{width:1,height:1}));for(var shadowMaps=[],i=0;i<this.shadowPasses.length;i++){var shadowPass=this.shadowPasses[i];shadowPass.render({layers:layers.filter((function(layer){return!1!==layer.props.shadowEnabled})),viewports:viewports,onViewportActive:onViewportActive,views:views,effectProps:{shadowLightId:i,dummyShadowMap:this.dummyShadowMap,shadowMatrices:shadowMatrices}}),shadowMaps.push(shadowPass.shadowMap)}return{shadowMaps:shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:shadowMatrices}}},{key:"getParameters",value:function getParameters(layer){var ambientLight=this.ambientLight,pointLights=this._getProjectedPointLights(layer);return{lightSources:{ambientLight:ambientLight,directionalLights:this._getProjectedDirectionalLights(layer),pointLights:pointLights}}}},{key:"cleanup",value:function cleanup(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.shadowPasses[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.delete()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.shadowPasses.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(shadow.a),this.programManager=null)}},{key:"_createLightMatrix",value:function _createLightMatrix(){var lightMatrices=[],_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.directionalLights[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var light=_step2.value,viewMatrix=(new matrix4.a).lookAt({eye:new vector3.a(light.direction).negate()});lightMatrices.push(viewMatrix)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return lightMatrices}},{key:"_createShadowPasses",value:function _createShadowPasses(gl){for(var i=0;i<this.directionalLights.length;i++)this.shadowPasses.push(new shadow_pass_ShadowPass(gl))}},{key:"_applyDefaultLights",value:function _applyDefaultLights(){var ambientLight=this.ambientLight,pointLights=this.pointLights,directionalLights=this.directionalLights;ambientLight||0!==pointLights.length||0!==directionalLights.length||(this.ambientLight=new light_source.a(DEFAULT_AMBIENT_LIGHT_PROPS),this.directionalLights.push(new directional_light.a(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0])),this.directionalLights.push(new directional_light.a(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1])))}},{key:"_getProjectedPointLights",value:function _getProjectedPointLights(layer){for(var projectedPointLights=[],i=0;i<this.pointLights.length;i++){var pointLight=this.pointLights[i];projectedPointLights.push(pointLight.getProjectedLight({layer:layer}))}return projectedPointLights}},{key:"_getProjectedDirectionalLights",value:function _getProjectedDirectionalLights(layer){for(var projectedDirectionalLights=[],i=0;i<this.directionalLights.length;i++){var directionalLight=this.directionalLights[i];projectedDirectionalLights.push(directionalLight.getProjectedLight({layer:layer}))}return projectedDirectionalLights}}]),LightingEffect}(effect.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";var _MODULE_INJECTORS,defineProperty=__webpack_require__(0),constants=__webpack_require__(24),assert=__webpack_require__(141);__webpack_require__.d(__webpack_exports__,"a",(function(){return DECLARATION_INJECT_MARKER})),__webpack_require__.d(__webpack_exports__,"c",(function(){return injectShader})),__webpack_require__.d(__webpack_exports__,"b",(function(){return combineInjects}));var MODULE_INJECTORS=(_MODULE_INJECTORS={},Object(defineProperty.a)(_MODULE_INJECTORS,constants.b,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(defineProperty.a)(_MODULE_INJECTORS,constants.a,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),_MODULE_INJECTORS),DECLARATION_INJECT_MARKER="__LUMA_INJECT_DECLARATIONS__",REGEX_START_OF_MAIN=/void main\s*\([^)]*\)\s*\{\n?/,REGEX_END_OF_MAIN=/}\n?[^{}]*$/,fragments=[];function injectShader(source,type,inject,injectStandardStubs){var isVertex=type===constants.b,_loop=function _loop(key){var fragmentData=inject[key];fragmentData.sort((function(a,b){return a.order-b.order})),fragments.length=fragmentData.length;for(var i=0,len=fragmentData.length;i<len;++i)fragments[i]=fragmentData[i].injection;var fragmentString="".concat(fragments.join("\n"),"\n");switch(key){case"vs:#decl":isVertex&&(source=source.replace(DECLARATION_INJECT_MARKER,fragmentString));break;case"vs:#main-start":isVertex&&(source=source.replace(REGEX_START_OF_MAIN,(function(match){return match+fragmentString})));break;case"vs:#main-end":isVertex&&(source=source.replace(REGEX_END_OF_MAIN,(function(match){return fragmentString+match})));break;case"fs:#decl":isVertex||(source=source.replace(DECLARATION_INJECT_MARKER,fragmentString));break;case"fs:#main-start":isVertex||(source=source.replace(REGEX_START_OF_MAIN,(function(match){return match+fragmentString})));break;case"fs:#main-end":isVertex||(source=source.replace(REGEX_END_OF_MAIN,(function(match){return fragmentString+match})));break;default:source=source.replace(key,(function(match){return match+fragmentString}))}};for(var key in inject)_loop(key);return source=source.replace(DECLARATION_INJECT_MARKER,""),injectStandardStubs&&(source=source.replace(/\}\s*$/,(function(match){return match+MODULE_INJECTORS[type]}))),source}function combineInjects(injects){var result={};return Object(assert.a)(Array.isArray(injects)&&injects.length>1),injects.forEach((function(inject){for(var key in inject)result[key]=result[key]?"".concat(result[key],"\n").concat(inject[key]):inject[key]})),result}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return setParameters})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getParameters})),__webpack_require__.d(__webpack_exports__,"b",(function(){return resetParameters}));var _webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(68);__webpack_require__(310),__webpack_require__(167);function setParameters(gl,values){var compositeSetters={};for(var key in values){var glConstant=Number(key),setter=_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.d[key];setter&&("string"==typeof setter?compositeSetters[setter]=!0:setter(gl,values[key],glConstant))}var cache=gl.state&&gl.state.cache;if(cache){var mergedValues=Object.assign({},cache,values);for(var _key in compositeSetters){(0,_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.a[_key])(gl,mergedValues)}}}function getParameter(gl,key){var getter=_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.c[key];return getter?getter(gl,Number(key)):gl.getParameter(Number(key))}function getParameters(gl,parameters){parameters=parameters||_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.b;var parameterKeys=Array.isArray(parameters)?parameters:Object.keys(parameters),state={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=parameterKeys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;state[key]=getParameter(gl,key)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return state}function resetParameters(gl){setParameters(gl,function getDefaultParameters(gl){return Object.assign({},_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.b,{})}())}},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error("math.gl assertion ".concat(message))}__webpack_require__.d(__webpack_exports__,"a",(function(){return assert}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(6),assertThisInitialized=__webpack_require__(7),slicedToArray=__webpack_require__(9),math_utils=__webpack_require__(56),web_mercator_utils=__webpack_require__(22),mat4=__webpack_require__(15),IDENTITY=Object(math_utils.a)(),viewport_Viewport=function(){function Viewport(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=_ref.width,height=_ref.height,_ref$viewMatrix=_ref.viewMatrix,viewMatrix=void 0===_ref$viewMatrix?IDENTITY:_ref$viewMatrix,_ref$projectionMatrix=_ref.projectionMatrix,projectionMatrix=void 0===_ref$projectionMatrix?IDENTITY:_ref$projectionMatrix;Object(classCallCheck.a)(this,Viewport),this.width=width||1,this.height=height||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=viewMatrix,this.projectionMatrix=projectionMatrix;var vpm=Object(math_utils.a)();mat4.g(vpm,vpm,this.projectionMatrix),mat4.g(vpm,vpm,this.viewMatrix),this.viewProjectionMatrix=vpm;var m=Object(math_utils.a)();mat4.n(m,m,[this.width/2,-this.height/2,1]),mat4.o(m,m,[1,-1,0]),mat4.g(m,m,this.viewProjectionMatrix);var mInverse=mat4.e(Object(math_utils.a)(),m);if(!mInverse)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=mInverse,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(createClass.a)(Viewport,[{key:"equals",value:function equals(viewport){return viewport instanceof Viewport&&(viewport.width===this.width&&viewport.height===this.height&&mat4.b(viewport.projectionMatrix,this.projectionMatrix)&&mat4.b(viewport.viewMatrix,this.viewMatrix))}},{key:"project",value:function project(xyz){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$topLeft=_ref2.topLeft,topLeft=void 0===_ref2$topLeft||_ref2$topLeft,worldPosition=this.projectPosition(xyz),coord=Object(web_mercator_utils.k)(worldPosition,this.pixelProjectionMatrix),_coord=Object(slicedToArray.a)(coord,2),x=_coord[0],y=_coord[1],y2=topLeft?y:this.height-y;return 2===xyz.length?[x,y2]:[x,y2,coord[2]]}},{key:"unproject",value:function unproject(xyz){var _ref3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref3$topLeft=_ref3.topLeft,topLeft=void 0===_ref3$topLeft||_ref3$topLeft,targetZ=_ref3.targetZ,_xyz=Object(slicedToArray.a)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],y2=topLeft?y:this.height-y,targetZWorld=targetZ&&targetZ*this.pixelsPerMeter,coord=Object(web_mercator_utils.h)([x,y2,z],this.pixelUnprojectionMatrix,targetZWorld),_this$unprojectPositi=this.unprojectPosition(coord),_this$unprojectPositi2=Object(slicedToArray.a)(_this$unprojectPositi,3),X=_this$unprojectPositi2[0],Y=_this$unprojectPositi2[1],Z=_this$unprojectPositi2[2];return Number.isFinite(z)?[X,Y,Z]:Number.isFinite(targetZ)?[X,Y,targetZ]:[X,Y]}},{key:"projectPosition",value:function projectPosition(xyz){var _this$projectFlat=this.projectFlat(xyz),_this$projectFlat2=Object(slicedToArray.a)(_this$projectFlat,2);return[_this$projectFlat2[0],_this$projectFlat2[1],(xyz[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function unprojectPosition(xyz){var _this$unprojectFlat=this.unprojectFlat(xyz),_this$unprojectFlat2=Object(slicedToArray.a)(_this$unprojectFlat,2);return[_this$unprojectFlat2[0],_this$unprojectFlat2[1],(xyz[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function projectFlat(xyz){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return xyz}},{key:"unprojectFlat",value:function unprojectFlat(xyz){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return xyz}}]),Viewport}(),fit_bounds=__webpack_require__(313),vec2=__webpack_require__(48);__webpack_require__.d(__webpack_exports__,"a",(function(){return web_mercator_viewport_WebMercatorViewport}));var web_mercator_viewport_WebMercatorViewport=function(_Viewport){function WebMercatorViewport(){var _this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=_ref.width,height=_ref.height,_ref$latitude=_ref.latitude,latitude=void 0===_ref$latitude?0:_ref$latitude,_ref$longitude=_ref.longitude,longitude=void 0===_ref$longitude?0:_ref$longitude,_ref$zoom=_ref.zoom,zoom=void 0===_ref$zoom?0:_ref$zoom,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?0:_ref$pitch,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?0:_ref$bearing,_ref$altitude=_ref.altitude,altitude=void 0===_ref$altitude?1.5:_ref$altitude,nearZMultiplier=_ref.nearZMultiplier,farZMultiplier=_ref.farZMultiplier;Object(classCallCheck.a)(this,WebMercatorViewport),width=width||1,height=height||1;var scale=Object(web_mercator_utils.l)(zoom);altitude=Math.max(.75,altitude);var center=Object(web_mercator_utils.g)([longitude,latitude],scale);center[2]=0;var projectionMatrix=Object(web_mercator_utils.d)({width:width,height:height,pitch:pitch,bearing:bearing,altitude:altitude,nearZMultiplier:nearZMultiplier||1/height,farZMultiplier:farZMultiplier||1.01}),viewMatrix=Object(web_mercator_utils.f)({height:height,center:center,pitch:pitch,bearing:bearing,altitude:altitude,flipY:!0});return(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(WebMercatorViewport).call(this,{width:width,height:height,viewMatrix:viewMatrix,projectionMatrix:projectionMatrix}))).latitude=latitude,_this.longitude=longitude,_this.zoom=zoom,_this.pitch=pitch,_this.bearing=bearing,_this.altitude=altitude,_this.scale=scale,_this.center=center,_this.pixelsPerMeter=Object(web_mercator_utils.b)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this))).pixelsPerMeter[2],Object.freeze(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this))),_this}return Object(inherits.a)(WebMercatorViewport,_Viewport),Object(createClass.a)(WebMercatorViewport,[{key:"projectFlat",value:function projectFlat(lngLat){var scale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(web_mercator_utils.g)(lngLat,scale)}},{key:"unprojectFlat",value:function unprojectFlat(xy){var scale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(web_mercator_utils.j)(xy,scale)}},{key:"getMapCenterByLngLatPosition",value:function getMapCenterByLngLatPosition(_ref2){var lngLat=_ref2.lngLat,pos=_ref2.pos,fromLocation=Object(web_mercator_utils.h)(pos,this.pixelUnprojectionMatrix),toLocation=Object(web_mercator_utils.g)(lngLat,this.scale),translate=vec2.a([],toLocation,vec2.d([],fromLocation)),newCenter=vec2.a([],this.center,translate);return Object(web_mercator_utils.j)(newCenter,this.scale)}},{key:"getLocationAtPoint",value:function getLocationAtPoint(_ref3){var lngLat=_ref3.lngLat,pos=_ref3.pos;return this.getMapCenterByLngLatPosition({lngLat:lngLat,pos:pos})}},{key:"fitBounds",value:function fitBounds(bounds){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},width=this.width,height=this.height,_fitBounds2=Object(fit_bounds.a)(Object.assign({width:width,height:height,bounds:bounds},options)),longitude=_fitBounds2.longitude,latitude=_fitBounds2.latitude,zoom=_fitBounds2.zoom;return new WebMercatorViewport({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom})}}]),WebMercatorViewport}(viewport_Viewport)},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){__webpack_require__.d(__webpack_exports__,"c",(function(){return headlessGL})),__webpack_require__.d(__webpack_exports__,"b",(function(){return WebGLBuffer})),__webpack_require__.d(__webpack_exports__,"a",(function(){return WebGL2RenderingContext}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_utils_globals__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(55),_utils_is_browser__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(249),ERR_HEADLESSGL_LOAD="luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.",m=module,headlessTypes=null;function headlessGL(){var headless=m.require("gl");if(!headless)throw new Error(ERR_HEADLESSGL_LOAD);return headless.apply(void 0,arguments)}if(!_utils_is_browser__WEBPACK_IMPORTED_MODULE_2__.a)try{headlessTypes=m.require("gl/wrap")}catch(error){}var DummyType=function DummyType(){Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,DummyType)},_ref=headlessTypes||_utils_globals__WEBPACK_IMPORTED_MODULE_1__.a,_ref$WebGLBuffer=(_ref.WebGLRenderingContext,_ref.WebGLProgram,_ref.WebGLShader,_ref.WebGLBuffer),WebGLBuffer=void 0===_ref$WebGLBuffer?DummyType:_ref$WebGLBuffer;_ref.WebGLFramebuffer,_ref.WebGLRenderbuffer,_ref.WebGLTexture,_ref.WebGLUniformLocation,_ref.WebGLActiveInfo,_ref.WebGLShaderPrecisionFormat;var WebGL2RenderingContext=function getWebGL2RenderingContext(){return _utils_globals__WEBPACK_IMPORTED_MODULE_1__.a.WebGL2RenderingContext||function WebGL2RenderingContextNotSupported(){Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,WebGL2RenderingContextNotSupported)}}();(function getImage(){return _utils_globals__WEBPACK_IMPORTED_MODULE_1__.a.Image||function ImageNotSupported(){Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,ImageNotSupported)}})()}).call(this,__webpack_require__(358)(module))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FEATURES}));var _FEATURES$WEBGL2$FEAT,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_classes_framebuffer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(69),_classes_texture_2d__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(161),FEATURES={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"},float32ColorAttachmentSupport=null;__webpack_exports__.b=(_FEATURES$WEBGL2$FEAT={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.WEBGL2,[!1,!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.FLOAT_BLEND,["EXT_float_blend"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FLOAT,["OES_texture_float",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ATTACHMENT_RGBA32F,[function checkFloat32ColorAttachment(gl){if(null!==float32ColorAttachmentSupport)return float32ColorAttachmentSupport;var testTexture=new _classes_texture_2d__WEBPACK_IMPORTED_MODULE_2__.a(gl,{format:6408,type:5126,dataFormat:6408}),testFb=new _classes_framebuffer__WEBPACK_IMPORTED_MODULE_1__.a(gl,{id:"test-framebuffer",check:!1,attachments:Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},36064,testTexture)}),status=testFb.getStatus();return testTexture.delete(),testFb.delete(),float32ColorAttachmentSupport=36053===status},"EXT_color_buffer_float"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ATTACHMENT_HALF_FLOAT,["EXT_color_buffer_half_float"]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),_FEATURES$WEBGL2$FEAT)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(window,document,exportName,undefined){"use strict";var assign,VENDOR_PREFIXES=["","webkit","Moz","MS","ms","o"],TEST_ELEMENT=document.createElement("div"),TYPE_FUNCTION="function",round=Math.round,abs=Math.abs,now=Date.now;function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout)}function invokeArrayArg(arg,fn,context){return!!Array.isArray(arg)&&(each(arg,context[fn],context),!0)}function each(obj,iterator,context){var i;if(obj)if(obj.forEach)obj.forEach(iterator,context);else if(obj.length!==undefined)for(i=0;i<obj.length;)iterator.call(context,obj[i],i,obj),i++;else for(i in obj)obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)}function deprecate(method,name,message){var deprecationMessage="DEPRECATED METHOD: "+name+"\n"+message+" AT \n";return function(){var e=new Error("get-stack-trace"),stack=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",log=window.console&&(window.console.warn||window.console.log);return log&&log.call(window.console,deprecationMessage,stack),method.apply(this,arguments)}}assign="function"!=typeof Object.assign?function assign(target){if(target===undefined||null===target)throw new TypeError("Cannot convert undefined or null to object");for(var output=Object(target),index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&null!==source)for(var nextKey in source)source.hasOwnProperty(nextKey)&&(output[nextKey]=source[nextKey])}return output}:Object.assign;var extend=deprecate((function extend(dest,src,merge){for(var keys=Object.keys(src),i=0;i<keys.length;)(!merge||merge&&dest[keys[i]]===undefined)&&(dest[keys[i]]=src[keys[i]]),i++;return dest}),"extend","Use `assign`."),merge=deprecate((function merge(dest,src){return extend(dest,src,!0)}),"merge","Use `assign`.");function inherit(child,base,properties){var childP,baseP=base.prototype;(childP=child.prototype=Object.create(baseP)).constructor=child,childP._super=baseP,properties&&assign(childP,properties)}function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments)}}function boolOrFn(val,args){return typeof val==TYPE_FUNCTION?val.apply(args&&args[0]||undefined,args):val}function ifUndefined(val1,val2){return val1===undefined?val2:val1}function addEventListeners(target,types,handler){each(splitStr(types),(function(type){target.addEventListener(type,handler,!1)}))}function removeEventListeners(target,types,handler){each(splitStr(types),(function(type){target.removeEventListener(type,handler,!1)}))}function hasParent(node,parent){for(;node;){if(node==parent)return!0;node=node.parentNode}return!1}function inStr(str,find){return str.indexOf(find)>-1}function splitStr(str){return str.trim().split(/\s+/g)}function inArray(src,find,findByKey){if(src.indexOf&&!findByKey)return src.indexOf(find);for(var i=0;i<src.length;){if(findByKey&&src[i][findByKey]==find||!findByKey&&src[i]===find)return i;i++}return-1}function toArray(obj){return Array.prototype.slice.call(obj,0)}function uniqueArray(src,key,sort){for(var results=[],values=[],i=0;i<src.length;){var val=key?src[i][key]:src[i];inArray(values,val)<0&&results.push(src[i]),values[i]=val,i++}return sort&&(results=key?results.sort((function sortUniqueArray(a,b){return a[key]>b[key]})):results.sort()),results}function prefixed(obj,property){for(var prefix,prop,camelProp=property[0].toUpperCase()+property.slice(1),i=0;i<VENDOR_PREFIXES.length;){if((prop=(prefix=VENDOR_PREFIXES[i])?prefix+camelProp:property)in obj)return prop;i++}return undefined}var _uniqueId=1;function getWindowForElement(element){var doc=element.ownerDocument||element;return doc.defaultView||doc.parentWindow||window}var SUPPORT_TOUCH="ontouchstart"in window,SUPPORT_POINTER_EVENTS=prefixed(window,"PointerEvent")!==undefined,SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),COMPUTE_INTERVAL=25,INPUT_START=1,INPUT_MOVE=2,INPUT_END=4,INPUT_CANCEL=8,DIRECTION_NONE=1,DIRECTION_LEFT=2,DIRECTION_RIGHT=4,DIRECTION_UP=8,DIRECTION_DOWN=16,DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT,DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN,DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,PROPS_XY=["x","y"],PROPS_CLIENT_XY=["clientX","clientY"];function Input(manager,callback){var self=this;this.manager=manager,this.callback=callback,this.element=manager.element,this.target=manager.options.inputTarget,this.domHandler=function(ev){boolOrFn(manager.options.enable,[manager])&&self.handler(ev)},this.init()}function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length,changedPointersLen=input.changedPointers.length,isFirst=eventType&INPUT_START&&pointersLen-changedPointersLen==0,isFinal=eventType&(INPUT_END|INPUT_CANCEL)&&pointersLen-changedPointersLen==0;input.isFirst=!!isFirst,input.isFinal=!!isFinal,isFirst&&(manager.session={}),input.eventType=eventType,function computeInputData(manager,input){var session=manager.session,pointers=input.pointers,pointersLength=pointers.length;session.firstInput||(session.firstInput=simpleCloneInputData(input));pointersLength>1&&!session.firstMultiple?session.firstMultiple=simpleCloneInputData(input):1===pointersLength&&(session.firstMultiple=!1);var firstInput=session.firstInput,firstMultiple=session.firstMultiple,offsetCenter=firstMultiple?firstMultiple.center:firstInput.center,center=input.center=getCenter(pointers);input.timeStamp=now(),input.deltaTime=input.timeStamp-firstInput.timeStamp,input.angle=getAngle(offsetCenter,center),input.distance=getDistance(offsetCenter,center),function computeDeltaXY(session,input){var center=input.center,offset=session.offsetDelta||{},prevDelta=session.prevDelta||{},prevInput=session.prevInput||{};input.eventType!==INPUT_START&&prevInput.eventType!==INPUT_END||(prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0},offset=session.offsetDelta={x:center.x,y:center.y});input.deltaX=prevDelta.x+(center.x-offset.x),input.deltaY=prevDelta.y+(center.y-offset.y)}(session,input),input.offsetDirection=getDirection(input.deltaX,input.deltaY);var overallVelocity=getVelocity(input.deltaTime,input.deltaX,input.deltaY);input.overallVelocityX=overallVelocity.x,input.overallVelocityY=overallVelocity.y,input.overallVelocity=abs(overallVelocity.x)>abs(overallVelocity.y)?overallVelocity.x:overallVelocity.y,input.scale=firstMultiple?function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY)}(firstMultiple.pointers,pointers):1,input.rotation=firstMultiple?function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)+getAngle(start[1],start[0],PROPS_CLIENT_XY)}(firstMultiple.pointers,pointers):0,input.maxPointers=session.prevInput?input.pointers.length>session.prevInput.maxPointers?input.pointers.length:session.prevInput.maxPointers:input.pointers.length,function computeIntervalInputData(session,input){var velocity,velocityX,velocityY,direction,last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=input.deltaX-last.deltaX,deltaY=input.deltaY-last.deltaY,v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x,velocityY=v.y,velocity=abs(v.x)>abs(v.y)?v.x:v.y,direction=getDirection(deltaX,deltaY),session.lastInterval=input}else velocity=last.velocity,velocityX=last.velocityX,velocityY=last.velocityY,direction=last.direction;input.velocity=velocity,input.velocityX=velocityX,input.velocityY=velocityY,input.direction=direction}(session,input);var target=manager.element;hasParent(input.srcEvent.target,target)&&(target=input.srcEvent.target);input.target=target}(manager,input),manager.emit("hammer.input",input),manager.recognize(input),manager.session.prevInput=input}function simpleCloneInputData(input){for(var pointers=[],i=0;i<input.pointers.length;)pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)},i++;return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY}}function getCenter(pointers){var pointersLength=pointers.length;if(1===pointersLength)return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};for(var x=0,y=0,i=0;i<pointersLength;)x+=pointers[i].clientX,y+=pointers[i].clientY,i++;return{x:round(x/pointersLength),y:round(y/pointersLength)}}function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0}}function getDirection(x,y){return x===y?DIRECTION_NONE:abs(x)>=abs(y)?x<0?DIRECTION_LEFT:DIRECTION_RIGHT:y<0?DIRECTION_UP:DIRECTION_DOWN}function getDistance(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt(x*x+y*y)}function getAngle(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return 180*Math.atan2(y,x)/Math.PI}Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)}};var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END},MOUSE_ELEMENT_EVENTS="mousedown",MOUSE_WINDOW_EVENTS="mousemove mouseup";function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS,this.evWin=MOUSE_WINDOW_EVENTS,this.pressed=!1,Input.apply(this,arguments)}inherit(MouseInput,Input,{handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];eventType&INPUT_START&&0===ev.button&&(this.pressed=!0),eventType&INPUT_MOVE&&1!==ev.which&&(eventType=INPUT_END),this.pressed&&(eventType&INPUT_END&&(this.pressed=!1),this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:"mouse",srcEvent:ev}))}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL},IE10_POINTER_TYPE_ENUM={2:"touch",3:"pen",4:"mouse",5:"kinect"},POINTER_ELEMENT_EVENTS="pointerdown",POINTER_WINDOW_EVENTS="pointermove pointerup pointercancel";function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS,this.evWin=POINTER_WINDOW_EVENTS,Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}window.MSPointerEvent&&!window.PointerEvent&&(POINTER_ELEMENT_EVENTS="MSPointerDown",POINTER_WINDOW_EVENTS="MSPointerMove MSPointerUp MSPointerCancel"),inherit(PointerEventInput,Input,{handler:function PEhandler(ev){var store=this.store,removePointer=!1,eventTypeNormalized=ev.type.toLowerCase().replace("ms",""),eventType=POINTER_INPUT_MAP[eventTypeNormalized],pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType,isTouch="touch"==pointerType,storeIndex=inArray(store,ev.pointerId,"pointerId");eventType&INPUT_START&&(0===ev.button||isTouch)?storeIndex<0&&(store.push(ev),storeIndex=store.length-1):eventType&(INPUT_END|INPUT_CANCEL)&&(removePointer=!0),storeIndex<0||(store[storeIndex]=ev,this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev}),removePointer&&store.splice(storeIndex,1))}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},SINGLE_TOUCH_TARGET_EVENTS="touchstart",SINGLE_TOUCH_WINDOW_EVENTS="touchstart touchmove touchend touchcancel";function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS,this.evWin=SINGLE_TOUCH_WINDOW_EVENTS,this.started=!1,Input.apply(this,arguments)}function normalizeSingleTouches(ev,type){var all=toArray(ev.touches),changed=toArray(ev.changedTouches);return type&(INPUT_END|INPUT_CANCEL)&&(all=uniqueArray(all.concat(changed),"identifier",!0)),[all,changed]}inherit(SingleTouchInput,Input,{handler:function TEhandler(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(type===INPUT_START&&(this.started=!0),this.started){var touches=normalizeSingleTouches.call(this,ev,type);type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length==0&&(this.started=!1),this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:"touch",srcEvent:ev})}}});var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},TOUCH_TARGET_EVENTS="touchstart touchmove touchend touchcancel";function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS,this.targetIds={},Input.apply(this,arguments)}function getTouches(ev,type){var allTouches=toArray(ev.touches),targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&1===allTouches.length)return targetIds[allTouches[0].identifier]=!0,[allTouches,allTouches];var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;if(targetTouches=allTouches.filter((function(touch){return hasParent(touch.target,target)})),type===INPUT_START)for(i=0;i<targetTouches.length;)targetIds[targetTouches[i].identifier]=!0,i++;for(i=0;i<changedTouches.length;)targetIds[changedTouches[i].identifier]&&changedTargetTouches.push(changedTouches[i]),type&(INPUT_END|INPUT_CANCEL)&&delete targetIds[changedTouches[i].identifier],i++;return changedTargetTouches.length?[uniqueArray(targetTouches.concat(changedTargetTouches),"identifier",!0),changedTargetTouches]:void 0}inherit(TouchInput,Input,{handler:function MTEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type],touches=getTouches.call(this,ev,type);touches&&this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:"touch",srcEvent:ev})}});var DEDUP_TIMEOUT=2500,DEDUP_DISTANCE=25;function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler),this.mouse=new MouseInput(this.manager,handler),this.primaryTouch=null,this.lastTouches=[]}function recordTouches(eventType,eventData){eventType&INPUT_START?(this.primaryTouch=eventData.changedPointers[0].identifier,setLastTouch.call(this,eventData)):eventType&(INPUT_END|INPUT_CANCEL)&&setLastTouch.call(this,eventData)}function setLastTouch(eventData){var touch=eventData.changedPointers[0];if(touch.identifier===this.primaryTouch){var lastTouch={x:touch.clientX,y:touch.clientY};this.lastTouches.push(lastTouch);var lts=this.lastTouches;setTimeout((function(){var i=lts.indexOf(lastTouch);i>-1&&lts.splice(i,1)}),DEDUP_TIMEOUT)}}function isSyntheticEvent(eventData){for(var x=eventData.srcEvent.clientX,y=eventData.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var t=this.lastTouches[i],dx=Math.abs(x-t.x),dy=Math.abs(y-t.y);if(dx<=DEDUP_DISTANCE&&dy<=DEDUP_DISTANCE)return!0}return!1}inherit(TouchMouseInput,Input,{handler:function TMEhandler(manager,inputEvent,inputData){var isTouch="touch"==inputData.pointerType,isMouse="mouse"==inputData.pointerType;if(!(isMouse&&inputData.sourceCapabilities&&inputData.sourceCapabilities.firesTouchEvents)){if(isTouch)recordTouches.call(this,inputEvent,inputData);else if(isMouse&&isSyntheticEvent.call(this,inputData))return;this.callback(manager,inputEvent,inputData)}},destroy:function destroy(){this.touch.destroy(),this.mouse.destroy()}});var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,"touchAction"),NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined,TOUCH_ACTION_AUTO="auto",TOUCH_ACTION_MANIPULATION="manipulation",TOUCH_ACTION_NONE="none",TOUCH_ACTION_PAN_X="pan-x",TOUCH_ACTION_PAN_Y="pan-y",TOUCH_ACTION_MAP=function getTouchActionProps(){if(!NATIVE_TOUCH_ACTION)return!1;var touchMap={},cssSupports=window.CSS&&window.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(val){touchMap[val]=!cssSupports||window.CSS.supports("touch-action",val)})),touchMap}();function TouchAction(manager,value){this.manager=manager,this.set(value)}TouchAction.prototype={set:function(value){"compute"==value&&(value=this.compute()),NATIVE_TOUCH_ACTION&&this.manager.element.style&&TOUCH_ACTION_MAP[value]&&(this.manager.element.style[PREFIXED_TOUCH_ACTION]=value),this.actions=value.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var actions=[];return each(this.manager.recognizers,(function(recognizer){boolOrFn(recognizer.options.enable,[recognizer])&&(actions=actions.concat(recognizer.getTouchAction()))})),function cleanTouchActions(actions){if(inStr(actions,TOUCH_ACTION_NONE))return TOUCH_ACTION_NONE;var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X),hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);if(hasPanX&&hasPanY)return TOUCH_ACTION_NONE;if(hasPanX||hasPanY)return hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y;if(inStr(actions,TOUCH_ACTION_MANIPULATION))return TOUCH_ACTION_MANIPULATION;return TOUCH_ACTION_AUTO}(actions.join(" "))},preventDefaults:function(input){var srcEvent=input.srcEvent,direction=input.offsetDirection;if(this.manager.session.prevented)srcEvent.preventDefault();else{var actions=this.actions,hasNone=inStr(actions,TOUCH_ACTION_NONE)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_NONE],hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y],hasPanX=inStr(actions,TOUCH_ACTION_PAN_X)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];if(hasNone){var isTapPointer=1===input.pointers.length,isTapMovement=input.distance<2,isTapTouchTime=input.deltaTime<250;if(isTapPointer&&isTapMovement&&isTapTouchTime)return}if(!hasPanX||!hasPanY)return hasNone||hasPanY&&direction&DIRECTION_HORIZONTAL||hasPanX&&direction&DIRECTION_VERTICAL?this.preventSrc(srcEvent):void 0}},preventSrc:function(srcEvent){this.manager.session.prevented=!0,srcEvent.preventDefault()}};var STATE_POSSIBLE=1,STATE_BEGAN=2,STATE_CHANGED=4,STATE_ENDED=8,STATE_RECOGNIZED=STATE_ENDED,STATE_CANCELLED=16;function Recognizer(options){this.options=assign({},this.defaults,options||{}),this.id=function uniqueId(){return _uniqueId++}(),this.manager=null,this.options.enable=ifUndefined(this.options.enable,!0),this.state=STATE_POSSIBLE,this.simultaneous={},this.requireFail=[]}function stateStr(state){return state&STATE_CANCELLED?"cancel":state&STATE_ENDED?"end":state&STATE_CHANGED?"move":state&STATE_BEGAN?"start":""}function directionStr(direction){return direction==DIRECTION_DOWN?"down":direction==DIRECTION_UP?"up":direction==DIRECTION_LEFT?"left":direction==DIRECTION_RIGHT?"right":""}function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;return manager?manager.get(otherRecognizer):otherRecognizer}function AttrRecognizer(){Recognizer.apply(this,arguments)}function PanRecognizer(){AttrRecognizer.apply(this,arguments),this.pX=null,this.pY=null}function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}function PressRecognizer(){Recognizer.apply(this,arguments),this._timer=null,this._input=null}function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}function TapRecognizer(){Recognizer.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Hammer(element,options){return(options=options||{}).recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset),new Manager(element,options)}Recognizer.prototype={defaults:{},set:function(options){return assign(this.options,options),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"recognizeWith",this))return this;var simultaneous=this.simultaneous;return simultaneous[(otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this)).id]||(simultaneous[otherRecognizer.id]=otherRecognizer,otherRecognizer.recognizeWith(this)),this},dropRecognizeWith:function(otherRecognizer){return invokeArrayArg(otherRecognizer,"dropRecognizeWith",this)?this:(otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),delete this.simultaneous[otherRecognizer.id],this)},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"requireFailure",this))return this;var requireFail=this.requireFail;return-1===inArray(requireFail,otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this))&&(requireFail.push(otherRecognizer),otherRecognizer.requireFailure(this)),this},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"dropRequireFailure",this))return this;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);return index>-1&&this.requireFail.splice(index,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id]},emit:function(input){var self=this,state=this.state;function emit(event){self.manager.emit(event,input)}state<STATE_ENDED&&emit(self.options.event+stateStr(state)),emit(self.options.event),input.additionalEvent&&emit(input.additionalEvent),state>=STATE_ENDED&&emit(self.options.event+stateStr(state))},tryEmit:function(input){if(this.canEmit())return this.emit(input);this.state=32},canEmit:function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(32|STATE_POSSIBLE)))return!1;i++}return!0},recognize:function(inputData){var inputDataClone=assign({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone]))return this.reset(),void(this.state=32);this.state&(STATE_RECOGNIZED|STATE_CANCELLED|32)&&(this.state=STATE_POSSIBLE),this.state=this.process(inputDataClone),this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)&&this.tryEmit(inputDataClone)},process:function(inputData){},getTouchAction:function(){},reset:function(){}},inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return 0===optionPointers||input.pointers.length===optionPointers},process:function(input){var state=this.state,eventType=input.eventType,isRecognized=state&(STATE_BEGAN|STATE_CHANGED),isValid=this.attrTest(input);return isRecognized&&(eventType&INPUT_CANCEL||!isValid)?state|STATE_CANCELLED:isRecognized||isValid?eventType&INPUT_END?state|STATE_ENDED:state&STATE_BEGAN?state|STATE_CHANGED:STATE_BEGAN:32}}),inherit(PanRecognizer,AttrRecognizer,{defaults:{event:"pan",threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction,actions=[];return direction&DIRECTION_HORIZONTAL&&actions.push(TOUCH_ACTION_PAN_Y),direction&DIRECTION_VERTICAL&&actions.push(TOUCH_ACTION_PAN_X),actions},directionTest:function(input){var options=this.options,hasMoved=!0,distance=input.distance,direction=input.direction,x=input.deltaX,y=input.deltaY;return direction&options.direction||(options.direction&DIRECTION_HORIZONTAL?(direction=0===x?DIRECTION_NONE:x<0?DIRECTION_LEFT:DIRECTION_RIGHT,hasMoved=x!=this.pX,distance=Math.abs(input.deltaX)):(direction=0===y?DIRECTION_NONE:y<0?DIRECTION_UP:DIRECTION_DOWN,hasMoved=y!=this.pY,distance=Math.abs(input.deltaY))),input.direction=direction,hasMoved&&distance>options.threshold&&direction&options.direction},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||!(this.state&STATE_BEGAN)&&this.directionTest(input))},emit:function(input){this.pX=input.deltaX,this.pY=input.deltaY;var direction=directionStr(input.direction);direction&&(input.additionalEvent=this.options.event+direction),this._super.emit.call(this,input)}}),inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN)},emit:function(input){if(1!==input.scale){var inOut=input.scale<1?"in":"out";input.additionalEvent=this.options.event+inOut}this._super.emit.call(this,input)}}),inherit(PressRecognizer,Recognizer,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[TOUCH_ACTION_AUTO]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTime=input.deltaTime>options.time;if(this._input=input,!validMovement||!validPointers||input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime)this.reset();else if(input.eventType&INPUT_START)this.reset(),this._timer=setTimeoutContext((function(){this.state=STATE_RECOGNIZED,this.tryEmit()}),options.time,this);else if(input.eventType&INPUT_END)return STATE_RECOGNIZED;return 32},reset:function(){clearTimeout(this._timer)},emit:function(input){this.state===STATE_RECOGNIZED&&(input&&input.eventType&INPUT_END?this.manager.emit(this.options.event+"up",input):(this._input.timeStamp=now(),this.manager.emit(this.options.event,this._input)))}}),inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN)}}),inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function(input){var velocity,direction=this.options.direction;return direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)?velocity=input.overallVelocity:direction&DIRECTION_HORIZONTAL?velocity=input.overallVelocityX:direction&DIRECTION_VERTICAL&&(velocity=input.overallVelocityY),this._super.attrTest.call(this,input)&&direction&input.offsetDirection&&input.distance>this.options.threshold&&input.maxPointers==this.options.pointers&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END},emit:function(input){var direction=directionStr(input.offsetDirection);direction&&this.manager.emit(this.options.event+direction,input),this.manager.emit(this.options.event,input)}}),inherit(TapRecognizer,Recognizer,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTouchTime=input.deltaTime<options.time;if(this.reset(),input.eventType&INPUT_START&&0===this.count)return this.failTimeout();if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END)return this.failTimeout();var validInterval=!this.pTime||input.timeStamp-this.pTime<options.interval,validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;if(this.pTime=input.timeStamp,this.pCenter=input.center,validMultiTap&&validInterval?this.count+=1:this.count=1,this._input=input,0===this.count%options.taps)return this.hasRequireFailures()?(this._timer=setTimeoutContext((function(){this.state=STATE_RECOGNIZED,this.tryEmit()}),options.interval,this),STATE_BEGAN):STATE_RECOGNIZED}return 32},failTimeout:function(){return this._timer=setTimeoutContext((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==STATE_RECOGNIZED&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Hammer.VERSION="2.0.7",Hammer.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:!1}],[PinchRecognizer,{enable:!1},["rotate"]],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Manager(element,options){this.options=assign({},Hammer.defaults,options||{}),this.options.inputTarget=this.options.inputTarget||element,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=element,this.input=function createInputInstance(manager){var inputClass=manager.options.inputClass;return new(inputClass||(SUPPORT_POINTER_EVENTS?PointerEventInput:SUPPORT_ONLY_TOUCH?TouchInput:SUPPORT_TOUCH?TouchMouseInput:MouseInput))(manager,inputHandler)}(this),this.touchAction=new TouchAction(this,this.options.touchAction),toggleCssProps(this,!0),each(this.options.recognizers,(function(item){var recognizer=this.add(new item[0](item[1]));item[2]&&recognizer.recognizeWith(item[2]),item[3]&&recognizer.requireFailure(item[3])}),this)}function toggleCssProps(manager,add){var prop,element=manager.element;element.style&&(each(manager.options.cssProps,(function(value,name){prop=prefixed(element.style,name),add?(manager.oldCssProps[prop]=element.style[prop],element.style[prop]=value):element.style[prop]=manager.oldCssProps[prop]||""})),add||(manager.oldCssProps={}))}Manager.prototype={set:function(options){return assign(this.options,options),options.touchAction&&this.touchAction.update(),options.inputTarget&&(this.input.destroy(),this.input.target=options.inputTarget,this.input.init()),this},stop:function(force){this.session.stopped=force?2:1},recognize:function(inputData){var session=this.session;if(!session.stopped){var recognizer;this.touchAction.preventDefaults(inputData);var recognizers=this.recognizers,curRecognizer=session.curRecognizer;(!curRecognizer||curRecognizer&&curRecognizer.state&STATE_RECOGNIZED)&&(curRecognizer=session.curRecognizer=null);for(var i=0;i<recognizers.length;)recognizer=recognizers[i],2===session.stopped||curRecognizer&&recognizer!=curRecognizer&&!recognizer.canRecognizeWith(curRecognizer)?recognizer.reset():recognizer.recognize(inputData),!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)&&(curRecognizer=session.curRecognizer=recognizer),i++}},get:function(recognizer){if(recognizer instanceof Recognizer)return recognizer;for(var recognizers=this.recognizers,i=0;i<recognizers.length;i++)if(recognizers[i].options.event==recognizer)return recognizers[i];return null},add:function(recognizer){if(invokeArrayArg(recognizer,"add",this))return this;var existing=this.get(recognizer.options.event);return existing&&this.remove(existing),this.recognizers.push(recognizer),recognizer.manager=this,this.touchAction.update(),recognizer},remove:function(recognizer){if(invokeArrayArg(recognizer,"remove",this))return this;if(recognizer=this.get(recognizer)){var recognizers=this.recognizers,index=inArray(recognizers,recognizer);-1!==index&&(recognizers.splice(index,1),this.touchAction.update())}return this},on:function(events,handler){if(events!==undefined&&handler!==undefined){var handlers=this.handlers;return each(splitStr(events),(function(event){handlers[event]=handlers[event]||[],handlers[event].push(handler)})),this}},off:function(events,handler){if(events!==undefined){var handlers=this.handlers;return each(splitStr(events),(function(event){handler?handlers[event]&&handlers[event].splice(inArray(handlers[event],handler),1):delete handlers[event]})),this}},emit:function(event,data){this.options.domEvents&&function triggerDomEvent(event,data){var gestureEvent=document.createEvent("Event");gestureEvent.initEvent(event,!0,!0),gestureEvent.gesture=data,data.target.dispatchEvent(gestureEvent)}(event,data);var handlers=this.handlers[event]&&this.handlers[event].slice();if(handlers&&handlers.length){data.type=event,data.preventDefault=function(){data.srcEvent.preventDefault()};for(var i=0;i<handlers.length;)handlers[i](data),i++}},destroy:function(){this.element&&toggleCssProps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},assign(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:32,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,assign:assign,inherit:inherit,bindFn:bindFn,prefixed:prefixed}),(void 0!==window?window:"undefined"!=typeof self?self:{}).Hammer=Hammer,(__WEBPACK_AMD_DEFINE_RESULT__=function(){return Hammer}.call(exports,__webpack_require__,exports,module))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(window,document)},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),is_browser=__webpack_require__(249),globals=__webpack_require__(55),log=__webpack_require__(25),stats=__webpack_require__(779);__webpack_require__(237);__webpack_require__.d(__webpack_exports__,"a",(function(){return lumaStats}));var lumaStats=new(function(){function StatsManager(){Object(classCallCheck.a)(this,StatsManager),this.stats=new Map}return Object(createClass.a)(StatsManager,[{key:"get",value:function get(name){return this.stats.has(name)||this.stats.set(name,new stats.a({id:name})),this.stats.get(name)}}]),StatsManager}());if(globals.a.luma&&"7.3.1"!==globals.a.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globals.a.luma.VERSION," vs ").concat("7.3.1"));globals.a.luma||(is_browser.a&&log.a.log(1,"luma.gl ".concat("7.3.1"," - ").concat("set luma.log.priority=1 (or higher) to trace rendering"))(),globals.a.luma=globals.a.luma||{VERSION:"7.3.1",version:"7.3.1",log:log.a,stats:lumaStats,globals:{modules:{},nodeIO:{}}});globals.a.luma},function(module,__webpack_exports__,__webpack_require__){"use strict";var slicedToArray=__webpack_require__(9),classCallCheck=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),createClass=__webpack_require__(1),inherits=__webpack_require__(6),validators=__webpack_require__(35),math_array=__webpack_require__(257),common=__webpack_require__(21),matrix_Matrix=function(_MathArray){function Matrix(){return Object(classCallCheck.a)(this,Matrix),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Matrix).apply(this,arguments))}return Object(inherits.a)(Matrix,_MathArray),Object(createClass.a)(Matrix,[{key:"toString",value:function toString(){var string="[";if(common.b.printRowMajor){string+="row-major:";for(var row=0;row<this.RANK;++row)for(var col=0;col<this.RANK;++col)string+=" ".concat(this[col*this.RANK+row])}else{string+="column-major:";for(var i=0;i<this.ELEMENTS;++i)string+=" ".concat(this[i])}return string+="]"}},{key:"getElementIndex",value:function getElementIndex(row,col){return col*this.RANK+row}},{key:"getElement",value:function getElement(row,col){return this[col*this.RANK+row]}},{key:"setElement",value:function setElement(row,col,value){return this[col*this.RANK+row]=Object(validators.a)(value),this}},{key:"getColumn",value:function getColumn(columnIndex){for(var result=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),firstIndex=columnIndex*this.RANK,i=0;i<this.RANK;++i)result[i]=this[firstIndex+i];return result}},{key:"setColumn",value:function setColumn(columnIndex,columnVector){for(var firstIndex=columnIndex*this.RANK,i=0;i<this.RANK;++i)this[firstIndex+i]=columnVector[i];return this}}]),Matrix}(math_array.a),gl_matrix_extras=__webpack_require__(164),mat4=__webpack_require__(15),vec2=__webpack_require__(48),vec3=__webpack_require__(52),vec4=__webpack_require__(106);__webpack_require__.d(__webpack_exports__,"a",(function(){return matrix4_Matrix4}));var IDENTITY=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),ZERO=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),INDICES=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),constants={},matrix4_Matrix4=function(_Matrix){function Matrix4(array){var _this;return Object(classCallCheck.a)(this,Matrix4),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Matrix4).call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0)),1===arguments.length&&Array.isArray(array)?_this.copy(array):_this.identity(),_this}return Object(inherits.a)(Matrix4,_Matrix),Object(createClass.a)(Matrix4,[{key:"INDICES",get:function get(){return INDICES}},{key:"ELEMENTS",get:function get(){return 16}},{key:"RANK",get:function get(){return 4}}],[{key:"IDENTITY",get:function get(){return constants.IDENTITY=constants.IDENTITY||Object.freeze(new Matrix4(IDENTITY)),constants.IDENTITY}},{key:"ZERO",get:function get(){return constants.ZERO=constants.ZERO||Object.freeze(new Matrix4(ZERO)),constants.ZERO}}]),Object(createClass.a)(Matrix4,[{key:"copy",value:function copy(array){return this[0]=array[0],this[1]=array[1],this[2]=array[2],this[3]=array[3],this[4]=array[4],this[5]=array[5],this[6]=array[6],this[7]=array[7],this[8]=array[8],this[9]=array[9],this[10]=array[10],this[11]=array[11],this[12]=array[12],this[13]=array[13],this[14]=array[14],this[15]=array[15],this.check()}},{key:"set",value:function set(m00,m10,m20,m30,m01,m11,m21,m31,m02,m12,m22,m32,m03,m13,m23,m33){return this[0]=m00,this[1]=m10,this[2]=m20,this[3]=m30,this[4]=m01,this[5]=m11,this[6]=m21,this[7]=m31,this[8]=m02,this[9]=m12,this[10]=m22,this[11]=m32,this[12]=m03,this[13]=m13,this[14]=m23,this[15]=m33,this.check()}},{key:"setRowMajor",value:function setRowMajor(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){return this[0]=m00,this[1]=m10,this[2]=m20,this[3]=m30,this[4]=m01,this[5]=m11,this[6]=m21,this[7]=m31,this[8]=m02,this[9]=m12,this[10]=m22,this[11]=m32,this[12]=m03,this[13]=m13,this[14]=m23,this[15]=m33,this.check()}},{key:"toRowMajor",value:function toRowMajor(result){return result[0]=this[0],result[1]=this[4],result[2]=this[8],result[3]=this[12],result[4]=this[1],result[5]=this[5],result[6]=this[9],result[7]=this[13],result[8]=this[2],result[9]=this[6],result[10]=this[10],result[11]=this[14],result[12]=this[3],result[13]=this[7],result[14]=this[11],result[15]=this[15],result}},{key:"identity",value:function identity(){return this.copy(IDENTITY)}},{key:"fromQuaternion",value:function fromQuaternion(q){return mat4.c(this,q),this.check()}},{key:"frustum",value:function frustum(_ref){var left=_ref.left,right=_ref.right,bottom=_ref.bottom,top=_ref.top,near=_ref.near,far=_ref.far;return far===1/0?Matrix4._computeInfinitePerspectiveOffCenter(this,left,right,bottom,top,near):mat4.d(this,left,right,bottom,top,near,far),this.check()}},{key:"lookAt",value:function lookAt(eye,center,up){if(1===arguments.length){var _eye=eye;eye=_eye.eye,center=_eye.center,up=_eye.up}return center=center||[0,0,0],up=up||[0,1,0],mat4.f(this,eye,center,up),this.check()}},{key:"ortho",value:function ortho(_ref2){var left=_ref2.left,right=_ref2.right,bottom=_ref2.bottom,top=_ref2.top,_ref2$near=_ref2.near,near=void 0===_ref2$near?.1:_ref2$near,_ref2$far=_ref2.far,far=void 0===_ref2$far?500:_ref2$far;return mat4.h(this,left,right,bottom,top,near,far),this.check()}},{key:"orthographic",value:function orthographic(_ref3){var _ref3$fovy=_ref3.fovy,fovy=void 0===_ref3$fovy?45*Math.PI/180:_ref3$fovy,_ref3$aspect=_ref3.aspect,aspect=void 0===_ref3$aspect?1:_ref3$aspect,_ref3$focalDistance=_ref3.focalDistance,focalDistance=void 0===_ref3$focalDistance?1:_ref3$focalDistance,_ref3$near=_ref3.near,near=void 0===_ref3$near?.1:_ref3$near,_ref3$far=_ref3.far,far=void 0===_ref3$far?500:_ref3$far;if(fovy>2*Math.PI)throw Error("radians");var halfY=fovy/2,top=focalDistance*Math.tan(halfY),right=top*aspect;return(new Matrix4).ortho({left:-right,right:right,bottom:-top,top:top,near:near,far:far})}},{key:"perspective",value:function perspective(){var _ref4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},fovy=_ref4.fovy,_ref4$fov=_ref4.fov,fov=void 0===_ref4$fov?45*Math.PI/180:_ref4$fov,_ref4$aspect=_ref4.aspect,aspect=void 0===_ref4$aspect?1:_ref4$aspect,_ref4$near=_ref4.near,near=void 0===_ref4$near?.1:_ref4$near,_ref4$far=_ref4.far,far=void 0===_ref4$far?500:_ref4$far;if((fovy=fovy||fov)>2*Math.PI)throw Error("radians");return mat4.i(this,fovy,aspect,near,far),this.check()}},{key:"determinant",value:function determinant(){return mat4.a(this)}},{key:"getScale",value:function getScale(){var result=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return result[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),result[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),result[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),result}},{key:"getTranslation",value:function getTranslation(){var result=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return result[0]=this[12],result[1]=this[13],result[2]=this[14],result}},{key:"getRotation",value:function getRotation(){var result=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],scaleResult=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,scale=this.getScale(scaleResult||[-0,-0,-0]),inverseScale0=1/scale[0],inverseScale1=1/scale[1],inverseScale2=1/scale[2];return result[0]=this[0]*inverseScale0,result[1]=this[1]*inverseScale1,result[2]=this[2]*inverseScale2,result[3]=0,result[4]=this[4]*inverseScale0,result[5]=this[5]*inverseScale1,result[6]=this[6]*inverseScale2,result[7]=0,result[8]=this[8]*inverseScale0,result[9]=this[9]*inverseScale1,result[10]=this[10]*inverseScale2,result[11]=0,result[12]=0,result[13]=0,result[14]=0,result[15]=1,result}},{key:"getRotationMatrix3",value:function getRotationMatrix3(){var result=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],scaleResult=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,scale=this.getScale(scaleResult||[-0,-0,-0]),inverseScale0=1/scale[0],inverseScale1=1/scale[1],inverseScale2=1/scale[2];return result[0]=this[0]*inverseScale0,result[1]=this[1]*inverseScale1,result[2]=this[2]*inverseScale2,result[3]=this[4]*inverseScale0,result[4]=this[5]*inverseScale1,result[5]=this[6]*inverseScale2,result[6]=this[8]*inverseScale0,result[7]=this[9]*inverseScale1,result[8]=this[10]*inverseScale2,result}},{key:"transpose",value:function transpose(){return mat4.p(this,this),this.check()}},{key:"invert",value:function invert(){return mat4.e(this,this),this.check()}},{key:"multiplyLeft",value:function multiplyLeft(a){return mat4.g(this,a,this),this.check()}},{key:"multiplyRight",value:function multiplyRight(a){return mat4.g(this,this,a),this.check()}},{key:"rotateX",value:function rotateX(radians){return mat4.k(this,this,radians),this.check()}},{key:"rotateY",value:function rotateY(radians){return mat4.l(this,this,radians),this.check()}},{key:"rotateZ",value:function rotateZ(radians){return mat4.m(this,this,radians),this.check()}},{key:"rotateXYZ",value:function rotateXYZ(_ref5){var _ref6=Object(slicedToArray.a)(_ref5,3),rx=_ref6[0],ry=_ref6[1],rz=_ref6[2];return this.rotateX(rx).rotateY(ry).rotateZ(rz)}},{key:"rotateAxis",value:function rotateAxis(radians,axis){return mat4.j(this,this,radians,axis),this.check()}},{key:"scale",value:function scale(factor){return Array.isArray(factor)?mat4.n(this,this,factor):mat4.n(this,this,[factor,factor,factor]),this.check()}},{key:"translate",value:function translate(vec){return mat4.o(this,this,vec),this.check()}},{key:"transform",value:function transform(vector,result){return 4===vector.length?(result=vec4.b(result||[-0,-0,-0,-0],vector,this),Object(validators.b)(result,4),result):this.transformAsPoint(vector,result)}},{key:"transformAsPoint",value:function transformAsPoint(vector,result){switch(vector.length){case 2:result=vec2.g(result||[-0,-0],vector,this);break;case 3:result=vec3.j(result||[-0,-0,-0],vector,this);break;default:throw new Error("Illegal vector")}return Object(validators.b)(result,vector.length),result}},{key:"transformAsVector",value:function transformAsVector(vector,result){switch(vector.length){case 2:result=Object(gl_matrix_extras.a)(result||[-0,-0],vector,this);break;case 3:result=Object(gl_matrix_extras.c)(result||[-0,-0,-0],vector,this);break;default:throw new Error("Illegal vector")}return Object(validators.b)(result,vector.length),result}},{key:"makeRotationX",value:function makeRotationX(radians){return this.identity().rotateX(radians)}},{key:"makeTranslation",value:function makeTranslation(x,y,z){return this.identity().translate([x,y,z])}},{key:"transformPoint",value:function transformPoint(vector,result){return Object(validators.c)("Matrix4.transformPoint","3.0"),this.transformAsPoint(vector,result)}},{key:"transformVector",value:function transformVector(vector,result){return Object(validators.c)("Matrix4.transformVector","3.0"),this.transformAsPoint(vector,result)}},{key:"transformDirection",value:function transformDirection(vector,result){return Object(validators.c)("Matrix4.transformDirection","3.0"),this.transformAsVector(vector,result)}}],[{key:"_computeInfinitePerspectiveOffCenter",value:function _computeInfinitePerspectiveOffCenter(result,left,right,bottom,top,near){var column0Row0=2*near/(right-left),column1Row1=2*near/(top-bottom),column2Row0=(right+left)/(right-left),column2Row1=(top+bottom)/(top-bottom),column3Row2=-2*near;return result[0]=column0Row0,result[1]=0,result[2]=0,result[3]=0,result[4]=0,result[5]=column1Row1,result[6]=0,result[7]=0,result[8]=column2Row0,result[9]=column2Row1,result[10]=-1,result[11]=-1,result[12]=0,result[13]=0,result[14]=column3Row2,result[15]=0,result}}]),Matrix4}(matrix_Matrix)},,,function(module,exports,__webpack_require__){"use strict";var fnToStr=Function.prototype.toString,constructorRegex=/^\s*class\b/,isES6ClassFn=function isES6ClassFunction(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return!1}},toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function isCallable(value){if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if("function"==typeof value&&!value.prototype)return!0;if(hasToStringTag)return function tryFunctionToStr(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}}(value);if(isES6ClassFn(value))return!1;var strClass=toStr.call(value);return"[object Function]"===strClass||"[object GeneratorFunction]"===strClass}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(64),$Function=__webpack_require__(44)("%Function%"),$apply=$Function.apply,$call=$Function.call;module.exports=function callBind(){return bind.apply($call,arguments)},module.exports.apply=function applyBind(){return bind.apply($apply,arguments)}},function(module,exports,__webpack_require__){"use strict";var nativePropertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1);exports.f=NASHORN_BUG?function propertyIsEnumerable(V){var descriptor=getOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable}:nativePropertyIsEnumerable},function(module,exports,__webpack_require__){var fails=__webpack_require__(33),classof=__webpack_require__(98),split="".split;module.exports=fails((function(){return!Object("z").propertyIsEnumerable(0)}))?function(it){return"String"==classof(it)?split.call(it,""):Object(it)}:Object},function(module,exports,__webpack_require__){var shared=__webpack_require__(173),uid=__webpack_require__(209),keys=shared("keys");module.exports=function(key){return keys[key]||(keys[key]=uid(key))}},function(module,exports){var id=0,postfix=Math.random();module.exports=function(key){return"Symbol("+String(void 0===key?"":key)+")_"+(++id+postfix).toString(36)}},function(module,exports,__webpack_require__){var internalObjectKeys=__webpack_require__(350),hiddenKeys=__webpack_require__(278).concat("length","prototype");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return internalObjectKeys(O,hiddenKeys)}},function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(argument){return isNaN(argument=+argument)?0:(argument>0?floor:ceil)(argument)}},function(module,exports,__webpack_require__){var fails=__webpack_require__(33),replacement=/#|\.prototype\./,isForced=function(feature,detection){var value=data[normalize(feature)];return value==POLYFILL||value!=NATIVE&&("function"==typeof detection?fails(detection):!!detection)},normalize=isForced.normalize=function(string){return String(string).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P";module.exports=isForced},function(module,exports,__webpack_require__){var fails=__webpack_require__(33),wellKnownSymbol=__webpack_require__(37),V8_VERSION=__webpack_require__(281),SPECIES=wellKnownSymbol("species");module.exports=function(METHOD_NAME){return V8_VERSION>=51||!fails((function(){var array=[];return(array.constructor={})[SPECIES]=function(){return{foo:1}},1!==array[METHOD_NAME](Boolean).foo}))}},function(module,exports,__webpack_require__){var getBuiltIn=__webpack_require__(176);module.exports=getBuiltIn("navigator","userAgent")||""},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),$find=__webpack_require__(130).find,addToUnscopables=__webpack_require__(282),SKIPS_HOLES=!0;"find"in[]&&Array(1).find((function(){SKIPS_HOLES=!1})),$({target:"Array",proto:!0,forced:SKIPS_HOLES},{find:function find(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("find")},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),$map=__webpack_require__(130).map;$({target:"Array",proto:!0,forced:!__webpack_require__(213)("map")},{map:function map(callbackfn){return $map(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(87),__webpack_require__(27),__webpack_require__(119),__webpack_require__(88),Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={};exports.default=void 0;var _index=__webpack_require__(590);Object.keys(_index).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _index[key]}}))}));var _makeDecorator=__webpack_require__(596);Object.keys(_makeDecorator).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _makeDecorator[key]}}))}));var _types=__webpack_require__(374);Object.keys(_types).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _types[key]}}))}));var _storybookChannelMock=__webpack_require__(597);Object.keys(_storybookChannelMock).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _storybookChannelMock[key]}}))}));var _hooks=__webpack_require__(601);Object.keys(_hooks).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _hooks[key]}}))}));var _default=_index.addons;exports.default=_default},function(module,exports,__webpack_require__){"use strict";var Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,$=__webpack_require__(19),IS_PURE=__webpack_require__(174),global=__webpack_require__(29),getBuiltIn=__webpack_require__(176),NativePromise=__webpack_require__(591),redefine=__webpack_require__(75),redefineAll=__webpack_require__(219),setToStringTag=__webpack_require__(129),setSpecies=__webpack_require__(371),isObject=__webpack_require__(40),aFunction=__webpack_require__(131),anInstance=__webpack_require__(220),classof=__webpack_require__(98),iterate=__webpack_require__(221),checkCorrectnessOfIteration=__webpack_require__(283),speciesConstructor=__webpack_require__(372),task=__webpack_require__(291).set,microtask=__webpack_require__(592),promiseResolve=__webpack_require__(593),hostReportErrors=__webpack_require__(594),newPromiseCapabilityModule=__webpack_require__(373),perform=__webpack_require__(595),InternalStateModule=__webpack_require__(118),isForced=__webpack_require__(212),wellKnownSymbol=__webpack_require__(37),V8_VERSION=__webpack_require__(281),SPECIES=wellKnownSymbol("species"),PROMISE="Promise",getInternalState=InternalStateModule.get,setInternalState=InternalStateModule.set,getInternalPromiseState=InternalStateModule.getterFor(PROMISE),PromiseConstructor=NativePromise,TypeError=global.TypeError,document=global.document,process=global.process,$fetch=getBuiltIn("fetch"),newPromiseCapability=newPromiseCapabilityModule.f,newGenericPromiseCapability=newPromiseCapability,IS_NODE="process"==classof(process),DISPATCH_EVENT=!!(document&&document.createEvent&&global.dispatchEvent),FORCED=isForced(PROMISE,(function(){if(66===V8_VERSION)return!0;if(!IS_NODE&&"function"!=typeof PromiseRejectionEvent)return!0;if(IS_PURE&&!PromiseConstructor.prototype.finally)return!0;if(V8_VERSION>=51&&/native code/.test(PromiseConstructor))return!1;var promise=PromiseConstructor.resolve(1),FakePromise=function(exec){exec((function(){}),(function(){}))};return(promise.constructor={})[SPECIES]=FakePromise,!(promise.then((function(){}))instanceof FakePromise)})),INCORRECT_ITERATION=FORCED||!checkCorrectnessOfIteration((function(iterable){PromiseConstructor.all(iterable).catch((function(){}))})),isThenable=function(it){var then;return!(!isObject(it)||"function"!=typeof(then=it.then))&&then},notify=function(promise,state,isReject){if(!state.notified){state.notified=!0;var chain=state.reactions;microtask((function(){for(var value=state.value,ok=1==state.state,index=0;chain.length>index;){var result,then,exited,reaction=chain[index++],handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2===state.rejection&&onHandleUnhandled(promise,state),state.rejection=1),!0===handler?result=value:(domain&&domain.enter(),result=handler(value),domain&&(domain.exit(),exited=!0)),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(error){domain&&!exited&&domain.exit(),reject(error)}}state.reactions=[],state.notified=!1,isReject&&!state.rejection&&onUnhandled(promise,state)}))}},dispatchEvent=function(name,promise,reason){var event,handler;DISPATCH_EVENT?((event=document.createEvent("Event")).promise=promise,event.reason=reason,event.initEvent(name,!1,!0),global.dispatchEvent(event)):event={promise:promise,reason:reason},(handler=global["on"+name])?handler(event):"unhandledrejection"===name&&hostReportErrors("Unhandled promise rejection",reason)},onUnhandled=function(promise,state){task.call(global,(function(){var result,value=state.value;if(isUnhandled(state)&&(result=perform((function(){IS_NODE?process.emit("unhandledRejection",value,promise):dispatchEvent("unhandledrejection",promise,value)})),state.rejection=IS_NODE||isUnhandled(state)?2:1,result.error))throw result.value}))},isUnhandled=function(state){return 1!==state.rejection&&!state.parent},onHandleUnhandled=function(promise,state){task.call(global,(function(){IS_NODE?process.emit("rejectionHandled",promise):dispatchEvent("rejectionhandled",promise,state.value)}))},bind=function(fn,promise,state,unwrap){return function(value){fn(promise,state,value,unwrap)}},internalReject=function(promise,state,value,unwrap){state.done||(state.done=!0,unwrap&&(state=unwrap),state.value=value,state.state=2,notify(promise,state,!0))},internalResolve=function(promise,state,value,unwrap){if(!state.done){state.done=!0,unwrap&&(state=unwrap);try{if(promise===value)throw TypeError("Promise can't be resolved itself");var then=isThenable(value);then?microtask((function(){var wrapper={done:!1};try{then.call(value,bind(internalResolve,promise,wrapper,state),bind(internalReject,promise,wrapper,state))}catch(error){internalReject(promise,wrapper,error,state)}})):(state.value=value,state.state=1,notify(promise,state,!1))}catch(error){internalReject(promise,{done:!1},error,state)}}};FORCED&&(PromiseConstructor=function Promise(executor){anInstance(this,PromiseConstructor,PROMISE),aFunction(executor),Internal.call(this);var state=getInternalState(this);try{executor(bind(internalResolve,this,state),bind(internalReject,this,state))}catch(error){internalReject(this,state,error)}},(Internal=function Promise(executor){setInternalState(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=redefineAll(PromiseConstructor.prototype,{then:function then(onFulfilled,onRejected){var state=getInternalPromiseState(this),reaction=newPromiseCapability(speciesConstructor(this,PromiseConstructor));return reaction.ok="function"!=typeof onFulfilled||onFulfilled,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=IS_NODE?process.domain:void 0,state.parent=!0,state.reactions.push(reaction),0!=state.state&&notify(this,state,!1),reaction.promise},catch:function(onRejected){return this.then(void 0,onRejected)}}),OwnPromiseCapability=function(){var promise=new Internal,state=getInternalState(promise);this.promise=promise,this.resolve=bind(internalResolve,promise,state),this.reject=bind(internalReject,promise,state)},newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===PromiseConstructor||C===PromiseWrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)},IS_PURE||"function"!=typeof NativePromise||(nativeThen=NativePromise.prototype.then,redefine(NativePromise.prototype,"then",(function then(onFulfilled,onRejected){var that=this;return new PromiseConstructor((function(resolve,reject){nativeThen.call(that,resolve,reject)})).then(onFulfilled,onRejected)}),{unsafe:!0}),"function"==typeof $fetch&&$({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(input){return promiseResolve(PromiseConstructor,$fetch.apply(global,arguments))}}))),$({global:!0,wrap:!0,forced:FORCED},{Promise:PromiseConstructor}),setToStringTag(PromiseConstructor,PROMISE,!1,!0),setSpecies(PROMISE),PromiseWrapper=getBuiltIn(PROMISE),$({target:PROMISE,stat:!0,forced:FORCED},{reject:function reject(r){var capability=newPromiseCapability(this);return capability.reject.call(void 0,r),capability.promise}}),$({target:PROMISE,stat:!0,forced:IS_PURE||FORCED},{resolve:function resolve(x){return promiseResolve(IS_PURE&&this===PromiseWrapper?PromiseConstructor:this,x)}}),$({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function all(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,result=perform((function(){var $promiseResolve=aFunction(C.resolve),values=[],counter=0,remaining=1;iterate(iterable,(function(promise){var index=counter++,alreadyCalled=!1;values.push(void 0),remaining++,$promiseResolve.call(C,promise).then((function(value){alreadyCalled||(alreadyCalled=!0,values[index]=value,--remaining||resolve(values))}),reject)})),--remaining||resolve(values)}));return result.error&&reject(result.value),capability.promise},race:function race(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,result=perform((function(){var $promiseResolve=aFunction(C.resolve);iterate(iterable,(function(promise){$promiseResolve.call(C,promise).then(capability.resolve,reject)}))}));return result.error&&reject(result.value),capability.promise}})},function(module,exports,__webpack_require__){var redefine=__webpack_require__(75);module.exports=function(target,src,options){for(var key in src)redefine(target,key,src[key],options);return target}},function(module,exports){module.exports=function(it,Constructor,name){if(!(it instanceof Constructor))throw TypeError("Incorrect "+(name?name+" ":"")+"invocation");return it}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(50),isArrayIteratorMethod=__webpack_require__(363),toLength=__webpack_require__(76),bind=__webpack_require__(179),getIteratorMethod=__webpack_require__(364),callWithSafeIterationClosing=__webpack_require__(362),Result=function(stopped,result){this.stopped=stopped,this.result=result};(module.exports=function(iterable,fn,that,AS_ENTRIES,IS_ITERATOR){var iterator,iterFn,index,length,result,next,step,boundFunction=bind(fn,that,AS_ENTRIES?2:1);if(IS_ITERATOR)iterator=iterable;else{if("function"!=typeof(iterFn=getIteratorMethod(iterable)))throw TypeError("Target is not iterable");if(isArrayIteratorMethod(iterFn)){for(index=0,length=toLength(iterable.length);length>index;index++)if((result=AS_ENTRIES?boundFunction(anObject(step=iterable[index])[0],step[1]):boundFunction(iterable[index]))&&result instanceof Result)return result;return new Result(!1)}iterator=iterFn.call(iterable)}for(next=iterator.next;!(step=next.call(iterator)).done;)if("object"==typeof(result=callWithSafeIterationClosing(iterator,boundFunction,step.value,AS_ENTRIES))&&result&&result instanceof Result)return result;return new Result(!1)}).stop=function(result){return new Result(!0,result)}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),defineProperty=__webpack_require__(61).f,FunctionPrototype=Function.prototype,FunctionPrototypeToString=FunctionPrototype.toString,nameRE=/^\s*function ([^ (]*)/;!DESCRIPTORS||"name"in FunctionPrototype||defineProperty(FunctionPrototype,"name",{configurable:!0,get:function(){try{return FunctionPrototypeToString.call(this).match(nameRE)[1]}catch(error){return""}}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),$filter=__webpack_require__(130).filter;$({target:"Array",proto:!0,forced:!__webpack_require__(213)("filter")},{filter:function filter(callbackfn){return $filter(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(606)},function(module,exports,__webpack_require__){"use strict";var re1,re2,regexpFlags=__webpack_require__(369),nativeExec=RegExp.prototype.exec,nativeReplace=String.prototype.replace,patchedExec=nativeExec,UPDATES_LAST_INDEX_WRONG=(re1=/a/,re2=/b*/g,nativeExec.call(re1,"a"),nativeExec.call(re2,"a"),0!==re1.lastIndex||0!==re2.lastIndex),NPCG_INCLUDED=void 0!==/()??/.exec("")[1];(UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED)&&(patchedExec=function exec(str){var lastIndex,reCopy,match,i,re=this;return NPCG_INCLUDED&&(reCopy=new RegExp("^"+re.source+"$(?!\\s)",regexpFlags.call(re))),UPDATES_LAST_INDEX_WRONG&&(lastIndex=re.lastIndex),match=nativeExec.call(re,str),UPDATES_LAST_INDEX_WRONG&&match&&(re.lastIndex=re.global?match.index+match[0].length:lastIndex),NPCG_INCLUDED&&match&&match.length>1&&nativeReplace.call(match[0],reCopy,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)})),match}),module.exports=patchedExec},function(module,exports,__webpack_require__){"use strict";var fixRegExpWellKnownSymbolLogic=__webpack_require__(227),anObject=__webpack_require__(50),toLength=__webpack_require__(76),requireObjectCoercible=__webpack_require__(85),advanceStringIndex=__webpack_require__(293),regExpExec=__webpack_require__(228);fixRegExpWellKnownSymbolLogic("match",1,(function(MATCH,nativeMatch,maybeCallNative){return[function match(regexp){var O=requireObjectCoercible(this),matcher=null==regexp?void 0:regexp[MATCH];return void 0!==matcher?matcher.call(regexp,O):new RegExp(regexp)[MATCH](String(O))},function(regexp){var res=maybeCallNative(nativeMatch,regexp,this);if(res.done)return res.value;var rx=anObject(regexp),S=String(this);if(!rx.global)return regExpExec(rx,S);var fullUnicode=rx.unicode;rx.lastIndex=0;for(var result,A=[],n=0;null!==(result=regExpExec(rx,S));){var matchStr=String(result[0]);A[n]=matchStr,""===matchStr&&(rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode)),n++}return 0===n?null:A}]}))},function(module,exports,__webpack_require__){"use strict";var createNonEnumerableProperty=__webpack_require__(74),redefine=__webpack_require__(75),fails=__webpack_require__(33),wellKnownSymbol=__webpack_require__(37),regexpExec=__webpack_require__(225),SPECIES=wellKnownSymbol("species"),REPLACE_SUPPORTS_NAMED_GROUPS=!fails((function(){var re=/./;return re.exec=function(){var result=[];return result.groups={a:"7"},result},"7"!=="".replace(re,"$<a>")})),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!fails((function(){var re=/(?:)/,originalExec=re.exec;re.exec=function(){return originalExec.apply(this,arguments)};var result="ab".split(re);return 2!==result.length||"a"!==result[0]||"b"!==result[1]}));module.exports=function(KEY,length,exec,sham){var SYMBOL=wellKnownSymbol(KEY),DELEGATES_TO_SYMBOL=!fails((function(){var O={};return O[SYMBOL]=function(){return 7},7!=""[KEY](O)})),DELEGATES_TO_EXEC=DELEGATES_TO_SYMBOL&&!fails((function(){var execCalled=!1,re=/a/;return"split"===KEY&&((re={}).constructor={},re.constructor[SPECIES]=function(){return re},re.flags="",re[SYMBOL]=/./[SYMBOL]),re.exec=function(){return execCalled=!0,null},re[SYMBOL](""),!execCalled}));if(!DELEGATES_TO_SYMBOL||!DELEGATES_TO_EXEC||"replace"===KEY&&!REPLACE_SUPPORTS_NAMED_GROUPS||"split"===KEY&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC){var nativeRegExpMethod=/./[SYMBOL],methods=exec(SYMBOL,""[KEY],(function(nativeMethod,regexp,str,arg2,forceStringMethod){return regexp.exec===regexpExec?DELEGATES_TO_SYMBOL&&!forceStringMethod?{done:!0,value:nativeRegExpMethod.call(regexp,str,arg2)}:{done:!0,value:nativeMethod.call(str,regexp,arg2)}:{done:!1}})),stringMethod=methods[0],regexMethod=methods[1];redefine(String.prototype,KEY,stringMethod),redefine(RegExp.prototype,SYMBOL,2==length?function(string,arg){return regexMethod.call(string,this,arg)}:function(string){return regexMethod.call(string,this)}),sham&&createNonEnumerableProperty(RegExp.prototype[SYMBOL],"sham",!0)}}},function(module,exports,__webpack_require__){var classof=__webpack_require__(98),regexpExec=__webpack_require__(225);module.exports=function(R,S){var exec=R.exec;if("function"==typeof exec){var result=exec.call(R,S);if("object"!=typeof result)throw TypeError("RegExp exec method returned something other than an Object or null");return result}if("RegExp"!==classof(R))throw TypeError("RegExp#exec called on incompatible receiver");return regexpExec.call(R,S)}},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(618);module.exports=function toString(value){return null==value?"":baseToString(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(79).Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(150),isObjectLike=__webpack_require__(135),symbolTag="[object Symbol]";module.exports=function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&baseGetTag(value)==symbolTag}},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(635),listCacheDelete=__webpack_require__(636),listCacheGet=__webpack_require__(637),listCacheHas=__webpack_require__(638),listCacheSet=__webpack_require__(639);function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},function(module,exports,__webpack_require__){var eq=__webpack_require__(187);module.exports=function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(136)(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(657);module.exports=function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(299),isLength=__webpack_require__(399);module.exports=function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var _assert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(109),_polyfill_table__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(166);function polyfillExtension(gl,_ref2){var extension=_ref2.extension,target=_ref2.target,target2=_ref2.target2,defaults=_polyfill_table__WEBPACK_IMPORTED_MODULE_1__.b[extension];Object(_assert__WEBPACK_IMPORTED_MODULE_0__.a)(defaults);for(var _defaults$meta=defaults.meta,_meta$suffix=(void 0===_defaults$meta?{}:_defaults$meta).suffix,suffix=void 0===_meta$suffix?"":_meta$suffix,ext=gl.getExtension(extension),_loop=function _loop(){var key=_Object$keys[_i],extKey="".concat(key).concat(suffix),polyfill=null;"meta"===key||"function"==typeof gl[key]||(ext&&"function"==typeof ext[extKey]?polyfill=function polyfill(){return ext[extKey].apply(ext,arguments)}:"function"==typeof defaults[key]&&(polyfill=defaults[key].bind(target))),polyfill&&(target[key]=polyfill,target2[key]=polyfill)},_i=0,_Object$keys=Object.keys(defaults);_i<_Object$keys.length;_i++)_loop()}(void 0!==global?global:window).polyfillContext=function polyfillContext(gl){return gl.luma=gl.luma||{},function initializeExtensions(gl){gl.luma.extensions={};var EXTENSIONS=gl.getSupportedExtensions()||[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=EXTENSIONS[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var extension=_step.value;gl.luma[extension]=gl.getExtension(extension)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}(gl),gl.luma.polyfilled||(!function installPolyfills(gl,polyfills){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=Object.getOwnPropertyNames(polyfills)[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var extension=_step2.value;"overrides"!==extension&&polyfillExtension(gl,{extension:extension,target:gl.luma,target2:gl})}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}(gl,_polyfill_table__WEBPACK_IMPORTED_MODULE_1__.b),function installOverrides(gl,_ref){var target=_ref.target,target2=_ref.target2;Object.keys(_polyfill_table__WEBPACK_IMPORTED_MODULE_1__.a).forEach((function(key){if("function"==typeof _polyfill_table__WEBPACK_IMPORTED_MODULE_1__.a[key]){var originalFunc=gl[key]?gl[key].bind(gl):function(){},polyfill=_polyfill_table__WEBPACK_IMPORTED_MODULE_1__.a[key].bind(null,gl,originalFunc);target[key]=polyfill,target2[key]=polyfill}}))}(gl,{target:gl.luma,target2:gl}),gl.luma.polyfilled=!0),gl}}).call(this,__webpack_require__(36))},,function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),assertThisInitialized=__webpack_require__(7),inherits=__webpack_require__(6),react=__webpack_require__(8),react_default=__webpack_require__.n(react),prop_types=__webpack_require__(4),prop_types_default=__webpack_require__.n(prop_types),esm=__webpack_require__(51),lib_deck=__webpack_require__(426),toConsumableArray=__webpack_require__(16);function inheritsFrom(Type,ParentType){for(;Type;){if(Type===ParentType)return!0;Type=Object.getPrototypeOf(Type)}return!1}var views_view=__webpack_require__(154),lib_layer=__webpack_require__(153);function wrapInView(node){return node?"function"==typeof node?Object(react.createElement)(views_view.a,{},node):Array.isArray(node)?node.map(wrapInView):(inheritsFrom(node.type,views_view.a),node):node}function extractJSXLayers(_ref){var children=_ref.children,layers=_ref.layers,views=_ref.views,reactChildren=[],jsxLayers=[],jsxViews={};return react_default.a.Children.forEach(wrapInView(children),(function(reactElement){if(reactElement){var ElementType=reactElement.type;if(inheritsFrom(ElementType,lib_layer.a)){var layer=function createLayer(LayerType,reactProps){var props={},defaultProps=LayerType.defaultProps||{};for(var key in reactProps)defaultProps[key]!==reactProps[key]&&(props[key]=reactProps[key]);return new LayerType(props)}(ElementType,reactElement.props);jsxLayers.push(layer)}else reactChildren.push(reactElement);if(ElementType!==views_view.a&&inheritsFrom(ElementType,views_view.a)&&reactElement.props.id){var view=new ElementType(reactElement.props);jsxViews[view.id]=view}}})),Object.keys(jsxViews).length>0&&(Array.isArray(views)?views.forEach((function(view){jsxViews[view.id]=view})):views&&(jsxViews[views.id]=views),views=Object.values(jsxViews)),{layers:layers=jsxLayers.length>0?[].concat(jsxLayers,Object(toConsumableArray.a)(layers)):layers,children:reactChildren,views:views}}var log=__webpack_require__(10);function positionChildrenUnderViews(_ref){var children=_ref.children,deck=(_ref.viewports,_ref.deck),ContextProvider=_ref.ContextProvider,viewManager=(deck||{}).viewManager;if(!viewManager||!viewManager.views.length)return[];var defaultViewId=viewManager.views[0].id;return children.map((function(child,i){child.props.viewportId&&log.a.removed("viewportId","<View>")(),child.props.viewId&&log.a.removed("viewId","<View>")();var viewId=defaultViewId,viewChildren=child;inheritsFrom(child.type,views_view.a)&&(viewId=child.props.id||defaultViewId,viewChildren=child.props.children);var childStyle=viewChildren&&viewChildren.props&&viewChildren.props.style,viewport=viewManager.getViewport(viewId),viewState=viewManager.getViewState(viewId);if(!viewport)return null;var x=viewport.x,y=viewport.y,width=viewport.width,height=viewport.height;viewChildren=function evaluateChildren(children,childProps){return children?"function"==typeof children?children(childProps):Array.isArray(children)?children.map((function(child){return evaluateChildren(child,childProps)})):Object(react.cloneElement)(children,childProps):children}(viewChildren,{x:x,y:y,width:width,height:height,viewport:viewport,viewState:viewState});var style={position:"absolute",zIndex:childStyle&&childStyle.zIndex,pointerEvents:"none",left:x,top:y,width:width,height:height},key="view-child-".concat(viewId,"-").concat(i);if(ContextProvider){var contextValue={viewport:viewport,container:deck.canvas.offsetParent,eventManager:deck.eventManager,onViewStateChange:deck._onViewStateChange};viewChildren=Object(react.createElement)(ContextProvider,{value:contextValue},viewChildren)}return Object(react.createElement)("div",{key:key,id:key,style:style},viewChildren)}))}__webpack_require__.d(__webpack_exports__,"a",(function(){return deckgl_DeckGL}));var memoize=esm.a.memoize,propTypes=lib_deck.a.getPropTypes(prop_types_default.a),defaultProps=lib_deck.a.defaultProps,deckgl_DeckGL=function(_React$Component){function DeckGL(props){var _this;return Object(classCallCheck.a)(this,DeckGL),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(DeckGL).call(this,props))).viewports=null,_this.children=null,_this._needsRedraw=null,_this.pickObject=_this.pickObject.bind(Object(assertThisInitialized.a)(_this)),_this.pickMultipleObjects=_this.pickMultipleObjects.bind(Object(assertThisInitialized.a)(_this)),_this.pickObjects=_this.pickObjects.bind(Object(assertThisInitialized.a)(_this)),_this._extractJSXLayers=memoize(extractJSXLayers),_this._positionChildrenUnderViews=memoize(positionChildrenUnderViews),_this}return Object(inherits.a)(DeckGL,_React$Component),Object(createClass.a)(DeckGL,[{key:"componentDidMount",value:function componentDidMount(){var DeckClass=this.props.Deck||lib_deck.a;this.deck=this.deck||new DeckClass(Object.assign({},this.props,{canvas:this.deckCanvas,_customRender:this._customRender.bind(this)})),this._updateFromProps(this.props)}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps){this._updateFromProps(nextProps);var childrenChanged=this.children!==this._parseJSX(nextProps).children,viewsChanged=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return childrenChanged&&!viewsChanged}},{key:"componentDidUpdate",value:function componentDidUpdate(){this._redrawDeck()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.deck.finalize()}},{key:"pickObject",value:function pickObject(opts){return this.deck.pickObject(opts)}},{key:"pickMultipleObjects",value:function pickMultipleObjects(opts){return this.deck.pickMultipleObjects(opts)}},{key:"pickObjects",value:function pickObjects(opts){return this.deck.pickObjects(opts)}},{key:"_redrawDeck",value:function _redrawDeck(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:"_customRender",value:function _customRender(redrawReason){this._needsRedraw=redrawReason,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:"_parseJSX",value:function _parseJSX(props){return this._extractJSXLayers({layers:props.layers,views:props.views,children:props.children})}},{key:"_updateFromProps",value:function _updateFromProps(props){var _this$_parseJSX=this._parseJSX(props),layers=_this$_parseJSX.layers,views=_this$_parseJSX.views,deckProps=Object.assign({},props,{layers:layers,views:views});this.deck.setProps(deckProps)}},{key:"render",value:function render(){var _this2=this,viewManager=(this.deck||{}).viewManager;this.viewports=viewManager&&viewManager.getViewports(),this.children=this._parseJSX(this.props).children;var children=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck,ContextProvider:this.props.ContextProvider}),style=Object.assign({},{position:"absolute",left:0,top:0},this.props.style),canvas=Object(react.createElement)("canvas",{ref:function ref(c){return _this2.deckCanvas=c},key:"deck-canvas",id:this.props.id,style:style});return Object(react.createElement)("div",{id:"deckgl-wrapper"},[children,canvas])}}]),DeckGL}(react_default.a.Component);deckgl_DeckGL.propTypes=propTypes,deckgl_DeckGL.defaultProps=defaultProps},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MapView}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),_view__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(154),_viewports_web_mercator_viewport__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(241),_controllers_map_controller__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(245),MapView=function(_View){function MapView(props){return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,MapView),Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(MapView).call(this,Object.assign({},props,{type:_viewports_web_mercator_viewport__WEBPACK_IMPORTED_MODULE_6__.a})))}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(MapView,_View),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(MapView,[{key:"controller",get:function get(){return this._getControllerProps({type:_controllers_map_controller__WEBPACK_IMPORTED_MODULE_7__.a})}}]),MapView}(_view__WEBPACK_IMPORTED_MODULE_5__.a);MapView.displayName="MapView"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return WebMercatorViewport}));var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3),_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6),_viewport__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(80),viewport_mercator_project__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(22),viewport_mercator_project__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(313),gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(48),_utils_assert__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(14),ERR_ARGUMENT="Illegal argument to WebMercatorViewport",WebMercatorViewport=function(_Viewport){function WebMercatorViewport(){var _this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,WebMercatorViewport);var _opts$latitude=opts.latitude,latitude=void 0===_opts$latitude?0:_opts$latitude,_opts$longitude=opts.longitude,longitude=void 0===_opts$longitude?0:_opts$longitude,_opts$zoom=opts.zoom,zoom=void 0===_opts$zoom?11:_opts$zoom,_opts$pitch=opts.pitch,pitch=void 0===_opts$pitch?0:_opts$pitch,_opts$bearing=opts.bearing,bearing=void 0===_opts$bearing?0:_opts$bearing,_opts$nearZMultiplier=opts.nearZMultiplier,nearZMultiplier=void 0===_opts$nearZMultiplier?.1:_opts$nearZMultiplier,_opts$farZMultiplier=opts.farZMultiplier,farZMultiplier=void 0===_opts$farZMultiplier?10:_opts$farZMultiplier,_opts$orthographic=opts.orthographic,orthographic=void 0!==_opts$orthographic&&_opts$orthographic,width=opts.width,height=opts.height,_opts$altitude=opts.altitude,altitude=void 0===_opts$altitude?1.5:_opts$altitude;width=width||1,height=height||1,altitude=Math.max(.75,altitude);var _getProjectionParamet=Object(viewport_mercator_project__WEBPACK_IMPORTED_MODULE_8__.e)({width:width,height:height,pitch:pitch,altitude:altitude,nearZMultiplier:nearZMultiplier,farZMultiplier:farZMultiplier}),fov=_getProjectionParamet.fov,aspect=_getProjectionParamet.aspect,focalDistance=_getProjectionParamet.focalDistance,near=_getProjectionParamet.near,far=_getProjectionParamet.far,viewMatrixUncentered=Object(viewport_mercator_project__WEBPACK_IMPORTED_MODULE_8__.f)({height:height,pitch:pitch,bearing:bearing,altitude:altitude}),viewportOpts=Object.assign({},opts,{width:width,height:height,viewMatrix:viewMatrixUncentered,longitude:longitude,latitude:latitude,zoom:zoom,orthographic:orthographic,fovyRadians:fov,aspect:aspect,orthographicFocalDistance:focalDistance,near:near,far:far});return(_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__.a)(WebMercatorViewport).call(this,viewportOpts))).latitude=latitude,_this.longitude=longitude,_this.zoom=zoom,_this.pitch=pitch,_this.bearing=bearing,_this.altitude=altitude,_this.orthographic=orthographic,_this.metersToLngLatDelta=_this.metersToLngLatDelta.bind(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__.a)(_this)),_this.lngLatDeltaToMeters=_this.lngLatDeltaToMeters.bind(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__.a)(_this)),Object.freeze(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__.a)(_this)),_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__.a)(WebMercatorViewport,_Viewport),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(WebMercatorViewport,[{key:"metersToLngLatDelta",value:function metersToLngLatDelta(xyz){var _xyz=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(xyz,3),x=_xyz[0],y=_xyz[1],_xyz$=_xyz[2],z=void 0===_xyz$?0:_xyz$;Object(_utils_assert__WEBPACK_IMPORTED_MODULE_11__.a)(Number.isFinite(x)&&Number.isFinite(y)&&Number.isFinite(z),ERR_ARGUMENT);var _this$distanceScales=this.distanceScales,pixelsPerMeter=_this$distanceScales.pixelsPerMeter,degreesPerPixel=_this$distanceScales.degreesPerPixel,deltaLng=x*pixelsPerMeter[0]*degreesPerPixel[0],deltaLat=y*pixelsPerMeter[1]*degreesPerPixel[1];return 2===xyz.length?[deltaLng,deltaLat]:[deltaLng,deltaLat,z]}},{key:"lngLatDeltaToMeters",value:function lngLatDeltaToMeters(deltaLngLatZ){var _deltaLngLatZ=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(deltaLngLatZ,3),deltaLng=_deltaLngLatZ[0],deltaLat=_deltaLngLatZ[1],_deltaLngLatZ$=_deltaLngLatZ[2],deltaZ=void 0===_deltaLngLatZ$?0:_deltaLngLatZ$;Object(_utils_assert__WEBPACK_IMPORTED_MODULE_11__.a)(Number.isFinite(deltaLng)&&Number.isFinite(deltaLat)&&Number.isFinite(deltaZ),ERR_ARGUMENT);var _this$distanceScales2=this.distanceScales,pixelsPerDegree=_this$distanceScales2.pixelsPerDegree,metersPerPixel=_this$distanceScales2.metersPerPixel,deltaX=deltaLng*pixelsPerDegree[0]*metersPerPixel[0],deltaY=deltaLat*pixelsPerDegree[1]*metersPerPixel[1];return 2===deltaLngLatZ.length?[deltaX,deltaY]:[deltaX,deltaY,deltaZ]}},{key:"addMetersToLngLat",value:function addMetersToLngLat(lngLatZ,xyz){return Object(viewport_mercator_project__WEBPACK_IMPORTED_MODULE_8__.a)(lngLatZ,xyz)}},{key:"getMapCenterByLngLatPosition",value:function getMapCenterByLngLatPosition(_ref){var lngLat=_ref.lngLat,pos=_ref.pos,fromLocation=Object(viewport_mercator_project__WEBPACK_IMPORTED_MODULE_8__.h)(pos,this.pixelUnprojectionMatrix),toLocation=this.projectFlat(lngLat),translate=gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_10__.a([],toLocation,gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_10__.d([],fromLocation)),newCenter=gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_10__.a([],this.center,translate);return this.unprojectFlat(newCenter)}},{key:"getLocationAtPoint",value:function getLocationAtPoint(_ref2){var lngLat=_ref2.lngLat,pos=_ref2.pos;return this.getMapCenterByLngLatPosition({lngLat:lngLat,pos:pos})}},{key:"fitBounds",value:function fitBounds(bounds){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},width=this.width,height=this.height,_fitBounds2=Object(viewport_mercator_project__WEBPACK_IMPORTED_MODULE_9__.a)(Object.assign({width:width,height:height,bounds:bounds},options)),longitude=_fitBounds2.longitude,latitude=_fitBounds2.latitude,zoom=_fitBounds2.zoom;return new WebMercatorViewport({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom})}}]),WebMercatorViewport}(_viewport__WEBPACK_IMPORTED_MODULE_7__.a);WebMercatorViewport.displayName="WebMercatorViewport"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Controller}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_transition_manager__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(152),_utils_log__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),_utils_assert__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(14),NO_TRANSITION_PROPS={transitionDuration:0},EVENT_TYPES_WHEEL=["wheel"],EVENT_TYPES_PAN=["panstart","panmove","panend"],EVENT_TYPES_PINCH=["pinchstart","pinchmove","pinchend"],EVENT_TYPES_DOUBLE_TAP=["doubletap"],EVENT_TYPES_KEYBOARD=["keydown"],Controller=function(){function Controller(ControllerState){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Controller),Object(_utils_assert__WEBPACK_IMPORTED_MODULE_4__.a)(ControllerState),this.ControllerState=ControllerState,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new _transition_manager__WEBPACK_IMPORTED_MODULE_2__.b(ControllerState,options),this._events=null,this._state={isDragging:!1},this.events=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(options)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Controller,[{key:"finalize",value:function finalize(){for(var eventName in this._events)this._events[eventName]&&this.eventManager.off(eventName,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function handleEvent(event){var ControllerState=this.ControllerState;switch(this.controllerState=new ControllerState(Object.assign({},this.controllerStateProps,this._state)),event.type){case"panstart":return this._onPanStart(event);case"panmove":return this._onPan(event);case"panend":return this._onPanEnd(event);case"pinchstart":return this._onPinchStart(event);case"pinchmove":return this._onPinch(event);case"pinchend":return this._onPinchEnd(event);case"doubletap":return this._onDoubleTap(event);case"wheel":return this._onWheel(event);case"keydown":return this._onKeyDown(event);default:return!1}}},{key:"getCenter",value:function getCenter(event){var _this$controllerState=this.controllerStateProps,x=_this$controllerState.x,y=_this$controllerState.y,offsetCenter=event.offsetCenter;return[offsetCenter.x-x,offsetCenter.y-y]}},{key:"isPointInBounds",value:function isPointInBounds(pos,event){var _this$controllerState2=this.controllerStateProps,width=_this$controllerState2.width,height=_this$controllerState2.height;if(event&&event.handled)return!1;var inside=pos[0]>=0&&pos[0]<=width&&pos[1]>=0&&pos[1]<=height;return inside&&event&&event.stopPropagation(),inside}},{key:"isFunctionKeyPressed",value:function isFunctionKeyPressed(event){var srcEvent=event.srcEvent;return Boolean(srcEvent.metaKey||srcEvent.altKey||srcEvent.ctrlKey||srcEvent.shiftKey)}},{key:"isDragging",value:function isDragging(){return this._state.isDragging}},{key:"setProps",value:function setProps(props){"onViewportChange"in props&&_utils_log__WEBPACK_IMPORTED_MODULE_3__.a.removed("onViewportChange")(),"onViewStateChange"in props&&(this.onViewStateChange=props.onViewStateChange),"onStateChange"in props&&(this.onStateChange=props.onStateChange),this.controllerStateProps=props,"eventManager"in props&&this.eventManager!==props.eventManager&&(this.eventManager=props.eventManager,this._events={},this.toggleEvents(this.events,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var _props$scrollZoom=props.scrollZoom,scrollZoom=void 0===_props$scrollZoom||_props$scrollZoom,_props$dragPan=props.dragPan,dragPan=void 0===_props$dragPan||_props$dragPan,_props$dragRotate=props.dragRotate,dragRotate=void 0===_props$dragRotate||_props$dragRotate,_props$doubleClickZoo=props.doubleClickZoom,doubleClickZoom=void 0===_props$doubleClickZoo||_props$doubleClickZoo,_props$touchZoom=props.touchZoom,touchZoom=void 0===_props$touchZoom||_props$touchZoom,_props$touchRotate=props.touchRotate,touchRotate=void 0!==_props$touchRotate&&_props$touchRotate,_props$keyboard=props.keyboard,keyboard=void 0===_props$keyboard||_props$keyboard,isInteractive=Boolean(this.onViewStateChange);this.toggleEvents(EVENT_TYPES_WHEEL,isInteractive&&scrollZoom),this.toggleEvents(EVENT_TYPES_PAN,isInteractive&&(dragPan||dragRotate)),this.toggleEvents(EVENT_TYPES_PINCH,isInteractive&&(touchZoom||touchRotate)),this.toggleEvents(EVENT_TYPES_DOUBLE_TAP,isInteractive&&doubleClickZoom),this.toggleEvents(EVENT_TYPES_KEYBOARD,isInteractive&&keyboard),this.scrollZoom=scrollZoom,this.dragPan=dragPan,this.dragRotate=dragRotate,this.doubleClickZoom=doubleClickZoom,this.touchZoom=touchZoom,this.touchRotate=touchRotate,this.keyboard=keyboard}},{key:"updateTransition",value:function updateTransition(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function toggleEvents(eventNames,enabled){var _this=this;this.eventManager&&eventNames.forEach((function(eventName){_this._events[eventName]!==enabled&&(_this._events[eventName]=enabled,enabled?_this.eventManager.on(eventName,_this.handleEvent):_this.eventManager.off(eventName,_this.handleEvent))}))}},{key:"setOptions",value:function setOptions(props){return this.setProps(props)}},{key:"updateViewport",value:function updateViewport(newControllerState){var extraProps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},interactionState=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},viewState=Object.assign({},newControllerState.getViewportProps(),extraProps),changed=this.controllerState!==newControllerState;if(changed){var oldViewState=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:viewState,interactionState:interactionState,oldViewState:oldViewState})}Object.assign(this._state,newControllerState.getInteractiveState(),interactionState),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function _onPanStart(event){var pos=this.getCenter(event);if(!this.isPointInBounds(pos,event))return!1;var newControllerState=this.controllerState.panStart({pos:pos}).rotateStart({pos:pos});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}},{key:"_onPan",value:function _onPan(event){if(!this.isDragging())return!1;var alternateMode=this.isFunctionKeyPressed(event)||event.rightButton;return(alternateMode=this.invertPan?!alternateMode:alternateMode)?this._onPanMove(event):this._onPanRotate(event)}},{key:"_onPanEnd",value:function _onPanEnd(event){var newControllerState=this.controllerState.panEnd().rotateEnd();return this.updateViewport(newControllerState,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function _onPanMove(event){if(!this.dragPan)return!1;var pos=this.getCenter(event),newControllerState=this.controllerState.pan({pos:pos});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanRotate",value:function _onPanRotate(event){if(!this.dragRotate)return!1;var deltaX=event.deltaX,deltaY=event.deltaY,_this$controllerState3=this.controllerState.getViewportProps(),deltaScaleX=deltaX/_this$controllerState3.width,deltaScaleY=deltaY/_this$controllerState3.height,newControllerState=this.controllerState.rotate({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0,isRotating:!0}),!0}},{key:"_onWheel",value:function _onWheel(event){if(!this.scrollZoom)return!1;event.preventDefault();var pos=this.getCenter(event);if(!this.isPointInBounds(pos,event))return!1;var delta=event.delta,scale=2/(1+Math.exp(-Math.abs(.01*delta)));delta<0&&0!==scale&&(scale=1/scale);var newControllerState=this.controllerState.zoom({pos:pos,scale:scale});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isZooming:!0,isPanning:!0}),!0}},{key:"_onPinchStart",value:function _onPinchStart(event){var pos=this.getCenter(event);if(!this.isPointInBounds(pos,event))return!1;var newControllerState=this.controllerState.zoomStart({pos:pos}).rotateStart({pos:pos});return this._state.startPinchRotation=event.rotation,this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}},{key:"_onPinch",value:function _onPinch(event){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;var newControllerState=this.controllerState;if(this.touchZoom){var scale=event.scale,pos=this.getCenter(event);newControllerState=newControllerState.zoom({pos:pos,scale:scale})}if(this.touchRotate){var rotation=event.rotation,startPinchRotation=this._state.startPinchRotation;newControllerState=newControllerState.rotate({deltaScaleX:-(rotation-startPinchRotation)/180})}return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function _onPinchEnd(event){var newControllerState=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(newControllerState,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function _onDoubleTap(event){if(!this.doubleClickZoom)return!1;var pos=this.getCenter(event);if(!this.isPointInBounds(pos,event))return!1;var isZoomOut=this.isFunctionKeyPressed(event),newControllerState=this.controllerState.zoom({pos:pos,scale:isZoomOut?.5:2});return this.updateViewport(newControllerState,this._getTransitionProps(),{isZooming:!0,isPanning:!0}),!0}},{key:"_onKeyDown",value:function _onKeyDown(event){if(!this.keyboard)return!1;var newControllerState,funcKey=this.isFunctionKeyPressed(event),controllerState=this.controllerState,interactionState={};switch(event.srcEvent.keyCode){case 189:newControllerState=funcKey?controllerState.zoomOut().zoomOut():controllerState.zoomOut(),interactionState.isZooming=!0;break;case 187:newControllerState=funcKey?controllerState.zoomIn().zoomIn():controllerState.zoomIn(),interactionState.isZooming=!0;break;case 37:funcKey?(newControllerState=controllerState.rotateLeft(),interactionState.isRotating=!0):(newControllerState=controllerState.moveLeft(),interactionState.isPanning=!0);break;case 39:funcKey?(newControllerState=controllerState.rotateRight(),interactionState.isRotating=!0):(newControllerState=controllerState.moveRight(),interactionState.isPanning=!0);break;case 38:funcKey?(newControllerState=controllerState.rotateUp(),interactionState.isRotating=!0):(newControllerState=controllerState.moveUp(),interactionState.isPanning=!0);break;case 40:funcKey?(newControllerState=controllerState.rotateDown(),interactionState.isRotating=!0):(newControllerState=controllerState.moveDown(),interactionState.isPanning=!0);break;default:return!1}return this.updateViewport(newControllerState,this._getTransitionProps(),interactionState),!0}},{key:"_getTransitionProps",value:function _getTransitionProps(){return NO_TRANSITION_PROPS}}]),Controller}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return LayerManager}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_utils_assert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14),_luma_gl_addons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(776),seer__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(30),seer__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(seer__WEBPACK_IMPORTED_MODULE_4__),_layer__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(153),_lifecycle_constants__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(111),_utils_log__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10),_utils_flatten__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(83),probe_gl__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(779),_viewports_viewport__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(80),_shaderlib__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(190),_seer_integration__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(70),INITIAL_CONTEXT=Object.seal({layerManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),layerName=function layerName(layer){return layer instanceof _layer__WEBPACK_IMPORTED_MODULE_5__.a?"".concat(layer):layer?"invalid":"null"},LayerManager=function(){function LayerManager(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},deck=_ref.deck,stats=_ref.stats,_ref$viewport=_ref.viewport,viewport=void 0===_ref$viewport?null:_ref$viewport,_ref$timeline=_ref.timeline,timeline=void 0===_ref$timeline?null:_ref$timeline;Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,LayerManager),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},INITIAL_CONTEXT,{layerManager:this,deck:deck,gl:gl,programManager:gl&&Object(_shaderlib__WEBPACK_IMPORTED_MODULE_11__.a)(gl),stats:stats||new probe_gl__WEBPACK_IMPORTED_MODULE_9__.a({id:"deck.gl"}),viewport:viewport||new _viewports_viewport__WEBPACK_IMPORTED_MODULE_10__.a({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:timeline||new _luma_gl_addons__WEBPACK_IMPORTED_MODULE_3__.a}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object.seal(this),Object(_seer_integration__WEBPACK_IMPORTED_MODULE_12__.e)(this._initSeer),Object(_seer_integration__WEBPACK_IMPORTED_MODULE_12__.c)(this._editSeer)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(LayerManager,[{key:"finalize",value:function finalize(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.layers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var layer=_step.value;this._finalizeLayer(layer)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}seer__WEBPACK_IMPORTED_MODULE_4___default.a.removeListener(this._initSeer),seer__WEBPACK_IMPORTED_MODULE_4___default.a.removeListener(this._editSeer)}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._checkIfNeedsRedraw(opts)}},{key:"needsUpdate",value:function needsUpdate(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function setNeedsRedraw(reason){this._needsRedraw=this._needsRedraw||reason}},{key:"setNeedsUpdate",value:function setNeedsUpdate(reason){this._needsUpdate=this._needsUpdate||reason}},{key:"getLayers",value:function getLayers(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref2$layerIds=_ref2.layerIds,layerIds=void 0===_ref2$layerIds?null:_ref2$layerIds;return layerIds?this.layers.filter((function(layer){return layerIds.find((function(layerId){return 0===layer.id.indexOf(layerId)}))})):this.layers}},{key:"setProps",value:function setProps(props){"debug"in props&&(this._debug=props.debug),"userData"in props&&(this.context.userData=props.userData),"layers"in props&&this.setLayers(props.layers)}},{key:"setLayers",value:function setLayers(newLayers){var forceUpdate=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!forceUpdate&&newLayers===this.lastRenderedLayers)return _utils_log__WEBPACK_IMPORTED_MODULE_7__.a.log(3,"Ignoring layer update due to layer array not changed")(),this;this.lastRenderedLayers=newLayers,newLayers=Object(_utils_flatten__WEBPACK_IMPORTED_MODULE_8__.b)(newLayers,{filter:Boolean});var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=newLayers[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var layer=_step2.value;layer.context=this.context}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var _this$_updateLayers=this._updateLayers({oldLayers:this.layers,newLayers:newLayers}),error=_this$_updateLayers.error,generatedLayers=_this$_updateLayers.generatedLayers;if(this.layers=generatedLayers,error)throw error;return this}},{key:"updateLayers",value:function updateLayers(){var reason=this.needsUpdate();if(reason){this.setNeedsRedraw("updating layers: ".concat(reason));this.setLayers(this.lastRenderedLayers,!0)}}},{key:"_checkIfNeedsRedraw",value:function _checkIfNeedsRedraw(opts){var redraw=this._needsRedraw;opts.clearRedrawFlags&&(this._needsRedraw=!1);var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=this.layers[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var layerNeedsRedraw=_step3.value.getNeedsRedraw(opts);redraw=redraw||layerNeedsRedraw}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return redraw}},{key:"activateViewport",value:function activateViewport(viewport){var oldViewport=this.context.viewport;if(!oldViewport||!viewport.equals(oldViewport)){_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.log(4,"Viewport changed",viewport)(),this.context.viewport=viewport;var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=this.layers[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var layer=_step4.value;layer.setChangeFlags({viewportChanged:"Viewport changed"}),this._updateLayer(layer)}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}return Object(_utils_assert__WEBPACK_IMPORTED_MODULE_2__.a)(this.context.viewport,"LayerManager: viewport not set"),this}},{key:"_updateLayers",value:function _updateLayers(_ref3){var oldLayers=_ref3.oldLayers,newLayers=_ref3.newLayers,oldLayerMap={},_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=oldLayers[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var oldLayer=_step5.value;oldLayerMap[oldLayer.id]?_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.warn("Multiple old layers with same id ".concat(layerName(oldLayer)))():oldLayerMap[oldLayer.id]=oldLayer}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{_iteratorNormalCompletion5||null==_iterator5.return||_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}var generatedLayers=[],error=this._updateSublayersRecursively({newLayers:newLayers,oldLayerMap:oldLayerMap,generatedLayers:generatedLayers}),error2=this._finalizeOldLayers(oldLayerMap);return this._needsUpdate=generatedLayers.some((function(layer){return layer.hasUniformTransition()})),{error:error||error2,generatedLayers:generatedLayers}}},{key:"_updateSublayersRecursively",value:function _updateSublayersRecursively(_ref4){var newLayers=_ref4.newLayers,oldLayerMap=_ref4.oldLayerMap,generatedLayers=_ref4.generatedLayers,error=null,_iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=newLayers[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var newLayer=_step6.value;newLayer.context=this.context;var oldLayer=oldLayerMap[newLayer.id];null===oldLayer&&_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.warn("Multiple new layers with same id ".concat(layerName(newLayer)))(),oldLayerMap[newLayer.id]=null;var sublayers=null;try{if(this._debug&&oldLayer!==newLayer&&newLayer.validateProps(),oldLayer){this._transferLayerState(oldLayer,newLayer);var _err=this._updateLayer(newLayer);error=error||_err,Object(_seer_integration__WEBPACK_IMPORTED_MODULE_12__.g)(newLayer)}else{var err=this._initializeLayer(newLayer);error=error||err,Object(_seer_integration__WEBPACK_IMPORTED_MODULE_12__.b)(newLayer)}generatedLayers.push(newLayer),sublayers=newLayer.isComposite&&newLayer.getSubLayers()}catch(err){_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.warn("error during matching of ".concat(layerName(newLayer)),err)(),error=error||err}if(sublayers){var _err2=this._updateSublayersRecursively({newLayers:sublayers,oldLayerMap:oldLayerMap,generatedLayers:generatedLayers});error=error||_err2}}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{_iteratorNormalCompletion6||null==_iterator6.return||_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}return error}},{key:"_finalizeOldLayers",value:function _finalizeOldLayers(oldLayerMap){var error=null;for(var layerId in oldLayerMap){var layer=oldLayerMap[layerId];layer&&(error=error||this._finalizeLayer(layer))}return error}},{key:"_initializeLayer",value:function _initializeLayer(layer){_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.log(2,"initializing ".concat(layerName(layer)))();var error=null;try{layer._initialize(),layer.lifecycle=_lifecycle_constants__WEBPACK_IMPORTED_MODULE_6__.a.INITIALIZED}catch(err){_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.warn("error while initializing ".concat(layerName(layer),"\n"),err)(),error=error||err}layer.internalState.layer=layer;var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=layer.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){_step7.value.userData.layer=layer}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{_iteratorNormalCompletion7||null==_iterator7.return||_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}return error}},{key:"_transferLayerState",value:function _transferLayerState(oldLayer,newLayer){newLayer._transferState(oldLayer),newLayer.lifecycle=_lifecycle_constants__WEBPACK_IMPORTED_MODULE_6__.a.MATCHED,newLayer!==oldLayer?(_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.log(4,"matched ".concat(layerName(newLayer)),oldLayer,"->",newLayer)(),oldLayer.lifecycle=_lifecycle_constants__WEBPACK_IMPORTED_MODULE_6__.a.AWAITING_GC):_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.log(4,"Matching layer is unchanged ".concat(newLayer.id))()}},{key:"_updateLayer",value:function _updateLayer(layer){_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.log(4,"updating ".concat(layer," because: ").concat(layer.printChangeFlags()))();var error=null;try{layer._update()}catch(err){_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.warn("error during update of ".concat(layerName(layer)),err)(),error=err}return error}},{key:"_finalizeLayer",value:function _finalizeLayer(layer){Object(_utils_assert__WEBPACK_IMPORTED_MODULE_2__.a)(layer.lifecycle!==_lifecycle_constants__WEBPACK_IMPORTED_MODULE_6__.a.AWAITING_FINALIZATION),layer.lifecycle=_lifecycle_constants__WEBPACK_IMPORTED_MODULE_6__.a.AWAITING_FINALIZATION;var error=null;this.setNeedsRedraw("finalized ".concat(layerName(layer)));try{layer._finalize()}catch(err){_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.warn("error during finalization of ".concat(layerName(layer)),err)(),error=err}return layer.lifecycle=_lifecycle_constants__WEBPACK_IMPORTED_MODULE_6__.a.FINALIZED,_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.log(2,"finalizing ".concat(layerName(layer)))(),error}},{key:"_initSeer",value:function _initSeer(){this.layers.forEach((function(layer){Object(_seer_integration__WEBPACK_IMPORTED_MODULE_12__.b)(layer),Object(_seer_integration__WEBPACK_IMPORTED_MODULE_12__.g)(layer)}))}},{key:"_editSeer",value:function _editSeer(payload){"edit"===payload.type&&"props"===payload.valuePath[0]&&(Object(_seer_integration__WEBPACK_IMPORTED_MODULE_12__.f)(payload.itemKey,payload.valuePath.slice(1),payload.value),this.updateLayers())}}]),LayerManager}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),slicedToArray=__webpack_require__(9),defineProperty=__webpack_require__(0),possibleConstructorReturn=__webpack_require__(5),assertThisInitialized=__webpack_require__(7),getPrototypeOf=__webpack_require__(3),get=__webpack_require__(20),inherits=__webpack_require__(6),classes_buffer=__webpack_require__(38),assert=__webpack_require__(14),iterable_utils=__webpack_require__(90),flatten=__webpack_require__(83),EMPTY=[],FULL=[[0,1/0]];function add(rangeList,range){if(rangeList===FULL)return rangeList;if(range[0]<0&&(range[0]=0),range[0]>=range[1])return rangeList;for(var newRangeList=[],len=rangeList.length,insertPosition=0,i=0;i<len;i++){var range0=rangeList[i];range0[1]<range[0]?(newRangeList.push(range0),insertPosition=i+1):range0[0]>range[1]?newRangeList.push(range0):range=[Math.min(range0[0],range[0]),Math.max(range0[1],range[1])]}return newRangeList.splice(insertPosition,0,range),newRangeList}var log=__webpack_require__(10),base_attribute=__webpack_require__(163),typed_array_manager=__webpack_require__(139),math_utils=__webpack_require__(62),attribute_transition_utils=__webpack_require__(57);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var DEFAULT_STATE={isExternalBuffer:!1,lastExternalBuffer:null,allocatedValue:null,needsUpdate:!0,needsRedraw:!1,updateRanges:FULL};var attribute_Attribute=function(_BaseAttribute){function Attribute(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,Attribute);var logicalType=opts.type,doublePrecision=5130===logicalType;_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Attribute).call(this,gl,doublePrecision?function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},opts,{type:5126}):opts));var _opts$transition=opts.transition,transition=void 0!==_opts$transition&&_opts$transition,_opts$noAlloc=opts.noAlloc,noAlloc=void 0!==_opts$noAlloc&&_opts$noAlloc,_opts$update=opts.update,update=void 0===_opts$update?null:_opts$update,_opts$accessor=opts.accessor,accessor=void 0===_opts$accessor?null:_opts$accessor,_opts$transform=opts.transform,transform=void 0===_opts$transform?null:_opts$transform,_opts$bufferLayout=opts.bufferLayout,bufferLayout=void 0===_opts$bufferLayout?null:_opts$bufferLayout,_opts$defaultValue=opts.defaultValue,defaultValue=void 0===_opts$defaultValue?[0,0,0,0]:_opts$defaultValue;defaultValue=Array.isArray(defaultValue)?defaultValue:[defaultValue],_this.defaultType=logicalType||_this.type||5126,_this.shaderAttributes={},_this.hasShaderAttributes=!1,_this.doublePrecision=doublePrecision,doublePrecision&&!1===opts.fp64&&(_this.defaultType=5126);var shaderAttributes=opts.shaderAttributes||doublePrecision&&Object(defineProperty.a)({},_this.id,{});if(shaderAttributes){var shaderAttributeNames=Object.keys(shaderAttributes);for(var shaderAttributeName in shaderAttributes=doublePrecision?function addDoublePrecisionAttributes(attribute,shaderAttributeDefs){var doubleShaderAttributeDefs={};for(var shaderAttributeName in shaderAttributeDefs){var def=shaderAttributeDefs[shaderAttributeName],offset="offset"in def?def.offset:attribute.offset,stride="stride"in def?def.stride:4*attribute.size;doubleShaderAttributeDefs["".concat(shaderAttributeName,"32")]=Object.assign({},def,{offset:offset,stride:stride}),doubleShaderAttributeDefs["".concat(shaderAttributeName,"64")]=Object.assign({},def,{offset:2*offset,stride:2*stride}),doubleShaderAttributeDefs["".concat(shaderAttributeName,"64xyLow")]=Object.assign({},def,{offset:2*offset+stride,stride:2*stride})}return doubleShaderAttributeDefs}(Object(assertThisInitialized.a)(_this),shaderAttributes):shaderAttributes){var shaderAttribute=shaderAttributes[shaderAttributeName];_this.shaderAttributes[shaderAttributeName]=new base_attribute.a(_this.gl,Object.assign({size:_this.size,normalized:_this.normalized,integer:_this.integer,offset:_this.offset,stride:_this.stride,divisor:_this.divisor},shaderAttribute,{id:shaderAttributeName,buffer:_this.getBuffer()})),_this.hasShaderAttributes=shaderAttributeNames}}return Object.assign(_this.userData,DEFAULT_STATE,opts,{transition:transition,noAlloc:noAlloc,update:update||accessor&&_this._standardAccessor,accessor:accessor,transform:transform,defaultValue:defaultValue,bufferLayout:bufferLayout}),Object.seal(_this.userData),_this._validateAttributeUpdaters(),_this}return Object(inherits.a)(Attribute,_BaseAttribute),Object(createClass.a)(Attribute,[{key:"delete",value:function _delete(){Object(get.a)(Object(getPrototypeOf.a)(Attribute.prototype),"delete",this).call(this),typed_array_manager.a.release(this.userData.allocatedValue)}},{key:"needsUpdate",value:function needsUpdate(){return this.userData.needsUpdate}},{key:"needsRedraw",value:function needsRedraw(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref2$clearChangedFla=_ref2.clearChangedFlags,clearChangedFlags=void 0!==_ref2$clearChangedFla&&_ref2$clearChangedFla,needsRedraw=this.userData.needsRedraw;return this.userData.needsRedraw=this.userData.needsRedraw&&!clearChangedFlags,needsRedraw}},{key:"getUpdateTriggers",value:function getUpdateTriggers(){var accessor=this.userData.accessor;return[this.id].concat("function"!=typeof accessor&&accessor||[])}},{key:"getAccessor",value:function getAccessor(){return this.userData.accessor}},{key:"getShaderAttributes",value:function getShaderAttributes(){var shaderAttributes={};if(this.doublePrecision){var isBuffer64Bit=this.value instanceof Float64Array,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.hasShaderAttributes[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var shaderAttributeName=_step.value;shaderAttributes[shaderAttributeName]=this.shaderAttributes["".concat(shaderAttributeName,isBuffer64Bit?"64":"32")];var shaderAttributeLowPartName="".concat(shaderAttributeName,"64xyLow");shaderAttributes[shaderAttributeLowPartName]=isBuffer64Bit?this.shaderAttributes[shaderAttributeLowPartName]:new Float32Array(this.size)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else this.hasShaderAttributes?Object.assign(shaderAttributes,this.shaderAttributes):shaderAttributes[this.id]=this;return shaderAttributes}},{key:"supportsTransition",value:function supportsTransition(){return Boolean(this.userData.transition)}},{key:"getTransitionSetting",value:function getTransitionSetting(opts){var accessor=this.userData.accessor,layerSettings=this.userData.transition;if(!this.supportsTransition())return null;var userSettings=Array.isArray(accessor)?opts[accessor.find((function(a){return opts[a]}))]:opts[accessor];return Object(attribute_transition_utils.e)(userSettings,layerSettings)}},{key:"setNeedsUpdate",value:function setNeedsUpdate(){var reason=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,dataRange=arguments.length>1?arguments[1]:void 0;if(this.userData.needsUpdate=this.userData.needsUpdate||reason,dataRange){var _dataRange$startRow=dataRange.startRow,startRow=void 0===_dataRange$startRow?0:_dataRange$startRow,_dataRange$endRow=dataRange.endRow,endRow=void 0===_dataRange$endRow?1/0:_dataRange$endRow;this.userData.updateRanges=add(this.userData.updateRanges,[startRow,endRow])}else this.userData.updateRanges=FULL}},{key:"clearNeedsUpdate",value:function clearNeedsUpdate(){this.userData.needsUpdate=!1,this.userData.updateRanges=EMPTY}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var reason=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsRedraw=this.userData.needsRedraw||reason}},{key:"allocate",value:function allocate(numInstances){var state=this.userData;if(state.isExternalBuffer||state.noAlloc)return!1;if(state.update){Object(assert.a)(Number.isFinite(numInstances));var allocCount=Math.max(numInstances,1),ArrayType=glArrayFromType(this.defaultType),oldValue=state.allocatedValue,shouldCopy=state.updateRanges!==FULL;return this.constant=!1,this.value=typed_array_manager.a.allocate(oldValue,allocCount,{size:this.size,type:ArrayType,padding:this.elementOffset,copy:shouldCopy}),this.buffer&&this.buffer.byteLength<this.value.byteLength&&(this.buffer.reallocate(this.value.byteLength),shouldCopy&&oldValue&&this.buffer.subData(oldValue)),state.allocatedValue=this.value,!0}return!1}},{key:"updateBuffer",value:function updateBuffer(_ref3){var numInstances=_ref3.numInstances,bufferLayout=_ref3.bufferLayout,data=_ref3.data,props=_ref3.props,context=_ref3.context;if(!this.needsUpdate())return!1;var state=this.userData,update=state.update,updateRanges=state.updateRanges,noAlloc=state.noAlloc,updated=!0;if(update){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=updateRanges[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _step2$value=Object(slicedToArray.a)(_step2.value,2),startRow=_step2$value[0],endRow=_step2$value[1];update.call(context,this,{data:data,startRow:startRow,endRow:endRow,props:props,numInstances:numInstances,bufferLayout:bufferLayout})}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var doublePrecision=this.doublePrecision&&this.value instanceof Float64Array;if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength){var attributeValue=this.value;this.update({value:doublePrecision?Object(math_utils.d)(attributeValue,this):attributeValue,constant:this.constant}),this.value=attributeValue}else{var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=updateRanges[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _step3$value=Object(slicedToArray.a)(_step3.value,2),startOffset=(startRow=_step3$value[0],endRow=_step3$value[1],Number.isFinite(startRow)?this.getVertexOffset(startRow):0),endOffset=Number.isFinite(endRow)?this.getVertexOffset(endRow):noAlloc||!Number.isFinite(numInstances)?this.value.length:numInstances*this.size;this.buffer.subData({data:doublePrecision?Object(math_utils.d)(this.value,{size:this.size,startIndex:startOffset,endIndex:endOffset}):this.value.subarray(startOffset,endOffset),offset:startOffset*this.value.BYTES_PER_ELEMENT})}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}this._checkAttributeArray()}else updated=!1;return this._updateShaderAttributes(),this.clearNeedsUpdate(),state.needsRedraw=!0,updated}},{key:"update",value:function update(props){Object(get.a)(Object(getPrototypeOf.a)(Attribute.prototype),"update",this).call(this,props),this._updateShaderAttributes()}},{key:"setConstantValue",value:function setConstantValue(value){var state=this.userData;if(void 0===value||"function"==typeof value)return state.isExternalBuffer=!1,!1;value=this._normalizeValue(value);var hasChanged=!this.constant||!this._areValuesEqual(value,this.value);return hasChanged&&this.update({constant:!0,value:value}),state.needsRedraw=state.needsUpdate||hasChanged,this.clearNeedsUpdate(),state.isExternalBuffer=!0,!0}},{key:"setExternalBuffer",value:function setExternalBuffer(buffer){var opts,state=this.userData;return buffer?(this.clearNeedsUpdate(),state.lastExternalBuffer===buffer||(state.isExternalBuffer=!0,state.lastExternalBuffer=buffer,opts=ArrayBuffer.isView(buffer)?{constant:!1,value:buffer}:buffer instanceof classes_buffer.a?{constant:!1,buffer:buffer}:Object.assign({constant:!1},buffer),this._checkExternalBuffer(opts),this.doublePrecision&&opts.value instanceof Float64Array&&(opts.originalValue=opts.value,opts.value=Object(math_utils.d)(opts.value,this)),this.update(opts),state.needsRedraw=!0,opts.originalValue&&(this.value=opts.originalValue),!0)):(state.isExternalBuffer=!1,state.lastExternalBuffer=null,!1)}},{key:"_checkExternalBuffer",value:function _checkExternalBuffer(opts){var value=opts.value;if(!opts.constant&&value){var ArrayType=glArrayFromType(this.defaultType),illegalArrayType=!1;if(this.doublePrecision?illegalArrayType=value.BYTES_PER_ELEMENT<4:this.hasShaderAttributes&&(illegalArrayType=value.BYTES_PER_ELEMENT!==ArrayType.BYTES_PER_ELEMENT&&Object.values(this.shaderAttributes).some((function(attribute){return attribute.offset||attribute.stride}))),illegalArrayType)throw new Error("Attribute ".concat(this.id," does not support ").concat(value.constructor.name));value instanceof ArrayType||!this.normalized||"normalized"in opts||log.a.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"getVertexOffset",value:function getVertexOffset(row){var bufferLayout=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bufferLayout,offset=this.elementOffset;if(bufferLayout){var index=0,_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=bufferLayout[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var geometrySize=_step4.value;if(index>=row)break;offset+=geometrySize*this.size,index++}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}return offset}return offset+row*this.size}},{key:"_normalizeValue",value:function _normalizeValue(value){var out=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],start=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,defaultValue=this.userData.defaultValue;if(!Array.isArray(value)&&!ArrayBuffer.isView(value))return out[start]=Number.isFinite(value)?value:defaultValue[0],out;switch(this.size){case 4:out[start+3]=Number.isFinite(value[3])?value[3]:defaultValue[3];case 3:out[start+2]=Number.isFinite(value[2])?value[2]:defaultValue[2];case 2:out[start+1]=Number.isFinite(value[1])?value[1]:defaultValue[1];case 1:out[start+0]=Number.isFinite(value[0])?value[0]:defaultValue[0]}return out}},{key:"_areValuesEqual",value:function _areValuesEqual(value1,value2){for(var size=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.size,i=0;i<size;i++)if(value1[i]!==value2[i])return!1;return!0}},{key:"_standardAccessor",value:function _standardAccessor(attribute,_ref4){var data=_ref4.data,startRow=_ref4.startRow,endRow=_ref4.endRow,props=_ref4.props,bufferLayout=(_ref4.numInstances,_ref4.bufferLayout),state=attribute.userData,accessor=state.accessor,transform=state.transform,value=attribute.value,size=attribute.size,accessorFunc="function"==typeof accessor?accessor:props[accessor];Object(assert.a)("function"==typeof accessorFunc,'accessor "'.concat(accessor,'" is not a function'));var i=attribute.getVertexOffset(startRow,bufferLayout),_createIterable=Object(iterable_utils.a)(data,startRow,endRow),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=iterable[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var object=_step5.value;objectInfo.index++;var objectValue=accessorFunc(object,objectInfo);if(transform&&(objectValue=transform.call(this,objectValue)),bufferLayout){attribute._normalizeValue(objectValue,objectInfo.target);var numVertices=bufferLayout[objectInfo.index];Object(flatten.a)({target:attribute.value,source:objectInfo.target,start:i,count:numVertices}),i+=numVertices*size}else attribute._normalizeValue(objectValue,value,i),i+=size}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{_iteratorNormalCompletion5||null==_iterator5.return||_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}attribute.constant=!1,attribute.bufferLayout=bufferLayout}},{key:"_validateAttributeUpdaters",value:function _validateAttributeUpdaters(){var state=this.userData;if(!(state.noAlloc||"function"==typeof state.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function _checkAttributeArray(){var value=this.value;if(value&&value.length>=4&&!(Number.isFinite(value[0])&&Number.isFinite(value[1])&&Number.isFinite(value[2])&&Number.isFinite(value[3])))throw new Error("Illegal attribute generated for ".concat(this.id))}},{key:"_updateShaderAttributes",value:function _updateShaderAttributes(){var shaderAttributes=this.shaderAttributes;for(var shaderAttributeName in shaderAttributes){shaderAttributes[shaderAttributeName].update({buffer:this.getBuffer(),value:this.value,constant:this.constant})}}},{key:"bufferLayout",get:function get(){return this.userData.bufferLayout},set:function set(layout){this.userData.bufferLayout=layout}}]),Attribute}(base_attribute.a);function glArrayFromType(glType){switch(glType){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce type from array")}}var shader_utils=__webpack_require__(151),webgl_checks=__webpack_require__(39),transform_feedback=__webpack_require__(784),utils_assert=__webpack_require__(17),buffer_transform_BufferTransform=function(){function BufferTransform(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,BufferTransform),this.gl=gl,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(props),Object.seal(this)}return Object(createClass.a)(BufferTransform,[{key:"setupResources",value:function setupResources(opts){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.bindings[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var binding=_step.value;this._setupTransformFeedback(binding,opts)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"updateModelProps",value:function updateModelProps(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},varyings=this.varyings;return varyings.length>0&&(props=Object.assign({},props,{varyings:varyings})),props}},{key:"getDrawOptions",value:function getDrawOptions(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},binding=this.bindings[this.currentIndex],sourceBuffers=binding.sourceBuffers,transformFeedback=binding.transformFeedback,attributes=Object.assign({},sourceBuffers,opts.attributes);return{attributes:attributes,transformFeedback:transformFeedback}}},{key:"swap",value:function swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function update(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(opts)}},{key:"getBuffer",value:function getBuffer(varyingName){var feedbackBuffers=this.bindings[this.currentIndex].feedbackBuffers,bufferOrParams=varyingName?feedbackBuffers[varyingName]:null;return bufferOrParams?bufferOrParams instanceof classes_buffer.a?bufferOrParams:bufferOrParams.buffer:null}},{key:"getData",value:function getData(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},varyingName=_ref.varyingName,buffer=this.getBuffer(varyingName);return buffer?buffer.getData():null}},{key:"delete",value:function _delete(){for(var name in this.resources)this.resources[name].delete()}},{key:"_initialize",value:function _initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(props),this.varyings=props.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Object(utils_assert.a)(Object(webgl_checks.d)(this.gl))}},{key:"_getFeedbackBuffers",value:function _getFeedbackBuffers(props){var _props$sourceBuffers=props.sourceBuffers,sourceBuffers=void 0===_props$sourceBuffers?{}:_props$sourceBuffers,feedbackBuffers={};if(this.bindings[this.currentIndex]&&Object.assign(feedbackBuffers,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var sourceName in this.feedbackMap){var feedbackName=this.feedbackMap[sourceName];sourceName in sourceBuffers&&(feedbackBuffers[feedbackName]=sourceName)}for(var bufferName in Object.assign(feedbackBuffers,props.feedbackBuffers),feedbackBuffers){var bufferOrRef=feedbackBuffers[bufferName];if("string"==typeof bufferOrRef){var sourceBuffer=sourceBuffers[bufferOrRef],byteLength=sourceBuffer.byteLength,usage=sourceBuffer.usage,accessor=sourceBuffer.accessor;feedbackBuffers[bufferName]=this._createNewBuffer(bufferName,{byteLength:byteLength,usage:usage,accessor:accessor})}}return feedbackBuffers}},{key:"_setupBuffers",value:function _setupBuffers(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_props$sourceBuffers2=props.sourceBuffers,sourceBuffers=void 0===_props$sourceBuffers2?null:_props$sourceBuffers2;Object.assign(this.feedbackMap,props.feedbackMap);var feedbackBuffers=this._getFeedbackBuffers(props);this._updateBindings({sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers})}},{key:"_setupTransformFeedback",value:function _setupTransformFeedback(binding,_ref2){var program=_ref2.model.program;binding.transformFeedback=new transform_feedback.a(this.gl,{program:program,buffers:binding.feedbackBuffers})}},{key:"_updateBindings",value:function _updateBindings(opts){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],opts),this.feedbackMap){var _this$_swapBuffers=this._swapBuffers(this.bindings[this.currentIndex]),sourceBuffers=_this$_swapBuffers.sourceBuffers,feedbackBuffers=_this$_swapBuffers.feedbackBuffers,nextIndex=this._getNextIndex();this.bindings[nextIndex]=this._updateBinding(this.bindings[nextIndex],{sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers})}}},{key:"_updateBinding",value:function _updateBinding(binding,opts){return binding?(Object.assign(binding.sourceBuffers,opts.sourceBuffers),Object.assign(binding.feedbackBuffers,opts.feedbackBuffers),binding.transformFeedback&&binding.transformFeedback.setBuffers(binding.feedbackBuffers),binding):{sourceBuffers:Object.assign({},opts.sourceBuffers),feedbackBuffers:Object.assign({},opts.feedbackBuffers)}}},{key:"_swapBuffers",value:function _swapBuffers(opts){if(!this.feedbackMap)return null;var sourceBuffers=Object.assign({},opts.sourceBuffers),feedbackBuffers=Object.assign({},opts.feedbackBuffers);for(var srcName in this.feedbackMap){var dstName=this.feedbackMap[srcName];sourceBuffers[srcName]=opts.feedbackBuffers[dstName],feedbackBuffers[dstName]=opts.sourceBuffers[srcName],Object(utils_assert.a)(feedbackBuffers[dstName]instanceof classes_buffer.a)}return{sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers}}},{key:"_createNewBuffer",value:function _createNewBuffer(name,opts){var buffer=new classes_buffer.a(this.gl,opts);return this.resources[name]&&this.resources[name].delete(),this.resources[name]=buffer,buffer}},{key:"_getNextIndex",value:function _getNextIndex(){return(this.currentIndex+1)%2}}]),BufferTransform}(),copy_and_blit=__webpack_require__(316),texture_2d=__webpack_require__(161),classes_framebuffer=__webpack_require__(69),texture_utils=__webpack_require__(438);function getShaderVersion(source){var version=100,words=source.match(/[^\s]+/g);if(words.length>=2&&"#version"===words[0]){var v=parseInt(words[1],10);Number.isFinite(v)&&(version=v)}return version}var _SRC_TEX_PARAMETER_OV,inject_shader=__webpack_require__(193),transform_transform={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},SAMPLER_UNIFORM_PREFIX="transform_uSampler_",SIZE_UNIFORM_PREFIX="transform_uSize_",VS_POS_VARIABLE="transform_position";function updateForTextures(_ref){var vs=_ref.vs,sourceTextureMap=_ref.sourceTextureMap,targetTextureVarying=_ref.targetTextureVarying,targetTexture=_ref.targetTexture,sourceCount=Object.keys(sourceTextureMap).length,targetTextureType=null,samplerTextureMap={},updatedVs=vs,finalInject={};if(sourceCount>0||targetTextureVarying){var vsLines=updatedVs.split("\n"),updateVsLines=vsLines.slice();if(vsLines.forEach((function(line,index,lines){if(sourceCount>0){var updated=function processAttributeDefinition(line,textureMap){var samplerTextureMap={},attributeData=function getAttributeDefinition(line){return Object(shader_utils.b)(line,["attribute","in"])}(line);if(!attributeData)return null;var type=attributeData.type,name=attributeData.name;if(name&&textureMap[name]){var updatedLine="// ".concat(line," => Replaced by Transform with a sampler"),_getSamplerDecleratio=function getSamplerDeclerations(textureName){var samplerName="".concat(SAMPLER_UNIFORM_PREFIX).concat(textureName),sizeName="".concat(SIZE_UNIFORM_PREFIX).concat(textureName),uniformDeclerations="  uniform sampler2D ".concat(samplerName,";\n  uniform vec2 ").concat(sizeName,";");return{samplerName:samplerName,sizeName:sizeName,uniformDeclerations:uniformDeclerations}}(name),samplerName=_getSamplerDecleratio.samplerName,sizeName=_getSamplerDecleratio.sizeName,uniformDeclerations=_getSamplerDecleratio.uniformDeclerations,channels=Object(shader_utils.d)(type),sampleInstruction="  ".concat(type," ").concat(name," = transform_getInput(").concat(samplerName,", ").concat(sizeName,").").concat(channels,";\n");return samplerTextureMap[samplerName]=name,{updatedLine:updatedLine,inject:{"vs:#decl":uniformDeclerations,"vs:#main-start":sampleInstruction},samplerTextureMap:samplerTextureMap}}return null}(line,sourceTextureMap);if(updated){var updatedLine=updated.updatedLine,inject=updated.inject;updateVsLines[index]=updatedLine,finalInject=Object(inject_shader.b)([finalInject,inject]),Object.assign(samplerTextureMap,updated.samplerTextureMap),sourceCount--}}targetTextureVarying&&!targetTextureType&&(targetTextureType=function getVaryingType(line,varying){var qualaiferDetails=Object(shader_utils.b)(line,["varying","out"]);if(!qualaiferDetails)return null;return qualaiferDetails.name===varying?qualaiferDetails.type:null}(line,targetTextureVarying))})),targetTextureVarying){Object(utils_assert.a)(targetTexture);var sizeName="".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying),inject={"vs:#decl":"uniform vec2 ".concat(sizeName,";\n"),"vs:#main-start":"     vec2 ".concat(VS_POS_VARIABLE," = transform_getPos(").concat(sizeName,");\n     gl_Position = vec4(").concat(VS_POS_VARIABLE,", 0, 1.);\n")};finalInject=Object(inject_shader.b)([finalInject,inject])}updatedVs=updateVsLines.join("\n")}return{vs:updatedVs,targetTextureType:targetTextureType,inject:finalInject,samplerTextureMap:samplerTextureMap}}function getSizeUniforms(_ref2){var width,height,sourceTextureMap=_ref2.sourceTextureMap,targetTextureVarying=_ref2.targetTextureVarying,targetTexture=_ref2.targetTexture,uniforms={};for(var textureName in targetTextureVarying&&(width=targetTexture.width,height=targetTexture.height,uniforms["".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying)]=[width,height]),sourceTextureMap){var _sourceTextureMap$tex=sourceTextureMap[textureName];width=_sourceTextureMap$tex.width,height=_sourceTextureMap$tex.height,uniforms["".concat(SIZE_UNIFORM_PREFIX).concat(textureName)]=[width,height]}return uniforms}var SRC_TEX_PARAMETER_OVERRIDES=(_SRC_TEX_PARAMETER_OV={},Object(defineProperty.a)(_SRC_TEX_PARAMETER_OV,10241,9728),Object(defineProperty.a)(_SRC_TEX_PARAMETER_OV,10240,9728),Object(defineProperty.a)(_SRC_TEX_PARAMETER_OV,10242,33071),Object(defineProperty.a)(_SRC_TEX_PARAMETER_OV,10243,33071),_SRC_TEX_PARAMETER_OV),texture_transform_TextureTransform=function(){function TextureTransform(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,TextureTransform),this.gl=gl,this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(props),Object.seal(this)}return Object(createClass.a)(TextureTransform,[{key:"updateModelProps",value:function updateModelProps(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},updatedModelProps=this._processVertexShader(props);return Object.assign({},props,updatedModelProps)}},{key:"getDrawOptions",value:function getDrawOptions(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$bindings$this$c=this.bindings[this.currentIndex],sourceTextures=_this$bindings$this$c.sourceTextures,framebuffer=_this$bindings$this$c.framebuffer,targetTexture=_this$bindings$this$c.targetTexture,attributes=Object.assign({},opts.attributes),uniforms=Object.assign({},opts.uniforms),parameters=Object.assign({},opts.parameters),discard=opts.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var sampler in attributes.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var textureName=this.samplerTextureMap[sampler];uniforms[sampler]=sourceTextures[textureName]}this._setSourceTextureParameters();var sizeUniforms=getSizeUniforms({sourceTextureMap:sourceTextures,targetTextureVarying:this.targetTextureVarying,targetTexture:targetTexture});Object.assign(uniforms,sizeUniforms)}return this.hasTargetTexture&&(discard=!1,parameters.viewport=[0,0,framebuffer.width,framebuffer.height]),{attributes:attributes,framebuffer:framebuffer,uniforms:uniforms,discard:discard,parameters:parameters}}},{key:"swap",value:function swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function update(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(opts)}},{key:"getTargetTexture",value:function getTargetTexture(){return this.bindings[this.currentIndex].targetTexture}},{key:"getData",value:function getData(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$packed=_ref.packed,packed=void 0!==_ref$packed&&_ref$packed,framebuffer=this.bindings[this.currentIndex].framebuffer,pixels=Object(copy_and_blit.b)(framebuffer);if(!packed)return pixels;for(var ArrayType=pixels.constructor,channelCount=Object(shader_utils.c)(this.targetTextureType),packedPixels=new ArrayType(pixels.length*channelCount/4),packCount=0,i=0;i<pixels.length;i+=4)for(var j=0;j<channelCount;j++)packedPixels[packCount++]=pixels[i+j];return packedPixels}},{key:"getFramebuffer",value:function getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}},{key:"delete",value:function _delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function _initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_targetTextureVarying=props._targetTextureVarying,_swapTexture=props._swapTexture;this._swapTexture=_swapTexture,this.targetTextureVarying=_targetTextureVarying,this.hasTargetTexture=_targetTextureVarying,this._setupTextures(props)}},{key:"_createTargetTexture",value:function _createTargetTexture(props){var sourceTextures=props.sourceTextures,textureOrReference=props.textureOrReference;if(textureOrReference instanceof texture_2d.a)return textureOrReference;var refTexture=sourceTextures[textureOrReference];return refTexture?(this._targetRefTexName=textureOrReference,this._createNewTexture(refTexture)):null}},{key:"_setupTextures",value:function _setupTextures(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_props$_sourceTexture=props._sourceTextures,_sourceTextures=void 0===_props$_sourceTexture?{}:_props$_sourceTexture,_targetTexture=props._targetTexture,targetTexture=this._createTargetTexture({sourceTextures:_sourceTextures,textureOrReference:_targetTexture});this.hasSourceTextures=this.hasSourceTextures||_sourceTextures&&Object.keys(_sourceTextures).length>0,this._updateBindings({sourceTextures:_sourceTextures,targetTexture:targetTexture}),"elementCount"in props&&this._updateElementIDBuffer(props.elementCount)}},{key:"_updateElementIDBuffer",value:function _updateElementIDBuffer(elementCount){if(!("number"!=typeof elementCount||this.elementCount>=elementCount)){var elementIds=new Float32Array(elementCount);elementIds.forEach((function(_,index,array){array[index]=index})),this.elementIDBuffer?this.elementIDBuffer.setData({data:elementIds}):this.elementIDBuffer=new classes_buffer.a(this.gl,{data:elementIds,accessor:{size:1}}),this.elementCount=elementCount}}},{key:"_updateBindings",value:function _updateBindings(opts){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],opts),this._swapTexture){var _this$_swapTextures=this._swapTextures(this.bindings[this.currentIndex]),sourceTextures=_this$_swapTextures.sourceTextures,targetTexture=_this$_swapTextures.targetTexture,nextIndex=this._getNextIndex();this.bindings[nextIndex]=this._updateBinding(this.bindings[nextIndex],{sourceTextures:sourceTextures,targetTexture:targetTexture})}}},{key:"_updateBinding",value:function _updateBinding(binding,opts){var sourceTextures=opts.sourceTextures,targetTexture=opts.targetTexture;if(binding||(binding={sourceTextures:{},targetTexture:null}),Object.assign(binding.sourceTextures,sourceTextures),targetTexture){binding.targetTexture=targetTexture;var width=targetTexture.width,height=targetTexture.height,framebuffer=binding.framebuffer;framebuffer?(framebuffer.update({attachments:Object(defineProperty.a)({},36064,targetTexture),resizeAttachments:!1}),framebuffer.resize({width:width,height:height})):binding.framebuffer=new classes_framebuffer.a(this.gl,{id:"".concat(this.id||"transform","-framebuffer"),width:width,height:height,attachments:Object(defineProperty.a)({},36064,targetTexture)})}return binding}},{key:"_setSourceTextureParameters",value:function _setSourceTextureParameters(){var index=this.currentIndex,sourceTextures=this.bindings[index].sourceTextures;for(var name in sourceTextures)sourceTextures[name].setParameters(SRC_TEX_PARAMETER_OVERRIDES)}},{key:"_swapTextures",value:function _swapTextures(opts){if(!this._swapTexture)return null;var sourceTextures=Object.assign({},opts.sourceTextures);return sourceTextures[this._swapTexture]=opts.targetTexture,{sourceTextures:sourceTextures,targetTexture:opts.sourceTextures[this._swapTexture]}}},{key:"_createNewTexture",value:function _createNewTexture(refTexture){var _parameters,texture=Object(texture_utils.a)(refTexture,{parameters:(_parameters={},Object(defineProperty.a)(_parameters,10241,9728),Object(defineProperty.a)(_parameters,10240,9728),Object(defineProperty.a)(_parameters,10242,33071),Object(defineProperty.a)(_parameters,10243,33071),_parameters),pixelStore:Object(defineProperty.a)({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=texture,texture}},{key:"_getNextIndex",value:function _getNextIndex(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function _processVertexShader(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$bindings$this$c2=this.bindings[this.currentIndex],sourceTextures=_this$bindings$this$c2.sourceTextures,targetTexture=_this$bindings$this$c2.targetTexture,_updateForTextures=updateForTextures({vs:props.vs,sourceTextureMap:sourceTextures,targetTextureVarying:this.targetTextureVarying,targetTexture:targetTexture}),vs=_updateForTextures.vs,uniforms=_updateForTextures.uniforms,targetTextureType=_updateForTextures.targetTextureType,inject=_updateForTextures.inject,samplerTextureMap=_updateForTextures.samplerTextureMap,combinedInject=Object(inject_shader.b)([props.inject||{},inject]);this.targetTextureType=targetTextureType,this.samplerTextureMap=samplerTextureMap;var fs=props._fs||Object(shader_utils.a)({version:getShaderVersion(vs),input:this.targetTextureVarying,inputType:targetTextureType,output:"transform_output"}),modules=this.hasSourceTextures||this.targetTextureVarying?[transform_transform].concat(props.modules||[]):props.modules;return{vs:vs,fs:fs,modules:modules,uniforms:uniforms,inject:combinedInject}}}]),TextureTransform}(),utils=__webpack_require__(127),lib_model=__webpack_require__(255),transform_Transform=function(){function Transform(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,Transform),this.gl=gl,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(props),Object.seal(this)}return Object(createClass.a)(Transform,null,[{key:"isSupported",value:function isSupported(gl){return Object(webgl_checks.d)(gl)}}]),Object(createClass.a)(Transform,[{key:"delete",value:function _delete(){var model=this.model,bufferTransform=this.bufferTransform,textureTransform=this.textureTransform;model&&model.delete(),bufferTransform&&bufferTransform.delete(),textureTransform&&textureTransform.delete()}},{key:"run",value:function run(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_opts$clearRenderTarg=opts.clearRenderTarget,clearRenderTarget=void 0===_opts$clearRenderTarg||_opts$clearRenderTarg,updatedOpts=this._updateDrawOptions(opts);clearRenderTarget&&updatedOpts.framebuffer&&updatedOpts.framebuffer.clear({color:!0}),this.model.transform(updatedOpts)}},{key:"swap",value:function swap(){var swapped=!1,resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=resourceTransforms[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var resourceTransform=_step.value;swapped=swapped||resourceTransform.swap()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}Object(utils_assert.a)(swapped,"Nothing to swap")}},{key:"getBuffer",value:function getBuffer(){var varyingName=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(varyingName)}},{key:"getData",value:function getData(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean),_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=resourceTransforms[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var resourceTransform=_step2.value,data=resourceTransform.getData(opts);if(data)return data}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return null}},{key:"getFramebuffer",value:function getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function update(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in opts&&this.model.setVertexCount(opts.elementCount);var resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean),_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=resourceTransforms[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var resourceTransform=_step3.value;resourceTransform.update(opts)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}},{key:"_initialize",value:function _initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},gl=this.gl;this._buildResourceTransforms(gl,props),props=this._updateModelProps(props),this.model=new lib_model.a(gl,Object.assign({},props,{fs:props.fs||Object(shader_utils.a)({version:getShaderVersion(props.vs)}),id:props.id||"transform-model",drawMode:props.drawMode||0,vertexCount:props.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function _updateModelProps(props){var updatedProps=Object.assign({},props),resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean),_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=resourceTransforms[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){updatedProps=_step4.value.updateModelProps(updatedProps)}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}return updatedProps}},{key:"_buildResourceTransforms",value:function _buildResourceTransforms(gl,props){(function canCreateBufferTransform(props){if(!Object(utils.a)(props.sourceBuffers)||!Object(utils.a)(props.feedbackBuffers)||props.varyings&&props.varyings.length>0)return!0;return!1})(props)&&(this.bufferTransform=new buffer_transform_BufferTransform(gl,props)),function canCreateTextureTransform(props){if(!Object(utils.a)(props._sourceTextures)||props._targetTexture||props._targetTextureVarying)return!0;return!1}(props)&&(this.textureTransform=new texture_transform_TextureTransform(gl,props)),Object(utils_assert.a)(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function _updateDrawOptions(opts){var updatedOpts=Object.assign({},opts),resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean),_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=resourceTransforms[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var resourceTransform=_step5.value;updatedOpts=Object.assign(updatedOpts,resourceTransform.getDrawOptions(updatedOpts))}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{_iteratorNormalCompletion5||null==_iterator5.return||_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}return updatedOpts}}]),Transform}();var transitions_transition=__webpack_require__(91);function gpu_interpolation_transition_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function gpu_interpolation_transition_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?gpu_interpolation_transition_ownKeys(source,!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):gpu_interpolation_transition_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var gpu_interpolation_transition_GPUInterpolationTransition=function(){function GPUInterpolationTransition(_ref){var gl=_ref.gl,attribute=_ref.attribute,timeline=_ref.timeline;Object(classCallCheck.a)(this,GPUInterpolationTransition),this.gl=gl,this.type="interpolation",this.transition=new transitions_transition.a(timeline),this.attribute=attribute,this.attributeInTransition=new attribute_Attribute(gl,attribute.userData),this.currentBufferLayout=attribute.bufferLayout,this.currentLength=0,this.transform=function getTransform(gl,attribute){var attributeType=Object(attribute_transition_utils.c)(attribute.size);return new transform_Transform(gl,{vs:gpu_interpolation_transition_vs,defines:{ATTRIBUTE_TYPE:attributeType},varyings:["vCurrent"]})}(gl,attribute);var bufferOpts={byteLength:0,usage:35050};this.buffers=[new classes_buffer.a(gl,bufferOpts),new classes_buffer.a(gl,bufferOpts)]}return Object(createClass.a)(GPUInterpolationTransition,[{key:"start",value:function start(transitionSettings,numInstances){if(transitionSettings.duration<=0)this.transition.cancel();else{var gl=this.gl,buffers=this.buffers,attribute=this.attribute;Object(attribute_transition_utils.a)(buffers);var padBufferOpts={numInstances:numInstances,attribute:attribute,fromLength:this.currentLength,fromBufferLayout:this.currentBufferLayout,getData:transitionSettings.enter},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=buffers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var buffer=_step.value;Object(attribute_transition_utils.f)(gpu_interpolation_transition_objectSpread({buffer:buffer},padBufferOpts))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.currentBufferLayout=attribute.bufferLayout,this.currentLength=Object(attribute_transition_utils.b)(attribute,numInstances),this.attributeInTransition.update({buffer:buffers[1],value:attribute.value}),this.transition.start(transitionSettings),this.transform.update({elementCount:Math.floor(this.currentLength/attribute.size),sourceBuffers:{aFrom:buffers[0],aTo:Object(attribute_transition_utils.d)(gl,attribute)},feedbackBuffers:{vCurrent:buffers[1]}})}}},{key:"update",value:function update(){var updated=this.transition.update();if(updated){var _this$transition=this.transition,time=_this$transition.time,_this$transition$sett=_this$transition.settings,duration=_this$transition$sett.duration,t=(0,_this$transition$sett.easing)(time/duration);this.transform.run({uniforms:{time:t}})}return updated}},{key:"cancel",value:function cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},{key:"inProgress",get:function get(){return this.transition.inProgress}}]),GPUInterpolationTransition}(),gpu_interpolation_transition_vs="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";function gpu_spring_transition_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function gpu_spring_transition_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?gpu_spring_transition_ownKeys(source,!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):gpu_spring_transition_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var TRANSITION_TYPES={interpolation:gpu_interpolation_transition_GPUInterpolationTransition,spring:function(){function GPUSpringTransition(_ref){var gl=_ref.gl,attribute=_ref.attribute,timeline=_ref.timeline;Object(classCallCheck.a)(this,GPUSpringTransition),this.gl=gl,this.type="spring",this.transition=new transitions_transition.a(timeline),this.attribute=attribute,this.attributeInTransition=new attribute_Attribute(gl,attribute.userData),this.currentBufferLayout=attribute.bufferLayout,this.currentLength=0,this.texture=function getTexture(gl){return new texture_2d.a(gl,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(gl),this.framebuffer=function getFramebuffer(gl,texture){return new classes_framebuffer.a(gl,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:Object(defineProperty.a)({},36064,texture)})}(gl,this.texture),this.transform=function gpu_spring_transition_getTransform(gl,attribute,framebuffer){var attributeType=Object(attribute_transition_utils.c)(attribute.size);return new transform_Transform(gl,{framebuffer:framebuffer,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:attributeType},varyings:["vNext"]})}(gl,attribute,this.framebuffer);var bufferOpts={byteLength:0,usage:35050};this.buffers=[new classes_buffer.a(gl,bufferOpts),new classes_buffer.a(gl,bufferOpts),new classes_buffer.a(gl,bufferOpts)]}return Object(createClass.a)(GPUSpringTransition,[{key:"start",value:function start(transitionSettings,numInstances){var gl=this.gl,buffers=this.buffers,attribute=this.attribute,padBufferOpts={numInstances:numInstances,attribute:attribute,fromLength:this.currentLength,fromBufferLayout:this.currentBufferLayout,getData:transitionSettings.enter},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=buffers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var buffer=_step.value;Object(attribute_transition_utils.f)(gpu_spring_transition_objectSpread({buffer:buffer},padBufferOpts))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.currentBufferLayout=attribute.bufferLayout,this.currentLength=Object(attribute_transition_utils.b)(attribute,numInstances),this.attributeInTransition.update({buffer:buffers[1],value:attribute.value}),this.transition.start(transitionSettings),this.transform.update({elementCount:Math.floor(this.currentLength/attribute.size),sourceBuffers:{aTo:Object(attribute_transition_utils.d)(gl,attribute)}})}},{key:"update",value:function update(){var buffers=this.buffers,transform=this.transform,framebuffer=this.framebuffer,transition=this.transition;return!!transition.update()&&(transform.update({sourceBuffers:{aPrev:buffers[0],aCur:buffers[1]},feedbackBuffers:{vNext:buffers[2]}}),transform.run({framebuffer:framebuffer,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:transition.settings.stiffness,damping:transition.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Object(attribute_transition_utils.a)(buffers),this.attributeInTransition.update({buffer:buffers[1]}),Object(copy_and_blit.b)(framebuffer)[0]>0||transition.end(),!0)}},{key:"cancel",value:function cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}},{key:"inProgress",get:function get(){return this.transition.inProgress}}]),GPUSpringTransition}()},attribute_transition_manager_AttributeTransitionManager=function(){function AttributeTransitionManager(gl,_ref){var id=_ref.id,timeline=_ref.timeline;Object(classCallCheck.a)(this,AttributeTransitionManager),this.id=id,this.gl=gl,this.timeline=timeline,this.transitions={},this.needsRedraw=!1,this.numInstances=1,transform_Transform.isSupported(gl)?this.isSupported=!0:gl&&log.a.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}return Object(createClass.a)(AttributeTransitionManager,[{key:"finalize",value:function finalize(){for(var attributeName in this.transitions)this._removeTransition(attributeName)}},{key:"update",value:function update(_ref2){var attributes=_ref2.attributes,_ref2$transitions=_ref2.transitions,transitions=void 0===_ref2$transitions?{}:_ref2$transitions,numInstances=_ref2.numInstances;if(this.numInstances=numInstances||1,this.isSupported){for(var attributeName in attributes){var attribute=attributes[attributeName],settings=attribute.getTransitionSetting(transitions);settings&&this._updateAttribute(attributeName,attribute,settings)}for(var _attributeName in this.transitions){var _attribute=attributes[_attributeName];_attribute&&_attribute.getTransitionSetting(transitions)||this._removeTransition(_attributeName)}}}},{key:"hasAttribute",value:function hasAttribute(attributeName){var transition=this.transitions[attributeName];return transition&&transition.inProgress}},{key:"getAttributes",value:function getAttributes(){var animatedAttributes={};for(var attributeName in this.transitions){var transition=this.transitions[attributeName];transition.inProgress&&(animatedAttributes[attributeName]=transition.attributeInTransition)}return animatedAttributes}},{key:"run",value:function run(){if(!this.isSupported||0===this.numInstances)return!1;for(var attributeName in this.transitions){this.transitions[attributeName].update()&&(this.needsRedraw=!0)}var needsRedraw=this.needsRedraw;return this.needsRedraw=!1,needsRedraw}},{key:"_removeTransition",value:function _removeTransition(attributeName){this.transitions[attributeName].cancel(),delete this.transitions[attributeName]}},{key:"_updateAttribute",value:function _updateAttribute(attributeName,attribute,settings){var transition=this.transitions[attributeName],isNew=!transition||transition.type!==settings.type;if(isNew){transition&&this._removeTransition(attributeName);var TransitionType=TRANSITION_TYPES[settings.type];TransitionType?this.transitions[attributeName]=new TransitionType({attribute:attribute,timeline:this.timeline,gl:this.gl}):(log.a.error("unsupported transition type '".concat(settings.type,"'"))(),isNew=!1)}(isNew||attribute.needsRedraw())&&(this.needsRedraw=!0,this.transitions[attributeName].start(settings,this.numInstances))}}]),AttributeTransitionManager}();__webpack_require__.d(__webpack_exports__,"a",(function(){return attribute_manager_AttributeManager}));function noop(){}var logFunctions={savedMessages:null,timeStart:null,onLog:function onLog(_ref){var level=_ref.level,message=_ref.message;log.a.log(level,message)()},onUpdateStart:function onUpdateStart(_ref2){_ref2.level,_ref2.numInstances;logFunctions.savedMessages=[],logFunctions.timeStart=new Date},onUpdate:function onUpdate(_ref3){_ref3.level;var message=_ref3.message;logFunctions.savedMessages&&logFunctions.savedMessages.push(message)},onUpdateEnd:function onUpdateEnd(_ref4){var level=_ref4.level,id=_ref4.id,numInstances=_ref4.numInstances,timeMs=Math.round(new Date-logFunctions.timeStart),time="".concat(timeMs,"ms");log.a.group(level,"Updated attributes for ".concat(numInstances," instances in ").concat(id," in ").concat(time),{collapsed:!0})();var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=logFunctions.savedMessages[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var message=_step.value;log.a.log(level,message)()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}log.a.groupEnd(level,"Updated attributes for ".concat(numInstances," instances in ").concat(id," in ").concat(time))(),logFunctions.savedMessages=null}},attribute_manager_AttributeManager=function(){function AttributeManager(gl){var _ref6=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref6$id=_ref6.id,id=void 0===_ref6$id?"attribute-manager":_ref6$id,stats=_ref6.stats,timeline=_ref6.timeline;Object(classCallCheck.a)(this,AttributeManager),this.id=id,this.gl=gl,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=stats,this.attributeTransitionManager=new attribute_transition_manager_AttributeTransitionManager(gl,{id:"".concat(id,"-transitions"),timeline:timeline}),Object.seal(this)}return Object(createClass.a)(AttributeManager,null,[{key:"setDefaultLogFunctions",value:function setDefaultLogFunctions(){var _ref5=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},onLog=_ref5.onLog,onUpdateStart=_ref5.onUpdateStart,onUpdate=_ref5.onUpdate,onUpdateEnd=_ref5.onUpdateEnd;void 0!==onLog&&(logFunctions.onLog=onLog||noop),void 0!==onUpdateStart&&(logFunctions.onUpdateStart=onUpdateStart||noop),void 0!==onUpdate&&(logFunctions.onUpdate=onUpdate||noop),void 0!==onUpdateEnd&&(logFunctions.onUpdateEnd=onUpdateEnd||noop)}}]),Object(createClass.a)(AttributeManager,[{key:"finalize",value:function finalize(){for(var attributeName in this.attributes)this.attributes[attributeName].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!opts.clearRedrawFlags,redraw&&this.id}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function add(attributes,updaters){this._add(attributes,updaters)}},{key:"addInstanced",value:function addInstanced(attributes,updaters){this._add(attributes,updaters,{instanced:1})}},{key:"remove",value:function remove(attributeNameArray){for(var i=0;i<attributeNameArray.length;i++){var name=attributeNameArray[i];void 0!==this.attributes[name]&&(this.attributes[name].delete(),delete this.attributes[name])}}},{key:"invalidate",value:function invalidate(triggerName,dataRange){var invalidatedAttributes=this._invalidateTrigger(triggerName,dataRange);logFunctions.onLog({level:3,message:"invalidated attributes ".concat(invalidatedAttributes," (").concat(triggerName,") for ").concat(this.id)})}},{key:"invalidateAll",value:function invalidateAll(dataRange){for(var attributeName in this.attributes)this.attributes[attributeName].setNeedsUpdate(attributeName,dataRange);logFunctions.onLog({level:3,message:"invalidated all attributes for ".concat(this.id)})}},{key:"update",value:function update(){var _ref7=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},data=_ref7.data,numInstances=_ref7.numInstances,bufferLayout=_ref7.bufferLayout,transitions=_ref7.transitions,_ref7$props=_ref7.props,props=void 0===_ref7$props?{}:_ref7$props,_ref7$buffers=_ref7.buffers,buffers=void 0===_ref7$buffers?{}:_ref7$buffers,_ref7$context=_ref7.context,context=void 0===_ref7$context?{}:_ref7$context,updated=!1;for(var attributeName in logFunctions.onUpdateStart({level:2,id:this.id,numInstances:numInstances}),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var attribute=this.attributes[attributeName];attribute.setExternalBuffer(buffers[attributeName]||data.attributes&&data.attributes[attributeName])||attribute.setConstantValue(props[attribute.getAccessor()])||attribute.needsUpdate()&&(updated=!0,this._updateAttribute({attribute:attribute,numInstances:numInstances,bufferLayout:bufferLayout,data:data,props:props,context:context})),this.needsRedraw|=attribute.needsRedraw()}updated&&logFunctions.onUpdateEnd({level:2,id:this.id,numInstances:numInstances}),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:numInstances,transitions:transitions})}},{key:"updateTransition",value:function updateTransition(){var transitionUpdated=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||transitionUpdated,transitionUpdated}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"getChangedAttributes",value:function getChangedAttributes(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},attributes=this.attributes,attributeTransitionManager=this.attributeTransitionManager,changedAttributes=Object.assign({},attributeTransitionManager.getAttributes());for(var attributeName in attributes){var attribute=attributes[attributeName];attribute.needsRedraw(opts)&&!attributeTransitionManager.hasAttribute(attributeName)&&(changedAttributes[attributeName]=attribute)}return changedAttributes}},{key:"getAccessors",value:function getAccessors(){return this.updateTriggers}},{key:"_add",value:function _add(attributes,updaters){var extraProps=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};updaters&&log.a.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var newAttributes={};for(var attributeName in attributes){var attribute=attributes[attributeName],newAttribute=this._createAttribute(attributeName,attribute,extraProps);newAttributes[attributeName]=newAttribute}Object.assign(this.attributes,newAttributes),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function _createAttribute(name,attribute,extraProps){var props={id:name,constant:attribute.constant||!1,isIndexed:attribute.isIndexed||attribute.elements,size:attribute.elements?1:attribute.size,value:attribute.value||null,divisor:attribute.instanced||extraProps.instanced?1:attribute.divisor};return new attribute_Attribute(this.gl,Object.assign({},attribute,props))}},{key:"_mapUpdateTriggersToAttributes",value:function _mapUpdateTriggersToAttributes(){var _this=this,triggers={},_loop=function _loop(attributeName){_this.attributes[attributeName].getUpdateTriggers().forEach((function(triggerName){triggers[triggerName]||(triggers[triggerName]=[]),triggers[triggerName].push(attributeName)}))};for(var attributeName in this.attributes)_loop(attributeName);this.updateTriggers=triggers}},{key:"_invalidateTrigger",value:function _invalidateTrigger(triggerName,dataRange){var attributes=this.attributes,invalidatedAttributes=this.updateTriggers[triggerName];if(invalidatedAttributes)invalidatedAttributes.forEach((function(name){var attribute=attributes[name];attribute&&attribute.setNeedsUpdate(attribute.id,dataRange)}));else{var message="invalidating non-existent trigger ".concat(triggerName," for ").concat(this.id,"\n");message+="Valid triggers: ".concat(Object.keys(attributes).join(", ")),log.a.warn(message,invalidatedAttributes)()}return invalidatedAttributes}},{key:"_updateAttribute",value:function _updateAttribute(opts){var attribute=opts.attribute,numInstances=opts.numInstances;attribute.allocate(numInstances)&&logFunctions.onUpdate({level:3,message:"".concat(attribute.id," allocated ").concat(numInstances),id:this.id});var timeStart=Date.now();if(attribute.updateBuffer(opts)){this.needsRedraw=!0;var timeMs=Math.round(Date.now()-timeStart);logFunctions.onUpdate({level:3,message:"".concat(attribute.id," updated ").concat(numInstances," in ").concat(timeMs,"ms")})}}}]),AttributeManager}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var slicedToArray=__webpack_require__(9),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(6),common=__webpack_require__(21),controller=__webpack_require__(242),vector3=__webpack_require__(42),vec3=__webpack_require__(52),EARTH_RADIUS_METERS=6371e3,spherical_coordinates_SphericalCoordinates=function(){function SphericalCoordinates(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},phi=_ref.phi,theta=_ref.theta,radius=_ref.radius,bearing=_ref.bearing,pitch=_ref.pitch,_ref$radiusScale=(_ref.altitude,_ref.radiusScale),radiusScale=void 0===_ref$radiusScale?EARTH_RADIUS_METERS:_ref$radiusScale;Object(classCallCheck.a)(this,SphericalCoordinates),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(phi)||Number.isFinite(theta)?(this.phi=phi||0,this.theta=theta||0):(Number.isFinite(bearing)||Number.isFinite(pitch))&&(this.bearing=bearing||0,this.pitch=pitch||0),this.radius=radius||1,this.radiusScale=radiusScale||1,this.check()}return Object(createClass.a)(SphericalCoordinates,[{key:"toString",value:function toString(){return this.formatString(common.b)}},{key:"formatString",value:function formatString(_ref2){var printTypes=_ref2.printTypes,f=(_ref2.printDegrees,common.e);return"".concat(printTypes?"Spherical":"","[rho:").concat(f(this.radius),",theta:").concat(f(this.theta),",phi:").concat(f(this.phi),"]")}},{key:"equals",value:function equals(other){return Object(common.d)(this.radius,other.radius)&&Object(common.d)(this.theta,other.theta)&&Object(common.d)(this.phi,other.phi)}},{key:"exactEquals",value:function exactEquals(other){return this.radius===other.radius&&this.theta===other.theta&&this.phi===other.phi}},{key:"set",value:function set(radius,phi,theta){return this.radius=radius,this.phi=phi,this.theta=theta,this.check()}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"copy",value:function copy(other){return this.radius=other.radius,this.phi=other.phi,this.theta=other.theta,this.check()}},{key:"fromLngLatZ",value:function fromLngLatZ(_ref3){var _ref4=Object(slicedToArray.a)(_ref3,3),lng=_ref4[0],lat=_ref4[1],z=_ref4[2];this.radius=1+z/this.radiusScale,this.phi=Object(common.h)(lat),this.theta=Object(common.h)(lng)}},{key:"fromVector3",value:function fromVector3(v){return this.radius=vec3.c(v),this.radius>0&&(this.theta=Math.atan2(v[0],v[1]),this.phi=Math.acos(Object(common.a)(v[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function toVector3(){return new vector3.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function makeSafe(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function check(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function get(){return 180-Object(common.c)(this.phi)},set:function set(v){this.phi=Math.PI-Object(common.h)(v)}},{key:"pitch",get:function get(){return Object(common.c)(this.theta)},set:function set(v){this.theta=Object(common.h)(v)}},{key:"longitude",get:function get(){return Object(common.c)(this.phi)}},{key:"latitude",get:function get(){return Object(common.c)(this.theta)}},{key:"lng",get:function get(){return Object(common.c)(this.phi)}},{key:"lat",get:function get(){return Object(common.c)(this.theta)}},{key:"z",get:function get(){return(this.radius-1)*this.radiusScale}}]),SphericalCoordinates}(),assert=__webpack_require__(14),defaultState={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},view_state_ViewState=function(){function ViewState(opts){Object(classCallCheck.a)(this,ViewState);var width=opts.width,height=opts.height,_opts$position=opts.position,position=void 0===_opts$position?defaultState.position:_opts$position;Object(assert.a)(Number.isFinite(width),"`width` must be supplied"),Object(assert.a)(Number.isFinite(height),"`height` must be supplied"),this._viewportProps=this._applyConstraints(Object.assign({},opts,{position:new vector3.a(position)}))}return Object(createClass.a)(ViewState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getDirection",value:function getDirection(){return new spherical_coordinates_SphericalCoordinates({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:"getDirectionFromBearing",value:function getDirectionFromBearing(bearing){return new spherical_coordinates_SphericalCoordinates({bearing:bearing,pitch:90}).toVector3().normalize()}},{key:"shortestPathFrom",value:function shortestPathFrom(viewState){return this._viewportProps}},{key:"_applyConstraints",value:function _applyConstraints(props){return props}}]),ViewState}(),web_mercator_viewport=__webpack_require__(196),normalize_viewport_props=__webpack_require__(791),linear_interpolator=__webpack_require__(155),transition_manager=__webpack_require__(152);__webpack_require__.d(__webpack_exports__,"a",(function(){return map_controller_MapController}));var LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new linear_interpolator.a,transitionInterruption:transition_manager.a.BREAK},NO_TRANSITION_PROPS={transitionDuration:0},MAPBOX_LIMITS={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},DEFAULT_STATE={pitch:0,bearing:0,altitude:1.5},map_controller_MapState=function(_ViewState){function MapState(){var _this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=_ref.width,height=_ref.height,latitude=_ref.latitude,longitude=_ref.longitude,zoom=_ref.zoom,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?DEFAULT_STATE.bearing:_ref$bearing,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?DEFAULT_STATE.pitch:_ref$pitch,_ref$altitude=_ref.altitude,altitude=void 0===_ref$altitude?DEFAULT_STATE.altitude:_ref$altitude,_ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?MAPBOX_LIMITS.maxZoom:_ref$maxZoom,_ref$minZoom=_ref.minZoom,minZoom=void 0===_ref$minZoom?MAPBOX_LIMITS.minZoom:_ref$minZoom,_ref$maxPitch=_ref.maxPitch,maxPitch=void 0===_ref$maxPitch?MAPBOX_LIMITS.maxPitch:_ref$maxPitch,_ref$minPitch=_ref.minPitch,minPitch=void 0===_ref$minPitch?MAPBOX_LIMITS.minPitch:_ref$minPitch,startPanLngLat=_ref.startPanLngLat,startZoomLngLat=_ref.startZoomLngLat,startBearing=_ref.startBearing,startPitch=_ref.startPitch,startZoom=_ref.startZoom;return Object(classCallCheck.a)(this,MapState),Object(assert.a)(Number.isFinite(longitude),"`longitude` must be supplied"),Object(assert.a)(Number.isFinite(latitude),"`latitude` must be supplied"),Object(assert.a)(Number.isFinite(zoom),"`zoom` must be supplied"),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(MapState).call(this,{width:width,height:height,latitude:latitude,longitude:longitude,zoom:zoom,bearing:bearing,pitch:pitch,altitude:altitude,maxZoom:maxZoom,minZoom:minZoom,maxPitch:maxPitch,minPitch:minPitch})))._interactiveState={startPanLngLat:startPanLngLat,startZoomLngLat:startZoomLngLat,startBearing:startBearing,startPitch:startPitch,startZoom:startZoom},_this}return Object(inherits.a)(MapState,_ViewState),Object(createClass.a)(MapState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(_ref2){var pos=_ref2.pos;return this._getUpdatedState({startPanLngLat:this._unproject(pos)})}},{key:"pan",value:function pan(_ref3){var pos=_ref3.pos,startPos=_ref3.startPos,startPanLngLat=this._interactiveState.startPanLngLat||this._unproject(startPos);if(!startPanLngLat)return this;var _this$_calculateNewLn=this._calculateNewLngLat({startPanLngLat:startPanLngLat,pos:pos}),_this$_calculateNewLn2=Object(slicedToArray.a)(_this$_calculateNewLn,2),longitude=_this$_calculateNewLn2[0],latitude=_this$_calculateNewLn2[1];return this._getUpdatedState({longitude:longitude,latitude:latitude})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function rotateStart(_ref4){_ref4.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function rotate(_ref5){var _ref5$deltaScaleX=_ref5.deltaScaleX,deltaScaleX=void 0===_ref5$deltaScaleX?0:_ref5$deltaScaleX,_ref5$deltaScaleY=_ref5.deltaScaleY,deltaScaleY=void 0===_ref5$deltaScaleY?0:_ref5$deltaScaleY,_this$_interactiveSta=this._interactiveState,startBearing=_this$_interactiveSta.startBearing,startPitch=_this$_interactiveSta.startPitch;if(!Number.isFinite(startBearing)||!Number.isFinite(startPitch))return this;var _this$_calculateNewPi=this._calculateNewPitchAndBearing({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY,startBearing:startBearing,startPitch:startPitch}),pitch=_this$_calculateNewPi.pitch,bearing=_this$_calculateNewPi.bearing;return this._getUpdatedState({bearing:bearing,pitch:pitch})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function zoomStart(_ref6){var pos=_ref6.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(pos),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(_ref7){var pos=_ref7.pos,startPos=_ref7.startPos,scale=_ref7.scale;Object(assert.a)(scale>0,"`scale` must be a positive number");var _this$_interactiveSta2=this._interactiveState,startZoom=_this$_interactiveSta2.startZoom,startZoomLngLat=_this$_interactiveSta2.startZoomLngLat;Number.isFinite(startZoom)||(startZoom=this._viewportProps.zoom,startZoomLngLat=this._unproject(startPos)||this._unproject(pos)),Object(assert.a)(startZoomLngLat,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var zoom=this._calculateNewZoom({scale:scale,startZoom:startZoom}),_zoomedViewport$getLo=new web_mercator_viewport.a(Object.assign({},this._viewportProps,{zoom:zoom})).getLocationAtPoint({lngLat:startZoomLngLat,pos:pos}),_zoomedViewport$getLo2=Object(slicedToArray.a)(_zoomedViewport$getLo,2),longitude=_zoomedViewport$getLo2[0],latitude=_zoomedViewport$getLo2[1];return this._getUpdatedState({zoom:zoom,longitude:longitude,latitude:latitude})}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function zoomIn(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function zoomOut(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function moveLeft(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function moveRight(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function moveUp(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function moveDown(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function rotateLeft(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function rotateRight(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function rotateUp(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function rotateDown(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function shortestPathFrom(viewState){var fromProps=viewState.getViewportProps(),props=Object.assign({},this._viewportProps),bearing=props.bearing,longitude=props.longitude;return Math.abs(bearing-fromProps.bearing)>180&&(props.bearing=bearing<0?bearing+360:bearing-360),Math.abs(longitude-fromProps.longitude)>180&&(props.longitude=longitude<0?longitude+360:longitude-360),props}},{key:"_zoomFromCenter",value:function _zoomFromCenter(scale){var _this$_viewportProps=this._viewportProps,width=_this$_viewportProps.width,height=_this$_viewportProps.height;return this.zoom({pos:[width/2,height/2],scale:scale})}},{key:"_panFromCenter",value:function _panFromCenter(offset){var _this$_viewportProps2=this._viewportProps,width=_this$_viewportProps2.width,height=_this$_viewportProps2.height;return this.pan({startPos:[width/2,height/2],pos:[width/2+offset[0],height/2+offset[1]]})}},{key:"_getUpdatedState",value:function _getUpdatedState(newProps){return new MapState(Object.assign({},this._viewportProps,this._interactiveState,newProps))}},{key:"_applyConstraints",value:function _applyConstraints(props){var maxZoom=props.maxZoom,minZoom=props.minZoom,zoom=props.zoom;props.zoom=Object(common.a)(zoom,minZoom,maxZoom);var maxPitch=props.maxPitch,minPitch=props.minPitch,pitch=props.pitch;return props.pitch=Object(common.a)(pitch,minPitch,maxPitch),Object.assign(props,Object(normalize_viewport_props.a)(props)),props}},{key:"_unproject",value:function _unproject(pos){var viewport=new web_mercator_viewport.a(this._viewportProps);return pos&&viewport.unproject(pos)}},{key:"_calculateNewLngLat",value:function _calculateNewLngLat(_ref8){var startPanLngLat=_ref8.startPanLngLat,pos=_ref8.pos;return new web_mercator_viewport.a(this._viewportProps).getMapCenterByLngLatPosition({lngLat:startPanLngLat,pos:pos})}},{key:"_calculateNewZoom",value:function _calculateNewZoom(_ref9){var scale=_ref9.scale,startZoom=_ref9.startZoom,_this$_viewportProps3=this._viewportProps,maxZoom=_this$_viewportProps3.maxZoom,minZoom=_this$_viewportProps3.minZoom,zoom=startZoom+Math.log2(scale);return Object(common.a)(zoom,minZoom,maxZoom)}},{key:"_calculateNewPitchAndBearing",value:function _calculateNewPitchAndBearing(_ref10){var deltaScaleX=_ref10.deltaScaleX,deltaScaleY=_ref10.deltaScaleY,startBearing=_ref10.startBearing,startPitch=_ref10.startPitch;deltaScaleY=Object(common.a)(deltaScaleY,-1,1);var _this$_viewportProps4=this._viewportProps,minPitch=_this$_viewportProps4.minPitch,maxPitch=_this$_viewportProps4.maxPitch,pitch=startPitch;return deltaScaleY>0?pitch=startPitch+deltaScaleY*(maxPitch-startPitch):deltaScaleY<0&&(pitch=startPitch-deltaScaleY*(minPitch-startPitch)),{pitch:pitch,bearing:startBearing+180*deltaScaleX}}}]),MapState}(view_state_ViewState),map_controller_MapController=function(_Controller){function MapController(props){var _this2;return Object(classCallCheck.a)(this,MapController),(_this2=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(MapController).call(this,map_controller_MapState,props))).invertPan=!0,_this2}return Object(inherits.a)(MapController,_Controller),Object(createClass.a)(MapController,[{key:"_getTransitionProps",value:function _getTransitionProps(){return LINEAR_TRANSITION_PROPS}},{key:"_onPanRotate",value:function _onPanRotate(event){if(!this.dragRotate)return!1;var deltaX=event.deltaX,deltaY=event.deltaY,_this$getCenter=this.getCenter(event),centerY=Object(slicedToArray.a)(_this$getCenter,2)[1],startY=centerY-deltaY,_this$controllerState=this.controllerState.getViewportProps(),width=_this$controllerState.width,height=_this$controllerState.height,deltaScaleX=deltaX/width,deltaScaleY=0;deltaY>0?Math.abs(height-startY)>5&&(deltaScaleY=deltaY/(startY-height)*1.2):deltaY<0&&startY>5&&(deltaScaleY=1-centerY/startY),deltaScaleY=Math.min(1,Math.max(-1,deltaScaleY));var newControllerState=this.controllerState.rotate({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0,isRotating:!0})}}]),MapController}(controller.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),log=__webpack_require__(10),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),get=__webpack_require__(20),inherits=__webpack_require__(6),draw_layers_pass_DrawLayersPass=function(_LayersPass){function DrawLayersPass(){return Object(classCallCheck.a)(this,DrawLayersPass),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(DrawLayersPass).apply(this,arguments))}return Object(inherits.a)(DrawLayersPass,_LayersPass),Object(createClass.a)(DrawLayersPass,[{key:"getModuleParameters",value:function getModuleParameters(layer,effects,effectProps){var moduleParameters=Object(get.a)(Object(getPrototypeOf.a)(DrawLayersPass.prototype),"getModuleParameters",this).call(this,layer);Object.assign(moduleParameters,this.getObjectHighlightParameters(layer),effectProps);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=effects[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var effect=_step.value;Object.assign(moduleParameters,effect.getParameters(layer))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return moduleParameters}},{key:"getObjectHighlightParameters",value:function getObjectHighlightParameters(layer){var _layer$props=layer.props,highlightedObjectIndex=_layer$props.highlightedObjectIndex,highlightColor=_layer$props.highlightColor,parameters={pickingHighlightColor:[highlightColor[0],highlightColor[1],highlightColor[2],highlightColor[3]||255]};return Number.isInteger(highlightedObjectIndex)&&(parameters.pickingSelectedColor=highlightedObjectIndex>=0?layer.encodePickingColor(highlightedObjectIndex):null),parameters}}]),DrawLayersPass}(__webpack_require__(122).a),pick_layers_pass=__webpack_require__(254),post_process_effect=__webpack_require__(191),framebuffer=__webpack_require__(69);__webpack_require__.d(__webpack_exports__,"a",(function(){return deck_renderer_DeckRenderer}));var deck_renderer_DeckRenderer=function(){function DeckRenderer(gl){Object(classCallCheck.a)(this,DeckRenderer),this.gl=gl,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new draw_layers_pass_DrawLayersPass(gl),this.pickLayersPass=new pick_layers_pass.a(gl),this.renderCount=0,this._needsRedraw="Initial render",this.screenBuffer=null,this.offscreenBuffer=null,this.lastPostProcessEffect=null}return Object(createClass.a)(DeckRenderer,[{key:"setProps",value:function setProps(props){"layerFilter"in props&&this.layerFilter!==props.layerFilter&&(this.layerFilter=props.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in props&&this.drawPickingColors!==props.drawPickingColors&&(this.drawPickingColors=props.drawPickingColors,this._needsRedraw="drawPickingColors changed");var layerFilter=this.layerFilter;this.drawLayersPass.setProps({layerFilter:layerFilter}),this.pickLayersPass.setProps({layerFilter:layerFilter})}},{key:"renderLayers",value:function renderLayers(_ref){var _this=this,layers=_ref.layers,viewports=_ref.viewports,activateViewport=_ref.activateViewport,views=_ref.views,_ref$redrawReason=_ref.redrawReason,redrawReason=void 0===_ref$redrawReason?"unknown reason":_ref$redrawReason,_ref$clearCanvas=_ref.clearCanvas,clearCanvas=void 0===_ref$clearCanvas||_ref$clearCanvas,_ref$effects=_ref.effects,effects=void 0===_ref$effects?[]:_ref$effects,pass=_ref.pass,stats=_ref.stats,layerPass=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,effectProps=this.prepareEffects({layers:layers,viewports:viewports,onViewportActive:activateViewport,views:views,effects:effects}),outputBuffer=this.lastPostProcessEffect?this.screenBuffer:framebuffer.a.getDefaultFramebuffer(this.gl),renderStats=layerPass.render({layers:layers,viewports:viewports,views:views,onViewportActive:activateViewport,redrawReason:redrawReason,clearCanvas:clearCanvas,effects:effects,effectProps:effectProps,outputBuffer:outputBuffer});this.postRender(effects),this.renderCount++,log.a.priority>=2&&renderStats.forEach((function(status){_this.logRenderStats({status:status,pass:pass,redrawReason:redrawReason,stats:stats,renderStats:renderStats})}))}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}},{key:"finalize",value:function finalize(){this.screenBuffer&&(this.screenBuffer.delete(),this.screenBuffer=null),this.offscreenBuffer&&(this.offscreenBuffer.delete(),this.offscreenBuffer=null)}},{key:"prepareEffects",value:function prepareEffects(params){var effects=params.effects,effectProps={};this.lastPostProcessEffect=null;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=effects[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var effect=_step.value;Object.assign(effectProps,effect.prepare(this.gl,params)),effect instanceof post_process_effect.a&&(this.lastPostProcessEffect=effect)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return this.lastPostProcessEffect&&this.prepareRenderBuffers(),effectProps}},{key:"prepareRenderBuffers",value:function prepareRenderBuffers(){this.screenBuffer||(this.screenBuffer=new framebuffer.a(this.gl)),this.screenBuffer.resize(),this.offscreenBuffer||(this.offscreenBuffer=new framebuffer.a(this.gl)),this.offscreenBuffer.resize()}},{key:"postRender",value:function postRender(effects){var params={inputBuffer:this.screenBuffer,outputBuffer:this.offscreenBuffer,target:null},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=effects[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var effect=_step2.value;if(effect instanceof post_process_effect.a){if(effect===this.lastPostProcessEffect){Object.assign(params,{target:framebuffer.a.getDefaultFramebuffer(this.gl)}),params=effect.render(params);break}params=effect.render(params)}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}},{key:"logRenderStats",value:function logRenderStats(_ref2){var renderStats=_ref2.renderStats,pass=_ref2.pass,redrawReason=_ref2.redrawReason,stats=_ref2.stats,totalCount=renderStats.totalCount,visibleCount=renderStats.visibleCount,compositeCount=renderStats.compositeCount,pickableCount=renderStats.pickableCount,hiddenCount=totalCount-compositeCount-visibleCount,message="";message+="RENDER #".concat(this.renderCount," ").concat(visibleCount," (of ").concat(totalCount," layers) to ").concat(pass," because ").concat(redrawReason," "),log.a.priority>2&&(message+="(".concat(hiddenCount," hidden, ").concat(compositeCount," composite ").concat(pickableCount," pickable)")),log.a.log(2,message)(),stats&&stats.get("Redraw Layers").add(visibleCount)}}]),DeckRenderer}()},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"a",(function(){return isBrowser}));var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),_is_electron__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(248);function isBrowser(){return!("object"===(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))&&"[object process]"===String(process)&&!process.browser)||Object(_is_electron__WEBPACK_IMPORTED_MODULE_1__.a)()}}).call(this,__webpack_require__(72))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"a",(function(){return isElectron}));var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);function isElectron(mockUserAgent){if("undefined"!=typeof window&&"object"===Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==process&&"object"===Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process.versions)&&Boolean(process.versions.electron))return!0;var realUserAgent="object"===("undefined"==typeof navigator?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,userAgent=mockUserAgent||realUserAgent;return!!(userAgent&&userAgent.indexOf("Electron")>=0)}}).call(this,__webpack_require__(72))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),_is_electron__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(428),isBrowser=!("object"===(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))&&"[object process]"===String(process)&&!process.browser)||_is_electron__WEBPACK_IMPORTED_MODULE_1__.a;__webpack_exports__.a=isBrowser}).call(this,__webpack_require__(72))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getUniformsFromViewport}));var gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(106),_lib_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(23),_utils_memoize__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(138),_utils_assert__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(14),_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(31),ZERO_VECTOR=[0,0,0,0],VECTOR_TO_POINT_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],IDENTITY_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],DEFAULT_PIXELS_PER_UNIT2=[0,0,0],DEFAULT_COORDINATE_ORIGIN=[0,0,0],LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD=12,getMemoizedViewportUniforms=Object(_utils_memoize__WEBPACK_IMPORTED_MODULE_3__.a)((function calculateViewportUniforms(_ref3){var viewport=_ref3.viewport,devicePixelRatio=_ref3.devicePixelRatio,coordinateSystem=_ref3.coordinateSystem,coordinateOrigin=_ref3.coordinateOrigin,wrapLongitude=_ref3.wrapLongitude,coordinateZoom=viewport.zoom,_calculateMatrixAndOf=function calculateMatrixAndOffset(_ref){var projectionCenter,viewport=_ref.viewport,coordinateSystem=_ref.coordinateSystem,coordinateOrigin=_ref.coordinateOrigin,coordinateZoom=_ref.coordinateZoom,viewMatrixUncentered=viewport.viewMatrixUncentered,viewMatrix=viewport.viewMatrix,projectionMatrix=viewport.projectionMatrix,viewProjectionMatrix=viewport.viewProjectionMatrix,cameraPosCommon=viewport.cameraPosition,shaderCoordinateSystem=function getShaderCoordinateSystem(coordinateSystem){switch(coordinateSystem){case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.LNGLAT:default:return _constants__WEBPACK_IMPORTED_MODULE_5__.a.LNGLAT_AUTO_OFFSET;case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.LNGLAT_DEPRECATED:return _constants__WEBPACK_IMPORTED_MODULE_5__.a.LNG_LAT;case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.METER_OFFSETS:case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.METERS:return _constants__WEBPACK_IMPORTED_MODULE_5__.a.METER_OFFSETS;case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.LNGLAT_OFFSETS:return _constants__WEBPACK_IMPORTED_MODULE_5__.a.LNGLAT_OFFSETS;case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.IDENTITY:return _constants__WEBPACK_IMPORTED_MODULE_5__.a.IDENTITY}}(coordinateSystem),shaderCoordinateOrigin=coordinateOrigin;if(shaderCoordinateSystem===_constants__WEBPACK_IMPORTED_MODULE_5__.a.LNGLAT_AUTO_OFFSET)if(coordinateZoom<LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD)shaderCoordinateSystem=_constants__WEBPACK_IMPORTED_MODULE_5__.a.LNG_LAT;else{var lng=Math.fround(viewport.longitude),lat=Math.fround(viewport.latitude);shaderCoordinateOrigin=[lng,lat]}shaderCoordinateSystem===_constants__WEBPACK_IMPORTED_MODULE_5__.a.IDENTITY&&(shaderCoordinateOrigin=[Math.fround(viewport.position[0]),Math.fround(viewport.position[1])]);switch(shaderCoordinateOrigin[2]=shaderCoordinateOrigin[2]||0,shaderCoordinateSystem){case _constants__WEBPACK_IMPORTED_MODULE_5__.a.LNG_LAT:projectionCenter=ZERO_VECTOR;break;case _constants__WEBPACK_IMPORTED_MODULE_5__.a.LNGLAT_OFFSETS:case _constants__WEBPACK_IMPORTED_MODULE_5__.a.METER_OFFSETS:case _constants__WEBPACK_IMPORTED_MODULE_5__.a.LNGLAT_AUTO_OFFSET:case _constants__WEBPACK_IMPORTED_MODULE_5__.a.IDENTITY:var positionCommonSpace=viewport.projectPosition(shaderCoordinateOrigin,Math.pow(2,coordinateZoom));cameraPosCommon=[cameraPosCommon[0]-positionCommonSpace[0],cameraPosCommon[1]-positionCommonSpace[1],cameraPosCommon[2]-positionCommonSpace[2]],positionCommonSpace[3]=1,projectionCenter=gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_1__.b([],positionCommonSpace,viewProjectionMatrix),viewMatrix=viewMatrixUncentered||viewMatrix,viewProjectionMatrix=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_0__.g([],projectionMatrix,viewMatrix),viewProjectionMatrix=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_0__.g([],viewProjectionMatrix,VECTOR_TO_POINT_MATRIX);break;default:throw new Error("Unknown projection mode")}return{viewMatrix:viewMatrix,viewProjectionMatrix:viewProjectionMatrix,projectionCenter:projectionCenter,cameraPosCommon:cameraPosCommon,shaderCoordinateSystem:shaderCoordinateSystem,shaderCoordinateOrigin:shaderCoordinateOrigin}}({coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,coordinateZoom:coordinateZoom,viewport:viewport}),projectionCenter=_calculateMatrixAndOf.projectionCenter,viewProjectionMatrix=_calculateMatrixAndOf.viewProjectionMatrix,cameraPosCommon=_calculateMatrixAndOf.cameraPosCommon,shaderCoordinateSystem=_calculateMatrixAndOf.shaderCoordinateSystem,shaderCoordinateOrigin=_calculateMatrixAndOf.shaderCoordinateOrigin;Object(_utils_assert__WEBPACK_IMPORTED_MODULE_4__.a)(viewProjectionMatrix,"Viewport missing modelViewProjectionMatrix");var distanceScales=viewport.getDistanceScales(),viewportSize=[viewport.width*devicePixelRatio,viewport.height*devicePixelRatio],uniforms={project_uCoordinateSystem:shaderCoordinateSystem,project_uCenter:projectionCenter,project_uWrapLongitude:wrapLongitude,project_uAntimeridian:(viewport.longitude||0)-180,project_uViewportSize:viewportSize,project_uDevicePixelRatio:devicePixelRatio,project_uFocalDistance:viewport.focalDistance||1,project_uCommonUnitsPerMeter:distanceScales.pixelsPerMeter,project_uCommonUnitsPerWorldUnit:distanceScales.pixelsPerMeter,project_uCommonUnitsPerWorldUnit2:DEFAULT_PIXELS_PER_UNIT2,project_uScale:viewport.scale,project_uViewProjectionMatrix:viewProjectionMatrix,project_uCameraPosition:cameraPosCommon},distanceScalesAtOrigin=viewport.getDistanceScales(shaderCoordinateOrigin);switch(shaderCoordinateSystem){case _constants__WEBPACK_IMPORTED_MODULE_5__.a.METER_OFFSETS:uniforms.project_uCommonUnitsPerWorldUnit=distanceScalesAtOrigin.pixelsPerMeter,uniforms.project_uCommonUnitsPerWorldUnit2=distanceScalesAtOrigin.pixelsPerMeter2;break;case _constants__WEBPACK_IMPORTED_MODULE_5__.a.LNGLAT_AUTO_OFFSET:uniforms.project_uCoordinateOrigin=shaderCoordinateOrigin;case _constants__WEBPACK_IMPORTED_MODULE_5__.a.LNG_LAT:case _constants__WEBPACK_IMPORTED_MODULE_5__.a.LNGLAT_OFFSETS:uniforms.project_uCommonUnitsPerWorldUnit=distanceScalesAtOrigin.pixelsPerDegree,uniforms.project_uCommonUnitsPerWorldUnit2=distanceScalesAtOrigin.pixelsPerDegree2;break;case _constants__WEBPACK_IMPORTED_MODULE_5__.a.IDENTITY:uniforms.project_uCoordinateOrigin=shaderCoordinateOrigin}return uniforms}));function getUniformsFromViewport(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},viewport=_ref2.viewport,_ref2$devicePixelRati=_ref2.devicePixelRatio,devicePixelRatio=void 0===_ref2$devicePixelRati?1:_ref2$devicePixelRati,_ref2$modelMatrix=_ref2.modelMatrix,modelMatrix=void 0===_ref2$modelMatrix?null:_ref2$modelMatrix,_ref2$coordinateSyste=_ref2.coordinateSystem,coordinateSystem=void 0===_ref2$coordinateSyste?_lib_constants__WEBPACK_IMPORTED_MODULE_2__.a.LNGLAT:_ref2$coordinateSyste,_ref2$coordinateOrigi=_ref2.coordinateOrigin,coordinateOrigin=void 0===_ref2$coordinateOrigi?DEFAULT_COORDINATE_ORIGIN:_ref2$coordinateOrigi,_ref2$wrapLongitude=_ref2.wrapLongitude,wrapLongitude=void 0!==_ref2$wrapLongitude&&_ref2$wrapLongitude;_ref2.projectionMode,_ref2.positionOrigin;return Object(_utils_assert__WEBPACK_IMPORTED_MODULE_4__.a)(viewport),Object.assign({project_uModelMatrix:modelMatrix||IDENTITY_MATRIX},getMemoizedViewportUniforms({viewport:viewport,devicePixelRatio:devicePixelRatio,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,wrapLongitude:wrapLongitude}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return count}));var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),ERR_NOT_OBJECT="count(): argument not an object",ERR_NOT_CONTAINER="count(): argument not a container";function count(container){if(!function isObject(value){return null!==value&&"object"===Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(value)}(container))throw new Error(ERR_NOT_OBJECT);if("function"==typeof container.count)return container.count();if(Number.isFinite(container.size))return container.size;if(Number.isFinite(container.length))return container.length;if(function isPlainObject(value){return null!==value&&"object"===Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(value)&&value.constructor===Object}(container))return Object.keys(container).length;throw new Error(ERR_NOT_CONTAINER)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Pass}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),Pass=function(){function Pass(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Pass);var _props$id=props.id,id=void 0===_props$id?"pass":_props$id;this.id=id,this.gl=gl,this.props={},Object.assign(this.props,props)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Pass,[{key:"setProps",value:function setProps(props){Object.assign(this.props,props)}},{key:"render",value:function render(){}},{key:"cleanup",value:function cleanup(){}}]),Pass}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PickLayersPass}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(20),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6),_layers_pass__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(122),_luma_gl_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(114),_luma_gl_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(319),PickLayersPass=function(_LayersPass){function PickLayersPass(){return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,PickLayersPass),Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(PickLayersPass).apply(this,arguments))}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__.a)(PickLayersPass,_LayersPass),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(PickLayersPass,[{key:"render",value:function render(props){props.pickingFBO?this.drawPickingBuffer(props):Object(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(PickLayersPass.prototype),"render",this).call(this,props)}},{key:"drawPickingBuffer",value:function drawPickingBuffer(_ref){var _this=this,layers=_ref.layers,viewports=_ref.viewports,onViewportActive=_ref.onViewportActive,pickingFBO=_ref.pickingFBO,effectProps=_ref.effectProps,_ref$deviceRect=_ref.deviceRect,x=_ref$deviceRect.x,y=_ref$deviceRect.y,width=_ref$deviceRect.width,height=_ref$deviceRect.height,_ref$redrawReason=_ref.redrawReason,redrawReason=void 0===_ref$redrawReason?"":_ref$redrawReason,gl=this.gl;return Object(_luma_gl_core__WEBPACK_IMPORTED_MODULE_7__.a)(gl,{framebuffer:pickingFBO,scissorTest:!0,scissor:[x,y,width,height],clearColor:[0,0,0,0]},(function(){_this.drawLayers({layers:layers,viewports:viewports,onViewportActive:onViewportActive,pass:"picking",redrawReason:redrawReason,effectProps:effectProps,parameters:{blend:!0,blendFunc:[1,0,32771,0],blendEquation:32774,blendColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]}})}))}},{key:"shouldDrawLayer",value:function shouldDrawLayer(layer,viewport){var layerFilter=this.props.layerFilter,shouldDrawLayer=!layer.isComposite&&layer.props.visible&&layer.props.pickable;return shouldDrawLayer&&layerFilter&&(shouldDrawLayer=layerFilter({layer:layer,viewport:viewport,isPicking:!0})),shouldDrawLayer}},{key:"getModuleParameters",value:function getModuleParameters(layer,effects,effectProps){var moduleParameters=Object.assign(Object.create(layer.props),{viewport:layer.context.viewport,pickingActive:1,devicePixelRatio:Object(_luma_gl_core__WEBPACK_IMPORTED_MODULE_8__.b)(this.gl)});return Object.assign(moduleParameters,effectProps),moduleParameters}},{key:"getLayerParameters",value:function getLayerParameters(layer,layerIndex,glViewport,parameters){var layerParameters=Object.assign({},layer.props.parameters||{},parameters);return Object.assign(layerParameters,{viewport:glViewport,blendColor:[0,0,0,(layerIndex+1)/255]}),layerParameters}}]),PickLayersPass}(_layers_pass__WEBPACK_IMPORTED_MODULE_6__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";var defineProperty=__webpack_require__(0),objectSpread=__webpack_require__(125),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),get=__webpack_require__(20),inherits=__webpack_require__(6),classes_buffer=__webpack_require__(38),transform_feedback=__webpack_require__(784),assert=__webpack_require__(17),GLTF_TO_LUMA_ATTRIBUTE_MAP={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function mapAttributeName(name,options){var _ref$attributeMap=(options||{}).attributeMap,attributeMap=void 0===_ref$attributeMap?GLTF_TO_LUMA_ATTRIBUTE_MAP:_ref$attributeMap;return attributeMap&&attributeMap[name]||name}function inferAttributeAccessor(attributeName,attribute){var category;switch(attributeName){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":category="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":category="vectors"}switch(category){case"vectors":attribute.size=attribute.size||3;break;case"uvs":attribute.size=attribute.size||2}Object(assert.a)(Number.isFinite(attribute.size),"attribute ".concat(attributeName," needs size"))}var program_manager=__webpack_require__(429),webgl_checks=__webpack_require__(39),classes_clear=__webpack_require__(259),query=__webpack_require__(785),classes_program=__webpack_require__(778),classes_accessor=__webpack_require__(66),assertThisInitialized=__webpack_require__(7),resource=__webpack_require__(47),arrayBuffer=null;function getScratchArray(Type,length){return new Type(function getScratchArrayBuffer(byteLength){return(!arrayBuffer||arrayBuffer.byteLength<byteLength)&&(arrayBuffer=new ArrayBuffer(byteLength)),arrayBuffer}(Type.BYTES_PER_ELEMENT*length),0,length)}var globals=__webpack_require__(53),is_browser=__webpack_require__(247),is_electron=__webpack_require__(248);function getBrowser(mockUserAgent){if(!mockUserAgent&&!Object(is_browser.a)())return"Node";if(Object(is_electron.a)(mockUserAgent))return"Electron";var navigator_="undefined"!=typeof navigator?navigator:{},userAgent=mockUserAgent||navigator_.userAgent||"";if(userAgent.indexOf("Edge")>-1)return"Edge";var isMSIE=-1!==userAgent.indexOf("MSIE "),isTrident=-1!==userAgent.indexOf("Trident/");return isMSIE||isTrident?"IE":globals.b.chrome?"Chrome":globals.b.safari?"Safari":globals.b.mozInnerScreenX?"Firefox":"Unknown"}var ERR_ELEMENTS="elements must be GL.ELEMENT_ARRAY_BUFFER",vertex_array_object_VertexArrayObject=function(_Resource){function VertexArrayObject(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,VertexArrayObject);var id=opts.id||opts.program&&opts.program.id;return(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(VertexArrayObject).call(this,gl,Object.assign({},opts,{id:id})))).hasVertexArrays=VertexArrayObject.isSupported(gl),_this.buffer=null,_this.bufferValue=null,_this.initialize(opts),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(VertexArrayObject,_Resource),Object(createClass.a)(VertexArrayObject,null,[{key:"isSupported",value:function isSupported(gl){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return options.constantAttributeZero?Object(webgl_checks.d)(gl)||"Chrome"===getBrowser():Object(webgl_checks.d)(gl)||gl.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function getDefaultArray(gl){return gl.luma=gl.luma||{},gl.luma.defaultVertexArray||(gl.luma.defaultVertexArray=new VertexArrayObject(gl,{handle:null,isDefaultArray:!0})),gl.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function getMaxAttributes(gl){return VertexArrayObject.MAX_ATTRIBUTES=VertexArrayObject.MAX_ATTRIBUTES||gl.getParameter(34921),VertexArrayObject.MAX_ATTRIBUTES}},{key:"setConstant",value:function setConstant(gl,location,array){switch(array.constructor){case Float32Array:VertexArrayObject._setConstantFloatArray(gl,location,array);break;case Int32Array:VertexArrayObject._setConstantIntArray(gl,location,array);break;case Uint32Array:VertexArrayObject._setConstantUintArray(gl,location,array);break;default:Object(assert.a)(!1)}}}]),Object(createClass.a)(VertexArrayObject,[{key:"delete",value:function _delete(){Object(get.a)(Object(getPrototypeOf.a)(VertexArrayObject.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(props)}},{key:"setProps",value:function setProps(props){return this}},{key:"setElementBuffer",value:function setElementBuffer(){var _this2=this,elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(assert.a)(!elementBuffer||34963===elementBuffer.target,ERR_ELEMENTS),this.bind((function(){_this2.gl.bindBuffer(34963,elementBuffer?elementBuffer.handle:null)})),this}},{key:"setBuffer",value:function setBuffer(location,buffer,accessor){if(34963===buffer.target)return this.setElementBuffer(buffer,accessor);var size=accessor.size,type=accessor.type,stride=accessor.stride,offset=accessor.offset,normalized=accessor.normalized,integer=accessor.integer,divisor=accessor.divisor,gl=this.gl;return location=Number(location),this.bind((function(){gl.bindBuffer(34962,buffer.handle),integer?(Object(assert.a)(Object(webgl_checks.d)(gl)),gl.vertexAttribIPointer(location,size,type,stride,offset)):gl.vertexAttribPointer(location,size,type,normalized,stride,offset),gl.enableVertexAttribArray(location),gl.vertexAttribDivisor(location,divisor||0)})),this}},{key:"enable",value:function enable(location){var _this3=this,_enable=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],disablingAttributeZero=!_enable&&0===location&&!VertexArrayObject.isSupported(this.gl,{constantAttributeZero:!0});return disablingAttributeZero||(location=Number(location),this.bind((function(){return _enable?_this3.gl.enableVertexAttribArray(location):_this3.gl.disableVertexAttribArray(location)}))),this}},{key:"getConstantBuffer",value:function getConstantBuffer(elementCount,value,accessor){var constantValue=this._normalizeConstantArrayValue(value,accessor),byteLength=constantValue.byteLength*elementCount,length=constantValue.length*elementCount,updateNeeded=!this.buffer;if(this.buffer=this.buffer||new classes_buffer.a(this.gl,byteLength),updateNeeded=(updateNeeded=updateNeeded||this.buffer.reallocate(byteLength))||!this._compareConstantArrayValues(constantValue,this.bufferValue)){var typedArray=getScratchArray(value.constructor,length);!function fillArray(_ref){for(var target=_ref.target,source=_ref.source,_ref$start=_ref.start,start=void 0===_ref$start?0:_ref$start,_ref$count=_ref.count,count=void 0===_ref$count?1:_ref$count,length=source.length,total=count*length,copied=0,i=start;copied<length;copied++)target[i++]=source[copied];for(;copied<total;)copied<total-copied?(target.copyWithin(start+copied,start,start+copied),copied*=2):(target.copyWithin(start+copied,start,start+total-copied),copied=total);return target}({target:typedArray,source:constantValue,start:0,count:length}),this.buffer.subData(typedArray),this.bufferValue=value}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function _normalizeConstantArrayValue(arrayValue,accessor){return Array.isArray(arrayValue)?new Float32Array(arrayValue):arrayValue}},{key:"_compareConstantArrayValues",value:function _compareConstantArrayValues(v1,v2){if(!v1||!v2||v1.length!==v2.length||v1.constructor!==v2.constructor)return!1;for(var i=0;i<v1.length;++i)if(v1[i]!==v2[i])return!1;return!0}},{key:"_createHandle",value:function _createHandle(){return this.hasVertexArrays=VertexArrayObject.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function _deleteHandle(handle){return this.hasVertexArrays&&this.gl.deleteVertexArray(handle),[this.elements]}},{key:"_bindHandle",value:function _bindHandle(handle){this.hasVertexArrays&&this.gl.bindVertexArray(handle)}},{key:"_getParameter",value:function _getParameter(pname,_ref){var _this4=this,location=_ref.location;return Object(assert.a)(Number.isFinite(location)),this.bind((function(){switch(pname){case 34373:return _this4.gl.getVertexAttribOffset(location,pname);default:return _this4.gl.getVertexAttrib(location,pname)}}))}},{key:"MAX_ATTRIBUTES",get:function get(){return VertexArrayObject.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function _setConstantFloatArray(gl,location,array){switch(array.length){case 1:gl.vertexAttrib1fv(location,array);break;case 2:gl.vertexAttrib2fv(location,array);break;case 3:gl.vertexAttrib3fv(location,array);break;case 4:gl.vertexAttrib4fv(location,array);break;default:Object(assert.a)(!1)}}},{key:"_setConstantIntArray",value:function _setConstantIntArray(gl,location,array){switch(Object(assert.a)(Object(webgl_checks.d)(gl)),array.length){case 1:gl.vertexAttribI1iv(location,array);break;case 2:gl.vertexAttribI2iv(location,array);break;case 3:gl.vertexAttribI3iv(location,array);break;case 4:gl.vertexAttribI4iv(location,array);break;default:Object(assert.a)(!1)}}},{key:"_setConstantUintArray",value:function _setConstantUintArray(gl,location,array){switch(Object(assert.a)(Object(webgl_checks.d)(gl)),array.length){case 1:gl.vertexAttribI1uiv(location,array);break;case 2:gl.vertexAttribI2uiv(location,array);break;case 3:gl.vertexAttribI3uiv(location,array);break;case 4:gl.vertexAttribI4uiv(location,array);break;default:Object(assert.a)(!1)}}}]),VertexArrayObject}(resource.a),stub_methods=__webpack_require__(775),log=__webpack_require__(25),MULTI_LOCATION_ATTRIBUTE_REGEXP=/^(.+)__LOCATION_([0-9]+)$/,DEPRECATIONS_V6=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],vertex_array_VertexArray=function(){function VertexArray(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,VertexArray);var id=opts.id||opts.program&&opts.program.id;this.id=id,this.gl=gl,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=vertex_array_object_VertexArrayObject.isSupported(gl)?new vertex_array_object_VertexArrayObject(gl):vertex_array_object_VertexArrayObject.getDefaultArray(gl),Object(stub_methods.a)(this,"VertexArray","v6.0",DEPRECATIONS_V6),this.initialize(opts),Object.seal(this)}return Object(createClass.a)(VertexArray,[{key:"delete",value:function _delete(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(props)}},{key:"reset",value:function reset(){this.elements=null,this.elementsAccessor=null;var MAX_ATTRIBUTES=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(MAX_ATTRIBUTES).fill(null),this.accessors=new Array(MAX_ATTRIBUTES).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function setProps(props){return"program"in props&&(this.configuration=props.program&&props.program.configuration),"configuration"in props&&(this.configuration=props.configuration),"attributes"in props&&this.setAttributes(props.attributes),"elements"in props&&this.setElementBuffer(props.elements),"bindOnUse"in props&&(props=props.bindOnUse),this}},{key:"clearDrawParams",value:function clearDrawParams(){this.drawParams=null}},{key:"getDrawParams",value:function getDrawParams(appParameters){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,appParameters)}},{key:"setAttributes",value:function setAttributes(attributes){var _this=this;return Object.assign(this.attributes,attributes),this.vertexArrayObject.bind((function(){for(var locationOrName in attributes){var value=attributes[locationOrName];_this._setAttribute(locationOrName,value)}_this.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function setElementBuffer(){var elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,accessor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=elementBuffer,this.elementsAccessor=accessor,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(elementBuffer,accessor),this}},{key:"setBuffer",value:function setBuffer(locationOrName,buffer){var appAccessor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===buffer.target)return this.setElementBuffer(buffer,appAccessor);var _this$_resolveLocatio=this._resolveLocationAndAccessor(locationOrName,buffer,buffer.accessor,appAccessor),location=_this$_resolveLocatio.location,accessor=_this$_resolveLocatio.accessor;return location>=0&&(this.values[location]=buffer,this.accessors[location]=accessor,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(location,buffer,accessor)),this}},{key:"setConstant",value:function setConstant(locationOrName,arrayValue){var appAccessor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_this$_resolveLocatio2=this._resolveLocationAndAccessor(locationOrName,arrayValue,Object.assign({size:arrayValue.length},appAccessor)),location=_this$_resolveLocatio2.location,accessor=_this$_resolveLocatio2.accessor;return location>=0&&(arrayValue=this.vertexArrayObject._normalizeConstantArrayValue(arrayValue,accessor),this.values[location]=arrayValue,this.accessors[location]=accessor,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(location,!1)),this}},{key:"unbindBuffers",value:function unbindBuffers(){var _this2=this;return this.vertexArrayObject.bind((function(){_this2.elements&&(_this2.vertexArrayObject.isDefaultArray||_this2.vertexArrayObject.setElementBuffer(null)),_this2.buffer=_this2.buffer||new classes_buffer.a(_this2.gl,{accessor:{size:4}});for(var location=0;location<_this2.vertexArrayObject.MAX_ATTRIBUTES;location++)_this2.values[location]instanceof classes_buffer.a&&(_this2.gl.disableVertexAttribArray(location),_this2.gl.bindBuffer(34962,_this2.buffer.handle),_this2.gl.vertexAttribPointer(location,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function bindBuffers(){var _this3=this;return this.vertexArrayObject.bind((function(){_this3.elements&&_this3.setElementBuffer(_this3.elements);for(var location=0;location<_this3.vertexArrayObject.MAX_ATTRIBUTES;location++){var buffer=_this3.values[location];buffer instanceof classes_buffer.a&&_this3.setBuffer(location,buffer)}})),this}},{key:"bindForDraw",value:function bindForDraw(vertexCount,instanceCount,func){var value,_this4=this;return this.vertexArrayObject.bind((function(){_this4._setConstantAttributes(vertexCount,instanceCount),_this4.vertexArrayObject.hasVertexArrays||_this4.bindBuffers(),value=func(),_this4.vertexArrayObject.hasVertexArrays||_this4.unbindBuffers()})),value}},{key:"_resolveLocationAndAccessor",value:function _resolveLocationAndAccessor(locationOrName,value,valueAccessor,appAccessor){var _this5=this,_this$_getAttributeIn=this._getAttributeIndex(locationOrName),location=_this$_getAttributeIn.location,name=_this$_getAttributeIn.name;if(!Number.isFinite(location)||location<0)return this.unused[locationOrName]=value,log.a.once(3,(function(){return"unused value ".concat(locationOrName," in ").concat(_this5.id)}))(),this;var accessInfo=this._getAttributeInfo(name||location);if(!accessInfo)return{location:-1,accessor:null};var accessor=classes_accessor.a.resolve(accessInfo.accessor,valueAccessor,appAccessor),size=accessor.size,type=accessor.type;return Object(assert.a)(Number.isFinite(size)&&Number.isFinite(type)),{location:location,accessor:accessor}}},{key:"_getAttributeInfo",value:function _getAttributeInfo(attributeName){return this.configuration&&this.configuration.getAttributeInfo(attributeName)}},{key:"_getAttributeIndex",value:function _getAttributeIndex(locationOrName){var location=Number(locationOrName);if(Number.isFinite(location))return{location:location};var multiLocation=MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName),name=multiLocation?multiLocation[1]:locationOrName,locationOffset=multiLocation?Number(multiLocation[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(name)+locationOffset,name:name}:{location:-1}}},{key:"_setAttribute",value:function _setAttribute(locationOrName,value){if(value instanceof classes_buffer.a)this.setBuffer(locationOrName,value);else if(Array.isArray(value)&&value.length&&value[0]instanceof classes_buffer.a){var buffer=value[0],accessor=value[1];this.setBuffer(locationOrName,buffer,accessor)}else if(ArrayBuffer.isView(value)||Array.isArray(value)){var constant=value;this.setConstant(locationOrName,constant)}else{if(!(value.buffer instanceof classes_buffer.a))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var _accessor=value;this.setBuffer(locationOrName,_accessor.buffer,_accessor)}}},{key:"_setConstantAttributes",value:function _setConstantAttributes(vertexCount,instanceCount){var elementCount=Math.max(0|vertexCount,0|instanceCount),constant=this.values[0];ArrayBuffer.isView(constant)&&this._setConstantAttributeZero(constant,elementCount);for(var location=1;location<this.vertexArrayObject.MAX_ATTRIBUTES;location++)constant=this.values[location],ArrayBuffer.isView(constant)&&this._setConstantAttribute(location,constant)}},{key:"_setConstantAttributeZero",value:function _setConstantAttributeZero(constant,elementCount){if(vertex_array_object_VertexArrayObject.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,constant);else{var buffer=this.vertexArrayObject.getConstantBuffer(elementCount,constant);this.vertexArrayObject.setBuffer(0,buffer,this.accessors[0])}}},{key:"_setConstantAttribute",value:function _setConstantAttribute(location,constant){vertex_array_object_VertexArrayObject.setConstant(this.gl,location,constant),this.vertexArrayObject.isDefaultArray&&this.vertexArrayObject.enable(location,!1)}},{key:"_updateDrawParams",value:function _updateDrawParams(){for(var drawParams={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},location=0;location<this.vertexArrayObject.MAX_ATTRIBUTES;location++)this._updateDrawParamsForLocation(drawParams,location);return this.elements&&(drawParams.elementCount=this.elements.getElementCount(this.elements.accessor),drawParams.isIndexed=!0,drawParams.indexType=this.elementsAccessor.type||this.elements.accessor.type,drawParams.indexOffset=this.elementsAccessor.offset||0),drawParams.indexCount===1/0&&(drawParams.indexCount=0),drawParams.vertexCount===1/0&&(drawParams.vertexCount=0),drawParams.instanceCount===1/0&&(drawParams.instanceCount=0),drawParams}},{key:"_updateDrawParamsForLocation",value:function _updateDrawParamsForLocation(drawParams,location){var value=this.values[location],accessor=this.accessors[location];if(value){var isInstanced=accessor.divisor>0;if(drawParams.isInstanced=drawParams.isInstanced||isInstanced,value instanceof classes_buffer.a){var buffer=value;if(isInstanced){var instanceCount=buffer.getVertexCount(accessor);drawParams.instanceCount=Math.min(drawParams.instanceCount,instanceCount)}else{var vertexCount=buffer.getVertexCount(accessor);drawParams.vertexCount=Math.min(drawParams.vertexCount,vertexCount)}}}}},{key:"setElements",value:function setElements(){var elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,accessor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return log.a.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(elementBuffer,accessor)}}]),VertexArray}(),esm=__webpack_require__(120),constants_to_keys=__webpack_require__(128),attribute_utils=__webpack_require__(105);function formatValue(v){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_opts$isInteger=opts.isInteger,isInteger=void 0!==_opts$isInteger&&_opts$isInteger;if(Array.isArray(v)||ArrayBuffer.isView(v))return function formatArrayValue(v,opts){for(var _opts$maxElts=opts.maxElts,maxElts=void 0===_opts$maxElts?16:_opts$maxElts,_opts$size=opts.size,size=void 0===_opts$size?1:_opts$size,string="[",i=0;i<v.length&&i<maxElts;++i)i>0&&(string+=",".concat(i%size==0?" ":"")),string+=formatValue(v[i],opts);var terminator=v.length>maxElts?"...":"]";return"".concat(string).concat(terminator)}(v,opts);if(!Number.isFinite(v))return String(v);if(Math.abs(v)<1e-16)return isInteger?"0":"0.";if(isInteger)return v.toFixed(0);if(Math.abs(v)>100&&Math.abs(v)<1e4)return v.toFixed(0);var string=v.toPrecision(2);return string.indexOf(".0")===string.length-2?string.slice(0,-1):string}function getDebugTableRow(vertexArray,attribute,accessor,header){var _ref4,_ref2,gl=vertexArray.gl;if(!attribute)return _ref2={},Object(defineProperty.a)(_ref2,header,"null"),Object(defineProperty.a)(_ref2,"Format ","N/A"),_ref2;var isInteger,marker,value,type="NOT PROVIDED",size="N/A",verts="N/A",bytes="N/A";if(accessor&&(type=accessor.type,size=accessor.size,isInteger=-1!==(type=String(type).replace("Array","")).indexOf("nt")),attribute instanceof classes_buffer.a){var _ref3,format,buffer=attribute,_buffer$getDebugData=buffer.getDebugData(),data=_buffer$getDebugData.data;if(marker=_buffer$getDebugData.modified?"*":"",value=data,verts=(bytes=buffer.byteLength)/data.BYTES_PER_ELEMENT/size,accessor){var instanced=accessor.divisor>0;format="".concat(instanced?"I ":"P "," ").concat(verts," (x").concat(size,"=").concat(bytes," bytes ").concat(Object(constants_to_keys.a)(gl,type),")")}else isInteger=!0,format="".concat(bytes," bytes");return _ref3={},Object(defineProperty.a)(_ref3,header,"".concat(marker).concat(formatValue(value,{size:size,isInteger:isInteger}))),Object(defineProperty.a)(_ref3,"Format ",format),_ref3}return value=attribute,size=attribute.length,isInteger=-1!==(type=String(attribute.constructor.name).replace("Array","")).indexOf("nt"),_ref4={},Object(defineProperty.a)(_ref4,header,"".concat(formatValue(value,{size:size,isInteger:isInteger})," (constant)")),Object(defineProperty.a)(_ref4,"Format ","".concat(size,"x").concat(type," (constant)")),_ref4}function getGLSLDeclaration(name,accessor){var type=accessor.type,size=accessor.size,typeAndName=Object(attribute_utils.b)(type,size);return typeAndName?"".concat(name," (").concat(typeAndName.name,")"):name}function getDebugTableForUniforms(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$header=_ref.header,header=void 0===_ref$header?"Uniforms":_ref$header,program=_ref.program,uniforms=_ref.uniforms,_ref$undefinedOnly=_ref.undefinedOnly,undefinedOnly=void 0!==_ref$undefinedOnly&&_ref$undefinedOnly;Object(assert.a)(program);var uniformLocations=program._uniformSetters,table={},uniformNames=Object.keys(uniformLocations).sort(),count=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=uniformNames[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _uniformName=_step.value;_uniformName.match(".*_.*")||_uniformName.match(".*Matrix")||addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:_uniformName,undefinedOnly:undefinedOnly})&&count++}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=uniformNames[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _uniformName2=_step2.value;_uniformName2.match(".*Matrix")&&addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:_uniformName2,undefinedOnly:undefinedOnly})&&count++}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=uniformNames[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _uniformName3=_step3.value;table[_uniformName3]||addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:_uniformName3,undefinedOnly:undefinedOnly})&&count++}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}var unusedCount=0,unusedTable={};if(!undefinedOnly)for(var uniformName in uniforms){var uniform=uniforms[uniformName];table[uniformName]||(unusedCount++,unusedTable[uniformName]=Object(defineProperty.a)({Type:"NOT USED: ".concat(uniform)},header,formatValue(uniform)))}return{table:table,count:count,unusedTable:unusedTable,unusedCount:unusedCount}}function addUniformToTable(_ref2){var _table$uniformName,table=_ref2.table,header=_ref2.header,uniforms=_ref2.uniforms,uniformName=_ref2.uniformName,undefinedOnly=_ref2.undefinedOnly,value=uniforms[uniformName],isDefined=function isUniformDefined(value){return null!=value}(value);return(!undefinedOnly||!isDefined)&&(table[uniformName]=(_table$uniformName={},Object(defineProperty.a)(_table$uniformName,header,isDefined?formatValue(value):"N/A"),Object(defineProperty.a)(_table$uniformName,"Uniform Type",isDefined?value:"NOT PROVIDED"),_table$uniformName),!0)}function debug_program_configuration_getGLSLDeclaration(attributeInfo){var _attributeInfo$access=attributeInfo.accessor,type=_attributeInfo$access.type,size=_attributeInfo$access.size,typeAndName=Object(attribute_utils.b)(type,size);return typeAndName?"".concat(typeAndName.name," ").concat(attributeInfo.name):attributeInfo.name}var dist=__webpack_require__(30),dist_default=__webpack_require__.n(dist),utils_globals=__webpack_require__(55),models={},seer_integration_addModel=function addModel(model){models[model.id]||(models[model.id]=model,dist_default.a.listItem("luma.gl",model.id))},recursiveSet=function recursiveSet(obj,path,value){obj&&(path.length>1?recursiveSet(obj[path[0]],path.slice(1),value):obj[path[0]]=value)},overrides=new Map,seer_integration_getOverrides=function getOverrides(id,uniforms){if(utils_globals.b.__SEER_INITIALIZED__&&id){var overs=overrides.get(id);overs&&overs.forEach((function(value,valuePath){recursiveSet(uniforms,valuePath,value)}))}};dist_default.a.listenFor("luma.gl",(function(payload){var model=models[payload.itemKey];if(model&&"edit"===payload.type&&"uniforms"===payload.valuePath[0]){var valuePath=payload.valuePath.slice(1);!function setOverride(id,valuePath,value){utils_globals.b.__SEER_INITIALIZED__&&(overrides.has(id)||overrides.set(id,new Map),overrides.get(id).set(valuePath,value))}(payload.itemKey,valuePath,payload.value);var uniforms=model.getUniforms();recursiveSet(uniforms,valuePath,payload.value),model.setUniforms(uniforms)}}));var utils=__webpack_require__(127),base_model_BaseModel=function(){function BaseModel(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,BaseModel),Object(assert.a)(Object(webgl_checks.c)(gl));var _props$id=props.id,id=void 0===_props$id?Object(utils.c)("base-model"):_props$id;this.id=id,this.gl=gl,this.id=props.id||Object(utils.c)("Model"),this.lastLogTime=0,this.initialize(props)}return Object(createClass.a)(BaseModel,[{key:"initialize",value:function initialize(props){this.props={},props.shaderCache&&log.a.warn("ShaderCache property is deprecated")(),this.programManager=props.programManager||program_manager.a.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var _props$program=props.program,program=void 0===_props$program?null:_props$program,vs=props.vs,fs=props.fs,modules=props.modules,defines=props.defines,inject=props.inject,varyings=props.varyings,bufferMode=props.bufferMode;this.programProps={program:program,vs:vs,fs:fs,modules:modules,defines:defines,inject:inject,varyings:varyings,bufferMode:bufferMode},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this._checkProgram(),this._setBaseModelProps(props),this.setUniforms(Object.assign({},this.getModuleUniforms(props.moduleSettings)))}},{key:"setProps",value:function setProps(props){this._setBaseModelProps(props)}},{key:"delete",value:function _delete(){for(var key in this._attributes)this._attributes[key]!==this.attributes[key]&&this._attributes[key].delete();this._managedProgram&&this.programManager.release(this.program),this.vertexArray.delete(),function removeModel(id){delete models[id],dist_default.a.deleteItem("luma.gl",id)}(this.id)}},{key:"isAnimated",value:function isAnimated(){return this.animated}},{key:"getProgram",value:function getProgram(){return this.program}},{key:"setProgram",value:function setProgram(props){this.programProps=Object.assign({},props),this._programDirty=!0}},{key:"getUniforms",value:function getUniforms(){return this.uniforms}},{key:"setUniforms",value:function setUniforms(){var uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return uniforms=Object.assign({},uniforms),seer_integration_getOverrides(this.id,uniforms),uniforms=this._extractAnimatedUniforms(uniforms),Object.assign(this.uniforms,uniforms),this}},{key:"getModuleUniforms",value:function getModuleUniforms(opts){this._checkProgram();var getUniforms=this.programManager.getUniforms(this.program);return getUniforms?getUniforms(opts):{}}},{key:"updateModuleSettings",value:function updateModuleSettings(opts){var uniforms=this.getModuleUniforms(opts||{});return this.setUniforms(uniforms)}},{key:"clear",value:function clear(opts){return Object(classes_clear.a)(this.program.gl,opts),this}},{key:"drawGeometry",value:function drawGeometry(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var _opts$moduleSettings=opts.moduleSettings,moduleSettings=void 0===_opts$moduleSettings?null:_opts$moduleSettings,framebuffer=opts.framebuffer,_opts$uniforms=opts.uniforms,uniforms=void 0===_opts$uniforms?{}:_opts$uniforms,_opts$attributes=opts.attributes,attributes=void 0===_opts$attributes?{}:_opts$attributes,_opts$transformFeedba=opts.transformFeedback,transformFeedback=void 0===_opts$transformFeedba?this.transformFeedback:_opts$transformFeedba,_opts$parameters=opts.parameters,parameters=void 0===_opts$parameters?{}:_opts$parameters,_opts$vertexArray=opts.vertexArray,vertexArray=void 0===_opts$vertexArray?this.vertexArray:_opts$vertexArray,animationProps=opts.animationProps;seer_integration_addModel(this),this.setAttributes(attributes),this.updateModuleSettings(moduleSettings),this.setUniforms(uniforms),this._refreshAnimationProps(animationProps);var logPriority=this._logDrawCallStart(2),drawParams=this.vertexArray.getDrawParams(this.props);drawParams.isInstanced&&!this.isInstanced&&log.a.warn("Found instanced attributes on non-instanced model",this.id)();var isIndexed=drawParams.isIndexed,indexType=drawParams.indexType,indexOffset=drawParams.indexOffset,isInstanced=this.isInstanced,instanceCount=this.instanceCount,noop=function noop(){},_this$props=this.props,_this$props$onBeforeR=_this$props.onBeforeRender,onBeforeRender=void 0===_this$props$onBeforeR?noop:_this$props$onBeforeR,_this$props$onAfterRe=_this$props.onAfterRender,onAfterRender=void 0===_this$props$onAfterRe?noop:_this$props$onAfterRe;onBeforeRender(),this._timerQueryStart(),this.program.setUniforms(this.uniforms);var didDraw=this.program.draw(Object.assign({},opts,{logPriority:logPriority,uniforms:null,framebuffer:framebuffer,parameters:parameters,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:vertexArray,transformFeedback:transformFeedback,isIndexed:isIndexed,indexType:indexType,isInstanced:isInstanced,instanceCount:instanceCount,offset:isIndexed?indexOffset:0}));return this._timerQueryEnd(),onAfterRender(),this._logDrawCallEnd(logPriority,vertexArray,framebuffer),didDraw}},{key:"_setBaseModelProps",value:function _setBaseModelProps(props){Object.assign(this.props,props),"uniforms"in props&&this.setUniforms(props.uniforms),"pickable"in props&&(this.pickable=props.pickable),"timerQueryEnabled"in props&&(this.timerQueryEnabled=props.timerQueryEnabled&&query.a.isSupported(this.gl,["timers"]),props.timerQueryEnabled&&!this.timerQueryEnabled&&log.a.warn("GPU timer not supported")()),"_animationProps"in props&&this._setAnimationProps(props._animationProps),"_animationLoop"in props&&(this.animationLoop=props._animationLoop)}},{key:"_checkProgram",value:function _checkProgram(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var needsUpdate=this._programDirty||this.programManager.stateHash!==this._programManagerState;if(needsUpdate){var program=this.programProps.program;if(program)this._managedProgram=!1;else{var _this$programProps=this.programProps,_this$programProps$vs=_this$programProps.vs,vs=void 0===_this$programProps$vs?esm.a.vs:_this$programProps$vs,_this$programProps$fs=_this$programProps.fs,fs=void 0===_this$programProps$fs?esm.a.fs:_this$programProps$fs,modules=_this$programProps.modules,inject=_this$programProps.inject,defines=_this$programProps.defines,varyings=_this$programProps.varyings,bufferMode=_this$programProps.bufferMode;program=this.programManager.get({vs:vs,fs:fs,modules:modules,inject:inject,defines:defines,varyings:varyings,bufferMode:bufferMode}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Object(assert.a)(program instanceof classes_program.a,"Model needs a program"),this._programDirty=!1,program!==this.program&&(this.program=program,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new vertex_array_VertexArray(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_refreshAnimationProps",value:function _refreshAnimationProps(animationProps){(animationProps=animationProps||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(animationProps)}},{key:"_evaluateAnimateUniforms",value:function _evaluateAnimateUniforms(animationProps){if(!this.animated)return{};var animatedUniforms={};for(var uniformName in this.animatedUniforms){var valueFunction=this.animatedUniforms[uniformName];animatedUniforms[uniformName]=valueFunction(animationProps)}return animatedUniforms}},{key:"_extractAnimatedUniforms",value:function _extractAnimatedUniforms(uniforms){var foundAnimated=!1;for(var uniformName in uniforms){var newValue=uniforms[uniformName];"function"==typeof newValue?(this.animatedUniforms[uniformName]=newValue,foundAnimated=!0):delete this.animatedUniforms[uniformName]}if(this.animated=!Object(utils.a)(this.animatedUniforms),!foundAnimated)return uniforms;var staticUniforms={};for(var _uniformName in uniforms)this.animatedUniforms[_uniformName]||(staticUniforms[_uniformName]=uniforms[_uniformName]);return staticUniforms}},{key:"_timerQueryStart",value:function _timerQueryStart(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new query.a(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function _timerQueryEnd(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var elapsedTime=this.timeElapsedQuery.getTimerMilliseconds();this.stats.lastFrameTime=elapsedTime,this.stats.accumulatedFrameTime+=elapsedTime,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,log.a.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_logDrawCallStart",value:function _logDrawCallStart(priority){var logDrawTimeout=priority>3?0:1e4;if(!(log.a.priority<priority||Date.now()-this.lastLogTime<logDrawTimeout))return this.lastLogTime=Date.now(),log.a.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:log.a.priority<=2})(),priority}},{key:"_logDrawCallEnd",value:function _logDrawCallEnd(priority,vertexArray,uniforms,framebuffer){if(void 0!==priority){var attributeTable=function getDebugTableForVertexArray(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},vertexArray=_ref.vertexArray,_ref$header=_ref.header,header=void 0===_ref$header?"Attributes":_ref$header;if(!vertexArray.configuration)return{};var table={};vertexArray.elements&&(table.ELEMENT_ARRAY_BUFFER=getDebugTableRow(vertexArray,vertexArray.elements,null,header));var attributes=vertexArray.values;for(var attributeLocation in attributes){var info=vertexArray._getAttributeInfo(attributeLocation);if(info){var rowHeader="".concat(attributeLocation,": ").concat(info.name),accessor=vertexArray.accessors[info.location];accessor&&(rowHeader="".concat(attributeLocation,": ").concat(getGLSLDeclaration(info.name,accessor))),table[rowHeader]=getDebugTableRow(vertexArray,attributes[attributeLocation],accessor,header)}}return table}({vertexArray:vertexArray,header:"".concat(this.id," attributes"),attributes:this._attributes}),_getDebugTableForUnif=getDebugTableForUniforms({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,uniforms)}),uniformTable=_getDebugTableForUnif.table,unusedTable=_getDebugTableForUnif.unusedTable,unusedCount=_getDebugTableForUnif.unusedCount,_getDebugTableForUnif2=getDebugTableForUniforms({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,uniforms),undefinedOnly:!0}),missingTable=_getDebugTableForUnif2.table;_getDebugTableForUnif2.count>0&&log.a.log("MISSING UNIFORMS",Object.keys(missingTable))(),unusedCount>0&&log.a.log("UNUSED UNIFORMS",Object.keys(unusedTable))();var configTable=function getDebugTableForProgramConfiguration(config){var table={},header="Accessors for ".concat(config.id),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=config.attributeInfos[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var attributeInfo=_step.value;if(attributeInfo){var glslDeclaration=debug_program_configuration_getGLSLDeclaration(attributeInfo);table["in ".concat(glslDeclaration)]=Object(defineProperty.a)({},header,JSON.stringify(attributeInfo.accessor))}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=config.varyingInfos[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var varyingInfo=_step2.value;if(varyingInfo){var _glslDeclaration=debug_program_configuration_getGLSLDeclaration(varyingInfo);table["out ".concat(_glslDeclaration)]=Object(defineProperty.a)({},header,JSON.stringify(varyingInfo.accessor))}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return table}(this.vertexArray.configuration);log.a.table(priority,attributeTable)(),log.a.table(priority,uniformTable)(),log.a.table(priority+1,configTable)(),function logModel(model,uniforms){if(dist_default.a.isReady()&&!dist_default.a.throttle("luma.gl:".concat(model.id),1e3)){var attributesObject=model.geometry?Object.assign({},model.geometry.attributes,model.attributes):model.attributes,uniformsObject=Object.assign({},model.uniforms,uniforms);dist_default.a.multiUpdate("luma.gl",model.id,[{path:"objects.uniforms",data:uniformsObject},{path:"objects.attributes",data:attributesObject}])}}(this,uniforms),framebuffer&&framebuffer.log({priority:2,message:"Rendered to ".concat(framebuffer.id)}),log.a.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),BaseModel}();__webpack_require__.d(__webpack_exports__,"a",(function(){return model_Model}));var model_Model=function(_BaseModel){function Model(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,Model);var _props$id=props.id,id=void 0===_props$id?Object(utils.c)("model"):_props$id;return Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Model).call(this,gl,Object(objectSpread.a)({},props,{id:id})))}return Object(inherits.a)(Model,_BaseModel),Object(createClass.a)(Model,[{key:"initialize",value:function initialize(props){Object(get.a)(Object(getPrototypeOf.a)(Model.prototype),"initialize",this).call(this,props),this.drawMode=void 0!==props.drawMode?props.drawMode:4,this.vertexCount=props.vertexCount||0,this.geometryBuffers={},this.isInstanced=props.isInstanced||props.instanced,this._setModelProps(props),this.geometry={},Object(assert.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function setProps(props){Object(get.a)(Object(getPrototypeOf.a)(Model.prototype),"setProps",this).call(this,props),this._setModelProps(props)}},{key:"delete",value:function _delete(){Object(get.a)(Object(getPrototypeOf.a)(Model.prototype),"delete",this).call(this),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function getDrawMode(){return this.drawMode}},{key:"getVertexCount",value:function getVertexCount(){return this.vertexCount}},{key:"getInstanceCount",value:function getInstanceCount(){return this.instanceCount}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"setDrawMode",value:function setDrawMode(drawMode){return this.drawMode=drawMode,this}},{key:"setVertexCount",value:function setVertexCount(vertexCount){return Object(assert.a)(Number.isFinite(vertexCount)),this.vertexCount=vertexCount,this}},{key:"setInstanceCount",value:function setInstanceCount(instanceCount){return Object(assert.a)(Number.isFinite(instanceCount)),this.instanceCount=instanceCount,this}},{key:"setGeometry",value:function setGeometry(geometry){return this.drawMode=geometry.drawMode,this.vertexCount=geometry.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function getBuffersFromGeometry(gl,geometry,options){var buffers={},indices=geometry.indices;for(var name in geometry.attributes){var attribute=geometry.attributes[name],remappedName=mapAttributeName(name,options);if("indices"===name)indices=attribute;else if(attribute.constant)buffers[remappedName]=attribute.value;else{var typedArray=attribute.value,accessor=Object(objectSpread.a)({},attribute);delete accessor.value,buffers[remappedName]=[new classes_buffer.a(gl,typedArray),accessor],inferAttributeAccessor(name,accessor)}}if(indices){var data=indices.value||indices;Object(assert.a)(data instanceof Uint16Array||data instanceof Uint32Array,'attribute array for "indices" must be of integer type');var _accessor={size:1,isIndexed:void 0===indices.isIndexed||indices.isIndexed};buffers.indices=[new classes_buffer.a(gl,{data:data,target:34963}),_accessor]}return buffers}(this.gl,geometry),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function setAttributes(){var attributes=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(utils.a)(attributes))return this;var normalizedAttributes={};for(var name in attributes){var attribute=attributes[name];normalizedAttributes[name]=attribute.getValue?attribute.getValue():attribute}return this.vertexArray.setAttributes(normalizedAttributes),this}},{key:"draw",value:function draw(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.drawGeometry(options)}},{key:"transform",value:function transform(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_opts$discard=opts.discard,discard=void 0===_opts$discard||_opts$discard,feedbackBuffers=opts.feedbackBuffers,_opts$unbindModels=opts.unbindModels,unbindModels=void 0===_opts$unbindModels?[]:_opts$unbindModels,parameters=opts.parameters;feedbackBuffers&&this._setFeedbackBuffers(feedbackBuffers),discard&&(parameters=Object.assign({},parameters,Object(defineProperty.a)({},35977,discard))),unbindModels.forEach((function(model){return model.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},opts,{parameters:parameters}))}finally{unbindModels.forEach((function(model){return model.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function render(){var uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return log.a.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(uniforms).draw()}},{key:"_setModelProps",value:function _setModelProps(props){"instanceCount"in props&&(this.instanceCount=props.instanceCount),"geometry"in props&&this.setGeometry(props.geometry),"attributes"in props&&this.setAttributes(props.attributes),"_feedbackBuffers"in props&&this._setFeedbackBuffers(props._feedbackBuffers)}},{key:"_deleteGeometryBuffers",value:function _deleteGeometryBuffers(){for(var name in this.geometryBuffers){var buffer=this.geometryBuffers[name][0]||this.geometryBuffers[name];buffer instanceof classes_buffer.a&&buffer.delete()}}},{key:"_setAnimationProps",value:function _setAnimationProps(animationProps){if(this.animated){Object(assert.a)(animationProps,"Model.draw(): animated uniforms but no animationProps");var animatedUniforms=this._evaluateAnimateUniforms(animationProps);Object.assign(this.uniforms,animatedUniforms)}}},{key:"_setFeedbackBuffers",value:function _setFeedbackBuffers(){var feedbackBuffers=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(utils.a)(feedbackBuffers))return this;var gl=this.program.gl;return this.transformFeedback=this.transformFeedback||new transform_feedback.a(gl,{program:this.program}),this.transformFeedback.setBuffers(feedbackBuffers),this}}]),Model}(base_model_BaseModel)},function(module,__webpack_exports__,__webpack_require__){"use strict";var slicedToArray=__webpack_require__(9),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),hammer=__webpack_require__(199),hammer_default=__webpack_require__.n(hammer),INPUT_START=1,INPUT_MOVE=2,INPUT_END=4,MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END};!function enhancePointerEventInput(PointerEventInput){var oldHandler=PointerEventInput.prototype.handler;PointerEventInput.prototype.handler=function handler(ev){var store=this.store;ev.button>0&&(function some(array,predict){for(var i=0;i<array.length;i++)if(predict(array[i]))return!0;return!1}(store,(function(e){return e.pointerId===ev.pointerId}))||store.push(ev)),oldHandler.call(this,ev)}}(hammer_default.a.PointerEventInput),function enhanceMouseInput(MouseInput){MouseInput.prototype.handler=function handler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];eventType&INPUT_START&&ev.button>=0&&(this.pressed=!0),eventType&INPUT_MOVE&&0===ev.which&&(eventType=INPUT_END),this.pressed&&(eventType&INPUT_END&&(this.pressed=!1),this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:"mouse",srcEvent:ev}))}}(hammer_default.a.MouseInput);var Manager=hammer_default.a.Manager,hammer_browser=hammer_default.a,RECOGNIZERS=hammer_browser?[[hammer_browser.Rotate,{enable:!1}],[hammer_browser.Pinch,{enable:!1}],[hammer_browser.Swipe,{enable:!1}],[hammer_browser.Pan,{threshold:0,enable:!1}],[hammer_browser.Press,{enable:!1}],[hammer_browser.Tap,{event:"doubletap",taps:2,enable:!1}],[hammer_browser.Tap,{event:"anytap",enable:!1}],[hammer_browser.Tap,{enable:!1}]]:null,RECOGNIZER_COMPATIBLE_MAP={rotate:["pinch"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},RECOGNIZER_FALLBACK_MAP={doubletap:["tap"]},BASIC_EVENT_ALIASES={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},INPUT_EVENT_TYPES_KEY_EVENTS=["keydown","keyup"],INPUT_EVENT_TYPES_MOUSE_EVENTS=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],INPUT_EVENT_TYPES_WHEEL_EVENTS=["wheel","mousewheel","DOMMouseScroll"],EVENT_RECOGNIZER_MAP={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},GESTURE_EVENT_ALIASES={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},globals=__webpack_require__(142),firefox=-1!==globals.b.indexOf("firefox"),WHEEL_EVENTS=INPUT_EVENT_TYPES_WHEEL_EVENTS,wheel_input_WheelInput=function(){function WheelInput(element,callback){var _this=this,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(classCallCheck.a)(this,WheelInput),this.element=element,this.callback=callback,this.options=Object.assign({enable:!0},options),this.events=WHEEL_EVENTS.concat(options.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(event){return element.addEventListener(event,_this.handleEvent,!!globals.a&&{passive:!1})}))}return Object(createClass.a)(WheelInput,[{key:"destroy",value:function destroy(){var _this2=this;this.events.forEach((function(event){return _this2.element.removeEventListener(event,_this2.handleEvent)}))}},{key:"enableEventType",value:function enableEventType(eventType,enabled){"wheel"===eventType&&(this.options.enable=enabled)}},{key:"handleEvent",value:function handleEvent(event){if(this.options.enable){var value=event.deltaY;globals.c.WheelEvent&&(firefox&&event.deltaMode===globals.c.WheelEvent.DOM_DELTA_PIXEL&&(value/=globals.c.devicePixelRatio),event.deltaMode===globals.c.WheelEvent.DOM_DELTA_LINE&&(value*=40));var wheelPosition={x:event.clientX,y:event.clientY};0!==value&&value%4.000244140625==0&&(value=Math.floor(value/4.000244140625)),event.shiftKey&&value&&(value*=.25),this._onWheel(event,-value,wheelPosition)}}},{key:"_onWheel",value:function _onWheel(srcEvent,delta,position){this.callback({type:"wheel",center:position,delta:delta,srcEvent:srcEvent,pointerType:"mouse",target:srcEvent.target})}}]),WheelInput}(),MOUSE_EVENTS=INPUT_EVENT_TYPES_MOUSE_EVENTS,move_input_MoveInput=function(){function MoveInput(element,callback){var _this=this,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(classCallCheck.a)(this,MoveInput),this.element=element,this.callback=callback,this.pressed=!1,this.options=Object.assign({enable:!0},options),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=MOUSE_EVENTS.concat(options.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(event){return element.addEventListener(event,_this.handleEvent)}))}return Object(createClass.a)(MoveInput,[{key:"destroy",value:function destroy(){var _this2=this;this.events.forEach((function(event){return _this2.element.removeEventListener(event,_this2.handleEvent)}))}},{key:"enableEventType",value:function enableEventType(eventType,enabled){"pointermove"===eventType&&(this.enableMoveEvent=enabled),"pointerover"===eventType&&(this.enableOverEvent=enabled),"pointerout"===eventType&&(this.enableOutEvent=enabled),"pointerleave"===eventType&&(this.enableLeaveEvent=enabled)}},{key:"handleEvent",value:function handleEvent(event){this.handleOverEvent(event),this.handleOutEvent(event),this.handleLeaveEvent(event),this.handleMoveEvent(event)}},{key:"handleOverEvent",value:function handleOverEvent(event){this.enableOverEvent&&"mouseover"===event.type&&this.callback({type:"pointerover",srcEvent:event,pointerType:"mouse",target:event.target})}},{key:"handleOutEvent",value:function handleOutEvent(event){this.enableOutEvent&&"mouseout"===event.type&&this.callback({type:"pointerout",srcEvent:event,pointerType:"mouse",target:event.target})}},{key:"handleLeaveEvent",value:function handleLeaveEvent(event){this.enableLeaveEvent&&"mouseleave"===event.type&&this.callback({type:"pointerleave",srcEvent:event,pointerType:"mouse",target:event.target})}},{key:"handleMoveEvent",value:function handleMoveEvent(event){if(this.enableMoveEvent)switch(event.type){case"mousedown":event.button>=0&&(this.pressed=!0);break;case"mousemove":0===event.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:event,pointerType:"mouse",target:event.target});break;case"mouseup":this.pressed=!1}}}]),MoveInput}(),KEY_EVENTS=INPUT_EVENT_TYPES_KEY_EVENTS,key_input_KeyInput=function(){function KeyInput(element,callback){var _this=this,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(classCallCheck.a)(this,KeyInput),this.element=element,this.callback=callback,this.options=Object.assign({enable:!0},options),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=KEY_EVENTS.concat(options.events||[]),this.handleEvent=this.handleEvent.bind(this),element.tabIndex=1,element.style.outline="none",this.events.forEach((function(event){return element.addEventListener(event,_this.handleEvent)}))}return Object(createClass.a)(KeyInput,[{key:"destroy",value:function destroy(){var _this2=this;this.events.forEach((function(event){return _this2.element.removeEventListener(event,_this2.handleEvent)}))}},{key:"enableEventType",value:function enableEventType(eventType,enabled){"keydown"===eventType&&(this.enableDownEvent=enabled),"keyup"===eventType&&(this.enableUpEvent=enabled)}},{key:"handleEvent",value:function handleEvent(event){var targetElement=event.target||event.srcElement;"INPUT"===targetElement.tagName&&"text"===targetElement.type||"TEXTAREA"===targetElement.tagName||(this.enableDownEvent&&"keydown"===event.type&&this.callback({type:"keydown",srcEvent:event,key:event.key,target:event.target}),this.enableUpEvent&&"keyup"===event.type&&this.callback({type:"keyup",srcEvent:event,key:event.key,target:event.target}))}}]),KeyInput}(),contextmenu_input_ContextmenuInput=function(){function ContextmenuInput(element,callback){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(classCallCheck.a)(this,ContextmenuInput),this.element=element,this.callback=callback,this.options=Object.assign({enable:!0},options),this.handleEvent=this.handleEvent.bind(this),element.addEventListener("contextmenu",this.handleEvent)}return Object(createClass.a)(ContextmenuInput,[{key:"destroy",value:function destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function enableEventType(eventType,enabled){"contextmenu"===eventType&&(this.options.enable=enabled)}},{key:"handleEvent",value:function handleEvent(event){this.options.enable&&this.callback({type:"contextmenu",center:{x:event.clientX,y:event.clientY},srcEvent:event,pointerType:"mouse",target:event.target})}}]),ContextmenuInput}(),DOWN_EVENT=1,MOVE_EVENT=2,UP_EVENT=4,event_utils_MOUSE_EVENTS={pointerdown:DOWN_EVENT,pointermove:MOVE_EVENT,pointerup:UP_EVENT,mousedown:DOWN_EVENT,mousemove:MOVE_EVENT,mouseup:UP_EVENT},MOUSE_EVENT_WHICH_LEFT=1,MOUSE_EVENT_WHICH_MIDDLE=2,MOUSE_EVENT_WHICH_RIGHT=3,MOUSE_EVENT_BUTTON_LEFT=0,MOUSE_EVENT_BUTTON_MIDDLE=1,MOUSE_EVENT_BUTTON_RIGHT=2,MOUSE_EVENT_BUTTONS_LEFT_MASK=1,MOUSE_EVENT_BUTTONS_RIGHT_MASK=2,MOUSE_EVENT_BUTTONS_MIDDLE_MASK=4;var event_registrar_EventRegistrar=function(){function EventRegistrar(eventManager){Object(classCallCheck.a)(this,EventRegistrar),this.eventManager=eventManager,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this)}return Object(createClass.a)(EventRegistrar,[{key:"isEmpty",value:function isEmpty(){return 0===this.handlers.length}},{key:"add",value:function add(type,handler){var srcElement=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"root",once=arguments.length>3&&void 0!==arguments[3]&&arguments[3],handlers=this.handlers,handlersByElement=this.handlersByElement;handlersByElement.has(srcElement)||handlersByElement.set(srcElement,[]);var entry={type:type,handler:handler,srcElement:srcElement,once:once};handlers.push(entry),handlersByElement.get(srcElement).push(entry)}},{key:"remove",value:function remove(type,handler){for(var handlers=this.handlers,handlersByElement=this.handlersByElement,i=handlers.length-1;i>=0;i--){var entry=handlers[i];if(entry.type===type&&entry.handler===handler){handlers.splice(i,1);var entries=handlersByElement.get(entry.srcElement);entries.splice(entries.indexOf(entry),1),0===entries.length&&handlersByElement.delete(entry.srcElement)}}}},{key:"handleEvent",value:function handleEvent(event){if(!this.isEmpty()){for(var mjolnirEvent=this._normalizeEvent(event),target=event.srcEvent.target;target&&target!==mjolnirEvent.rootElement;){if(this._emit(mjolnirEvent,target),mjolnirEvent.handled)return;target=target.parentNode}this._emit(mjolnirEvent,"root")}}},{key:"_emit",value:function _emit(event,srcElement){var entries=this.handlersByElement.get(srcElement);if(entries){for(var immediatePropagationStopped=!1,stopPropagation=function stopPropagation(){event.handled=!0},stopImmediatePropagation=function stopImmediatePropagation(){event.handled=!0,immediatePropagationStopped=!0},entriesToRemove=[],i=0;i<entries.length;i++){var _entries$i=entries[i],type=_entries$i.type,handler=_entries$i.handler,once=_entries$i.once;if(handler(Object.assign({},event,{type:type,stopPropagation:stopPropagation,stopImmediatePropagation:stopImmediatePropagation})),once&&entriesToRemove.push(entries[i]),immediatePropagationStopped)break}for(var _i=0;_i<entriesToRemove.length;_i++){var _entriesToRemove$_i=entriesToRemove[_i];type=_entriesToRemove$_i.type,handler=_entriesToRemove$_i.handler;this.remove(type,handler)}}}},{key:"_normalizeEvent",value:function _normalizeEvent(event){var rootElement=this.eventManager.element;return Object.assign({},event,function whichButtons(event){var eventType=event_utils_MOUSE_EVENTS[event.srcEvent.type];if(!eventType)return null;var _event$srcEvent=event.srcEvent,buttons=_event$srcEvent.buttons,button=_event$srcEvent.button,which=_event$srcEvent.which,leftButton=!1,middleButton=!1,rightButton=!1;return eventType===UP_EVENT||eventType===MOVE_EVENT&&!Number.isFinite(buttons)?(leftButton=which===MOUSE_EVENT_WHICH_LEFT,middleButton=which===MOUSE_EVENT_WHICH_MIDDLE,rightButton=which===MOUSE_EVENT_WHICH_RIGHT):eventType===MOVE_EVENT?(leftButton=Boolean(buttons&MOUSE_EVENT_BUTTONS_LEFT_MASK),middleButton=Boolean(buttons&MOUSE_EVENT_BUTTONS_MIDDLE_MASK),rightButton=Boolean(buttons&MOUSE_EVENT_BUTTONS_RIGHT_MASK)):eventType===DOWN_EVENT&&(leftButton=button===MOUSE_EVENT_BUTTON_LEFT,middleButton=button===MOUSE_EVENT_BUTTON_MIDDLE,rightButton=button===MOUSE_EVENT_BUTTON_RIGHT),{leftButton:leftButton,middleButton:middleButton,rightButton:rightButton}}(event),function getOffsetPosition(event,rootElement){var srcEvent=event.srcEvent;if(!event.center&&!Number.isFinite(srcEvent.clientX))return null;var center=event.center||{x:srcEvent.clientX,y:srcEvent.clientY},rect=rootElement.getBoundingClientRect(),scaleX=rect.width/rootElement.offsetWidth,scaleY=rect.height/rootElement.offsetHeight;return{center:center,offsetCenter:{x:(center.x-rect.left-rootElement.clientLeft)/scaleX,y:(center.y-rect.top-rootElement.clientTop)/scaleY}}}(event,rootElement),{handled:!1,rootElement:rootElement})}}]),EventRegistrar}(),DEFAULT_OPTIONS={events:null,recognizers:null,recognizerOptions:{},Manager:Manager,touchAction:"none"},event_manager_EventManager=function(){function EventManager(){var element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,EventManager),this.options=Object.assign({},DEFAULT_OPTIONS,options),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(element);var events=options.events;events&&this.on(events)}return Object(createClass.a)(EventManager,[{key:"setElement",value:function setElement(element){var _this=this;if(this.element&&this.destroy(),this.element=element,element){var options=this.options,ManagerClass=options.Manager;for(var recognizerName in this.manager=new ManagerClass(element,{touchAction:options.touchAction,recognizers:options.recognizers||RECOGNIZERS}).on("hammer.input",this._onBasicInput),options.recognizers||Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach((function(name){var recognizer=_this.manager.get(name);recognizer&&RECOGNIZER_COMPATIBLE_MAP[name].forEach((function(otherName){recognizer.recognizeWith(otherName)}))})),options.recognizerOptions){var recognizer=this.manager.get(recognizerName);if(recognizer){var recognizerOption=options.recognizerOptions[recognizerName];delete recognizerOption.enable,recognizer.set(recognizerOption)}}this.wheelInput=new wheel_input_WheelInput(element,this._onOtherEvent,{enable:!1}),this.moveInput=new move_input_MoveInput(element,this._onOtherEvent,{enable:!1}),this.keyInput=new key_input_KeyInput(element,this._onOtherEvent,{enable:!1}),this.contextmenuInput=new contextmenu_input_ContextmenuInput(element,this._onOtherEvent,{enable:!1});var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.events[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=Object(slicedToArray.a)(_step.value,2),eventAlias=_step$value[0],eventRegistrar=_step$value[1];eventRegistrar.isEmpty()||(this._toggleRecognizer(eventRegistrar.recognizerName,!0),this.manager.on(eventAlias,eventRegistrar.handleEvent))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}},{key:"destroy",value:function destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function on(event,handler,srcElement){this._addEventHandler(event,handler,srcElement,!1)}},{key:"once",value:function once(event,handler,srcElement){this._addEventHandler(event,handler,srcElement,!0)}},{key:"off",value:function off(event,handler){this._removeEventHandler(event,handler)}},{key:"_toggleRecognizer",value:function _toggleRecognizer(name,enabled){var manager=this.manager;if(manager){var recognizer=manager.get(name);if(recognizer&&recognizer.options.enable!==enabled){recognizer.set({enable:enabled});var fallbackRecognizers=RECOGNIZER_FALLBACK_MAP[name];fallbackRecognizers&&!this.options.recognizers&&fallbackRecognizers.forEach((function(otherName){var otherRecognizer=manager.get(otherName);enabled?(otherRecognizer.requireFailure(name),recognizer.dropRequireFailure(otherName)):otherRecognizer.dropRequireFailure(name)}))}this.wheelInput.enableEventType(name,enabled),this.moveInput.enableEventType(name,enabled),this.keyInput.enableEventType(name,enabled),this.contextmenuInput.enableEventType(name,enabled)}}},{key:"_addEventHandler",value:function _addEventHandler(event,handler,srcElement,once){if("string"==typeof event){var manager=this.manager,events=this.events,eventAlias=GESTURE_EVENT_ALIASES[event]||event,eventRegistrar=events.get(eventAlias);eventRegistrar||(eventRegistrar=new event_registrar_EventRegistrar(this),events.set(eventAlias,eventRegistrar),eventRegistrar.recognizerName=EVENT_RECOGNIZER_MAP[eventAlias]||eventAlias,manager&&manager.on(eventAlias,eventRegistrar.handleEvent)),this._toggleRecognizer(eventRegistrar.recognizerName,!0),eventRegistrar.add(event,handler,srcElement,once)}else for(var eventName in srcElement=handler,event)this._addEventHandler(eventName,event[eventName],srcElement,once)}},{key:"_removeEventHandler",value:function _removeEventHandler(event,handler){if("string"==typeof event){var events=this.events,eventAlias=GESTURE_EVENT_ALIASES[event]||event,eventRegistrar=events.get(eventAlias);if(eventRegistrar&&(eventRegistrar.remove(event,handler),eventRegistrar.isEmpty())){var recognizerName=eventRegistrar.recognizerName,isRecognizerUsed=!1,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=events.values()[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var eh=_step2.value;if(eh.recognizerName===recognizerName&&!eh.isEmpty()){isRecognizerUsed=!0;break}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}isRecognizerUsed||this._toggleRecognizer(recognizerName,!1)}}else for(var eventName in event)this._removeEventHandler(eventName,event[eventName])}},{key:"_onBasicInput",value:function _onBasicInput(event){var srcEvent=event.srcEvent,alias=BASIC_EVENT_ALIASES[srcEvent.type];alias&&this.manager.emit(alias,event)}},{key:"_onOtherEvent",value:function _onOtherEvent(event){this.manager.emit(event.type,event)}}]),EventManager}();__webpack_require__.d(__webpack_exports__,"a",(function(){return event_manager_EventManager}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(6),setPrototypeOf=__webpack_require__(156);var construct=__webpack_require__(157);function wrapNativeSuper_wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return(wrapNativeSuper_wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return Object(construct.a)(Class,arguments,Object(getPrototypeOf.a)(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),Object(setPrototypeOf.a)(Wrapper,Class)})(Class)}var common=__webpack_require__(21);__webpack_require__.d(__webpack_exports__,"a",(function(){return math_array_MathArray}));var math_array_MathArray=function(_Array){function MathArray(){return Object(classCallCheck.a)(this,MathArray),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(MathArray).apply(this,arguments))}return Object(inherits.a)(MathArray,_Array),Object(createClass.a)(MathArray,[{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"from",value:function from(arrayOrObject){return Array.isArray(arrayOrObject)?this.copy(arrayOrObject):this.fromObject(arrayOrObject)}},{key:"fromArray",value:function fromArray(array){for(var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<this.ELEMENTS;++i)this[i]=array[i+offset];return this.check()}},{key:"to",value:function to(arrayOrObject){return arrayOrObject===this?this:Object(common.f)(arrayOrObject)?this.toArray(arrayOrObject):this.toObject(arrayOrObject)}},{key:"toTarget",value:function toTarget(target){return target?this.to(target):this}},{key:"toArray",value:function toArray(){for(var array=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<this.ELEMENTS;++i)array[offset+i]=this[i];return array}},{key:"toFloat32Array",value:function toFloat32Array(){return new Float32Array(this)}},{key:"toString",value:function toString(){return this.formatString(common.b)}},{key:"formatString",value:function formatString(opts){for(var string="",i=0;i<this.ELEMENTS;++i)string+=(i>0?", ":"")+Object(common.e)(this[i],opts);return"".concat(opts.printTypes?this.constructor.name:"","[").concat(string,"]")}},{key:"equals",value:function equals(array){if(!array||this.length!==array.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(!Object(common.d)(this[i],array[i]))return!1;return!0}},{key:"exactEquals",value:function exactEquals(array){if(!array||this.length!==array.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(this[i]!==array[i])return!1;return!0}},{key:"negate",value:function negate(){for(var i=0;i<this.ELEMENTS;++i)this[i]=-this[i];return this.check()}},{key:"lerp",value:function lerp(a,b,t){void 0===t&&(t=b,b=a,a=this);for(var i=0;i<this.ELEMENTS;++i){var ai=a[i];this[i]=ai+t*(b[i]-ai)}return this.check()}},{key:"min",value:function min(vector){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(vector[i],this[i]);return this.check()}},{key:"max",value:function max(vector){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.max(vector[i],this[i]);return this.check()}},{key:"clamp",value:function clamp(minVector,maxVector){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],minVector[i]),maxVector[i]);return this.check()}},{key:"add",value:function add(){for(var _len=arguments.length,vectors=new Array(_len),_key=0;_key<_len;_key++)vectors[_key]=arguments[_key];for(var _i=0,_vectors=vectors;_i<_vectors.length;_i++)for(var vector=_vectors[_i],i=0;i<this.ELEMENTS;++i)this[i]+=vector[i];return this.check()}},{key:"subtract",value:function subtract(){for(var _len2=arguments.length,vectors=new Array(_len2),_key2=0;_key2<_len2;_key2++)vectors[_key2]=arguments[_key2];for(var _i2=0,_vectors2=vectors;_i2<_vectors2.length;_i2++)for(var vector=_vectors2[_i2],i=0;i<this.ELEMENTS;++i)this[i]-=vector[i];return this.check()}},{key:"scale",value:function scale(_scale){if(Array.isArray(_scale))return this.multiply(_scale);for(var i=0;i<this.ELEMENTS;++i)this[i]*=_scale;return this.check()}},{key:"sub",value:function sub(a){return this.subtract(a)}},{key:"setScalar",value:function setScalar(a){for(var i=0;i<this.ELEMENTS;++i)this[i]=a;return this.check()}},{key:"addScalar",value:function addScalar(a){for(var i=0;i<this.ELEMENTS;++i)this[i]+=a;return this.check()}},{key:"subScalar",value:function subScalar(a){return this.addScalar(-a)}},{key:"multiplyScalar",value:function multiplyScalar(scalar){for(var i=0;i<this.ELEMENTS;++i)this[i]*=scalar;return this.check()}},{key:"divideScalar",value:function divideScalar(a){return this.scale(1/a)}},{key:"clampScalar",value:function clampScalar(min,max){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],min),max);return this.check()}},{key:"multiplyByScalar",value:function multiplyByScalar(scalar){return this.scale(scalar)}},{key:"check",value:function check(){if(common.b.debug&&!this.validate(this))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function validate(){for(var valid=this.length===this.ELEMENTS,i=0;i<this.ELEMENTS;++i)valid=valid&&Number.isFinite(this[i]);return valid}},{key:"elements",get:function get(){return this}}]),MathArray}(wrapNativeSuper_wrapNativeSuper(Array))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"a",(function(){return trackContextState})),__webpack_require__.d(__webpack_exports__,"c",(function(){return pushContextState})),__webpack_require__.d(__webpack_exports__,"b",(function(){return popContextState}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_webgl_function_to_parameters_table__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(311),_unified_parameter_api_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(68),_unified_parameter_api_unified_parameter_api__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(194),_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(167),_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(310);function installGetterOverride(gl,functionName){var originalGetterFunc=gl[functionName].bind(gl);gl[functionName]=function get(){var pname=arguments.length<=0?void 0:arguments[0];return pname in gl.state.cache||(gl.state.cache[pname]=originalGetterFunc.apply(void 0,arguments)),gl.state.enable?gl.state.cache[pname]:originalGetterFunc.apply(void 0,arguments)},Object.defineProperty(gl[functionName],"name",{value:"".concat(functionName,"-from-cache"),configurable:!1})}function installSetterSpy(gl,functionName,setter){var originalSetterFunc=gl[functionName].bind(gl);gl[functionName]=function set(){for(var _len=arguments.length,params=new Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];var _gl$state,_setter=setter.apply(void 0,[gl.state._updateCache].concat(params)),valueChanged=_setter.valueChanged,oldValue=_setter.oldValue;valueChanged&&((_gl$state=gl.state).log.apply(_gl$state,["gl.".concat(functionName)].concat(params)),originalSetterFunc.apply(void 0,params));return oldValue},Object.defineProperty(gl[functionName],"name",{value:"".concat(functionName,"-to-cache"),configurable:!1})}var GLState=function(){function GLState(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$copyState=_ref.copyState,copyState=void 0!==_ref$copyState&&_ref$copyState,_ref$log=_ref.log,log=void 0===_ref$log?function(){}:_ref$log;Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,GLState),this.gl=gl,this.stateStack=[],this.enable=!0,this.cache=copyState?Object(_unified_parameter_api_unified_parameter_api__WEBPACK_IMPORTED_MODULE_4__.a)(gl):Object.assign({},_unified_parameter_api_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_3__.b),this.log=log,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(GLState,[{key:"push",value:function push(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function pop(){Object(_utils__WEBPACK_IMPORTED_MODULE_5__.a)(this.stateStack.length>0);var oldValues=this.stateStack[this.stateStack.length-1];Object(_unified_parameter_api_unified_parameter_api__WEBPACK_IMPORTED_MODULE_4__.c)(this.gl,oldValues,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function _updateCache(values){var oldValue,valueChanged=!1,oldValues=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var key in values)Object(_utils__WEBPACK_IMPORTED_MODULE_5__.a)(void 0!==key),Object(_utils__WEBPACK_IMPORTED_MODULE_6__.a)(values[key],this.cache[key])||(valueChanged=!0,oldValue=this.cache[key],!oldValues||key in oldValues||(oldValues[key]=this.cache[key]),this.cache[key]=values[key]);return{valueChanged:valueChanged,oldValue:oldValue}}}]),GLState}();function trackContextState(gl){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$enable=_ref2.enable,enable=void 0===_ref2$enable||_ref2$enable,copyState=_ref2.copyState;if(Object(_utils__WEBPACK_IMPORTED_MODULE_5__.a)(void 0!==copyState),!gl.state){var global_=void 0!==global?global:window;for(var key in global_.polyfillContext&&global_.polyfillContext(gl),gl.state=new GLState(gl,{copyState:copyState,enable:enable}),_webgl_function_to_parameters_table__WEBPACK_IMPORTED_MODULE_2__.a){installSetterSpy(gl,key,_webgl_function_to_parameters_table__WEBPACK_IMPORTED_MODULE_2__.a[key])}installGetterOverride(gl,"getParameter"),installGetterOverride(gl,"isEnabled")}return gl.state.enable=enable,gl}function pushContextState(gl){gl.state||trackContextState(gl,{copyState:!1}),gl.state.push()}function popContextState(gl){Object(_utils__WEBPACK_IMPORTED_MODULE_5__.a)(gl.state),gl.state.pop()}}).call(this,__webpack_require__(36))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return clear})),__webpack_require__.d(__webpack_exports__,"b",(function(){return clearBuffer}));var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(114),_webgl_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(39),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(17),GL_DEPTH_BUFFER_BIT=256,GL_STENCIL_BUFFER_BIT=1024,GL_COLOR_BUFFER_BIT=16384,GL_COLOR=6144,GL_DEPTH=6145,GL_STENCIL=6146,GL_DEPTH_STENCIL=34041,ERR_ARGUMENTS="clear: bad arguments";function clear(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$framebuffer=_ref.framebuffer,framebuffer=void 0===_ref$framebuffer?null:_ref$framebuffer,_ref$color=_ref.color,color=void 0===_ref$color?null:_ref$color,_ref$depth=_ref.depth,depth=void 0===_ref$depth?null:_ref$depth,_ref$stencil=_ref.stencil,stencil=void 0===_ref$stencil?null:_ref$stencil,parameters={};framebuffer&&(parameters.framebuffer=framebuffer);var clearFlags=0;color&&(clearFlags|=GL_COLOR_BUFFER_BIT,!0!==color&&(parameters.clearColor=color)),depth&&(clearFlags|=GL_DEPTH_BUFFER_BIT,!0!==depth&&(parameters.clearDepth=depth)),stencil&&(clearFlags|=GL_STENCIL_BUFFER_BIT,!0!==depth&&(parameters.clearStencil=depth)),Object(_utils__WEBPACK_IMPORTED_MODULE_3__.a)(0!==clearFlags,ERR_ARGUMENTS),Object(_context__WEBPACK_IMPORTED_MODULE_1__.a)(gl,parameters,(function(){gl.clear(clearFlags)}))}function clearBuffer(gl){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$framebuffer=_ref2.framebuffer,framebuffer=void 0===_ref2$framebuffer?null:_ref2$framebuffer,_ref2$buffer=_ref2.buffer,buffer=void 0===_ref2$buffer?GL_COLOR:_ref2$buffer,_ref2$drawBuffer=_ref2.drawBuffer,drawBuffer=void 0===_ref2$drawBuffer?0:_ref2$drawBuffer,_ref2$value=_ref2.value,value=void 0===_ref2$value?[0,0,0,0]:_ref2$value;Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_2__.a)(gl),Object(_context__WEBPACK_IMPORTED_MODULE_1__.a)(gl,{framebuffer:framebuffer},(function(){switch(buffer){case GL_COLOR:switch(value.constructor){case Int32Array:gl.clearBufferiv(buffer,drawBuffer,value);break;case Uint32Array:gl.clearBufferuiv(buffer,drawBuffer,value);break;case Float32Array:default:gl.clearBufferfv(buffer,drawBuffer,value)}break;case GL_DEPTH:gl.clearBufferfv(GL_DEPTH,0,[value]);break;case GL_STENCIL:gl.clearBufferiv(GL_STENCIL,0,[value]);break;case GL_DEPTH_STENCIL:var _value=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(value,2),depth=_value[0],stencil=_value[1];gl.clearBufferfi(GL_DEPTH_STENCIL,0,depth,stencil);break;default:Object(_utils__WEBPACK_IMPORTED_MODULE_3__.a)(!1,ERR_ARGUMENTS)}}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process,global){__webpack_require__.d(__webpack_exports__,"a",(function(){return isBrowser})),__webpack_require__.d(__webpack_exports__,"b",(function(){return nodeVersion}));var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),isBrowser="object"!==(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))||"[object process]"!==String(process)||process.browser,matches=("undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof document&&document,void 0!==process&&process.version&&process.version.match(/v([0-9]*)/)),nodeVersion=matches&&parseFloat(matches[1])||0}).call(this,__webpack_require__(72),__webpack_require__(36))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"a",(function(){return Mapbox}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_utils_globals__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(67);var propTypes={container:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object,gl:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object,mapboxApiAccessToken:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,mapboxApiUrl:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,attributionControl:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,preserveDrawingBuffer:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,reuseMaps:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,transformRequest:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,mapOptions:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object,mapStyle:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object]),visible:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,asyncRender:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,onLoad:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,onError:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,width:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,height:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,viewState:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object,longitude:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,latitude:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,zoom:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,bearing:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,pitch:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,altitude:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number},defaultProps={container:_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.body,mapboxApiAccessToken:function getAccessToken(){var accessToken=null;if("undefined"!=typeof window&&window.location){var match=window.location.search.match(/access_token=([^&\/]*)/);accessToken=match&&match[1]}accessToken||void 0===process||(accessToken=accessToken||"pk.eyJ1IjoiaWx5YWJvLXRlcmFseXRpY3MiLCJhIjoiY2ppaW9wYzJ1MW8weTN2bnJkOHdsbTQ3dSJ9.VP2-bMLHPnmvqxkia-rM3g");return accessToken||"no-token"}(),mapboxApiUrl:"https://api.mapbox.com",preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"mapbox://styles/mapbox/light-v8",visible:!0,asyncRender:!1,onLoad:function noop(){},onError:function defaultOnError(event){event&&console.error(event.error)},width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0};function checkPropTypes(props){var component=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";props.debug&&prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.checkPropTypes(propTypes,props,"prop",component)}var Mapbox=function(){function Mapbox(props){var _this=this;if(Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Mapbox),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"mapboxgl",void 0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"props",defaultProps),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"_map",null),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"width",0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"height",0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"_fireLoadEvent",(function(){_this.props.onLoad({type:"load",target:_this._map})})),!props.mapboxgl)throw new Error("Mapbox not available");this.mapboxgl=props.mapboxgl,Mapbox.initialized||(Mapbox.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(props)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Mapbox,[{key:"finalize",value:function finalize(){return this._destroy(),this}},{key:"setProps",value:function setProps(props){return this._update(this.props,props),this}},{key:"resize",value:function resize(){return this._map.resize(),this}},{key:"redraw",value:function redraw(){var map=this._map;map.style&&(map._frame&&(map._frame.cancel(),map._frame=null),map._render())}},{key:"getMap",value:function getMap(){return this._map}},{key:"_reuse",value:function _reuse(props){this._map=Mapbox.savedMap;var oldContainer=this._map.getContainer(),newContainer=props.container;for(newContainer.classList.add("mapboxgl-map");oldContainer.childNodes.length>0;)newContainer.appendChild(oldContainer.childNodes[0]);this._map._container=newContainer,Mapbox.savedMap=null,props.mapStyle&&this._map.setStyle(props.mapStyle,{diff:!1}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function _create(props){if(props.reuseMaps&&Mapbox.savedMap)this._reuse(props);else{if(props.gl){var getContext=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=getContext,props.gl}}var mapOptions={container:props.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:props.mapStyle,interactive:!1,trackResize:!1,attributionControl:props.attributionControl,preserveDrawingBuffer:props.preserveDrawingBuffer};props.transformRequest&&(mapOptions.transformRequest=props.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},mapOptions,props.mapOptions)),this._map.once("load",props.onLoad),this._map.on("error",props.onError)}return this}},{key:"_destroy",value:function _destroy(){this._map&&(Mapbox.savedMap?this._map.remove():(Mapbox.savedMap=this._map,this._map.off("load",this.props.onLoad),this._map.off("error",this.props.onError),this._map.off("styledata",this._fireLoadEvent)),this._map=null)}},{key:"_initialize",value:function _initialize(props){var _this2=this;checkPropTypes(props=Object.assign({},defaultProps,props),"Mapbox"),this.mapboxgl.accessToken=props.mapboxApiAccessToken||defaultProps.mapboxApiAccessToken,this.mapboxgl.baseApiUrl=props.mapboxApiUrl,this._create(props);var container=props.container;Object.defineProperty(container,"offsetWidth",{get:function get(){return _this2.width}}),Object.defineProperty(container,"clientWidth",{get:function get(){return _this2.width}}),Object.defineProperty(container,"offsetHeight",{get:function get(){return _this2.height}}),Object.defineProperty(container,"clientHeight",{get:function get(){return _this2.height}});var canvas=this._map.getCanvas();canvas&&(canvas.style.outline="none"),this._updateMapViewport({},props),this._updateMapSize({},props),this.props=props}},{key:"_update",value:function _update(oldProps,newProps){if(this._map){checkPropTypes(newProps=Object.assign({},this.props,newProps),"Mapbox");var viewportChanged=this._updateMapViewport(oldProps,newProps),sizeChanged=this._updateMapSize(oldProps,newProps);newProps.asyncRender||!viewportChanged&&!sizeChanged||this.redraw(),this.props=newProps}}},{key:"_updateMapSize",value:function _updateMapSize(oldProps,newProps){var sizeChanged=oldProps.width!==newProps.width||oldProps.height!==newProps.height;return sizeChanged&&(this.width=newProps.width,this.height=newProps.height,this.resize()),sizeChanged}},{key:"_updateMapViewport",value:function _updateMapViewport(oldProps,newProps){var oldViewState=this._getViewState(oldProps),newViewState=this._getViewState(newProps),viewportChanged=newViewState.latitude!==oldViewState.latitude||newViewState.longitude!==oldViewState.longitude||newViewState.zoom!==oldViewState.zoom||newViewState.pitch!==oldViewState.pitch||newViewState.bearing!==oldViewState.bearing||newViewState.altitude!==oldViewState.altitude;return viewportChanged&&(this._map.jumpTo(this._viewStateToMapboxProps(newViewState)),newViewState.altitude!==oldViewState.altitude&&(this._map.transform.altitude=newViewState.altitude)),viewportChanged}},{key:"_getViewState",value:function _getViewState(props){var _ref=props.viewState||props,longitude=_ref.longitude,latitude=_ref.latitude,zoom=_ref.zoom,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?0:_ref$pitch,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?0:_ref$bearing,_ref$altitude=_ref.altitude;return{longitude:longitude,latitude:latitude,zoom:zoom,pitch:pitch,bearing:bearing,altitude:void 0===_ref$altitude?1.5:_ref$altitude}}},{key:"_checkStyleSheet",value:function _checkStyleSheet(){var mapboxVersion=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.47.0";if(void 0!==_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a)try{var testElement=_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.createElement("div");testElement.className="mapboxgl-map",testElement.style.display="none",_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.body.append(testElement);var isCssLoaded="static"!==window.getComputedStyle(testElement).position;if(!isCssLoaded){var link=_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.createElement("link");link.setAttribute("rel","stylesheet"),link.setAttribute("type","text/css"),link.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(mapboxVersion,"/mapbox-gl.css")),_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.head.append(link)}}catch(error){}}},{key:"_viewStateToMapboxProps",value:function _viewStateToMapboxProps(viewState){return{center:[viewState.longitude,viewState.latitude],zoom:viewState.zoom,bearing:viewState.bearing,pitch:viewState.pitch}}}]),Mapbox}();Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(Mapbox,"initialized",!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(Mapbox,"propTypes",propTypes),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(Mapbox,"defaultProps",defaultProps),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(Mapbox,"savedMap",null)}).call(this,__webpack_require__(72))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process,global){__webpack_require__.d(__webpack_exports__,"a",(function(){return global_}));var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),globals=("object"!==(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))||"[object process]"!==String(process)||process.browser,{self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global&&global}),global_=globals.global||globals.self||globals.window}).call(this,__webpack_require__(72),__webpack_require__(36))},,,function(module,exports){!function(global){"use strict";var undefined,Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag",inModule="object"==typeof module,runtime=global.regeneratorRuntime;if(runtime)inModule&&(module.exports=runtime);else{(runtime=global.regeneratorRuntime=inModule?module.exports:{}).wrap=wrap;var GenStateSuspendedStart="suspendedStart",GenStateSuspendedYield="suspendedYield",GenStateExecuting="executing",GenStateCompleted="completed",ContinueSentinel={},IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction",runtime.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},runtime.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,toStringTagSymbol in genFun||(genFun[toStringTagSymbol]="GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},runtime.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},runtime.AsyncIterator=AsyncIterator,runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),Gp[toStringTagSymbol]="Generator",Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},runtime.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},runtime.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel}}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting)throw new Error("Generator is already running");if(state===GenStateCompleted){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if(state===GenStateSuspendedStart)throw state=GenStateCompleted,context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?GenStateCompleted:GenStateSuspendedYield,record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state=GenStateCompleted,context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){prototype[method]=function(arg){return this._invoke(method,arg)}}))}function AsyncIterator(generator){var previousPromise;this._invoke=function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise((function(resolve,reject){!function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?Promise.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):Promise.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(module,exports,__webpack_require__){"use strict";var slice=Array.prototype.slice,isArgs=__webpack_require__(320),origKeys=Object.keys,keysShim=origKeys?function keys(o){return origKeys(o)}:__webpack_require__(468),originalKeys=Object.keys;keysShim.shim=function shimObjectKeys(){Object.keys?function(){var args=Object.keys(arguments);return args&&args.length===arguments.length}(1,2)||(Object.keys=function keys(object){return isArgs(object)?originalKeys(slice.call(object)):originalKeys(object)}):Object.keys=keysShim;return Object.keys||keysShim},module.exports=keysShim},function(module,exports,__webpack_require__){var hasMap="function"==typeof Map&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&"function"==typeof mapSizeDescriptor.get?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet="function"==typeof Set&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&"function"==typeof setSizeDescriptor.get?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,bigIntValueOf="function"==typeof BigInt?BigInt.prototype.valueOf:null,inspectCustom=__webpack_require__(481).custom,inspectSymbol=inspectCustom&&isSymbol(inspectCustom)?inspectCustom:null;function wrapQuotes(s,defaultStyle,opts){var quoteChar="double"===(opts.quoteStyle||defaultStyle)?'"':"'";return quoteChar+s+quoteChar}function quote(s){return String(s).replace(/"/g,"&quot;")}function isArray(obj){return"[object Array]"===toStr(obj)}function isSymbol(obj){return"[object Symbol]"===toStr(obj)}module.exports=function inspect_(obj,opts,depth,seen){if(opts||(opts={}),has(opts,"quoteStyle")&&"single"!==opts.quoteStyle&&"double"!==opts.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(void 0===obj)return"undefined";if(null===obj)return"null";if("boolean"==typeof obj)return obj?"true":"false";if("string"==typeof obj)return function inspectString(str,opts){return wrapQuotes(str.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,lowbyte),"single",opts)}(obj,opts);if("number"==typeof obj)return 0===obj?1/0/obj>0?"0":"-0":String(obj);if("bigint"==typeof obj)return String(obj)+"n";var maxDepth=void 0===opts.depth?5:opts.depth;if(void 0===depth&&(depth=0),depth>=maxDepth&&maxDepth>0&&"object"==typeof obj)return"[Object]";if(void 0===seen)seen=[];else if(function indexOf(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}(seen,obj)>=0)return"[Circular]";function inspect(value,from){return from&&(seen=seen.slice()).push(from),inspect_(value,opts,depth+1,seen)}if("function"==typeof obj){var name=function nameOf(f){if(f.name)return f.name;var m=String(f).match(/^function\s*([\w$]+)/);if(m)return m[1]}(obj);return"[Function"+(name?": "+name:"")+"]"}if(isSymbol(obj)){var symString=Symbol.prototype.toString.call(obj);return"object"==typeof obj?markBoxed(symString):symString}if(function isElement(x){if(!x||"object"!=typeof x)return!1;if("undefined"!=typeof HTMLElement&&x instanceof HTMLElement)return!0;return"string"==typeof x.nodeName&&"function"==typeof x.getAttribute}(obj)){for(var s="<"+String(obj.nodeName).toLowerCase(),attrs=obj.attributes||[],i=0;i<attrs.length;i++)s+=" "+attrs[i].name+"="+wrapQuotes(quote(attrs[i].value),"double",opts);return s+=">",obj.childNodes&&obj.childNodes.length&&(s+="..."),s+="</"+String(obj.nodeName).toLowerCase()+">"}if(isArray(obj))return 0===obj.length?"[]":"[ "+arrObjKeys(obj,inspect).join(", ")+" ]";if(function isError(obj){return"[object Error]"===toStr(obj)}(obj))return 0===(parts=arrObjKeys(obj,inspect)).length?"["+String(obj)+"]":"{ ["+String(obj)+"] "+parts.join(", ")+" }";if("object"==typeof obj){if(inspectSymbol&&"function"==typeof obj[inspectSymbol])return obj[inspectSymbol]();if("function"==typeof obj.inspect)return obj.inspect()}if(function isMap(x){if(!mapSize)return!1;try{mapSize.call(x);try{setSize.call(x)}catch(s){return!0}return x instanceof Map}catch(e){}return!1}(obj)){var parts=[];return mapForEach.call(obj,(function(value,key){parts.push(inspect(key,obj)+" => "+inspect(value,obj))})),collectionOf("Map",mapSize.call(obj),parts)}if(function isSet(x){if(!setSize)return!1;try{setSize.call(x);try{mapSize.call(x)}catch(m){return!0}return x instanceof Set}catch(e){}return!1}(obj)){parts=[];return setForEach.call(obj,(function(value){parts.push(inspect(value,obj))})),collectionOf("Set",setSize.call(obj),parts)}if(function isNumber(obj){return"[object Number]"===toStr(obj)}(obj))return markBoxed(inspect(Number(obj)));if(function isBigInt(obj){return"[object BigInt]"===toStr(obj)}(obj))return markBoxed(inspect(bigIntValueOf.call(obj)));if(function isBoolean(obj){return"[object Boolean]"===toStr(obj)}(obj))return markBoxed(booleanValueOf.call(obj));if(function isString(obj){return"[object String]"===toStr(obj)}(obj))return markBoxed(inspect(String(obj)));if(!function isDate(obj){return"[object Date]"===toStr(obj)}(obj)&&!function isRegExp(obj){return"[object RegExp]"===toStr(obj)}(obj)){var xs=arrObjKeys(obj,inspect);return 0===xs.length?"{}":"{ "+xs.join(", ")+" }"}return String(obj)};var hasOwn=Object.prototype.hasOwnProperty||function(key){return key in this};function has(obj,key){return hasOwn.call(obj,key)}function toStr(obj){return objectToString.call(obj)}function lowbyte(c){var n=c.charCodeAt(0),x={8:"b",9:"t",10:"n",12:"f",13:"r"}[n];return x?"\\"+x:"\\x"+(n<16?"0":"")+n.toString(16)}function markBoxed(str){return"Object("+str+")"}function collectionOf(type,size,entries){return type+" ("+size+") {"+entries.join(", ")+"}"}function arrObjKeys(obj,inspect){var isArr=isArray(obj),xs=[];if(isArr){xs.length=obj.length;for(var i=0;i<obj.length;i++)xs[i]=has(obj,i)?inspect(obj[i],obj):""}for(var key in obj)has(obj,key)&&(isArr&&String(Number(key))===key&&key<obj.length||(/[^\w$]/.test(key)?xs.push(inspect(key,obj)+": "+inspect(obj[key],obj)):xs.push(key+": "+inspect(obj[key],obj))));return xs}},function(module,exports,__webpack_require__){"use strict";module.exports=Number.isNaN||function isNaN(a){return a!=a}},function(module,exports,__webpack_require__){"use strict";module.exports=function forEach(array,callback){for(var i=0;i<array.length;i+=1)callback(array[i],i,array)}},function(module,exports,__webpack_require__){"use strict";module.exports=function every(array,predicate){for(var i=0;i<array.length;i+=1)if(!predicate(array[i],i,array))return!1;return!0}},function(module,exports,__webpack_require__){"use strict";module.exports=function requirePromise(){if("function"!=typeof Promise)throw new TypeError("`Promise.prototype.finally` requires a global `Promise` be available.")}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(44),keys=__webpack_require__(266),inspect=__webpack_require__(267),ES2017=__webpack_require__(508),assign=__webpack_require__(169),forEach=__webpack_require__(269),callBind=__webpack_require__(205),every=__webpack_require__(270),isPrefixOf=__webpack_require__(336),$String=GetIntrinsic("%String%"),$TypeError=GetIntrinsic("%TypeError%"),callBound=__webpack_require__(117),regexTester=__webpack_require__(331),$isNaN=__webpack_require__(268),$SymbolValueOf=callBound("Symbol.prototype.valueOf",!0),$strSlice=callBound("String.prototype.slice"),$indexOf=callBound("String.prototype.indexOf"),$parseInt=parseInt,isDigit=regexTester(/^[0-9]$/),$PromiseResolve=callBound("Promise.resolve",!0),$isEnumerable=callBound("Object.prototype.propertyIsEnumerable"),$pushApply=callBind.apply(GetIntrinsic("%Array.prototype.push%")),$gOPS=$SymbolValueOf?GetIntrinsic("%Object.getOwnPropertySymbols%"):null,padTimeComponent=function padTimeComponent(c,count){return $strSlice("00"+c,-(count||2))},weekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ES2018=assign(assign({},ES2017),{EnumerableOwnPropertyNames:ES2017.EnumerableOwnProperties,thisSymbolValue:function thisSymbolValue(value){if(!$SymbolValueOf)throw new SyntaxError("Symbols are not supported; thisSymbolValue requires that `value` be a Symbol or a Symbol object");return"Symbol"===this.Type(value)?value:$SymbolValueOf(value)},IsStringPrefix:function IsStringPrefix(p,q){if("String"!==this.Type(p))throw new TypeError('Assertion failed: "p" must be a String');if("String"!==this.Type(q))throw new TypeError('Assertion failed: "q" must be a String');return isPrefixOf(p,q)},NumberToString:function NumberToString(m){if("Number"!==this.Type(m))throw new TypeError('Assertion failed: "m" must be a String');return $String(m)},CopyDataProperties:function CopyDataProperties(target,source,excludedItems){if("Object"!==this.Type(target))throw new TypeError('Assertion failed: "target" must be an Object');if(!this.IsArray(excludedItems))throw new TypeError('Assertion failed: "excludedItems" must be a List of Property Keys');for(var i=0;i<excludedItems.length;i+=1)if(!this.IsPropertyKey(excludedItems[i]))throw new TypeError('Assertion failed: "excludedItems" must be a List of Property Keys');if(null==source)return target;var ES=this,fromObj=ES.ToObject(source),sourceKeys=function OwnPropertyKeys(ES,source){var ownKeys=keys(source);return $gOPS&&$pushApply(ownKeys,$gOPS(source)),ownKeys}(0,fromObj);return forEach(sourceKeys,(function(nextKey){var excluded=!1;forEach(excludedItems,(function(e){!0===ES.SameValue(e,nextKey)&&(excluded=!0)}));var enumerable=$isEnumerable(fromObj,nextKey)||"string"==typeof source&&nextKey>=0&&ES.IsInteger(ES.ToNumber(nextKey));if(!1===excluded&&enumerable){var propValue=ES.Get(fromObj,nextKey);ES.CreateDataProperty(target,nextKey,propValue)}})),target},PromiseResolve:function PromiseResolve(C,x){if(!$PromiseResolve)throw new SyntaxError("This environment does not support Promises.");return $PromiseResolve(C,x)},GetSubstitution:function GetSubstitution(matched,str,position,captures,namedCaptures,replacement){if("String"!==this.Type(matched))throw new $TypeError("Assertion failed: `matched` must be a String");var matchLength=matched.length;if("String"!==this.Type(str))throw new $TypeError("Assertion failed: `str` must be a String");var stringLength=str.length;if(!this.IsInteger(position)||position<0||position>stringLength)throw new $TypeError("Assertion failed: `position` must be a nonnegative integer, and less than or equal to the length of `string`, got "+inspect(position));var ES=this;if(!this.IsArray(captures)||!every(captures,(function(capture,index,arr){return"String"===ES.Type(capture)||!(index in arr)})))throw new $TypeError("Assertion failed: `captures` must be a List of Strings, got "+inspect(captures));if("String"!==this.Type(replacement))throw new $TypeError("Assertion failed: `replacement` must be a String");var tailPos=position+matchLength,m=captures.length;"Undefined"!==this.Type(namedCaptures)&&(namedCaptures=this.ToObject(namedCaptures));for(var result="",i=0;i<replacement.length;i+=1){var current=replacement[i],isLast=i+1>=replacement.length,nextIsLast=i+2>=replacement.length;if("$"!==current||isLast)result+=replacement[i];else{var next=replacement[i+1];if("$"===next)result+="$",i+=1;else if("&"===next)result+=matched,i+=1;else if("`"===next)result+=0===position?"":$strSlice(str,0,position-1),i+=1;else if("'"===next)result+=tailPos>=stringLength?"":$strSlice(str,tailPos),i+=1;else{var nextNext=nextIsLast?null:replacement[i+2];if(!isDigit(next)||"0"===next||!nextIsLast&&isDigit(nextNext))if(isDigit(next)&&(nextIsLast||isDigit(nextNext))){var nn=next+nextNext,nnI=$parseInt(nn,10)-1;result+=nn<=m&&"Undefined"===this.Type(captures[nnI])?"":captures[nnI],i+=2}else if("<"===next)if("Undefined"===this.Type(namedCaptures))result+="$<",i+=2;else{var endIndex=$indexOf(replacement,">",i);if(endIndex>-1){var groupName=$strSlice(replacement,i,endIndex),capture=this.Get(namedCaptures,groupName);"Undefined"!==this.Type(capture)&&(result+=this.ToString(capture)),i+="$<"+groupName+">".length}}else result+="$";else{var n=$parseInt(next,10);result+=n<=m&&"Undefined"===this.Type(captures[n-1])?"":captures[n-1],i+=1}}}}return result},DateString:function DateString(tv){if("Number"!==this.Type(tv)||$isNaN(tv))throw new $TypeError("Assertion failed: `tv` must be a non-NaN Number");return weekdays[this.WeekDay(tv)]+" "+months[this.MonthFromTime(tv)]+" "+padTimeComponent(this.DateFromTime(tv))+" "+padTimeComponent(this.YearFromTime(tv),4)},TimeString:function TimeString(tv){if("Number"!==this.Type(tv)||$isNaN(tv))throw new $TypeError("Assertion failed: `tv` must be a non-NaN Number");var hour=this.HourFromTime(tv),minute=this.MinFromTime(tv),second=this.SecFromTime(tv);return padTimeComponent(hour)+":"+padTimeComponent(minute)+":"+padTimeComponent(second)+" GMT"}});delete ES2018.EnumerableOwnProperties,delete ES2018.IsPropertyDescriptor,module.exports=ES2018},function(module,exports,__webpack_require__){"use strict";module.exports=function requirePromise(){if("function"!=typeof Promise)throw new TypeError("`Promise.allSettled` requires a global `Promise` be available.");if("function"!=typeof Array.from)throw new TypeError("`Promise.allSettled` requires `Array.from` be available.")}},function(module,exports,__webpack_require__){var global=__webpack_require__(29),isObject=__webpack_require__(40),document=global.document,EXISTS=isObject(document)&&isObject(document.createElement);module.exports=function(it){return EXISTS?document.createElement(it):{}}},function(module,exports,__webpack_require__){var global=__webpack_require__(29),createNonEnumerableProperty=__webpack_require__(74);module.exports=function(key,value){try{createNonEnumerableProperty(global,key,value)}catch(error){global[key]=value}return value}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(29)},function(module,exports,__webpack_require__){var toIndexedObject=__webpack_require__(97),toLength=__webpack_require__(76),toAbsoluteIndex=__webpack_require__(351),createMethod=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIndexedObject($this),length=toLength(O.length),index=toAbsoluteIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if((value=O[index++])!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}};module.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},function(module,exports){module.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(module,exports){exports.f=Object.getOwnPropertySymbols},function(module,exports,__webpack_require__){"use strict";var toPrimitive=__webpack_require__(172),definePropertyModule=__webpack_require__(61),createPropertyDescriptor=__webpack_require__(171);module.exports=function(object,key,value){var propertyKey=toPrimitive(key);propertyKey in object?definePropertyModule.f(object,propertyKey,createPropertyDescriptor(0,value)):object[propertyKey]=value}},function(module,exports,__webpack_require__){var match,version,global=__webpack_require__(29),userAgent=__webpack_require__(214),process=global.process,versions=process&&process.versions,v8=versions&&versions.v8;v8?version=(match=v8.split("."))[0]+match[1]:userAgent&&(match=userAgent.match(/Chrome\/(\d+)/))&&(version=match[1]),module.exports=version&&+version},function(module,exports,__webpack_require__){var wellKnownSymbol=__webpack_require__(37),create=__webpack_require__(146),createNonEnumerableProperty=__webpack_require__(74),UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;null==ArrayPrototype[UNSCOPABLES]&&createNonEnumerableProperty(ArrayPrototype,UNSCOPABLES,create(null)),module.exports=function(key){ArrayPrototype[UNSCOPABLES][key]=!0}},function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(37)("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR]=function(){return this},Array.from(iteratorWithReturn,(function(){throw 2}))}catch(error){}module.exports=function(exec,SKIP_CLOSING){if(!SKIP_CLOSING&&!SAFE_CLOSING)return!1;var ITERATION_SUPPORT=!1;try{var object={};object[ITERATOR]=function(){return{next:function(){return{done:ITERATION_SUPPORT=!0}}}},exec(object)}catch(error){}return ITERATION_SUPPORT}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),createIteratorConstructor=__webpack_require__(586),getPrototypeOf=__webpack_require__(285),setPrototypeOf=__webpack_require__(286),setToStringTag=__webpack_require__(129),createNonEnumerableProperty=__webpack_require__(74),redefine=__webpack_require__(75),wellKnownSymbol=__webpack_require__(37),IS_PURE=__webpack_require__(174),Iterators=__webpack_require__(182),IteratorsCore=__webpack_require__(365),IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR=wellKnownSymbol("iterator"),returnThis=function(){return this};module.exports=function(Iterable,NAME,IteratorConstructor,next,DEFAULT,IS_SET,FORCED){createIteratorConstructor(IteratorConstructor,NAME,next);var CurrentIteratorPrototype,methods,KEY,getIterationMethod=function(KIND){if(KIND===DEFAULT&&defaultIterator)return defaultIterator;if(!BUGGY_SAFARI_ITERATORS&&KIND in IterablePrototype)return IterablePrototype[KIND];switch(KIND){case"keys":return function keys(){return new IteratorConstructor(this,KIND)};case"values":return function values(){return new IteratorConstructor(this,KIND)};case"entries":return function entries(){return new IteratorConstructor(this,KIND)}}return function(){return new IteratorConstructor(this)}},TO_STRING_TAG=NAME+" Iterator",INCORRECT_VALUES_NAME=!1,IterablePrototype=Iterable.prototype,nativeIterator=IterablePrototype[ITERATOR]||IterablePrototype["@@iterator"]||DEFAULT&&IterablePrototype[DEFAULT],defaultIterator=!BUGGY_SAFARI_ITERATORS&&nativeIterator||getIterationMethod(DEFAULT),anyNativeIterator="Array"==NAME&&IterablePrototype.entries||nativeIterator;if(anyNativeIterator&&(CurrentIteratorPrototype=getPrototypeOf(anyNativeIterator.call(new Iterable)),IteratorPrototype!==Object.prototype&&CurrentIteratorPrototype.next&&(IS_PURE||getPrototypeOf(CurrentIteratorPrototype)===IteratorPrototype||(setPrototypeOf?setPrototypeOf(CurrentIteratorPrototype,IteratorPrototype):"function"!=typeof CurrentIteratorPrototype[ITERATOR]&&createNonEnumerableProperty(CurrentIteratorPrototype,ITERATOR,returnThis)),setToStringTag(CurrentIteratorPrototype,TO_STRING_TAG,!0,!0),IS_PURE&&(Iterators[TO_STRING_TAG]=returnThis))),"values"==DEFAULT&&nativeIterator&&"values"!==nativeIterator.name&&(INCORRECT_VALUES_NAME=!0,defaultIterator=function values(){return nativeIterator.call(this)}),IS_PURE&&!FORCED||IterablePrototype[ITERATOR]===defaultIterator||createNonEnumerableProperty(IterablePrototype,ITERATOR,defaultIterator),Iterators[NAME]=defaultIterator,DEFAULT)if(methods={values:getIterationMethod("values"),keys:IS_SET?defaultIterator:getIterationMethod("keys"),entries:getIterationMethod("entries")},FORCED)for(KEY in methods)!BUGGY_SAFARI_ITERATORS&&!INCORRECT_VALUES_NAME&&KEY in IterablePrototype||redefine(IterablePrototype,KEY,methods[KEY]);else $({target:NAME,proto:!0,forced:BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME},methods);return methods}},function(module,exports,__webpack_require__){var has=__webpack_require__(60),toObject=__webpack_require__(77),sharedKey=__webpack_require__(208),CORRECT_PROTOTYPE_GETTER=__webpack_require__(366),IE_PROTO=sharedKey("IE_PROTO"),ObjectPrototype=Object.prototype;module.exports=CORRECT_PROTOTYPE_GETTER?Object.getPrototypeOf:function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectPrototype:null}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(50),aPossiblePrototype=__webpack_require__(587);module.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var setter,CORRECT_SETTER=!1,test={};try{(setter=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(test,[]),CORRECT_SETTER=test instanceof Array}catch(error){}return function setPrototypeOf(O,proto){return anObject(O),aPossiblePrototype(proto),CORRECT_SETTER?setter.call(O,proto):O.__proto__=proto,O}}():void 0)},function(module,exports,__webpack_require__){var $=__webpack_require__(19),$entries=__webpack_require__(368).entries;$({target:"Object",stat:!0},{entries:function entries(O){return $entries(O)}})},function(module,exports,__webpack_require__){var $=__webpack_require__(19),fails=__webpack_require__(33),toObject=__webpack_require__(77),nativeGetPrototypeOf=__webpack_require__(285),CORRECT_PROTOTYPE_GETTER=__webpack_require__(366);$({target:"Object",stat:!0,forced:fails((function(){nativeGetPrototypeOf(1)})),sham:!CORRECT_PROTOTYPE_GETTER},{getPrototypeOf:function getPrototypeOf(it){return nativeGetPrototypeOf(toObject(it))}})},function(module,exports,__webpack_require__){(function(global){function config(name){try{if(!global.localStorage)return!1}catch(_){return!1}var val=global.localStorage[name];return null!=val&&"true"===String(val).toLowerCase()}module.exports=function deprecate(fn,msg){if(config("noDeprecation"))return fn;var warned=!1;return function deprecated(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);config("traceDeprecation")?console.trace(msg):console.warn(msg),warned=!0}return fn.apply(this,arguments)}}}).call(this,__webpack_require__(36))},function(module,exports,__webpack_require__){var $=__webpack_require__(19),$values=__webpack_require__(368).values;$({target:"Object",stat:!0},{values:function values(O){return $values(O)}})},function(module,exports,__webpack_require__){var defer,channel,port,global=__webpack_require__(29),fails=__webpack_require__(33),classof=__webpack_require__(98),bind=__webpack_require__(179),html=__webpack_require__(356),createElement=__webpack_require__(274),userAgent=__webpack_require__(214),location=global.location,set=global.setImmediate,clear=global.clearImmediate,process=global.process,MessageChannel=global.MessageChannel,Dispatch=global.Dispatch,counter=0,queue={},run=function(id){if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},runner=function(id){return function(){run(id)}},listener=function(event){run(event.data)},post=function(id){global.postMessage(id+"",location.protocol+"//"+location.host)};set&&clear||(set=function setImmediate(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){("function"==typeof fn?fn:Function(fn)).apply(void 0,args)},defer(counter),counter},clear=function clearImmediate(id){delete queue[id]},"process"==classof(process)?defer=function(id){process.nextTick(runner(id))}:Dispatch&&Dispatch.now?defer=function(id){Dispatch.now(runner(id))}:MessageChannel&&!/(iphone|ipod|ipad).*applewebkit/i.test(userAgent)?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=listener,defer=bind(port.postMessage,port,1)):!global.addEventListener||"function"!=typeof postMessage||global.importScripts||fails(post)?defer="onreadystatechange"in createElement("script")?function(id){html.appendChild(createElement("script")).onreadystatechange=function(){html.removeChild(this),run(id)}}:function(id){setTimeout(runner(id),0)}:(defer=post,global.addEventListener("message",listener,!1))),module.exports={set:set,clear:clear}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),global=__webpack_require__(29),isForced=__webpack_require__(212),redefine=__webpack_require__(75),InternalMetadataModule=__webpack_require__(185),iterate=__webpack_require__(221),anInstance=__webpack_require__(220),isObject=__webpack_require__(40),fails=__webpack_require__(33),checkCorrectnessOfIteration=__webpack_require__(283),setToStringTag=__webpack_require__(129),inheritIfRequired=__webpack_require__(381);module.exports=function(CONSTRUCTOR_NAME,wrapper,common,IS_MAP,IS_WEAK){var NativeConstructor=global[CONSTRUCTOR_NAME],NativePrototype=NativeConstructor&&NativeConstructor.prototype,Constructor=NativeConstructor,ADDER=IS_MAP?"set":"add",exported={},fixMethod=function(KEY){var nativeMethod=NativePrototype[KEY];redefine(NativePrototype,KEY,"add"==KEY?function add(value){return nativeMethod.call(this,0===value?0:value),this}:"delete"==KEY?function(key){return!(IS_WEAK&&!isObject(key))&&nativeMethod.call(this,0===key?0:key)}:"get"==KEY?function get(key){return IS_WEAK&&!isObject(key)?void 0:nativeMethod.call(this,0===key?0:key)}:"has"==KEY?function has(key){return!(IS_WEAK&&!isObject(key))&&nativeMethod.call(this,0===key?0:key)}:function set(key,value){return nativeMethod.call(this,0===key?0:key,value),this})};if(isForced(CONSTRUCTOR_NAME,"function"!=typeof NativeConstructor||!(IS_WEAK||NativePrototype.forEach&&!fails((function(){(new NativeConstructor).entries().next()})))))Constructor=common.getConstructor(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER),InternalMetadataModule.REQUIRED=!0;else if(isForced(CONSTRUCTOR_NAME,!0)){var instance=new Constructor,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails((function(){instance.has(1)})),ACCEPT_ITERABLES=checkCorrectnessOfIteration((function(iterable){new NativeConstructor(iterable)})),BUGGY_ZERO=!IS_WEAK&&fails((function(){for(var $instance=new NativeConstructor,index=5;index--;)$instance[ADDER](index,index);return!$instance.has(-0)}));ACCEPT_ITERABLES||((Constructor=wrapper((function(dummy,iterable){anInstance(dummy,Constructor,CONSTRUCTOR_NAME);var that=inheritIfRequired(new NativeConstructor,dummy,Constructor);return null!=iterable&&iterate(iterable,that[ADDER],that,IS_MAP),that}))).prototype=NativePrototype,NativePrototype.constructor=Constructor),(THROWS_ON_PRIMITIVES||BUGGY_ZERO)&&(fixMethod("delete"),fixMethod("has"),IS_MAP&&fixMethod("get")),(BUGGY_ZERO||HASNT_CHAINING)&&fixMethod(ADDER),IS_WEAK&&NativePrototype.clear&&delete NativePrototype.clear}return exported[CONSTRUCTOR_NAME]=Constructor,$({global:!0,forced:Constructor!=NativeConstructor},exported),setToStringTag(Constructor,CONSTRUCTOR_NAME),IS_WEAK||common.setStrong(Constructor,CONSTRUCTOR_NAME,IS_MAP),Constructor}},function(module,exports,__webpack_require__){"use strict";var charAt=__webpack_require__(370).charAt;module.exports=function(S,index,unicode){return index+(unicode?charAt(S,index).length:1)}},function(module,exports,__webpack_require__){"use strict";var fixRegExpWellKnownSymbolLogic=__webpack_require__(227),anObject=__webpack_require__(50),requireObjectCoercible=__webpack_require__(85),sameValue=__webpack_require__(607),regExpExec=__webpack_require__(228);fixRegExpWellKnownSymbolLogic("search",1,(function(SEARCH,nativeSearch,maybeCallNative){return[function search(regexp){var O=requireObjectCoercible(this),searcher=null==regexp?void 0:regexp[SEARCH];return void 0!==searcher?searcher.call(regexp,O):new RegExp(regexp)[SEARCH](String(O))},function(regexp){var res=maybeCallNative(nativeSearch,regexp,this);if(res.done)return res.value;var rx=anObject(regexp),S=String(this),previousLastIndex=rx.lastIndex;sameValue(previousLastIndex,0)||(rx.lastIndex=0);var result=regExpExec(rx,S);return sameValue(rx.lastIndex,previousLastIndex)||(rx.lastIndex=previousLastIndex),null===result?-1:result.index}]}))},function(module,exports,__webpack_require__){"use strict";var stringify=__webpack_require__(610),parse=__webpack_require__(611),formats=__webpack_require__(388);module.exports={formats:formats,parse:parse,stringify:stringify}},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty,isArray=Array.isArray,hexTable=function(){for(var array=[],i=0;i<256;++i)array.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return array}(),arrayToObject=function arrayToObject(source,options){for(var obj=options&&options.plainObjects?Object.create(null):{},i=0;i<source.length;++i)void 0!==source[i]&&(obj[i]=source[i]);return obj};module.exports={arrayToObject:arrayToObject,assign:function assignSingleSource(target,source){return Object.keys(source).reduce((function(acc,key){return acc[key]=source[key],acc}),target)},combine:function combine(a,b){return[].concat(a,b)},compact:function compact(value){for(var queue=[{obj:{o:value},prop:"o"}],refs=[],i=0;i<queue.length;++i)for(var item=queue[i],obj=item.obj[item.prop],keys=Object.keys(obj),j=0;j<keys.length;++j){var key=keys[j],val=obj[key];"object"==typeof val&&null!==val&&-1===refs.indexOf(val)&&(queue.push({obj:obj,prop:key}),refs.push(val))}return function compactQueue(queue){for(;queue.length>1;){var item=queue.pop(),obj=item.obj[item.prop];if(isArray(obj)){for(var compacted=[],j=0;j<obj.length;++j)void 0!==obj[j]&&compacted.push(obj[j]);item.obj[item.prop]=compacted}}}(queue),value},decode:function(str,decoder,charset){var strWithoutPlus=str.replace(/\+/g," ");if("iso-8859-1"===charset)return strWithoutPlus.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(strWithoutPlus)}catch(e){return strWithoutPlus}},encode:function encode(str,defaultEncoder,charset){if(0===str.length)return str;var string=str;if("symbol"==typeof str?string=Symbol.prototype.toString.call(str):"string"!=typeof str&&(string=String(str)),"iso-8859-1"===charset)return escape(string).replace(/%u[0-9a-f]{4}/gi,(function($0){return"%26%23"+parseInt($0.slice(2),16)+"%3B"}));for(var out="",i=0;i<string.length;++i){var c=string.charCodeAt(i);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122?out+=string.charAt(i):c<128?out+=hexTable[c]:c<2048?out+=hexTable[192|c>>6]+hexTable[128|63&c]:c<55296||c>=57344?out+=hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|63&c]:(i+=1,c=65536+((1023&c)<<10|1023&string.charCodeAt(i)),out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|63&c])}return out},isBuffer:function isBuffer(obj){return!(!obj||"object"!=typeof obj)&&!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))},isRegExp:function isRegExp(obj){return"[object RegExp]"===Object.prototype.toString.call(obj)},merge:function merge(target,source,options){if(!source)return target;if("object"!=typeof source){if(isArray(target))target.push(source);else{if(!target||"object"!=typeof target)return[target,source];(options&&(options.plainObjects||options.allowPrototypes)||!has.call(Object.prototype,source))&&(target[source]=!0)}return target}if(!target||"object"!=typeof target)return[target].concat(source);var mergeTarget=target;return isArray(target)&&!isArray(source)&&(mergeTarget=arrayToObject(target,options)),isArray(target)&&isArray(source)?(source.forEach((function(item,i){if(has.call(target,i)){var targetItem=target[i];targetItem&&"object"==typeof targetItem&&item&&"object"==typeof item?target[i]=merge(targetItem,item,options):target.push(item)}else target[i]=item})),target):Object.keys(source).reduce((function(acc,key){var value=source[key];return has.call(acc,key)?acc[key]=merge(acc[key],value,options):acc[key]=value,acc}),mergeTarget)}}},function(module,exports,__webpack_require__){var require;module.exports=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){if(!u&&"function"==typeof require&&require)return require(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){module.exports=function(forceSimilar){return"function"!=typeof Map||forceSimilar?new(_dereq_("./similar")):new Map}},{"./similar":2}],2:[function(_dereq_,module,exports){function Similar(){return this.list=[],this.lastItem=void 0,this.size=0,this}Similar.prototype.get=function(key){var index;return this.lastItem&&this.isEqual(this.lastItem.key,key)?this.lastItem.val:(index=this.indexOf(key))>=0?(this.lastItem=this.list[index],this.list[index].val):void 0},Similar.prototype.set=function(key,val){var index;return this.lastItem&&this.isEqual(this.lastItem.key,key)?(this.lastItem.val=val,this):(index=this.indexOf(key))>=0?(this.lastItem=this.list[index],this.list[index].val=val,this):(this.lastItem={key:key,val:val},this.list.push(this.lastItem),this.size++,this)},Similar.prototype.delete=function(key){var index;if(this.lastItem&&this.isEqual(this.lastItem.key,key)&&(this.lastItem=void 0),(index=this.indexOf(key))>=0)return this.size--,this.list.splice(index,1)[0]},Similar.prototype.has=function(key){var index;return!(!this.lastItem||!this.isEqual(this.lastItem.key,key))||(index=this.indexOf(key))>=0&&(this.lastItem=this.list[index],!0)},Similar.prototype.forEach=function(callback,thisArg){var i;for(i=0;i<this.size;i++)callback.call(thisArg||this,this.list[i].val,this.list[i].key,this)},Similar.prototype.indexOf=function(key){var i;for(i=0;i<this.size;i++)if(this.isEqual(this.list[i].key,key))return i;return-1},Similar.prototype.isEqual=function(val1,val2){return val1===val2||val1!=val1&&val2!=val2},module.exports=Similar},{}],3:[function(_dereq_,module,exports){var MapOrSimilar=_dereq_("map-or-similar");function moveToMostRecentLru(lru,lruPath){var isMatch,i,ii,val1,val2,lruLen=lru.length,lruPathLen=lruPath.length;for(i=0;i<lruLen;i++){for(isMatch=!0,ii=0;ii<lruPathLen;ii++)if(val1=lru[i][ii].arg,val2=lruPath[ii].arg,val1!==val2&&(val1==val1||val2==val2)){isMatch=!1;break}if(isMatch)break}lru.push(lru.splice(i,1)[0])}function removeCachedResult(removedLru){var tmp,i,removedLruLen=removedLru.length,currentLru=removedLru[removedLruLen-1];for(currentLru.cacheItem.delete(currentLru.arg),i=removedLruLen-2;i>=0&&(!(tmp=(currentLru=removedLru[i]).cacheItem.get(currentLru.arg))||!tmp.size);i--)currentLru.cacheItem.delete(currentLru.arg)}module.exports=function(limit){var cache=new MapOrSimilar(!1),lru=[];return function(fn){var memoizerific=function(){var newMap,fnResult,i,currentCache=cache,argsLengthMinusOne=arguments.length-1,lruPath=Array(argsLengthMinusOne+1),isMemoized=!0;if((memoizerific.numArgs||0===memoizerific.numArgs)&&memoizerific.numArgs!==argsLengthMinusOne+1)throw new Error("Memoizerific functions should always be called with the same number of arguments");for(i=0;i<argsLengthMinusOne;i++)lruPath[i]={cacheItem:currentCache,arg:arguments[i]},currentCache.has(arguments[i])?currentCache=currentCache.get(arguments[i]):(isMemoized=!1,newMap=new MapOrSimilar(!1),currentCache.set(arguments[i],newMap),currentCache=newMap);return isMemoized&&(currentCache.has(arguments[argsLengthMinusOne])?fnResult=currentCache.get(arguments[argsLengthMinusOne]):isMemoized=!1),isMemoized||(fnResult=fn.apply(null,arguments),currentCache.set(arguments[argsLengthMinusOne],fnResult)),limit>0&&(lruPath[argsLengthMinusOne]={cacheItem:currentCache,arg:arguments[argsLengthMinusOne]},isMemoized?moveToMostRecentLru(lru,lruPath):lru.push(lruPath),lru.length>limit&&removeCachedResult(lru.shift())),memoizerific.wasMemoized=isMemoized,memoizerific.numArgs=argsLengthMinusOne+1,fnResult};return memoizerific.limit=limit,memoizerific.wasMemoized=!1,memoizerific.cache=cache,memoizerific.lru=lru,memoizerific}}},{"map-or-similar":1}]},{},[3])(3)},function(module,exports,__webpack_require__){var Map=__webpack_require__(136)(__webpack_require__(79),"Map");module.exports=Map},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(150),isObject=__webpack_require__(104),asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";module.exports=function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(649),mapCacheDelete=__webpack_require__(656),mapCacheGet=__webpack_require__(658),mapCacheHas=__webpack_require__(659),mapCacheSet=__webpack_require__(660);function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(394);module.exports=function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}},function(module,exports){var objectProto=Object.prototype;module.exports=function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(79),stubFalse=__webpack_require__(672),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,isBuffer=(Buffer?Buffer.isBuffer:void 0)||stubFalse;module.exports=isBuffer}).call(this,__webpack_require__(132)(module))},function(module,exports,__webpack_require__){var baseIsTypedArray=__webpack_require__(674),baseUnary=__webpack_require__(675),nodeUtil=__webpack_require__(676),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},function(module,exports,__webpack_require__){"use strict";__webpack_require__(27),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"HooksContext",{enumerable:!0,get:function get(){return _addons.HooksContext}}),Object.defineProperty(exports,"applyHooks",{enumerable:!0,get:function get(){return _addons.applyHooks}}),Object.defineProperty(exports,"useMemo",{enumerable:!0,get:function get(){return _addons.useMemo}}),Object.defineProperty(exports,"useCallback",{enumerable:!0,get:function get(){return _addons.useCallback}}),Object.defineProperty(exports,"useRef",{enumerable:!0,get:function get(){return _addons.useRef}}),Object.defineProperty(exports,"useState",{enumerable:!0,get:function get(){return _addons.useState}}),Object.defineProperty(exports,"useReducer",{enumerable:!0,get:function get(){return _addons.useReducer}}),Object.defineProperty(exports,"useEffect",{enumerable:!0,get:function get(){return _addons.useEffect}}),Object.defineProperty(exports,"useChannel",{enumerable:!0,get:function get(){return _addons.useChannel}}),Object.defineProperty(exports,"useStoryContext",{enumerable:!0,get:function get(){return _addons.useStoryContext}}),Object.defineProperty(exports,"useParameter",{enumerable:!0,get:function get(){return _addons.useParameter}});var _addons=__webpack_require__(217)},,,function(module,__webpack_exports__,__webpack_require__){"use strict";function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}__webpack_require__.r(__webpack_exports__);var classCallCheck=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),assertThisInitialized=__webpack_require__(7),createClass=__webpack_require__(1),inherits=__webpack_require__(6),defineProperty=__webpack_require__(0),react=__webpack_require__(8),react_default=__webpack_require__.n(react),prop_types=__webpack_require__(4),prop_types_default=__webpack_require__.n(prop_types);function normalizeStyle(style){if(!style)return null;if("string"==typeof style)return style;style.toJS&&(style=style.toJS());var layerIndex=style.layers.reduce((function(accum,current){return Object.assign(accum,Object(defineProperty.a)({},current.id,current))}),{});return style.layers=style.layers.map((function(layer){delete(layer=Object.assign({},layer)).interactive;var layerRef=layerIndex[layer.ref];return layerRef&&(delete layer.ref,void 0!==layerRef.type&&(layer.type=layerRef.type),void 0!==layerRef.source&&(layer.source=layerRef.source),void 0!==layerRef["source-layer"]&&(layer["source-layer"]=layerRef["source-layer"]),void 0!==layerRef.minzoom&&(layer.minzoom=layerRef.minzoom),void 0!==layerRef.maxzoom&&(layer.maxzoom=layerRef.maxzoom),void 0!==layerRef.filter&&(layer.filter=layerRef.filter),void 0!==layerRef.layout&&(layer.layout=layer.layout||{},layer.layout=Object.assign({},layer.layout,layerRef.layout))),layer})),style}var web_mercator_viewport=__webpack_require__(196),index_esm=__webpack_require__(435),mapbox=__webpack_require__(261),mapbox_gl=__webpack_require__(419),mapbox_gl_default=__webpack_require__.n(mapbox_gl),slicedToArray=__webpack_require__(9),normalize_viewport_props=__webpack_require__(791),EPSILON=1e-9;function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)}function equals(a,b){if(a===b)return!0;if(isArray(a)&&isArray(b)){if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i)if(!equals(a[i],b[i]))return!1;return!0}return Math.abs(a-b)<=EPSILON}function clamp(value,min,max){return Math.max(min,Math.min(max,value))}function lerp(a,b,t){return isArray(a)?a.map((function(ai,i){return lerp(ai,b[i],t)})):t*b+(1-t)*a}function assert(condition,message){if(!condition)throw new Error(message||"react-map-gl: assertion failed.")}var transition_interpolator_TransitionInterpolator=function(){function TransitionInterpolator(){Object(classCallCheck.a)(this,TransitionInterpolator),Object(defineProperty.a)(this,"propNames",[])}return Object(createClass.a)(TransitionInterpolator,[{key:"arePropsEqual",value:function arePropsEqual(currentProps,nextProps){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=(this.propNames||[])[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;if(!equals(currentProps[key],nextProps[key]))return!1}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return!0}},{key:"initializeProps",value:function initializeProps(startProps,endProps){return{start:startProps,end:endProps}}},{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){assert(!1,"interpolateProps is not implemented")}}]),TransitionInterpolator}(),math_utils=__webpack_require__(56),web_mercator_utils=__webpack_require__(22),vec2=__webpack_require__(48),fly_to_viewport_EPSILON=.01,VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom"],DEFAULT_OPTS={curve:1.414,speed:1.2};function getFlyToTransitionParams(startProps,endProps,opts){var rho=(opts=Object.assign({},DEFAULT_OPTS,opts)).curve,startZoom=startProps.zoom,startCenter=[startProps.longitude,startProps.latitude],startScale=Object(web_mercator_utils.l)(startZoom),endZoom=endProps.zoom,endCenter=[endProps.longitude,endProps.latitude],scale=Object(web_mercator_utils.l)(endZoom-startZoom),startCenterXY=Object(web_mercator_utils.g)(startCenter,startScale),endCenterXY=Object(web_mercator_utils.g)(endCenter,startScale),uDelta=vec2.f([],endCenterXY,startCenterXY),w0=Math.max(startProps.width,startProps.height),w1=w0/scale,u1=vec2.b(uDelta),rho2=rho*rho,b0=(w1*w1-w0*w0+rho2*rho2*u1*u1)/(2*w0*rho2*u1),b1=(w1*w1-w0*w0-rho2*rho2*u1*u1)/(2*w1*rho2*u1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);return{startZoom:startZoom,startCenterXY:startCenterXY,uDelta:uDelta,w0:w0,u1:u1,S:(r1-r0)/rho,rho:rho,rho2:rho2,r0:r0,r1:r1}}var WRAPPED_ANGULAR_PROPS={longitude:1,bearing:1};function isValid(prop){return Number.isFinite(prop)||Array.isArray(prop)}function getEndValueByShortestPath(propName,startValue,endValue){return function isWrappedAngularProp(propName){return propName in WRAPPED_ANGULAR_PROPS}(propName)&&Math.abs(endValue-startValue)>180&&(endValue=endValue<0?endValue+360:endValue-360),endValue}var viewport_fly_to_interpolator_VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom","bearing","pitch"],REQUIRED_PROPS=["latitude","longitude","zoom","width","height"],LINEARLY_INTERPOLATED_PROPS=["bearing","pitch"],viewport_fly_to_interpolator_ViewportFlyToInterpolator=function(_TransitionInterpolat){function ViewportFlyToInterpolator(){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,ViewportFlyToInterpolator);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(ViewportFlyToInterpolator)).call.apply(_getPrototypeOf2,[this].concat(args))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"propNames",viewport_fly_to_interpolator_VIEWPORT_TRANSITION_PROPS),_this}return Object(inherits.a)(ViewportFlyToInterpolator,_TransitionInterpolat),Object(createClass.a)(ViewportFlyToInterpolator,[{key:"initializeProps",value:function initializeProps(startProps,endProps){var startViewportProps={},endViewportProps={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=REQUIRED_PROPS[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value,startValue=startProps[key],endValue=endProps[key];assert(isValid(startValue)&&isValid(endValue),"".concat(key," must be supplied for transition")),startViewportProps[key]=startValue,endViewportProps[key]=getEndValueByShortestPath(key,startValue,endValue)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=LINEARLY_INTERPOLATED_PROPS[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _key2=_step2.value,_startValue=startProps[_key2]||0,_endValue=endProps[_key2]||0;startViewportProps[_key2]=_startValue,endViewportProps[_key2]=getEndValueByShortestPath(_key2,_startValue,_endValue)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return{start:startViewportProps,end:endViewportProps}}},{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){var viewport=function flyToViewport(startProps,endProps,t){var viewport={},_getFlyToTransitionPa=getFlyToTransitionParams(startProps,endProps,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),startZoom=_getFlyToTransitionPa.startZoom,startCenterXY=_getFlyToTransitionPa.startCenterXY,uDelta=_getFlyToTransitionPa.uDelta,w0=_getFlyToTransitionPa.w0,u1=_getFlyToTransitionPa.u1,S=_getFlyToTransitionPa.S,rho=_getFlyToTransitionPa.rho,rho2=_getFlyToTransitionPa.rho2,r0=_getFlyToTransitionPa.r0;if(Math.abs(u1)<fly_to_viewport_EPSILON){for(var _i=0;_i<VIEWPORT_TRANSITION_PROPS.length;_i++){var key=VIEWPORT_TRANSITION_PROPS[_i],startValue=startProps[key],endValue=endProps[key];viewport[key]=Object(math_utils.b)(startValue,endValue,t)}return viewport}var s=t*S,w=Math.cosh(r0)/Math.cosh(r0+rho*s),u=w0*((Math.cosh(r0)*Math.tanh(r0+rho*s)-Math.sinh(r0))/rho2)/u1,scaleIncrement=1/w,newZoom=startZoom+Object(web_mercator_utils.i)(scaleIncrement),newCenterWorld=vec2.e([],uDelta,u);vec2.a(newCenterWorld,newCenterWorld,startCenterXY),vec2.e(newCenterWorld,newCenterWorld,scaleIncrement);var newCenter=Object(web_mercator_utils.j)(newCenterWorld,Object(web_mercator_utils.l)(newZoom));return viewport.longitude=newCenter[0],viewport.latitude=newCenter[1],viewport.zoom=newZoom,viewport}(startProps,endProps,t),_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=LINEARLY_INTERPOLATED_PROPS[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var key=_step3.value;viewport[key]=lerp(startProps[key],endProps[key],t)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return viewport}}]),ViewportFlyToInterpolator}(transition_interpolator_TransitionInterpolator),linear_interpolator_VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom","bearing","pitch"],linear_interpolator_LinearInterpolator=function(_TransitionInterpolat){function LinearInterpolator(){var _this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(classCallCheck.a)(this,LinearInterpolator),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(LinearInterpolator).call(this)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"around",void 0),Array.isArray(opts)&&(opts={transitionProps:opts}),_this.propNames=opts.transitionProps||linear_interpolator_VIEWPORT_TRANSITION_PROPS,opts.around&&(_this.around=opts.around),_this}return Object(inherits.a)(LinearInterpolator,_TransitionInterpolat),Object(createClass.a)(LinearInterpolator,[{key:"initializeProps",value:function initializeProps(startProps,endProps){var startViewportProps={},endViewportProps={};if(this.around){startViewportProps.around=this.around;var aroundLngLat=new web_mercator_viewport.a(startProps).unproject(this.around);Object.assign(endViewportProps,endProps,{around:new web_mercator_viewport.a(endProps).project(aroundLngLat),aroundLngLat:aroundLngLat})}var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.propNames[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value,startValue=startProps[key],endValue=endProps[key];assert(isValid(startValue)&&isValid(endValue),"".concat(key," must be supplied for transition")),startViewportProps[key]=startValue,endViewportProps[key]=getEndValueByShortestPath(key,startValue,endValue)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return{start:startViewportProps,end:endViewportProps}}},{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){var viewport={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.propNames[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var key=_step2.value;viewport[key]=lerp(startProps[key],endProps[key],t)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}if(endProps.around){var _getMapCenterByLngLat=new web_mercator_viewport.a(Object.assign({},endProps,viewport)).getMapCenterByLngLatPosition({lngLat:endProps.aroundLngLat,pos:lerp(startProps.around,endProps.around,t)}),_getMapCenterByLngLat2=Object(slicedToArray.a)(_getMapCenterByLngLat,2),longitude=_getMapCenterByLngLat2[0],latitude=_getMapCenterByLngLat2[1];viewport.longitude=longitude,viewport.latitude=latitude}return viewport}}]),LinearInterpolator}(transition_interpolator_TransitionInterpolator),MAPBOX_LIMITS={minZoom:0,maxZoom:24,minPitch:0,maxPitch:60},DEFAULT_STATE={pitch:0,bearing:0,altitude:1.5},map_state_MapState=function(){function MapState(_ref){var width=_ref.width,height=_ref.height,latitude=_ref.latitude,longitude=_ref.longitude,zoom=_ref.zoom,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?DEFAULT_STATE.bearing:_ref$bearing,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?DEFAULT_STATE.pitch:_ref$pitch,_ref$altitude=_ref.altitude,altitude=void 0===_ref$altitude?DEFAULT_STATE.altitude:_ref$altitude,_ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?MAPBOX_LIMITS.maxZoom:_ref$maxZoom,_ref$minZoom=_ref.minZoom,minZoom=void 0===_ref$minZoom?MAPBOX_LIMITS.minZoom:_ref$minZoom,_ref$maxPitch=_ref.maxPitch,maxPitch=void 0===_ref$maxPitch?MAPBOX_LIMITS.maxPitch:_ref$maxPitch,_ref$minPitch=_ref.minPitch,minPitch=void 0===_ref$minPitch?MAPBOX_LIMITS.minPitch:_ref$minPitch,transitionDuration=_ref.transitionDuration,transitionEasing=_ref.transitionEasing,transitionInterpolator=_ref.transitionInterpolator,transitionInterruption=_ref.transitionInterruption,startPanLngLat=_ref.startPanLngLat,startZoomLngLat=_ref.startZoomLngLat,startBearing=_ref.startBearing,startPitch=_ref.startPitch,startZoom=_ref.startZoom;Object(classCallCheck.a)(this,MapState),Object(defineProperty.a)(this,"_viewportProps",void 0),Object(defineProperty.a)(this,"_interactiveState",void 0),assert(Number.isFinite(width),"`width` must be supplied"),assert(Number.isFinite(height),"`height` must be supplied"),assert(Number.isFinite(longitude),"`longitude` must be supplied"),assert(Number.isFinite(latitude),"`latitude` must be supplied"),assert(Number.isFinite(zoom),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:width,height:height,latitude:latitude,longitude:longitude,zoom:zoom,bearing:bearing,pitch:pitch,altitude:altitude,maxZoom:maxZoom,minZoom:minZoom,maxPitch:maxPitch,minPitch:minPitch,transitionDuration:transitionDuration,transitionEasing:transitionEasing,transitionInterpolator:transitionInterpolator,transitionInterruption:transitionInterruption}),this._interactiveState={startPanLngLat:startPanLngLat,startZoomLngLat:startZoomLngLat,startBearing:startBearing,startPitch:startPitch,startZoom:startZoom}}return Object(createClass.a)(MapState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(_ref2){var pos=_ref2.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(pos)})}},{key:"pan",value:function pan(_ref3){var pos=_ref3.pos,startPos=_ref3.startPos,startPanLngLat=this._interactiveState.startPanLngLat||this._unproject(startPos);if(!startPanLngLat)return this;var _this$_calculateNewLn=this._calculateNewLngLat({startPanLngLat:startPanLngLat,pos:pos}),_this$_calculateNewLn2=Object(slicedToArray.a)(_this$_calculateNewLn,2),longitude=_this$_calculateNewLn2[0],latitude=_this$_calculateNewLn2[1];return this._getUpdatedMapState({longitude:longitude,latitude:latitude})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function rotateStart(_ref4){_ref4.pos;return this._getUpdatedMapState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function rotate(_ref5){var _ref5$deltaScaleX=_ref5.deltaScaleX,deltaScaleX=void 0===_ref5$deltaScaleX?0:_ref5$deltaScaleX,_ref5$deltaScaleY=_ref5.deltaScaleY,deltaScaleY=void 0===_ref5$deltaScaleY?0:_ref5$deltaScaleY,_this$_interactiveSta=this._interactiveState,startBearing=_this$_interactiveSta.startBearing,startPitch=_this$_interactiveSta.startPitch;if(!Number.isFinite(startBearing)||!Number.isFinite(startPitch))return this;var _this$_calculateNewPi=this._calculateNewPitchAndBearing({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY,startBearing:startBearing||0,startPitch:startPitch||0}),pitch=_this$_calculateNewPi.pitch,bearing=_this$_calculateNewPi.bearing;return this._getUpdatedMapState({bearing:bearing,pitch:pitch})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function zoomStart(_ref6){var pos=_ref6.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(pos),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(_ref7){var pos=_ref7.pos,startPos=_ref7.startPos,scale=_ref7.scale;assert(scale>0,"`scale` must be a positive number");var _this$_interactiveSta2=this._interactiveState,startZoom=_this$_interactiveSta2.startZoom,startZoomLngLat=_this$_interactiveSta2.startZoomLngLat;Number.isFinite(startZoom)||(startZoom=this._viewportProps.zoom,startZoomLngLat=this._unproject(startPos)||this._unproject(pos)),assert(startZoomLngLat,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var zoom=this._calculateNewZoom({scale:scale,startZoom:startZoom||0}),_zoomedViewport$getMa=new web_mercator_viewport.a(Object.assign({},this._viewportProps,{zoom:zoom})).getMapCenterByLngLatPosition({lngLat:startZoomLngLat,pos:pos}),_zoomedViewport$getMa2=Object(slicedToArray.a)(_zoomedViewport$getMa,2),longitude=_zoomedViewport$getMa2[0],latitude=_zoomedViewport$getMa2[1];return this._getUpdatedMapState({zoom:zoom,longitude:longitude,latitude:latitude})}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function _getUpdatedMapState(newProps){return new MapState(Object.assign({},this._viewportProps,this._interactiveState,newProps))}},{key:"_applyConstraints",value:function _applyConstraints(props){var maxZoom=props.maxZoom,minZoom=props.minZoom,zoom=props.zoom;props.zoom=clamp(zoom,minZoom,maxZoom);var maxPitch=props.maxPitch,minPitch=props.minPitch,pitch=props.pitch;return props.pitch=clamp(pitch,minPitch,maxPitch),Object.assign(props,Object(normalize_viewport_props.a)(props)),props}},{key:"_unproject",value:function _unproject(pos){var viewport=new web_mercator_viewport.a(this._viewportProps);return pos&&viewport.unproject(pos)}},{key:"_calculateNewLngLat",value:function _calculateNewLngLat(_ref8){var startPanLngLat=_ref8.startPanLngLat,pos=_ref8.pos;return new web_mercator_viewport.a(this._viewportProps).getMapCenterByLngLatPosition({lngLat:startPanLngLat,pos:pos})}},{key:"_calculateNewZoom",value:function _calculateNewZoom(_ref9){var scale=_ref9.scale,startZoom=_ref9.startZoom,_this$_viewportProps=this._viewportProps,maxZoom=_this$_viewportProps.maxZoom,minZoom=_this$_viewportProps.minZoom;return clamp(startZoom+Math.log2(scale),minZoom,maxZoom)}},{key:"_calculateNewPitchAndBearing",value:function _calculateNewPitchAndBearing(_ref10){var deltaScaleX=_ref10.deltaScaleX,deltaScaleY=_ref10.deltaScaleY,startBearing=_ref10.startBearing,startPitch=_ref10.startPitch;deltaScaleY=clamp(deltaScaleY,-1,1);var _this$_viewportProps2=this._viewportProps,minPitch=_this$_viewportProps2.minPitch,maxPitch=_this$_viewportProps2.maxPitch,pitch=startPitch;return deltaScaleY>0?pitch=startPitch+deltaScaleY*(maxPitch-startPitch):deltaScaleY<0&&(pitch=startPitch-deltaScaleY*(minPitch-startPitch)),{pitch:pitch,bearing:startBearing+180*deltaScaleX}}}]),MapState}();var map_context=Object(react.createContext)({viewport:null,map:null,mapContainer:null,onViewportChange:null,onViewStateChange:null,eventManager:null,isDragging:!1});function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var NO_TOKEN_WARNING="A valid API access token is required to use Mapbox data";var UNAUTHORIZED_ERROR_CODE=401,CONTAINER_STYLE={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},propTypes=Object.assign({},mapbox.a.propTypes,{width:prop_types_default.a.oneOfType([prop_types_default.a.number,prop_types_default.a.string]),height:prop_types_default.a.oneOfType([prop_types_default.a.number,prop_types_default.a.string]),onResize:prop_types_default.a.func,preventStyleDiffing:prop_types_default.a.bool,disableTokenWarning:prop_types_default.a.bool,visible:prop_types_default.a.bool,className:prop_types_default.a.string,style:prop_types_default.a.object,visibilityConstraints:prop_types_default.a.object}),defaultProps=Object.assign({},mapbox.a.defaultProps,{preventStyleDiffing:!1,disableTokenWarning:!1,visible:!0,onResize:function noop(){},className:"",style:null,visibilityConstraints:MAPBOX_LIMITS}),static_map_StaticMap=function(_PureComponent){function StaticMap(){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,StaticMap);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(StaticMap)).call.apply(_getPrototypeOf2,[this].concat(args))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{accessTokenInvalid:!1}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_mapbox",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_map",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_mapboxMapRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_mapContainerRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_queryParams",{}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_width",0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_height",0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"getMap",(function(){return _this._map})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"queryRenderedFeatures",(function(geometry){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _this._map.queryRenderedFeatures(geometry,options)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_mapboxMapError",(function(evt){(evt.error&&evt.error.status||evt.status)!==UNAUTHORIZED_ERROR_CODE||_this.state.accessTokenInvalid||(console.error(NO_TOKEN_WARNING),_this.setState({accessTokenInvalid:!0})),_this.props.onError(evt)})),_this}return Object(inherits.a)(StaticMap,_PureComponent),Object(createClass.a)(StaticMap,[{key:"componentDidMount",value:function componentDidMount(){if(StaticMap.supported()){var mapStyle=this.props.mapStyle;this._mapbox=new mapbox.a(Object.assign({},this.props,{mapboxgl:mapbox_gl_default.a,width:this._width,height:this._height,container:this._mapboxMapRef.current,onError:this._mapboxMapError,mapStyle:normalizeStyle(mapStyle)})),this._map=this._mapbox.getMap()}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){this._mapbox&&(this._updateMapStyle(prevProps,this.props),this._updateMapProps(this.props))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._mapbox&&(this._mapbox.finalize(),this._mapbox=null,this._map=null)}},{key:"_updateMapSize",value:function _updateMapSize(width,height){this._width===width&&this._height===height||(this._width=width,this._height=height,this._updateMapProps(this.props))}},{key:"_updateMapStyle",value:function _updateMapStyle(oldProps,newProps){var mapStyle=newProps.mapStyle;mapStyle!==oldProps.mapStyle&&this._map.setStyle(normalizeStyle(mapStyle),{diff:!this.props.preventStyleDiffing})}},{key:"_updateMapProps",value:function _updateMapProps(props){this._mapbox&&this._mapbox.setProps(Object.assign({},props,{width:this._width,height:this._height}))}},{key:"_renderNoTokenWarning",value:function _renderNoTokenWarning(){if(this.state.accessTokenInvalid&&!this.props.disableTokenWarning){return react_default.a.createElement("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},react_default.a.createElement("h3",{key:"header"},"NO_TOKEN_WARNING"),react_default.a.createElement("div",{key:"text"},"For information on setting up your basemap, read"),react_default.a.createElement("a",{key:"link",href:"https://uber.github.io/react-map-gl/#/Documentation/getting-started/about-mapbox-tokens"},"Note on Map Tokens"))}return null}},{key:"_renderOverlays",value:function _renderOverlays(dimensions){var _this2=this,_dimensions$width=dimensions.width,width=void 0===_dimensions$width?Number(this.props.width):_dimensions$width,_dimensions$height=dimensions.height,height=void 0===_dimensions$height?Number(this.props.height):_dimensions$height;return this._updateMapSize(width,height),react_default.a.createElement(map_context.Consumer,null,(function(interactiveContext){var context=_objectSpread({},interactiveContext,{viewport:new web_mercator_viewport.a(_objectSpread({},_this2.props,{},_this2.props.viewState,{width:width,height:height})),map:_this2._map,mapContainer:interactiveContext.mapContainer||_this2._mapContainerRef.current});return react_default.a.createElement(map_context.Provider,{value:context},react_default.a.createElement("div",{key:"map-overlays",className:"overlays",style:CONTAINER_STYLE},_this2.props.children))}))}},{key:"render",value:function render(){var _this$props=this.props,className=_this$props.className,width=_this$props.width,height=_this$props.height,style=_this$props.style,visibilityConstraints=_this$props.visibilityConstraints,mapContainerStyle=Object.assign({position:"relative"},style,{width:width,height:height}),visible=this.props.visible&&function checkVisibilityConstraints(props){var s,constraints=arguments.length>1&&void 0!==arguments[1]?arguments[1]:MAPBOX_LIMITS;for(var constraintName in constraints){var type=constraintName.slice(0,3),propName=(s=constraintName.slice(3))[0].toLowerCase()+s.slice(1);if("min"===type&&props[propName]<constraints[constraintName])return!1;if("max"===type&&props[propName]>constraints[constraintName])return!1}return!0}(this.props.viewState||this.props,visibilityConstraints),mapStyle=Object.assign({},CONTAINER_STYLE,{visibility:visible?"inherit":"hidden"});return react_default.a.createElement("div",{key:"map-container",style:mapContainerStyle,ref:this._mapContainerRef},react_default.a.createElement("div",{key:"map-mapbox",ref:this._mapboxMapRef,style:mapStyle,className:className}),react_default.a.createElement(index_esm.a,{key:"autosizer",disableWidth:Number.isFinite(width),disableHeight:Number.isFinite(height),onResize:this.props.onResize},this._renderOverlays.bind(this)),this._renderNoTokenWarning())}}],[{key:"supported",value:function supported(){return mapbox_gl_default.a&&mapbox_gl_default.a.supported()}}]),StaticMap}(react.PureComponent);Object(defineProperty.a)(static_map_StaticMap,"propTypes",propTypes),Object(defineProperty.a)(static_map_StaticMap,"defaultProps",defaultProps);var transition_manager_noop=function noop(){};var TRANSITION_EVENTS={BREAK:1,SNAP_TO_END:2,IGNORE:3,UPDATE:4},DEFAULT_PROPS={transitionDuration:0,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new linear_interpolator_LinearInterpolator,transitionInterruption:TRANSITION_EVENTS.BREAK,onTransitionStart:transition_manager_noop,onTransitionInterrupt:transition_manager_noop,onTransitionEnd:transition_manager_noop,onViewportChange:transition_manager_noop,onStateChange:transition_manager_noop},transition_manager_TransitionManager=function(){function TransitionManager(props,getTime){var _this=this;Object(classCallCheck.a)(this,TransitionManager),Object(defineProperty.a)(this,"props",void 0),Object(defineProperty.a)(this,"state",void 0),Object(defineProperty.a)(this,"time",void 0),Object(defineProperty.a)(this,"_animationFrame",null),Object(defineProperty.a)(this,"_onTransitionFrame",(function(){_this._animationFrame=requestAnimationFrame(_this._onTransitionFrame),_this._updateViewport()})),props&&(this.props=props),this.time=getTime||Date.now}return Object(createClass.a)(TransitionManager,[{key:"getViewportInTransition",value:function getViewportInTransition(){return this._animationFrame?this.state.propsInTransition:null}},{key:"processViewportChange",value:function processViewportChange(nextProps){var currentProps=this.props;if(this.props=nextProps,this._shouldIgnoreViewportChange(currentProps,nextProps))return!1;if(this._isTransitionEnabled(nextProps)){var startProps=Object.assign({},currentProps),endProps=Object.assign({},nextProps);if(this._isTransitionInProgress()&&(currentProps.onTransitionInterrupt(),this.state.interruption===TRANSITION_EVENTS.SNAP_TO_END?Object.assign(startProps,this.state.endProps):Object.assign(startProps,this.state.propsInTransition),this.state.interruption===TRANSITION_EVENTS.UPDATE)){var currentTime=this.time(),x0=(currentTime-this.state.startTime)/this.state.duration;endProps.transitionDuration=this.state.duration-(currentTime-this.state.startTime),endProps.transitionEasing=function cropEasingFunction(easing,x0){var y0=easing(x0);return function(t){return 1/(1-y0)*(easing(t*(1-x0)+x0)-y0)}}(this.state.easing,x0),endProps.transitionInterpolator=startProps.transitionInterpolator}return endProps.onTransitionStart(),this._triggerTransition(startProps,endProps),!0}return this._isTransitionInProgress()&&(currentProps.onTransitionInterrupt(),this._endTransition()),!1}},{key:"_isTransitionInProgress",value:function _isTransitionInProgress(){return Boolean(this._animationFrame)}},{key:"_isTransitionEnabled",value:function _isTransitionEnabled(props){return props.transitionDuration>0&&Boolean(props.transitionInterpolator)}},{key:"_isUpdateDueToCurrentTransition",value:function _isUpdateDueToCurrentTransition(props){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(props,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function _shouldIgnoreViewportChange(currentProps,nextProps){return!currentProps||(this._isTransitionInProgress()?this.state.interruption===TRANSITION_EVENTS.IGNORE||this._isUpdateDueToCurrentTransition(nextProps):!this._isTransitionEnabled(nextProps)||nextProps.transitionInterpolator.arePropsEqual(currentProps,nextProps))}},{key:"_triggerTransition",value:function _triggerTransition(startProps,endProps){assert(this._isTransitionEnabled(endProps),"Transition is not enabled"),this._animationFrame&&cancelAnimationFrame(this._animationFrame);var initialProps=endProps.transitionInterpolator.initializeProps(startProps,endProps),interactionState={inTransition:!0,isZooming:startProps.zoom!==endProps.zoom,isPanning:startProps.longitude!==endProps.longitude||startProps.latitude!==endProps.latitude,isRotating:startProps.bearing!==endProps.bearing||startProps.pitch!==endProps.pitch};this.state={duration:endProps.transitionDuration,easing:endProps.transitionEasing,interpolator:endProps.transitionInterpolator,interruption:endProps.transitionInterruption,startTime:this.time(),startProps:initialProps.start,endProps:initialProps.end,animation:null,propsInTransition:{},interactionState:interactionState},this._onTransitionFrame(),this.props.onStateChange(interactionState)}},{key:"_endTransition",value:function _endTransition(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this.props.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function _updateViewport(){var currentTime=this.time(),_this$state=this.state,startTime=_this$state.startTime,duration=_this$state.duration,easing=_this$state.easing,interpolator=_this$state.interpolator,startProps=_this$state.startProps,endProps=_this$state.endProps,shouldEnd=!1,t=(currentTime-startTime)/duration;t>=1&&(t=1,shouldEnd=!0),t=easing(t);var viewport=interpolator.interpolateProps(startProps,endProps,t),mapState=new map_state_MapState(Object.assign({},this.props,viewport));this.state.propsInTransition=mapState.getViewportProps(),this.props.onViewportChange(this.state.propsInTransition,this.state.interactionState,this.props),shouldEnd&&(this._endTransition(),this.props.onTransitionEnd())}}]),TransitionManager}();Object(defineProperty.a)(transition_manager_TransitionManager,"defaultProps",DEFAULT_PROPS);var esm=__webpack_require__(256);var NO_TRANSITION_PROPS={transitionDuration:0},LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new linear_interpolator_LinearInterpolator,transitionInterruption:TRANSITION_EVENTS.BREAK},EVENT_TYPES_WHEEL=["wheel"],EVENT_TYPES_PAN=["panstart","panmove","panend"],EVENT_TYPES_PINCH=["pinchstart","pinchmove","pinchend","pinchcancel"],EVENT_TYPES_DOUBLE_TAP=["doubletap"],EVENT_TYPES_KEYBOARD=["keydown"],map_controller_MapController=function(){function MapController(){var _this=this;Object(classCallCheck.a)(this,MapController),Object(defineProperty.a)(this,"events",[]),Object(defineProperty.a)(this,"mapState",void 0),Object(defineProperty.a)(this,"onViewportChange",void 0),Object(defineProperty.a)(this,"onStateChange",void 0),Object(defineProperty.a)(this,"mapStateProps",void 0),Object(defineProperty.a)(this,"eventManager",void 0),Object(defineProperty.a)(this,"scrollZoom",!0),Object(defineProperty.a)(this,"dragPan",!0),Object(defineProperty.a)(this,"dragRotate",!0),Object(defineProperty.a)(this,"doubleClickZoom",!0),Object(defineProperty.a)(this,"touchZoom",!0),Object(defineProperty.a)(this,"touchRotate",!1),Object(defineProperty.a)(this,"keyboard",!0),Object(defineProperty.a)(this,"_state",{isDragging:!1}),Object(defineProperty.a)(this,"_events",{}),Object(defineProperty.a)(this,"_transitionManager",new transition_manager_TransitionManager),Object(defineProperty.a)(this,"setState",(function(newState){Object.assign(_this._state,newState),_this.onStateChange&&_this.onStateChange(_this._state)})),this.handleEvent=this.handleEvent.bind(this),this._onWheelEnd=function debounce(func,delay){var _this,_arguments,timeout,executeNow=function executeNow(){return timeout=null,func.apply(_this,_arguments)};return function(){_this=this,_arguments=arguments,timeout&&clearTimeout(timeout),timeout=setTimeout(executeNow,delay)}}(this._onWheelEnd,100)}return Object(createClass.a)(MapController,[{key:"handleEvent",value:function handleEvent(event){switch(this.mapState=this.getMapState(),event.type){case"panstart":return this._onPanStart(event);case"panmove":return this._onPan(event);case"panend":return this._onPanEnd(event);case"pinchstart":return this._onPinchStart(event);case"pinchmove":return this._onPinch(event);case"pinchcancel":case"pinchend":return this._onPinchEnd(event);case"doubletap":return this._onDoubleTap(event);case"wheel":return this._onWheel(event);case"keydown":return this._onKeyDown(event);default:return!1}}},{key:"getCenter",value:function getCenter(event){var _event$offsetCenter=event.offsetCenter;return[_event$offsetCenter.x,_event$offsetCenter.y]}},{key:"isFunctionKeyPressed",value:function isFunctionKeyPressed(event){var srcEvent=event.srcEvent;return Boolean(srcEvent.metaKey||srcEvent.altKey||srcEvent.ctrlKey||srcEvent.shiftKey)}},{key:"updateViewport",value:function updateViewport(newMapState){var extraProps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},extraState=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},oldViewport=this.mapState?this.mapState.getViewportProps():{},newViewport=Object.assign({},newMapState.getViewportProps(),extraProps),viewStateChanged=Object.keys(newViewport).some((function(key){return oldViewport[key]!==newViewport[key]}));viewStateChanged&&this.onViewportChange(newViewport,extraState,oldViewport),this.setState(Object.assign({},newMapState.getInteractiveState(),extraState))}},{key:"getMapState",value:function getMapState(overrides){return new map_state_MapState(Object.assign({},this.mapStateProps,this._state,overrides))}},{key:"setOptions",value:function setOptions(options){var onViewportChange=options.onViewportChange,onStateChange=options.onStateChange,_options$eventManager=options.eventManager,eventManager=void 0===_options$eventManager?this.eventManager:_options$eventManager,_options$isInteractiv=options.isInteractive,isInteractive=void 0===_options$isInteractiv||_options$isInteractiv,_options$scrollZoom=options.scrollZoom,scrollZoom=void 0===_options$scrollZoom?this.scrollZoom:_options$scrollZoom,_options$dragPan=options.dragPan,dragPan=void 0===_options$dragPan?this.dragPan:_options$dragPan,_options$dragRotate=options.dragRotate,dragRotate=void 0===_options$dragRotate?this.dragRotate:_options$dragRotate,_options$doubleClickZ=options.doubleClickZoom,doubleClickZoom=void 0===_options$doubleClickZ?this.doubleClickZoom:_options$doubleClickZ,_options$touchZoom=options.touchZoom,touchZoom=void 0===_options$touchZoom?this.touchZoom:_options$touchZoom,_options$touchRotate=options.touchRotate,touchRotate=void 0===_options$touchRotate?this.touchRotate:_options$touchRotate,_options$keyboard=options.keyboard,keyboard=void 0===_options$keyboard?this.keyboard:_options$keyboard;this.onViewportChange=onViewportChange,this.onStateChange=onStateChange,this.mapStateProps&&this.mapStateProps.height===options.height||this.updateViewport(new map_state_MapState(options)),this.mapStateProps=options,this._transitionManager.processViewportChange(Object.assign({},options,{onStateChange:this.setState})),this.eventManager!==eventManager&&(this.eventManager=eventManager,this._events={},this.toggleEvents(this.events,!0)),this.toggleEvents(EVENT_TYPES_WHEEL,isInteractive&&scrollZoom),this.toggleEvents(EVENT_TYPES_PAN,isInteractive&&(dragPan||dragRotate)),this.toggleEvents(EVENT_TYPES_PINCH,isInteractive&&(touchZoom||touchRotate)),this.toggleEvents(EVENT_TYPES_DOUBLE_TAP,isInteractive&&doubleClickZoom),this.toggleEvents(EVENT_TYPES_KEYBOARD,isInteractive&&keyboard),this.scrollZoom=scrollZoom,this.dragPan=dragPan,this.dragRotate=dragRotate,this.doubleClickZoom=doubleClickZoom,this.touchZoom=touchZoom,this.touchRotate=touchRotate,this.keyboard=keyboard}},{key:"toggleEvents",value:function toggleEvents(eventNames,enabled){var _this2=this;this.eventManager&&eventNames.forEach((function(eventName){_this2._events[eventName]!==enabled&&(_this2._events[eventName]=enabled,enabled?_this2.eventManager.on(eventName,_this2.handleEvent):_this2.eventManager.off(eventName,_this2.handleEvent))}))}},{key:"_onPanStart",value:function _onPanStart(event){var pos=this.getCenter(event),newMapState=this.mapState.panStart({pos:pos}).rotateStart({pos:pos});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}},{key:"_onPan",value:function _onPan(event){return this.isFunctionKeyPressed(event)||event.rightButton?this._onPanRotate(event):this._onPanMove(event)}},{key:"_onPanEnd",value:function _onPanEnd(event){var newMapState=this.mapState.panEnd().rotateEnd();return this.updateViewport(newMapState,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function _onPanMove(event){if(!this.dragPan)return!1;var pos=this.getCenter(event),newMapState=this.mapState.pan({pos:pos});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isPanning:!0}),!0}},{key:"_onPanRotate",value:function _onPanRotate(event){if(!this.dragRotate)return!1;var deltaX=event.deltaX,deltaY=event.deltaY,_this$getCenter=this.getCenter(event),centerY=Object(slicedToArray.a)(_this$getCenter,2)[1],startY=centerY-deltaY,_this$mapState$getVie=this.mapState.getViewportProps(),width=_this$mapState$getVie.width,height=_this$mapState$getVie.height,deltaScaleX=deltaX/width,deltaScaleY=0;deltaY>0?Math.abs(height-startY)>5&&(deltaScaleY=deltaY/(startY-height)*1.2):deltaY<0&&startY>5&&(deltaScaleY=1-centerY/startY),deltaScaleY=Math.min(1,Math.max(-1,deltaScaleY));var newMapState=this.mapState.rotate({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isRotating:!0}),!0}},{key:"_onWheel",value:function _onWheel(event){if(!this.scrollZoom)return!1;event.preventDefault();var pos=this.getCenter(event),delta=event.delta,scale=2/(1+Math.exp(-Math.abs(.01*delta)));delta<0&&0!==scale&&(scale=1/scale);var newMapState=this.mapState.zoom({pos:pos,scale:scale});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isZooming:!0}),this._onWheelEnd(),!0}},{key:"_onWheelEnd",value:function _onWheelEnd(){this.setState({isZooming:!1})}},{key:"_onPinchStart",value:function _onPinchStart(event){var pos=this.getCenter(event),newMapState=this.mapState.zoomStart({pos:pos}).rotateStart({pos:pos});return this._state.startPinchRotation=event.rotation,this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}},{key:"_onPinch",value:function _onPinch(event){if(!this.touchZoom&&!this.touchRotate)return!1;var newMapState=this.mapState;if(this.touchZoom){var scale=event.scale,pos=this.getCenter(event);newMapState=newMapState.zoom({pos:pos,scale:scale})}if(this.touchRotate){var rotation=event.rotation,startPinchRotation=this._state.startPinchRotation;newMapState=newMapState.rotate({deltaScaleX:-(rotation-startPinchRotation)/180})}return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function _onPinchEnd(event){var newMapState=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(newMapState,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function _onDoubleTap(event){if(!this.doubleClickZoom)return!1;var pos=this.getCenter(event),isZoomOut=this.isFunctionKeyPressed(event),newMapState=this.mapState.zoom({pos:pos,scale:isZoomOut?.5:2});return this.updateViewport(newMapState,Object.assign({},LINEAR_TRANSITION_PROPS,{transitionInterpolator:new linear_interpolator_LinearInterpolator({around:pos})})),!0}},{key:"_onKeyDown",value:function _onKeyDown(event){if(!this.keyboard)return!1;var newMapState,funcKey=this.isFunctionKeyPressed(event),mapStateProps=this.mapStateProps;switch(event.srcEvent.keyCode){case 189:newMapState=funcKey?this.getMapState({zoom:mapStateProps.zoom-2}):this.getMapState({zoom:mapStateProps.zoom-1});break;case 187:newMapState=funcKey?this.getMapState({zoom:mapStateProps.zoom+2}):this.getMapState({zoom:mapStateProps.zoom+1});break;case 37:newMapState=funcKey?this.getMapState({bearing:mapStateProps.bearing-15}):this.mapState.pan({pos:[100,0],startPos:[0,0]});break;case 39:newMapState=funcKey?this.getMapState({bearing:mapStateProps.bearing+15}):this.mapState.pan({pos:[-100,0],startPos:[0,0]});break;case 38:newMapState=funcKey?this.getMapState({pitch:mapStateProps.pitch+10}):this.mapState.pan({pos:[0,100],startPos:[0,0]});break;case 40:newMapState=funcKey?this.getMapState({pitch:mapStateProps.pitch-10}):this.mapState.pan({pos:[0,-100],startPos:[0,0]});break;default:return!1}return this.updateViewport(newMapState,LINEAR_TRANSITION_PROPS)}}]),MapController}(),DEPRECATED_PROPS=[{old:"onChangeViewport",new:"onViewportChange"},{old:"perspectiveEnabled",new:"dragRotate"},{old:"onHoverFeatures",new:"onHover"},{old:"onClickFeatures",new:"onClick"},{old:"touchZoomRotate",new:"touchZoom, touchRotate"},{old:"mapControls",new:"controller"}];function checkDeprecatedProps(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};DEPRECATED_PROPS.forEach((function(depProp){if(props.hasOwnProperty(depProp.old)){var warnMessage=function getDeprecatedText(name){return"react-map-gl: `".concat(name,"` is removed.")}(depProp.old);depProp.new&&(warnMessage="".concat(warnMessage," ").concat(function getNewText(name){return"Use `".concat(name,"` instead.")}(depProp.new))),console.warn(warnMessage)}}))}var interactive_map_propTypes=Object.assign({},static_map_StaticMap.propTypes,{maxZoom:prop_types_default.a.number,minZoom:prop_types_default.a.number,maxPitch:prop_types_default.a.number,minPitch:prop_types_default.a.number,onViewStateChange:prop_types_default.a.func,onViewportChange:prop_types_default.a.func,onInteractionStateChange:prop_types_default.a.func,transitionDuration:prop_types_default.a.number,transitionInterpolator:prop_types_default.a.object,transitionInterruption:prop_types_default.a.number,transitionEasing:prop_types_default.a.func,onTransitionStart:prop_types_default.a.func,onTransitionInterrupt:prop_types_default.a.func,onTransitionEnd:prop_types_default.a.func,scrollZoom:prop_types_default.a.bool,dragPan:prop_types_default.a.bool,dragRotate:prop_types_default.a.bool,doubleClickZoom:prop_types_default.a.bool,touchZoom:prop_types_default.a.bool,touchRotate:prop_types_default.a.bool,keyboard:prop_types_default.a.bool,onHover:prop_types_default.a.func,onClick:prop_types_default.a.func,onDblClick:prop_types_default.a.func,onContextMenu:prop_types_default.a.func,onMouseDown:prop_types_default.a.func,onMouseMove:prop_types_default.a.func,onMouseUp:prop_types_default.a.func,onTouchStart:prop_types_default.a.func,onTouchMove:prop_types_default.a.func,onTouchEnd:prop_types_default.a.func,onMouseEnter:prop_types_default.a.func,onMouseLeave:prop_types_default.a.func,onMouseOut:prop_types_default.a.func,onWheel:prop_types_default.a.func,touchAction:prop_types_default.a.string,clickRadius:prop_types_default.a.number,interactiveLayerIds:prop_types_default.a.array,getCursor:prop_types_default.a.func,controller:prop_types_default.a.instanceOf(map_controller_MapController)}),interactive_map_defaultProps=Object.assign({},static_map_StaticMap.defaultProps,MAPBOX_LIMITS,transition_manager_TransitionManager.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onNativeClick:null,onHover:null,onContextMenu:function onContextMenu(event){return event.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoom:!0,touchRotate:!1,keyboard:!0,touchAction:"none",clickRadius:0,getCursor:function getDefaultCursor(_ref){var isDragging=_ref.isDragging,isHovering=_ref.isHovering;return isDragging?"grabbing":isHovering?"pointer":"grab"}}),interactive_map_InteractiveMap=function(_PureComponent){function InteractiveMap(props){var _this;return Object(classCallCheck.a)(this,InteractiveMap),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(InteractiveMap).call(this,props)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{isLoaded:!1,isDragging:!1,isHovering:!1}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_controller",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_eventManager",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_interactiveContext",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_width",0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_height",0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_eventCanvasRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_staticMapRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"getMap",(function(){return _this._staticMapRef.current?_this._staticMapRef.current.getMap():null})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"queryRenderedFeatures",(function(geometry){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},map=_this.getMap();return map&&map.queryRenderedFeatures(geometry,options)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onInteractionStateChange",(function(interactionState){var _interactionState$isD=interactionState.isDragging,isDragging=void 0!==_interactionState$isD&&_interactionState$isD;isDragging!==_this.state.isDragging&&(_this._updateInteractiveContext({isDragging:isDragging}),_this.setState({isDragging:isDragging}));var onInteractionStateChange=_this.props.onInteractionStateChange;onInteractionStateChange&&onInteractionStateChange(interactionState)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onResize",(function(_ref2){var width=_ref2.width,height=_ref2.height;_this._width=width,_this._height=height,_this._setControllerProps(_this.props),_this.props.onResize({width:width,height:height})})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onViewportChange",(function(viewState,interactionState,oldViewState){var _this$props=_this.props,onViewStateChange=_this$props.onViewStateChange,onViewportChange=_this$props.onViewportChange;onViewStateChange&&onViewStateChange({viewState:viewState,interactionState:interactionState,oldViewState:oldViewState}),onViewportChange&&onViewportChange(viewState,interactionState,oldViewState)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onLoad",(function(event){_this.setState({isLoaded:!0}),_this.props.onLoad(event)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onEvent",(function(callbackName,event){var func=_this.props[callbackName];func&&func(_this._normalizeEvent(event))})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onPointerDown",(function(event){switch(event.pointerType){case"touch":_this._onEvent("onTouchStart",event);break;default:_this._onEvent("onMouseDown",event)}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onPointerUp",(function(event){switch(event.pointerType){case"touch":_this._onEvent("onTouchEnd",event);break;default:_this._onEvent("onMouseUp",event)}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onPointerMove",(function(event){switch(event.pointerType){case"touch":_this._onEvent("onTouchMove",event);break;default:_this._onEvent("onMouseMove",event)}if(!_this.state.isDragging){var features,_this$props2=_this.props,onHover=_this$props2.onHover,interactiveLayerIds=_this$props2.interactiveLayerIds;event=_this._normalizeEvent(event),_this.state.isLoaded&&(interactiveLayerIds||onHover)&&(features=_this._getFeatures({pos:event.point,radius:_this.props.clickRadius})),onHover&&(event.features=features,onHover(event));var isHovering=Boolean(interactiveLayerIds&&features&&features.length>0),isEntering=isHovering&&!_this.state.isHovering,isExiting=!isHovering&&_this.state.isHovering;isEntering&&_this._onEvent("onMouseEnter",event),isExiting&&_this._onEvent("onMouseLeave",event),(isEntering||isExiting)&&_this.setState({isHovering:isHovering})}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onClick",(function(event){var _this$props3=_this.props,onClick=_this$props3.onClick,onNativeClick=_this$props3.onNativeClick,onDblClick=_this$props3.onDblClick,doubleClickZoom=_this$props3.doubleClickZoom,callbacks=[],isDoubleClickEnabled=onDblClick||doubleClickZoom;switch(event.type){case"anyclick":callbacks.push(onNativeClick),isDoubleClickEnabled||callbacks.push(onClick);break;case"click":isDoubleClickEnabled&&callbacks.push(onClick)}(callbacks=callbacks.filter(Boolean)).length&&((event=_this._normalizeEvent(event)).features=_this._getFeatures({pos:event.point,radius:_this.props.clickRadius}),callbacks.forEach((function(cb){return cb(event)})))})),checkDeprecatedProps(props),_this._controller=props.controller||new map_controller_MapController,_this._eventManager=new esm.a(null,{touchAction:props.touchAction}),_this._updateInteractiveContext({isDragging:!1,eventManager:_this._eventManager}),_this}return Object(inherits.a)(InteractiveMap,_PureComponent),Object(createClass.a)(InteractiveMap,null,[{key:"supported",value:function supported(){return static_map_StaticMap.supported()}}]),Object(createClass.a)(InteractiveMap,[{key:"componentDidMount",value:function componentDidMount(){var eventManager=this._eventManager,mapContainer=this._eventCanvasRef.current;eventManager.setElement(mapContainer),eventManager.on({pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerup:this._onPointerUp,pointerleave:this._onEvent.bind(this,"onMouseOut"),click:this._onClick,anyclick:this._onClick,dblclick:this._onEvent.bind(this,"onDblClick"),wheel:this._onEvent.bind(this,"onWheel"),contextmenu:this._onEvent.bind(this,"onContextMenu")}),this._setControllerProps(this.props),this._updateInteractiveContext({mapContainer:mapContainer})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._eventManager.destroy()}},{key:"_setControllerProps",value:function _setControllerProps(props){props=Object.assign({},props,props.viewState,{isInteractive:Boolean(props.onViewStateChange||props.onViewportChange),onViewportChange:this._onViewportChange,onStateChange:this._onInteractionStateChange,eventManager:this._eventManager,width:this._width,height:this._height}),this._controller.setOptions(props);var context=this._interactiveContext;context.onViewportChange=props.onViewportChange,context.onViewStateChange=props.onViewStateChange}},{key:"_getFeatures",value:function _getFeatures(_ref3){var features,pos=_ref3.pos,radius=_ref3.radius,queryParams={},map=this.getMap();if(this.props.interactiveLayerIds&&(queryParams.layers=this.props.interactiveLayerIds),radius){var size=radius,bbox=[[pos[0]-size,pos[1]+size],[pos[0]+size,pos[1]-size]];features=map&&map.queryRenderedFeatures(bbox,queryParams)}else features=map&&map.queryRenderedFeatures(pos,queryParams);return features}},{key:"_updateInteractiveContext",value:function _updateInteractiveContext(updatedContext){this._interactiveContext=Object.assign({},this._interactiveContext,updatedContext)}},{key:"_normalizeEvent",value:function _normalizeEvent(event){if(event.lngLat)return event;var _event$offsetCenter=event.offsetCenter,pos=[_event$offsetCenter.x,_event$offsetCenter.y],viewport=new web_mercator_viewport.a(Object.assign({},this.props,{width:this._width,height:this._height}));return event.point=pos,event.lngLat=viewport.unproject(pos),event}},{key:"render",value:function render(){this._setControllerProps(this.props);var _this$props4=this.props,width=_this$props4.width,height=_this$props4.height,style=_this$props4.style,getCursor=_this$props4.getCursor,eventCanvasStyle=Object.assign({position:"relative"},style,{width:width,height:height,cursor:getCursor(this.state)});return react_default.a.createElement(map_context.Provider,{value:this._interactiveContext},react_default.a.createElement("div",{key:"event-canvas",ref:this._eventCanvasRef,style:eventCanvasStyle},react_default.a.createElement(static_map_StaticMap,_extends({},this.props,{width:"100%",height:"100%",style:null,onResize:this._onResize,onLoad:this._onLoad,ref:this._staticMapRef}),this.props.children)))}}]),InteractiveMap}(react.PureComponent);Object(defineProperty.a)(interactive_map_InteractiveMap,"propTypes",interactive_map_propTypes),Object(defineProperty.a)(interactive_map_InteractiveMap,"defaultProps",interactive_map_defaultProps);var source_propTypes={type:prop_types_default.a.string.isRequired,id:prop_types_default.a.string},sourceCounter=0,source_Source=function(_PureComponent){function Source(props){var _this;return Object(classCallCheck.a)(this,Source),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Source).call(this,props)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"id",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"type",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_map",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_sourceOptions",{}),_this.id=props.id||"jsx-source-".concat(sourceCounter++),_this.type=props.type,_this}return Object(inherits.a)(Source,_PureComponent),Object(createClass.a)(Source,[{key:"componentWillUnmount",value:function componentWillUnmount(){this._map.removeSource(this.id)}},{key:"getSource",value:function getSource(){return this._map.getSource(this.id)}},{key:"_createSource",value:function _createSource(){var _this2=this,map=this._map;map.style._loaded?map.addSource(this.id,this._sourceOptions):map.once("styledata",(function(){return _this2.forceUpdate()}))}},{key:"_updateSource",value:function _updateSource(){var sourceOptions=this._sourceOptions,props=this.props;assert(!props.id||props.id===this.id,"source id changed"),assert(props.type===this.type,"source type changed");var changedKey=null,changedKeyCount=0;for(var key in props)"children"!==key&&"id"!==key&&sourceOptions[key]!==props[key]&&(sourceOptions[key]=props[key],changedKey=key,changedKeyCount++);var type=this.type,map=this._map,source=this.getSource();source?changedKeyCount&&("geojson"===type?source.setData(sourceOptions.data):"image"===type?source.updateImage({url:sourceOptions.url,coordinates:sourceOptions.coordinates}):"canvas"!==type&&"video"!==type||1!==changedKeyCount||"coordinates"!==changedKey?(map.removeSource(this.id),map.addSource(sourceOptions)):source.setCoordinates(sourceOptions.coordinates)):this._createSource()}},{key:"_render",value:function _render(context){var _this3=this;return this._map=context.map,this._updateSource(),react_default.a.Children.map(this.props.children,(function(child){return Object(react.cloneElement)(child,{source:_this3.id})}))}},{key:"render",value:function render(){return react_default.a.createElement(map_context.Consumer,null,this._render.bind(this))}}]),Source}(react.PureComponent);function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}Object(defineProperty.a)(source_Source,"propTypes",source_propTypes);var esm_typeof=__webpack_require__(12);function deepEqual(a,b){if(a===b)return!0;if(!a||!b)return!1;if(Array.isArray(a)){if(!Array.isArray(b)||a.length!==b.length)return!1;for(var i=0;i<a.length;i++)if(!deepEqual(a[i],b[i]))return!1;return!0}if(Array.isArray(b))return!1;if("object"===Object(esm_typeof.a)(a)&&"object"===Object(esm_typeof.a)(b)){var aKeys=Object.keys(a),bKeys=Object.keys(b);if(aKeys.length!==bKeys.length)return!1;for(var _i=0,_aKeys=aKeys;_i<_aKeys.length;_i++){var key=_aKeys[_i];if(!b.hasOwnProperty(key))return!1;if(!deepEqual(a[key],b[key]))return!1}return!0}return!1}var layer_propTypes={type:prop_types_default.a.string.isRequired,id:prop_types_default.a.string,source:prop_types_default.a.string,beforeId:prop_types_default.a.string};var layerCounter=0,layer_Layer=function(_PureComponent){function Layer(props){var _this;return Object(classCallCheck.a)(this,Layer),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Layer).call(this,props)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"id",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"type",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_map",null),_this.id=props.id||"jsx-layer-".concat(layerCounter++),_this.type=props.type,_this}return Object(inherits.a)(Layer,_PureComponent),Object(createClass.a)(Layer,[{key:"componentDidMount",value:function componentDidMount(){this._createLayer()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){this._updateLayer(prevProps)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._map.removeLayer(this.id)}},{key:"_createLayer",value:function _createLayer(){var _this2=this,map=this._map,options=Object.assign({},this.props);options.id=this.id,delete options.beforeId,map.style._loaded?map.addLayer(options,this.props.beforeId):map.once("styledata",(function(){return _this2.forceUpdate()}))}},{key:"_updateLayer",value:function _updateLayer(prevProps){var props=this.props;assert(!props.id||props.id===this.id,"layer id changed"),assert(props.type===this.type,"layer type changed");var map=this._map;if(map.getLayer(this.id))try{!function diffLayerStyles(map,id,props,prevProps){var _props$layout=props.layout,layout=void 0===_props$layout?{}:_props$layout,_props$paint=props.paint,paint=void 0===_props$paint?{}:_props$paint,filter=props.filter,minzoom=props.minzoom,maxzoom=props.maxzoom,beforeId=props.beforeId,otherProps=_objectWithoutProperties(props,["layout","paint","filter","minzoom","maxzoom","beforeId"]);if(beforeId!==prevProps.beforeId&&map.moveLayer(id,beforeId),layout!==prevProps.layout)for(var key in layout)deepEqual(layout[key],prevProps.layout[key])||map.setLayoutProperty(id,key,layout[key]);if(paint!==prevProps.paint)for(var _key in paint)deepEqual(paint[_key],prevProps.paint[_key])||map.setPaintProperty(id,_key,paint[_key]);for(var _key2 in deepEqual(filter,prevProps.filter)||map.setFilter(id,filter),minzoom===prevProps.minzoom&&maxzoom===prevProps.maxzoom||map.setLayerZoomRange(id,minzoom,maxzoom),otherProps)deepEqual(otherProps[_key2],prevProps[_key2])||map.setLayerProperty(id,_key2,otherProps[_key2])}(map,this.id,props,prevProps)}catch(error){console.warn(error)}else this._createLayer()}},{key:"_render",value:function _render(context){return this._map=context.map,null}},{key:"render",value:function render(){return react_default.a.createElement(map_context.Consumer,null,this._render.bind(this))}}]),Layer}(react.PureComponent);Object(defineProperty.a)(layer_Layer,"propTypes",layer_propTypes);var base_control_propTypes={captureScroll:prop_types_default.a.bool,captureDrag:prop_types_default.a.bool,captureClick:prop_types_default.a.bool,captureDoubleClick:prop_types_default.a.bool},base_control_BaseControl=function(_PureComponent){function BaseControl(){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,BaseControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(BaseControl)).call.apply(_getPrototypeOf2,[this].concat(args))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_context",{}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_events",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_containerRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onScroll",(function(evt){_this.props.captureScroll&&evt.stopPropagation()})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onDragStart",(function(evt){_this.props.captureDrag&&evt.stopPropagation()})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onDblClick",(function(evt){_this.props.captureDoubleClick&&evt.stopPropagation()})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onClick",(function(evt){_this.props.captureClick&&evt.stopPropagation()})),_this}return Object(inherits.a)(BaseControl,_PureComponent),Object(createClass.a)(BaseControl,[{key:"componentDidMount",value:function componentDidMount(){var ref=this._containerRef.current;if(ref){var eventManager=this._context.eventManager;eventManager&&(this._events={wheel:this._onScroll,panstart:this._onDragStart,anyclick:this._onClick,click:this._onClick,dblclick:this._onDblClick},eventManager.on(this._events,ref))}}},{key:"componentWillUnmount",value:function componentWillUnmount(){var eventManager=this._context.eventManager;eventManager&&this._events&&eventManager.off(this._events)}},{key:"_render",value:function _render(){throw new Error("_render() not implemented")}},{key:"render",value:function render(){var _this2=this;return react_default.a.createElement(map_context.Consumer,null,(function(context){return _this2._context=context,_this2._render()}))}}]),BaseControl}(react.PureComponent);Object(defineProperty.a)(base_control_BaseControl,"propTypes",base_control_propTypes),Object(defineProperty.a)(base_control_BaseControl,"defaultProps",{captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0});var get=__webpack_require__(20),draggable_control_propTypes=Object.assign({},base_control_BaseControl.propTypes,{draggable:prop_types_default.a.bool,onDrag:prop_types_default.a.func,onDragEnd:prop_types_default.a.func,onDragStart:prop_types_default.a.func,offsetLeft:prop_types_default.a.number,offsetTop:prop_types_default.a.number}),draggable_control_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{draggable:!1,offsetLeft:0,offsetTop:0}),draggable_control_DraggableControl=function(_BaseControl){function DraggableControl(){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,DraggableControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(DraggableControl)).call.apply(_getPrototypeOf2,[this].concat(args))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{dragPos:null,dragOffset:null}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_dragEvents",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onDragStart",(function(event){var _this$props=_this.props,draggable=_this$props.draggable,captureDrag=_this$props.captureDrag;if((draggable||captureDrag)&&event.stopPropagation(),draggable){var dragPos=_this._getDragEventPosition(event),dragOffset=_this._getDragEventOffset(event);_this.setState({dragPos:dragPos,dragOffset:dragOffset}),_this._setupDragEvents();var onDragStart=_this.props.onDragStart;if(onDragStart&&dragOffset){var callbackEvent=Object.assign({},event);callbackEvent.lngLat=_this._getDragLngLat(dragPos,dragOffset),onDragStart(callbackEvent)}}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onDrag",(function(event){event.stopPropagation();var dragPos=_this._getDragEventPosition(event);_this.setState({dragPos:dragPos});var onDrag=_this.props.onDrag,dragOffset=_this.state.dragOffset;if(onDrag&&dragOffset){var callbackEvent=Object.assign({},event);callbackEvent.lngLat=_this._getDragLngLat(dragPos,dragOffset),onDrag(callbackEvent)}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onDragEnd",(function(event){var _this$state=_this.state,dragPos=_this$state.dragPos,dragOffset=_this$state.dragOffset;event.stopPropagation(),_this.setState({dragPos:null,dragOffset:null}),_this._removeDragEvents();var onDragEnd=_this.props.onDragEnd;if(onDragEnd&&dragPos&&dragOffset){var callbackEvent=Object.assign({},event);callbackEvent.lngLat=_this._getDragLngLat(dragPos,dragOffset),onDragEnd(callbackEvent)}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onDragCancel",(function(event){event.stopPropagation(),_this.setState({dragPos:null,dragOffset:null}),_this._removeDragEvents()})),_this}return Object(inherits.a)(DraggableControl,_BaseControl),Object(createClass.a)(DraggableControl,[{key:"componentWillUnmount",value:function componentWillUnmount(){Object(get.a)(Object(getPrototypeOf.a)(DraggableControl.prototype),"componentWillUnmount",this).call(this),this._removeDragEvents()}},{key:"_setupDragEvents",value:function _setupDragEvents(){var eventManager=this._context.eventManager;eventManager&&(this._dragEvents={panmove:this._onDrag,panend:this._onDragEnd,pancancel:this._onDragCancel},eventManager.on(this._dragEvents))}},{key:"_removeDragEvents",value:function _removeDragEvents(){var eventManager=this._context.eventManager;eventManager&&this._dragEvents&&(eventManager.off(this._dragEvents),this._dragEvents=null)}},{key:"_getDragEventPosition",value:function _getDragEventPosition(event){var _event$offsetCenter=event.offsetCenter;return[_event$offsetCenter.x,_event$offsetCenter.y]}},{key:"_getDragEventOffset",value:function _getDragEventOffset(event){var _event$center=event.center,x=_event$center.x,y=_event$center.y,container=this._containerRef.current;if(container){var rect=container.getBoundingClientRect();return[rect.left-x,rect.top-y]}return null}},{key:"_getDraggedPosition",value:function _getDraggedPosition(dragPos,dragOffset){return[dragPos[0]+dragOffset[0],dragPos[1]+dragOffset[1]]}},{key:"_getDragLngLat",value:function _getDragLngLat(dragPos,dragOffset){var _this$props2=this.props,offsetLeft=_this$props2.offsetLeft,offsetTop=_this$props2.offsetTop,_this$_getDraggedPosi=this._getDraggedPosition(dragPos,dragOffset),_this$_getDraggedPosi2=Object(slicedToArray.a)(_this$_getDraggedPosi,2),x=_this$_getDraggedPosi2[0],y=_this$_getDraggedPosi2[1];return this._context.viewport.unproject([x-offsetLeft,y-offsetTop])}}]),DraggableControl}(base_control_BaseControl);Object(defineProperty.a)(draggable_control_DraggableControl,"propTypes",draggable_control_propTypes),Object(defineProperty.a)(draggable_control_DraggableControl,"defaultProps",draggable_control_defaultProps);var marker_propTypes=Object.assign({},draggable_control_DraggableControl.propTypes,{className:prop_types_default.a.string,longitude:prop_types_default.a.number.isRequired,latitude:prop_types_default.a.number.isRequired}),marker_defaultProps=Object.assign({},draggable_control_DraggableControl.defaultProps,{className:""}),marker_Marker=function(_DraggableControl){function Marker(){return Object(classCallCheck.a)(this,Marker),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Marker).apply(this,arguments))}return Object(inherits.a)(Marker,_DraggableControl),Object(createClass.a)(Marker,[{key:"_getPosition",value:function _getPosition(){var _this$props=this.props,longitude=_this$props.longitude,latitude=_this$props.latitude,offsetLeft=_this$props.offsetLeft,offsetTop=_this$props.offsetTop,_this$state=this.state,dragPos=_this$state.dragPos,dragOffset=_this$state.dragOffset;if(dragPos&&dragOffset)return this._getDraggedPosition(dragPos,dragOffset);var _this$_context$viewpo=this._context.viewport.project([longitude,latitude]),_this$_context$viewpo2=Object(slicedToArray.a)(_this$_context$viewpo,2),x=_this$_context$viewpo2[0],y=_this$_context$viewpo2[1];return[x+=offsetLeft,y+=offsetTop]}},{key:"_render",value:function _render(){var _this$props2=this.props,className=_this$props2.className,draggable=_this$props2.draggable,dragPos=this.state.dragPos,_this$_getPosition=this._getPosition(),_this$_getPosition2=Object(slicedToArray.a)(_this$_getPosition,2),containerStyle={position:"absolute",left:_this$_getPosition2[0],top:_this$_getPosition2[1],cursor:draggable?dragPos?"grabbing":"grab":"auto"};return react_default.a.createElement("div",{className:"mapboxgl-marker ".concat(className),ref:this._containerRef,style:containerStyle},this.props.children)}}]),Marker}(draggable_control_DraggableControl);Object(defineProperty.a)(marker_Marker,"propTypes",marker_propTypes),Object(defineProperty.a)(marker_Marker,"defaultProps",marker_defaultProps);var ANCHOR_POSITION={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}},ANCHOR_TYPES=Object.keys(ANCHOR_POSITION);var popup_propTypes=Object.assign({},base_control_BaseControl.propTypes,{className:prop_types_default.a.string,longitude:prop_types_default.a.number.isRequired,latitude:prop_types_default.a.number.isRequired,altitude:prop_types_default.a.number,offsetLeft:prop_types_default.a.number,offsetTop:prop_types_default.a.number,tipSize:prop_types_default.a.number,closeButton:prop_types_default.a.bool,closeOnClick:prop_types_default.a.bool,anchor:prop_types_default.a.oneOf(Object.keys(ANCHOR_POSITION)),dynamicPosition:prop_types_default.a.bool,sortByDepth:prop_types_default.a.bool,onClose:prop_types_default.a.func}),popup_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{className:"",altitude:0,offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function onClose(){}}),popup_Popup=function(_BaseControl){function Popup(){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,Popup);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(Popup)).call.apply(_getPrototypeOf2,[this].concat(args))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_closeOnClick",!1),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_contentRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onClick",(function(evt){if(_this.props.captureClick&&evt.stopPropagation(),_this.props.closeOnClick||"mapboxgl-popup-close-button"===evt.target.className){_this.props.onClose();var eventManager=_this._context.eventManager;eventManager&&eventManager.once("click",(function(e){return e.stopPropagation()}),evt.target)}})),_this}return Object(inherits.a)(Popup,_BaseControl),Object(createClass.a)(Popup,[{key:"componentDidMount",value:function componentDidMount(){Object(get.a)(Object(getPrototypeOf.a)(Popup.prototype),"componentDidMount",this).call(this),this.forceUpdate()}},{key:"_getPosition",value:function _getPosition(x,y){var viewport=this._context.viewport,_this$props=this.props,anchor=_this$props.anchor,dynamicPosition=_this$props.dynamicPosition,tipSize=_this$props.tipSize,content=this._contentRef.current;return content&&dynamicPosition?function getDynamicPosition(_ref){var x=_ref.x,y=_ref.y,width=_ref.width,height=_ref.height,selfWidth=_ref.selfWidth,selfHeight=_ref.selfHeight,anchor=_ref.anchor,_ref$padding=_ref.padding,padding=void 0===_ref$padding?0:_ref$padding,_ANCHOR_POSITION$anch=ANCHOR_POSITION[anchor],anchorX=_ANCHOR_POSITION$anch.x,anchorY=_ANCHOR_POSITION$anch.y,top=y-anchorY*selfHeight,bottom=top+selfHeight;if(top<padding)for(;top<padding&&anchorY>=.5;)anchorY-=.5,top+=.5*selfHeight;else if(bottom>height-padding)for(;bottom>height-padding&&anchorY<=.5;)anchorY+=.5,bottom-=.5*selfHeight;var left=x-anchorX*selfWidth,right=left+selfWidth,xStep=.5;if(.5===anchorY&&(anchorX=Math.floor(anchorX),xStep=1),left<padding)for(;left<padding&&anchorX>=xStep;)anchorX-=xStep,left+=xStep*selfWidth;else if(right>width-padding)for(;right>width-padding&&anchorX<=1-xStep;)anchorX+=xStep,right-=xStep*selfWidth;return ANCHOR_TYPES.find((function(positionType){var anchorPosition=ANCHOR_POSITION[positionType];return anchorPosition.x===anchorX&&anchorPosition.y===anchorY}))||anchor}({x:x,y:y,anchor:anchor,padding:tipSize,width:viewport.width,height:viewport.height,selfWidth:content.clientWidth,selfHeight:content.clientHeight}):anchor}},{key:"_getContainerStyle",value:function _getContainerStyle(x,y,z,positionType){var viewport=this._context.viewport,_this$props2=this.props,offsetLeft=_this$props2.offsetLeft,offsetTop=_this$props2.offsetTop,sortByDepth=_this$props2.sortByDepth,anchorPosition=ANCHOR_POSITION[positionType],left=x+offsetLeft,top=y+offsetTop,style={position:"absolute",transform:"\n        translate(".concat(100*-anchorPosition.x,"%, ").concat(100*-anchorPosition.y,"%)\n        translate(").concat(left,"px, ").concat(top,"px)\n      "),display:void 0,zIndex:void 0};return sortByDepth?(z>1||z<-1||x<0||x>viewport.width||y<0||y>viewport.height?style.display="none":style.zIndex=Math.floor((1-z)/2*1e5),style):style}},{key:"_renderTip",value:function _renderTip(positionType){var tipSize=this.props.tipSize;return react_default.a.createElement("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:tipSize}})}},{key:"_renderContent",value:function _renderContent(){var _this$props3=this.props,closeButton=_this$props3.closeButton,children=_this$props3.children,onClick=this._context.eventManager?null:this._onClick;return react_default.a.createElement("div",{key:"content",ref:this._contentRef,className:"mapboxgl-popup-content",onClick:onClick},closeButton&&react_default.a.createElement("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button"},""),children)}},{key:"_render",value:function _render(){var _this$props4=this.props,className=_this$props4.className,longitude=_this$props4.longitude,latitude=_this$props4.latitude,altitude=_this$props4.altitude,_this$_context$viewpo=this._context.viewport.project([longitude,latitude,altitude]),_this$_context$viewpo2=Object(slicedToArray.a)(_this$_context$viewpo,3),x=_this$_context$viewpo2[0],y=_this$_context$viewpo2[1],z=_this$_context$viewpo2[2],positionType=this._getPosition(x,y),containerStyle=this._getContainerStyle(x,y,z,positionType);return react_default.a.createElement("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(positionType," ").concat(className),style:containerStyle,ref:this._containerRef},this._renderTip(positionType),this._renderContent())}}]),Popup}(base_control_BaseControl);Object(defineProperty.a)(popup_Popup,"propTypes",popup_propTypes),Object(defineProperty.a)(popup_Popup,"defaultProps",popup_defaultProps);var geolocate_utils_supported,globals=__webpack_require__(67),fullscreen_control_propTypes=Object.assign({},base_control_BaseControl.propTypes,{className:prop_types_default.a.string,container:prop_types_default.a.object}),fullscreen_control_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{className:"",container:null}),fullscreen_control_FullscreenControl=function(_BaseControl){function FullscreenControl(){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,FullscreenControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(FullscreenControl)).call.apply(_getPrototypeOf2,[this].concat(args))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{isFullscreen:!1,showButton:!1}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_mapboxFullscreenControl",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onFullscreenChange",(function(){var nextState=!_this._mapboxFullscreenControl._fullscreen;_this._mapboxFullscreenControl._fullscreen=nextState,_this.setState({isFullscreen:nextState})})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onClickFullscreen",(function(){_this._mapboxFullscreenControl._onClickFullscreen()})),_this}return Object(inherits.a)(FullscreenControl,_BaseControl),Object(createClass.a)(FullscreenControl,[{key:"componentDidMount",value:function componentDidMount(){var container=this.props.container||this._context.mapContainer;this._mapboxFullscreenControl=new mapbox_gl_default.a.FullscreenControl({container:container}),this.setState({showButton:this._mapboxFullscreenControl._checkFullscreenSupport()}),globals.a.addEventListener(this._mapboxFullscreenControl._fullscreenchange,this._onFullscreenChange)}},{key:"componentWillUnmount",value:function componentWillUnmount(){globals.a.removeEventListener(this._mapboxFullscreenControl._fullscreenchange,this._onFullscreenChange)}},{key:"_renderButton",value:function _renderButton(type,label,callback){return react_default.a.createElement("button",{key:type,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(type),type:"button",title:label,onClick:callback})}},{key:"_render",value:function _render(){if(!this.state.showButton)return null;var className=this.props.className,type=this.state.isFullscreen?"shrink":"fullscreen";return react_default.a.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(className),ref:this._containerRef},this._renderButton(type,"Toggle fullscreen",this._onClickFullscreen))}}]),FullscreenControl}(base_control_BaseControl);Object(defineProperty.a)(fullscreen_control_FullscreenControl,"propTypes",fullscreen_control_propTypes),Object(defineProperty.a)(fullscreen_control_FullscreenControl,"defaultProps",fullscreen_control_defaultProps);var geolocate_control_LINEAR_TRANSITION_PROPS=Object.assign({},transition_manager_TransitionManager.defaultProps,{transitionDuration:500}),geolocate_control_noop=function noop(){},geolocate_control_propTypes=Object.assign({},base_control_BaseControl.propTypes,{className:prop_types_default.a.string,style:prop_types_default.a.object,positionOptions:prop_types_default.a.object,fitBoundsOptions:prop_types_default.a.object,trackUserLocation:prop_types_default.a.bool,showUserLocation:prop_types_default.a.bool,onViewStateChange:prop_types_default.a.func,onViewportChange:prop_types_default.a.func}),geolocate_control_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{className:"",style:{},positionOptions:null,fitBoundsOptions:null,trackUserLocation:!1,showUserLocation:!0}),geolocate_control_GeolocateControl=function(_BaseControl){function GeolocateControl(){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,GeolocateControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(GeolocateControl)).call.apply(_getPrototypeOf2,[this].concat(args))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{supportsGeolocation:!1,markerPosition:null}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_mapboxGeolocateControl",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_geolocateButtonRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_markerRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_setupMapboxGeolocateControl",(function(supportsGeolocation){if(supportsGeolocation){var controlOptions={};["positionOptions","fitBoundsOptions","trackUserLocation","showUserLocation"].forEach((function(prop){prop in _this.props&&null!==_this.props[prop]&&(controlOptions[prop]=_this.props[prop])})),_this._mapboxGeolocateControl=new mapbox_gl_default.a.GeolocateControl(controlOptions),_this._mapboxGeolocateControl._watchState="OFF",_this._mapboxGeolocateControl._geolocateButton=_this._geolocateButtonRef.current,_this._mapboxGeolocateControl._updateMarker=_this._updateMarker,_this._mapboxGeolocateControl._updateCamera=_this._updateCamera,_this._mapboxGeolocateControl._setup=!0}else console.warn("Geolocation support is not available, the GeolocateControl will not be visible.")})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onClickGeolocate",(function(){return _this._mapboxGeolocateControl.trigger()})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_updateMarker",(function(position){position&&_this.setState({markerPosition:position.coords})})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_getBounds",(function(position){var center=new mapbox_gl_default.a.LngLat(position.coords.longitude,position.coords.latitude),radius=position.coords.accuracy,bounds=center.toBounds(radius);return[[bounds._ne.lng,bounds._ne.lat],[bounds._sw.lng,bounds._sw.lat]]})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_updateCamera",(function(position){var viewport=_this._context.viewport,bounds=_this._getBounds(position),_fitBounds=new web_mercator_viewport.a(viewport).fitBounds(bounds),longitude=_fitBounds.longitude,latitude=_fitBounds.latitude,zoom=_fitBounds.zoom,newViewState=Object.assign({},viewport,{longitude:longitude,latitude:latitude,zoom:zoom}),mapState=new map_state_MapState(newViewState),viewState=Object.assign({},mapState.getViewportProps(),geolocate_control_LINEAR_TRANSITION_PROPS),onViewportChange=_this.props.onViewportChange||_this._context.onViewportChange||geolocate_control_noop;(_this.props.onViewStateChange||_this._context.onViewStateChange||geolocate_control_noop)({viewState:viewState}),onViewportChange(viewState)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_renderButton",(function(type,label,callback){return react_default.a.createElement("button",{key:type,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(type),ref:_this._geolocateButtonRef,type:"button",title:label,onClick:callback})})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_renderMarker",(function(){var showUserLocation=_this.props.showUserLocation,markerPosition=_this.state.markerPosition;return showUserLocation&&markerPosition?react_default.a.createElement(marker_Marker,{key:"location-maker",ref:_this._markerRef,className:"mapboxgl-user-location-dot",longitude:markerPosition.longitude,latitude:markerPosition.latitude,onContextMenu:function onContextMenu(e){return e.preventDefault()},captureDrag:!1,captureDoubleClick:!1}):null})),_this}return Object(inherits.a)(GeolocateControl,_BaseControl),Object(createClass.a)(GeolocateControl,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;(function isGeolocationSupported(){return void 0!==geolocate_utils_supported?Promise.resolve(geolocate_utils_supported):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((function(p){return geolocate_utils_supported="denied"!==p.state})):(geolocate_utils_supported=Boolean(window.navigator.geolocation),Promise.resolve(geolocate_utils_supported))})().then((function(result){_this2.setState({supportsGeolocation:result}),_this2._setupMapboxGeolocateControl(result)}))}},{key:"componentDidUpdate",value:function componentDidUpdate(){var markerRef=this._markerRef.current;this._mapboxGeolocateControl&&markerRef&&(this._mapboxGeolocateControl._dotElement=markerRef._containerRef.current)}},{key:"componentWillUnmount",value:function componentWillUnmount(){var geolocationWatchID=this._mapboxGeolocateControl._geolocationWatchID;void 0!==geolocationWatchID&&(window.navigator.geolocation.clearWatch(geolocationWatchID),this._mapboxGeolocateControl._geolocationWatchID=void 0)}},{key:"_render",value:function _render(){if(!this.state.supportsGeolocation)return null;var _this$props=this.props,className=_this$props.className,style=_this$props.style;return react_default.a.createElement("div",null,this._renderMarker(),react_default.a.createElement("div",{key:"geolocate-control",className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(className),ref:this._containerRef,style:style,onContextMenu:function onContextMenu(e){return e.preventDefault()}},this._renderButton("geolocate","Geolocate",this._onClickGeolocate)))}}]),GeolocateControl}(base_control_BaseControl);Object(defineProperty.a)(geolocate_control_GeolocateControl,"propTypes",geolocate_control_propTypes),Object(defineProperty.a)(geolocate_control_GeolocateControl,"defaultProps",geolocate_control_defaultProps);var navigation_control_noop=function noop(){},navigation_control_propTypes=Object.assign({},base_control_BaseControl.propTypes,{className:prop_types_default.a.string,onViewStateChange:prop_types_default.a.func,onViewportChange:prop_types_default.a.func,showCompass:prop_types_default.a.bool,showZoom:prop_types_default.a.bool}),navigation_control_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{className:"",showCompass:!0,showZoom:!0}),navigation_control_NavigationControl=function(_BaseControl){function NavigationControl(props){var _this;return Object(classCallCheck.a)(this,NavigationControl),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(NavigationControl).call(this,props)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onZoomIn",(function(){_this._updateViewport({zoom:_this._context.viewport.zoom+1})})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onZoomOut",(function(){_this._updateViewport({zoom:_this._context.viewport.zoom-1})})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_onResetNorth",(function(){_this._updateViewport({bearing:0,pitch:0})})),checkDeprecatedProps(props),_this}return Object(inherits.a)(NavigationControl,_BaseControl),Object(createClass.a)(NavigationControl,[{key:"_updateViewport",value:function _updateViewport(opts){var viewport=this._context.viewport,mapState=new map_state_MapState(Object.assign({},viewport,opts)),viewState=Object.assign({},mapState.getViewportProps(),LINEAR_TRANSITION_PROPS),onViewportChange=this.props.onViewportChange||this._context.onViewportChange||navigation_control_noop;(this.props.onViewStateChange||this._context.onViewStateChange||navigation_control_noop)({viewState:viewState}),onViewportChange(viewState)}},{key:"_renderCompass",value:function _renderCompass(){var bearing=this._context.viewport.bearing;return react_default.a.createElement("span",{className:"mapboxgl-ctrl-compass-arrow",style:{transform:"rotate(".concat(-bearing,"deg)")}})}},{key:"_renderButton",value:function _renderButton(type,label,callback,children){return react_default.a.createElement("button",{key:type,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(type),type:"button",title:label,onClick:callback},children)}},{key:"_render",value:function _render(){var _this$props=this.props,className=_this$props.className,showCompass=_this$props.showCompass,showZoom=_this$props.showZoom;return react_default.a.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(className),ref:this._containerRef},showZoom&&this._renderButton("zoom-in","Zoom In",this._onZoomIn),showZoom&&this._renderButton("zoom-out","Zoom Out",this._onZoomOut),showCompass&&this._renderButton("compass","Reset North",this._onResetNorth,this._renderCompass()))}}]),NavigationControl}(base_control_BaseControl);Object(defineProperty.a)(navigation_control_NavigationControl,"propTypes",navigation_control_propTypes),Object(defineProperty.a)(navigation_control_NavigationControl,"defaultProps",navigation_control_defaultProps);var canvas_overlay_propTypes=Object.assign({},base_control_BaseControl.propTypes,{redraw:prop_types_default.a.func.isRequired}),canvas_overlay_CanvasOverlay=function(_BaseControl){function CanvasOverlay(){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,CanvasOverlay);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(CanvasOverlay)).call.apply(_getPrototypeOf2,[this].concat(args))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_canvas",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_ctx",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"_redraw",(function(){var ctx=_this._ctx;if(ctx){var pixelRatio=globals.b.devicePixelRatio||1;ctx.save(),ctx.scale(pixelRatio,pixelRatio);var _this$_context=_this._context,viewport=_this$_context.viewport,isDragging=_this$_context.isDragging;_this.props.redraw({width:viewport.width,height:viewport.height,ctx:ctx,isDragging:isDragging,project:viewport.project.bind(viewport),unproject:viewport.unproject.bind(viewport)}),ctx.restore()}})),_this}return Object(inherits.a)(CanvasOverlay,_BaseControl),Object(createClass.a)(CanvasOverlay,[{key:"componentDidMount",value:function componentDidMount(){var canvas=this._containerRef.current;canvas&&(this._canvas=canvas,this._ctx=canvas.getContext("2d")),this._redraw()}},{key:"_render",value:function _render(){var pixelRatio=globals.b.devicePixelRatio||1,_this$_context$viewpo=this._context.viewport,width=_this$_context$viewpo.width,height=_this$_context$viewpo.height;return this._redraw(),react_default.a.createElement("canvas",{ref:this._containerRef,width:width*pixelRatio,height:height*pixelRatio,style:{width:"".concat(width,"px"),height:"".concat(height,"px"),position:"absolute",left:0,top:0}})}}]),CanvasOverlay}(base_control_BaseControl);Object(defineProperty.a)(canvas_overlay_CanvasOverlay,"propTypes",canvas_overlay_propTypes),Object(defineProperty.a)(canvas_overlay_CanvasOverlay,"defaultProps",{captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1});var html_overlay_propTypes=Object.assign({},base_control_BaseControl.propTypes,{redraw:prop_types_default.a.func.isRequired,style:prop_types_default.a.object}),html_overlay_HTMLOverlay=function(_BaseControl){function HTMLOverlay(){return Object(classCallCheck.a)(this,HTMLOverlay),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(HTMLOverlay).apply(this,arguments))}return Object(inherits.a)(HTMLOverlay,_BaseControl),Object(createClass.a)(HTMLOverlay,[{key:"_render",value:function _render(){var _this$_context=this._context,viewport=_this$_context.viewport,isDragging=_this$_context.isDragging,style=Object.assign({position:"absolute",left:0,top:0,width:viewport.width,height:viewport.height},this.props.style);return react_default.a.createElement("div",{ref:this._containerRef,style:style},this.props.redraw({width:viewport.width,height:viewport.height,isDragging:isDragging,project:viewport.project.bind(viewport),unproject:viewport.unproject.bind(viewport)}))}}]),HTMLOverlay}(base_control_BaseControl);Object(defineProperty.a)(html_overlay_HTMLOverlay,"propTypes",html_overlay_propTypes),Object(defineProperty.a)(html_overlay_HTMLOverlay,"defaultProps",{captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1});var svg_overlay_propTypes=Object.assign({},base_control_BaseControl.propTypes,{redraw:prop_types_default.a.func.isRequired,style:prop_types_default.a.object}),svg_overlay_SVGOverlay=function(_BaseControl){function SVGOverlay(){return Object(classCallCheck.a)(this,SVGOverlay),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(SVGOverlay).apply(this,arguments))}return Object(inherits.a)(SVGOverlay,_BaseControl),Object(createClass.a)(SVGOverlay,[{key:"_render",value:function _render(){var _this$_context=this._context,viewport=_this$_context.viewport,isDragging=_this$_context.isDragging,style=Object.assign({position:"absolute",left:0,top:0},this.props.style);return react_default.a.createElement("svg",{width:viewport.width,height:viewport.height,ref:this._containerRef,style:style},this.props.redraw({width:viewport.width,height:viewport.height,isDragging:isDragging,project:viewport.project.bind(viewport),unproject:viewport.unproject.bind(viewport)}))}}]),SVGOverlay}(base_control_BaseControl);Object(defineProperty.a)(svg_overlay_SVGOverlay,"propTypes",svg_overlay_propTypes),Object(defineProperty.a)(svg_overlay_SVGOverlay,"defaultProps",{captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1}),__webpack_require__.d(__webpack_exports__,"default",(function(){return interactive_map_InteractiveMap})),__webpack_require__.d(__webpack_exports__,"InteractiveMap",(function(){return interactive_map_InteractiveMap})),__webpack_require__.d(__webpack_exports__,"StaticMap",(function(){return static_map_StaticMap})),__webpack_require__.d(__webpack_exports__,"Source",(function(){return source_Source})),__webpack_require__.d(__webpack_exports__,"Layer",(function(){return layer_Layer})),__webpack_require__.d(__webpack_exports__,"BaseControl",(function(){return base_control_BaseControl})),__webpack_require__.d(__webpack_exports__,"Marker",(function(){return marker_Marker})),__webpack_require__.d(__webpack_exports__,"Popup",(function(){return popup_Popup})),__webpack_require__.d(__webpack_exports__,"FullscreenControl",(function(){return fullscreen_control_FullscreenControl})),__webpack_require__.d(__webpack_exports__,"GeolocateControl",(function(){return geolocate_control_GeolocateControl})),__webpack_require__.d(__webpack_exports__,"NavigationControl",(function(){return navigation_control_NavigationControl})),__webpack_require__.d(__webpack_exports__,"CanvasOverlay",(function(){return canvas_overlay_CanvasOverlay})),__webpack_require__.d(__webpack_exports__,"HTMLOverlay",(function(){return html_overlay_HTMLOverlay})),__webpack_require__.d(__webpack_exports__,"SVGOverlay",(function(){return svg_overlay_SVGOverlay})),__webpack_require__.d(__webpack_exports__,"TRANSITION_EVENTS",(function(){return TRANSITION_EVENTS})),__webpack_require__.d(__webpack_exports__,"TransitionInterpolator",(function(){return transition_interpolator_TransitionInterpolator})),__webpack_require__.d(__webpack_exports__,"LinearInterpolator",(function(){return linear_interpolator_LinearInterpolator})),__webpack_require__.d(__webpack_exports__,"FlyToInterpolator",(function(){return viewport_fly_to_interpolator_ViewportFlyToInterpolator})),__webpack_require__.d(__webpack_exports__,"MapController",(function(){return map_controller_MapController})),__webpack_require__.d(__webpack_exports__,"_MapContext",(function(){return map_context}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var register_loaders=__webpack_require__(431),regenerator=__webpack_require__(11),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(18),globals=__webpack_require__(262),slicedToArray=__webpack_require__(9),BIG_ENDIAN=!1,LITTLE_ENDIAN=!0,mimeTypeMap=new Map([["image/png",{test:function isPng(dataView){return dataView.byteLength>=24&&2303741511===dataView.getUint32(0,BIG_ENDIAN)},getSize:function getPngSize(dataView){return{width:dataView.getUint32(16,BIG_ENDIAN),height:dataView.getUint32(20,BIG_ENDIAN)}}}],["image/jpeg",{test:function isJpeg(dataView){return dataView.byteLength>=3&&65496===dataView.getUint16(0,BIG_ENDIAN)&&255===dataView.getUint8(2,BIG_ENDIAN)},getSize:function getJpegSize(dataView){if(dataView.byteLength<2||65496!==dataView.getUint16(0,BIG_ENDIAN))return null;var _getJpegMarkers=function getJpegMarkers(){for(var tableMarkers=new Set([65499,65476,65484,65501,65534]),i=65504;i<65520;++i)tableMarkers.add(i);var sofMarkers=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:tableMarkers,sofMarkers:sofMarkers}}(),tableMarkers=_getJpegMarkers.tableMarkers,sofMarkers=_getJpegMarkers.sofMarkers,i=2;for(;i<dataView.byteLength;){var marker=dataView.getUint16(i,BIG_ENDIAN);if(sofMarkers.has(marker))return{height:dataView.getUint16(i+5,BIG_ENDIAN),width:dataView.getUint16(i+7,BIG_ENDIAN)};if(!tableMarkers.has(marker))return null;i+=2,i+=dataView.getUint16(i,BIG_ENDIAN)}return null}}],["image/gif",{test:function isGif(dataView){return dataView.byteLength>=10&&1195984440===dataView.getUint32(0,BIG_ENDIAN)},getSize:function getGifSize(dataView){return{width:dataView.getUint16(6,LITTLE_ENDIAN),height:dataView.getUint16(8,LITTLE_ENDIAN)}}}],["image/bmp",{test:function isBmp(dataView){return dataView.byteLength>=2&&16973===dataView.getUint16(0,BIG_ENDIAN)},getSize:function getBmpSize(dataView){return{width:dataView.getUint32(18,LITTLE_ENDIAN),height:dataView.getUint32(22,LITTLE_ENDIAN)}}}]]);var ERR_INVALID_MIME_TYPE="Invalid MIME type. Supported MIME types are: ".concat(Array.from(mimeTypeMap.keys()).join(", "));function getImageMIMEType(arrayBuffer){var dataView=toDataView(arrayBuffer),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=mimeTypeMap.entries()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=Object(slicedToArray.a)(_step.value,2),mimeType=_step$value[0];if((0,_step$value[1].test)(dataView))return mimeType}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null}function getImageMetadata(arrayBuffer){var mimeType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,metadata=function getImageSize(arrayBuffer){var mimeType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,size=(0,getImageTypeHandlers(mimeType=mimeType||getImageMIMEType(arrayBuffer)).getSize)(toDataView(arrayBuffer));if(!size)throw new Error("invalid image data for type: ".concat(mimeType));return size}(arrayBuffer,mimeType=mimeType||getImageMIMEType(arrayBuffer));return metadata.mimeType=mimeType,metadata}function getImageTypeHandlers(mimeType){var handlers=mimeTypeMap.get(mimeType);if(!handlers)throw new Error(ERR_INVALID_MIME_TYPE);return handlers}function toDataView(data){if(data instanceof ArrayBuffer||ArrayBuffer.isView(data))return new DataView(data.buffer||data);throw new Error("toDataView")}function parseImage(arrayBuffer,options){if(globals.a._parseImageNode){var mimeType=getImageMetadata(arrayBuffer).mimeType;return globals.a._parseImageNode(arrayBuffer,mimeType,options)}return parseToImageBitmap(arrayBuffer,options)}function parseToImageBitmap(arrayBuffer,options){if("undefined"==typeof createImageBitmap)throw new Error("parseImage");var blob=new Blob([new Uint8Array(arrayBuffer)]);return createImageBitmap(blob)}function loadToHTMLImage(_x2,_x3){return _loadToHTMLImage.apply(this,arguments)}function _loadToHTMLImage(){return(_loadToHTMLImage=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(url,options){var src,response,xml;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!/\.svg((\?|#).*)?$/.test(url)){_context2.next=10;break}return _context2.next=3,fetch(url,options);case 3:return response=_context2.sent,_context2.next=6,response.text();case 6:xml=_context2.sent,src="data:image/svg+xml;base64,".concat(btoa(xml)),_context2.next=13;break;case 10:return _context2.next=12,url;case 12:src=_context2.sent;case 13:return _context2.next=15,new Promise((function(resolve,reject){try{var image=new Image;image.onload=function(){return resolve(image)},image.onerror=function(err){return reject(new Error("Could not load image ".concat(url,": ").concat(err)))},image.crossOrigin=options&&options.crossOrigin||"anonymous",image.src=src}catch(error){reject(error)}}));case 15:return _context2.abrupt("return",_context2.sent);case 16:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}var EXTENSIONS=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],HTMLImageLoader=(globals.a._parseImageNode,{extensions:EXTENSIONS,loadAndParse:loadToHTMLImage}),utils_globals=__webpack_require__(126),log=__webpack_require__(10);var json_loader={name:"JSON",extensions:["json","geojson"],testText:function isJSON(text){var firstChar=text[0],lastChar=text[text.length-1];return"{"===firstChar&&"}"===lastChar||"["===firstChar&&"]"===lastChar},parseTextSync:JSON.parse},shaderlib=__webpack_require__(190);if(utils_globals.a.deck&&"7.3.2"!==utils_globals.a.deck.VERSION)throw new Error("deck.gl - multiple versions detected: ".concat(utils_globals.a.deck.VERSION," vs ").concat("7.3.2"));utils_globals.a.deck||(log.a.log(0,"deck.gl ".concat("7.3.2"," - ").concat("set deck.log.priority=1 (or higher) to trace attribute updates"))(),utils_globals.a.deck=utils_globals.a.deck||{VERSION:"7.3.2",version:"7.3.2",log:log.a},Object(register_loaders.b)([json_loader,HTMLImageLoader]),Object(shaderlib.b)());__webpack_exports__.a=utils_globals.a.deck},function(module,__webpack_exports__,__webpack_require__){"use strict";function deepArrayEqual(x,y){if(x===y)return!0;var isArrayX=Array.isArray(x)||ArrayBuffer.isView(x),isArrayY=Array.isArray(y)||ArrayBuffer.isView(y);if(isArrayX&&isArrayY&&x.length===y.length){for(var i=0;i<x.length;++i)if(x[i]!==y[i])return!1;return!0}return!1}__webpack_require__.d(__webpack_exports__,"a",(function(){return deepArrayEqual}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);__webpack_exports__.a={enable:function enable(update,capability){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},capability,!0))},disable:function disable(update,capability){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},capability,!1))},pixelStorei:function pixelStorei(update,pname,value){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},pname,value))},hint:function hint(update,pname,_hint){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},pname,_hint))},bindFramebuffer:function bindFramebuffer(update,target,framebuffer){var _update5;switch(target){case 36160:return update((_update5={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update5,36006,framebuffer),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update5,36010,framebuffer),_update5));case 36009:return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},36006,framebuffer));case 36008:return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},36010,framebuffer));default:return null}},blendColor:function blendColor(update,r,g,b,a){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},32773,new Float32Array([r,g,b,a])))},blendEquation:function blendEquation(update,mode){var _update9;return update((_update9={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update9,32777,mode),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update9,34877,mode),_update9))},blendEquationSeparate:function blendEquationSeparate(update,modeRGB,modeAlpha){var _update10;return update((_update10={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update10,32777,modeRGB),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update10,34877,modeAlpha),_update10))},blendFunc:function blendFunc(update,src,dst){var _update11;return update((_update11={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update11,32969,src),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update11,32968,dst),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update11,32971,src),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update11,32970,dst),_update11))},blendFuncSeparate:function blendFuncSeparate(update,srcRGB,dstRGB,srcAlpha,dstAlpha){var _update12;return update((_update12={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update12,32969,srcRGB),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update12,32968,dstRGB),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update12,32971,srcAlpha),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update12,32970,dstAlpha),_update12))},clearColor:function clearColor(update,r,g,b,a){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},3106,new Float32Array([r,g,b,a])))},clearDepth:function clearDepth(update,depth){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2931,depth))},clearStencil:function clearStencil(update,s){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2961,s))},colorMask:function colorMask(update,r,g,b,a){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},3107,[r,g,b,a]))},cullFace:function cullFace(update,mode){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2885,mode))},depthFunc:function depthFunc(update,func){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2932,func))},depthRange:function depthRange(update,zNear,zFar){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2928,new Float32Array([zNear,zFar])))},depthMask:function depthMask(update,mask){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2930,mask))},frontFace:function frontFace(update,face){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2886,face))},lineWidth:function lineWidth(update,width){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2849,width))},polygonOffset:function polygonOffset(update,factor,units){var _update23;return update((_update23={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update23,32824,factor),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update23,10752,units),_update23))},sampleCoverage:function sampleCoverage(update,value,invert){var _update24;return update((_update24={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update24,32938,value),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update24,32939,invert),_update24))},scissor:function scissor(update,x,y,width,height){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},3088,new Int32Array([x,y,width,height])))},stencilMask:function stencilMask(update,mask){var _update26;return update((_update26={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update26,2968,mask),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update26,36005,mask),_update26))},stencilMaskSeparate:function stencilMaskSeparate(update,face,mask){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},1028===face?2968:36005,mask))},stencilFunc:function stencilFunc(update,func,ref,mask){var _update28;return update((_update28={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update28,2962,func),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update28,2967,ref),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update28,2963,mask),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update28,34816,func),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update28,36003,ref),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update28,36004,mask),_update28))},stencilFuncSeparate:function stencilFuncSeparate(update,face,func,ref,mask){var _update29;return update((_update29={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update29,1028===face?2962:34816,func),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update29,1028===face?2967:36003,ref),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update29,1028===face?2963:36004,mask),_update29))},stencilOp:function stencilOp(update,fail,zfail,zpass){var _update30;return update((_update30={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update30,2964,fail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update30,2965,zfail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update30,2966,zpass),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update30,34817,fail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update30,34818,zfail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update30,34819,zpass),_update30))},stencilOpSeparate:function stencilOpSeparate(update,face,fail,zfail,zpass){var _update31;return update((_update31={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update31,1028===face?2964:34817,fail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update31,1028===face?2965:34818,zfail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update31,1028===face?2966:34819,zpass),_update31))},viewport:function viewport(update,x,y,width,height){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2978,new Int32Array([x,y,width,height])))}}},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return fitBounds}));var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_web_mercator_viewport__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(196),_assert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(93);function fitBounds(_ref){var width=_ref.width,height=_ref.height,bounds=_ref.bounds,_ref$minExtent=_ref.minExtent,minExtent=void 0===_ref$minExtent?0:_ref$minExtent,_ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?24:_ref$maxZoom,_ref$padding=_ref.padding,padding=void 0===_ref$padding?0:_ref$padding,_ref$offset=_ref.offset,offset=void 0===_ref$offset?[0,0]:_ref$offset,_bounds=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(bounds,2),_bounds$=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_bounds[0],2),west=_bounds$[0],south=_bounds$[1],_bounds$2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_bounds[1],2),east=_bounds$2[0],north=_bounds$2[1];if(Number.isFinite(padding)){padding={top:padding,bottom:padding,left:padding,right:padding}}else Object(_assert__WEBPACK_IMPORTED_MODULE_2__.a)(Number.isFinite(padding.top)&&Number.isFinite(padding.bottom)&&Number.isFinite(padding.left)&&Number.isFinite(padding.right));var viewport=new _web_mercator_viewport__WEBPACK_IMPORTED_MODULE_1__.a({width:width,height:height,longitude:0,latitude:0,zoom:0}),nw=viewport.project([west,north]),se=viewport.project([east,south]),size=[Math.max(Math.abs(se[0]-nw[0]),minExtent),Math.max(Math.abs(se[1]-nw[1]),minExtent)],targetSize=[width-padding.left-padding.right-2*Math.abs(offset[0]),height-padding.top-padding.bottom-2*Math.abs(offset[1])];Object(_assert__WEBPACK_IMPORTED_MODULE_2__.a)(targetSize[0]>0&&targetSize[1]>0);var scaleX=targetSize[0]/size[0],scaleY=targetSize[1]/size[1],offsetX=(padding.right-padding.left)/2/scaleX,offsetY=(padding.bottom-padding.top)/2/scaleY,center=[(se[0]+nw[0])/2+offsetX,(se[1]+nw[1])/2+offsetY],centerLngLat=viewport.unproject(center),zoom=viewport.zoom+Math.log2(Math.abs(Math.min(scaleX,scaleY)));return{longitude:centerLngLat[0],latitude:centerLngLat[1],zoom:Math.min(zoom,maxZoom)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function sortKD(ids,coords,nodeSize,left,right,depth){if(right-left<=nodeSize)return;const m=left+right>>1;!function sort_select(ids,coords,k,left,right,inc){for(;right>left;){if(right-left>600){const n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1),newLeft=Math.max(left,Math.floor(k-m*s/n+sd)),newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));sort_select(ids,coords,k,newLeft,newRight,inc)}const t=coords[2*k+inc];let i=left,j=right;for(swapItem(ids,coords,left,k),coords[2*right+inc]>t&&swapItem(ids,coords,left,right);i<j;){for(swapItem(ids,coords,i,j),i++,j--;coords[2*i+inc]<t;)i++;for(;coords[2*j+inc]>t;)j--}coords[2*left+inc]===t?swapItem(ids,coords,left,j):swapItem(ids,coords,++j,right),j<=k&&(left=j+1),k<=j&&(right=j-1)}}(ids,coords,m,left,right,depth%2),sortKD(ids,coords,nodeSize,left,m-1,depth+1),sortKD(ids,coords,nodeSize,m+1,right,depth+1)}function swapItem(ids,coords,i,j){swap(ids,i,j),swap(coords,2*i,2*j),swap(coords,2*i+1,2*j+1)}function swap(arr,i,j){const tmp=arr[i];arr[i]=arr[j],arr[j]=tmp}function sqDist(ax,ay,bx,by){const dx=ax-bx,dy=ay-by;return dx*dx+dy*dy}__webpack_require__.d(__webpack_exports__,"a",(function(){return src_KDBush}));const defaultGetX=p=>p[0],defaultGetY=p=>p[1];class src_KDBush{constructor(points,getX=defaultGetX,getY=defaultGetY,nodeSize=64,ArrayType=Float64Array){this.nodeSize=nodeSize,this.points=points;const IndexArrayType=points.length<65536?Uint16Array:Uint32Array,ids=this.ids=new IndexArrayType(points.length),coords=this.coords=new ArrayType(2*points.length);for(let i=0;i<points.length;i++)ids[i]=i,coords[2*i]=getX(points[i]),coords[2*i+1]=getY(points[i]);sortKD(ids,coords,nodeSize,0,ids.length-1,0)}range(minX,minY,maxX,maxY){return function range(ids,coords,minX,minY,maxX,maxY,nodeSize){const stack=[0,ids.length-1,0],result=[];let x,y;for(;stack.length;){const axis=stack.pop(),right=stack.pop(),left=stack.pop();if(right-left<=nodeSize){for(let i=left;i<=right;i++)x=coords[2*i],y=coords[2*i+1],x>=minX&&x<=maxX&&y>=minY&&y<=maxY&&result.push(ids[i]);continue}const m=Math.floor((left+right)/2);x=coords[2*m],y=coords[2*m+1],x>=minX&&x<=maxX&&y>=minY&&y<=maxY&&result.push(ids[m]);const nextAxis=(axis+1)%2;(0===axis?minX<=x:minY<=y)&&(stack.push(left),stack.push(m-1),stack.push(nextAxis)),(0===axis?maxX>=x:maxY>=y)&&(stack.push(m+1),stack.push(right),stack.push(nextAxis))}return result}(this.ids,this.coords,minX,minY,maxX,maxY,this.nodeSize)}within(x,y,r){return function within(ids,coords,qx,qy,r,nodeSize){const stack=[0,ids.length-1,0],result=[],r2=r*r;for(;stack.length;){const axis=stack.pop(),right=stack.pop(),left=stack.pop();if(right-left<=nodeSize){for(let i=left;i<=right;i++)sqDist(coords[2*i],coords[2*i+1],qx,qy)<=r2&&result.push(ids[i]);continue}const m=Math.floor((left+right)/2),x=coords[2*m],y=coords[2*m+1];sqDist(x,y,qx,qy)<=r2&&result.push(ids[m]);const nextAxis=(axis+1)%2;(0===axis?qx-r<=x:qy-r<=y)&&(stack.push(left),stack.push(m-1),stack.push(nextAxis)),(0===axis?qx+r>=x:qy+r>=y)&&(stack.push(m+1),stack.push(right),stack.push(nextAxis))}return result}(this.ids,this.coords,x,y,r,this.nodeSize)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var unified_parameter_api=__webpack_require__(194),slicedToArray=__webpack_require__(9),toConsumableArray=__webpack_require__(16);function isArray(array){return Array.isArray(array)||ArrayBuffer.isView(array)}var webgl_setter_function_table={framebuffer:function framebuffer(gl,_framebuffer){var handle=_framebuffer&&"handle"in _framebuffer?_framebuffer.handle:_framebuffer;return gl.bindFramebuffer(36160,handle)},blend:function blend(gl,value){return value?gl.enable(3042):gl.disable(3042)},blendColor:function blendColor(gl,value){return gl.blendColor.apply(gl,Object(toConsumableArray.a)(value))},blendEquation:function blendEquation(gl,args){args=isArray(args)?args:[args,args],gl.blendEquationSeparate.apply(gl,Object(toConsumableArray.a)(args))},blendFunc:function blendFunc(gl,args){args=isArray(args)&&2===args.length?[].concat(Object(toConsumableArray.a)(args),Object(toConsumableArray.a)(args)):args,gl.blendFuncSeparate.apply(gl,Object(toConsumableArray.a)(args))},clearColor:function clearColor(gl,value){return gl.clearColor.apply(gl,Object(toConsumableArray.a)(value))},clearDepth:function clearDepth(gl,value){return gl.clearDepth(value)},clearStencil:function clearStencil(gl,value){return gl.clearStencil(value)},colorMask:function colorMask(gl,value){return gl.colorMask.apply(gl,Object(toConsumableArray.a)(value))},cull:function cull(gl,value){return value?gl.enable(2884):gl.disable(2884)},cullFace:function cullFace(gl,value){return gl.cullFace(value)},depthTest:function depthTest(gl,value){return value?gl.enable(2929):gl.disable(2929)},depthFunc:function depthFunc(gl,value){return gl.depthFunc(value)},depthMask:function depthMask(gl,value){return gl.depthMask(value)},depthRange:function depthRange(gl,value){return gl.depthRange.apply(gl,Object(toConsumableArray.a)(value))},dither:function dither(gl,value){return value?gl.enable(3024):gl.disable(3024)},derivativeHint:function derivativeHint(gl,value){gl.hint(35723,value)},frontFace:function frontFace(gl,value){return gl.frontFace(value)},mipmapHint:function mipmapHint(gl,value){return gl.hint(33170,value)},lineWidth:function lineWidth(gl,value){return gl.lineWidth(value)},polygonOffsetFill:function polygonOffsetFill(gl,value){return value?gl.enable(32823):gl.disable(32823)},polygonOffset:function polygonOffset(gl,value){return gl.polygonOffset.apply(gl,Object(toConsumableArray.a)(value))},sampleCoverage:function sampleCoverage(gl,value){return gl.sampleCoverage.apply(gl,Object(toConsumableArray.a)(value))},scissorTest:function scissorTest(gl,value){return value?gl.enable(3089):gl.disable(3089)},scissor:function scissor(gl,value){return gl.scissor.apply(gl,Object(toConsumableArray.a)(value))},stencilTest:function stencilTest(gl,value){return value?gl.enable(2960):gl.disable(2960)},stencilMask:function stencilMask(gl,value){var _value=value=isArray(value)?value:[value,value],_value2=Object(slicedToArray.a)(_value,2),mask=_value2[0],backMask=_value2[1];gl.stencilMaskSeparate(1028,mask),gl.stencilMaskSeparate(1029,backMask)},stencilFunc:function stencilFunc(gl,args){var _args=args=isArray(args)&&3===args.length?[].concat(Object(toConsumableArray.a)(args),Object(toConsumableArray.a)(args)):args,_args2=Object(slicedToArray.a)(_args,6),func=_args2[0],ref=_args2[1],mask=_args2[2],backFunc=_args2[3],backRef=_args2[4],backMask=_args2[5];gl.stencilFuncSeparate(1028,func,ref,mask),gl.stencilFuncSeparate(1029,backFunc,backRef,backMask)},stencilOp:function stencilOp(gl,args){var _args3=args=isArray(args)&&3===args.length?[].concat(Object(toConsumableArray.a)(args),Object(toConsumableArray.a)(args)):args,_args4=Object(slicedToArray.a)(_args3,6),sfail=_args4[0],dpfail=_args4[1],dppass=_args4[2],backSfail=_args4[3],backDpfail=_args4[4],backDppass=_args4[5];gl.stencilOpSeparate(1028,sfail,dpfail,dppass),gl.stencilOpSeparate(1029,backSfail,backDpfail,backDppass)},viewport:function viewport(gl,value){return gl.viewport.apply(gl,Object(toConsumableArray.a)(value))}};function setParameters(gl,parameters){for(var key in Object(unified_parameter_api.c)(gl,parameters),parameters){var setter=webgl_setter_function_table[key];setter&&setter(gl,parameters[key],key)}}__webpack_require__.d(__webpack_exports__,"a",(function(){return setParameters}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(38);var classes_framebuffer=__webpack_require__(69),typed_array_utils=(__webpack_require__(58),__webpack_require__(114),__webpack_require__(39),__webpack_require__(113)),assert=__webpack_require__(17);function glFormatToComponents(format){switch(format){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(assert.a)(!1),0}}var texture_utils=__webpack_require__(438);__webpack_require__(25);function readPixelsToArray(source){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$sourceX=_ref.sourceX,sourceX=void 0===_ref$sourceX?0:_ref$sourceX,_ref$sourceY=_ref.sourceY,sourceY=void 0===_ref$sourceY?0:_ref$sourceY,_ref$sourceFormat=_ref.sourceFormat,sourceFormat=void 0===_ref$sourceFormat?6408:_ref$sourceFormat,_ref$sourceAttachment=_ref.sourceAttachment,sourceAttachment=void 0===_ref$sourceAttachment?36064:_ref$sourceAttachment,_ref$target=_ref.target,target=void 0===_ref$target?null:_ref$target,sourceWidth=_ref.sourceWidth,sourceHeight=_ref.sourceHeight,sourceType=_ref.sourceType,_getFramebuffer=getFramebuffer(source),framebuffer=_getFramebuffer.framebuffer,deleteFramebuffer=_getFramebuffer.deleteFramebuffer;Object(assert.a)(framebuffer);var gl=framebuffer.gl,handle=framebuffer.handle,attachments=framebuffer.attachments;sourceWidth=sourceWidth||framebuffer.width,sourceHeight=sourceHeight||framebuffer.height,36064===sourceAttachment&&null===handle&&(sourceAttachment=1028),Object(assert.a)(attachments[sourceAttachment]),target=function getPixelArray(pixelArray,type,format,width,height){if(pixelArray)return pixelArray;type=type||5121;var ArrayType=Object(typed_array_utils.c)(type,{clamped:!1}),components=glFormatToComponents(format);return new ArrayType(width*height*components)}(target,sourceType=sourceType||attachments[sourceAttachment].type,sourceFormat,sourceWidth,sourceHeight),sourceType=sourceType||Object(typed_array_utils.b)(target);var prevHandle=gl.bindFramebuffer(36160,handle);return gl.readPixels(sourceX,sourceY,sourceWidth,sourceHeight,sourceFormat,sourceType,target),gl.bindFramebuffer(36160,prevHandle||null),deleteFramebuffer&&framebuffer.delete(),target}function copyToDataUrl(source){for(var _ref3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref3$sourceAttachmen=_ref3.sourceAttachment,sourceAttachment=void 0===_ref3$sourceAttachmen?36064:_ref3$sourceAttachmen,_ref3$targetMaxHeight=_ref3.targetMaxHeight,targetMaxHeight=void 0===_ref3$targetMaxHeight?Number.MAX_SAFE_INTEGER:_ref3$targetMaxHeight,data=readPixelsToArray(source,{sourceAttachment:sourceAttachment}),width=source.width,height=source.height;height>targetMaxHeight;){var _scalePixels=Object(typed_array_utils.d)({data:data,width:width,height:height});data=_scalePixels.data,width=_scalePixels.width,height=_scalePixels.height}Object(typed_array_utils.a)({data:data,width:width,height:height});var canvas=document.createElement("canvas");canvas.width=width,canvas.height=height;var context=canvas.getContext("2d"),imageData=context.createImageData(width,height);return imageData.data.set(data),context.putImageData(imageData,0,0),canvas.toDataURL()}function getFramebuffer(source){return source instanceof classes_framebuffer.a?{framebuffer:source,deleteFramebuffer:!1}:{framebuffer:Object(texture_utils.b)(source),deleteFramebuffer:!0}}__webpack_require__.d(__webpack_exports__,"b",(function(){return readPixelsToArray})),__webpack_require__.d(__webpack_exports__,"a",(function(){return copyToDataUrl}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return checkProps}));var _log__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(25);function checkProps(className,props,propChecks){var _propChecks$removedPr=propChecks.removedProps,removedProps=void 0===_propChecks$removedPr?{}:_propChecks$removedPr,_propChecks$deprecate=propChecks.deprecatedProps,deprecatedProps=void 0===_propChecks$deprecate?{}:_propChecks$deprecate,_propChecks$replacedP=propChecks.replacedProps,replacedProps=void 0===_propChecks$replacedP?{}:_propChecks$replacedP;for(var propName in removedProps)if(propName in props){var replacement=removedProps[propName]?"".concat(className,".").concat(removedProps[propName]):"N/A";_log__WEBPACK_IMPORTED_MODULE_0__.a.removed("".concat(className,".").concat(propName),replacement)()}for(var _propName in deprecatedProps)if(_propName in props){var _replacementProp=deprecatedProps[_propName];_log__WEBPACK_IMPORTED_MODULE_0__.a.deprecated("".concat(className,".").concat(_propName),"".concat(className,".").concat(_replacementProp))()}var newProps=null;for(var _propName2 in replacedProps)if(_propName2 in props){var _replacementProp2=replacedProps[_propName2];_log__WEBPACK_IMPORTED_MODULE_0__.a.deprecated("".concat(className,".").concat(_propName2),"".concat(className,".").concat(_replacementProp2))(),(newProps=newProps||Object.assign({},props))[_replacementProp2]=props[_propName2],delete newProps[_propName2]}return newProps||props}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return hasFeature})),__webpack_require__.d(__webpack_exports__,"c",(function(){return hasFeatures})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getFeatures}));var _webgl_features_table__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(198),_webgl_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(17),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(25),LOG_UNSUPPORTED_FEATURE=2;function hasFeature(gl,feature){return hasFeatures(gl,feature)}function hasFeatures(gl,features){return(features=Array.isArray(features)?features:[features]).every((function(feature){return isFeatureSupported(gl,feature)}))}function getFeatures(gl){if(gl.luma=gl.luma||{},!gl.luma.caps)for(var cap in gl.luma.caps={},gl.luma.caps.webgl2=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_1__.d)(gl),_webgl_features_table__WEBPACK_IMPORTED_MODULE_0__.b)gl.luma.caps[cap]=isFeatureSupported(gl,cap);return gl.luma.caps}function isFeatureSupported(gl,cap){var feature=_webgl_features_table__WEBPACK_IMPORTED_MODULE_0__.b[cap];Object(_utils__WEBPACK_IMPORTED_MODULE_2__.a)(feature,cap);var isSupported,featureDefinition=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_1__.d)(gl)&&feature[1]||feature[0];if("function"==typeof featureDefinition)isSupported=featureDefinition(gl);else if(Array.isArray(featureDefinition)){isSupported=!0;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=featureDefinition[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var extension=_step.value;isSupported=isSupported&&Boolean(gl.getExtension(extension))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else"string"==typeof featureDefinition?isSupported=Boolean(gl.getExtension(featureDefinition)):"boolean"==typeof featureDefinition?isSupported=featureDefinition:Object(_utils__WEBPACK_IMPORTED_MODULE_2__.a)(!1);return isSupported||_utils__WEBPACK_IMPORTED_MODULE_3__.a.log(LOG_UNSUPPORTED_FEATURE,"Feature: ".concat(cap," not supported"))(),isSupported}},function(module,__webpack_exports__,__webpack_require__){"use strict";function cssToDeviceRatio(gl){return gl.canvas?gl.drawingBufferWidth/(gl.canvas.clientWidth||gl.canvas.width||1):1}function cssToDevicePixels(gl,cssPixel){var yInvert=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function scalePixels(pixel,ratio,width,height,yInvert){var yHigh,x=scaleX(pixel[0],ratio,width),y=scaleY(pixel[1],ratio,height,yInvert),t=scaleX(pixel[0]+1,ratio,width),xHigh=t===width-1?t:t-1;t=scaleY(pixel[1]+1,ratio,height,yInvert),yInvert?(yHigh=y,y=t=0===t?t:t+1):yHigh=t===height-1?t:t-1;return{x:x,y:y,width:Math.max(xHigh-x+1,1),height:Math.max(yHigh-y+1,1)}}(cssPixel,cssToDeviceRatio(gl),gl.drawingBufferWidth,gl.drawingBufferHeight,yInvert)}function getDevicePixelRatio(useDevicePixels){var windowRatio="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(useDevicePixels)?useDevicePixels<=0?1:useDevicePixels:useDevicePixels?windowRatio:1}function scaleX(x,ratio,width){return Math.min(Math.round(x*ratio),width-1)}function scaleY(y,ratio,height,yInvert){return yInvert?Math.max(0,height-1-Math.round(y*ratio)):Math.min(Math.round(y*ratio),height-1)}__webpack_require__.d(__webpack_exports__,"b",(function(){return cssToDeviceRatio})),__webpack_require__.d(__webpack_exports__,"a",(function(){return cssToDevicePixels})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getDevicePixelRatio}))},function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString;module.exports=function isArguments(value){var str=toStr.call(value),isArgs="[object Arguments]"===str;return isArgs||(isArgs="[object Array]"!==str&&null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Function]"===toStr.call(value.callee)),isArgs}},function(module,exports,__webpack_require__){"use strict";var functionsHaveNames=function functionsHaveNames(){return"string"==typeof function f(){}.name},gOPD=Object.getOwnPropertyDescriptor;functionsHaveNames.functionsHaveConfigurableNames=function functionsHaveConfigurableNames(){return functionsHaveNames()&&gOPD&&!!gOPD((function(){}),"name").configurable};var $bind=Function.prototype.bind;functionsHaveNames.boundFunctionsHaveNames=function boundFunctionsHaveNames(){return functionsHaveNames()&&"function"==typeof $bind&&""!==function f(){}.bind().name},module.exports=functionsHaveNames},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(116),toPrimitive=__webpack_require__(477),keys=__webpack_require__(266),inspect=__webpack_require__(267),GetIntrinsic=__webpack_require__(44),$TypeError=GetIntrinsic("%TypeError%"),$RangeError=GetIntrinsic("%RangeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),$Array=GetIntrinsic("%Array%"),$ArrayPrototype=$Array.prototype,$String=GetIntrinsic("%String%"),$Object=GetIntrinsic("%Object%"),$Number=GetIntrinsic("%Number%"),$Symbol=GetIntrinsic("%Symbol%",!0),$RegExp=GetIntrinsic("%RegExp%"),$Date=GetIntrinsic("%Date%"),$Function=GetIntrinsic("%Function%"),$preventExtensions=$Object.preventExtensions,hasSymbols=__webpack_require__(84)(),assertRecord=__webpack_require__(325),$isNaN=__webpack_require__(268),$isFinite=__webpack_require__(326),MAX_ARRAY_LENGTH=Math.pow(2,32)-1,MAX_SAFE_INTEGER=__webpack_require__(327),assign=__webpack_require__(169),sign=__webpack_require__(328),mod=__webpack_require__(329),isPrimitive=__webpack_require__(482),forEach=__webpack_require__(269),every=__webpack_require__(270),isSamePropertyDescriptor=__webpack_require__(483),isPropertyDescriptor=__webpack_require__(330),parseInteger=parseInt,callBound=__webpack_require__(117),regexTester=__webpack_require__(331),getIteratorMethod=__webpack_require__(332),getSymbolDescription=__webpack_require__(333),$PromiseThen=callBound("Promise.prototype.then",!0),arraySlice=callBound("Array.prototype.slice"),strSlice=callBound("String.prototype.slice"),$indexOf=callBound("Array.prototype.indexOf"),$push=callBound("Array.prototype.push"),isBinary=regexTester(/^0b[01]+$/i),isOctal=regexTester(/^0o[0-7]+$/i),isDigit=regexTester(/^[0-9]$/),regexExec=callBound("RegExp.prototype.exec"),hasNonWS=regexTester(new $RegExp("["+["","",""].join("")+"]","g")),isInvalidHexLiteral=regexTester(/^[-+]0x[0-9a-f]+$/i),$charCodeAt=callBound("String.prototype.charCodeAt"),$isEnumerable=callBound("Object.prototype.propertyIsEnumerable"),toStr=callBound("Object.prototype.toString"),$NumberValueOf=callBound("Number.prototype.valueOf"),$BooleanValueOf=callBound("Boolean.prototype.valueOf"),$StringValueOf=callBound("String.prototype.valueOf"),$DateValueOf=callBound("Date.prototype.valueOf"),$SymbolToString=callBound("Symbol.prototype.toString",!0),$floor=Math.floor,$abs=Math.abs,$ObjectCreate=$Object.create,$gOPD=$Object.getOwnPropertyDescriptor,$gOPN=$Object.getOwnPropertyNames,$gOPS=$Object.getOwnPropertySymbols,$isExtensible=$Object.isExtensible,$defineProperty=$Object.defineProperty,$setProto=__webpack_require__(335),DefineOwnProperty=function DefineOwnProperty(ES,O,P,desc){if(!$defineProperty){if(!ES.IsDataDescriptor(desc))return!1;if(!desc["[[Configurable]]"]||!desc["[[Writable]]"])return!1;if(P in O&&$isEnumerable(O,P)!==!!desc["[[Enumerable]]"])return!1;var V=desc["[[Value]]"];return O[P]=V,ES.SameValue(O[P],V)}return $defineProperty(O,P,ES.FromPropertyDescriptor(desc)),!0},ws=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),trimRegex=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),$replace=callBound("String.prototype.replace"),ES5=__webpack_require__(484),hasRegExpMatcher=__webpack_require__(337),ES6=assign(assign({},ES5),{Call:function Call(F,V){var args=arguments.length>2?arguments[2]:[];if(!this.IsCallable(F))throw new $TypeError(inspect(F)+" is not a function");return F.apply(V,args)},ToPrimitive:toPrimitive,ToNumber:function ToNumber(argument){var value=isPrimitive(argument)?argument:toPrimitive(argument,$Number);if("symbol"==typeof value)throw new $TypeError("Cannot convert a Symbol value to a number");if("string"==typeof value){if(isBinary(value))return this.ToNumber(parseInteger(strSlice(value,2),2));if(isOctal(value))return this.ToNumber(parseInteger(strSlice(value,2),8));if(hasNonWS(value)||isInvalidHexLiteral(value))return NaN;var trimmed=function(value){return $replace(value,trimRegex,"")}(value);if(trimmed!==value)return this.ToNumber(trimmed)}return $Number(value)},ToInt16:function ToInt16(argument){var int16bit=this.ToUint16(argument);return int16bit>=32768?int16bit-65536:int16bit},ToInt8:function ToInt8(argument){var int8bit=this.ToUint8(argument);return int8bit>=128?int8bit-256:int8bit},ToUint8:function ToUint8(argument){var number=this.ToNumber(argument);if($isNaN(number)||0===number||!$isFinite(number))return 0;var posInt=sign(number)*$floor($abs(number));return mod(posInt,256)},ToUint8Clamp:function ToUint8Clamp(argument){var number=this.ToNumber(argument);if($isNaN(number)||number<=0)return 0;if(number>=255)return 255;var f=$floor(argument);return f+.5<number?f+1:number<f+.5?f:f%2!=0?f+1:f},ToString:function ToString(argument){if("symbol"==typeof argument)throw new $TypeError("Cannot convert a Symbol value to a string");return $String(argument)},ToObject:function ToObject(value){return this.RequireObjectCoercible(value),$Object(value)},ToPropertyKey:function ToPropertyKey(argument){var key=this.ToPrimitive(argument,$String);return"symbol"==typeof key?key:this.ToString(key)},ToLength:function ToLength(argument){var len=this.ToInteger(argument);return len<=0?0:len>MAX_SAFE_INTEGER?MAX_SAFE_INTEGER:len},CanonicalNumericIndexString:function CanonicalNumericIndexString(argument){if("[object String]"!==toStr(argument))throw new $TypeError("must be a string");if("-0"===argument)return-0;var n=this.ToNumber(argument);return this.SameValue(this.ToString(n),argument)?n:void 0},RequireObjectCoercible:ES5.CheckObjectCoercible,IsArray:$Array.isArray||function IsArray(argument){return"[object Array]"===toStr(argument)},IsConstructor:function IsConstructor(argument){return"function"==typeof argument&&!!argument.prototype},IsExtensible:$preventExtensions?function IsExtensible(obj){return!isPrimitive(obj)&&$isExtensible(obj)}:function isExtensible(obj){return!0},IsInteger:function IsInteger(argument){if("number"!=typeof argument||$isNaN(argument)||!$isFinite(argument))return!1;var abs=$abs(argument);return $floor(abs)===abs},IsPropertyKey:function IsPropertyKey(argument){return"string"==typeof argument||"symbol"==typeof argument},IsRegExp:function IsRegExp(argument){if(!argument||"object"!=typeof argument)return!1;if(hasSymbols){var isRegExp=argument[$Symbol.match];if(void 0!==isRegExp)return ES5.ToBoolean(isRegExp)}return hasRegExpMatcher(argument)},SameValueZero:function SameValueZero(x,y){return x===y||$isNaN(x)&&$isNaN(y)},GetV:function GetV(V,P){if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return this.ToObject(V)[P]},GetMethod:function GetMethod(O,P){if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var func=this.GetV(O,P);if(null!=func){if(!this.IsCallable(func))throw new $TypeError(P+"is not a function");return func}},Get:function Get(O,P){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true, got "+inspect(P));return O[P]},Type:function Type(x){return"symbol"==typeof x?"Symbol":ES5.Type(x)},SpeciesConstructor:function SpeciesConstructor(O,defaultConstructor){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");var C=O.constructor;if(void 0===C)return defaultConstructor;if("Object"!==this.Type(C))throw new $TypeError("O.constructor is not an Object");var S=hasSymbols&&$Symbol.species?C[$Symbol.species]:void 0;if(null==S)return defaultConstructor;if(this.IsConstructor(S))return S;throw new $TypeError("no constructor found")},FromPropertyDescriptor:function FromPropertyDescriptor(Desc){if(void 0===Desc)return Desc;assertRecord(this,"Property Descriptor","Desc",Desc);var obj={};return"[[Value]]"in Desc&&(obj.value=Desc["[[Value]]"]),"[[Writable]]"in Desc&&(obj.writable=Desc["[[Writable]]"]),"[[Get]]"in Desc&&(obj.get=Desc["[[Get]]"]),"[[Set]]"in Desc&&(obj.set=Desc["[[Set]]"]),"[[Enumerable]]"in Desc&&(obj.enumerable=Desc["[[Enumerable]]"]),"[[Configurable]]"in Desc&&(obj.configurable=Desc["[[Configurable]]"]),obj},CompletePropertyDescriptor:function CompletePropertyDescriptor(Desc){return assertRecord(this,"Property Descriptor","Desc",Desc),this.IsGenericDescriptor(Desc)||this.IsDataDescriptor(Desc)?(has(Desc,"[[Value]]")||(Desc["[[Value]]"]=void 0),has(Desc,"[[Writable]]")||(Desc["[[Writable]]"]=!1)):(has(Desc,"[[Get]]")||(Desc["[[Get]]"]=void 0),has(Desc,"[[Set]]")||(Desc["[[Set]]"]=void 0)),has(Desc,"[[Enumerable]]")||(Desc["[[Enumerable]]"]=!1),has(Desc,"[[Configurable]]")||(Desc["[[Configurable]]"]=!1),Desc},Set:function Set(O,P,V,Throw){if("Object"!==this.Type(O))throw new $TypeError("O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");if("Boolean"!==this.Type(Throw))throw new $TypeError("Throw must be a Boolean");if(Throw)return O[P]=V,!0;try{O[P]=V}catch(e){return!1}},HasOwnProperty:function HasOwnProperty(O,P){if("Object"!==this.Type(O))throw new $TypeError("O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");return has(O,P)},HasProperty:function HasProperty(O,P){if("Object"!==this.Type(O))throw new $TypeError("O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");return P in O},IsConcatSpreadable:function IsConcatSpreadable(O){if("Object"!==this.Type(O))return!1;if(hasSymbols&&"symbol"==typeof $Symbol.isConcatSpreadable){var spreadable=this.Get(O,Symbol.isConcatSpreadable);if(void 0!==spreadable)return this.ToBoolean(spreadable)}return this.IsArray(O)},Invoke:function Invoke(O,P){if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");var argumentsList=arraySlice(arguments,2),func=this.GetV(O,P);return this.Call(func,O,argumentsList)},GetIterator:function GetIterator(obj,method){var actualMethod=method;arguments.length<2&&(actualMethod=getIteratorMethod(this,obj));var iterator=this.Call(actualMethod,obj);if("Object"!==this.Type(iterator))throw new $TypeError("iterator must return an object");return iterator},IteratorNext:function IteratorNext(iterator,value){var result=this.Invoke(iterator,"next",arguments.length<2?[]:[value]);if("Object"!==this.Type(result))throw new $TypeError("iterator next must return an object");return result},IteratorComplete:function IteratorComplete(iterResult){if("Object"!==this.Type(iterResult))throw new $TypeError("Assertion failed: Type(iterResult) is not Object");return this.ToBoolean(this.Get(iterResult,"done"))},IteratorValue:function IteratorValue(iterResult){if("Object"!==this.Type(iterResult))throw new $TypeError("Assertion failed: Type(iterResult) is not Object");return this.Get(iterResult,"value")},IteratorStep:function IteratorStep(iterator){var result=this.IteratorNext(iterator);return!0!==this.IteratorComplete(result)&&result},IteratorClose:function IteratorClose(iterator,completion){if("Object"!==this.Type(iterator))throw new $TypeError("Assertion failed: Type(iterator) is not Object");if(!this.IsCallable(completion))throw new $TypeError("Assertion failed: completion is not a thunk for a Completion Record");var completionRecord,completionThunk=completion,iteratorReturn=this.GetMethod(iterator,"return");if(void 0===iteratorReturn)return completionThunk();try{var innerResult=this.Call(iteratorReturn,iterator,[])}catch(e){throw completionRecord=completionThunk(),completionThunk=null,e}if(completionRecord=completionThunk(),completionThunk=null,"Object"!==this.Type(innerResult))throw new $TypeError("iterator .return must return an object");return completionRecord},CreateIterResultObject:function CreateIterResultObject(value,done){if("Boolean"!==this.Type(done))throw new $TypeError("Assertion failed: Type(done) is not Boolean");return{value:value,done:done}},RegExpExec:function RegExpExec(R,S){if("Object"!==this.Type(R))throw new $TypeError("R must be an Object");if("String"!==this.Type(S))throw new $TypeError("S must be a String");var exec=this.Get(R,"exec");if(this.IsCallable(exec)){var result=this.Call(exec,R,[S]);if(null===result||"Object"===this.Type(result))return result;throw new $TypeError('"exec" method must return `null` or an Object')}return regexExec(R,S)},ArraySpeciesCreate:function ArraySpeciesCreate(originalArray,length){if(!this.IsInteger(length)||length<0)throw new $TypeError("Assertion failed: length must be an integer >= 0");var C,len=0===length?0:length;if(this.IsArray(originalArray)&&(C=this.Get(originalArray,"constructor"),"Object"===this.Type(C)&&hasSymbols&&$Symbol.species&&null===(C=this.Get(C,$Symbol.species))&&(C=void 0)),void 0===C)return $Array(len);if(!this.IsConstructor(C))throw new $TypeError("C must be a constructor");return new C(len)},CreateDataProperty:function CreateDataProperty(O,P,V){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var oldDesc=$gOPD(O,P),extensible=oldDesc||this.IsExtensible(O);return!(oldDesc&&(!oldDesc.writable||!oldDesc.configurable)||!extensible)&&DefineOwnProperty(this,O,P,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":V,"[[Writable]]":!0})},CreateDataPropertyOrThrow:function CreateDataPropertyOrThrow(O,P,V){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var success=this.CreateDataProperty(O,P,V);if(!success)throw new $TypeError("unable to create data property");return success},ObjectCreate:function ObjectCreate(proto,internalSlotsList){if(null!==proto&&"Object"!==this.Type(proto))throw new $TypeError("Assertion failed: proto must be null or an object");var slots=arguments.length<2?[]:internalSlotsList;if(slots.length>0)throw new $SyntaxError("es-abstract does not yet support internal slots");if(null===proto&&!$ObjectCreate)throw new $SyntaxError("native Object.create support is required to create null objects");return $ObjectCreate(proto)},AdvanceStringIndex:function AdvanceStringIndex(S,index,unicode){if("String"!==this.Type(S))throw new $TypeError("S must be a String");if(!this.IsInteger(index)||index<0||index>MAX_SAFE_INTEGER)throw new $TypeError("Assertion failed: length must be an integer >= 0 and <= 2**53");if("Boolean"!==this.Type(unicode))throw new $TypeError("Assertion failed: unicode must be a Boolean");if(!unicode)return index+1;if(index+1>=S.length)return index+1;var first=$charCodeAt(S,index);if(first<55296||first>56319)return index+1;var second=$charCodeAt(S,index+1);return second<56320||second>57343?index+1:index+2},CreateMethodProperty:function CreateMethodProperty(O,P,V){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return DefineOwnProperty(this,O,P,{"[[Configurable]]":!0,"[[Enumerable]]":!1,"[[Value]]":V,"[[Writable]]":!0})},DefinePropertyOrThrow:function DefinePropertyOrThrow(O,P,desc){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var Desc=isPropertyDescriptor(this,desc)?desc:this.ToPropertyDescriptor(desc);if(!isPropertyDescriptor(this,Desc))throw new $TypeError("Assertion failed: Desc is not a valid Property Descriptor");return DefineOwnProperty(this,O,P,Desc)},DeletePropertyOrThrow:function DeletePropertyOrThrow(O,P){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var success=delete O[P];if(!success)throw new TypeError("Attempt to delete property failed.");return success},EnumerableOwnNames:function EnumerableOwnNames(O){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");return keys(O)},thisNumberValue:function thisNumberValue(value){return"Number"===this.Type(value)?value:$NumberValueOf(value)},thisBooleanValue:function thisBooleanValue(value){return"Boolean"===this.Type(value)?value:$BooleanValueOf(value)},thisStringValue:function thisStringValue(value){return"String"===this.Type(value)?value:$StringValueOf(value)},thisTimeValue:function thisTimeValue(value){return $DateValueOf(value)},SetIntegrityLevel:function SetIntegrityLevel(O,level){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if("sealed"!==level&&"frozen"!==level)throw new $TypeError('Assertion failed: `level` must be `"sealed"` or `"frozen"`');if(!$preventExtensions)throw new $SyntaxError("SetIntegrityLevel requires native `Object.preventExtensions` support");if(!$preventExtensions(O))return!1;if(!$gOPN)throw new $SyntaxError("SetIntegrityLevel requires native `Object.getOwnPropertyNames` support");var theKeys=$gOPN(O),ES=this;return"sealed"===level?forEach(theKeys,(function(k){ES.DefinePropertyOrThrow(O,k,{configurable:!1})})):"frozen"===level&&forEach(theKeys,(function(k){var desc,currentDesc=$gOPD(O,k);void 0!==currentDesc&&(desc=ES.IsAccessorDescriptor(ES.ToPropertyDescriptor(currentDesc))?{configurable:!1}:{configurable:!1,writable:!1},ES.DefinePropertyOrThrow(O,k,desc))})),!0},TestIntegrityLevel:function TestIntegrityLevel(O,level){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if("sealed"!==level&&"frozen"!==level)throw new $TypeError('Assertion failed: `level` must be `"sealed"` or `"frozen"`');if(this.IsExtensible(O))return!1;var theKeys=$gOPN(O),ES=this;return 0===theKeys.length||every(theKeys,(function(k){var currentDesc=$gOPD(O,k);if(void 0!==currentDesc){if(currentDesc.configurable)return!1;if("frozen"===level&&ES.IsDataDescriptor(ES.ToPropertyDescriptor(currentDesc))&&currentDesc.writable)return!1}return!0}))},OrdinaryHasInstance:function OrdinaryHasInstance(C,O){if(!1===this.IsCallable(C))return!1;if("Object"!==this.Type(O))return!1;var P=this.Get(C,"prototype");if("Object"!==this.Type(P))throw new $TypeError("OrdinaryHasInstance called on an object with an invalid prototype property.");return O instanceof C},OrdinaryHasProperty:function OrdinaryHasProperty(O,P){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: P must be a Property Key");return P in O},InstanceofOperator:function InstanceofOperator(O,C){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");var instOfHandler=hasSymbols&&$Symbol.hasInstance?this.GetMethod(C,$Symbol.hasInstance):void 0;if(void 0!==instOfHandler)return this.ToBoolean(this.Call(instOfHandler,C,[O]));if(!this.IsCallable(C))throw new $TypeError("`C` is not Callable");return this.OrdinaryHasInstance(C,O)},IsPromise:function IsPromise(x){if("Object"!==this.Type(x))return!1;if(!$PromiseThen)return!1;try{$PromiseThen(x)}catch(e){return!1}return!0},"Abstract Equality Comparison":function AbstractEqualityComparison(x,y){var xType=this.Type(x),yType=this.Type(y);return xType===yType?x===y:null==x&&null==y||("Number"===xType&&"String"===yType?this["Abstract Equality Comparison"](x,this.ToNumber(y)):"String"===xType&&"Number"===yType?this["Abstract Equality Comparison"](this.ToNumber(x),y):"Boolean"===xType?this["Abstract Equality Comparison"](this.ToNumber(x),y):"Boolean"===yType?this["Abstract Equality Comparison"](x,this.ToNumber(y)):"String"!==xType&&"Number"!==xType&&"Symbol"!==xType||"Object"!==yType?"Object"===xType&&("String"===yType||"Number"===yType||"Symbol"===yType)&&this["Abstract Equality Comparison"](this.ToPrimitive(x),y):this["Abstract Equality Comparison"](x,this.ToPrimitive(y)))},ValidateAndApplyPropertyDescriptor:function ValidateAndApplyPropertyDescriptor(O,P,extensible,Desc,current){var oType=this.Type(O);if("Undefined"!==oType&&"Object"!==oType)throw new $TypeError("Assertion failed: O must be undefined or an Object");if("Boolean"!==this.Type(extensible))throw new $TypeError("Assertion failed: extensible must be a Boolean");if(!isPropertyDescriptor(this,Desc))throw new $TypeError("Assertion failed: Desc must be a Property Descriptor");if("Undefined"!==this.Type(current)&&!isPropertyDescriptor(this,current))throw new $TypeError("Assertion failed: current must be a Property Descriptor, or undefined");if("Undefined"!==oType&&!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: if O is not undefined, P must be a Property Key");if("Undefined"===this.Type(current)){if(!extensible)return!1;if(this.IsGenericDescriptor(Desc)||this.IsDataDescriptor(Desc))"Undefined"!==oType&&DefineOwnProperty(this,O,P,{"[[Configurable]]":Desc["[[Configurable]]"],"[[Enumerable]]":Desc["[[Enumerable]]"],"[[Value]]":Desc["[[Value]]"],"[[Writable]]":Desc["[[Writable]]"]});else{if(!this.IsAccessorDescriptor(Desc))throw new $TypeError("Assertion failed: Desc is not an accessor descriptor");if("Undefined"!==oType)return DefineOwnProperty(this,O,P,Desc)}return!0}if(this.IsGenericDescriptor(Desc)&&!("[[Configurable]]"in Desc)&&!("[[Enumerable]]"in Desc))return!0;if(isSamePropertyDescriptor(this,Desc,current))return!0;if(!current["[[Configurable]]"]){if(Desc["[[Configurable]]"])return!1;if("[[Enumerable]]"in Desc&&!Desc["[[Enumerable]]"]==!!current["[[Enumerable]]"])return!1}if(this.IsGenericDescriptor(Desc));else if(this.IsDataDescriptor(current)!==this.IsDataDescriptor(Desc)){if(!current["[[Configurable]]"])return!1;this.IsDataDescriptor(current)?"Undefined"!==oType&&DefineOwnProperty(this,O,P,{"[[Configurable]]":current["[[Configurable]]"],"[[Enumerable]]":current["[[Enumerable]]"],"[[Get]]":void 0}):"Undefined"!==oType&&DefineOwnProperty(this,O,P,{"[[Configurable]]":current["[[Configurable]]"],"[[Enumerable]]":current["[[Enumerable]]"],"[[Value]]":void 0})}else if(this.IsDataDescriptor(current)&&this.IsDataDescriptor(Desc)){if(!current["[[Configurable]]"]&&!current["[[Writable]]"])return!("[[Writable]]"in Desc&&Desc["[[Writable]]"])&&!("[[Value]]"in Desc&&!this.SameValue(Desc["[[Value]]"],current["[[Value]]"]))}else{if(!this.IsAccessorDescriptor(current)||!this.IsAccessorDescriptor(Desc))throw new $TypeError("Assertion failed: current and Desc are not both data, both accessors, or one accessor and one data.");if(!current["[[Configurable]]"])return!("[[Set]]"in Desc&&!this.SameValue(Desc["[[Set]]"],current["[[Set]]"]))&&!("[[Get]]"in Desc&&!this.SameValue(Desc["[[Get]]"],current["[[Get]]"]))}return"Undefined"===oType||DefineOwnProperty(this,O,P,Desc)},OrdinaryDefineOwnProperty:function OrdinaryDefineOwnProperty(O,P,Desc){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: P must be a Property Key");if(!isPropertyDescriptor(this,Desc))throw new $TypeError("Assertion failed: Desc must be a Property Descriptor");var desc=$gOPD(O,P),current=desc&&this.ToPropertyDescriptor(desc),extensible=this.IsExtensible(O);return this.ValidateAndApplyPropertyDescriptor(O,P,extensible,Desc,current)},OrdinaryGetOwnProperty:function OrdinaryGetOwnProperty(O,P){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: P must be a Property Key");if(has(O,P)){if(!$gOPD){var arrayLength=this.IsArray(O)&&"length"===P,regexLastIndex=this.IsRegExp(O)&&"lastIndex"===P;return{"[[Configurable]]":!(arrayLength||regexLastIndex),"[[Enumerable]]":$isEnumerable(O,P),"[[Value]]":O[P],"[[Writable]]":!0}}return this.ToPropertyDescriptor($gOPD(O,P))}},ArrayCreate:function ArrayCreate(length){if(!this.IsInteger(length)||length<0)throw new $TypeError("Assertion failed: `length` must be an integer Number >= 0");if(length>MAX_ARRAY_LENGTH)throw new $RangeError("length is greater than (2**32 - 1)");var proto=arguments.length>1?arguments[1]:$ArrayPrototype,A=[];if(proto!==$ArrayPrototype){if(!$setProto)throw new $SyntaxError("ArrayCreate: a `proto` argument that is not `Array.prototype` is not supported in an environment that does not support setting the [[Prototype]]");$setProto(A,proto)}return 0!==length&&(A.length=length),A},ArraySetLength:function ArraySetLength(A,Desc){if(!this.IsArray(A))throw new $TypeError("Assertion failed: A must be an Array");if(!isPropertyDescriptor(this,Desc))throw new $TypeError("Assertion failed: Desc must be a Property Descriptor");if(!("[[Value]]"in Desc))return this.OrdinaryDefineOwnProperty(A,"length",Desc);var newLenDesc=assign({},Desc),newLen=this.ToUint32(Desc["[[Value]]"]);if(newLen!==this.ToNumber(Desc["[[Value]]"]))throw new $RangeError("Invalid array length");newLenDesc["[[Value]]"]=newLen;var oldLenDesc=this.OrdinaryGetOwnProperty(A,"length");if(!this.IsDataDescriptor(oldLenDesc))throw new $TypeError("Assertion failed: an array had a non-data descriptor on `length`");var newWritable,oldLen=oldLenDesc["[[Value]]"];if(newLen>=oldLen)return this.OrdinaryDefineOwnProperty(A,"length",newLenDesc);if(!oldLenDesc["[[Writable]]"])return!1;if("[[Writable]]"in newLenDesc&&!newLenDesc["[[Writable]]"]?(newWritable=!1,newLenDesc["[[Writable]]"]=!0):newWritable=!0,!this.OrdinaryDefineOwnProperty(A,"length",newLenDesc))return!1;for(;newLen<oldLen;){if(oldLen-=1,!delete A[this.ToString(oldLen)]&&(newLenDesc["[[Value]]"]=oldLen+1,!newWritable))return newLenDesc["[[Writable]]"]=!1,this.OrdinaryDefineOwnProperty(A,"length",newLenDesc),!1}return!!newWritable||this.OrdinaryDefineOwnProperty(A,"length",{"[[Writable]]":!1})},CreateHTML:function CreateHTML(string,tag,attribute,value){if("String"!==this.Type(tag)||"String"!==this.Type(attribute))throw new $TypeError("Assertion failed: `tag` and `attribute` must be strings");var str=this.RequireObjectCoercible(string),S=this.ToString(str),p1="<"+tag;if(""!==attribute){var V=this.ToString(value);p1+=" "+attribute+'="'+$replace(V,/\x22/g,"&quot;")+'"'}return p1+">"+S+"</"+tag+">"},GetOwnPropertyKeys:function GetOwnPropertyKeys(O,Type){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if("Symbol"===Type)return hasSymbols&&$gOPS?$gOPS(O):[];if("String"===Type)return $gOPN?$gOPN(O):keys(O);throw new $TypeError('Assertion failed: `Type` must be `"String"` or `"Symbol"`')},SymbolDescriptiveString:function SymbolDescriptiveString(sym){if("Symbol"!==this.Type(sym))throw new $TypeError("Assertion failed: `sym` must be a Symbol");return $SymbolToString(sym)},GetSubstitution:function GetSubstitution(matched,str,position,captures,replacement){if("String"!==this.Type(matched))throw new $TypeError("Assertion failed: `matched` must be a String");var matchLength=matched.length;if("String"!==this.Type(str))throw new $TypeError("Assertion failed: `str` must be a String");var stringLength=str.length;if(!this.IsInteger(position)||position<0||position>stringLength)throw new $TypeError("Assertion failed: `position` must be a nonnegative integer, and less than or equal to the length of `string`, got "+inspect(position));var ES=this;if(!this.IsArray(captures)||!every(captures,(function(capture,index,arr){return"String"===ES.Type(capture)||!(index in arr)})))throw new $TypeError("Assertion failed: `captures` must be a List of Strings, got "+inspect(captures));if("String"!==this.Type(replacement))throw new $TypeError("Assertion failed: `replacement` must be a String");for(var tailPos=position+matchLength,m=captures.length,result="",i=0;i<replacement.length;i+=1){var current=replacement[i],isLast=i+1>=replacement.length,nextIsLast=i+2>=replacement.length;if("$"!==current||isLast)result+=replacement[i];else{var next=replacement[i+1];if("$"===next)result+="$",i+=1;else if("&"===next)result+=matched,i+=1;else if("`"===next)result+=0===position?"":strSlice(str,0,position-1),i+=1;else if("'"===next)result+=tailPos>=stringLength?"":strSlice(str,tailPos),i+=1;else{var nextNext=nextIsLast?null:replacement[i+2];if(!isDigit(next)||"0"===next||!nextIsLast&&isDigit(nextNext))if(isDigit(next)&&(nextIsLast||isDigit(nextNext))){var nn=next+nextNext,nnI=parseInteger(nn,10)-1;result+=nn<=m&&"Undefined"===this.Type(captures[nnI])?"":captures[nnI],i+=2}else result+="$";else{var n=parseInteger(next,10);result+=n<=m&&"Undefined"===this.Type(captures[n-1])?"":captures[n-1],i+=1}}}}return result},ToDateString:function ToDateString(tv){if("Number"!==this.Type(tv))throw new $TypeError("Assertion failed: `tv` must be a Number");return $isNaN(tv)?"Invalid Date":$Date(tv)},CreateListFromArrayLike:function CreateListFromArrayLike(obj){var elementTypes=arguments.length>1?arguments[1]:["Undefined","Null","Boolean","String","Symbol","Number","Object"];if("Object"!==this.Type(obj))throw new $TypeError("Assertion failed: `obj` must be an Object");if(!this.IsArray(elementTypes))throw new $TypeError("Assertion failed: `elementTypes`, if provided, must be an array");for(var len=this.ToLength(this.Get(obj,"length")),list=[],index=0;index<len;){var indexName=this.ToString(index),next=this.Get(obj,indexName),nextType=this.Type(next);if($indexOf(elementTypes,nextType)<0)throw new $TypeError("item type "+nextType+" is not a valid elementType");$push(list,next),index+=1}return list},GetPrototypeFromConstructor:function GetPrototypeFromConstructor(constructor,intrinsicDefaultProto){var intrinsic=GetIntrinsic(intrinsicDefaultProto);if(!this.IsConstructor(constructor))throw new $TypeError("Assertion failed: `constructor` must be a constructor");var proto=this.Get(constructor,"prototype");if("Object"!==this.Type(proto)){if(!(constructor instanceof $Function))throw new $TypeError("cross-realm constructors not currently supported");proto=intrinsic}return proto},SetFunctionName:function SetFunctionName(F,name){if("function"!=typeof F)throw new $TypeError("Assertion failed: `F` must be a function");if(!this.IsExtensible(F)||has(F,"name"))throw new $TypeError("Assertion failed: `F` must be extensible, and must not have a `name` own property");var nameType=this.Type(name);if("Symbol"!==nameType&&"String"!==nameType)throw new $TypeError("Assertion failed: `name` must be a Symbol or a String");if("Symbol"===nameType){var description=getSymbolDescription(name);name=void 0===description?"":"["+description+"]"}if(arguments.length>2){var prefix=arguments[2];name=prefix+" "+name}return this.DefinePropertyOrThrow(F,"name",{"[[Value]]":name,"[[Writable]]":!1,"[[Enumerable]]":!1,"[[Configurable]]":!0})}});delete ES6.CheckObjectCoercible,module.exports=ES6},function(module,exports){module.exports=function isPrimitive(value){return null===value||"function"!=typeof value&&"object"!=typeof value}},function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString;if(__webpack_require__(84)()){var symToStr=Symbol.prototype.toString,symStringRegex=/^Symbol\(.*\)$/;module.exports=function isSymbol(value){if("symbol"==typeof value)return!0;if("[object Symbol]"!==toStr.call(value))return!1;try{return function isRealSymbolObject(value){return"symbol"==typeof value.valueOf()&&symStringRegex.test(symToStr.call(value))}(value)}catch(e){return!1}}}else module.exports=function isSymbol(value){return!1}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(44),$TypeError=GetIntrinsic("%TypeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),has=__webpack_require__(116),predicates={"Property Descriptor":function isPropertyDescriptor(ES,Desc){if("Object"!==ES.Type(Desc))return!1;var allowed={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var key in Desc)if(has(Desc,key)&&!allowed[key])return!1;var isData=has(Desc,"[[Value]]"),IsAccessor=has(Desc,"[[Get]]")||has(Desc,"[[Set]]");if(isData&&IsAccessor)throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0}};module.exports=function assertRecord(ES,recordType,argumentName,value){var predicate=predicates[recordType];if("function"!=typeof predicate)throw new $SyntaxError("unknown record type: "+recordType);if(!predicate(ES,value))throw new $TypeError(argumentName+" must be a "+recordType)}},function(module,exports,__webpack_require__){"use strict";var $isNaN=Number.isNaN||function(a){return a!=a};module.exports=Number.isFinite||function(x){return"number"==typeof x&&!$isNaN(x)&&x!==1/0&&x!==-1/0}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(44),$Math=GetIntrinsic("%Math%"),$Number=GetIntrinsic("%Number%");module.exports=$Number.MAX_SAFE_INTEGER||$Math.pow(2,53)-1},function(module,exports,__webpack_require__){"use strict";module.exports=function sign(number){return number>=0?1:-1}},function(module,exports,__webpack_require__){"use strict";module.exports=function mod(number,modulo){var remain=number%modulo;return Math.floor(remain>=0?remain:remain+modulo)}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(44),has=__webpack_require__(116),$TypeError=GetIntrinsic("%TypeError%");module.exports=function IsPropertyDescriptor(ES,Desc){if("Object"!==ES.Type(Desc))return!1;var allowed={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var key in Desc)if(has(Desc,key)&&!allowed[key])return!1;if(ES.IsDataDescriptor(Desc)&&ES.IsAccessorDescriptor(Desc))throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0}},function(module,exports,__webpack_require__){"use strict";var $test=__webpack_require__(44)("RegExp.prototype.test"),callBind=__webpack_require__(205);module.exports=function regexTester(regex){return callBind($test,regex)}},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(84)(),GetIntrinsic=__webpack_require__(44),callBound=__webpack_require__(117),$iterator=GetIntrinsic("%Symbol.iterator%",!0),$arraySlice=callBound("Array.prototype.slice"),$arrayJoin=callBound("Array.prototype.join");module.exports=function getIteratorMethod(ES,iterable){var usingIterator;return hasSymbols?usingIterator=ES.GetMethod(iterable,$iterator):ES.IsArray(iterable)?usingIterator=function(){var i=-1,arr=this;return{next:function(){return{done:(i+=1)>=arr.length,value:arr[i]}}}}:"String"===ES.Type(iterable)&&(usingIterator=function(){var i=0;return{next:function(){var nextIndex=ES.AdvanceStringIndex(iterable,i,!0),value=$arrayJoin($arraySlice(iterable,i,nextIndex),"");return i=nextIndex,{done:nextIndex>iterable.length,value:value}}}}),usingIterator}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(44),callBound=__webpack_require__(117),$SyntaxError=GetIntrinsic("%SyntaxError%"),symToStr=callBound("Symbol.prototype.toString",!0),getInferredName=__webpack_require__(334);module.exports=function getSymbolDescription(symbol){if(!symToStr)throw new $SyntaxError("Symbols are not supported in this environment");var str=symToStr(symbol);if(getInferredName){var name=getInferredName(symbol);if(""===name)return;return name.slice(1,-1)}var desc=str.slice(7,-1);if(desc)return desc}},function(module,exports,__webpack_require__){"use strict";var getInferredName;try{getInferredName=Function("s","return { [s]() {} }[s].name;")}catch(e){}module.exports=getInferredName&&"inferred"===function(){}.name?getInferredName:null},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(44),originalSetProto=GetIntrinsic("%Object.setPrototypeOf%",!0),$ArrayProto=GetIntrinsic("%Array.prototype%");module.exports=originalSetProto||([].__proto__!==$ArrayProto?null:function(O,proto){return O.__proto__=proto,O})},function(module,exports,__webpack_require__){"use strict";var $strSlice=__webpack_require__(117)("String.prototype.slice");module.exports=function isPrefixOf(prefix,string){return prefix===string||!(prefix.length>string.length)&&$strSlice(string,0,prefix.length)===prefix}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(116),regexExec=RegExp.prototype.exec,gOPD=Object.getOwnPropertyDescriptor,toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function isRegex(value){if(!value||"object"!=typeof value)return!1;if(!hasToStringTag)return"[object RegExp]"===toStr.call(value);var descriptor=gOPD(value,"lastIndex");return!(!descriptor||!has(descriptor,"value"))&&function tryRegexExec(value){try{var lastIndex=value.lastIndex;return value.lastIndex=0,regexExec.call(value),!0}catch(e){return!1}finally{value.lastIndex=lastIndex}}(value)}},function(module,exports,__webpack_require__){"use strict";var ES2015=__webpack_require__(322),GetIntrinsic=__webpack_require__(44),assign=__webpack_require__(169),$setProto=__webpack_require__(335),callBound=__webpack_require__(117),getIteratorMethod=__webpack_require__(332),$TypeError=GetIntrinsic("%TypeError%"),$arrayPush=callBound("Array.prototype.push"),$getProto=__webpack_require__(490),ES2016=assign(assign({},ES2015),{SameValueNonNumber:function SameValueNonNumber(x,y){if("number"==typeof x||typeof x!=typeof y)throw new TypeError("SameValueNonNumber requires two non-number values of the same type.");return this.SameValue(x,y)},IterableToArrayLike:function IterableToArrayLike(items){var usingIterator=getIteratorMethod(this,items);if(void 0!==usingIterator){for(var iterator=this.GetIterator(items,usingIterator),values=[],next=!0;next;)if(next=this.IteratorStep(iterator)){var nextValue=this.IteratorValue(next);$arrayPush(values,nextValue)}return values}return this.ToObject(items)},OrdinaryGetPrototypeOf:function(O){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: O must be an Object");if(!$getProto)throw new $TypeError("This environment does not support fetching prototypes.");return $getProto(O)},OrdinarySetPrototypeOf:function(O,V){if("Object"!==this.Type(V)&&"Null"!==this.Type(V))throw new $TypeError("Assertion failed: V must be Object or Null");try{$setProto(O,V)}catch(e){return!1}return this.OrdinaryGetPrototypeOf(O)===V}});module.exports=ES2016},function(module,exports,__webpack_require__){"use strict";var replace=__webpack_require__(64).call(Function.call,String.prototype.replace),leftWhitespace=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;module.exports=function trimLeft(){return replace(this,leftWhitespace,"")}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(339);module.exports=function getPolyfill(){if(!String.prototype.trimLeft)return implementation;return""!=="".trimLeft()?implementation:String.prototype.trimLeft}},function(module,exports,__webpack_require__){"use strict";var replace=__webpack_require__(64).call(Function.call,String.prototype.replace),rightWhitespace=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;module.exports=function trimRight(){return replace(this,rightWhitespace,"")}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(341);module.exports=function getPolyfill(){if(!String.prototype.trimRight)return implementation;return""!=="".trimRight()?implementation:String.prototype.trimRight}},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(84)(),regexpMatchAll=__webpack_require__(535);module.exports=function getRegExpMatchAllPolyfill(){return hasSymbols&&"symbol"==typeof Symbol.matchAll&&"function"==typeof RegExp.prototype[Symbol.matchAll]?RegExp.prototype[Symbol.matchAll]:regexpMatchAll}},function(module,exports,__webpack_require__){"use strict";var toObject=Object,TypeErr=TypeError;module.exports=function flags(){if(null!=this&&this!==toObject(this))throw new TypeErr("RegExp.prototype.flags getter called on non-object");var result="";return this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.dotAll&&(result+="s"),this.unicode&&(result+="u"),this.sticky&&(result+="y"),result}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(344),supportsDescriptors=__webpack_require__(32).supportsDescriptors,gOPD=Object.getOwnPropertyDescriptor,TypeErr=TypeError;module.exports=function getPolyfill(){if(!supportsDescriptors)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var descriptor=gOPD(RegExp.prototype,"flags");if(descriptor&&"function"==typeof descriptor.get&&"boolean"==typeof/a/.dotAll)return descriptor.get}return implementation}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),fails=__webpack_require__(33),createElement=__webpack_require__(274);module.exports=!DESCRIPTORS&&!fails((function(){return 7!=Object.defineProperty(createElement("div"),"a",{get:function(){return 7}}).a}))},function(module,exports,__webpack_require__){var shared=__webpack_require__(173);module.exports=shared("native-function-to-string",Function.toString)},function(module,exports,__webpack_require__){var global=__webpack_require__(29),nativeFunctionToString=__webpack_require__(347),WeakMap=global.WeakMap;module.exports="function"==typeof WeakMap&&/native code/.test(nativeFunctionToString.call(WeakMap))},function(module,exports,__webpack_require__){var has=__webpack_require__(60),ownKeys=__webpack_require__(551),getOwnPropertyDescriptorModule=__webpack_require__(145),definePropertyModule=__webpack_require__(61);module.exports=function(target,source){for(var keys=ownKeys(source),defineProperty=definePropertyModule.f,getOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,i=0;i<keys.length;i++){var key=keys[i];has(target,key)||defineProperty(target,key,getOwnPropertyDescriptor(source,key))}}},function(module,exports,__webpack_require__){var has=__webpack_require__(60),toIndexedObject=__webpack_require__(97),indexOf=__webpack_require__(277).indexOf,hiddenKeys=__webpack_require__(175);module.exports=function(object,names){var key,O=toIndexedObject(object),i=0,result=[];for(key in O)!has(hiddenKeys,key)&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~indexOf(result,key)||result.push(key));return result}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(211),max=Math.max,min=Math.min;module.exports=function(index,length){var integer=toInteger(index);return integer<0?max(integer+length,0):min(integer,length)}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40),isArray=__webpack_require__(177),SPECIES=__webpack_require__(37)("species");module.exports=function(originalArray,length){var C;return isArray(originalArray)&&("function"!=typeof(C=originalArray.constructor)||C!==Array&&!isArray(C.prototype)?isObject(C)&&null===(C=C[SPECIES])&&(C=void 0):C=void 0),new(void 0===C?Array:C)(0===length?0:length)}},function(module,exports,__webpack_require__){var fails=__webpack_require__(33);module.exports=!!Object.getOwnPropertySymbols&&!fails((function(){return!String(Symbol())}))},function(module,exports,__webpack_require__){var classofRaw=__webpack_require__(98),TO_STRING_TAG=__webpack_require__(37)("toStringTag"),CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}());module.exports=function(it){var O,tag,result;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(tag=function(it,key){try{return it[key]}catch(error){}}(O=Object(it),TO_STRING_TAG))?tag:CORRECT_ARGUMENTS?classofRaw(O):"Object"==(result=classofRaw(O))&&"function"==typeof O.callee?"Arguments":result}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),definePropertyModule=__webpack_require__(61),anObject=__webpack_require__(50),objectKeys=__webpack_require__(178);module.exports=DESCRIPTORS?Object.defineProperties:function defineProperties(O,Properties){anObject(O);for(var key,keys=objectKeys(Properties),length=keys.length,index=0;length>index;)definePropertyModule.f(O,key=keys[index++],Properties[key]);return O}},function(module,exports,__webpack_require__){var getBuiltIn=__webpack_require__(176);module.exports=getBuiltIn("document","documentElement")},function(module,exports,__webpack_require__){exports.f=__webpack_require__(37)},function(module,exports){module.exports=function(originalModule){if(!originalModule.webpackPolyfill){var module=Object.create(originalModule);module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),Object.defineProperty(module,"exports",{enumerable:!0}),module.webpackPolyfill=1}return module}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(87),__webpack_require__(27),__webpack_require__(583),__webpack_require__(119),__webpack_require__(88),Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={ClientApi:!0,defaultDecorateStory:!0,StoryStore:!0,ConfigApi:!0,subscriptionsStore:!0,pathToId:!0,getQueryParams:!0,getQueryParam:!0};Object.defineProperty(exports,"ClientApi",{enumerable:!0,get:function get(){return _client_api.default}}),Object.defineProperty(exports,"defaultDecorateStory",{enumerable:!0,get:function get(){return _client_api.defaultDecorateStory}}),Object.defineProperty(exports,"StoryStore",{enumerable:!0,get:function get(){return _story_store.default}}),Object.defineProperty(exports,"ConfigApi",{enumerable:!0,get:function get(){return _config_api.default}}),Object.defineProperty(exports,"subscriptionsStore",{enumerable:!0,get:function get(){return _subscriptions_store.default}}),Object.defineProperty(exports,"pathToId",{enumerable:!0,get:function get(){return _pathToId.default}}),Object.defineProperty(exports,"getQueryParams",{enumerable:!0,get:function get(){return _queryparams.getQueryParams}}),Object.defineProperty(exports,"getQueryParam",{enumerable:!0,get:function get(){return _queryparams.getQueryParam}});var _client_api=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(__webpack_require__(584)),_story_store=_interopRequireDefault(__webpack_require__(725)),_config_api=_interopRequireDefault(__webpack_require__(733)),_subscriptions_store=_interopRequireDefault(__webpack_require__(407)),_pathToId=_interopRequireDefault(__webpack_require__(734)),_queryparams=__webpack_require__(735),_hooks=__webpack_require__(305);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.keys(_hooks).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _hooks[key]}}))}))},function(module,exports,__webpack_require__){"use strict";var $forEach=__webpack_require__(130).forEach,sloppyArrayMethod=__webpack_require__(180);module.exports=sloppyArrayMethod("forEach")?function forEach(callbackfn){return $forEach(this,callbackfn,arguments.length>1?arguments[1]:void 0)}:[].forEach},function(module,exports){module.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(50);module.exports=function(iterator,fn,value,ENTRIES){try{return ENTRIES?fn(anObject(value)[0],value[1]):fn(value)}catch(error){var returnMethod=iterator.return;throw void 0!==returnMethod&&anObject(returnMethod.call(iterator)),error}}},function(module,exports,__webpack_require__){var wellKnownSymbol=__webpack_require__(37),Iterators=__webpack_require__(182),ITERATOR=wellKnownSymbol("iterator"),ArrayPrototype=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayPrototype[ITERATOR]===it)}},function(module,exports,__webpack_require__){var classof=__webpack_require__(354),Iterators=__webpack_require__(182),ITERATOR=__webpack_require__(37)("iterator");module.exports=function(it){if(null!=it)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},function(module,exports,__webpack_require__){"use strict";var IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator,getPrototypeOf=__webpack_require__(285),createNonEnumerableProperty=__webpack_require__(74),has=__webpack_require__(60),wellKnownSymbol=__webpack_require__(37),IS_PURE=__webpack_require__(174),ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1;[].keys&&("next"in(arrayIterator=[].keys())?(PrototypeOfArrayIteratorPrototype=getPrototypeOf(getPrototypeOf(arrayIterator)))!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype):BUGGY_SAFARI_ITERATORS=!0),null==IteratorPrototype&&(IteratorPrototype={}),IS_PURE||has(IteratorPrototype,ITERATOR)||createNonEnumerableProperty(IteratorPrototype,ITERATOR,(function(){return this})),module.exports={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS}},function(module,exports,__webpack_require__){var fails=__webpack_require__(33);module.exports=!fails((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),$reduce=__webpack_require__(588).left;$({target:"Array",proto:!0,forced:__webpack_require__(180)("reduce")},{reduce:function reduce(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(49),objectKeys=__webpack_require__(178),toIndexedObject=__webpack_require__(97),propertyIsEnumerable=__webpack_require__(206).f,createMethod=function(TO_ENTRIES){return function(it){for(var key,O=toIndexedObject(it),keys=objectKeys(O),length=keys.length,i=0,result=[];length>i;)key=keys[i++],DESCRIPTORS&&!propertyIsEnumerable.call(O,key)||result.push(TO_ENTRIES?[key,O[key]]:O[key]);return result}};module.exports={entries:createMethod(!0),values:createMethod(!1)}},function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(50);module.exports=function(){var that=anObject(this),result="";return that.global&&(result+="g"),that.ignoreCase&&(result+="i"),that.multiline&&(result+="m"),that.dotAll&&(result+="s"),that.unicode&&(result+="u"),that.sticky&&(result+="y"),result}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(211),requireObjectCoercible=__webpack_require__(85),createMethod=function(CONVERT_TO_STRING){return function($this,pos){var first,second,S=String(requireObjectCoercible($this)),position=toInteger(pos),size=S.length;return position<0||position>=size?CONVERT_TO_STRING?"":void 0:(first=S.charCodeAt(position))<55296||first>56319||position+1===size||(second=S.charCodeAt(position+1))<56320||second>57343?CONVERT_TO_STRING?S.charAt(position):first:CONVERT_TO_STRING?S.slice(position,position+2):second-56320+(first-55296<<10)+65536}};module.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},function(module,exports,__webpack_require__){"use strict";var getBuiltIn=__webpack_require__(176),definePropertyModule=__webpack_require__(61),wellKnownSymbol=__webpack_require__(37),DESCRIPTORS=__webpack_require__(49),SPECIES=wellKnownSymbol("species");module.exports=function(CONSTRUCTOR_NAME){var Constructor=getBuiltIn(CONSTRUCTOR_NAME),defineProperty=definePropertyModule.f;DESCRIPTORS&&Constructor&&!Constructor[SPECIES]&&defineProperty(Constructor,SPECIES,{configurable:!0,get:function(){return this}})}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(50),aFunction=__webpack_require__(131),SPECIES=__webpack_require__(37)("species");module.exports=function(O,defaultConstructor){var S,C=anObject(O).constructor;return void 0===C||null==(S=anObject(C)[SPECIES])?defaultConstructor:aFunction(S)}},function(module,exports,__webpack_require__){"use strict";var aFunction=__webpack_require__(131),PromiseCapability=function(C){var resolve,reject;this.promise=new C((function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject})),this.resolve=aFunction(resolve),this.reject=aFunction(reject)};module.exports.f=function(C){return new PromiseCapability(C)}},function(module,exports,__webpack_require__){"use strict";var types;__webpack_require__(215),__webpack_require__(27),__webpack_require__(290),Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSupportedType=function isSupportedType(type){return!!Object.values(types).find((function(typeVal){return typeVal===type}))},exports.types=void 0,exports.types=types,function(types){types.TAB="tab",types.PANEL="panel",types.TOOL="tool",types.PREVIEW="preview",types.NOTES_ELEMENT="notes-element"}(types||(exports.types=types={}))},function(module,exports,__webpack_require__){"use strict";(function(setImmediate){function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__(86),__webpack_require__(99),__webpack_require__(100),__webpack_require__(223),__webpack_require__(87),__webpack_require__(181),__webpack_require__(133),__webpack_require__(89),__webpack_require__(376),__webpack_require__(183),__webpack_require__(27),__webpack_require__(119),__webpack_require__(78),__webpack_require__(184),__webpack_require__(102),__webpack_require__(88),__webpack_require__(103),__webpack_require__(600),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Channel=void 0;var generateRandomId=function generateRandomId(){return Math.random().toString(16).slice(2)},Channel=function(){function Channel(){var _this=this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},transport=_ref.transport,_ref$async=_ref.async,async=void 0!==_ref$async&&_ref$async;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Channel),this.isAsync=void 0,this.sender=generateRandomId(),this.events={},this.transport=void 0,this.isAsync=async,transport&&(this.transport=transport,this.transport.setHandler((function(event){return _this.handleEvent(event)})))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Channel,[{key:"addListener",value:function addListener(eventName,listener){this.events[eventName]=this.events[eventName]||[],this.events[eventName].push(listener)}},{key:"addPeerListener",value:function addPeerListener(eventName,listener){var peerListener=listener;peerListener.ignorePeer=!0,this.addListener(eventName,peerListener)}},{key:"emit",value:function emit(eventName){for(var _this2=this,_len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var event={type:eventName,args:args,from:this.sender},options={};args.length>=1&&args[0]&&args[0].options&&(options=args[0].options);var handler=function handler(){_this2.transport&&_this2.transport.send(event,options),_this2.handleEvent(event,!0)};this.isAsync?setImmediate(handler):handler()}},{key:"eventNames",value:function eventNames(){return Object.keys(this.events)}},{key:"listenerCount",value:function listenerCount(eventName){var listeners=this.listeners(eventName);return listeners?listeners.length:0}},{key:"listeners",value:function listeners(eventName){var listeners=this.events[eventName];return listeners||void 0}},{key:"once",value:function once(eventName,listener){var onceListener=this.onceListener(eventName,listener);this.addListener(eventName,onceListener)}},{key:"removeAllListeners",value:function removeAllListeners(eventName){eventName?this.events[eventName]&&delete this.events[eventName]:this.events={}}},{key:"removeListener",value:function removeListener(eventName,listener){var listeners=this.listeners(eventName);listeners&&(this.events[eventName]=listeners.filter((function(l){return l!==listener})))}},{key:"on",value:function on(eventName,listener){this.addListener(eventName,listener)}},{key:"handleEvent",value:function handleEvent(event){var isPeer=arguments.length>1&&void 0!==arguments[1]&&arguments[1],listeners=this.listeners(event.type);listeners&&(isPeer||event.from!==this.sender)&&listeners.forEach((function(fn){return!(isPeer&&fn.ignorePeer)&&fn.apply(void 0,_toConsumableArray(event.args))}))}},{key:"onceListener",value:function onceListener(eventName,listener){var _this3=this,onceListener=function onceListener(){return _this3.removeListener(eventName,onceListener),listener.apply(void 0,arguments)};return onceListener}},{key:"hasTransport",get:function get(){return!!this.transport}}]),Channel}();exports.Channel=Channel;var _default=Channel;exports.default=_default}).call(this,__webpack_require__(598).setImmediate)},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),isObject=__webpack_require__(40),isArray=__webpack_require__(177),toAbsoluteIndex=__webpack_require__(351),toLength=__webpack_require__(76),toIndexedObject=__webpack_require__(97),createProperty=__webpack_require__(280),arrayMethodHasSpeciesSupport=__webpack_require__(213),SPECIES=__webpack_require__(37)("species"),nativeSlice=[].slice,max=Math.max;$({target:"Array",proto:!0,forced:!arrayMethodHasSpeciesSupport("slice")},{slice:function slice(start,end){var Constructor,result,n,O=toIndexedObject(this),length=toLength(O.length),k=toAbsoluteIndex(start,length),fin=toAbsoluteIndex(void 0===end?length:end,length);if(isArray(O)&&("function"!=typeof(Constructor=O.constructor)||Constructor!==Array&&!isArray(Constructor.prototype)?isObject(Constructor)&&null===(Constructor=Constructor[SPECIES])&&(Constructor=void 0):Constructor=void 0,Constructor===Array||void 0===Constructor))return nativeSlice.call(O,k,fin);for(result=new(void 0===Constructor?Array:Constructor)(max(fin-k,0)),n=0;k<fin;k++,n++)k in O&&createProperty(result,n,O[k]);return result.length=n,result}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),$includes=__webpack_require__(277).includes,addToUnscopables=__webpack_require__(282);$({target:"Array",proto:!0},{includes:function includes(el){return $includes(this,el,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("includes")},function(module,exports,__webpack_require__){__webpack_require__(19)({target:"Function",proto:!0},{bind:__webpack_require__(603)})},function(module,exports,__webpack_require__){"use strict";var collection=__webpack_require__(292),collectionStrong=__webpack_require__(382);module.exports=collection("Set",(function(get){return function Set(){return get(this,arguments.length?arguments[0]:void 0)}}),collectionStrong)},function(module,exports,__webpack_require__){var fails=__webpack_require__(33);module.exports=!fails((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40),setPrototypeOf=__webpack_require__(286);module.exports=function($this,dummy,Wrapper){var NewTarget,NewTargetPrototype;return setPrototypeOf&&"function"==typeof(NewTarget=dummy.constructor)&&NewTarget!==Wrapper&&isObject(NewTargetPrototype=NewTarget.prototype)&&NewTargetPrototype!==Wrapper.prototype&&setPrototypeOf($this,NewTargetPrototype),$this}},function(module,exports,__webpack_require__){"use strict";var defineProperty=__webpack_require__(61).f,create=__webpack_require__(146),redefineAll=__webpack_require__(219),bind=__webpack_require__(179),anInstance=__webpack_require__(220),iterate=__webpack_require__(221),defineIterator=__webpack_require__(284),setSpecies=__webpack_require__(371),DESCRIPTORS=__webpack_require__(49),fastKey=__webpack_require__(185).fastKey,InternalStateModule=__webpack_require__(118),setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor;module.exports={getConstructor:function(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var C=wrapper((function(that,iterable){anInstance(that,C,CONSTRUCTOR_NAME),setInternalState(that,{type:CONSTRUCTOR_NAME,index:create(null),first:void 0,last:void 0,size:0}),DESCRIPTORS||(that.size=0),null!=iterable&&iterate(iterable,that[ADDER],that,IS_MAP)})),getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME),define=function(that,key,value){var previous,index,state=getInternalState(that),entry=getEntry(that,key);return entry?entry.value=value:(state.last=entry={index:index=fastKey(key,!0),key:key,value:value,previous:previous=state.last,next:void 0,removed:!1},state.first||(state.first=entry),previous&&(previous.next=entry),DESCRIPTORS?state.size++:that.size++,"F"!==index&&(state.index[index]=entry)),that},getEntry=function(that,key){var entry,state=getInternalState(that),index=fastKey(key);if("F"!==index)return state.index[index];for(entry=state.first;entry;entry=entry.next)if(entry.key==key)return entry};return redefineAll(C.prototype,{clear:function clear(){for(var state=getInternalState(this),data=state.index,entry=state.first;entry;)entry.removed=!0,entry.previous&&(entry.previous=entry.previous.next=void 0),delete data[entry.index],entry=entry.next;state.first=state.last=void 0,DESCRIPTORS?state.size=0:this.size=0},delete:function(key){var state=getInternalState(this),entry=getEntry(this,key);if(entry){var next=entry.next,prev=entry.previous;delete state.index[entry.index],entry.removed=!0,prev&&(prev.next=next),next&&(next.previous=prev),state.first==entry&&(state.first=next),state.last==entry&&(state.last=prev),DESCRIPTORS?state.size--:this.size--}return!!entry},forEach:function forEach(callbackfn){for(var entry,state=getInternalState(this),boundFunction=bind(callbackfn,arguments.length>1?arguments[1]:void 0,3);entry=entry?entry.next:state.first;)for(boundFunction(entry.value,entry.key,this);entry&&entry.removed;)entry=entry.previous},has:function has(key){return!!getEntry(this,key)}}),redefineAll(C.prototype,IS_MAP?{get:function get(key){var entry=getEntry(this,key);return entry&&entry.value},set:function set(key,value){return define(this,0===key?0:key,value)}}:{add:function add(value){return define(this,value=0===value?0:value,value)}}),DESCRIPTORS&&defineProperty(C.prototype,"size",{get:function(){return getInternalState(this).size}}),C},setStrong:function(C,CONSTRUCTOR_NAME,IS_MAP){var ITERATOR_NAME=CONSTRUCTOR_NAME+" Iterator",getInternalCollectionState=internalStateGetterFor(CONSTRUCTOR_NAME),getInternalIteratorState=internalStateGetterFor(ITERATOR_NAME);defineIterator(C,CONSTRUCTOR_NAME,(function(iterated,kind){setInternalState(this,{type:ITERATOR_NAME,target:iterated,state:getInternalCollectionState(iterated),kind:kind,last:void 0})}),(function(){for(var state=getInternalIteratorState(this),kind=state.kind,entry=state.last;entry&&entry.removed;)entry=entry.previous;return state.target&&(state.last=entry=entry?entry.next:state.state.first)?"keys"==kind?{value:entry.key,done:!1}:"values"==kind?{value:entry.value,done:!1}:{value:[entry.key,entry.value],done:!1}:(state.target=void 0,{value:void 0,done:!0})}),IS_MAP?"entries":"values",!IS_MAP,!0),setSpecies(CONSTRUCTOR_NAME)}}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),notARegExp=__webpack_require__(384),requireObjectCoercible=__webpack_require__(85);$({target:"String",proto:!0,forced:!__webpack_require__(386)("includes")},{includes:function includes(searchString){return!!~String(requireObjectCoercible(this)).indexOf(notARegExp(searchString),arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){var isRegExp=__webpack_require__(385);module.exports=function(it){if(isRegExp(it))throw TypeError("The method doesn't accept regular expressions");return it}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40),classof=__webpack_require__(98),MATCH=__webpack_require__(37)("match");module.exports=function(it){var isRegExp;return isObject(it)&&(void 0!==(isRegExp=it[MATCH])?!!isRegExp:"RegExp"==classof(it))}},function(module,exports,__webpack_require__){var MATCH=__webpack_require__(37)("match");module.exports=function(METHOD_NAME){var regexp=/./;try{"/./"[METHOD_NAME](regexp)}catch(e){try{return regexp[MATCH]=!1,"/./"[METHOD_NAME](regexp)}catch(f){}}return!1}},function(module,exports,__webpack_require__){"use strict";var fixRegExpWellKnownSymbolLogic=__webpack_require__(227),anObject=__webpack_require__(50),toObject=__webpack_require__(77),toLength=__webpack_require__(76),toInteger=__webpack_require__(211),requireObjectCoercible=__webpack_require__(85),advanceStringIndex=__webpack_require__(293),regExpExec=__webpack_require__(228),max=Math.max,min=Math.min,floor=Math.floor,SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d\d?|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d\d?)/g;fixRegExpWellKnownSymbolLogic("replace",2,(function(REPLACE,nativeReplace,maybeCallNative){return[function replace(searchValue,replaceValue){var O=requireObjectCoercible(this),replacer=null==searchValue?void 0:searchValue[REPLACE];return void 0!==replacer?replacer.call(searchValue,O,replaceValue):nativeReplace.call(String(O),searchValue,replaceValue)},function(regexp,replaceValue){var res=maybeCallNative(nativeReplace,regexp,this,replaceValue);if(res.done)return res.value;var rx=anObject(regexp),S=String(this),functionalReplace="function"==typeof replaceValue;functionalReplace||(replaceValue=String(replaceValue));var global=rx.global;if(global){var fullUnicode=rx.unicode;rx.lastIndex=0}for(var results=[];;){var result=regExpExec(rx,S);if(null===result)break;if(results.push(result),!global)break;""===String(result[0])&&(rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode))}for(var it,accumulatedResult="",nextSourcePosition=0,i=0;i<results.length;i++){result=results[i];for(var matched=String(result[0]),position=max(min(toInteger(result.index),S.length),0),captures=[],j=1;j<result.length;j++)captures.push(void 0===(it=result[j])?it:String(it));var namedCaptures=result.groups;if(functionalReplace){var replacerArgs=[matched].concat(captures,position,S);void 0!==namedCaptures&&replacerArgs.push(namedCaptures);var replacement=String(replaceValue.apply(void 0,replacerArgs))}else replacement=getSubstitution(matched,S,position,captures,namedCaptures,replaceValue);position>=nextSourcePosition&&(accumulatedResult+=S.slice(nextSourcePosition,position)+replacement,nextSourcePosition=position+matched.length)}return accumulatedResult+S.slice(nextSourcePosition)}];function getSubstitution(matched,str,position,captures,namedCaptures,replacement){var tailPos=position+matched.length,m=captures.length,symbols=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==namedCaptures&&(namedCaptures=toObject(namedCaptures),symbols=SUBSTITUTION_SYMBOLS),nativeReplace.call(replacement,symbols,(function(match,ch){var capture;switch(ch.charAt(0)){case"$":return"$";case"&":return matched;case"`":return str.slice(0,position);case"'":return str.slice(tailPos);case"<":capture=namedCaptures[ch.slice(1,-1)];break;default:var n=+ch;if(0===n)return match;if(n>m){var f=floor(n/10);return 0===f?match:f<=m?void 0===captures[f-1]?ch.charAt(1):captures[f-1]+ch.charAt(1):match}capture=captures[n-1]}return void 0===capture?"":capture}))}}))},function(module,exports,__webpack_require__){"use strict";var replace=String.prototype.replace,percentTwenties=/%20/g,util=__webpack_require__(296),Format={RFC1738:"RFC1738",RFC3986:"RFC3986"};module.exports=util.assign({default:Format.RFC3986,formatters:{RFC1738:function(value){return replace.call(value,percentTwenties,"+")},RFC3986:function(value){return String(value)}}},Format)},function(module,exports,__webpack_require__){(function(global){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,__webpack_require__(36))},function(module,exports){var reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");module.exports=function hasUnicode(string){return reHasUnicode.test(string)}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(232),stackClear=__webpack_require__(640),stackDelete=__webpack_require__(641),stackGet=__webpack_require__(642),stackHas=__webpack_require__(643),stackSet=__webpack_require__(644);function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},function(module,exports){var funcToString=Function.prototype.toString;module.exports=function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(301),eq=__webpack_require__(187);module.exports=function assignMergeValue(object,key,value){(void 0===value||eq(object[key],value))&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}},function(module,exports,__webpack_require__){var getNative=__webpack_require__(136),defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();module.exports=defineProperty},function(module,exports,__webpack_require__){var Uint8Array=__webpack_require__(79).Uint8Array;module.exports=Uint8Array},function(module,exports,__webpack_require__){var getPrototype=__webpack_require__(397)(Object.getPrototypeOf,Object);module.exports=getPrototype},function(module,exports){module.exports=function overArg(func,transform){return function(arg){return func(transform(arg))}}},function(module,exports,__webpack_require__){var baseIsArguments=__webpack_require__(670),isObjectLike=__webpack_require__(135),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;module.exports=function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}},function(module,exports){module.exports=function safeGet(object,key){if(("constructor"!==key||"function"!=typeof object[key])&&"__proto__"!=key)return object[key]}},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(402),baseKeysIn=__webpack_require__(681),isArrayLike=__webpack_require__(236);module.exports=function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}},function(module,exports,__webpack_require__){var baseTimes=__webpack_require__(680),isArguments=__webpack_require__(398),isArray=__webpack_require__(134),isBuffer=__webpack_require__(303),isIndex=__webpack_require__(403),isTypedArray=__webpack_require__(304),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;module.exports=function isIndex(value,length){var type=typeof value;return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}},function(module,exports){module.exports=function identity(value){return value}},function(module,exports,__webpack_require__){var SetCache=__webpack_require__(695),arraySome=__webpack_require__(698),cacheHas=__webpack_require__(699),COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;module.exports=function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}},function(module,exports,__webpack_require__){var baseGet=__webpack_require__(718);module.exports=function get(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(87),__webpack_require__(89),__webpack_require__(408),__webpack_require__(27),__webpack_require__(78),__webpack_require__(102),__webpack_require__(88),__webpack_require__(103),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.createSubscriptionsStore=void 0;var createSubscriptionsStore=function createSubscriptionsStore(){var subscriptions=new Map;return{register:function register(subscribe){var subscription=subscriptions.get(subscribe);subscription||(subscription={unsubscribe:subscribe()},subscriptions.set(subscribe,subscription)),subscription.used=!0},markAllAsUnused:function markAllAsUnused(){subscriptions.forEach((function(subscription){subscription.used=!1}))},clearUnused:function clearUnused(){subscriptions.forEach((function(subscription,key){subscription.used||(subscription.unsubscribe(),subscriptions.delete(key))}))}}};exports.createSubscriptionsStore=createSubscriptionsStore;var _default=createSubscriptionsStore();exports.default=_default},function(module,exports,__webpack_require__){"use strict";var collection=__webpack_require__(292),collectionStrong=__webpack_require__(382);module.exports=collection("Map",(function(get){return function Map(){return get(this,arguments.length?arguments[0]:void 0)}}),collectionStrong,!0)},function(module,exports,__webpack_require__){__webpack_require__(19)({target:"Object",stat:!0,sham:!__webpack_require__(49)},{create:__webpack_require__(146)})},function(module,exports,__webpack_require__){__webpack_require__(19)({target:"Object",stat:!0},{setPrototypeOf:__webpack_require__(286)})},function(module,exports,__webpack_require__){var $=__webpack_require__(19),global=__webpack_require__(29),userAgent=__webpack_require__(214),slice=[].slice,wrap=function(scheduler){return function(handler,timeout){var boundArgs=arguments.length>2,args=boundArgs?slice.call(arguments,2):void 0;return scheduler(boundArgs?function(){("function"==typeof handler?handler:Function(handler)).apply(this,args)}:handler,timeout)}};$({global:!0,bind:!0,forced:/MSIE .\./.test(userAgent)},{setTimeout:wrap(global.setTimeout),setInterval:wrap(global.setInterval)})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),$indexOf=__webpack_require__(277).indexOf,sloppyArrayMethod=__webpack_require__(180),nativeIndexOf=[].indexOf,NEGATIVE_ZERO=!!nativeIndexOf&&1/[1].indexOf(1,-0)<0,SLOPPY_METHOD=sloppyArrayMethod("indexOf");$({target:"Array",proto:!0,forced:NEGATIVE_ZERO||SLOPPY_METHOD},{indexOf:function indexOf(searchElement){return NEGATIVE_ZERO?nativeIndexOf.apply(this,arguments)||0:$indexOf(this,searchElement,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}module.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map((function(n){return test2[n]})).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach((function(letter){test3[letter]=letter})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}()?Object.assign:function(target,source){for(var from,symbols,to=toObject(target),s=1;s<arguments.length;s++){for(var key in from=Object(arguments[s]))hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},function(module,exports,__webpack_require__){"use strict";!function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(err){console.error(err)}}}(),module.exports=__webpack_require__(738)},function(module){module.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},function(module){module.exports=JSON.parse('{"Aacute":"","aacute":"","Abreve":"","abreve":"","ac":"","acd":"","acE":"","Acirc":"","acirc":"","acute":"","Acy":"","acy":"","AElig":"","aelig":"","af":"","Afr":"","afr":"","Agrave":"","agrave":"","alefsym":"","aleph":"","Alpha":"","alpha":"","Amacr":"","amacr":"","amalg":"","amp":"&","AMP":"&","andand":"","And":"","and":"","andd":"","andslope":"","andv":"","ang":"","ange":"","angle":"","angmsdaa":"","angmsdab":"","angmsdac":"","angmsdad":"","angmsdae":"","angmsdaf":"","angmsdag":"","angmsdah":"","angmsd":"","angrt":"","angrtvb":"","angrtvbd":"","angsph":"","angst":"","angzarr":"","Aogon":"","aogon":"","Aopf":"","aopf":"","apacir":"","ap":"","apE":"","ape":"","apid":"","apos":"\'","ApplyFunction":"","approx":"","approxeq":"","Aring":"","aring":"","Ascr":"","ascr":"","Assign":"","ast":"*","asymp":"","asympeq":"","Atilde":"","atilde":"","Auml":"","auml":"","awconint":"","awint":"","backcong":"","backepsilon":"","backprime":"","backsim":"","backsimeq":"","Backslash":"","Barv":"","barvee":"","barwed":"","Barwed":"","barwedge":"","bbrk":"","bbrktbrk":"","bcong":"","Bcy":"","bcy":"","bdquo":"","becaus":"","because":"","Because":"","bemptyv":"","bepsi":"","bernou":"","Bernoullis":"","Beta":"","beta":"","beth":"","between":"","Bfr":"","bfr":"","bigcap":"","bigcirc":"","bigcup":"","bigodot":"","bigoplus":"","bigotimes":"","bigsqcup":"","bigstar":"","bigtriangledown":"","bigtriangleup":"","biguplus":"","bigvee":"","bigwedge":"","bkarow":"","blacklozenge":"","blacksquare":"","blacktriangle":"","blacktriangledown":"","blacktriangleleft":"","blacktriangleright":"","blank":"","blk12":"","blk14":"","blk34":"","block":"","bne":"=","bnequiv":"","bNot":"","bnot":"","Bopf":"","bopf":"","bot":"","bottom":"","bowtie":"","boxbox":"","boxdl":"","boxdL":"","boxDl":"","boxDL":"","boxdr":"","boxdR":"","boxDr":"","boxDR":"","boxh":"","boxH":"","boxhd":"","boxHd":"","boxhD":"","boxHD":"","boxhu":"","boxHu":"","boxhU":"","boxHU":"","boxminus":"","boxplus":"","boxtimes":"","boxul":"","boxuL":"","boxUl":"","boxUL":"","boxur":"","boxuR":"","boxUr":"","boxUR":"","boxv":"","boxV":"","boxvh":"","boxvH":"","boxVh":"","boxVH":"","boxvl":"","boxvL":"","boxVl":"","boxVL":"","boxvr":"","boxvR":"","boxVr":"","boxVR":"","bprime":"","breve":"","Breve":"","brvbar":"","bscr":"","Bscr":"","bsemi":"","bsim":"","bsime":"","bsolb":"","bsol":"\\\\","bsolhsub":"","bull":"","bullet":"","bump":"","bumpE":"","bumpe":"","Bumpeq":"","bumpeq":"","Cacute":"","cacute":"","capand":"","capbrcup":"","capcap":"","cap":"","Cap":"","capcup":"","capdot":"","CapitalDifferentialD":"","caps":"","caret":"","caron":"","Cayleys":"","ccaps":"","Ccaron":"","ccaron":"","Ccedil":"","ccedil":"","Ccirc":"","ccirc":"","Cconint":"","ccups":"","ccupssm":"","Cdot":"","cdot":"","cedil":"","Cedilla":"","cemptyv":"","cent":"","centerdot":"","CenterDot":"","cfr":"","Cfr":"","CHcy":"","chcy":"","check":"","checkmark":"","Chi":"","chi":"","circ":"","circeq":"","circlearrowleft":"","circlearrowright":"","circledast":"","circledcirc":"","circleddash":"","CircleDot":"","circledR":"","circledS":"","CircleMinus":"","CirclePlus":"","CircleTimes":"","cir":"","cirE":"","cire":"","cirfnint":"","cirmid":"","cirscir":"","ClockwiseContourIntegral":"","CloseCurlyDoubleQuote":"","CloseCurlyQuote":"","clubs":"","clubsuit":"","colon":":","Colon":"","Colone":"","colone":"","coloneq":"","comma":",","commat":"@","comp":"","compfn":"","complement":"","complexes":"","cong":"","congdot":"","Congruent":"","conint":"","Conint":"","ContourIntegral":"","copf":"","Copf":"","coprod":"","Coproduct":"","copy":"","COPY":"","copysr":"","CounterClockwiseContourIntegral":"","crarr":"","cross":"","Cross":"","Cscr":"","cscr":"","csub":"","csube":"","csup":"","csupe":"","ctdot":"","cudarrl":"","cudarrr":"","cuepr":"","cuesc":"","cularr":"","cularrp":"","cupbrcap":"","cupcap":"","CupCap":"","cup":"","Cup":"","cupcup":"","cupdot":"","cupor":"","cups":"","curarr":"","curarrm":"","curlyeqprec":"","curlyeqsucc":"","curlyvee":"","curlywedge":"","curren":"","curvearrowleft":"","curvearrowright":"","cuvee":"","cuwed":"","cwconint":"","cwint":"","cylcty":"","dagger":"","Dagger":"","daleth":"","darr":"","Darr":"","dArr":"","dash":"","Dashv":"","dashv":"","dbkarow":"","dblac":"","Dcaron":"","dcaron":"","Dcy":"","dcy":"","ddagger":"","ddarr":"","DD":"","dd":"","DDotrahd":"","ddotseq":"","deg":"","Del":"","Delta":"","delta":"","demptyv":"","dfisht":"","Dfr":"","dfr":"","dHar":"","dharl":"","dharr":"","DiacriticalAcute":"","DiacriticalDot":"","DiacriticalDoubleAcute":"","DiacriticalGrave":"`","DiacriticalTilde":"","diam":"","diamond":"","Diamond":"","diamondsuit":"","diams":"","die":"","DifferentialD":"","digamma":"","disin":"","div":"","divide":"","divideontimes":"","divonx":"","DJcy":"","djcy":"","dlcorn":"","dlcrop":"","dollar":"$","Dopf":"","dopf":"","Dot":"","dot":"","DotDot":"","doteq":"","doteqdot":"","DotEqual":"","dotminus":"","dotplus":"","dotsquare":"","doublebarwedge":"","DoubleContourIntegral":"","DoubleDot":"","DoubleDownArrow":"","DoubleLeftArrow":"","DoubleLeftRightArrow":"","DoubleLeftTee":"","DoubleLongLeftArrow":"","DoubleLongLeftRightArrow":"","DoubleLongRightArrow":"","DoubleRightArrow":"","DoubleRightTee":"","DoubleUpArrow":"","DoubleUpDownArrow":"","DoubleVerticalBar":"","DownArrowBar":"","downarrow":"","DownArrow":"","Downarrow":"","DownArrowUpArrow":"","DownBreve":"","downdownarrows":"","downharpoonleft":"","downharpoonright":"","DownLeftRightVector":"","DownLeftTeeVector":"","DownLeftVectorBar":"","DownLeftVector":"","DownRightTeeVector":"","DownRightVectorBar":"","DownRightVector":"","DownTeeArrow":"","DownTee":"","drbkarow":"","drcorn":"","drcrop":"","Dscr":"","dscr":"","DScy":"","dscy":"","dsol":"","Dstrok":"","dstrok":"","dtdot":"","dtri":"","dtrif":"","duarr":"","duhar":"","dwangle":"","DZcy":"","dzcy":"","dzigrarr":"","Eacute":"","eacute":"","easter":"","Ecaron":"","ecaron":"","Ecirc":"","ecirc":"","ecir":"","ecolon":"","Ecy":"","ecy":"","eDDot":"","Edot":"","edot":"","eDot":"","ee":"","efDot":"","Efr":"","efr":"","eg":"","Egrave":"","egrave":"","egs":"","egsdot":"","el":"","Element":"","elinters":"","ell":"","els":"","elsdot":"","Emacr":"","emacr":"","empty":"","emptyset":"","EmptySmallSquare":"","emptyv":"","EmptyVerySmallSquare":"","emsp13":"","emsp14":"","emsp":"","ENG":"","eng":"","ensp":"","Eogon":"","eogon":"","Eopf":"","eopf":"","epar":"","eparsl":"","eplus":"","epsi":"","Epsilon":"","epsilon":"","epsiv":"","eqcirc":"","eqcolon":"","eqsim":"","eqslantgtr":"","eqslantless":"","Equal":"","equals":"=","EqualTilde":"","equest":"","Equilibrium":"","equiv":"","equivDD":"","eqvparsl":"","erarr":"","erDot":"","escr":"","Escr":"","esdot":"","Esim":"","esim":"","Eta":"","eta":"","ETH":"","eth":"","Euml":"","euml":"","euro":"","excl":"!","exist":"","Exists":"","expectation":"","exponentiale":"","ExponentialE":"","fallingdotseq":"","Fcy":"","fcy":"","female":"","ffilig":"","fflig":"","ffllig":"","Ffr":"","ffr":"","filig":"","FilledSmallSquare":"","FilledVerySmallSquare":"","fjlig":"fj","flat":"","fllig":"","fltns":"","fnof":"","Fopf":"","fopf":"","forall":"","ForAll":"","fork":"","forkv":"","Fouriertrf":"","fpartint":"","frac12":"","frac13":"","frac14":"","frac15":"","frac16":"","frac18":"","frac23":"","frac25":"","frac34":"","frac35":"","frac38":"","frac45":"","frac56":"","frac58":"","frac78":"","frasl":"","frown":"","fscr":"","Fscr":"","gacute":"","Gamma":"","gamma":"","Gammad":"","gammad":"","gap":"","Gbreve":"","gbreve":"","Gcedil":"","Gcirc":"","gcirc":"","Gcy":"","gcy":"","Gdot":"","gdot":"","ge":"","gE":"","gEl":"","gel":"","geq":"","geqq":"","geqslant":"","gescc":"","ges":"","gesdot":"","gesdoto":"","gesdotol":"","gesl":"","gesles":"","Gfr":"","gfr":"","gg":"","Gg":"","ggg":"","gimel":"","GJcy":"","gjcy":"","gla":"","gl":"","glE":"","glj":"","gnap":"","gnapprox":"","gne":"","gnE":"","gneq":"","gneqq":"","gnsim":"","Gopf":"","gopf":"","grave":"`","GreaterEqual":"","GreaterEqualLess":"","GreaterFullEqual":"","GreaterGreater":"","GreaterLess":"","GreaterSlantEqual":"","GreaterTilde":"","Gscr":"","gscr":"","gsim":"","gsime":"","gsiml":"","gtcc":"","gtcir":"","gt":">","GT":">","Gt":"","gtdot":"","gtlPar":"","gtquest":"","gtrapprox":"","gtrarr":"","gtrdot":"","gtreqless":"","gtreqqless":"","gtrless":"","gtrsim":"","gvertneqq":"","gvnE":"","Hacek":"","hairsp":"","half":"","hamilt":"","HARDcy":"","hardcy":"","harrcir":"","harr":"","hArr":"","harrw":"","Hat":"^","hbar":"","Hcirc":"","hcirc":"","hearts":"","heartsuit":"","hellip":"","hercon":"","hfr":"","Hfr":"","HilbertSpace":"","hksearow":"","hkswarow":"","hoarr":"","homtht":"","hookleftarrow":"","hookrightarrow":"","hopf":"","Hopf":"","horbar":"","HorizontalLine":"","hscr":"","Hscr":"","hslash":"","Hstrok":"","hstrok":"","HumpDownHump":"","HumpEqual":"","hybull":"","hyphen":"","Iacute":"","iacute":"","ic":"","Icirc":"","icirc":"","Icy":"","icy":"","Idot":"","IEcy":"","iecy":"","iexcl":"","iff":"","ifr":"","Ifr":"","Igrave":"","igrave":"","ii":"","iiiint":"","iiint":"","iinfin":"","iiota":"","IJlig":"","ijlig":"","Imacr":"","imacr":"","image":"","ImaginaryI":"","imagline":"","imagpart":"","imath":"","Im":"","imof":"","imped":"","Implies":"","incare":"","in":"","infin":"","infintie":"","inodot":"","intcal":"","int":"","Int":"","integers":"","Integral":"","intercal":"","Intersection":"","intlarhk":"","intprod":"","InvisibleComma":"","InvisibleTimes":"","IOcy":"","iocy":"","Iogon":"","iogon":"","Iopf":"","iopf":"","Iota":"","iota":"","iprod":"","iquest":"","iscr":"","Iscr":"","isin":"","isindot":"","isinE":"","isins":"","isinsv":"","isinv":"","it":"","Itilde":"","itilde":"","Iukcy":"","iukcy":"","Iuml":"","iuml":"","Jcirc":"","jcirc":"","Jcy":"","jcy":"","Jfr":"","jfr":"","jmath":"","Jopf":"","jopf":"","Jscr":"","jscr":"","Jsercy":"","jsercy":"","Jukcy":"","jukcy":"","Kappa":"","kappa":"","kappav":"","Kcedil":"","kcedil":"","Kcy":"","kcy":"","Kfr":"","kfr":"","kgreen":"","KHcy":"","khcy":"","KJcy":"","kjcy":"","Kopf":"","kopf":"","Kscr":"","kscr":"","lAarr":"","Lacute":"","lacute":"","laemptyv":"","lagran":"","Lambda":"","lambda":"","lang":"","Lang":"","langd":"","langle":"","lap":"","Laplacetrf":"","laquo":"","larrb":"","larrbfs":"","larr":"","Larr":"","lArr":"","larrfs":"","larrhk":"","larrlp":"","larrpl":"","larrsim":"","larrtl":"","latail":"","lAtail":"","lat":"","late":"","lates":"","lbarr":"","lBarr":"","lbbrk":"","lbrace":"{","lbrack":"[","lbrke":"","lbrksld":"","lbrkslu":"","Lcaron":"","lcaron":"","Lcedil":"","lcedil":"","lceil":"","lcub":"{","Lcy":"","lcy":"","ldca":"","ldquo":"","ldquor":"","ldrdhar":"","ldrushar":"","ldsh":"","le":"","lE":"","LeftAngleBracket":"","LeftArrowBar":"","leftarrow":"","LeftArrow":"","Leftarrow":"","LeftArrowRightArrow":"","leftarrowtail":"","LeftCeiling":"","LeftDoubleBracket":"","LeftDownTeeVector":"","LeftDownVectorBar":"","LeftDownVector":"","LeftFloor":"","leftharpoondown":"","leftharpoonup":"","leftleftarrows":"","leftrightarrow":"","LeftRightArrow":"","Leftrightarrow":"","leftrightarrows":"","leftrightharpoons":"","leftrightsquigarrow":"","LeftRightVector":"","LeftTeeArrow":"","LeftTee":"","LeftTeeVector":"","leftthreetimes":"","LeftTriangleBar":"","LeftTriangle":"","LeftTriangleEqual":"","LeftUpDownVector":"","LeftUpTeeVector":"","LeftUpVectorBar":"","LeftUpVector":"","LeftVectorBar":"","LeftVector":"","lEg":"","leg":"","leq":"","leqq":"","leqslant":"","lescc":"","les":"","lesdot":"","lesdoto":"","lesdotor":"","lesg":"","lesges":"","lessapprox":"","lessdot":"","lesseqgtr":"","lesseqqgtr":"","LessEqualGreater":"","LessFullEqual":"","LessGreater":"","lessgtr":"","LessLess":"","lesssim":"","LessSlantEqual":"","LessTilde":"","lfisht":"","lfloor":"","Lfr":"","lfr":"","lg":"","lgE":"","lHar":"","lhard":"","lharu":"","lharul":"","lhblk":"","LJcy":"","ljcy":"","llarr":"","ll":"","Ll":"","llcorner":"","Lleftarrow":"","llhard":"","lltri":"","Lmidot":"","lmidot":"","lmoustache":"","lmoust":"","lnap":"","lnapprox":"","lne":"","lnE":"","lneq":"","lneqq":"","lnsim":"","loang":"","loarr":"","lobrk":"","longleftarrow":"","LongLeftArrow":"","Longleftarrow":"","longleftrightarrow":"","LongLeftRightArrow":"","Longleftrightarrow":"","longmapsto":"","longrightarrow":"","LongRightArrow":"","Longrightarrow":"","looparrowleft":"","looparrowright":"","lopar":"","Lopf":"","lopf":"","loplus":"","lotimes":"","lowast":"","lowbar":"_","LowerLeftArrow":"","LowerRightArrow":"","loz":"","lozenge":"","lozf":"","lpar":"(","lparlt":"","lrarr":"","lrcorner":"","lrhar":"","lrhard":"","lrm":"","lrtri":"","lsaquo":"","lscr":"","Lscr":"","lsh":"","Lsh":"","lsim":"","lsime":"","lsimg":"","lsqb":"[","lsquo":"","lsquor":"","Lstrok":"","lstrok":"","ltcc":"","ltcir":"","lt":"<","LT":"<","Lt":"","ltdot":"","lthree":"","ltimes":"","ltlarr":"","ltquest":"","ltri":"","ltrie":"","ltrif":"","ltrPar":"","lurdshar":"","luruhar":"","lvertneqq":"","lvnE":"","macr":"","male":"","malt":"","maltese":"","Map":"","map":"","mapsto":"","mapstodown":"","mapstoleft":"","mapstoup":"","marker":"","mcomma":"","Mcy":"","mcy":"","mdash":"","mDDot":"","measuredangle":"","MediumSpace":"","Mellintrf":"","Mfr":"","mfr":"","mho":"","micro":"","midast":"*","midcir":"","mid":"","middot":"","minusb":"","minus":"","minusd":"","minusdu":"","MinusPlus":"","mlcp":"","mldr":"","mnplus":"","models":"","Mopf":"","mopf":"","mp":"","mscr":"","Mscr":"","mstpos":"","Mu":"","mu":"","multimap":"","mumap":"","nabla":"","Nacute":"","nacute":"","nang":"","nap":"","napE":"","napid":"","napos":"","napprox":"","natural":"","naturals":"","natur":"","nbsp":"","nbump":"","nbumpe":"","ncap":"","Ncaron":"","ncaron":"","Ncedil":"","ncedil":"","ncong":"","ncongdot":"","ncup":"","Ncy":"","ncy":"","ndash":"","nearhk":"","nearr":"","neArr":"","nearrow":"","ne":"","nedot":"","NegativeMediumSpace":"","NegativeThickSpace":"","NegativeThinSpace":"","NegativeVeryThinSpace":"","nequiv":"","nesear":"","nesim":"","NestedGreaterGreater":"","NestedLessLess":"","NewLine":"\\n","nexist":"","nexists":"","Nfr":"","nfr":"","ngE":"","nge":"","ngeq":"","ngeqq":"","ngeqslant":"","nges":"","nGg":"","ngsim":"","nGt":"","ngt":"","ngtr":"","nGtv":"","nharr":"","nhArr":"","nhpar":"","ni":"","nis":"","nisd":"","niv":"","NJcy":"","njcy":"","nlarr":"","nlArr":"","nldr":"","nlE":"","nle":"","nleftarrow":"","nLeftarrow":"","nleftrightarrow":"","nLeftrightarrow":"","nleq":"","nleqq":"","nleqslant":"","nles":"","nless":"","nLl":"","nlsim":"","nLt":"","nlt":"","nltri":"","nltrie":"","nLtv":"","nmid":"","NoBreak":"","NonBreakingSpace":"","nopf":"","Nopf":"","Not":"","not":"","NotCongruent":"","NotCupCap":"","NotDoubleVerticalBar":"","NotElement":"","NotEqual":"","NotEqualTilde":"","NotExists":"","NotGreater":"","NotGreaterEqual":"","NotGreaterFullEqual":"","NotGreaterGreater":"","NotGreaterLess":"","NotGreaterSlantEqual":"","NotGreaterTilde":"","NotHumpDownHump":"","NotHumpEqual":"","notin":"","notindot":"","notinE":"","notinva":"","notinvb":"","notinvc":"","NotLeftTriangleBar":"","NotLeftTriangle":"","NotLeftTriangleEqual":"","NotLess":"","NotLessEqual":"","NotLessGreater":"","NotLessLess":"","NotLessSlantEqual":"","NotLessTilde":"","NotNestedGreaterGreater":"","NotNestedLessLess":"","notni":"","notniva":"","notnivb":"","notnivc":"","NotPrecedes":"","NotPrecedesEqual":"","NotPrecedesSlantEqual":"","NotReverseElement":"","NotRightTriangleBar":"","NotRightTriangle":"","NotRightTriangleEqual":"","NotSquareSubset":"","NotSquareSubsetEqual":"","NotSquareSuperset":"","NotSquareSupersetEqual":"","NotSubset":"","NotSubsetEqual":"","NotSucceeds":"","NotSucceedsEqual":"","NotSucceedsSlantEqual":"","NotSucceedsTilde":"","NotSuperset":"","NotSupersetEqual":"","NotTilde":"","NotTildeEqual":"","NotTildeFullEqual":"","NotTildeTilde":"","NotVerticalBar":"","nparallel":"","npar":"","nparsl":"","npart":"","npolint":"","npr":"","nprcue":"","nprec":"","npreceq":"","npre":"","nrarrc":"","nrarr":"","nrArr":"","nrarrw":"","nrightarrow":"","nRightarrow":"","nrtri":"","nrtrie":"","nsc":"","nsccue":"","nsce":"","Nscr":"","nscr":"","nshortmid":"","nshortparallel":"","nsim":"","nsime":"","nsimeq":"","nsmid":"","nspar":"","nsqsube":"","nsqsupe":"","nsub":"","nsubE":"","nsube":"","nsubset":"","nsubseteq":"","nsubseteqq":"","nsucc":"","nsucceq":"","nsup":"","nsupE":"","nsupe":"","nsupset":"","nsupseteq":"","nsupseteqq":"","ntgl":"","Ntilde":"","ntilde":"","ntlg":"","ntriangleleft":"","ntrianglelefteq":"","ntriangleright":"","ntrianglerighteq":"","Nu":"","nu":"","num":"#","numero":"","numsp":"","nvap":"","nvdash":"","nvDash":"","nVdash":"","nVDash":"","nvge":"","nvgt":">","nvHarr":"","nvinfin":"","nvlArr":"","nvle":"","nvlt":"<","nvltrie":"","nvrArr":"","nvrtrie":"","nvsim":"","nwarhk":"","nwarr":"","nwArr":"","nwarrow":"","nwnear":"","Oacute":"","oacute":"","oast":"","Ocirc":"","ocirc":"","ocir":"","Ocy":"","ocy":"","odash":"","Odblac":"","odblac":"","odiv":"","odot":"","odsold":"","OElig":"","oelig":"","ofcir":"","Ofr":"","ofr":"","ogon":"","Ograve":"","ograve":"","ogt":"","ohbar":"","ohm":"","oint":"","olarr":"","olcir":"","olcross":"","oline":"","olt":"","Omacr":"","omacr":"","Omega":"","omega":"","Omicron":"","omicron":"","omid":"","ominus":"","Oopf":"","oopf":"","opar":"","OpenCurlyDoubleQuote":"","OpenCurlyQuote":"","operp":"","oplus":"","orarr":"","Or":"","or":"","ord":"","order":"","orderof":"","ordf":"","ordm":"","origof":"","oror":"","orslope":"","orv":"","oS":"","Oscr":"","oscr":"","Oslash":"","oslash":"","osol":"","Otilde":"","otilde":"","otimesas":"","Otimes":"","otimes":"","Ouml":"","ouml":"","ovbar":"","OverBar":"","OverBrace":"","OverBracket":"","OverParenthesis":"","para":"","parallel":"","par":"","parsim":"","parsl":"","part":"","PartialD":"","Pcy":"","pcy":"","percnt":"%","period":".","permil":"","perp":"","pertenk":"","Pfr":"","pfr":"","Phi":"","phi":"","phiv":"","phmmat":"","phone":"","Pi":"","pi":"","pitchfork":"","piv":"","planck":"","planckh":"","plankv":"","plusacir":"","plusb":"","pluscir":"","plus":"+","plusdo":"","plusdu":"","pluse":"","PlusMinus":"","plusmn":"","plussim":"","plustwo":"","pm":"","Poincareplane":"","pointint":"","popf":"","Popf":"","pound":"","prap":"","Pr":"","pr":"","prcue":"","precapprox":"","prec":"","preccurlyeq":"","Precedes":"","PrecedesEqual":"","PrecedesSlantEqual":"","PrecedesTilde":"","preceq":"","precnapprox":"","precneqq":"","precnsim":"","pre":"","prE":"","precsim":"","prime":"","Prime":"","primes":"","prnap":"","prnE":"","prnsim":"","prod":"","Product":"","profalar":"","profline":"","profsurf":"","prop":"","Proportional":"","Proportion":"","propto":"","prsim":"","prurel":"","Pscr":"","pscr":"","Psi":"","psi":"","puncsp":"","Qfr":"","qfr":"","qint":"","qopf":"","Qopf":"","qprime":"","Qscr":"","qscr":"","quaternions":"","quatint":"","quest":"?","questeq":"","quot":"\\"","QUOT":"\\"","rAarr":"","race":"","Racute":"","racute":"","radic":"","raemptyv":"","rang":"","Rang":"","rangd":"","range":"","rangle":"","raquo":"","rarrap":"","rarrb":"","rarrbfs":"","rarrc":"","rarr":"","Rarr":"","rArr":"","rarrfs":"","rarrhk":"","rarrlp":"","rarrpl":"","rarrsim":"","Rarrtl":"","rarrtl":"","rarrw":"","ratail":"","rAtail":"","ratio":"","rationals":"","rbarr":"","rBarr":"","RBarr":"","rbbrk":"","rbrace":"}","rbrack":"]","rbrke":"","rbrksld":"","rbrkslu":"","Rcaron":"","rcaron":"","Rcedil":"","rcedil":"","rceil":"","rcub":"}","Rcy":"","rcy":"","rdca":"","rdldhar":"","rdquo":"","rdquor":"","rdsh":"","real":"","realine":"","realpart":"","reals":"","Re":"","rect":"","reg":"","REG":"","ReverseElement":"","ReverseEquilibrium":"","ReverseUpEquilibrium":"","rfisht":"","rfloor":"","rfr":"","Rfr":"","rHar":"","rhard":"","rharu":"","rharul":"","Rho":"","rho":"","rhov":"","RightAngleBracket":"","RightArrowBar":"","rightarrow":"","RightArrow":"","Rightarrow":"","RightArrowLeftArrow":"","rightarrowtail":"","RightCeiling":"","RightDoubleBracket":"","RightDownTeeVector":"","RightDownVectorBar":"","RightDownVector":"","RightFloor":"","rightharpoondown":"","rightharpoonup":"","rightleftarrows":"","rightleftharpoons":"","rightrightarrows":"","rightsquigarrow":"","RightTeeArrow":"","RightTee":"","RightTeeVector":"","rightthreetimes":"","RightTriangleBar":"","RightTriangle":"","RightTriangleEqual":"","RightUpDownVector":"","RightUpTeeVector":"","RightUpVectorBar":"","RightUpVector":"","RightVectorBar":"","RightVector":"","ring":"","risingdotseq":"","rlarr":"","rlhar":"","rlm":"","rmoustache":"","rmoust":"","rnmid":"","roang":"","roarr":"","robrk":"","ropar":"","ropf":"","Ropf":"","roplus":"","rotimes":"","RoundImplies":"","rpar":")","rpargt":"","rppolint":"","rrarr":"","Rrightarrow":"","rsaquo":"","rscr":"","Rscr":"","rsh":"","Rsh":"","rsqb":"]","rsquo":"","rsquor":"","rthree":"","rtimes":"","rtri":"","rtrie":"","rtrif":"","rtriltri":"","RuleDelayed":"","ruluhar":"","rx":"","Sacute":"","sacute":"","sbquo":"","scap":"","Scaron":"","scaron":"","Sc":"","sc":"","sccue":"","sce":"","scE":"","Scedil":"","scedil":"","Scirc":"","scirc":"","scnap":"","scnE":"","scnsim":"","scpolint":"","scsim":"","Scy":"","scy":"","sdotb":"","sdot":"","sdote":"","searhk":"","searr":"","seArr":"","searrow":"","sect":"","semi":";","seswar":"","setminus":"","setmn":"","sext":"","Sfr":"","sfr":"","sfrown":"","sharp":"","SHCHcy":"","shchcy":"","SHcy":"","shcy":"","ShortDownArrow":"","ShortLeftArrow":"","shortmid":"","shortparallel":"","ShortRightArrow":"","ShortUpArrow":"","shy":"","Sigma":"","sigma":"","sigmaf":"","sigmav":"","sim":"","simdot":"","sime":"","simeq":"","simg":"","simgE":"","siml":"","simlE":"","simne":"","simplus":"","simrarr":"","slarr":"","SmallCircle":"","smallsetminus":"","smashp":"","smeparsl":"","smid":"","smile":"","smt":"","smte":"","smtes":"","SOFTcy":"","softcy":"","solbar":"","solb":"","sol":"/","Sopf":"","sopf":"","spades":"","spadesuit":"","spar":"","sqcap":"","sqcaps":"","sqcup":"","sqcups":"","Sqrt":"","sqsub":"","sqsube":"","sqsubset":"","sqsubseteq":"","sqsup":"","sqsupe":"","sqsupset":"","sqsupseteq":"","square":"","Square":"","SquareIntersection":"","SquareSubset":"","SquareSubsetEqual":"","SquareSuperset":"","SquareSupersetEqual":"","SquareUnion":"","squarf":"","squ":"","squf":"","srarr":"","Sscr":"","sscr":"","ssetmn":"","ssmile":"","sstarf":"","Star":"","star":"","starf":"","straightepsilon":"","straightphi":"","strns":"","sub":"","Sub":"","subdot":"","subE":"","sube":"","subedot":"","submult":"","subnE":"","subne":"","subplus":"","subrarr":"","subset":"","Subset":"","subseteq":"","subseteqq":"","SubsetEqual":"","subsetneq":"","subsetneqq":"","subsim":"","subsub":"","subsup":"","succapprox":"","succ":"","succcurlyeq":"","Succeeds":"","SucceedsEqual":"","SucceedsSlantEqual":"","SucceedsTilde":"","succeq":"","succnapprox":"","succneqq":"","succnsim":"","succsim":"","SuchThat":"","sum":"","Sum":"","sung":"","sup1":"","sup2":"","sup3":"","sup":"","Sup":"","supdot":"","supdsub":"","supE":"","supe":"","supedot":"","Superset":"","SupersetEqual":"","suphsol":"","suphsub":"","suplarr":"","supmult":"","supnE":"","supne":"","supplus":"","supset":"","Supset":"","supseteq":"","supseteqq":"","supsetneq":"","supsetneqq":"","supsim":"","supsub":"","supsup":"","swarhk":"","swarr":"","swArr":"","swarrow":"","swnwar":"","szlig":"","Tab":"\\t","target":"","Tau":"","tau":"","tbrk":"","Tcaron":"","tcaron":"","Tcedil":"","tcedil":"","Tcy":"","tcy":"","tdot":"","telrec":"","Tfr":"","tfr":"","there4":"","therefore":"","Therefore":"","Theta":"","theta":"","thetasym":"","thetav":"","thickapprox":"","thicksim":"","ThickSpace":"","ThinSpace":"","thinsp":"","thkap":"","thksim":"","THORN":"","thorn":"","tilde":"","Tilde":"","TildeEqual":"","TildeFullEqual":"","TildeTilde":"","timesbar":"","timesb":"","times":"","timesd":"","tint":"","toea":"","topbot":"","topcir":"","top":"","Topf":"","topf":"","topfork":"","tosa":"","tprime":"","trade":"","TRADE":"","triangle":"","triangledown":"","triangleleft":"","trianglelefteq":"","triangleq":"","triangleright":"","trianglerighteq":"","tridot":"","trie":"","triminus":"","TripleDot":"","triplus":"","trisb":"","tritime":"","trpezium":"","Tscr":"","tscr":"","TScy":"","tscy":"","TSHcy":"","tshcy":"","Tstrok":"","tstrok":"","twixt":"","twoheadleftarrow":"","twoheadrightarrow":"","Uacute":"","uacute":"","uarr":"","Uarr":"","uArr":"","Uarrocir":"","Ubrcy":"","ubrcy":"","Ubreve":"","ubreve":"","Ucirc":"","ucirc":"","Ucy":"","ucy":"","udarr":"","Udblac":"","udblac":"","udhar":"","ufisht":"","Ufr":"","ufr":"","Ugrave":"","ugrave":"","uHar":"","uharl":"","uharr":"","uhblk":"","ulcorn":"","ulcorner":"","ulcrop":"","ultri":"","Umacr":"","umacr":"","uml":"","UnderBar":"_","UnderBrace":"","UnderBracket":"","UnderParenthesis":"","Union":"","UnionPlus":"","Uogon":"","uogon":"","Uopf":"","uopf":"","UpArrowBar":"","uparrow":"","UpArrow":"","Uparrow":"","UpArrowDownArrow":"","updownarrow":"","UpDownArrow":"","Updownarrow":"","UpEquilibrium":"","upharpoonleft":"","upharpoonright":"","uplus":"","UpperLeftArrow":"","UpperRightArrow":"","upsi":"","Upsi":"","upsih":"","Upsilon":"","upsilon":"","UpTeeArrow":"","UpTee":"","upuparrows":"","urcorn":"","urcorner":"","urcrop":"","Uring":"","uring":"","urtri":"","Uscr":"","uscr":"","utdot":"","Utilde":"","utilde":"","utri":"","utrif":"","uuarr":"","Uuml":"","uuml":"","uwangle":"","vangrt":"","varepsilon":"","varkappa":"","varnothing":"","varphi":"","varpi":"","varpropto":"","varr":"","vArr":"","varrho":"","varsigma":"","varsubsetneq":"","varsubsetneqq":"","varsupsetneq":"","varsupsetneqq":"","vartheta":"","vartriangleleft":"","vartriangleright":"","vBar":"","Vbar":"","vBarv":"","Vcy":"","vcy":"","vdash":"","vDash":"","Vdash":"","VDash":"","Vdashl":"","veebar":"","vee":"","Vee":"","veeeq":"","vellip":"","verbar":"|","Verbar":"","vert":"|","Vert":"","VerticalBar":"","VerticalLine":"|","VerticalSeparator":"","VerticalTilde":"","VeryThinSpace":"","Vfr":"","vfr":"","vltri":"","vnsub":"","vnsup":"","Vopf":"","vopf":"","vprop":"","vrtri":"","Vscr":"","vscr":"","vsubnE":"","vsubne":"","vsupnE":"","vsupne":"","Vvdash":"","vzigzag":"","Wcirc":"","wcirc":"","wedbar":"","wedge":"","Wedge":"","wedgeq":"","weierp":"","Wfr":"","wfr":"","Wopf":"","wopf":"","wp":"","wr":"","wreath":"","Wscr":"","wscr":"","xcap":"","xcirc":"","xcup":"","xdtri":"","Xfr":"","xfr":"","xharr":"","xhArr":"","Xi":"","xi":"","xlarr":"","xlArr":"","xmap":"","xnis":"","xodot":"","Xopf":"","xopf":"","xoplus":"","xotime":"","xrarr":"","xrArr":"","Xscr":"","xscr":"","xsqcup":"","xuplus":"","xutri":"","xvee":"","xwedge":"","Yacute":"","yacute":"","YAcy":"","yacy":"","Ycirc":"","ycirc":"","Ycy":"","ycy":"","yen":"","Yfr":"","yfr":"","YIcy":"","yicy":"","Yopf":"","yopf":"","Yscr":"","yscr":"","YUcy":"","yucy":"","yuml":"","Yuml":"","Zacute":"","zacute":"","Zcaron":"","zcaron":"","Zcy":"","zcy":"","Zdot":"","zdot":"","zeetrf":"","ZeroWidthSpace":"","Zeta":"","zeta":"","zfr":"","Zfr":"","ZHcy":"","zhcy":"","zigrarr":"","zopf":"","Zopf":"","Zscr":"","zscr":"","zwj":"","zwnj":""}')},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CompositeLayer}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(20),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6),_layer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(153),_utils_log__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10),_utils_flatten__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(83),CompositeLayer=function(_Layer){function CompositeLayer(){return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,CompositeLayer),Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(CompositeLayer).apply(this,arguments))}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__.a)(CompositeLayer,_Layer),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(CompositeLayer,[{key:"getSubLayers",value:function getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function initializeState(){}},{key:"setState",value:function setState(updateObject){Object(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(CompositeLayer.prototype),"setState",this).call(this,updateObject),this.setNeedsUpdate()}},{key:"getPickingInfo",value:function getPickingInfo(_ref){var info=_ref.info,object=info.object;return object&&object.__source&&object.__source.parent&&object.__source.parent.id===this.id?Object.assign(info,{object:object.__source.object,index:object.__source.index}):info}},{key:"renderLayers",value:function renderLayers(){return null}},{key:"shouldRenderSubLayer",value:function shouldRenderSubLayer(id,data){var overridingProps=this.props._subLayerProps;return data&&data.length||overridingProps&&overridingProps[id]}},{key:"getSubLayerClass",value:function getSubLayerClass(id,DefaultLayerClass){var overridingProps=this.props._subLayerProps;return overridingProps&&overridingProps[id]&&overridingProps[id].type||DefaultLayerClass}},{key:"getSubLayerRow",value:function getSubLayerRow(row,sourceObject,sourceObjectIndex){return row.__source={parent:this,object:sourceObject,index:sourceObjectIndex},row}},{key:"getSubLayerAccessor",value:function getSubLayerAccessor(accessor){if("function"==typeof accessor){var objectInfo={data:this.props.data,target:[]};return function(x,i){return x.__source?(objectInfo.index=x.__source.index,accessor(x.__source.object,objectInfo)):accessor(x,i)}}return accessor}},{key:"getSubLayerProps",value:function getSubLayerProps(sublayerProps){var _this$props=this.props,opacity=_this$props.opacity,pickable=_this$props.pickable,visible=_this$props.visible,parameters=_this$props.parameters,getPolygonOffset=_this$props.getPolygonOffset,highlightedObjectIndex=_this$props.highlightedObjectIndex,autoHighlight=_this$props.autoHighlight,highlightColor=_this$props.highlightColor,coordinateSystem=_this$props.coordinateSystem,coordinateOrigin=_this$props.coordinateOrigin,wrapLongitude=_this$props.wrapLongitude,positionFormat=_this$props.positionFormat,modelMatrix=_this$props.modelMatrix,extensions=_this$props.extensions,overridingProps=_this$props._subLayerProps,newProps={opacity:opacity,pickable:pickable,visible:visible,parameters:parameters,getPolygonOffset:getPolygonOffset,highlightedObjectIndex:highlightedObjectIndex,autoHighlight:autoHighlight,highlightColor:highlightColor,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,wrapLongitude:wrapLongitude,positionFormat:positionFormat,modelMatrix:modelMatrix,extensions:extensions};if(sublayerProps){var overridingSublayerProps=overridingProps&&overridingProps[sublayerProps.id],overridingSublayerTriggers=overridingSublayerProps&&overridingSublayerProps.updateTriggers;if(overridingSublayerProps){var propTypes=this.constructor._propTypes;for(var key in overridingSublayerProps){var propType=propTypes[key];propType&&"accessor"===propType.type&&(overridingSublayerProps[key]=this.getSubLayerAccessor(overridingSublayerProps[key]))}}Object.assign(newProps,sublayerProps,overridingSublayerProps,{id:"".concat(this.props.id,"-").concat(sublayerProps.id),updateTriggers:Object.assign({all:this.props.updateTriggers.all},sublayerProps.updateTriggers,overridingSublayerTriggers)})}var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=extensions[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var extension=_step.value,passThroughProps=extension.getSubLayerProps.call(this,extension);Object.assign(newProps,passThroughProps,{updateTriggers:Object.assign(newProps.updateTriggers,passThroughProps.updateTriggers)})}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return newProps}},{key:"_getAttributeManager",value:function _getAttributeManager(){return null}},{key:"_renderLayers",value:function _renderLayers(){var subLayers=this.internalState.subLayers;subLayers&&!this.needsUpdate()?_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.log(3,"Composite layer reused subLayers ".concat(this),this.internalState.subLayers)():(subLayers=this.renderLayers(),subLayers=Object(_utils_flatten__WEBPACK_IMPORTED_MODULE_8__.b)(subLayers,{filter:Boolean}),this.internalState.subLayers=subLayers,_utils_log__WEBPACK_IMPORTED_MODULE_7__.a.log(2,"Composite layer rendered new subLayers ".concat(this),subLayers)());var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=subLayers[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){_step2.value.parent=this}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}},{key:"isComposite",get:function get(){return!0}}]),CompositeLayer}(_layer__WEBPACK_IMPORTED_MODULE_6__.a);CompositeLayer.layerName="CompositeLayer"},function(module,exports,__webpack_require__){module.exports=function(){"use strict";var shared,worker,mapboxgl;function define(_,chunk){if(shared)if(worker){var workerBundleString="var sharedChunk = {}; ("+shared+")(sharedChunk); ("+worker+")(sharedChunk);",sharedChunk={};shared(sharedChunk),(mapboxgl=chunk(sharedChunk)).workerUrl=window.URL.createObjectURL(new Blob([workerBundleString],{type:"text/javascript"}))}else worker=chunk;else shared=chunk}return define(0,(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=n;function n(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var r,n,i,a,o;for(void 0===e&&(e=1e-6),i=t,o=0;o<8;o++){if(a=this.sampleCurveX(i)-t,Math.abs(a)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=a/s}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(a=this.sampleCurveX(i),Math.abs(a-t)<e)return i;t>a?r=i:n=i,i=.5*(n-r)+r}return i},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i=a;function a(t,e){this.x=t,this.y=e}function o(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!o(t[r],e[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!o(t[n],e[n]))return!1;return!0}return t===e}function s(t,e,n,i){var a=new r(t,e,n,i);return function(t){return a.solve(t)}}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.x+r*(this.x-e.x)-n*(this.y-e.y),a=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(t){return t instanceof a?t:Array.isArray(t)?new a(t[0],t[1]):t};var u=s(.25,.1,.25,1);function l(t,e,r){return Math.min(r,Math.max(e,t))}function p(t,e,r){var n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i}function c(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var a=i[n];for(var o in a)t[o]=a[o]}return t}var h=1;function f(){return h++}function y(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function d(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function m(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function v(t,e){return-1!==t.indexOf(e,t.length-e.length)}function g(t,e,r){var n={};for(var i in t)n[i]=e.call(r||this,t[i],i,t);return n}function x(t,e,r){var n={};for(var i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n}function b(t){return Array.isArray(t)?t.map(b):"object"==typeof t&&t?g(t,b):t}var _={};function w(t){_[t]||("undefined"!=typeof console&&console.warn(t),_[t]=!0)}function A(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function k(t){for(var e=0,r=0,n=t.length,i=n-1,a=void 0,o=void 0;r<n;i=r++)a=t[r],e+=((o=t[i]).x-a.x)*(a.y+o.y);return e}function S(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,r,n,i){var a=n||i;return e[r]=!a||a.toLowerCase(),""})),e["max-age"]){var r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}function I(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var z,C,B,P,E=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),M=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,T=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,V={now:E,frame:function(t){var e=M(t);return{cancel:function(){return T(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var r=self.document.createElement("canvas"),n=r.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return r.width=t.width,r.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return z||(z=self.document.createElement("a")),z.href=t,z.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==C&&(C=self.matchMedia("(prefers-reduced-motion: reduce)")),C.matches)}},F={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},O={supported:!1,testSupport:function(t){!L&&P&&(D?U(t):B=t)}},L=!1,D=!1;function U(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,P),t.isContextLost())return;O.supported=!0}catch(t){}t.deleteTexture(e),L=!0}self.document&&((P=self.document.createElement("img")).onload=function(){B&&U(B),B=null,D=!0},P.onerror=function(){L=!0,B=null},P.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var R="01",j=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function q(t){return 0===t.indexOf("mapbox:")}j.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",R,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},j.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},j.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},j.prototype.normalizeStyleURL=function(t,e){if(!q(t))return t;var r=Z(t);return r.path="/styles/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},j.prototype.normalizeGlyphsURL=function(t,e){if(!q(t))return t;var r=Z(t);return r.path="/fonts/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},j.prototype.normalizeSourceURL=function(t,e){if(!q(t))return t;var r=Z(t);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),this._makeAPIURL(r,this._customAccessToken||e)},j.prototype.normalizeSpriteURL=function(t,e,r,n){var i=Z(t);return q(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+r,this._makeAPIURL(i,this._customAccessToken||n)):(i.path+=""+e+r,G(i))},j.prototype.normalizeTileURL=function(t,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),!e||!q(e))return t;var n=Z(t),i=V.devicePixelRatio>=2||512===r?"@2x":"",a=O.supported?".webp":"$1";return n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+i+a),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path,F.REQUIRE_ACCESS_TOKEN&&(F.ACCESS_TOKEN||this._customAccessToken)&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,this._customAccessToken)},j.prototype.canonicalizeTileURL=function(t){var e=Z(t);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=e.path.replace("/v4/","");var n=e.params.filter((function(t){return!t.match(/^access_token=/)}));return n.length&&(r+="?"+n.join("&")),r},j.prototype.canonicalizeTileset=function(t,e){if(!q(e))return t.tiles||[];for(var r=[],n=0,i=t.tiles;n<i.length;n+=1){var a=i[n],o=this.canonicalizeTileURL(a);r.push(o)}return r},j.prototype._makeAPIURL=function(t,e){var r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=Z(F.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!F.REQUIRE_ACCESS_TOKEN)return G(t);if(!(e=e||F.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+r);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+r);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),G(t)};var N=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function K(t){return N.test(t)}var X=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Z(t){var e=t.match(X);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function G(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function J(t){if(!t)return null;var e,r=t.split(".");if(!r||3!==r.length)return null;try{return JSON.parse((e=r[1],decodeURIComponent(self.atob(e).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(t){return null}}var H=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};H.prototype.getStorageKey=function(t){var e,r=J(F.ACCESS_TOKEN),n="";return r&&r.u?(e=r.u,n=self.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})))):n=F.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+n:"mapbox.eventData:"+n},H.prototype.fetchEventData=function(){var t=I("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{var n=self.localStorage.getItem(e);n&&(this.eventData=JSON.parse(n));var i=self.localStorage.getItem(r);i&&(this.anonId=i)}catch(t){w("Unable to read from LocalStorage")}},H.prototype.saveEventData=function(){var t=I("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){w("Unable to write to LocalStorage")}},H.prototype.processRequests=function(t){},H.prototype.postEvent=function(t,e,r,n){var i=this;if(F.EVENTS_URL){var a=Z(F.EVENTS_URL);a.params.push("access_token="+(n||F.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.5.0",skuId:R,userId:this.anonId},s=e?c(o,e):o,u={url:G(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=vt(u,(function(t){i.pendingRequest=null,r(t),i.saveEventData(),i.processRequests(n)}))}},H.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var Y,$=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postMapLoadEvent=function(t,e,r,n){this.skuToken=r,(F.EVENTS_URL&&n||F.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return q(t)||K(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},n)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var r=this.queue.shift(),n=r.id,i=r.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),d(this.anonId)||(this.anonId=y()),this.postEvent(i,{skuToken:this.skuToken},(function(t){t||n&&(e.success[n]=!0)}),t))}},e}(H),W=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postTurnstileEvent=function(t,e){F.EVENTS_URL&&F.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return q(t)||K(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var r=J(F.ACCESS_TOKEN),n=r?r.u:F.ACCESS_TOKEN,i=n!==this.eventData.tokenU;d(this.anonId)||(this.anonId=y(),i=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),u=(a-this.eventData.lastSuccess)/864e5;i=i||u>=1||u<-1||o.getDate()!==s.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(a,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=a,e.eventData.tokenU=n)}),t)}},e}(H)),Q=W.postTurnstileEvent.bind(W),tt=new $,et=tt.postMapLoadEvent.bind(tt),rt="mapbox-tiles",nt=500,it=50,at=42e4;function st(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var lt=1/0,pt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(pt);var ct=function(t){function e(e,r,n){401===r&&K(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=r,this.url=n,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error);function ht(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}var ft=ht()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function yt(t,e){var r,n=new self.AbortController,i=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:ft(),signal:n.signal}),a=!1,o=!1,s=(r=i.url).indexOf("sku=")>0&&K(r);"json"===t.type&&i.headers.set("Accept","application/json");var u=function(r,n,a){if(!o){if(r&&"SecurityError"!==r.message&&w(r),n&&a)return l(n);var u=Date.now();self.fetch(i).then((function(r){if(r.ok){var n=s?r.clone():null;return l(r,n,u)}return e(new ct(r.statusText,r.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},l=function(r,n,s){("arrayBuffer"===t.type?r.arrayBuffer():"json"===t.type?r.json():r.text()).then((function(t){o||(n&&s&&function ot(t,e,r){if(self.caches){var n={status:e.status,statusText:e.statusText,headers:new self.Headers};e.headers.forEach((function(t,e){return n.headers.set(e,t)}));var i=S(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&n.headers.set("Expires",new Date(r+1e3*i["max-age"]).toUTCString()),new Date(n.headers.get("Expires")).getTime()-r<at||function(t,e){if(void 0===Y)try{new Response(new ReadableStream),Y=!0}catch(t){Y=!1}Y?e(t.body):t.blob().then(e)}(e,(function(e){var r=new self.Response(e,n);self.caches.open(rt).then((function(e){return e.put(st(t.url),r)})).catch((function(t){return w(t.message)}))})))}}(i,n,s),a=!0,e(null,t,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((function(t){return e(new Error(t.message))}))};return s?function ut(t,e){if(!self.caches)return e(null);var r=st(t.url);self.caches.open(rt).then((function(t){t.match(r).then((function(n){var i=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")),r=S(t.headers.get("Cache-Control")||"");return e>Date.now()&&!r["no-cache"]}(n);t.delete(r),i&&t.put(r,n.clone()),e(null,n,i)})).catch(e)})).catch(e)}(i,u):u(null,null),{cancel:function(){o=!0,a||n.abort()}}}var gt,xt,dt=function(t,e){if(r=t.url,!(/^file:/.test(r)||/^file:/.test(ft())&&!/^\w+:/.test(r))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return yt(t,e);if(ht()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e)}var r;return function(t,e){var r=new self.XMLHttpRequest;for(var n in r.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(r.responseType="arraybuffer"),t.headers)r.setRequestHeader(n,t.headers[n]);return"json"===t.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===t.credentials,r.onerror=function(){e(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){var n=r.response;if("json"===t.type)try{n=JSON.parse(r.response)}catch(t){return e(t)}e(null,n,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else e(new ct(r.statusText,r.status,t.url))},r.send(t.body),{cancel:function(){return r.abort()}}}(t,e)},mt=function(t,e){return dt(c(t,{type:"arrayBuffer"}),e)},vt=function(t,e){return dt(c(t,{method:"POST"}),e)};gt=[],xt=0;var bt=function(t,e){if(xt>=F.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return gt.push(r),r}xt++;var n=!1,i=function(){if(!n)for(n=!0,xt--;gt.length&&xt<F.MAX_PARALLEL_IMAGE_REQUESTS;){var t=gt.shift(),e=t.requestParameters,r=t.callback;t.cancelled||(t.cancel=bt(e,r).cancel)}},a=mt(t,(function(t,r,n,a){if(i(),t)e(t);else if(r){var o=new self.Image,s=self.URL||self.webkitURL;o.onload=function(){e(null,o),s.revokeObjectURL(o.src)},o.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var u=new self.Blob([new Uint8Array(r)],{type:"image/png"});o.cacheControl=n,o.expires=a,o.src=r.byteLength?s.createObjectURL(u):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}}));return{cancel:function(){a.cancel(),i()}}};function _t(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e))}function wt(t,e,r){if(r&&r[t]){var n=r[t].indexOf(e);-1!==n&&r[t].splice(n,1)}}var At=function(t,e){void 0===e&&(e={}),c(this,e),this.type=t},kt=function(t){function e(e,r){void 0===r&&(r={}),t.call(this,"error",c({error:e},r))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(At),St=function(){};St.prototype.on=function(t,e){return this._listeners=this._listeners||{},_t(t,e,this._listeners),this},St.prototype.off=function(t,e){return wt(t,e,this._listeners),wt(t,e,this._oneTimeListeners),this},St.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},_t(t,e,this._oneTimeListeners),this},St.prototype.fire=function(t,e){"string"==typeof t&&(t=new At(t,e||{}));var r=t.type;if(this.listens(r)){t.target=this;for(var n=0,i=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];n<i.length;n+=1)i[n].call(this,t);for(var a=0,o=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];a<o.length;a+=1){var s=o[a];wt(r,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(c(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof kt&&console.error(t.error);return this},St.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},St.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var It={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},zt=function(t,e,r,n){this.message=(t?t+": ":"")+r,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)};function Ct(t){var e=t.key,r=t.value;return r?[new zt(e,r,"constants have been deprecated as of v8")]:[]}function Bt(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var a=i[n];for(var o in a)t[o]=a[o]}return t}function Pt(t){return t instanceof Number||t instanceof String||t instanceof Boolean}function Et(t){return Pt(t)?t.valueOf():t}function Mt(t){if(Array.isArray(t))return t.map(Mt);if(t instanceof Object&&!Pt(t)){var e={};for(var r in t)e[r]=Mt(t[r]);return e}return Et(t)}var Tt=function(t){function e(e,r){t.call(this,r),this.message=r,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Vt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,n=e;r<n.length;r+=1){var i=n[r],a=i[0],o=i[1];this.bindings[a]=o}};Vt.prototype.concat=function(t){return new Vt(this,t)},Vt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Vt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Ft={kind:"null"},Ot={kind:"number"},Lt={kind:"string"},Dt={kind:"boolean"},Ut={kind:"color"},Rt={kind:"object"},jt={kind:"value"},qt={kind:"collator"},Nt={kind:"formatted"},Kt={kind:"resolvedImage"};function Xt(t,e){return{kind:"array",itemType:t,N:e}}function Zt(t){if("array"===t.kind){var e=Zt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Gt=[Ft,Ot,Lt,Dt,Ut,Nt,Rt,Xt(jt),Kt];function Jt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Jt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var r=0,n=Gt;r<n.length;r+=1)if(!Jt(n[r],e))return null}return"Expected "+Zt(t)+" but found "+Zt(e)+" instead."}var Ht=e((function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function a(t){return"%"===t[t.length-1]?n(parseFloat(t)/100*255):n(parseInt(t))}function o(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in r)return r[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=i.indexOf("("),l=i.indexOf(")");if(-1!==u&&l+1===i.length){var p=i.substr(0,u),c=i.substr(u+1,l-(u+1)).split(","),h=1;switch(p){case"rgba":if(4!==c.length)return null;h=o(c.pop());case"rgb":return 3!==c.length?null:[a(c[0]),a(c[1]),a(c[2]),h];case"hsla":if(4!==c.length)return null;h=o(c.pop());case"hsl":if(3!==c.length)return null;var f=(parseFloat(c[0])%360+360)%360/360,y=o(c[1]),d=o(c[2]),m=d<=.5?d*(y+1):d+y-d*y,v=2*d-m;return[n(255*s(v,m,f+1/3)),n(255*s(v,m,f)),n(255*s(v,m,f-1/3)),h];default:return null}}return null}}catch(t){}})).parseCSSColor,Yt=function(t,e,r,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=r,this.a=n};Yt.parse=function(t){if(t){if(t instanceof Yt)return t;if("string"==typeof t){var e=Ht(t);if(e)return new Yt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Yt.prototype.toString=function(){var t=this.toArray(),e=t[0],r=t[1],n=t[2],i=t[3];return"rgba("+Math.round(e)+","+Math.round(r)+","+Math.round(n)+","+i+")"},Yt.prototype.toArray=function(){var t=this.r,e=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]},Yt.black=new Yt(0,0,0,1),Yt.white=new Yt(1,1,1,1),Yt.transparent=new Yt(0,0,0,0),Yt.red=new Yt(1,0,0,1);var $t=function(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};$t.prototype.compare=function(t,e){return this.collator.compare(t,e)},$t.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Wt=function(t,e,r,n){this.text=t,this.scale=e,this.fontStack=r,this.textColor=n},Qt=function(t){this.sections=t};Qt.fromString=function(t){return new Qt([new Wt(t,null,null,null)])},Qt.prototype.toString=function(){return this.sections.map((function(t){return t.text})).join("")},Qt.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t.push(n.text);var i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),n.textColor&&(i["text-color"]=["rgba"].concat(n.textColor.toArray())),t.push(i)}return t};var te=function(t){this.name=t.name,this.available=t.available};function ee(t,e,r,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,r,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function re(t){if(null===t)return Ft;if("string"==typeof t)return Lt;if("boolean"==typeof t)return Dt;if("number"==typeof t)return Ot;if(t instanceof Yt)return Ut;if(t instanceof $t)return qt;if(t instanceof Qt)return Nt;if(t instanceof te)return Kt;if(Array.isArray(t)){for(var e,r=t.length,n=0,i=t;n<i.length;n+=1){var a=re(i[n]);if(e){if(e===a)continue;e=jt;break}e=a}return Xt(e||jt,r)}return Rt}function ne(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Yt||t instanceof Qt||t instanceof te?t.toString():JSON.stringify(t)}te.prototype.toString=function(){return this.name},te.fromString=function(t){return new te({name:t,available:!1})},te.prototype.serialize=function(){return["image",this.name]};var ie=function(t,e){this.type=t,this.value=e};ie.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Yt)return!0;if(e instanceof $t)return!0;if(e instanceof Qt)return!0;if(e instanceof te)return!0;if(Array.isArray(e)){for(var r=0,n=e;r<n.length;r+=1)if(!t(n[r]))return!1;return!0}if("object"==typeof e){for(var i in e)if(!t(e[i]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var r=t[1],n=re(r),i=e.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new ie(n,r)},ie.prototype.evaluate=function(){return this.value},ie.prototype.eachChild=function(){},ie.prototype.possibleOutputs=function(){return[this.value]},ie.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Yt?["rgba"].concat(this.value.toArray()):this.value instanceof Qt?this.value.serialize():this.value};var ae=function(t){this.name="ExpressionEvaluationError",this.message=t};ae.prototype.toJSON=function(){return this.message};var oe={string:Lt,number:Ot,boolean:Dt,object:Rt},se=function(t,e){this.type=t,this.args=e};se.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r,n=1,i=t[0];if("array"===i){var a,o;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in oe)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=oe[s],n++}else a=jt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],n++}r=Xt(a,o)}else r=oe[i];for(var u=[];n<t.length;n++){var l=e.parse(t[n],n,jt);if(!l)return null;u.push(l)}return new se(r,u)},se.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!Jt(this.type,re(r)))return r;if(e===this.args.length-1)throw new ae("Expected value to be of type "+Zt(this.type)+", but found "+Zt(re(r))+" instead.")}return null},se.prototype.eachChild=function(t){this.args.forEach(t)},se.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map((function(t){return t.possibleOutputs()})))},se.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);var n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var ue=function(t){this.type=Nt,this.sections=t};ue.parse=function(t,e){if(t.length<3)return e.error("Expected at least two arguments.");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");for(var r=[],n=1;n<t.length-1;n+=2){var i=e.parse(t[n],1,jt);if(!i)return null;var a=i.type.kind;if("string"!==a&&"value"!==a&&"null"!==a)return e.error("Formatted text type must be 'string', 'value', or 'null'.");var o=t[n+1];if("object"!=typeof o||Array.isArray(o))return e.error("Format options argument must be an object.");var s=null;if(o["font-scale"]&&!(s=e.parse(o["font-scale"],1,Ot)))return null;var u=null;if(o["text-font"]&&!(u=e.parse(o["text-font"],1,Xt(Lt))))return null;var l=null;if(o["text-color"]&&!(l=e.parse(o["text-color"],1,Ut)))return null;r.push({text:i,scale:s,font:u,textColor:l})}return new ue(r)},ue.prototype.evaluate=function(t){return new Qt(this.sections.map((function(e){return new Wt(ne(e.text.evaluate(t)),e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},ue.prototype.eachChild=function(t){for(var e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t(n.text),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}},ue.prototype.possibleOutputs=function(){return[void 0]},ue.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t.push(n.text.serialize());var i={};n.scale&&(i["font-scale"]=n.scale.serialize()),n.font&&(i["text-font"]=n.font.serialize()),n.textColor&&(i["text-color"]=n.textColor.serialize()),t.push(i)}return t};var le=function(t){this.type=Kt,this.input=t};le.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,Lt);return r?new le(r):e.error("No image name provided.")},le.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=!1;return t.availableImages&&t.availableImages.indexOf(e)>-1&&(r=!0),new te({name:e,available:r})},le.prototype.eachChild=function(t){t(this.input)},le.prototype.possibleOutputs=function(){return[void 0]},le.prototype.serialize=function(){return["image",this.input.serialize()]};var pe={"to-boolean":Dt,"to-color":Ut,"to-number":Ot,"to-string":Lt},ce=function(t,e){this.type=t,this.args=e};ce.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");for(var n=pe[r],i=[],a=1;a<t.length;a++){var o=e.parse(t[a],a,jt);if(!o)return null;i.push(o)}return new ce(n,i)},ce.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,r,n=0,i=this.args;n<i.length;n+=1){if(r=null,(e=i[n].evaluate(t))instanceof Yt)return e;if("string"==typeof e){var a=t.parseColor(e);if(a)return a}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ee(e[0],e[1],e[2],e[3])))return new Yt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ae(r||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var o=null,s=0,u=this.args;s<u.length;s+=1){if(null===(o=u[s].evaluate(t)))return 0;var l=Number(o);if(!isNaN(l))return l}throw new ae("Could not convert "+JSON.stringify(o)+" to number.")}return"formatted"===this.type.kind?Qt.fromString(ne(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?te.fromString(ne(this.args[0].evaluate(t))):ne(this.args[0].evaluate(t))},ce.prototype.eachChild=function(t){this.args.forEach(t)},ce.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map((function(t){return t.possibleOutputs()})))},ce.prototype.serialize=function(){if("formatted"===this.type.kind)return new ue([{text:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new le(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var he=["Unknown","Point","LineString","Polygon"],fe=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null};fe.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},fe.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?he[this.feature.type]:this.feature.type:null},fe.prototype.properties=function(){return this.feature&&this.feature.properties||{}},fe.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Yt.parse(t)),e};var ye=function(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n};ye.prototype.evaluate=function(t){return this._evaluate(t,this.args)},ye.prototype.eachChild=function(t){this.args.forEach(t)},ye.prototype.possibleOutputs=function(){return[void 0]},ye.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},ye.parse=function(t,e){var r,n=t[0],i=ye.definitions[n];if(!i)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var a=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=o.filter((function(e){var r=e[0];return!Array.isArray(r)||r.length===t.length-1})),u=null,l=0,p=s;l<p.length;l+=1){var c=p[l],h=c[0],f=c[1];u=new be(e.registry,e.path,null,e.scope);for(var y=[],d=!1,m=1;m<t.length;m++){var v=t[m],g=Array.isArray(h)?h[m-1]:h.type,x=u.parse(v,1+y.length,g);if(!x){d=!0;break}y.push(x)}if(!d)if(Array.isArray(h)&&h.length!==y.length)u.error("Expected "+h.length+" arguments, but found "+y.length+" instead.");else{for(var b=0;b<y.length;b++){var _=Array.isArray(h)?h[b]:h.type,w=y[b];u.concat(b+1).checkSubtype(_,w.type)}if(0===u.errors.length)return new ye(n,a,f,y)}}if(1===s.length)(r=e.errors).push.apply(r,u.errors);else{for(var A=(s.length?s:o).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Zt).join(", ")+")":"("+Zt(e.type)+"...)"})).join(" | "),k=[],S=1;S<t.length;S++){var I=e.parse(t[S],1+k.length);if(!I)return null;k.push(Zt(I.type))}e.error("Expected arguments of type "+A+", but found ("+k.join(", ")+") instead.")}return null},ye.register=function(t,e){for(var r in ye.definitions=e,e)t[r]=ye};var de=function(t,e,r){this.type=qt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e};function me(t){if(t instanceof ye){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild((function(t){e&&!me(t)&&(e=!1)})),e}function ve(t){if(t instanceof ye&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!ve(t)&&(e=!1)})),e}function ge(t,e){if(t instanceof ye&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild((function(t){r&&!ge(t,e)&&(r=!1)})),r}de.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Dt);if(!n)return null;var i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Dt);if(!i)return null;var a=null;return r.locale&&!(a=e.parse(r.locale,1,Lt))?null:new de(n,i,a)},de.prototype.evaluate=function(t){return new $t(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},de.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},de.prototype.possibleOutputs=function(){return[void 0]},de.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var xe=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};xe.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var r=t[1];return e.scope.has(r)?new xe(r,e.scope.get(r)):e.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},xe.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},xe.prototype.eachChild=function(){},xe.prototype.possibleOutputs=function(){return[void 0]},xe.prototype.serialize=function(){return["var",this.name]};var be=function(t,e,r,n,i){void 0===e&&(e=[]),void 0===n&&(n=new Vt),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=n,this.errors=i,this.expectedType=r};function _e(t,e){for(var r,n,i=t.length-1,a=0,o=i,s=0;a<=o;)if(r=t[s=Math.floor((a+o)/2)],n=t[s+1],r<=e){if(s===i||e<n)return s;a=s+1}else{if(!(r>e))throw new ae("Input is not a number.");o=s-1}return 0}be.prototype.parse=function(t,e,r,n,i){return void 0===i&&(i={}),e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)},be.prototype._parse=function(t,e){function r(t,e,r){return"assert"===r?new se(e,[t]):"coerce"===r?new ce(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n];if(i){var a=i.parse(t,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=r(a,o,e.typeAnnotation||"coerce");else a=r(a,o,e.typeAnnotation||"assert")}if(!(a instanceof ie)&&"resolvedImage"!==a.type.kind&&function t(e){if(e instanceof xe)return t(e.boundExpression);if(e instanceof ye&&"error"===e.name)return!1;if(e instanceof de)return!1;var r=e instanceof ce||e instanceof se,n=!0;return e.eachChild((function(e){n=r?n&&t(e):n&&e instanceof ie})),!!n&&me(e)&&ge(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(a)){var u=new fe;try{a=new ie(a.type,a.evaluate(u))}catch(t){return this.error(t.message),null}}return a}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},be.prototype.concat=function(t,e,r){var n="number"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new be(this.registry,n,e||null,i,this.errors)},be.prototype.error=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var n=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Tt(n,t))},be.prototype.checkSubtype=function(t,e){var r=Jt(t,e);return r&&this.error(r),r};var we=function(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var n=0,i=r;n<i.length;n+=1){var a=i[n],o=a[0],s=a[1];this.labels.push(o),this.outputs.push(s)}};we.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var r=e.parse(t[1],1,Ot);if(!r)return null;var n=[],i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var a=1;a<t.length;a+=2){var o=1===a?-1/0:t[a],s=t[a+1],u=a,l=a+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(n.length&&n[n.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var p=e.parse(s,l,i);if(!p)return null;i=i||p.type,n.push([o,p])}return new we(i,r,n)},we.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[_e(e,n)].evaluate(t)},we.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},we.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map((function(t){return t.possibleOutputs()})))},we.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Ae=ke;function ke(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}function Se(t,e,r){return t*(1-r)+e*r}ke.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},ke.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},ke.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},ke.prototype.solveCurveX=function(t,e){var r,n,i,a,o;for(void 0===e&&(e=1e-6),i=t,o=0;o<8;o++){if(a=this.sampleCurveX(i)-t,Math.abs(a)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=a/s}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(a=this.sampleCurveX(i),Math.abs(a-t)<e)return i;t>a?r=i:n=i,i=.5*(n-r)+r}return i},ke.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var Ie=Object.freeze({__proto__:null,number:Se,color:function(t,e,r){return new Yt(Se(t.r,e.r,r),Se(t.g,e.g,r),Se(t.b,e.b,r),Se(t.a,e.a,r))},array:function(t,e,r){return t.map((function(t,n){return Se(t,e[n],r)}))}}),ze=.95047,Ce=1,Be=1.08883,Pe=4/29,Ee=6/29,Me=3*Ee*Ee,Te=Ee*Ee*Ee,Ve=Math.PI/180,Fe=180/Math.PI;function Oe(t){return t>Te?Math.pow(t,1/3):t/Me+Pe}function Le(t){return t>Ee?t*t*t:Me*(t-Pe)}function De(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ue(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Re(t){var e=Ue(t.r),r=Ue(t.g),n=Ue(t.b),i=Oe((.4124564*e+.3575761*r+.1804375*n)/ze),a=Oe((.2126729*e+.7151522*r+.072175*n)/Ce);return{l:116*a-16,a:500*(i-a),b:200*(a-Oe((.0193339*e+.119192*r+.9503041*n)/Be)),alpha:t.a}}function je(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=Ce*Le(e),r=ze*Le(r),n=Be*Le(n),new Yt(De(3.2404542*r-1.5371385*e-.4985314*n),De(-.969266*r+1.8760108*e+.041556*n),De(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function qe(t,e,r){var n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}var Ne={forward:Re,reverse:je,interpolate:function(t,e,r){return{l:Se(t.l,e.l,r),a:Se(t.a,e.a,r),b:Se(t.b,e.b,r),alpha:Se(t.alpha,e.alpha,r)}}},Ke={forward:function(t){var e=Re(t),r=e.l,n=e.a,i=e.b,a=Math.atan2(i,n)*Fe;return{h:a<0?a+360:a,c:Math.sqrt(n*n+i*i),l:r,alpha:t.a}},reverse:function(t){var e=t.h*Ve,r=t.c;return je({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:qe(t.h,e.h,r),c:Se(t.c,e.c,r),l:Se(t.l,e.l,r),alpha:Se(t.alpha,e.alpha,r)}}},Xe=Object.freeze({__proto__:null,lab:Ne,hcl:Ke}),Ze=function(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(var a=0,o=i;a<o.length;a+=1){var s=o[a],u=s[0],l=s[1];this.labels.push(u),this.outputs.push(l)}};function Ge(t,e,r,n){var i=n-r,a=t-r;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}Ze.interpolationFactor=function(t,e,r,n){var i=0;if("exponential"===t.name)i=Ge(e,t.base,r,n);else if("linear"===t.name)i=Ge(e,1,r,n);else if("cubic-bezier"===t.name){var a=t.controlPoints;i=new Ae(a[0],a[1],a[2],a[3]).solve(Ge(e,1,r,n))}return i},Ze.parse=function(t,e){var r=t[0],n=t[1],i=t[2],a=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,Ot)))return null;var u=[],l=null;"interpolate-hcl"===r||"interpolate-lab"===r?l=Ut:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var p=0;p<a.length;p+=2){var c=a[p],h=a[p+1],f=p+3,y=p+4;if("number"!=typeof c)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(u.length&&u[u.length-1][0]>=c)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var d=e.parse(h,y,l);if(!d)return null;l=l||d.type,u.push([c,d])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new Ze(l,r,n,i,u):e.error("Type "+Zt(l)+" is not interpolatable.")},Ze.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);var a=_e(e,n),o=e[a],s=e[a+1],u=Ze.interpolationFactor(this.interpolation,n,o,s),l=r[a].evaluate(t),p=r[a+1].evaluate(t);return"interpolate"===this.operator?Ie[this.type.kind.toLowerCase()](l,p,u):"interpolate-hcl"===this.operator?Ke.reverse(Ke.interpolate(Ke.forward(l),Ke.forward(p),u)):Ne.reverse(Ne.interpolate(Ne.forward(l),Ne.forward(p),u))},Ze.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},Ze.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map((function(t){return t.possibleOutputs()})))},Ze.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e};var Je=function(t,e){this.type=t,this.args=e};Je.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var r=null,n=e.expectedType;n&&"value"!==n.kind&&(r=n);for(var i=[],a=0,o=t.slice(1);a<o.length;a+=1){var s=o[a],u=e.parse(s,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,i.push(u)}var l=n&&i.some((function(t){return Jt(n,t.type)}));return new Je(l?jt:r,i)},Je.prototype.evaluate=function(t){for(var e,r=null,n=0,i=0,a=this.args;i<a.length;i+=1){var o=a[i];if(n++,r=o.evaluate(t),"resolvedImage"!==o.type.kind||r.available||(e||(e=o.evaluate(t).name),r=null,n===this.args.length&&(r=e)),null!==r)break}return r},Je.prototype.eachChild=function(t){this.args.forEach(t)},Je.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map((function(t){return t.possibleOutputs()})))},Je.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var He=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};He.prototype.evaluate=function(t){return this.result.evaluate(t)},He.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1)t(r[e][1]);t(this.result)},He.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],n=1;n<t.length-1;n+=2){var i=t[n];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var a=e.parse(t[n+1],n+1);if(!a)return null;r.push([i,a])}var o=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return o?new He(r,o):null},He.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},He.prototype.serialize=function(){for(var t=["let"],e=0,r=this.bindings;e<r.length;e+=1){var n=r[e],i=n[0],a=n[1];t.push(i,a.serialize())}return t.push(this.result.serialize()),t};var Ye=function(t,e,r){this.type=t,this.index=e,this.input=r};Ye.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,Ot),n=e.parse(t[2],2,Xt(e.expectedType||jt));if(!r||!n)return null;var i=n.type;return new Ye(i.itemType,r,n)},Ye.prototype.evaluate=function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new ae("Array index out of bounds: "+e+" < 0.");if(e>=r.length)throw new ae("Array index out of bounds: "+e+" > "+(r.length-1)+".");if(e!==Math.floor(e))throw new ae("Array index must be an integer, but found "+e+" instead.");return r[e]},Ye.prototype.eachChild=function(t){t(this.index),t(this.input)},Ye.prototype.possibleOutputs=function(){return[void 0]},Ye.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var $e=function(t,e,r,n,i,a){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=a};$e.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i={},a=[],o=2;o<t.length-1;o+=2){var s=t[o],u=t[o+1];Array.isArray(s)||(s=[s]);var l=e.concat(o);if(0===s.length)return l.error("Expected at least one branch label.");for(var p=0,c=s;p<c.length;p+=1){var h=c[p];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(r){if(l.checkSubtype(r,re(h)))return null}else r=re(h);if(void 0!==i[String(h)])return l.error("Branch labels must be unique.");i[String(h)]=a.length}var f=e.parse(u,o,n);if(!f)return null;n=n||f.type,a.push(f)}var y=e.parse(t[1],1,jt);if(!y)return null;var d=e.parse(t[t.length-1],t.length-1,n);return d?"value"!==y.type.kind&&e.concat(1).checkSubtype(r,y.type)?null:new $e(r,n,y,i,a,d):null},$e.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(re(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},$e.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},$e.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map((function(t){return t.possibleOutputs()}))).concat(this.otherwise.possibleOutputs())},$e.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],r=[],n={},i=0,a=Object.keys(this.cases).sort();i<a.length;i+=1){var o=a[i];void 0===(c=n[this.cases[o]])?(n[this.cases[o]]=r.length,r.push([this.cases[o],[o]])):r[c][1].push(o)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,l=r;u<l.length;u+=1){var p=l[u],c=p[0],h=p[1];1===h.length?e.push(s(h[0])):e.push(h.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var We=function(t,e,r){this.type=t,this.branches=e,this.otherwise=r};function Qe(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function tr(t,e,r,n){return 0===n.compare(e,r)}function er(t,e,r){var n="=="!==t&&"!="!==t;return function(){function i(t,e,r){this.type=Dt,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=t[0],a=e.parse(t[1],1,jt);if(!a)return null;if(!Qe(r,a.type))return e.concat(1).error('"'+r+"\" comparisons are not supported for type '"+Zt(a.type)+"'.");var o=e.parse(t[2],2,jt);if(!o)return null;if(!Qe(r,o.type))return e.concat(2).error('"'+r+"\" comparisons are not supported for type '"+Zt(o.type)+"'.");if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot compare types '"+Zt(a.type)+"' and '"+Zt(o.type)+"'.");n&&("value"===a.type.kind&&"value"!==o.type.kind?a=new se(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new se(a.type,[o])));var s=null;if(4===t.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,qt)))return null}return new i(a,o,s)},i.prototype.evaluate=function(i){var a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){var s=re(a),u=re(o);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new ae('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var l=re(a),p=re(o);if("string"!==l.kind||"string"!==p.kind)return e(i,a,o)}return this.collator?r(i,a,o,this.collator.evaluate(i)):e(i,a,o)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.possibleOutputs=function(){return[!0,!1]},i.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},i}()}We.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n=[],i=1;i<t.length-1;i+=2){var a=e.parse(t[i],i,Dt);if(!a)return null;var o=e.parse(t[i+1],i+1,r);if(!o)return null;n.push([a,o]),r=r||o.type}var s=e.parse(t[t.length-1],t.length-1,r);return s?new We(r,n,s):null},We.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[0],a=n[1];if(i.evaluate(t))return a.evaluate(t)}return this.otherwise.evaluate(t)},We.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[0],a=n[1];t(i),t(a)}t(this.otherwise)},We.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map((function(t){return t[0],t[1].possibleOutputs()}))).concat(this.otherwise.possibleOutputs())},We.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var rr=er("==",(function(t,e,r){return e===r}),tr),nr=er("!=",(function(t,e,r){return e!==r}),(function(t,e,r,n){return!tr(0,e,r,n)})),ir=er("<",(function(t,e,r){return e<r}),(function(t,e,r,n){return n.compare(e,r)<0})),ar=er(">",(function(t,e,r){return e>r}),(function(t,e,r,n){return n.compare(e,r)>0})),or=er("<=",(function(t,e,r){return e<=r}),(function(t,e,r,n){return n.compare(e,r)<=0})),sr=er(">=",(function(t,e,r){return e>=r}),(function(t,e,r,n){return n.compare(e,r)>=0})),ur=function(t,e,r,n,i){this.type=Lt,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=i};ur.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,Ot);if(!r)return null;var n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");var i=null;if(n.locale&&!(i=e.parse(n.locale,1,Lt)))return null;var a=null;if(n.currency&&!(a=e.parse(n.currency,1,Lt)))return null;var o=null;if(n["min-fraction-digits"]&&!(o=e.parse(n["min-fraction-digits"],1,Ot)))return null;var s=null;return n["max-fraction-digits"]&&!(s=e.parse(n["max-fraction-digits"],1,Ot))?null:new ur(r,i,a,o,s)},ur.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},ur.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},ur.prototype.possibleOutputs=function(){return[void 0]},ur.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var lr=function(t){this.type=Ot,this.input=t};lr.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error("Expected argument of type string or array, but found "+Zt(r.type)+" instead."):new lr(r):null},lr.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ae("Expected value to be of type string or array, but found "+Zt(re(e))+" instead.")},lr.prototype.eachChild=function(t){t(this.input)},lr.prototype.possibleOutputs=function(){return[void 0]},lr.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var pr={"==":rr,"!=":nr,">":ar,"<":ir,">=":sr,"<=":or,array:se,at:Ye,boolean:se,case:We,coalesce:Je,collator:de,format:ue,image:le,interpolate:Ze,"interpolate-hcl":Ze,"interpolate-lab":Ze,length:lr,let:He,literal:ie,match:$e,number:se,"number-format":ur,object:se,step:we,string:se,"to-boolean":ce,"to-color":ce,"to-number":ce,"to-string":ce,var:xe};function cr(t,e){var r=e[0],n=e[1],i=e[2],a=e[3];r=r.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);var o=a?a.evaluate(t):1,s=ee(r,n,i,o);if(s)throw new ae(s);return new Yt(r/255*o,n/255*o,i/255*o,o)}function hr(t,e){return t in e}function fr(t,e){var r=e[t];return void 0===r?null:r}function yr(t){return{type:t}}function dr(t){return{result:"success",value:t}}function mr(t){return{result:"error",value:t}}function vr(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function gr(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function xr(t){return!!t.expression&&t.expression.interpolated}function br(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function _r(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function wr(t){return t}function Ar(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function kr(t,e,r,n,i){return Ar(typeof r===i?n[r]:void 0,t.default,e.default)}function Sr(t,e,r){if("number"!==br(r))return Ar(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];var i=_e(t.stops.map((function(t){return t[0]})),r);return t.stops[i][1]}function Ir(t,e,r){var n=void 0!==t.base?t.base:1;if("number"!==br(r))return Ar(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];var a=_e(t.stops.map((function(t){return t[0]})),r),o=function(t,e,r,n){var i=n-r,a=t-r;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}(r,n,t.stops[a][0],t.stops[a+1][0]),s=t.stops[a][1],u=t.stops[a+1][1],l=Ie[e.type]||wr;if(t.colorSpace&&"rgb"!==t.colorSpace){var p=Xe[t.colorSpace];l=function(t,e){return p.reverse(p.interpolate(p.forward(t),p.forward(e),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=s.evaluate.apply(void 0,t),n=u.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==n)return l(r,n,o)}}:l(s,u,o)}function zr(t,e,r){return"color"===e.type?r=Yt.parse(r):"formatted"===e.type?r=Qt.fromString(r.toString()):"resolvedImage"===e.type?r=te.fromString(r.toString()):br(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),Ar(r,t.default,e.default)}ye.register(pr,{error:[{kind:"error"},[Lt],function(t,e){var r=e[0];throw new ae(r.evaluate(t))}],typeof:[Lt,[jt],function(t,e){return Zt(re(e[0].evaluate(t)))}],"to-rgba":[Xt(Ot,4),[Ut],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Ut,[Ot,Ot,Ot],cr],rgba:[Ut,[Ot,Ot,Ot,Ot],cr],has:{type:Dt,overloads:[[[Lt],function(t,e){return hr(e[0].evaluate(t),t.properties())}],[[Lt,Rt],function(t,e){var r=e[0],n=e[1];return hr(r.evaluate(t),n.evaluate(t))}]]},get:{type:jt,overloads:[[[Lt],function(t,e){return fr(e[0].evaluate(t),t.properties())}],[[Lt,Rt],function(t,e){var r=e[0],n=e[1];return fr(r.evaluate(t),n.evaluate(t))}]]},"feature-state":[jt,[Lt],function(t,e){return fr(e[0].evaluate(t),t.featureState||{})}],properties:[Rt,[],function(t){return t.properties()}],"geometry-type":[Lt,[],function(t){return t.geometryType()}],id:[jt,[],function(t){return t.id()}],zoom:[Ot,[],function(t){return t.globals.zoom}],"heatmap-density":[Ot,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Ot,[],function(t){return t.globals.lineProgress||0}],accumulated:[jt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Ot,yr(Ot),function(t,e){for(var r=0,n=0,i=e;n<i.length;n+=1)r+=i[n].evaluate(t);return r}],"*":[Ot,yr(Ot),function(t,e){for(var r=1,n=0,i=e;n<i.length;n+=1)r*=i[n].evaluate(t);return r}],"-":{type:Ot,overloads:[[[Ot,Ot],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)-n.evaluate(t)}],[[Ot],function(t,e){return-e[0].evaluate(t)}]]},"/":[Ot,[Ot,Ot],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)/n.evaluate(t)}],"%":[Ot,[Ot,Ot],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)%n.evaluate(t)}],ln2:[Ot,[],function(){return Math.LN2}],pi:[Ot,[],function(){return Math.PI}],e:[Ot,[],function(){return Math.E}],"^":[Ot,[Ot,Ot],function(t,e){var r=e[0],n=e[1];return Math.pow(r.evaluate(t),n.evaluate(t))}],sqrt:[Ot,[Ot],function(t,e){var r=e[0];return Math.sqrt(r.evaluate(t))}],log10:[Ot,[Ot],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN10}],ln:[Ot,[Ot],function(t,e){var r=e[0];return Math.log(r.evaluate(t))}],log2:[Ot,[Ot],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN2}],sin:[Ot,[Ot],function(t,e){var r=e[0];return Math.sin(r.evaluate(t))}],cos:[Ot,[Ot],function(t,e){var r=e[0];return Math.cos(r.evaluate(t))}],tan:[Ot,[Ot],function(t,e){var r=e[0];return Math.tan(r.evaluate(t))}],asin:[Ot,[Ot],function(t,e){var r=e[0];return Math.asin(r.evaluate(t))}],acos:[Ot,[Ot],function(t,e){var r=e[0];return Math.acos(r.evaluate(t))}],atan:[Ot,[Ot],function(t,e){var r=e[0];return Math.atan(r.evaluate(t))}],min:[Ot,yr(Ot),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Ot,yr(Ot),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Ot,[Ot],function(t,e){var r=e[0];return Math.abs(r.evaluate(t))}],round:[Ot,[Ot],function(t,e){var r=e[0].evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[Ot,[Ot],function(t,e){var r=e[0];return Math.floor(r.evaluate(t))}],ceil:[Ot,[Ot],function(t,e){var r=e[0];return Math.ceil(r.evaluate(t))}],"filter-==":[Dt,[Lt,jt],function(t,e){var r=e[0],n=e[1];return t.properties()[r.value]===n.value}],"filter-id-==":[Dt,[jt],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[Dt,[Lt],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[Dt,[Lt,jt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i<a}],"filter-id-<":[Dt,[jt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<i}],"filter->":[Dt,[Lt,jt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i>a}],"filter-id->":[Dt,[jt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n>i}],"filter-<=":[Dt,[Lt,jt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i<=a}],"filter-id-<=":[Dt,[jt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<=i}],"filter->=":[Dt,[Lt,jt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i>=a}],"filter-id->=":[Dt,[jt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n>=i}],"filter-has":[Dt,[jt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Dt,[],function(t){return null!==t.id()}],"filter-type-in":[Dt,[Xt(Lt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Dt,[Xt(jt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Dt,[Lt,Xt(jt)],function(t,e){var r=e[0];return e[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[Dt,[Lt,Xt(jt)],function(t,e){var r=e[0],n=e[1];return function(t,e,r,n){for(;r<=n;){var i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}(t.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:Dt,overloads:[[[Dt,Dt],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)&&n.evaluate(t)}],[yr(Dt),function(t,e){for(var r=0,n=e;r<n.length;r+=1)if(!n[r].evaluate(t))return!1;return!0}]]},any:{type:Dt,overloads:[[[Dt,Dt],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)||n.evaluate(t)}],[yr(Dt),function(t,e){for(var r=0,n=e;r<n.length;r+=1)if(n[r].evaluate(t))return!0;return!1}]]},"!":[Dt,[Dt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Dt,[Lt],function(t,e){var r=e[0],n=t.globals&&t.globals.isSupportedScript;return!n||n(r.evaluate(t))}],upcase:[Lt,[Lt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Lt,[Lt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Lt,yr(jt),function(t,e){return e.map((function(e){return ne(e.evaluate(t))})).join("")}],"resolved-locale":[Lt,[qt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Cr=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new fe,this._defaultValue=e?function(t){return"color"===t.type&&_r(t.default)?new Yt(0,0,0,0):"color"===t.type?Yt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Br(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in pr}function Pr(t,e){var r=new be(pr,[],e?function(t){var e={color:Ut,string:Lt,number:Ot,enum:Lt,boolean:Dt,formatted:Nt,resolvedImage:Kt};return"array"===t.type?Xt(e[t.value]||jt,t.length):e[t.type]}(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?dr(new Cr(n,e)):mr(r.errors)}Cr.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=i,this.expression.evaluate(this._evaluator)},Cr.prototype.evaluate=function(t,e,r,n,i){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=i||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new ae("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Er=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ve(e.expression)};Er.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i)},Er.prototype.evaluate=function(t,e,r,n,i){return this._styleExpression.evaluate(t,e,r,n,i)};var Mr=function(t,e,r,n){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ve(e.expression),this.interpolationType=n};function Tr(t,e){if("error"===(t=Pr(t,e)).result)return t;var r=t.value.expression,n=me(r);if(!n&&!vr(e))return mr([new Tt("","data expressions not supported")]);var i=ge(r,["zoom"]);if(!i&&!gr(e))return mr([new Tt("","zoom expressions not supported")]);var a=function t(e){var r=null;if(e instanceof He)r=t(e.result);else if(e instanceof Je)for(var n=0,i=e.args;n<i.length;n+=1){var a=i[n];if(r=t(a))break}else(e instanceof we||e instanceof Ze)&&e.input instanceof ye&&"zoom"===e.input.name&&(r=e);return r instanceof Tt?r:(e.eachChild((function(e){var n=t(e);n instanceof Tt?r=n:!r&&n?r=new Tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&n&&r!==n&&(r=new Tt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),r)}(r);if(!a&&!i)return mr([new Tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof Tt)return mr([a]);if(a instanceof Ze&&!xr(e))return mr([new Tt("",'"interpolate" expressions cannot be used with this property')]);if(!a)return dr(new Er(n?"constant":"source",t.value));var o=a instanceof Ze?a.interpolation:void 0;return dr(new Mr(n?"camera":"composite",t.value,a.labels,o))}Mr.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i)},Mr.prototype.evaluate=function(t,e,r,n,i){return this._styleExpression.evaluate(t,e,r,n,i)},Mr.prototype.interpolationFactor=function(t,e,r){return this.interpolationType?Ze.interpolationFactor(this.interpolationType,t,e,r):0};var Vr=function(t,e){this._parameters=t,this._specification=e,Bt(this,function t(e,r){var n,i,a,o="color"===r.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||void 0!==e.property,l=s||!u,p=e.type||(xr(r)?"exponential":"interval");if(o&&((e=Bt({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],Yt.parse(t[1])]}))),e.default?e.default=Yt.parse(e.default):e.default=Yt.parse(r.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Xe[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===p)n=Ir;else if("interval"===p)n=Sr;else if("categorical"===p){n=kr,i=Object.create(null);for(var c=0,h=e.stops;c<h.length;c+=1){var f=h[c];i[f[0]]=f[1]}a=typeof e.stops[0][0]}else{if("identity"!==p)throw new Error('Unknown function type "'+p+'"');n=zr}if(s){for(var y={},d=[],m=0;m<e.stops.length;m++){var v=e.stops[m],g=v[0].zoom;void 0===y[g]&&(y[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},d.push(g)),y[g].stops.push([v[0].value,v[1]])}for(var x=[],b=0,_=d;b<_.length;b+=1){var w=_[b];x.push([y[w].zoom,t(y[w],r)])}var A={name:"linear"};return{kind:"composite",interpolationType:A,interpolationFactor:Ze.interpolationFactor.bind(void 0,A),zoomStops:x.map((function(t){return t[0]})),evaluate:function(t,n){var i=t.zoom;return Ir({stops:x,base:e.base},r,i).evaluate(i,n)}}}if(l){var k="exponential"===p?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:Ze.interpolationFactor.bind(void 0,k),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){var o=t.zoom;return n(e,r,o,i,a)}}}return{kind:"source",evaluate:function(t,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?Ar(e.default,r.default):n(e,r,s,i,a)}}}(this._parameters,this._specification))};function Fr(t){var e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},a=t.style,o=t.styleSpec,s=[],u=br(r);if("object"!==u)return[new zt(e,r,"object expected, "+u+" found")];for(var l in r){var p=l.split(".")[0],c=n[p]||n["*"],h=void 0;if(i[p])h=i[p];else if(n[p])h=on;else if(i["*"])h=i["*"];else{if(!n["*"]){s.push(new zt(e,r[l],'unknown property "'+l+'"'));continue}h=on}s=s.concat(h({key:(e?e+".":e)+l,value:r[l],valueSpec:c,style:a,styleSpec:o,object:r,objectKey:l},r))}for(var f in n)i[f]||n[f].required&&void 0===n[f].default&&void 0===r[f]&&s.push(new zt(e,r,'missing required property "'+f+'"'));return s}function Or(t){var e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,a=t.key,o=t.arrayElementValidator||on;if("array"!==br(e))return[new zt(a,e,"array expected, "+br(e)+" found")];if(r.length&&e.length!==r.length)return[new zt(a,e,"array length "+r.length+" expected, length "+e.length+" found")];if(r["min-length"]&&e.length<r["min-length"])return[new zt(a,e,"array length at least "+r["min-length"]+" expected, length "+e.length+" found")];var s={type:r.value,values:r.values};i.$version<7&&(s.function=r.function),"object"===br(r.value)&&(s=r.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(o({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:n,styleSpec:i,key:a+"["+l+"]"}));return u}function Lr(t){var e=t.key,r=t.value,n=t.valueSpec,i=br(r);return"number"!==i?[new zt(e,r,"number expected, "+i+" found")]:"minimum"in n&&r<n.minimum?[new zt(e,r,r+" is less than the minimum value "+n.minimum)]:"maximum"in n&&r>n.maximum?[new zt(e,r,r+" is greater than the maximum value "+n.maximum)]:[]}function Dr(t){var e,r,n,i=t.valueSpec,a=Et(t.value.type),o={},s="categorical"!==a&&void 0===t.value.property,u=!s,l="array"===br(t.value.stops)&&"array"===br(t.value.stops[0])&&"object"===br(t.value.stops[0][0]),p=Fr({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===a)return[new zt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],r=t.value;return e=e.concat(Or({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:c})),"array"===br(r)&&0===r.length&&e.push(new zt(t.key,r,"array must have at least one stop")),e},default:function(t){return on({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===a&&s&&p.push(new zt(t.key,t.value,'missing required property "property"')),"identity"===a||t.value.stops||p.push(new zt(t.key,t.value,'missing required property "stops"')),"exponential"===a&&t.valueSpec.expression&&!xr(t.valueSpec)&&p.push(new zt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!vr(t.valueSpec)?p.push(new zt(t.key,t.value,"property functions not supported")):s&&!gr(t.valueSpec)&&p.push(new zt(t.key,t.value,"zoom functions not supported"))),"categorical"!==a&&!l||void 0!==t.value.property||p.push(new zt(t.key,t.value,'"property" property is required')),p;function c(t){var e=[],a=t.value,s=t.key;if("array"!==br(a))return[new zt(s,a,"array expected, "+br(a)+" found")];if(2!==a.length)return[new zt(s,a,"array length 2 expected, length "+a.length+" found")];if(l){if("object"!==br(a[0]))return[new zt(s,a,"object expected, "+br(a[0])+" found")];if(void 0===a[0].zoom)return[new zt(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new zt(s,a,"object stop key must have value")];if(n&&n>Et(a[0].zoom))return[new zt(s,a[0].zoom,"stop zoom values must appear in ascending order")];Et(a[0].zoom)!==n&&(n=Et(a[0].zoom),r=void 0,o={}),e=e.concat(Fr({key:s+"[0]",value:a[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Lr,value:h}}))}else e=e.concat(h({key:s+"[0]",value:a[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},a));return Br(Mt(a[1]))?e.concat([new zt(s+"[1]",a[1],"expressions are not allowed in function stops.")]):e.concat(on({key:s+"[1]",value:a[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function h(t,n){var s=br(t.value),u=Et(t.value),l=null!==t.value?t.value:n;if(e){if(s!==e)return[new zt(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new zt(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var p="number expected, "+s+" found";return vr(i)&&void 0===a&&(p+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new zt(t.key,l,p)]}return"categorical"!==a||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==a&&"number"===s&&void 0!==r&&u<r?[new zt(t.key,l,"stop domain values must appear in ascending order")]:(r=u,"categorical"===a&&u in o?[new zt(t.key,l,"stop domain values must be unique")]:(o[u]=!0,[])):[new zt(t.key,l,"integer expected, found "+u)]}}function Ur(t){var e=("property"===t.expressionContext?Tr:Pr)(Mt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new zt(""+t.key+e.key,t.value,e.message)}));var r=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==r.possibleOutputs().indexOf(void 0))return[new zt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ve(r))return[new zt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ve(r))return[new zt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!ge(r,["zoom","feature-state"]))return[new zt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!me(r))return[new zt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Rr(t){var e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(Et(r))&&i.push(new zt(e,r,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(n.values).indexOf(Et(r))&&i.push(new zt(e,r,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(r)+" found")),i}function jr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var n=r[e];if(!jr(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}Vr.deserialize=function(t){return new Vr(t._parameters,t._specification)},Vr.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var qr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Nr(t){if(null==t)return function(){return!0};jr(t)||(t=Xr(t));var e=Pr(t,qr);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return function(t,r){return e.value.evaluate(t,r)}}function Kr(t,e){return t<e?-1:t>e?1:0}function Xr(t){if(!t)return!0;var e,r=t[0];return t.length<=1?"any"!==r:"=="===r?Zr(t[1],t[2],"=="):"!="===r?Hr(Zr(t[1],t[2],"==")):"<"===r||">"===r||"<="===r||">="===r?Zr(t[1],t[2],r):"any"===r?(e=t.slice(1),["any"].concat(e.map(Xr))):"all"===r?["all"].concat(t.slice(1).map(Xr)):"none"===r?["all"].concat(t.slice(1).map(Xr).map(Hr)):"in"===r?Gr(t[1],t.slice(2)):"!in"===r?Hr(Gr(t[1],t.slice(2))):"has"===r?Jr(t[1]):"!has"!==r||Hr(Jr(t[1]))}function Zr(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function Gr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(Kr)]]:["filter-in-small",t,["literal",e]]}}function Jr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Hr(t){return["!",t]}function Yr(t){return jr(Mt(t.value))?Ur(Bt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var r=e.value,n=e.key;if("array"!==br(r))return[new zt(n,r,"array expected, "+br(r)+" found")];var a,i=e.styleSpec,o=[];if(r.length<1)return[new zt(n,r,"filter array must have at least 1 element")];switch(o=o.concat(Rr({key:n+"[0]",value:r[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),Et(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===Et(r[1])&&o.push(new zt(n,r,'"$type" cannot be use with operator "'+r[0]+'"'));case"==":case"!=":3!==r.length&&o.push(new zt(n,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case"in":case"!in":r.length>=2&&"string"!==(a=br(r[1]))&&o.push(new zt(n+"[1]",r[1],"string expected, "+a+" found"));for(var s=2;s<r.length;s++)a=br(r[s]),"$type"===Et(r[1])?o=o.concat(Rr({key:n+"["+s+"]",value:r[s],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&o.push(new zt(n+"["+s+"]",r[s],"string, number, or boolean expected, "+a+" found"));break;case"any":case"all":case"none":for(var u=1;u<r.length;u++)o=o.concat(t({key:n+"["+u+"]",value:r[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":a=br(r[1]),2!==r.length?o.push(new zt(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==a&&o.push(new zt(n+"[1]",r[1],"string expected, "+a+" found"))}return o}(t)}function $r(t,e){var r=t.key,n=t.style,i=t.styleSpec,a=t.value,o=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=o.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return on({key:r,value:a,valueSpec:i.transition,style:n,styleSpec:i});var l,p=t.valueSpec||s[o];if(!p)return[new zt(r,a,'unknown property "'+o+'"')];if("string"===br(a)&&vr(p)&&!p.tokens&&(l=/^{([^}]+)}$/.exec(a)))return[new zt(r,a,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var c=[];return"symbol"===t.layerType&&("text-field"===o&&n&&!n.glyphs&&c.push(new zt(r,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&_r(Mt(a))&&"identity"===Et(a.type)&&c.push(new zt(r,a,'"text-font" does not support identity functions'))),c.concat(on({key:t.key,value:a,valueSpec:p,style:n,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:o}))}function Wr(t){return $r(t,"paint")}function Qr(t){return $r(t,"layout")}function tn(t){var e=[],r=t.value,n=t.key,i=t.style,a=t.styleSpec;r.type||r.ref||e.push(new zt(n,r,'either "type" or "ref" is required'));var o,s=Et(r.type),u=Et(r.ref);if(r.id)for(var l=Et(r.id),p=0;p<t.arrayIndex;p++){var c=i.layers[p];Et(c.id)===l&&e.push(new zt(n,r.id,'duplicate layer id "'+r.id+'", previously used at line '+c.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach((function(t){t in r&&e.push(new zt(n,r[t],'"'+t+'" is prohibited for ref layers'))})),i.layers.forEach((function(t){Et(t.id)===u&&(o=t)})),o?o.ref?e.push(new zt(n,r.ref,"ref cannot reference another ref layer")):s=Et(o.type):e.push(new zt(n,r.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(r.source){var h=i.sources&&i.sources[r.source],f=h&&Et(h.type);h?"vector"===f&&"raster"===s?e.push(new zt(n,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new zt(n,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==f||r["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new zt(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new zt(n,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new zt(n,r,'layer "'+r.id+'" must specify a "source-layer"')):e.push(new zt(n,r.source,'source "'+r.source+'" not found'))}else e.push(new zt(n,r,'missing required property "source"'));return e=e.concat(Fr({key:n,value:r,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return on({key:n+".type",value:r.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"})},filter:Yr,layout:function(t){return Fr({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Qr(Bt({layerType:s},t))}}})},paint:function(t){return Fr({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Wr(Bt({layerType:s},t))}}})}}}))}function en(t){var e=t.value,r=t.key,n=t.styleSpec,i=t.style;if(!e.type)return[new zt(r,e,'"type" is required')];var a,o=Et(e.type);switch(o){case"vector":case"raster":case"raster-dem":return Fr({key:r,value:e,valueSpec:n["source_"+o.replace("-","_")],style:t.style,styleSpec:n});case"geojson":if(a=Fr({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],l=u[0],p=u[1],c="string"==typeof l?[l,["accumulated"],["get",s]]:l;a.push.apply(a,Ur({key:r+"."+s+".map",value:p,expressionContext:"cluster-map"})),a.push.apply(a,Ur({key:r+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return a;case"video":return Fr({key:r,value:e,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return Fr({key:r,value:e,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return[new zt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Rr({key:r+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function rn(t){var e=t.value,r=t.styleSpec,n=r.light,i=t.style,a=[],o=br(e);if(void 0===e)return a;if("object"!==o)return a.concat([new zt("light",e,"object expected, "+o+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);a=u&&n[u[1]]&&n[u[1]].transition?a.concat(on({key:s,value:e[s],valueSpec:r.transition,style:i,styleSpec:r})):n[s]?a.concat(on({key:s,value:e[s],valueSpec:n[s],style:i,styleSpec:r})):a.concat([new zt(s,e[s],'unknown property "'+s+'"')])}return a}function nn(t){var e=t.value,r=t.key,n=br(e);return"string"!==n?[new zt(r,e,"string expected, "+n+" found")]:[]}var an={"*":function(){return[]},array:Or,boolean:function(t){var e=t.value,r=t.key,n=br(e);return"boolean"!==n?[new zt(r,e,"boolean expected, "+n+" found")]:[]},number:Lr,color:function(t){var e=t.key,r=t.value,n=br(r);return"string"!==n?[new zt(e,r,"color expected, "+n+" found")]:null===Ht(r)?[new zt(e,r,'color expected, "'+r+'" found')]:[]},constants:Ct,enum:Rr,filter:Yr,function:Dr,layer:tn,object:Fr,source:en,light:rn,string:nn,formatted:function(t){return 0===nn(t).length?[]:Ur(t)},resolvedImage:function(t){return 0===nn(t).length?[]:Ur(t)}};function on(t){var e=t.value,r=t.valueSpec,n=t.styleSpec;return r.expression&&_r(Et(e))?Dr(t):r.expression&&Br(Mt(e))?Ur(t):r.type&&an[r.type]?an[r.type](t):Fr(Bt({},t,{valueSpec:r.type?n[r.type]:r}))}function sn(t){var e=t.value,r=t.key,n=nn(t);return n.length?n:(-1===e.indexOf("{fontstack}")&&n.push(new zt(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new zt(r,e,'"glyphs" url must include a "{range}" token')),n)}function un(t,e){void 0===e&&(e=It);var r=[];return r=r.concat(on({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:sn,"*":function(){return[]}}})),t.constants&&(r=r.concat(Ct({key:"constants",value:t.constants,style:t,styleSpec:e}))),ln(r)}function ln(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function pn(t){return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return ln(t.apply(this,e))}}un.source=pn(en),un.light=pn(rn),un.layer=pn(tn),un.filter=pn(Yr),un.paintProperty=pn(Wr),un.layoutProperty=pn(Qr);var cn=un,hn=cn.light,fn=cn.paintProperty,yn=cn.layoutProperty;function dn(t,e){var r=!1;if(e&&e.length)for(var n=0,i=e;n<i.length;n+=1){var a=i[n];t.fire(new kt(new Error(a.message))),r=!0}return r}var mn=gn,vn=3;function gn(t,e,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],r=i[2],this.d=e+2*r;for(var a=0;a<this.d*this.d;a++){var o=i[vn+a],s=i[vn+a+1];n.push(o===s?null:i.subarray(o,s))}var u=i[vn+n.length],l=i[vn+n.length+1];this.keys=i.subarray(u,l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var p=0;p<this.d*this.d;p++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var c=r/e*t;this.min=-c,this.max=t+c}gn.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},gn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},gn.prototype._insertCell=function(t,e,r,n,i,a){this.cells[i].push(a)},gn.prototype.query=function(t,e,r,n,i){var a=this.min,o=this.max;if(t<=a&&e<=a&&o<=r&&o<=n&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,r,n,this._queryCell,s,{},i),s},gn.prototype._queryCell=function(t,e,r,n,i,a,o,s){var u=this.cells[i];if(null!==u)for(var l=this.keys,p=this.bboxes,c=0;c<u.length;c++){var h=u[c];if(void 0===o[h]){var f=4*h;(s?s(p[f+0],p[f+1],p[f+2],p[f+3]):t<=p[f+2]&&e<=p[f+3]&&r>=p[f+0]&&n>=p[f+1])?(o[h]=!0,a.push(l[h])):o[h]=!1}}},gn.prototype._forEachCell=function(t,e,r,n,i,a,o,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),p=this._convertToCellCoord(r),c=this._convertToCellCoord(n),h=u;h<=p;h++)for(var f=l;f<=c;f++){var y=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,r,n,y,a,o,s))return}},gn.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},gn.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},gn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=vn+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(e+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=e,o=0;o<t.length;o++){var s=t[o];i[vn+o]=a,i.set(s,a),a+=s.length}return i[vn+t.length]=a,i.set(this.keys,a),a+=this.keys.length,i[vn+t.length+1]=a,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var xn=self.ImageData,bn={};function _n(t,e,r){void 0===r&&(r={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),bn[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}for(var wn in _n("Object",Object),mn.serialize=function(t,e){var r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},mn.deserialize=function(t){return new mn(t.buffer)},_n("Grid",mn),_n("Color",Yt),_n("Error",Error),_n("ResolvedImage",te),_n("StylePropertyFunction",Vr),_n("StyleExpression",Cr,{omit:["_evaluator"]}),_n("ZoomDependentExpression",Mr),_n("ZoomConstantExpression",Er),_n("CompoundExpression",ye,{omit:["_evaluate"]}),pr)pr[wn]._classRegistryKey||_n("Expression_"+wn,pr[wn]);function An(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function kn(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(An(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var r=t;return e&&e.push(r.buffer),r}if(t instanceof xn)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],i=0,a=t;i<a.length;i+=1){var o=a[i];n.push(kn(o,e))}return n}if("object"==typeof t){var s=t.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l=s.serialize?s.serialize(t,e):{};if(!s.serialize){for(var p in t)if(t.hasOwnProperty(p)&&!(bn[u].omit.indexOf(p)>=0)){var c=t[p];l[p]=bn[u].shallow.indexOf(p)>=0?c:kn(c,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(l.$name=u),l}throw new Error("can't serialize object of type "+typeof t)}function Sn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||An(t)||ArrayBuffer.isView(t)||t instanceof xn)return t;if(Array.isArray(t))return t.map(Sn);if("object"==typeof t){var e=t.$name||"Object",r=bn[e].klass;if(!r)throw new Error("can't deserialize unregistered class "+e);if(r.deserialize)return r.deserialize(t);for(var n=Object.create(r.prototype),i=0,a=Object.keys(t);i<a.length;i+=1){var o=a[i];if("$name"!==o){var s=t[o];n[o]=bn[e].shallow.indexOf(o)>=0?s:Sn(s)}}return n}throw new Error("can't deserialize object of type "+typeof t)}var In=function(){this.first=!0};In.prototype.update=function(t,e){var r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))};var zn={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Cn(t){for(var e=0,r=t;e<r.length;e+=1)if(Pn(r[e].charCodeAt(0)))return!0;return!1}function Bn(t){return!(zn.Arabic(t)||zn["Arabic Supplement"](t)||zn["Arabic Extended-A"](t)||zn["Arabic Presentation Forms-A"](t)||zn["Arabic Presentation Forms-B"](t))}function Pn(t){return!(746!==t&&747!==t&&(t<4352||!(zn["Bopomofo Extended"](t)||zn.Bopomofo(t)||zn["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||zn["CJK Compatibility Ideographs"](t)||zn["CJK Compatibility"](t)||zn["CJK Radicals Supplement"](t)||zn["CJK Strokes"](t)||!(!zn["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||zn["CJK Unified Ideographs Extension A"](t)||zn["CJK Unified Ideographs"](t)||zn["Enclosed CJK Letters and Months"](t)||zn["Hangul Compatibility Jamo"](t)||zn["Hangul Jamo Extended-A"](t)||zn["Hangul Jamo Extended-B"](t)||zn["Hangul Jamo"](t)||zn["Hangul Syllables"](t)||zn.Hiragana(t)||zn["Ideographic Description Characters"](t)||zn.Kanbun(t)||zn["Kangxi Radicals"](t)||zn["Katakana Phonetic Extensions"](t)||zn.Katakana(t)&&12540!==t||!(!zn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!zn["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||zn["Unified Canadian Aboriginal Syllabics"](t)||zn["Unified Canadian Aboriginal Syllabics Extended"](t)||zn["Vertical Forms"](t)||zn["Yijing Hexagram Symbols"](t)||zn["Yi Syllables"](t)||zn["Yi Radicals"](t))))}function En(t){return!(Pn(t)||function(t){return!!(zn["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||zn["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||zn["Letterlike Symbols"](t)||zn["Number Forms"](t)||zn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||zn["Control Pictures"](t)&&9251!==t||zn["Optical Character Recognition"](t)||zn["Enclosed Alphanumerics"](t)||zn["Geometric Shapes"](t)||zn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||zn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||zn["CJK Symbols and Punctuation"](t)||zn.Katakana(t)||zn["Private Use Area"](t)||zn["CJK Compatibility Forms"](t)||zn["Small Form Variants"](t)||zn["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Mn(t,e){return!(!e&&(t>=1424&&t<=2303||zn["Arabic Presentation Forms-A"](t)||zn["Arabic Presentation Forms-B"](t))||t>=2304&&t<=3583||t>=3840&&t<=4255||zn.Khmer(t))}var Tn,Vn="unavailable",Fn="loading",On="loaded",Dn=Vn,Un=null,Rn=new St,jn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Dn===On||null!=jn.applyArabicShaping}},qn=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new In,this.transition={})};qn.prototype.isSupportedScript=function(t){return function(t,e){for(var r=0,n=t;r<n.length;r+=1)if(!Mn(n[r].charCodeAt(0),e))return!1;return!0}(t,jn.isLoaded())},qn.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},qn.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),r=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*e}};var Nn=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(_r(t))return new Vr(t,e);if(Br(t)){var r=Tr(t,e);if("error"===r.result)throw new Error(r.value.map((function(t){return t.key+": "+t.message})).join(", "));return r.value}var n=t;return"string"==typeof t&&"color"===e.type&&(n=Yt.parse(t)),{kind:"constant",evaluate:function(){return n}}}(void 0===e?t.specification.default:e,t.specification)};Nn.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Nn.prototype.possiblyEvaluate=function(t,e){return this.property.possiblyEvaluate(this,t,e)};var Kn=function(t){this.property=t,this.value=new Nn(t,void 0)};Kn.prototype.transitioned=function(t,e){return new Zn(this.property,this.value,e,c({},t.transition,this.transition),t.now)},Kn.prototype.untransitioned=function(){return new Zn(this.property,this.value,null,{},0)};var Xn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Xn.prototype.getValue=function(t){return b(this._values[t].value.value)},Xn.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Kn(this._values[t].property)),this._values[t].value=new Nn(this._values[t].property,null===e?void 0:b(e))},Xn.prototype.getTransition=function(t){return b(this._values[t].transition)},Xn.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Kn(this._values[t].property)),this._values[t].transition=b(e)||void 0},Xn.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i);var a=this.getTransition(n);void 0!==a&&(t[n+"-transition"]=a)}return t},Xn.prototype.transitioned=function(t,e){for(var r=new Gn(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n];r._values[a]=this._values[a].transitioned(t,e._values[a])}return r},Xn.prototype.untransitioned=function(){for(var t=new Gn(this._properties),e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e];t._values[n]=this._values[n].untransitioned()}return t};var Zn=function(t,e,r,n,i){this.property=t,this.value=e,this.begin=i+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=r)};Zn.prototype.possiblyEvaluate=function(t,e){var r=t.now||0,n=this.value.possiblyEvaluate(t,e),i=this.prior;if(i){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return i.possiblyEvaluate(t,e);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(i.possiblyEvaluate(t,e),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}(a))}return n};var Gn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Gn.prototype.possiblyEvaluate=function(t,e){for(var r=new Yn(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n];r._values[a]=this._values[a].possiblyEvaluate(t,e)}return r},Gn.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var r=e[t];if(this._values[r].prior)return!0}return!1};var Jn=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Jn.prototype.getValue=function(t){return b(this._values[t].value)},Jn.prototype.setValue=function(t,e){this._values[t]=new Nn(this._values[t].property,null===e?void 0:b(e))},Jn.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i)}return t},Jn.prototype.possiblyEvaluate=function(t,e){for(var r=new Yn(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n];r._values[a]=this._values[a].possiblyEvaluate(t,e)}return r};var Hn=function(t,e,r){this.property=t,this.value=e,this.parameters=r};Hn.prototype.isConstant=function(){return"constant"===this.value.kind},Hn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Hn.prototype.evaluate=function(t,e,r){return this.property.evaluate(this.value,this.parameters,t,e,r)};var Yn=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Yn.prototype.get=function(t){return this._values[t]};var $n=function(t){this.specification=t};$n.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},$n.prototype.interpolate=function(t,e,r){var n=Ie[this.specification.type];return n?n(t,e,r):t};var Wn=function(t,e){this.specification=t,this.overrides=e};Wn.prototype.possiblyEvaluate=function(t,e,r){return"constant"===t.expression.kind||"camera"===t.expression.kind?new Hn(this,{kind:"constant",value:t.expression.evaluate(e,null,{},r)},e):new Hn(this,t.expression,e)},Wn.prototype.interpolate=function(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Hn(this,{kind:"constant",value:void 0},t.parameters);var n=Ie[this.specification.type];return n?new Hn(this,{kind:"constant",value:n(t.value.value,e.value.value,r)},t.parameters):t},Wn.prototype.evaluate=function(t,e,r,n,i){return"constant"===t.kind?t.value:t.evaluate(e,r,n,i)};var Qn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(t,e,r){if(void 0===t.value)return new Hn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},r),i="resolvedImage"===t.property.specification.type&&"string"!=typeof n?n.name:n,a=this._calculate(i,i,i,e);return new Hn(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var o=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Hn(this,{kind:"constant",value:o},e)}return new Hn(this,t.expression,e)},e.prototype.evaluate=function(t,e,r,n,i){if("source"===t.kind){var a=t.evaluate(e,r,n,i);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},r,n),t.evaluate({zoom:Math.floor(e.zoom)},r,n),t.evaluate({zoom:Math.floor(e.zoom)+1},r,n),e):t.value},e.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},e.prototype.interpolate=function(t){return t},e}(Wn),ti=function(t){this.specification=t};ti.prototype.possiblyEvaluate=function(t,e,r){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},r);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new qn(Math.floor(e.zoom-1),e)),t.expression.evaluate(new qn(Math.floor(e.zoom),e)),t.expression.evaluate(new qn(Math.floor(e.zoom+1),e)),e)}},ti.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},ti.prototype.interpolate=function(t){return t};var ei=function(t){this.specification=t};ei.prototype.possiblyEvaluate=function(t,e,r){return!!t.expression.evaluate(e,null,{},r)},ei.prototype.interpolate=function(){return!1};var ri=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var r=t[e];r.specification.overridable&&this.overridableProperties.push(e);var n=this.defaultPropertyValues[e]=new Nn(r,void 0),i=this.defaultTransitionablePropertyValues[e]=new Kn(r);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}};_n("DataDrivenProperty",Wn),_n("DataConstantProperty",$n),_n("CrossFadedDataDrivenProperty",Qn),_n("CrossFadedProperty",ti),_n("ColorRampProperty",ei);var ni=function(t){function e(e,r){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter=function(){return!0},"custom"!==e.type&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new Jn(r.layout)),r.paint)){for(var n in this._transitionablePaint=new Xn(r.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e){var n="layers."+this.id+".layout."+t;if(this._validate(yn,n,t,e,r))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e},e.prototype.getPaintProperty=function(t){return v(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e){var n="layers."+this.id+".paint."+t;if(this._validate(fn,n,t,e,r))return!1}if(v(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t],a="cross-faded-data-driven"===i.property.specification["property-type"],o=i.value.isDataDriven(),s=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var u=this._transitionablePaint._values[t].value;return u.isDataDriven()||o||a||this._handleOverridablePaintPropertyUpdate(t,s,u)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,r){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),x(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,r,n,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&dn(this,t.call(cn,{key:e,layerType:this.type,objectKey:r,value:n,styleSpec:It,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Hn&&vr(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(St),ii={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ai=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},oi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function si(t,e){void 0===e&&(e=1);var r=0,n=0;return{members:t.map((function(t){var i,a=(i=t.type,ii[i].BYTES_PER_ELEMENT),o=r=ui(r,Math.max(e,a)),s=t.components||1;return n=Math.max(n,a),r+=a*s,{name:t.name,type:t.type,components:s,offset:o}})),size:ui(r,Math.max(n,e)),alignment:e}}function ui(t,e){return Math.ceil(t/e)*e}oi.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},oi.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},oi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},oi.prototype.clear=function(){this.length=0},oi.prototype.resize=function(t){this.reserve(t),this.length=t},oi.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},oi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.int16[n+0]=e,this.int16[n+1]=r,t},e}(oi);li.prototype.bytesPerElement=4,_n("StructArrayLayout2i4",li);var pi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var a=4*t;return this.int16[a+0]=e,this.int16[a+1]=r,this.int16[a+2]=n,this.int16[a+3]=i,t},e}(oi);pi.prototype.bytesPerElement=8,_n("StructArrayLayout4i8",pi);var ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,a)},e.prototype.emplace=function(t,e,r,n,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(oi);ci.prototype.bytesPerElement=12,_n("StructArrayLayout2i4i12",ci);var hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,a)},e.prototype.emplace=function(t,e,r,n,i,a,o){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.uint8[u+4]=n,this.uint8[u+5]=i,this.uint8[u+6]=a,this.uint8[u+7]=o,t},e}(oi);hi.prototype.bytesPerElement=8,_n("StructArrayLayout2i4ub8",hi);var fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,r,n,i,a,o,s)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u){var l=8*t;return this.uint16[l+0]=e,this.uint16[l+1]=r,this.uint16[l+2]=n,this.uint16[l+3]=i,this.uint16[l+4]=a,this.uint16[l+5]=o,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(oi);fi.prototype.bytesPerElement=16,_n("StructArrayLayout8ui16",fi);var yi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,r,n,i,a,o,s)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u){var l=8*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+3]=i,this.uint16[l+4]=a,this.uint16[l+5]=o,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(oi);yi.prototype.bytesPerElement=16,_n("StructArrayLayout4i4ui16",yi);var di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=r,this.float32[i+2]=n,t},e}(oi);di.prototype.bytesPerElement=12,_n("StructArrayLayout3f12",di);var mi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.uint32[r+0]=e,t},e}(oi);mi.prototype.bytesPerElement=4,_n("StructArrayLayout1ul4",mi);var vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,r,n,i,a,o,s,u,l,p)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c){var h=12*t,f=6*t;return this.int16[h+0]=e,this.int16[h+1]=r,this.int16[h+2]=n,this.int16[h+3]=i,this.int16[h+4]=a,this.int16[h+5]=o,this.uint32[f+3]=s,this.uint16[h+8]=u,this.uint16[h+9]=l,this.int16[h+10]=p,this.int16[h+11]=c,t},e}(oi);vi.prototype.bytesPerElement=24,_n("StructArrayLayout6i1ul2ui2i24",vi);var gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,a)},e.prototype.emplace=function(t,e,r,n,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(oi);gi.prototype.bytesPerElement=12,_n("StructArrayLayout2i2i2i12",gi);var xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var a=12*t,o=3*t;return this.uint8[a+0]=e,this.uint8[a+1]=r,this.float32[o+1]=n,this.float32[o+2]=i,t},e}(oi);xi.prototype.bytesPerElement=12,_n("StructArrayLayout2ub2f12",xi);var bi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m){var v=this.length;return this.resize(v+1),this.emplace(v,t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v){var g=24*t,x=12*t,b=48*t;return this.int16[g+0]=e,this.int16[g+1]=r,this.uint16[g+2]=n,this.uint16[g+3]=i,this.uint32[x+2]=a,this.uint32[x+3]=o,this.uint32[x+4]=s,this.uint16[g+10]=u,this.uint16[g+11]=l,this.uint16[g+12]=p,this.float32[x+7]=c,this.float32[x+8]=h,this.uint8[b+36]=f,this.uint8[b+37]=y,this.uint8[b+38]=d,this.uint32[x+10]=m,this.int16[g+22]=v,t},e}(oi);bi.prototype.bytesPerElement=48,_n("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",bi);var _i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,_,w,A,k,S){var I=this.length;return this.resize(I+1),this.emplace(I,t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,_,w,A,k,S)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,_,w,A,k,S,I){var z=30*t,C=15*t;return this.int16[z+0]=e,this.int16[z+1]=r,this.int16[z+2]=n,this.int16[z+3]=i,this.int16[z+4]=a,this.int16[z+5]=o,this.int16[z+6]=s,this.int16[z+7]=u,this.uint16[z+8]=l,this.uint16[z+9]=p,this.uint16[z+10]=c,this.uint16[z+11]=h,this.uint16[z+12]=f,this.uint16[z+13]=y,this.uint16[z+14]=d,this.uint16[z+15]=m,this.uint16[z+16]=v,this.uint16[z+17]=g,this.uint16[z+18]=x,this.uint16[z+19]=b,this.uint16[z+20]=_,this.uint16[z+21]=w,this.uint32[C+11]=A,this.float32[C+12]=k,this.float32[C+13]=S,this.float32[C+14]=I,t},e}(oi);_i.prototype.bytesPerElement=60,_n("StructArrayLayout8i14ui1ul3f60",_i);var wi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.float32[r+0]=e,t},e}(oi);wi.prototype.bytesPerElement=4,_n("StructArrayLayout1f4",wi);var Ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=r,this.int16[i+2]=n,t},e}(oi);Ai.prototype.bytesPerElement=6,_n("StructArrayLayout3i6",Ai);var ki=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=2*t,a=4*t;return this.uint32[i+0]=e,this.uint16[a+2]=r,this.uint16[a+3]=n,t},e}(oi);ki.prototype.bytesPerElement=8,_n("StructArrayLayout1ul2ui8",ki);var Si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,this.uint16[i+2]=n,t},e}(oi);Si.prototype.bytesPerElement=6,_n("StructArrayLayout3ui6",Si);var Ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,t},e}(oi);Ii.prototype.bytesPerElement=4,_n("StructArrayLayout2ui4",Ii);var zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.uint16[r+0]=e,t},e}(oi);zi.prototype.bytesPerElement=2,_n("StructArrayLayout1ui2",zi);var Ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.float32[n+0]=e,this.float32[n+1]=r,t},e}(oi);Ci.prototype.bytesPerElement=8,_n("StructArrayLayout2f8",Ci);var Bi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var a=4*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=i,t},e}(oi);Bi.prototype.bytesPerElement=16,_n("StructArrayLayout4f16",Bi);var Pi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.radius.get=function(){return this._structArray.int16[this._pos2+10]},r.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},r.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},r.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},r.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}(ai);Pi.prototype.size=24;var Ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Pi(this,t)},e}(vi);_n("CollisionBoxArray",Ei);var Mi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},r.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},r.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},r.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},r.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},r.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},r.associatedIconIndex.set=function(t){this._structArray.int16[this._pos2+22]=t},Object.defineProperties(e.prototype,r),e}(ai);Mi.prototype.size=48;var Ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Mi(this,t)},e}(bi);_n("PlacedSymbolArray",Ti);var Vi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.rightJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},r.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.centerJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},r.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},r.leftJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+4]=t},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},r.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+5]=t},r.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},r.placedIconSymbolIndex.set=function(t){this._structArray.int16[this._pos2+6]=t},r.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},r.verticalPlacedIconSymbolIndex.set=function(t){this._structArray.int16[this._pos2+7]=t},r.key.get=function(){return this._structArray.uint16[this._pos2+8]},r.key.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},r.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},r.verticalTextBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},r.verticalTextBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},r.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+13]=t},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},r.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+14]=t},r.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},r.verticalIconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+15]=t},r.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},r.verticalIconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+16]=t},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},r.featureIndex.set=function(t){this._structArray.uint16[this._pos2+17]=t},r.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},r.numHorizontalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+18]=t},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},r.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+19]=t},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},r.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+20]=t},r.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},r.numVerticalIconVertices.set=function(t){this._structArray.uint16[this._pos2+21]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+11]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+11]=t},r.textBoxScale.get=function(){return this._structArray.float32[this._pos4+12]},r.textBoxScale.set=function(t){this._structArray.float32[this._pos4+12]=t},r.textOffset0.get=function(){return this._structArray.float32[this._pos4+13]},r.textOffset0.set=function(t){this._structArray.float32[this._pos4+13]=t},r.textOffset1.get=function(){return this._structArray.float32[this._pos4+14]},r.textOffset1.set=function(t){this._structArray.float32[this._pos4+14]=t},Object.defineProperties(e.prototype,r),e}(ai);Vi.prototype.size=60;var Fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Vi(this,t)},e}(_i);_n("SymbolInstanceArray",Fi);var Oi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={offsetX:{configurable:!0}};return r.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},r.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,r),e}(ai);Oi.prototype.size=4;var Li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new Oi(this,t)},e}(wi);_n("GlyphOffsetArray",Li);var Di=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return r.x.get=function(){return this._structArray.int16[this._pos2+0]},r.x.set=function(t){this._structArray.int16[this._pos2+0]=t},r.y.get=function(){return this._structArray.int16[this._pos2+1]},r.y.set=function(t){this._structArray.int16[this._pos2+1]=t},r.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},r.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,r),e}(ai);Di.prototype.size=6;var Ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new Di(this,t)},e}(Ai);_n("SymbolLineVertexArray",Ui);var Ri=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,r),e}(ai);Ri.prototype.size=8;var ji=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Ri(this,t)},e}(ki);_n("FeatureIndexArray",ji);var qi=si([{name:"a_pos",components:2,type:"Int16"}],4).members,Ni=function(t){void 0===t&&(t=[]),this.segments=t};function Ki(t,e){return 256*(t=l(Math.floor(t),0,255))+l(Math.floor(e),0,255)}Ni.prototype.prepareSegment=function(t,e,r,n){var i=this.segments[this.segments.length-1];return t>Ni.MAX_VERTEX_ARRAY_LENGTH&&w("Max vertices per segment is "+Ni.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>Ni.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i},Ni.prototype.get=function(){return this.segments},Ni.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var r=e[t];for(var n in r.vaos)r.vaos[n].destroy()}},Ni.simpleSegment=function(t,e,r,n){return new Ni([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])},Ni.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_n("SegmentVector",Ni);var Xi=function(){this.ids=[],this.positions=[],this.indexed=!1};function Zi(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}Xi.prototype.add=function(t,e,r,n){this.ids.push(t),this.positions.push(e,r,n)},Xi.prototype.getPositions=function(t){for(var e=0,r=this.ids.length-1;e<r;){var n=e+r>>1;this.ids[n]>=t?r=n:e=n+1}for(var i=[];this.ids[e]===t;){var a=this.positions[3*e],o=this.positions[3*e+1],s=this.positions[3*e+2];i.push({index:a,start:o,end:s}),e++}return i},Xi.serialize=function(t,e){var r=new Float64Array(t.ids),n=new Uint32Array(t.positions);return function t(e,r,n,i){if(!(n>=i)){for(var a=e[n+i>>1],o=n-1,s=i+1;;){do{o++}while(e[o]<a);do{s--}while(e[s]>a);if(o>=s)break;Zi(e,o,s),Zi(r,3*o,3*s),Zi(r,3*o+1,3*s+1),Zi(r,3*o+2,3*s+2)}t(e,r,n,s),t(e,r,s+1,i)}}(r,n,0,r.length-1),e.push(r.buffer,n.buffer),{ids:r,positions:n}},Xi.deserialize=function(t){var e=new Xi;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},_n("FeaturePositionMap",Xi);var Gi=function(t,e){this.gl=t.gl,this.location=e},Ji=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Gi),Hi=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Gi),Yi=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Gi),$i=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Gi),Wi=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Gi),Qi=function(t){function e(e,r){t.call(this,e,r),this.current=Yt.transparent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Gi),ta=new Float32Array(16),ea=function(t){function e(e,r){t.call(this,e,r),this.current=ta}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Gi);function ra(t){return[Ki(255*t.r,255*t.g),Ki(255*t.b,255*t.a)]}var na=function(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map((function(t){return"u_"+t})),this.type=r,this.maxValue=-1/0};na.prototype.defines=function(){return this.names.map((function(t){return"#define HAS_UNIFORM_u_"+t}))},na.prototype.setConstantPatternPositions=function(){},na.prototype.populatePaintArray=function(){},na.prototype.updatePaintArray=function(){},na.prototype.upload=function(){},na.prototype.destroy=function(){},na.prototype.setUniforms=function(t,e,r,n){e.set(n.constantOr(this.value))},na.prototype.getBinding=function(t,e){return"color"===this.type?new Qi(t,e):new Hi(t,e)},na.serialize=function(t){var e=t.value,r=t.names,n=t.type;return{value:kn(e),names:r,type:n}},na.deserialize=function(t){var e=t.value,r=t.names,n=t.type;return new na(Sn(e),r,n)};var ia=function(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map((function(t){return"u_"+t})),this.type=r,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};ia.prototype.defines=function(){return this.names.map((function(t){return"#define HAS_UNIFORM_u_"+t}))},ia.prototype.populatePaintArray=function(){},ia.prototype.updatePaintArray=function(){},ia.prototype.upload=function(){},ia.prototype.destroy=function(){},ia.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},ia.prototype.setUniforms=function(t,e,r,n,i){var a=this.patternPositions;"u_pattern_to"===i&&a.patternTo&&e.set(a.patternTo),"u_pattern_from"===i&&a.patternFrom&&e.set(a.patternFrom)},ia.prototype.getBinding=function(t,e){return new Wi(t,e)};var aa=function(t,e,r,n){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map((function(t){return"a_"+t})),this.maxValue=-1/0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new n};aa.prototype.defines=function(){return[]},aa.prototype.setConstantPatternPositions=function(){},aa.prototype.populatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,a=i.length;i.reserve(t);var o=this.expression.evaluate(new qn(0),e,{},[],n);if("color"===this.type)for(var s=ra(o),u=a;u<t;u++)i.emplaceBack(s[0],s[1]);else{for(var l=a;l<t;l++)i.emplaceBack(o);this.maxValue=Math.max(this.maxValue,o)}},aa.prototype.updatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,a=this.expression.evaluate({zoom:0},r,n);if("color"===this.type)for(var o=ra(a),s=t;s<e;s++)i.emplace(s,o[0],o[1]);else{for(var u=t;u<e;u++)i.emplace(u,a);this.maxValue=Math.max(this.maxValue,a)}},aa.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},aa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},aa.prototype.setUniforms=function(t,e){e.set(0)},aa.prototype.getBinding=function(t,e){return new Hi(t,e)};var oa=function(t,e,r,n,i,a){this.expression=t,this.names=e,this.uniformNames=this.names.map((function(t){return"u_"+t+"_t"})),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0;var o=a;this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new o};oa.prototype.defines=function(){return[]},oa.prototype.setConstantPatternPositions=function(){},oa.prototype.populatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,a=i.length;i.reserve(t);var o=this.expression.evaluate(new qn(this.zoom),e,{},[],n),s=this.expression.evaluate(new qn(this.zoom+1),e,{},[],n);if("color"===this.type)for(var u=ra(o),l=ra(s),p=a;p<t;p++)i.emplaceBack(u[0],u[1],l[0],l[1]);else{for(var c=a;c<t;c++)i.emplaceBack(o,s);this.maxValue=Math.max(this.maxValue,o,s)}},oa.prototype.updatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,a=this.expression.evaluate({zoom:this.zoom},r,n),o=this.expression.evaluate({zoom:this.zoom+1},r,n);if("color"===this.type)for(var s=ra(a),u=ra(o),l=t;l<e;l++)i.emplace(l,s[0],s[1],u[0],u[1]);else{for(var p=t;p<e;p++)i.emplace(p,a,o);this.maxValue=Math.max(this.maxValue,a,o)}},oa.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},oa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},oa.prototype.interpolationFactor=function(t){return this.useIntegerZoom&&(t=Math.floor(t)),l(this.expression.interpolationFactor(t,this.zoom,this.zoom+1),0,1)},oa.prototype.setUniforms=function(t,e,r){e.set(this.interpolationFactor(r.zoom))},oa.prototype.getBinding=function(t,e){return new Hi(t,e)};var sa=function(t,e,r,n,i,a,o){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map((function(t){return"u_"+t+"_t"})),this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0,this.layerId=o,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}})),this.zoomInPaintVertexArray=new a,this.zoomOutPaintVertexArray=new a};sa.prototype.defines=function(){return[]},sa.prototype.setConstantPatternPositions=function(){},sa.prototype.populatePaintArray=function(t,e,r){var n=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,a=this.layerId,o=n.length;if(n.reserve(t),i.reserve(t),r&&e.patterns&&e.patterns[a]){var s=e.patterns[a],u=s.min,l=s.mid,p=s.max,c=r[u],h=r[l],f=r[p];if(!c||!h||!f)return;for(var y=o;y<t;y++)n.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1]),i.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1])}},sa.prototype.updatePaintArray=function(t,e,r,n,i){var a=this.zoomInPaintVertexArray,o=this.zoomOutPaintVertexArray,s=this.layerId;if(i&&r.patterns&&r.patterns[s]){var u=r.patterns[s],l=u.min,p=u.mid,c=u.max,h=i[l],f=i[p],y=i[c];if(!h||!f||!y)return;for(var d=t;d<e;d++)a.emplace(d,f.tl[0],f.tl[1],f.br[0],f.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),o.emplace(d,f.tl[0],f.tl[1],f.br[0],f.br[1],y.tl[0],y.tl[1],y.br[0],y.br[1])}},sa.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},sa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},sa.prototype.setUniforms=function(t,e){e.set(0)},sa.prototype.getBinding=function(t,e){return new Hi(t,e)};var ua=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new Xi,this._bufferOffset=0};ua.createDynamic=function(t,e,r){var n=new ua,i=[];for(var a in t.paint._values)if(r(a)){var o=t.paint.get(a);if(o instanceof Hn&&vr(o.property.specification)){var s=pa(a,t.type),u=o.property.specification.type,l=o.property.useIntegerZoom;if("cross-faded"===o.property.specification["property-type"]||"cross-faded-data-driven"===o.property.specification["property-type"])if("constant"===o.value.kind)n.binders[a]=new ia(o.value.value,s,u),i.push("/u_"+a);else{var p=ca(a,u,"source");n.binders[a]=new sa(o.value,s,u,l,e,p,t.id),i.push("/a_"+a)}else if("constant"===o.value.kind)n.binders[a]=new na(o.value.value,s,u),i.push("/u_"+a);else if("source"===o.value.kind){var c=ca(a,u,"source");n.binders[a]=new aa(o.value,s,u,c),i.push("/a_"+a)}else{var h=ca(a,u,"composite");n.binders[a]=new oa(o.value,s,u,l,e,h),i.push("/z_"+a)}}}return n.cacheKey=i.sort().join(""),n},ua.prototype.populatePaintArrays=function(t,e,r,n,i){for(var a in this.binders)this.binders[a].populatePaintArray(t,e,n,i);void 0!==e.id&&this._featureMap.add(+e.id,r,this._bufferOffset,t),this._bufferOffset=t},ua.prototype.setConstantPatternPositions=function(t,e){for(var r in this.binders)this.binders[r].setConstantPatternPositions(t,e)},ua.prototype.updatePaintArrays=function(t,e,r,n){var i=!1;for(var a in t)for(var o=0,s=this._featureMap.getPositions(+a);o<s.length;o+=1){var u=s[o],l=e.feature(u.index);for(var p in this.binders){var c=this.binders[p];if(!(c instanceof na||c instanceof ia)&&!0===c.expression.isStateDependent){var h=r.paint.get(p);c.expression=h.value,c.updatePaintArray(u.start,u.end,l,t[a],n),i=!0}}}return i},ua.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},ua.prototype.getPaintVertexBuffers=function(){return this._buffers},ua.prototype.getUniforms=function(t,e){var r=[];for(var n in this.binders)for(var i=this.binders[n],a=0,o=i.uniformNames;a<o.length;a+=1){var s=o[a];if(e[s]){var u=i.getBinding(t,e[s]);r.push({name:s,property:n,binding:u})}}return r},ua.prototype.setUniforms=function(t,e,r,n){for(var i=0,a=e;i<a.length;i+=1){var o=a[i],s=o.name,u=o.property,l=o.binding;this.binders[u].setUniforms(t,l,n,r.get(u),s)}},ua.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof sa){var i=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&e.push(i)}else(n instanceof aa||n instanceof oa)&&n.paintVertexBuffer&&e.push(n.paintVertexBuffer)}this._buffers=e},ua.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var r=[];for(var n in this.binders){var i=this.binders[n];(i instanceof aa||i instanceof oa)&&i.paintVertexBuffer&&r.push(i.paintVertexBuffer)}this._buffers=r},ua.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var la=function(t,e,r,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var i=0,a=e;i<a.length;i+=1){var o=a[i];this.programConfigurations[o.id]=ua.createDynamic(o,r,n),this.programConfigurations[o.id].layoutAttributes=t}this.needsUpload=!1};function pa(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function ca(t,e,r){var n={color:{source:Ci,composite:Bi},number:{source:wi,composite:Ci}},i=function(t){return{"line-pattern":{source:fi,composite:fi},"fill-pattern":{source:fi,composite:fi},"fill-extrusion-pattern":{source:fi,composite:fi}}[t]}(t);return i&&i[r]||n[e][r]}la.prototype.populatePaintArrays=function(t,e,r,n,i){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,n,i);this.needsUpload=!0},la.prototype.updatePaintArrays=function(t,e,r,n){for(var i=0,a=r;i<a.length;i+=1){var o=a[i];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,e,o,n)||this.needsUpload}},la.prototype.get=function(t){return this.programConfigurations[t]},la.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},la.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},_n("ConstantBinder",na),_n("CrossFadedConstantBinder",ia),_n("SourceExpressionBinder",aa),_n("CrossFadedCompositeBinder",sa),_n("CompositeExpressionBinder",oa),_n("ProgramConfiguration",ua,{omit:["_buffers"]}),_n("ProgramConfigurationSet",la);var ha=8192,ya={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1};function da(t){for(var e=ha/t.extent,r=t.loadGeometry(),n=0;n<r.length;n++)for(var i=r[n],a=0;a<i.length;a++){var o=i[a];o.x=Math.round(o.x*e),o.y=Math.round(o.y*e),(o.x<ya.min||o.x>ya.max||o.y<ya.min||o.y>ya.max)&&(w("Geometry exceeds allowed extent, reduce your vector tile buffer size"),o.x=l(o.x,ya.min,ya.max),o.y=l(o.y,ya.min,ya.max))}return r}function ma(t,e,r,n,i){t.emplaceBack(2*e+(n+1)/2,2*r+(i+1)/2)}var va=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new li,this.indexArray=new Si,this.segments=new Ni,this.programConfigurations=new la(qi,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function ga(t,e){for(var r=0;r<t.length;r++)if(za(e,t[r]))return!0;for(var n=0;n<e.length;n++)if(za(t,e[n]))return!0;return!!wa(t,e)}function xa(t,e,r){return!!za(t,e)||!!ka(e,t,r)}function ba(t,e){if(1===t.length)return Ia(e,t[0]);for(var r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++)if(za(t,n[i]))return!0;for(var a=0;a<t.length;a++)if(Ia(e,t[a]))return!0;for(var o=0;o<e.length;o++)if(wa(t,e[o]))return!0;return!1}function _a(t,e,r){if(t.length>1){if(wa(t,e))return!0;for(var n=0;n<e.length;n++)if(ka(e[n],t,r))return!0}for(var i=0;i<t.length;i++)if(ka(t[i],e,r))return!0;return!1}function wa(t,e){if(0===t.length||0===e.length)return!1;for(var r=0;r<t.length-1;r++)for(var n=t[r],i=t[r+1],a=0;a<e.length-1;a++)if(Aa(n,i,e[a],e[a+1]))return!0;return!1}function Aa(t,e,r,n){return A(t,r,n)!==A(e,r,n)&&A(t,e,r)!==A(t,e,n)}function ka(t,e,r){var n=r*r;if(1===e.length)return t.distSqr(e[0])<n;for(var i=1;i<e.length;i++)if(Sa(t,e[i-1],e[i])<n)return!0;return!1}function Sa(t,e,r){var n=e.distSqr(r);if(0===n)return t.distSqr(e);var i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return i<0?t.distSqr(e):i>1?t.distSqr(r):t.distSqr(r.sub(e)._mult(i)._add(e))}function Ia(t,e){for(var r,n,i,a=!1,o=0;o<t.length;o++)for(var s=0,u=(r=t[o]).length-1;s<r.length;u=s++)n=r[s],i=r[u],n.y>e.y!=i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(a=!a);return a}function za(t,e){for(var r=!1,n=0,i=t.length-1;n<t.length;i=n++){var a=t[n],o=t[i];a.y>e.y!=o.y>e.y&&e.x<(o.x-a.x)*(e.y-a.y)/(o.y-a.y)+a.x&&(r=!r)}return r}function Ca(t,e,r){var n=r[0],i=r[2];if(t.x<n.x&&e.x<n.x||t.x>i.x&&e.x>i.x||t.y<n.y&&e.y<n.y||t.y>i.y&&e.y>i.y)return!1;var a=A(t,e,r[0]);return a!==A(t,e,r[1])||a!==A(t,e,r[2])||a!==A(t,e,r[3])}function Ba(t,e,r){var n=e.paint.get(t).value;return"constant"===n.kind?n.value:r.programConfigurations.get(e.id).binders[t].maxValue}function Pa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ea(t,e,r,n,a){if(!e[0]&&!e[1])return t;var o=i.convert(e)._mult(a);"viewport"===r&&o._rotate(-n);for(var s=[],u=0;u<t.length;u++){var l=t[u];s.push(l.sub(o))}return s}va.prototype.populate=function(t,e){var r=this.layers[0],n=[],i=null;"circle"===r.type&&(i=r.layout.get("circle-sort-key"));for(var a=0,o=t;a<o.length;a+=1){var s=o[a],u=s.feature,l=s.index,p=s.sourceLayerIndex;if(this.layers[0]._featureFilter(new qn(this.zoom),u)){var c=da(u),h=i?i.evaluate(u,{}):void 0,f={id:u.id,properties:u.properties,type:u.type,sourceLayerIndex:p,index:l,geometry:c,patterns:{},sortKey:h};n.push(f)}}i&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,d=n;y<d.length;y+=1){var m=d[y],v=m,g=v.geometry,x=v.index,b=v.sourceLayerIndex,_=t[x].feature;this.addFeature(m,g,x),e.featureIndex.insert(_,g,x,b,this.index)}},va.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},va.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},va.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},va.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,qi),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},va.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},va.prototype.addFeature=function(t,e,r){for(var n=0,i=e;n<i.length;n+=1)for(var a=0,o=i[n];a<o.length;a+=1){var s=o[a],u=s.x,l=s.y;if(!(u<0||u>=ha||l<0||l>=ha)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),c=p.vertexLength;ma(this.layoutVertexArray,u,l,-1,-1),ma(this.layoutVertexArray,u,l,1,-1),ma(this.layoutVertexArray,u,l,1,1),ma(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(c,c+1,c+2),this.indexArray.emplaceBack(c,c+3,c+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{})},_n("CircleBucket",va,{omit:["layers"]});var Fa,Ma=new ri({"circle-sort-key":new Wn(It.layout_circle["circle-sort-key"])}),Ta={paint:new ri({"circle-radius":new Wn(It.paint_circle["circle-radius"]),"circle-color":new Wn(It.paint_circle["circle-color"]),"circle-blur":new Wn(It.paint_circle["circle-blur"]),"circle-opacity":new Wn(It.paint_circle["circle-opacity"]),"circle-translate":new $n(It.paint_circle["circle-translate"]),"circle-translate-anchor":new $n(It.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new $n(It.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new $n(It.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Wn(It.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Wn(It.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Wn(It.paint_circle["circle-stroke-opacity"])}),layout:Ma},Va="undefined"!=typeof Float32Array?Float32Array:Array;function La(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,r=arguments.length;r--;)e+=t[r]*t[r];return Math.sqrt(e)}),Fa=new Va(3),Va!=Float32Array&&(Fa[0]=0,Fa[1]=0,Fa[2]=0),function(){var t=new Va(4);Va!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var Da=function(t){function e(e){t.call(this,e,Ta)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new va(t)},e.prototype.queryRadius=function(t){var e=t;return Ba("circle-radius",this,e)+Ba("circle-stroke-width",this,e)+Pa(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,a,o,s){for(var u=Ea(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),l=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r),p="map"===this.paint.get("circle-pitch-alignment"),c=p?u:function(t,e){return t.map((function(t){return Ua(t,e)}))}(u,s),h=p?l*o:l,f=0,y=n;f<y.length;f+=1)for(var d=0,m=y[f];d<m.length;d+=1){var v=m[d],g=p?v:Ua(v,s),x=h,b=La([],[v.x,v.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?x*=b[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(x*=a.cameraToCenterDistance/b[3]),xa(c,g,x))return!0}return!1},e}(ni);function Ua(t,e){var r=La([],[t.x,t.y,0,1],e);return new i(r[0]/r[3],r[1]/r[3])}var Ra=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(va);function ja(t,e,r,n){var i=e.width,a=e.height;if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==i*a*r)throw new RangeError("mismatched image size")}else n=new Uint8Array(i*a*r);return t.width=i,t.height=a,t.data=n,t}function qa(t,e,r){var n=e.width,i=e.height;if(n!==t.width||i!==t.height){var a=ja({},{width:n,height:i},r);Na(t,a,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,i)},r),t.width=n,t.height=i,t.data=a.data}}function Na(t,e,r,n,i,a){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((r.y+u)*t.width+r.x)*a,p=((n.y+u)*e.width+n.x)*a,c=0;c<i.width*a;c++)s[p+c]=o[l+c];return e}_n("HeatmapBucket",Ra,{omit:["layers"]});var Ka=function(t,e){ja(this,t,1,e)};Ka.prototype.resize=function(t){qa(this,t,1)},Ka.prototype.clone=function(){return new Ka({width:this.width,height:this.height},new Uint8Array(this.data))},Ka.copy=function(t,e,r,n,i){Na(t,e,r,n,i,1)};var Xa=function(t,e){ja(this,t,4,e)};Xa.prototype.resize=function(t){qa(this,t,4)},Xa.prototype.replace=function(t,e){e?this.data.set(t):t instanceof Uint8ClampedArray?this.data=new Uint8Array(t.buffer):this.data=t},Xa.prototype.clone=function(){return new Xa({width:this.width,height:this.height},new Uint8Array(this.data))},Xa.copy=function(t,e,r,n,i){Na(t,e,r,n,i,4)},_n("AlphaImage",Ka),_n("RGBAImage",Xa);var Za={paint:new ri({"heatmap-radius":new Wn(It.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Wn(It.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new $n(It.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ei(It.paint_heatmap["heatmap-color"]),"heatmap-opacity":new $n(It.paint_heatmap["heatmap-opacity"])})};function Ga(t,e){for(var r=new Uint8Array(1024),n={},i=0,a=0;i<256;i++,a+=4){n[e]=i/255;var o=t.evaluate(n);r[a+0]=Math.floor(255*o.r/o.a),r[a+1]=Math.floor(255*o.g/o.a),r[a+2]=Math.floor(255*o.b/o.a),r[a+3]=Math.floor(255*o.a)}return new Xa({width:256,height:1},r)}var Ja=function(t){function e(e){t.call(this,e,Za),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Ra(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Ga(t,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(ni),Ha={paint:new ri({"hillshade-illumination-direction":new $n(It.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new $n(It.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new $n(It.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new $n(It.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new $n(It.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new $n(It.paint_hillshade["hillshade-accent-color"])})},Ya=function(t){function e(e){t.call(this,e,Ha)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(ni),$a=si([{name:"a_pos",components:2,type:"Int16"}],4).members,Wa=to,Qa=to;function to(t,e,r){r=r||2;var n,i,a,o,s,u,l,p=e&&e.length,c=p?e[0]*r:t.length,h=eo(t,0,c,r,!0),f=[];if(!h||h.next===h.prev)return f;if(p&&(h=function(t,e,r,n){var i,a,u,l=[];for(i=0,a=e.length;i<a;i++)(u=eo(t,e[i]*n,i<a-1?e[i+1]*n:t.length,n,!1))===u.next&&(u.steiner=!0),l.push(ho(u));for(l.sort(uo),i=0;i<l.length;i++)lo(l[i],r),r=ro(r,r.next);return r}(t,e,h,r)),t.length>80*r){n=a=t[0],i=o=t[1];for(var y=r;y<c;y+=r)(s=t[y])<n&&(n=s),(u=t[y+1])<i&&(i=u),s>a&&(a=s),u>o&&(o=u);l=0!==(l=Math.max(a-n,o-i))?1/l:0}return no(h,f,r,n,i,l),f}function eo(t,e,r,n,i){var a,o;if(i===Io(t,e,r,n)>0)for(a=e;a<r;a+=n)o=Ao(a,t[a],t[a+1],o);else for(a=r-n;a>=e;a-=n)o=Ao(a,t[a],t[a+1],o);return o&&vo(o,o.next)&&(ko(o),o=o.next),o}function ro(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!vo(n,n.next)&&0!==mo(n.prev,n,n.next))n=n.next;else{if(ko(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function no(t,e,r,n,i,a,o){if(t){!o&&a&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=co(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,a,o,s,u,l=1;do{for(r=t,t=null,a=null,o=0;r;){for(o++,n=r,s=0,e=0;e<l&&(s++,n=n.nextZ);e++);for(u=l;s>0||u>0&&n;)0!==s&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;r=n}a.nextZ=null,l*=2}while(o>1)}(i)}(t,n,i,a);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,a?ao(t,n,i,a):io(t))e.push(s.i/r),e.push(t.i/r),e.push(u.i/r),ko(t),t=u.next,l=u.next;else if((t=u)===l){o?1===o?no(t=oo(ro(t),e,r),e,r,n,i,a,2):2===o&&so(t,e,r,n,i,a):no(ro(t),e,r,n,i,a,1);break}}}function io(t){var e=t.prev,r=t,n=t.next;if(mo(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(fo(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&mo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function ao(t,e,r,n){var i=t.prev,a=t,o=t.next;if(mo(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,p=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,c=co(s,u,e,r,n),h=co(l,p,e,r,n),f=t.prevZ,y=t.nextZ;f&&f.z>=c&&y&&y.z<=h;){if(f!==t.prev&&f!==t.next&&fo(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&mo(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,y!==t.prev&&y!==t.next&&fo(i.x,i.y,a.x,a.y,o.x,o.y,y.x,y.y)&&mo(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&fo(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&mo(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;y&&y.z<=h;){if(y!==t.prev&&y!==t.next&&fo(i.x,i.y,a.x,a.y,o.x,o.y,y.x,y.y)&&mo(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function oo(t,e,r){var n=t;do{var i=n.prev,a=n.next.next;!vo(i,a)&&go(i,n,n.next,a)&&_o(i,a)&&_o(a,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(a.i/r),ko(n),ko(n.next),n=t=a),n=n.next}while(n!==t);return ro(n)}function so(t,e,r,n,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&yo(o,s)){var u=wo(o,s);return o=ro(o,o.next),u=ro(u,u.next),no(o,e,r,n,i,a),void no(u,e,r,n,i,a)}s=s.next}o=o.next}while(o!==t)}function uo(t,e){return t.x-e.x}function lo(t,e){if(e=function(t,e){var r,n=e,i=t.x,a=t.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===o)return r;var u,l=r,p=r.x,c=r.y,h=1/0;n=r;do{i>=n.x&&n.x>=p&&i!==n.x&&fo(a<c?i:o,a,p,c,a<c?o:i,a,n.x,n.y)&&(u=Math.abs(a-n.y)/(i-n.x),_o(n,t)&&(u<h||u===h&&(n.x>r.x||n.x===r.x&&po(r,n)))&&(r=n,h=u)),n=n.next}while(n!==l);return r}(t,e)){var r=wo(e,t);ro(r,r.next)}}function po(t,e){return mo(t.prev,t,e.prev)<0&&mo(e.next,t,t.next)<0}function co(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ho(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function fo(t,e,r,n,i,a,o,s){return(i-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(n-s)-(r-o)*(e-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function yo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&go(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(_o(t,e)&&_o(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(mo(t.prev,t,e.prev)||mo(t,e.prev,e))||vo(t,e)&&mo(t.prev,t,t.next)>0&&mo(e.prev,e,e.next)>0)}function mo(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function vo(t,e){return t.x===e.x&&t.y===e.y}function go(t,e,r,n){var i=bo(mo(t,e,r)),a=bo(mo(t,e,n)),o=bo(mo(r,n,t)),s=bo(mo(r,n,e));return i!==a&&o!==s||!(0!==i||!xo(t,r,e))||!(0!==a||!xo(t,n,e))||!(0!==o||!xo(r,t,n))||!(0!==s||!xo(r,e,n))}function xo(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function bo(t){return t>0?1:t<0?-1:0}function _o(t,e){return mo(t.prev,t,t.next)<0?mo(t,e,t.next)>=0&&mo(t,t.prev,e)>=0:mo(t,e,t.prev)<0||mo(t,t.next,e)<0}function wo(t,e){var r=new So(t.i,t.x,t.y),n=new So(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function Ao(t,e,r,n){var i=new So(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function ko(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function So(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Io(t,e,r,n){for(var i=0,a=e,o=r-n;a<r;a+=n)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}function zo(t,e,r,n,i){!function t(e,r,n,i,a){for(;i>n;){if(i-n>600){var o=i-n+1,s=r-n+1,u=Math.log(o),l=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*l*(o-l)/o)*(s-o/2<0?-1:1);t(e,r,Math.max(n,Math.floor(r-s*l/o+p)),Math.min(i,Math.floor(r+(o-s)*l/o+p)),a)}var f=e[r],y=n,d=i;for(Co(e,n,r),a(e[i],f)>0&&Co(e,n,i);y<d;){for(Co(e,y,d),y++,d--;a(e[y],f)<0;)y++;for(;a(e[d],f)>0;)d--}0===a(e[n],f)?Co(e,n,d):Co(e,++d,i),d<=r&&(n=d+1),r<=d&&(i=d-1)}}(t,e,r||0,n||t.length-1,i||Bo)}function Co(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Bo(t,e){return t<e?-1:t>e?1:0}function Po(t,e){var r=t.length;if(r<=1)return[t];for(var n,i,a=[],o=0;o<r;o++){var s=k(t[o]);0!==s&&(t[o].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(n&&a.push(n),n=[t[o]]):n.push(t[o]))}if(n&&a.push(n),e>1)for(var u=0;u<a.length;u++)a[u].length<=e||(zo(a[u],e,1,a[u].length-1,Eo),a[u]=a[u].slice(0,e));return a}function Eo(t,e){return e.area-t.area}function Mo(t,e,r){for(var n=r.patternDependencies,i=!1,a=0,o=e;a<o.length;a+=1){var s=o[a].paint.get(t+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,n[u.to]=!0,n[u.from]=!0)}return i}function To(t,e,r,n,i){for(var a=i.patternDependencies,o=0,s=e;o<s.length;o+=1){var u=s[o],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var p=l.evaluate({zoom:n-1},r,{},i.availableImages),c=l.evaluate({zoom:n},r,{},i.availableImages),h=l.evaluate({zoom:n+1},r,{},i.availableImages);p=p&&p.name?p.name:p,c=c&&c.name?c.name:c,h=h&&h.name?h.name:h,a[p]=!0,a[c]=!0,a[h]=!0,r.patterns[u.id]={min:p,mid:c,max:h}}}return r}to.deviation=function(t,e,r,n){var i=e&&e.length,a=i?e[0]*r:t.length,o=Math.abs(Io(t,0,a,r));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*r,p=s<u-1?e[s+1]*r:t.length;o-=Math.abs(Io(t,l,p,r))}var c=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,f=n[s+1]*r,y=n[s+2]*r;c+=Math.abs((t[h]-t[y])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[y+1]-t[h+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},to.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<e;o++)r.vertices.push(t[i][a][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r},Wa.default=Qa;var Vo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new li,this.indexArray=new Si,this.indexArray2=new Ii,this.programConfigurations=new la($a,t.layers,t.zoom),this.segments=new Ni,this.segments2=new Ni,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Vo.prototype.populate=function(t,e){this.hasPattern=Mo("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),n=[],i=0,a=t;i<a.length;i+=1){var o=a[i],s=o.feature,u=o.index,l=o.sourceLayerIndex;if(this.layers[0]._featureFilter(new qn(this.zoom),s)){var p=da(s),c=r?r.evaluate(s,{},e.availableImages):void 0,h={id:s.id,properties:s.properties,type:s.type,sourceLayerIndex:l,index:u,geometry:p,patterns:{},sortKey:c};n.push(h)}}r&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var f=0,y=n;f<y.length;f+=1){var d=y[f],m=d,v=m.geometry,g=m.index,x=m.sourceLayerIndex;if(this.hasPattern){var b=To("fill",this.layers,d,this.zoom,e);this.patternFeatures.push(b)}else this.addFeature(d,v,g,{});var _=t[g].feature;e.featureIndex.insert(_,v,g,x,this.index)}},Vo.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Vo.prototype.addFeatures=function(t,e){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var i=n[r];this.addFeature(i,i.geometry,i.index,e)}},Vo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Vo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Vo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,$a),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Vo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Vo.prototype.addFeature=function(t,e,r,n){for(var i=0,a=Po(e,500);i<a.length;i+=1){for(var o=a[i],s=0,u=0,l=o;u<l.length;u+=1)s+=l[u].length;for(var p=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),c=p.vertexLength,h=[],f=[],y=0,d=o;y<d.length;y+=1){var m=d[y];if(0!==m.length){m!==o[0]&&f.push(h.length/2);var v=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),g=v.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(g+m.length-1,g),h.push(m[0].x),h.push(m[0].y);for(var x=1;x<m.length;x++)this.layoutVertexArray.emplaceBack(m[x].x,m[x].y),this.indexArray2.emplaceBack(g+x-1,g+x),h.push(m[x].x),h.push(m[x].y);v.vertexLength+=m.length,v.primitiveLength+=m.length}}for(var b=Wa(h,f),_=0;_<b.length;_+=3)this.indexArray.emplaceBack(c+b[_],c+b[_+1],c+b[_+2]);p.vertexLength+=s,p.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,n)},_n("FillBucket",Vo,{omit:["layers","patternFeatures"]});var Fo=new ri({"fill-sort-key":new Wn(It.layout_fill["fill-sort-key"])}),Oo={paint:new ri({"fill-antialias":new $n(It.paint_fill["fill-antialias"]),"fill-opacity":new Wn(It.paint_fill["fill-opacity"]),"fill-color":new Wn(It.paint_fill["fill-color"]),"fill-outline-color":new Wn(It.paint_fill["fill-outline-color"]),"fill-translate":new $n(It.paint_fill["fill-translate"]),"fill-translate-anchor":new $n(It.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qn(It.paint_fill["fill-pattern"])}),layout:Fo},Lo=function(t){function e(e){t.call(this,e,Oo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new Vo(t)},e.prototype.queryRadius=function(){return Pa(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,a,o){return ba(Ea(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),n)},e.prototype.isTileClipped=function(){return!0},e}(ni),Do=si([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Uo=Ro;function Ro(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(jo,this,e)}function jo(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function qo(t){for(var e,r,n=0,i=0,a=t.length,o=a-1;i<a;o=i++)e=t[i],n+=((r=t[o]).x-e.x)*(e.y+r.y);return n}Ro.types=["Unknown","Point","LineString","Polygon"],Ro.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,a=0,o=0,s=0,u=[];t.pos<r;){if(a<=0){var l=t.readVarint();n=7&l,a=l>>3}if(a--,1===n||2===n)o+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&u.push(e),e=[]),e.push(new i(o,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&u.push(e),u},Ro.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,a=0,o=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(n<=0){var p=t.readVarint();r=7&p,n=p>>3}if(n--,1===r||2===r)(i+=t.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=t.readSVarint())<u&&(u=a),a>l&&(l=a);else if(7!==r)throw new Error("unknown command "+r)}return[o,u,s,l]},Ro.prototype.toGeoJSON=function(t,e,r){var n,i,a=this.extent*Math.pow(2,r),o=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=Ro.types[this.type];function p(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+s)/a;t[e]=[360*(r.x+o)/a-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(n=0;n<u.length;n++)c[n]=u[n][0];p(u=c);break;case 2:for(n=0;n<u.length;n++)p(u[n]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],a=0;a<e;a++){var o=qo(t[a]);0!==o&&(void 0===n&&(n=o<0),n===o<0?(r&&i.push(r),r=[t[a]]):r.push(t[a]))}return r&&i.push(r),i}(u),n=0;n<u.length;n++)for(i=0;i<u[n].length;i++)p(u[n][i])}1===u.length?u=u[0]:l="Multi"+l;var h={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var No=Ko;function Ko(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Xo,this,e),this.length=this._features.length}function Xo(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(r))}function Zo(t,e,r){if(3===t){var n=new No(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}Ko.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Uo(this._pbf,e,this.extent,this._keys,this._values)};var Go={VectorTile:function(t,e){this.layers=t.readFields(Zo,{},e)},VectorTileFeature:Uo,VectorTileLayer:No},Jo=Go.VectorTileFeature.types,Ho=Math.pow(2,13);function Yo(t,e,r,n,i,a,o,s){t.emplaceBack(e,r,2*Math.floor(n*Ho)+o,i*Ho*2,a*Ho*2,Math.round(s))}var $o=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ci,this.indexArray=new Si,this.programConfigurations=new la(Do,t.layers,t.zoom),this.segments=new Ni,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Wo(t,e){return t.x===e.x&&(t.x<0||t.x>ha)||t.y===e.y&&(t.y<0||t.y>ha)}function Qo(t){return t.every((function(t){return t.x<0}))||t.every((function(t){return t.x>ha}))||t.every((function(t){return t.y<0}))||t.every((function(t){return t.y>ha}))}$o.prototype.populate=function(t,e){this.features=[],this.hasPattern=Mo("fill-extrusion",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new qn(this.zoom),a)){var u=da(a),l={sourceLayerIndex:s,index:o,geometry:u,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(l.id=a.id),this.hasPattern?this.features.push(To("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,u,o,{}),e.featureIndex.insert(a,u,o,s,this.index,!0)}}},$o.prototype.addFeatures=function(t,e){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],a=i.geometry;this.addFeature(i,a,i.index,e)}},$o.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},$o.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},$o.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},$o.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Do),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},$o.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},$o.prototype.addFeature=function(t,e,r,n){for(var i=0,a=Po(e,500);i<a.length;i+=1){for(var o=a[i],s=0,u=0,l=o;u<l.length;u+=1)s+=l[u].length;for(var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),c=0,h=o;c<h.length;c+=1){var f=h[c];if(0!==f.length&&!Qo(f))for(var y=0,d=0;d<f.length;d++){var m=f[d];if(d>=1){var v=f[d-1];if(!Wo(m,v)){p.vertexLength+4>Ni.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var g=m.sub(v)._perp()._unit(),x=v.dist(m);y+x>32768&&(y=0),Yo(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,0,y),Yo(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,1,y),y+=x,Yo(this.layoutVertexArray,v.x,v.y,g.x,g.y,0,0,y),Yo(this.layoutVertexArray,v.x,v.y,g.x,g.y,0,1,y);var b=p.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),p.vertexLength+=4,p.primitiveLength+=2}}}}if(p.vertexLength+s>Ni.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray)),"Polygon"===Jo[t.type]){for(var _=[],w=[],A=p.vertexLength,k=0,S=o;k<S.length;k+=1){var I=S[k];if(0!==I.length){I!==o[0]&&w.push(_.length/2);for(var z=0;z<I.length;z++){var C=I[z];Yo(this.layoutVertexArray,C.x,C.y,0,0,1,1,0),_.push(C.x),_.push(C.y)}}}for(var B=Wa(_,w),P=0;P<B.length;P+=3)this.indexArray.emplaceBack(A+B[P],A+B[P+2],A+B[P+1]);p.primitiveLength+=B.length/3,p.vertexLength+=s}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,n)},_n("FillExtrusionBucket",$o,{omit:["layers","features"]});var ts={paint:new ri({"fill-extrusion-opacity":new $n(It["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Wn(It["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new $n(It["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new $n(It["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qn(It["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Wn(It["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Wn(It["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new $n(It["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},es=function(t){function e(e){t.call(this,e,ts)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new $o(t)},e.prototype.queryRadius=function(){return Pa(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,r,n,a,o,s,u){var l=Ea(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),p=this.paint.get("fill-extrusion-height").evaluate(e,r),c=this.paint.get("fill-extrusion-base").evaluate(e,r),h=function(t,e,r,n){for(var a=[],o=0,s=t;o<s.length;o+=1){var u=s[o],l=[u.x,u.y,0,1];La(l,l,e),a.push(new i(l[0]/l[3],l[1]/l[3]))}return a}(l,u),f=function(t,e,r,n){for(var a=[],o=[],s=n[8]*e,u=n[9]*e,l=n[10]*e,p=n[11]*e,c=n[8]*r,h=n[9]*r,f=n[10]*r,y=n[11]*r,d=0,m=t;d<m.length;d+=1){for(var g=[],x=[],b=0,_=m[d];b<_.length;b+=1){var w=_[b],A=w.x,k=w.y,S=n[0]*A+n[4]*k+n[12],I=n[1]*A+n[5]*k+n[13],z=n[2]*A+n[6]*k+n[14],C=n[3]*A+n[7]*k+n[15],B=z+l,P=C+p,E=S+c,M=I+h,T=z+f,V=C+y,F=new i((S+s)/P,(I+u)/P);F.z=B/P,g.push(F);var O=new i(E/V,M/V);O.z=T/V,x.push(O)}a.push(g),o.push(x)}return[a,o]}(n,c,p,u);return function(t,e,r){var n=1/0;ba(r,e)&&(n=ns(r,e[0]));for(var i=0;i<e.length;i++)for(var a=e[i],o=t[i],s=0;s<a.length-1;s++){var u=a[s],l=a[s+1],p=o[s],h=[u,l,o[s+1],p,u];ga(r,h)&&(n=Math.min(n,ns(r,h)))}return n!==1/0&&n}(f[0],f[1],h)},e}(ni);function rs(t,e){return t.x*e.x+t.y*e.y}function ns(t,e){if(1===t.length){var r=e[0],n=e[1],i=e[3],a=t[0],o=n.sub(r),s=i.sub(r),u=a.sub(r),l=rs(o,o),p=rs(o,s),c=rs(s,s),h=rs(u,o),f=rs(u,s),y=l*c-p*p,d=(c*h-p*f)/y,m=(l*f-p*h)/y,v=1-d-m;return r.z*v+n.z*d+i.z*m}for(var g=1/0,x=0,b=e;x<b.length;x+=1){var _=b[x];g=Math.min(g,_.z)}return g}var is=si([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,as=Go.VectorTileFeature.types,os=Math.cos(Math.PI/180*37.5),ss=Math.pow(2,14)/.5,us=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new hi,this.indexArray=new Si,this.programConfigurations=new la(is,t.layers,t.zoom),this.segments=new Ni,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};us.prototype.populate=function(t,e){this.hasPattern=Mo("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),n=[],i=0,a=t;i<a.length;i+=1){var o=a[i],s=o.feature,u=o.index,l=o.sourceLayerIndex;if(this.layers[0]._featureFilter(new qn(this.zoom),s)){var p=da(s),c=r?r.evaluate(s,{}):void 0,h={id:s.id,properties:s.properties,type:s.type,sourceLayerIndex:l,index:u,geometry:p,patterns:{},sortKey:c};n.push(h)}}r&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var f=0,y=n;f<y.length;f+=1){var d=y[f],m=d,v=m.geometry,g=m.index,x=m.sourceLayerIndex;if(this.hasPattern){var b=To("line",this.layers,d,this.zoom,e);this.patternFeatures.push(b)}else this.addFeature(d,v,g,{});var _=t[g].feature;e.featureIndex.insert(_,v,g,x,this.index)}},us.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},us.prototype.addFeatures=function(t,e){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var i=n[r];this.addFeature(i,i.geometry,i.index,e)}},us.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},us.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},us.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,is),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},us.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},us.prototype.addFeature=function(t,e,r,n){for(var i=this.layers[0].layout,a=i.get("line-join").evaluate(t,{}),o=i.get("line-cap"),s=i.get("line-miter-limit"),u=i.get("line-round-limit"),l=0,p=e;l<p.length;l+=1){var c=p[l];this.addLine(c,t,a,o,s,u,r,n)}},us.prototype.addLine=function(t,e,r,n,i,a,o,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties.mapbox_clip_start,this.clipEnd=+e.properties.mapbox_clip_end;for(var u=0;u<t.length-1;u++)this.totalDistance+=t[u].dist(t[u+1])}for(var l="Polygon"===as[e.type],p=t.length;p>=2&&t[p-1].equals(t[p-2]);)p--;for(var c=0;c<p-1&&t[c].equals(t[c+1]);)c++;if(!(p<(l?3:2))){"bevel"===r&&(i=1.05);var h,f=ha/(512*this.overscaling)*15,y=this.segments.prepareSegment(10*p,this.layoutVertexArray,this.indexArray),d=void 0,m=void 0,v=void 0,g=void 0;this.e1=this.e2=-1,l&&(h=t[p-2],g=t[c].sub(h)._unit()._perp());for(var x=c;x<p;x++)if(!(m=l&&x===p-1?t[c+1]:t[x+1])||!t[x].equals(m)){g&&(v=g),h&&(d=h),h=t[x],g=m?m.sub(h)._unit()._perp():v;var b=(v=v||g).add(g);0===b.x&&0===b.y||b._unit();var _=v.x*g.x+v.y*g.y,w=b.x*g.x+b.y*g.y,A=0!==w?1/w:1/0,k=2*Math.sqrt(2-2*w),S=w<os&&d&&m,I=v.x*g.y-v.y*g.x>0;if(S&&x>c){var z=h.dist(d);if(z>2*f){var C=h.sub(h.sub(d)._mult(f/z)._round());this.updateDistance(d,C),this.addCurrentVertex(C,v,0,0,y),d=C}}var B=d&&m,P=B?r:l?"butt":n;if(B&&"round"===P&&(A<a?P="miter":A<=2&&(P="fakeround")),"miter"===P&&A>i&&(P="bevel"),"bevel"===P&&(A>2&&(P="flipbevel"),A<i&&(P="miter")),d&&this.updateDistance(d,h),"miter"===P)b._mult(A),this.addCurrentVertex(h,b,0,0,y);else if("flipbevel"===P){if(A>100)b=g.mult(-1);else{var E=A*v.add(g).mag()/v.sub(g).mag();b._perp()._mult(E*(I?-1:1))}this.addCurrentVertex(h,b,0,0,y),this.addCurrentVertex(h,b.mult(-1),0,0,y)}else if("bevel"===P||"fakeround"===P){var M=-Math.sqrt(A*A-1),T=I?M:0,V=I?0:M;if(d&&this.addCurrentVertex(h,v,T,V,y),"fakeround"===P)for(var F=Math.round(180*k/Math.PI/20),O=1;O<F;O++){var L=O/F;if(.5!==L){var D=L-.5;L+=L*D*(L-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*D*D+(.848013+_*(.215638*_-1.06021)))}var U=g.sub(v)._mult(L)._add(v)._unit()._mult(I?-1:1);this.addHalfVertex(h,U.x,U.y,!1,I,0,y)}m&&this.addCurrentVertex(h,g,-T,-V,y)}else if("butt"===P)this.addCurrentVertex(h,b,0,0,y);else if("square"===P){var R=d?1:-1;this.addCurrentVertex(h,b,R,R,y)}else"round"===P&&(d&&(this.addCurrentVertex(h,v,0,0,y),this.addCurrentVertex(h,v,1,1,y,!0)),m&&(this.addCurrentVertex(h,g,-1,-1,y,!0),this.addCurrentVertex(h,g,0,0,y)));if(S&&x<p-1){var j=h.dist(m);if(j>2*f){var q=h.add(m.sub(h)._mult(f/j)._round());this.updateDistance(h,q),this.addCurrentVertex(q,g,0,0,y),h=q}}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,s)}},us.prototype.addCurrentVertex=function(t,e,r,n,i,a){void 0===a&&(a=!1);var o=e.x+e.y*r,s=e.y-e.x*r,u=-e.x+e.y*n,l=-e.y-e.x*n;this.addHalfVertex(t,o,s,a,!1,r,i),this.addHalfVertex(t,u,l,a,!0,-n,i),this.distance>ss/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,r,n,i,a))},us.prototype.addHalfVertex=function(t,e,r,n,i,a,o){var s=t.x,u=t.y,l=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((s<<1)+(n?1:0),(u<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1)|(63&l)<<2,l>>6);var p=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,p),o.primitiveLength++),i?this.e2=p:this.e1=p},us.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(ss-1):this.distance},_n("LineBucket",us,{omit:["layers","patternFeatures"]});var ls=new ri({"line-cap":new $n(It.layout_line["line-cap"]),"line-join":new Wn(It.layout_line["line-join"]),"line-miter-limit":new $n(It.layout_line["line-miter-limit"]),"line-round-limit":new $n(It.layout_line["line-round-limit"]),"line-sort-key":new Wn(It.layout_line["line-sort-key"])}),ps={paint:new ri({"line-opacity":new Wn(It.paint_line["line-opacity"]),"line-color":new Wn(It.paint_line["line-color"]),"line-translate":new $n(It.paint_line["line-translate"]),"line-translate-anchor":new $n(It.paint_line["line-translate-anchor"]),"line-width":new Wn(It.paint_line["line-width"]),"line-gap-width":new Wn(It.paint_line["line-gap-width"]),"line-offset":new Wn(It.paint_line["line-offset"]),"line-blur":new Wn(It.paint_line["line-blur"]),"line-dasharray":new ti(It.paint_line["line-dasharray"]),"line-pattern":new Qn(It.paint_line["line-pattern"]),"line-gradient":new ei(It.paint_line["line-gradient"])}),layout:ls},cs=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,r){return r=new qn(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),t.prototype.possiblyEvaluate.call(this,e,r)},e.prototype.evaluate=function(e,r,n,i){return r=c({},r,{zoom:Math.floor(r.zoom)}),t.prototype.evaluate.call(this,e,r,n,i)},e}(Wn))(ps.paint.properties["line-width"].specification);cs.useIntegerZoom=!0;var hs=function(t){function e(e){t.call(this,e,ps)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Ga(t,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r),this.paint._values["line-floorwidth"]=cs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new us(t)},e.prototype.queryRadius=function(t){var e=t,r=fs(Ba("line-width",this,e),Ba("line-gap-width",this,e)),n=Ba("line-offset",this,e);return r/2+Math.abs(n)+Pa(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,a,o,s){var u=Ea(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),l=s/2*fs(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),p=this.paint.get("line-offset").evaluate(e,r);return p&&(n=function(t,e){for(var r=[],n=new i(0,0),a=0;a<t.length;a++){for(var o=t[a],s=[],u=0;u<o.length;u++){var l=o[u-1],p=o[u],c=o[u+1],h=0===u?n:p.sub(l)._unit()._perp(),f=u===o.length-1?n:c.sub(p)._unit()._perp(),y=h._add(f)._unit(),d=y.x*f.x+y.y*f.y;y._mult(1/d),s.push(y._mult(e)._add(p))}r.push(s)}return r}(n,p*s)),function(t,e,r){for(var n=0;n<e.length;n++){var i=e[n];if(t.length>=3)for(var a=0;a<i.length;a++)if(za(t,i[a]))return!0;if(_a(t,i,r))return!0}return!1}(u,n,l)},e.prototype.isTileClipped=function(){return!0},e}(ni);function fs(t,e){return e>0?e+2*t:t}var ys=si([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),ds=si([{name:"a_projected_pos",components:3,type:"Float32"}],4),ms=(si([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),si([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),vs=(si([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),si([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),gs=si([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function xs(t,e,r){return t.sections.forEach((function(t){t.text=function(t,e,r){var n=e.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),jn.applyArabicShaping&&(t=jn.applyArabicShaping(t)),t}(t.text,e,r)})),t}si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"}]),si([{type:"Float32",name:"offsetX"}]),si([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var bs={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},_s=24,ws={horizontal:1,vertical:2,horizontalOnly:3},As=function(){this.text="",this.sectionIndex=[],this.sections=[]};function ks(t,e,r,n,i,a,o,s,u,l,p,c){var h,f=As.fromFeature(t,r);l===ws.vertical&&f.verticalizePunctuation();var y=jn.processBidirectionalText,d=jn.processStyledBidirectionalText;if(y&&1===f.sections.length){h=[];for(var m=0,v=y(f.toString(),Ps(f,s,n,e,c));m<v.length;m+=1){var g=v[m],x=new As;x.text=g,x.sections=f.sections;for(var b=0;b<g.length;b++)x.sectionIndex.push(0);h.push(x)}}else if(d){h=[];for(var _=0,w=d(f.text,f.sectionIndex,Ps(f,s,n,e,c));_<w.length;_+=1){var A=w[_],k=new As;k.text=A[0],k.sectionIndex=A[1],k.sections=f.sections,h.push(k)}}else h=function(t,e){for(var r=[],n=t.text,i=0,a=0,o=e;a<o.length;a+=1){var s=o[a];r.push(t.substring(i,s)),i=s}return i<n.length&&r.push(t.substring(i,n.length)),r}(f,Ps(f,s,n,e,c));var S=[],I={positionedGlyphs:S,text:f.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:l,lineCount:h.length,yOffset:-17};return function(t,e,r,n,i,a,o,s,u){for(var l=0,p=t.yOffset,c=0,h=t.positionedGlyphs,f="right"===a?1:"left"===a?0:.5,y=0,d=r;y<d.length;y+=1){var m=d[y];m.trim();var v=m.getMaxScale();if(m.length()){for(var g=h.length,x=0;x<m.length();x++){var b=m.getSection(x),_=m.getSectionIndex(x),w=m.getCharCode(x),A=24*(v-b.scale),k=e[b.fontStack],S=k&&k[w];S&&(o===ws.horizontal||!u&&!Pn(w)||u&&(Ss[w]||(z=w,zn.Arabic(z)||zn["Arabic Supplement"](z)||zn["Arabic Extended-A"](z)||zn["Arabic Presentation Forms-A"](z)||zn["Arabic Presentation Forms-B"](z)))?(h.push({glyph:w,x:l,y:p+A,vertical:!1,scale:b.scale,fontStack:b.fontStack,sectionIndex:_}),l+=S.metrics.advance*b.scale+s):(h.push({glyph:w,x:l,y:p+A,vertical:!0,scale:b.scale,fontStack:b.fontStack,sectionIndex:_}),l+=_s*b.scale+s))}if(h.length!==g){var I=l-s;c=Math.max(I,c),Ms(h,e,g,h.length-1,f)}l=0,p+=n*v}else p+=n}var z,C=Es(i),B=C.horizontalAlign,P=C.verticalAlign;!function(t,e,r,n,i,a,o){for(var s=(e-r)*i,u=(-n*o+.5)*a,l=0;l<t.length;l++)t[l].x+=s,t[l].y+=u}(h,f,B,P,c,n,r.length);var E=p-t.yOffset;t.top+=-P*E,t.bottom=t.top+E,t.left+=-B*c,t.right=t.left+c}(I,e,h,i,a,o,l,s,p),!!S.length&&I}As.fromFeature=function(t,e){for(var r=new As,n=0;n<t.sections.length;n++){var i=t.sections[n];r.sections.push({scale:i.scale||1,fontStack:i.fontStack||e}),r.text+=i.text;for(var a=0;a<i.text.length;a++)r.sectionIndex.push(n)}return r},As.prototype.length=function(){return this.text.length},As.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},As.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},As.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},As.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r+1)||null,i=t.charCodeAt(r-1)||null;n&&En(n)&&!bs[t[r+1]]||i&&En(i)&&!bs[t[r-1]]||!bs[t[r]]?e+=t[r]:e+=bs[t[r]]}return e}(this.text)},As.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Ss[this.text.charCodeAt(e)];e++)t++;for(var r=this.text.length,n=this.text.length-1;n>=0&&n>=t&&Ss[this.text.charCodeAt(n)];n--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)},As.prototype.substring=function(t,e){var r=new As;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r},As.prototype.toString=function(){return this.text},As.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,r){return Math.max(e,t.sections[r].scale)}),0)};var Ss={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Is={};function zs(t,e,r,n){var i=Math.pow(t-e,2);return n?t<e?i/2:2*i:i+Math.abs(r)*r}function Cs(t,e,r){var n=0;return 10===t&&(n-=1e4),r&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Bs(t,e,r,n,i,a){for(var o=null,s=zs(e,r,i,a),u=0,l=n;u<l.length;u+=1){var p=l[u],c=zs(e-p.x,r,i,a)+p.badness;c<=s&&(o=p,s=c)}return{index:t,x:e,priorBreak:o,badness:s}}function Ps(t,e,r,n,i){if("point"!==i)return[];if(!t)return[];for(var a,o=[],s=function(t,e,r,n){for(var i=0,a=0;a<t.length();a++){var o=t.getSection(a),s=n[o.fontStack],u=s&&s[t.getCharCode(a)];u&&(i+=u.metrics.advance*o.scale+e)}return i/Math.max(1,Math.ceil(i/r))}(t,e,r,n),u=t.text.indexOf("")>=0,l=0,p=0;p<t.length();p++){var c=t.getSection(p),h=t.getCharCode(p),f=n[c.fontStack],y=f&&f[h];if(y&&!Ss[h]&&(l+=y.metrics.advance*c.scale+e),p<t.length()-1){var d=!((a=h)<11904||!(zn["Bopomofo Extended"](a)||zn.Bopomofo(a)||zn["CJK Compatibility Forms"](a)||zn["CJK Compatibility Ideographs"](a)||zn["CJK Compatibility"](a)||zn["CJK Radicals Supplement"](a)||zn["CJK Strokes"](a)||zn["CJK Symbols and Punctuation"](a)||zn["CJK Unified Ideographs Extension A"](a)||zn["CJK Unified Ideographs"](a)||zn["Enclosed CJK Letters and Months"](a)||zn["Halfwidth and Fullwidth Forms"](a)||zn.Hiragana(a)||zn["Ideographic Description Characters"](a)||zn["Kangxi Radicals"](a)||zn["Katakana Phonetic Extensions"](a)||zn.Katakana(a)||zn["Vertical Forms"](a)||zn["Yi Radicals"](a)||zn["Yi Syllables"](a)));(Is[h]||d)&&o.push(Bs(p+1,l,s,o,Cs(h,t.getCharCode(p+1),d&&u),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Bs(t.length(),l,s,o,0,!0))}function Es(t){var e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Ms(t,e,r,n,i){if(i){var a=t[n],o=e[a.fontStack],s=o&&o[a.glyph];if(s)for(var u=s.metrics.advance*a.scale,l=(t[n].x+u)*i,p=r;p<=n;p++)t[p].x-=l}}function Ts(t,e,r,n,i,a){var o,s,u,l,p=t.image,c=e.left*a,h=e.right*a;"width"===r||"both"===r?(l=i[0]+c-n[3],s=i[0]+h+n[1]):s=(l=i[0]+(c+h-p.displaySize[0])/2)+p.displaySize[0];var f=e.top*a,y=e.bottom*a;return"height"===r||"both"===r?(o=i[1]+f-n[0],u=i[1]+y+n[2]):u=(o=i[1]+(f+y-p.displaySize[1])/2)+p.displaySize[1],{image:p,top:o,right:s,bottom:u,left:l}}Is[10]=!0,Is[32]=!0,Is[38]=!0,Is[40]=!0,Is[41]=!0,Is[43]=!0,Is[45]=!0,Is[47]=!0,Is[173]=!0,Is[183]=!0,Is[8203]=!0,Is[8208]=!0,Is[8211]=!0,Is[8231]=!0;var Vs=function(t){function e(e,r,n,i){t.call(this,e,r),this.angle=n,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);_n("Anchor",Vs);var Fs=256;function Os(t,e){var r=e.expression;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new qn(t+1))};if("source"===r.kind)return{kind:"source"};for(var n=r.zoomStops,i=r.interpolationType,a=0;a<n.length&&n[a]<=t;)a++;for(var o=a=Math.max(0,a-1);o<n.length&&n[o]<t+1;)o++;o=Math.min(n.length-1,o);var s=n[a],u=n[o];return"composite"===r.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:u,minSize:r.evaluate(new qn(s)),maxSize:r.evaluate(new qn(u)),interpolationType:i}}function Ls(t,e,r){var n=e.uSize,i=e.uSizeT,a=r.lowerSize,o=r.upperSize;return"source"===t.kind?a/Fs:"composite"===t.kind?Se(a/Fs,o/Fs,i):n}function Ds(t,e){var r=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType,a=t.minZoom,o=t.maxZoom,s=i?l(Ze.interpolationFactor(i,e,a,o),0,1):0;"camera"===t.kind?n=Se(t.minSize,t.maxSize,s):r=s}return{uSizeT:r,uSize:n}}var Us=Object.freeze({__proto__:null,getSizeData:Os,evaluateSizeForFeature:Ls,evaluateSizeForZoom:Ds,SIZE_PACK_FACTOR:Fs}),Rs=Go.VectorTileFeature.types,js=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function qs(t,e,r,n,i,a,o,s){t.emplaceBack(e,r,Math.round(32*n),Math.round(32*i),a,o,s?s[0]:0,s?s[1]:0)}function Ns(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r)}var Ks=function(t){this.layoutVertexArray=new yi,this.indexArray=new Si,this.programConfigurations=t,this.segments=new Ni,this.dynamicLayoutVertexArray=new di,this.opacityVertexArray=new mi,this.placedSymbolArray=new Ti};Ks.prototype.upload=function(t,e,r,n){r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ys.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,ds.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,js,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(t)},Ks.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},_n("SymbolBuffers",Ks);var Xs=function(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new Ni,this.collisionVertexArray=new xi};Xs.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,ms.members,!0)},Xs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},_n("CollisionBuffers",Xs);var Zs=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasPaintOverrides=!1;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Os(this.zoom,e["text-size"]),this.iconSizeData=Os(this.zoom,e["icon-size"]);var r=this.layers[0].layout,n=r.get("symbol-sort-key"),i=r.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==n.constantOr(1);var a="viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey;this.sortFeaturesByY=a&&(r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")),"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((function(t){return ws[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};Zs.prototype.createArrays=function(){var t=this.layers[0].layout;this.hasPaintOverrides=Ys.hasPaintOverrides(t),this.text=new Ks(new la(ys.members,this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new Ks(new la(ys.members,this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.textCollisionBox=new Xs(gi,vs.members,Ii),this.iconCollisionBox=new Xs(gi,vs.members,Ii),this.textCollisionCircle=new Xs(gi,gs.members,Si),this.iconCollisionCircle=new Xs(gi,gs.members,Si),this.glyphOffsetArray=new Li,this.lineVertexArray=new Ui,this.symbolInstances=new Fi},Zs.prototype.calculateGlyphDependencies=function(t,e,r,n,i){for(var a=0;a<t.length;a++)if(e[t.charCodeAt(a)]=!0,(r||n)&&i){var o=bs[t.charAt(a)];o&&(e[o.charCodeAt(0)]=!0)}},Zs.prototype.populate=function(t,e){var r=this.layers[0],n=r.layout,i=n.get("text-font"),a=n.get("text-field"),o=n.get("icon-image"),s=("constant"!==a.value.kind||a.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u=("constant"!==o.value.kind||!!o.value.value)&&Object.keys(o.parameters).length>0,l=n.get("symbol-sort-key");if(this.features=[],s||u){for(var p=e.iconDependencies,c=e.glyphDependencies,h=e.availableImages,f=new qn(this.zoom),y=0,d=t;y<d.length;y+=1){var m=d[y],v=m.feature,g=m.index,x=m.sourceLayerIndex;if(r._featureFilter(f,v)){var b=void 0;if(s){var _=r.getValueAndResolveTokens("text-field",v,h);b=xs(_ instanceof Qt?_:Qt.fromString(_),r,v)}var w=void 0;if(u){var A=r.getValueAndResolveTokens("icon-image",v,h);w=A instanceof te?A:te.fromString(A)}if(b||w){var k=this.sortFeaturesByKey?l.evaluate(v,{}):void 0,S={text:b,icon:w,index:g,sourceLayerIndex:x,geometry:da(v),properties:v.properties,type:Rs[v.type],sortKey:k};if(void 0!==v.id&&(S.id=v.id),this.features.push(S),w&&(p[w.name]=!0),b){var I=i.evaluate(v,{}).join(","),z="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ws.vertical)>=0;for(var C=0,B=b.sections;C<B.length;C+=1){var P=B[C],E=Cn(b.toString()),M=P.fontStack||I,T=c[M]=c[M]||{};this.calculateGlyphDependencies(P.text,T,z,this.allowVerticalPlacement,E)}}}}}"line"===n.get("symbol-placement")&&(this.features=function(t){var e={},r={},n=[],i=0;function a(e){n.push(t[e]),i++}function o(t,e,i){var a=r[t];return delete r[t],r[e]=a,n[a].geometry[0].pop(),n[a].geometry[0]=n[a].geometry[0].concat(i[0]),a}function s(t,r,i){var a=e[r];return delete e[r],e[t]=a,n[a].geometry[0].shift(),n[a].geometry[0]=i[0].concat(n[a].geometry[0]),a}function u(t,e,r){var n=r?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}for(var l=0;l<t.length;l++){var p=t[l],c=p.geometry,h=p.text?p.text.toString():null;if(h){var f=u(h,c),y=u(h,c,!0);if(f in r&&y in e&&r[f]!==e[y]){var d=s(f,y,c),m=o(f,y,n[d].geometry);delete e[f],delete r[y],r[u(h,n[m].geometry,!0)]=m,n[d].geometry=null}else f in r?o(f,y,c):y in e?s(f,y,c):(a(l),e[f]=i-1,r[y]=i-1)}else a(l)}return n.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},Zs.prototype.update=function(t,e,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r))},Zs.prototype.isEmpty=function(){return 0===this.symbolInstances.length},Zs.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Zs.prototype.upload=function(t){this.uploaded||(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t),this.textCollisionCircle.upload(t),this.iconCollisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Zs.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.textCollisionBox.destroy(),this.iconCollisionBox.destroy(),this.textCollisionCircle.destroy(),this.iconCollisionCircle.destroy()},Zs.prototype.addToLineVertexArray=function(t,e){var r=this.lineVertexArray.length;if(void 0!==t.segment){for(var n=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),a={},o=t.segment+1;o<e.length;o++)a[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:n},o<e.length-1&&(n+=e[o+1].dist(e[o]));for(var s=t.segment||0;s>=0;s--)a[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=a[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},Zs.prototype.addSymbols=function(t,e,r,n,i,a,o,s,u,l,p){var c=this,h=t.indexArray,f=t.layoutVertexArray,y=t.dynamicLayoutVertexArray,d=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray,a.sortKey),m=this.glyphOffsetArray.length,v=d.vertexLength,g=this.allowVerticalPlacement&&o===ws.vertical?Math.PI/2:0,x=function(t){var e=t.tl,n=t.tr,i=t.bl,a=t.br,o=t.tex,u=d.vertexLength,l=t.glyphOffset[1];qs(f,s.x,s.y,e.x,l+e.y,o.x,o.y,r),qs(f,s.x,s.y,n.x,l+n.y,o.x+o.w,o.y,r),qs(f,s.x,s.y,i.x,l+i.y,o.x,o.y+o.h,r),qs(f,s.x,s.y,a.x,l+a.y,o.x+o.w,o.y+o.h,r),Ns(y,s,g),h.emplaceBack(u,u+1,u+2),h.emplaceBack(u+1,u+2,u+3),d.vertexLength+=4,d.primitiveLength+=2,c.glyphOffsetArray.emplaceBack(t.glyphOffset[0])};if(a.text&&a.text.sections){var b=a.text.sections;if(this.hasPaintOverrides){for(var _,w=function(e,r){void 0===_||_===e&&!r||t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,a,a.index,{},b[_]),_=e},A=0,k=e;A<k.length;A+=1){var S=k[A];w(S.sectionIndex,!1),x(S)}w(_,!0)}else{for(var I=0,z=e;I<z.length;I+=1)x(z[I]);t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,a,a.index,{},b[0])}}else{for(var C=0,B=e;C<B.length;C+=1)x(B[C]);t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,a,a.index,{})}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,v,u,l,s.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],o,0,!1,0,p)},Zs.prototype._addCollisionDebugVertex=function(t,e,r,n,i,a){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,n,i,Math.round(a.x),Math.round(a.y))},Zs.prototype.addCollisionDebugVertices=function(t,e,r,n,a,o,s,u){var l=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),p=l.vertexLength,c=a.layoutVertexArray,h=a.collisionVertexArray,f=s.anchorX,y=s.anchorY;if(this._addCollisionDebugVertex(c,h,o,f,y,new i(t,e)),this._addCollisionDebugVertex(c,h,o,f,y,new i(r,e)),this._addCollisionDebugVertex(c,h,o,f,y,new i(r,n)),this._addCollisionDebugVertex(c,h,o,f,y,new i(t,n)),l.vertexLength+=4,u){var d=a.indexArray;d.emplaceBack(p,p+1,p+2),d.emplaceBack(p,p+2,p+3),l.primitiveLength+=2}else{var m=a.indexArray;m.emplaceBack(p,p+1),m.emplaceBack(p+1,p+2),m.emplaceBack(p+2,p+3),m.emplaceBack(p+3,p),l.primitiveLength+=4}},Zs.prototype.addDebugCollisionBoxes=function(t,e,r,n){for(var i=t;i<e;i++){var a=this.collisionBoxArray.get(i),o=a.x1,s=a.y1,u=a.x2,l=a.y2,p=a.radius>0;this.addCollisionDebugVertices(o,s,u,l,p?n?this.textCollisionCircle:this.iconCollisionCircle:n?this.textCollisionBox:this.iconCollisionBox,a.anchorPoint,r,p)}},Zs.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},Zs.prototype._deserializeCollisionBoxesForSymbol=function(t,e,r,n,i,a,o,s,u){for(var l={},p=e;p<r;p++){var c=t.get(p);if(0===c.radius){l.textBox={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,anchorPointX:c.anchorPointX,anchorPointY:c.anchorPointY},l.textFeatureIndex=c.featureIndex;break}l.textCircles||(l.textCircles=[],l.textFeatureIndex=c.featureIndex),l.textCircles.push(c.anchorPointX,c.anchorPointY,c.radius,c.signedDistanceFromAnchor,1)}for(var h=n;h<i;h++){var f=t.get(h);if(0===f.radius){l.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},l.verticalTextFeatureIndex=f.featureIndex;break}}for(var y=a;y<o;y++){var d=t.get(y);if(0===d.radius){l.iconBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},l.iconFeatureIndex=d.featureIndex;break}}for(var m=s;m<u;m++){var v=t.get(m);if(0===v.radius){l.verticalIconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},l.verticalIconFeatureIndex=v.featureIndex;break}}return l},Zs.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}},Zs.prototype.hasTextData=function(){return this.text.segments.get().length>0},Zs.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Zs.prototype.hasTextCollisionBoxData=function(){return this.textCollisionBox.segments.get().length>0},Zs.prototype.hasIconCollisionBoxData=function(){return this.iconCollisionBox.segments.get().length>0},Zs.prototype.hasTextCollisionCircleData=function(){return this.textCollisionCircle.segments.get().length>0},Zs.prototype.hasIconCollisionCircleData=function(){return this.iconCollisionCircle.segments.get().length>0},Zs.prototype.addIndicesForPlacedTextSymbol=function(t){for(var e=this.text.placedSymbolArray.get(t),r=e.vertexStartIndex+4*e.numGlyphs,n=e.vertexStartIndex;n<r;n+=4)this.text.indexArray.emplaceBack(n,n+1,n+2),this.text.indexArray.emplaceBack(n+1,n+2,n+3)},Zs.prototype.addIndicesForPlacedIconSymbol=function(t){var e=this.icon.placedSymbolArray.get(t);if(e.numGlyphs){var r=e.vertexStartIndex;this.icon.indexArray.emplaceBack(r,r+1,r+2),this.icon.indexArray.emplaceBack(r+1,r+2,r+3)}},Zs.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),r=Math.cos(t),n=[],i=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);n.push(0|Math.round(e*s.anchorX+r*s.anchorY)),i.push(s.featureIndex)}return a.sort((function(t,e){return n[t]-n[e]||i[e]-i[t]})),a},Zs.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var r=0,n=this.symbolInstanceIndexes;r<n.length;r+=1){var i=n[r],a=this.symbolInstances.get(i);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(t,r,n){t>=0&&n.indexOf(t)===r&&e.addIndicesForPlacedTextSymbol(t)})),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedIconSymbol(a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedIconSymbol(a.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},_n("SymbolBucket",Zs,{omit:["layers","collisionBoxArray","features","compareText"]}),Zs.MAX_GLYPHS=65535,Zs.addDynamicAttributes=Ns;var Gs=new ri({"symbol-placement":new $n(It.layout_symbol["symbol-placement"]),"symbol-spacing":new $n(It.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new $n(It.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Wn(It.layout_symbol["symbol-sort-key"]),"symbol-z-order":new $n(It.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new $n(It.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new $n(It.layout_symbol["icon-ignore-placement"]),"icon-optional":new $n(It.layout_symbol["icon-optional"]),"icon-rotation-alignment":new $n(It.layout_symbol["icon-rotation-alignment"]),"icon-size":new Wn(It.layout_symbol["icon-size"]),"icon-text-fit":new $n(It.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new $n(It.layout_symbol["icon-text-fit-padding"]),"icon-image":new Wn(It.layout_symbol["icon-image"]),"icon-rotate":new Wn(It.layout_symbol["icon-rotate"]),"icon-padding":new $n(It.layout_symbol["icon-padding"]),"icon-keep-upright":new $n(It.layout_symbol["icon-keep-upright"]),"icon-offset":new Wn(It.layout_symbol["icon-offset"]),"icon-anchor":new Wn(It.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new $n(It.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new $n(It.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new $n(It.layout_symbol["text-rotation-alignment"]),"text-field":new Wn(It.layout_symbol["text-field"]),"text-font":new Wn(It.layout_symbol["text-font"]),"text-size":new Wn(It.layout_symbol["text-size"]),"text-max-width":new Wn(It.layout_symbol["text-max-width"]),"text-line-height":new $n(It.layout_symbol["text-line-height"]),"text-letter-spacing":new Wn(It.layout_symbol["text-letter-spacing"]),"text-justify":new Wn(It.layout_symbol["text-justify"]),"text-radial-offset":new Wn(It.layout_symbol["text-radial-offset"]),"text-variable-anchor":new $n(It.layout_symbol["text-variable-anchor"]),"text-anchor":new Wn(It.layout_symbol["text-anchor"]),"text-max-angle":new $n(It.layout_symbol["text-max-angle"]),"text-writing-mode":new $n(It.layout_symbol["text-writing-mode"]),"text-rotate":new Wn(It.layout_symbol["text-rotate"]),"text-padding":new $n(It.layout_symbol["text-padding"]),"text-keep-upright":new $n(It.layout_symbol["text-keep-upright"]),"text-transform":new Wn(It.layout_symbol["text-transform"]),"text-offset":new Wn(It.layout_symbol["text-offset"]),"text-allow-overlap":new $n(It.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new $n(It.layout_symbol["text-ignore-placement"]),"text-optional":new $n(It.layout_symbol["text-optional"])}),Js={paint:new ri({"icon-opacity":new Wn(It.paint_symbol["icon-opacity"]),"icon-color":new Wn(It.paint_symbol["icon-color"]),"icon-halo-color":new Wn(It.paint_symbol["icon-halo-color"]),"icon-halo-width":new Wn(It.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Wn(It.paint_symbol["icon-halo-blur"]),"icon-translate":new $n(It.paint_symbol["icon-translate"]),"icon-translate-anchor":new $n(It.paint_symbol["icon-translate-anchor"]),"text-opacity":new Wn(It.paint_symbol["text-opacity"]),"text-color":new Wn(It.paint_symbol["text-color"],{runtimeType:Ut,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new Wn(It.paint_symbol["text-halo-color"]),"text-halo-width":new Wn(It.paint_symbol["text-halo-width"]),"text-halo-blur":new Wn(It.paint_symbol["text-halo-blur"]),"text-translate":new $n(It.paint_symbol["text-translate"]),"text-translate-anchor":new $n(It.paint_symbol["text-translate-anchor"])}),layout:Gs},Hs=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Ft,this.defaultValue=t};Hs.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},Hs.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},Hs.prototype.possibleOutputs=function(){return[void 0]},Hs.prototype.serialize=function(){return null},_n("FormatSectionOverride",Hs,{omit:["defaultValue"]});var Ys=function(t){function e(e){t.call(this,e,Js)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e,r){if(t.prototype.recalculate.call(this,e,r),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var n=this.layout.get("text-writing-mode");if(n){for(var i=[],a=0,o=n;a<o.length;a+=1){var s=o[a];i.indexOf(s)<0&&i.push(s)}this.layout._values["text-writing-mode"]=i}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,r){var n=this.layout.get(t).evaluate(e,{},r),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||Br(i.value)||!n?n:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,r){return r in t?String(t[r]):""}))}(e.properties,n)},e.prototype.createBucket=function(t){return new Zs(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,r=Js.paint.overridableProperties;t<r.length;t+=1){var n=r[t];if(e.hasPaintOverride(this.layout,n)){var s,i=this.paint.get(n),a=new Hs(i),o=new Cr(a,i.property.specification);s="constant"===i.value.kind||"source"===i.value.kind?new Er("source",o):new Mr("composite",o,i.value.zoomStops,i.value._interpolationType),this.paint._values[n]=new Hn(i.property,s,i.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,r,n){return!(!this.layout||r.isDataDriven()||n.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var r=t.get("text-field"),n=Js.paint.properties[e],i=!1,a=function(t){for(var e=0,r=t;e<r.length;e+=1){var a=r[e];if(n.overrides&&n.overrides.hasOverride(a))return void(i=!0)}};if("constant"===r.value.kind&&r.value.value instanceof Qt)a(r.value.value.sections);else if("source"===r.value.kind){var o=function(t){if(!i)if(t instanceof ie&&re(t.value)===Nt){var e=t.value;a(e.sections)}else t instanceof ue?a(t.sections):t.eachChild(o)},s=r.value;s._styleExpression&&o(s._styleExpression.expression)}return i},e.hasPaintOverrides=function(t){for(var r=0,n=Js.paint.overridableProperties;r<n.length;r+=1){var i=n[r];if(e.hasPaintOverride(t,i))return!0}return!1},e}(ni),$s={paint:new ri({"background-color":new $n(It.paint_background["background-color"]),"background-pattern":new ti(It.paint_background["background-pattern"]),"background-opacity":new $n(It.paint_background["background-opacity"])})},Ws=function(t){function e(e){t.call(this,e,$s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ni),Qs={paint:new ri({"raster-opacity":new $n(It.paint_raster["raster-opacity"]),"raster-hue-rotate":new $n(It.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new $n(It.paint_raster["raster-brightness-min"]),"raster-brightness-max":new $n(It.paint_raster["raster-brightness-max"]),"raster-saturation":new $n(It.paint_raster["raster-saturation"]),"raster-contrast":new $n(It.paint_raster["raster-contrast"]),"raster-resampling":new $n(It.paint_raster["raster-resampling"]),"raster-fade-duration":new $n(It.paint_raster["raster-fade-duration"])})},tu=function(t){function e(e){t.call(this,e,Qs)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ni),eu=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(ni),ru={circle:Da,heatmap:Ja,hillshade:Ya,fill:Lo,"fill-extrusion":es,line:hs,symbol:Ys,background:Ws,raster:tu};function nu(t){for(var e=0,r=0,n=0,i=t;n<i.length;n+=1){var a=i[n];e+=a.w*a.h,r=Math.max(r,a.w)}t.sort((function(t,e){return e.h-t.h}));for(var o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}],s=0,u=0,l=0,p=t;l<p.length;l+=1)for(var c=p[l],h=o.length-1;h>=0;h--){var f=o[h];if(!(c.w>f.w||c.h>f.h)){if(c.x=f.x,c.y=f.y,u=Math.max(u,c.y+c.h),s=Math.max(s,c.x+c.w),c.w===f.w&&c.h===f.h){var y=o.pop();h<o.length&&(o[h]=y)}else c.h===f.h?(f.x+=c.w,f.w-=c.w):c.w===f.w?(f.y+=c.h,f.h-=c.h):(o.push({x:f.x+c.w,y:f.y,w:f.w-c.w,h:c.h}),f.y+=c.h,f.h-=c.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}var iu=function(t,e){var r=e.pixelRatio,n=e.version;this.paddedRect=t,this.pixelRatio=r,this.version=n},au={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};au.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},au.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},au.tlbr.get=function(){return this.tl.concat(this.br)},au.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(iu.prototype,au);var ou=function(t,e){var r={},n={};this.haveRenderCallbacks=[];var i=[];this.addImages(t,r,i),this.addImages(e,n,i);var a=nu(i),o=a.w,s=a.h,u=new Xa({width:o||1,height:s||1});for(var l in t){var p=t[l],c=r[l].paddedRect;Xa.copy(p.data,u,{x:0,y:0},{x:c.x+1,y:c.y+1},p.data)}for(var h in e){var f=e[h],y=n[h].paddedRect,d=y.x+1,m=y.y+1,v=f.data.width,g=f.data.height;Xa.copy(f.data,u,{x:0,y:0},{x:d,y:m},f.data),Xa.copy(f.data,u,{x:0,y:g-1},{x:d,y:m-1},{width:v,height:1}),Xa.copy(f.data,u,{x:0,y:0},{x:d,y:m+g},{width:v,height:1}),Xa.copy(f.data,u,{x:v-1,y:0},{x:d-1,y:m},{width:1,height:g}),Xa.copy(f.data,u,{x:0,y:0},{x:d+v,y:m},{width:1,height:g})}this.image=u,this.iconPositions=r,this.patternPositions=n};ou.prototype.addImages=function(t,e,r){for(var n in t){var i=t[n],a={x:0,y:0,w:i.data.width+2,h:i.data.height+2};r.push(a),e[n]=new iu(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n)}},ou.prototype.patchUpdatedImages=function(t,e){for(var r in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[r],t.getImage(r),e),this.patchUpdatedImage(this.patternPositions[r],t.getImage(r),e)},ou.prototype.patchUpdatedImage=function(t,e,r){if(t&&e&&t.version!==e.version){t.version=e.version;var n=t.tl,i=n[0],a=n[1];r.update(e.data,void 0,{x:i,y:a})}},_n("ImagePosition",iu),_n("ImageAtlas",ou);var su=self.HTMLImageElement,uu=self.HTMLCanvasElement,lu=self.HTMLVideoElement,pu=self.ImageData,cu=function(t,e,r,n){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,n)};cu.prototype.update=function(t,e,r){var n=t.width,i=t.height,a=!(this.size&&this.size[0]===n&&this.size[1]===i||r),o=this.context,s=o.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),a)this.size=[n,i],t instanceof su||t instanceof uu||t instanceof lu||t instanceof pu?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,n,i,0,this.format,s.UNSIGNED_BYTE,t.data);else{var u=r||{x:0,y:0},l=u.x,p=u.y;t instanceof su||t instanceof uu||t instanceof lu||t instanceof pu?s.texSubImage2D(s.TEXTURE_2D,0,l,p,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,l,p,n,i,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},cu.prototype.bind=function(t,e,r){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),r!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)},cu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},cu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var hu={read:function(t,e,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,l=u>>1,p=-7,c=r?i-1:0,h=r?-1:1,f=t[e+c];for(c+=h,a=f&(1<<-p)-1,f>>=-p,p+=s;p>0;a=256*a+t[e+c],c+=h,p-=8);for(o=a&(1<<-p)-1,a>>=-p,p+=n;p>0;o=256*o+t[e+c],c+=h,p-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),a-=l}return(f?-1:1)*o*Math.pow(2,a-n)},write:function(t,e,r,n,i,a){var o,s,u,l=8*a-i-1,p=(1<<l)-1,c=p>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:a-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=p):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+c>=1?h/u:h*Math.pow(2,1-c))*u>=2&&(o++,u/=2),o+c>=p?(s=0,o=p):o+c>=1?(s=(e*u-1)*Math.pow(2,i),o+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;t[r+f]=255&s,f+=y,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[r+f]=255&o,f+=y,o/=256,l-=8);t[r+f-y]|=128*d}},fu=yu;function yu(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}yu.Varint=0,yu.Fixed64=1,yu.Bytes=2,yu.Fixed32=5;var du="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function mu(t){return t.type===yu.Bytes?t.readVarint()+t.pos:t.pos+1}function vu(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function gu(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function xu(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function bu(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function _u(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function wu(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function Au(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function ku(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function Su(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function Iu(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function zu(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function Cu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Bu(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function Pu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}yu.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,a=this.pos;this.type=7&n,t(i,e,this),this.pos===a&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Cu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Pu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Cu(this.buf,this.pos)+4294967296*Cu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Cu(this.buf,this.pos)+4294967296*Pu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=hu.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=hu.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,a=r.buf;if(n=(112&(i=a[r.pos++]))>>4,i<128)return vu(t,n,e);if(n|=(127&(i=a[r.pos++]))<<3,i<128)return vu(t,n,e);if(n|=(127&(i=a[r.pos++]))<<10,i<128)return vu(t,n,e);if(n|=(127&(i=a[r.pos++]))<<17,i<128)return vu(t,n,e);if(n|=(127&(i=a[r.pos++]))<<24,i<128)return vu(t,n,e);if(n|=(1&(i=a[r.pos++]))<<31,i<128)return vu(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&du?function(t,e,r){return du.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){for(var n="",i=e;i<r;){var a,o,s,u=t[i],l=null,p=u>239?4:u>223?3:u>191?2:1;if(i+p>r)break;1===p?u<128&&(l=u):2===p?128==(192&(a=t[i+1]))&&(l=(31&u)<<6|63&a)<=127&&(l=null):3===p?(a=t[i+1],o=t[i+2],128==(192&a)&&128==(192&o)&&((l=(15&u)<<12|(63&a)<<6|63&o)<=2047||l>=55296&&l<=57343)&&(l=null)):4===p&&(a=t[i+1],o=t[i+2],s=t[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&((l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,p=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),i+=p}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==yu.Bytes)return t.push(this.readVarint(e));var r=mu(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==yu.Bytes)return t.push(this.readSVarint());var e=mu(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==yu.Bytes)return t.push(this.readBoolean());var e=mu(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==yu.Bytes)return t.push(this.readFloat());var e=mu(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==yu.Bytes)return t.push(this.readDouble());var e=mu(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==yu.Bytes)return t.push(this.readFixed32());var e=mu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==yu.Bytes)return t.push(this.readSFixed32());var e=mu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==yu.Bytes)return t.push(this.readFixed64());var e=mu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==yu.Bytes)return t.push(this.readSFixed64());var e=mu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===yu.Varint)for(;this.buf[this.pos++]>127;);else if(e===yu.Bytes)this.pos=this.readVarint()+this.pos;else if(e===yu.Fixed32)this.pos+=4;else{if(e!==yu.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Bu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Bu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Bu(this.buf,-1&t,this.pos),Bu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Bu(this.buf,-1&t,this.pos),Bu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,a=0;a<e.length;a++){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){n>56319||a+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&gu(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),hu.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),hu.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&gu(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,yu.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,xu,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,bu,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Au,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,_u,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,wu,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,ku,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Su,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Iu,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,zu,e)},writeBytesField:function(t,e){this.writeTag(t,yu.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,yu.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,yu.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,yu.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,yu.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,yu.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,yu.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,yu.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,yu.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,yu.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Eu=3;function Mu(t,e,r){1===t&&r.readMessage(Tu,e)}function Tu(t,e,r){if(3===t){var n=r.readMessage(Vu,{}),i=n.id,a=n.bitmap,o=n.width,s=n.height,u=n.left,l=n.top,p=n.advance;e.push({id:i,bitmap:new Ka({width:o+2*Eu,height:s+2*Eu},a),metrics:{width:o,height:s,left:u,top:l,advance:p}})}}function Vu(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint())}var Fu=Eu,Ou=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Ou.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},Ou.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Lu=function(t,e,r){this.target=t,this.parent=e,this.mapId=r,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},m(["receive","process"],this),this.invoker=new Ou(this.process),this.target.addEventListener("message",this.receive,!1)};function Du(t,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}Lu.prototype.send=function(t,e,r,n){var i=this,a=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(this.callbacks[a]=r);var o=[];return this.target.postMessage({id:a,type:t,hasCallback:!!r,targetMapId:n,sourceMapId:this.mapId,data:kn(e,o)},o),{cancel:function(){r&&delete i.callbacks[a],i.target.postMessage({id:a,type:"<cancel>",targetMapId:n,sourceMapId:i.mapId})}}},Lu.prototype.receive=function(t){var e=t.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[r];var n=this.cancelCallbacks[r];delete this.cancelCallbacks[r],n&&n()}else this.tasks[r]=e,this.taskQueue.push(r),this.invoker.trigger()},Lu.prototype.process=function(){var t=this;if(this.taskQueue.length){var e=this.taskQueue.shift(),r=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),r)if("<response>"===r.type){var n=this.callbacks[e];delete this.callbacks[e],n&&(r.error?n(Sn(r.error)):n(null,Sn(r.data)))}else{var i=!1,a=r.hasCallback?function(r,n){i=!0,delete t.cancelCallbacks[e];var a=[];t.target.postMessage({id:e,type:"<response>",sourceMapId:t.mapId,error:r?kn(r):null,data:kn(n,a)},a)}:function(t){i=!0},o=null,s=Sn(r.data);if(this.parent[r.type])o=this.parent[r.type](r.sourceMapId,s,a);else if(this.parent.getWorkerSource){var u=r.type.split(".");o=this.parent.getWorkerSource(r.sourceMapId,u[0],s.source)[u[1]](s,a)}else a(new Error("Could not find function "+r.type));!i&&o&&o.cancel&&(this.cancelCallbacks[e]=o.cancel)}}},Lu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Uu=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Uu.prototype.setNorthEast=function(t){return this._ne=t instanceof Ru?new Ru(t.lng,t.lat):Ru.convert(t),this},Uu.prototype.setSouthWest=function(t){return this._sw=t instanceof Ru?new Ru(t.lng,t.lat):Ru.convert(t),this},Uu.prototype.extend=function(t){var e,r,n=this._sw,i=this._ne;if(t instanceof Ru)e=t,r=t;else{if(!(t instanceof Uu))return Array.isArray(t)?t.every(Array.isArray)?this.extend(Uu.convert(t)):this.extend(Ru.convert(t)):this;if(e=t._sw,r=t._ne,!e||!r)return this}return n||i?(n.lng=Math.min(e.lng,n.lng),n.lat=Math.min(e.lat,n.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new Ru(e.lng,e.lat),this._ne=new Ru(r.lng,r.lat)),this},Uu.prototype.getCenter=function(){return new Ru((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Uu.prototype.getSouthWest=function(){return this._sw},Uu.prototype.getNorthEast=function(){return this._ne},Uu.prototype.getNorthWest=function(){return new Ru(this.getWest(),this.getNorth())},Uu.prototype.getSouthEast=function(){return new Ru(this.getEast(),this.getSouth())},Uu.prototype.getWest=function(){return this._sw.lng},Uu.prototype.getSouth=function(){return this._sw.lat},Uu.prototype.getEast=function(){return this._ne.lng},Uu.prototype.getNorth=function(){return this._ne.lat},Uu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Uu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Uu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Uu.convert=function(t){return!t||t instanceof Uu?t:new Uu(t)};var Ru=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ru.prototype.wrap=function(){return new Ru(p(this.lng,-180,180),this.lat)},Ru.prototype.toArray=function(){return[this.lng,this.lat]},Ru.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ru.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return new Uu(new Ru(this.lng-r,this.lat-e),new Ru(this.lng+r,this.lat+e))},Ru.convert=function(t){if(t instanceof Ru)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Ru(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Ru(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var ju=2*Math.PI*6378137;function qu(t){return ju*Math.cos(t*Math.PI/180)}function Nu(t){return(180+t)/360}function Ku(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Xu(t,e){return t/qu(e)}function Zu(t){var e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}var Gu=function(t,e,r){void 0===r&&(r=0),this.x=+t,this.y=+e,this.z=+r};Gu.fromLngLat=function(t,e){void 0===e&&(e=0);var r=Ru.convert(t);return new Gu(Nu(r.lng),Ku(r.lat),Xu(e,r.lat))},Gu.prototype.toLngLat=function(){return new Ru(360*this.x-180,Zu(this.y))},Gu.prototype.toAltitude=function(){return this.z*qu(Zu(this.y))},Gu.prototype.meterInMercatorCoordinateUnits=function(){return 1/ju*(t=Zu(this.y),1/Math.cos(t*Math.PI/180));var t};var Ju=function(t,e,r){this.z=t,this.x=e,this.y=r,this.key=$u(0,t,e,r)};Ju.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Ju.prototype.url=function(t,e){var r,n,i,a,o,s=(r=this.x,n=this.y,i=this.z,a=Du(256*r,256*(n=Math.pow(2,i)-n-1),i),o=Du(256*(r+1),256*(n+1),i),a[0]+","+a[1]+","+o[0]+","+o[1]),u=function(t,e,r){for(var n,i="",a=t;a>0;a--)i+=(e&(n=1<<a-1)?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},Ju.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new i((t.x*e-this.x)*ha,(t.y*e-this.y)*ha)};var Hu=function(t,e){this.wrap=t,this.canonical=e,this.key=$u(t,e.z,e.x,e.y)},Yu=function(t,e,r,n,i){this.overscaledZ=t,this.wrap=e,this.canonical=new Ju(r,+n,+i),this.key=$u(e,t,n,i)};function $u(t,e,r,n){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*n+r)+e}Yu.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Yu.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Yu(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Yu(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Yu.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Yu.prototype.children=function(t){if(this.overscaledZ>=t)return[new Yu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new Yu(e,this.wrap,e,r,n),new Yu(e,this.wrap,e,r+1,n),new Yu(e,this.wrap,e,r,n+1),new Yu(e,this.wrap,e,r+1,n+1)]},Yu.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Yu.prototype.wrapped=function(){return new Yu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Yu.prototype.unwrapTo=function(t){return new Yu(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Yu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Yu.prototype.toUnwrapped=function(){return new Hu(this.wrap,this.canonical)},Yu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Yu.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Gu(t.x-this.wrap,t.y))},_n("CanonicalTileID",Ju),_n("OverscaledTileID",Yu,{omit:["posMatrix"]});var Wu=function(t,e,r){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return w('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var n=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=r||"mapbox";for(var i=0;i<n;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(n,i)]=this.data[this._idx(n-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,n)]=this.data[this._idx(i,n-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(n,-1)]=this.data[this._idx(n-1,0)],this.data[this._idx(-1,n)]=this.data[this._idx(0,n-1)],this.data[this._idx(n,n)]=this.data[this._idx(n-1,n-1)]};Wu.prototype.get=function(t,e){var r=new Uint8Array(this.data.buffer),n=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(r[n],r[n+1],r[n+2])},Wu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Wu.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Wu.prototype._unpackMapbox=function(t,e,r){return(256*t*256+256*e+r)/10-1e4},Wu.prototype._unpackTerrarium=function(t,e,r){return 256*t+e+r/256-32768},Wu.prototype.getPixels=function(){return new Xa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Wu.prototype.backfillBorder=function(t,e,r){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var n=e*this.dim,i=e*this.dim+this.dim,a=r*this.dim,o=r*this.dim+this.dim;switch(e){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:a=o-1;break;case 1:o=a+1}for(var s=-e*this.dim,u=-r*this.dim,l=a;l<o;l++)for(var p=n;p<i;p++)this.data[this._idx(p,l)]=t.data[this._idx(p+s,l+u)]},_n("DEMData",Wu);var Qu=si([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),tl=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r}};tl.prototype.encode=function(t){return this._stringToNumber[t]},tl.prototype.decode=function(t){return this._numberToString[t]};var el=function(t,e,r,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=r,t._y=n,this.properties=t.properties,null!=t.id&&(this.id=t.id)},rl={geometry:{configurable:!0}};rl.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},rl.geometry.set=function(t){this._geometry=t},el.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(el.prototype,rl);var nl=function(){this.state={},this.stateChanges={},this.deletedStates={}};nl.prototype.updateState=function(t,e,r){var n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},c(this.stateChanges[t][n],r),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==n&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][n])for(var a in this.deletedStates[t][n]={},this.state[t][n])r[a]||(this.deletedStates[t][n][a]=null);else for(var o in r)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][o]&&delete this.deletedStates[t][n][o]},nl.prototype.removeFeatureState=function(t,e,r){if(null!==this.deletedStates[t]){var n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&void 0!==e&&e>=0)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][r]=null);else if(void 0!==e&&e>=0)if(this.stateChanges[t]&&this.stateChanges[t][n])for(r in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][r]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}},nl.prototype.getState=function(t,e){var r=String(e),n=this.state[t]||{},i=this.stateChanges[t]||{},a=c({},n[r],i[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var o=this.deletedStates[t][e];if(null===o)return{};for(var s in o)delete a[s]}return a},nl.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},nl.prototype.coalesceChanges=function(t,e){var r={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var i={};for(var a in this.stateChanges[n])this.state[n][a]||(this.state[n][a]={}),c(this.state[n][a],this.stateChanges[n][a]),i[a]=this.state[n][a];r[n]=i}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var u in this.state[o])s[u]={},this.state[o][u]={};else for(var l in this.deletedStates[o]){if(null===this.deletedStates[o][l])this.state[o][l]={};else for(var p=0,h=Object.keys(this.deletedStates[o][l]);p<h.length;p+=1){var f=h[p];delete this.state[o][l][f]}s[l]=this.state[o][l]}r[o]=r[o]||{},c(r[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var y in t)t[y].setFeatureState(r,e)};var il=function(t,e,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new mn(ha,16,0),this.grid3D=new mn(ha,16,0),this.featureIndexArray=r||new ji};function al(t){for(var e=1/0,r=1/0,n=-1/0,i=-1/0,a=0,o=t;a<o.length;a+=1){var s=o[a];e=Math.min(e,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),i=Math.max(i,s.y)}return{minX:e,minY:r,maxX:n,maxY:i}}function ol(t,e){return e-t}il.prototype.insert=function(t,e,r,n,i,a){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i);for(var s=a?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],p=[1/0,1/0,-1/0,-1/0],c=0;c<l.length;c++){var h=l[c];p[0]=Math.min(p[0],h.x),p[1]=Math.min(p[1],h.y),p[2]=Math.max(p[2],h.x),p[3]=Math.max(p[3],h.y)}p[0]<ha&&p[1]<ha&&p[2]>=0&&p[3]>=0&&s.insert(o,p[0],p[1],p[2],p[3])}},il.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Go.VectorTile(new fu(this.rawTileData)).layers,this.sourceLayerCoder=new tl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},il.prototype.query=function(t,e,r){var n=this;this.loadVTLayers();for(var a=t.params||{},o=ha/t.tileSize/t.scale,s=Nr(a.filter),u=t.queryGeometry,l=t.queryPadding*o,p=al(u),c=this.grid.query(p.minX-l,p.minY-l,p.maxX+l,p.maxY+l),h=al(t.cameraQueryGeometry),y=0,d=this.grid3D.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l,(function(e,r,n,a){return function(t,e,r,n,a){for(var o=0,s=t;o<s.length;o+=1){var u=s[o];if(e<=u.x&&r<=u.y&&n>=u.x&&a>=u.y)return!0}var l=[new i(e,r),new i(e,a),new i(n,a),new i(n,r)];if(t.length>2)for(var p=0,c=l;p<c.length;p+=1)if(za(t,c[p]))return!0;for(var h=0;h<t.length-1;h++)if(Ca(t[h],t[h+1],l))return!0;return!1}(t.cameraQueryGeometry,e-l,r-l,n+l,a+l)}));y<d.length;y+=1){var m=d[y];c.push(m)}c.sort(ol);for(var v,g={},x=function(i){var l=c[i];if(l!==v){v=l;var p=n.featureIndexArray.get(l),h=null;n.loadMatchingFeature(g,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,s,a.layers,e,(function(e,i){h||(h=da(e));var a={};return e.id&&(a=r.getState(i.sourceLayer||"_geojsonTileLayer",e.id)),i.queryIntersectsFeature(u,e,a,h,n.z,t.transform,o,t.pixelPosMatrix)}))}},b=0;b<c.length;b++)x(b);return g},il.prototype.loadMatchingFeature=function(t,e,r,n,i,a,o,s){var u=this.bucketLayerIDs[e];if(!a||function(t,e){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!1}(a,u)){var l=this.sourceLayerCoder.decode(r),p=this.vtLayers[l].feature(n);if(i(new qn(this.tileID.overscaledZ),p))for(var c=0;c<u.length;c++){var h=u[c];if(!(a&&a.indexOf(h)<0)){var f=o[h];if(f){var y=!s||s(p,f);if(y){var d=new el(p,this.z,this.x,this.y);d.layer=f.serialize();var m=t[h];void 0===m&&(m=t[h]=[]),m.push({featureIndex:n,feature:d,intersectionZ:y})}}}}}},il.prototype.lookupSymbolFeatures=function(t,e,r,n,i,a){var o={};this.loadVTLayers();for(var s=Nr(n),u=0,l=t;u<l.length;u+=1){var p=l[u];this.loadMatchingFeature(o,e,r,p,s,i,a)}return o},il.prototype.hasLayer=function(t){for(var e=0,r=this.bucketLayerIDs;e<r.length;e+=1)for(var n=0,i=r[e];n<i.length;n+=1)if(t===i[n])return!0;return!1},_n("FeatureIndex",il,{omit:["rawTileData","sourceLayerCoder"]});var sl=function(t,e){this.tileID=t,this.uid=f(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};function ul(t,e,r,n,i){if(void 0===e.segment)return!0;for(var a=e,o=e.segment+1,s=0;s>-r/2;){if(--o<0)return!1;s-=t[o].dist(a),a=t[o]}s+=t[o].dist(t[o+1]),o++;for(var u=[],l=0;s<r/2;){var p=t[o-1],c=t[o],h=t[o+1];if(!h)return!1;var f=p.angleTo(c)-c.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>n;)l-=u.shift().angleDelta;if(l>i)return!1;o++,s+=c.dist(h)}return!0}function ll(t){for(var e=0,r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function pl(t,e,r){return t?.6*e*r:0}function cl(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function hl(t,e,r,n,i,a){for(var o=pl(r,i,a),s=cl(r,n)*a,u=0,l=ll(t)/2,p=0;p<t.length-1;p++){var c=t[p],h=t[p+1],f=c.dist(h);if(u+f>l){var y=(l-u)/f,d=Se(c.x,h.x,y),m=Se(c.y,h.y,y),v=new Vs(d,m,h.angleTo(c),p);return v._round(),!o||ul(t,v,s,o,e)?v:void 0}u+=f}}function fl(t,e,r,n,i,a,o,s,u){var l=pl(n,a,o),p=cl(n,i),c=p*o,h=0===t[0].x||t[0].x===u||0===t[0].y||t[0].y===u;return e-c<e/4&&(e=c+e/4),function t(e,r,n,i,a,o,s,u,l){for(var p=o/2,c=ll(e),h=0,f=r-n,y=[],d=0;d<e.length-1;d++){for(var m=e[d],v=e[d+1],g=m.dist(v),x=v.angleTo(m);f+n<h+g;){var b=((f+=n)-h)/g,_=Se(m.x,v.x,b),w=Se(m.y,v.y,b);if(_>=0&&_<l&&w>=0&&w<l&&f-p>=0&&f+p<=c){var A=new Vs(_,w,x,d);A._round(),i&&!ul(e,A,o,i,a)||y.push(A)}}h+=g}return u||y.length||s||(y=t(e,h/2,n,i,a,o,s,!0,l)),y}(t,h?e/2*s%e:(p/2+2*a)*o*s%e,e,l,r,c,h,!1,u)}function yl(t,e){var r=t.image,n=t.right-t.left,a=(n*r.paddedRect.w/(r.paddedRect.w-2)-n)/2,o=t.left-a,s=t.right+a,u=t.bottom-t.top,l=(u*r.paddedRect.h/(r.paddedRect.h-2)-u)/2,p=t.top-l,c=t.bottom+l,h=new i(o,p),f=new i(s,p),y=new i(s,c),d=new i(o,c),m=e*Math.PI/180;if(m){var v=Math.sin(m),g=Math.cos(m),x=[g,-v,v,g];h._matMult(x),f._matMult(x),d._matMult(x),y._matMult(x)}return[{tl:h,tr:f,bl:d,br:y,tex:r.paddedRect,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0}]}sl.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<V.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},sl.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},sl.prototype.loadVectorData=function(t,e,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var n in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var r={};if(!e)return r;for(var n=function(){var t=a[i],n=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==n.length){t.layers=n,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return n.filter((function(e){return e.id===t}))[0]})));for(var o=0,s=n;o<s.length;o+=1){var u=s[o];r[u.id]=t}}},i=0,a=t;i<a.length;i+=1)n();return r}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[n];if(i instanceof Zs){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}for(var a in this.queryPadding=0,this.buckets){var o=this.buckets[a];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(a).queryRadius(o))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Ei},sl.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},sl.prototype.getBucket=function(t){return this.buckets[t.id]},sl.prototype.upload=function(t){for(var e in this.buckets){var r=this.buckets[e];r.uploadPending()&&r.upload(t)}var n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new cu(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new cu(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},sl.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},sl.prototype.queryRenderedFeatures=function(t,e,r,n,i,a,o,s,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:i,tileSize:this.tileSize,pixelPosMatrix:u,transform:o,params:a,queryPadding:this.queryPadding*s},t,e):{}},sl.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),n=e?e.sourceLayer:"",i=r._geojsonTileLayer||r[n];if(i)for(var a=Nr(e&&e.filter),o=this.tileID.canonical,s=o.z,u=o.x,l=o.y,p={z:s,x:u,y:l},c=0;c<i.length;c++){var h=i.feature(c);if(a(new qn(this.tileID.overscaledZ),h)){var f=new el(h,s,u,l);f.tile=p,t.push(f)}}}},sl.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer),delete this.mask},sl.prototype.setMask=function(t,e){if(!o(this.mask,t)&&(this.clearMask(),this.mask=t,!o(t,{0:!0}))){var r=new pi,n=new Si;this.segments=new Ni,this.segments.prepareSegment(0,r,n);for(var a=Object.keys(t),s=0;s<a.length;s++){var u=t[+a[s]],l=ha>>u.z,p=new i(u.x*l,u.y*l),c=new i(p.x+l,p.y+l),h=this.segments.prepareSegment(4,r,n);r.emplaceBack(p.x,p.y,p.x,p.y),r.emplaceBack(c.x,p.y,c.x,p.y),r.emplaceBack(p.x,c.y,p.x,c.y),r.emplaceBack(c.x,c.y,c.x,c.y);var f=h.vertexLength;n.emplaceBack(f,f+1,f+2),n.emplaceBack(f+1,f+2,f+3),h.vertexLength+=4,h.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(r,Qu.members),this.maskedIndexBuffer=e.createIndexBuffer(n)}},sl.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},sl.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},sl.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var r=S(t.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),i=!1;if(this.expirationTime>n)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var a=this.expirationTime-e;a?this.expirationTime=n+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},sl.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},sl.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var r=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets){var i=this.buckets[n],a=i.layers[0].sourceLayer||"_geojsonTileLayer",o=r[a],s=t[a];o&&s&&0!==Object.keys(s).length&&(i.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(n).queryRadius(i))))}}},sl.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},sl.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<V.now()},sl.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},sl.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=V.now()+t};var dl=function(t,e,r,n,a,o,s,u,l,p,c,h){var f=s.top*u-l,y=s.bottom*u+l,d=s.left*u-l,m=s.right*u+l;if(this.boxStartIndex=t.length,p){var v=y-f,g=m-d;v>0&&(v=Math.max(10*u,v),this._addLineCollisionCircles(t,e,r,r.segment,g,v,n,a,o,c))}else{if(h){var x=new i(d,f),b=new i(m,f),_=new i(d,y),w=new i(m,y),A=h*Math.PI/180;x._rotate(A),b._rotate(A),_._rotate(A),w._rotate(A),d=Math.min(x.x,b.x,_.x,w.x),m=Math.max(x.x,b.x,_.x,w.x),f=Math.min(x.y,b.y,_.y,w.y),y=Math.max(x.y,b.y,_.y,w.y)}t.emplaceBack(r.x,r.y,d,f,m,y,n,a,o,0,0)}this.boxEndIndex=t.length};dl.prototype._addLineCollisionCircles=function(t,e,r,n,i,a,o,s,u,l){var p=a/2,c=Math.floor(i/p)||1,h=1+.4*Math.log(l)/Math.LN2,f=Math.floor(c*h/2),y=-a/2,d=r,m=n+1,v=y,g=-i/2,x=g-i/4;do{if(--m<0){if(v>g)return;m=0;break}v-=e[m].dist(d),d=e[m]}while(v>x);for(var b=e[m].dist(e[m+1]),_=-f;_<c+f;_++){var w=_*p,A=g+w;if(w<0&&(A+=w),w>i&&(A+=w-i),!(A<v)){for(;v+b<A;){if(v+=b,++m+1>=e.length)return;b=e[m].dist(e[m+1])}var k=A-v,S=e[m],I=e[m+1].sub(S)._unit()._mult(k)._add(S)._round(),z=Math.abs(A-y)<p?0:.8*(A-y);t.emplaceBack(I.x,I.y,-a/2,-a/2,a/2,a/2,o,s,u,a/2,z)}}};var ml=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=vl),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)};function vl(t,e){return t<e?-1:t>e?1:0}function gl(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1);for(var n=1/0,a=1/0,o=-1/0,s=-1/0,u=t[0],l=0;l<u.length;l++){var p=u[l];(!l||p.x<n)&&(n=p.x),(!l||p.y<a)&&(a=p.y),(!l||p.x>o)&&(o=p.x),(!l||p.y>s)&&(s=p.y)}var c=o-n,h=s-a,f=Math.min(c,h),y=f/2,d=new ml([],xl);if(0===f)return new i(n,a);for(var m=n;m<o;m+=f)for(var v=a;v<s;v+=f)d.push(new bl(m+y,v+y,y,t));for(var g=function(t){for(var e=0,r=0,n=0,i=t[0],a=0,o=i.length,s=o-1;a<o;s=a++){var u=i[a],l=i[s],p=u.x*l.y-l.x*u.y;r+=(u.x+l.x)*p,n+=(u.y+l.y)*p,e+=3*p}return new bl(r/e,n/e,0,t)}(t),x=d.length;d.length;){var b=d.pop();(b.d>g.d||!g.d)&&(g=b,r&&console.log("found best %d after %d probes",Math.round(1e4*b.d)/1e4,x)),b.max-g.d<=e||(y=b.h/2,d.push(new bl(b.p.x-y,b.p.y-y,y,t)),d.push(new bl(b.p.x+y,b.p.y-y,y,t)),d.push(new bl(b.p.x-y,b.p.y+y,y,t)),d.push(new bl(b.p.x+y,b.p.y+y,y,t)),x+=4)}return r&&(console.log("num probes: "+x),console.log("best distance: "+g.d)),g.p}function xl(t,e){return e.max-t.max}function bl(t,e,r,n){this.p=new i(t,e),this.h=r,this.d=function(t,e){for(var r=!1,n=1/0,i=0;i<e.length;i++)for(var a=e[i],o=0,s=a.length,u=s-1;o<s;u=o++){var l=a[o],p=a[u];l.y>t.y!=p.y>t.y&&t.x<(p.x-l.x)*(t.y-l.y)/(p.y-l.y)+l.x&&(r=!r),n=Math.min(n,Sa(t,l,p))}return(r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}ml.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},ml.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},ml.prototype.peek=function(){return this.data[0]},ml.prototype._up=function(t){for(var e=this.data,r=this.compare,n=e[t];t>0;){var i=t-1>>1,a=e[i];if(r(n,a)>=0)break;e[t]=a,t=i}e[t]=n},ml.prototype._down=function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var a=1+(t<<1),o=e[a],s=a+1;if(s<this.length&&r(e[s],o)<0&&(a=s,o=e[s]),r(o,i)>=0)break;e[t]=o,t=a}e[t]=i};var _l=e((function(t){t.exports=function(t,e){var r,n,i,a,o,s,u,l;for(r=3&t.length,n=t.length-r,i=e,o=3432918353,s=461845907,l=0;l<n;)u=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,i=27492+(65535&(a=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(u=0,r){case 3:u^=(255&t.charCodeAt(l+2))<<16;case 2:u^=(255&t.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(l)))*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),wl=e((function(t){t.exports=function(t,e){for(var r,n=t.length,i=e^n,a=0;n>=4;)r=1540483477*(65535&(r=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++a;switch(n){case 3:i^=(255&t.charCodeAt(a+2))<<16;case 2:i^=(255&t.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),Al=_l,kl=_l,Sl=wl;Al.murmur3=kl,Al.murmur2=Sl;var Il=7,zl=Number.POSITIVE_INFINITY;function Cl(t,e){return e[1]!==zl?function(t,e,r){var n=0,i=0;switch(e=Math.abs(e),r=Math.abs(r),t){case"top-right":case"top-left":case"top":i=r-Il;break;case"bottom-right":case"bottom-left":case"bottom":i=-r+Il}switch(t){case"top-right":case"bottom-right":case"right":n=-e;break;case"top-left":case"bottom-left":case"left":n=e}return[n,i]}(t,e[0],e[1]):function(t,e){var r=0,n=0;e<0&&(e=0);var i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":n=i-Il;break;case"bottom-right":case"bottom-left":n=-i+Il;break;case"bottom":n=-e+Il;break;case"top":n=e-Il}switch(t){case"top-right":case"bottom-right":r=-i;break;case"top-left":case"bottom-left":r=i;break;case"left":r=e;break;case"right":r=-e}return[r,n]}(t,e[0])}function Bl(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var Pl=65535;function El(t,e,r,n,a,o,s,u,l,p,c,h,f,y){var d=function(t,e,r,n,a,o,s,u){for(var l=n.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,p=e.positionedGlyphs,c=[],h=0;h<p.length;h++){var f=p[h],y=s[f.fontStack],d=y&&y[f.glyph];if(d){var m=d.rect;if(m){var v=Fu+1,g=d.metrics.advance*f.scale/2,x=a?[f.x+g,f.y]:[0,0],b=a?[0,0]:[f.x+g+r[0],f.y+r[1]],_=(a||u)&&f.vertical,w=[0,0];_&&(w=b,b=[0,0]);var A=(d.metrics.left-v)*f.scale-g+b[0],k=(-d.metrics.top-v)*f.scale+b[1],S=A+m.w*f.scale,I=k+m.h*f.scale,z=new i(A,k),C=new i(S,k),B=new i(A,I),P=new i(S,I);if(_){var E=new i(-g,g-e.yOffset),M=-Math.PI/2,T=_s/2-g,V=new i(5-e.yOffset-T,0),F=new(Function.prototype.bind.apply(i,[null].concat(w)));z._rotateAround(M,E)._add(V)._add(F),C._rotateAround(M,E)._add(V)._add(F),B._rotateAround(M,E)._add(V)._add(F),P._rotateAround(M,E)._add(V)._add(F)}if(l){var O=Math.sin(l),L=Math.cos(l),D=[L,-O,O,L];z._matMult(D),C._matMult(D),B._matMult(D),P._matMult(D)}c.push({tl:z,tr:C,bl:B,br:P,tex:m,writingMode:e.writingMode,glyphOffset:x,sectionIndex:f.sectionIndex})}}}return c}(0,r,s,n,a,o,h,t.allowVerticalPlacement),m=t.textSizeData,v=null;"source"===m.kind?(v=[Fs*n.layout.get("text-size").evaluate(o,{})])[0]>Pl&&w(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===m.kind&&((v=[Fs*y.compositeTextSizes[0].evaluate(o,{}),Fs*y.compositeTextSizes[1].evaluate(o,{})])[0]>Pl||v[1]>Pl)&&w(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),t.addSymbols(t.text,d,v,s,a,o,l,e,u.lineStartIndex,u.lineLength,f);for(var g=0,x=p;g<x.length;g+=1)c[x[g]]=t.text.placedSymbolArray.length-1;return 4*d.length}function Ml(t,e,r,n){var i=t.compareText;if(e in i){for(var a=i[e],o=a.length-1;o>=0;o--)if(n.dist(a[o])<r)return!0}else i[e]=[];return i[e].push(n),!1}t.Actor=Lu,t.AlphaImage=Ka,t.CanonicalTileID=Ju,t.CollisionBoxArray=Ei,t.Color=Yt,t.DEMData=Wu,t.DataConstantProperty=$n,t.DictionaryCoder=tl,t.EXTENT=ha,t.ErrorEvent=kt,t.EvaluationParameters=qn,t.Event=At,t.Evented=St,t.FeatureIndex=il,t.FillBucket=Vo,t.FillExtrusionBucket=$o,t.ImageAtlas=ou,t.ImagePosition=iu,t.LineBucket=us,t.LngLat=Ru,t.LngLatBounds=Uu,t.MercatorCoordinate=Gu,t.ONE_EM=_s,t.OverscaledTileID=Yu,t.Point=i,t.Point$1=i,t.ProgramConfiguration=ua,t.Properties=ri,t.Protobuf=fu,t.RGBAImage=Xa,t.RequestManager=j,t.ResourceType=pt,t.SegmentVector=Ni,t.SourceFeatureState=nl,t.StructArrayLayout1ui2=zi,t.StructArrayLayout2i4=li,t.StructArrayLayout2ui4=Ii,t.StructArrayLayout3ui6=Si,t.StructArrayLayout4i8=pi,t.SymbolBucket=Zs,t.Texture=cu,t.Tile=sl,t.Transitionable=Xn,t.Uniform1f=Hi,t.Uniform1i=Ji,t.Uniform2f=Yi,t.Uniform3f=$i,t.Uniform4f=Wi,t.UniformColor=Qi,t.UniformMatrix4f=ea,t.UnwrappedTileID=Hu,t.ValidationError=zt,t.WritingMode=ws,t.ZoomHistory=In,t.addDynamicAttributes=Ns,t.asyncAll=function(t,e,r){if(!t.length)return r(null,[]);var n=t.length,i=new Array(t.length),a=null;t.forEach((function(t,o){e(t,(function(t,e){t&&(a=t),i[o]=e,0==--n&&r(a,i)}))}))},t.bezier=s,t.bindAll=m,t.browser=V,t.cacheEntryPossiblyAdded=function(t){++lt>it&&(t.getActor().send("enforceCacheSizeLimit",nt),lt=0)},t.clamp=l,t.clearTileCache=function(t){var e=self.caches.delete(rt);t&&e.catch(t).then((function(){return t()}))},t.clone=function(t){var e=new Va(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=b,t.config=F,t.create=function(){var t=new Va(16);return Va!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new Va(9);return Va!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new Va(4);return Va!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Pr,t.createLayout=si,t.createStyleLayer=function(t){return"custom"===t.type?new eu(t):new ru[t.type](t)},t.deepEqual=o,t.ease=u,t.emitValidationErrors=dn,t.endsWith=v,t.enforceCacheSizeLimit=function(t){self.caches&&self.caches.open(rt).then((function(e){e.keys().then((function(r){for(var n=0;n<r.length-t;n++)e.delete(r[n])}))}))},t.evaluateSizeForFeature=Ls,t.evaluateSizeForZoom=Ds,t.evaluateVariableOffset=Cl,t.evented=Rn,t.extend=c,t.featureFilter=Nr,t.filterObject=x,t.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Es,t.getAnchorJustification=Bl,t.getArrayBuffer=mt,t.getImage=bt,t.getJSON=function(t,e){return dt(c(t,{type:"json"}),e)},t.getRTLTextPluginStatus=function(){return Dn},t.getReferrer=ft,t.getVideo=function(t,e){var r,n,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var a=0;a<t.length;a++){var o=self.document.createElement("source");r=t[a],n=void 0,(n=self.document.createElement("a")).href=r,(n.protocol!==self.document.location.protocol||n.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),o.src=t[a],i.appendChild(o)}return{cancel:function(){}}},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.ieee754=hu,t.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],p=e[8],c=e[9],h=e[10],f=e[11],y=e[12],d=e[13],m=e[14],v=e[15],g=r*s-n*o,x=r*u-i*o,b=r*l-a*o,_=n*u-i*s,w=n*l-a*s,A=i*l-a*u,k=p*d-c*y,S=p*m-h*y,I=p*v-f*y,z=c*m-h*d,C=c*v-f*d,B=h*v-f*m,P=g*B-x*C+b*z+_*I-w*S+A*k;return P?(P=1/P,t[0]=(s*B-u*C+l*z)*P,t[1]=(i*C-n*B-a*z)*P,t[2]=(d*A-m*w+v*_)*P,t[3]=(h*w-c*A-f*_)*P,t[4]=(u*I-o*B-l*S)*P,t[5]=(r*B-i*I+a*S)*P,t[6]=(m*b-y*A-v*x)*P,t[7]=(p*A-h*b+f*x)*P,t[8]=(o*C-s*I+l*k)*P,t[9]=(n*I-r*C-a*k)*P,t[10]=(y*w-d*b+v*g)*P,t[11]=(c*b-p*w-f*g)*P,t[12]=(s*S-o*z-u*k)*P,t[13]=(r*z-n*S+i*k)*P,t[14]=(d*x-y*_-m*g)*P,t[15]=(p*_-c*x+h*g)*P,t):null},t.isChar=zn,t.isMapboxURL=q,t.keysDifference=function(t,e){var r=[];for(var n in t)n in e||r.push(n);return r},t.makeRequest=dt,t.mapObject=g,t.mercatorXfromLng=Nu,t.mercatorYfromLat=Ku,t.mercatorZfromAltitude=Xu,t.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],h=e[9],f=e[10],y=e[11],d=e[12],m=e[13],v=e[14],g=e[15],x=r[0],b=r[1],_=r[2],w=r[3];return t[0]=x*n+b*s+_*c+w*d,t[1]=x*i+b*u+_*h+w*m,t[2]=x*a+b*l+_*f+w*v,t[3]=x*o+b*p+_*y+w*g,x=r[4],b=r[5],_=r[6],w=r[7],t[4]=x*n+b*s+_*c+w*d,t[5]=x*i+b*u+_*h+w*m,t[6]=x*a+b*l+_*f+w*v,t[7]=x*o+b*p+_*y+w*g,x=r[8],b=r[9],_=r[10],w=r[11],t[8]=x*n+b*s+_*c+w*d,t[9]=x*i+b*u+_*h+w*m,t[10]=x*a+b*l+_*f+w*v,t[11]=x*o+b*p+_*y+w*g,x=r[12],b=r[13],_=r[14],w=r[15],t[12]=x*n+b*s+_*c+w*d,t[13]=x*i+b*u+_*h+w*m,t[14]=x*a+b*l+_*f+w*v,t[15]=x*o+b*p+_*y+w*g,t},t.mvt=Go,t.number=Se,t.ortho=function(t,e,r,n,i,a,o){var s=1/(e-r),u=1/(n-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(o+a)*l,t[15]=1,t},t.parseGlyphPBF=function(t){return new fu(t).readFields(Mu,[])},t.performSymbolLayout=function(t,e,r,n,a,o){t.createArrays();var s=512*t.overscaling;t.tilePixelRatio=ha/s,t.compareText={},t.iconsNeedLinear=!1;var u=t.layers[0].layout,l=t.layers[0]._unevaluatedLayout._values,p={};if("composite"===t.textSizeData.kind){var c=t.textSizeData,h=c.minZoom,f=c.maxZoom;p.compositeTextSizes=[l["text-size"].possiblyEvaluate(new qn(h)),l["text-size"].possiblyEvaluate(new qn(f))]}if("composite"===t.iconSizeData.kind){var y=t.iconSizeData,d=y.minZoom,m=y.maxZoom;p.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new qn(d)),l["icon-size"].possiblyEvaluate(new qn(m))]}p.layoutTextSize=l["text-size"].possiblyEvaluate(new qn(t.zoom+1)),p.layoutIconSize=l["icon-size"].possiblyEvaluate(new qn(t.zoom+1)),p.textMaxSize=l["text-size"].possiblyEvaluate(new qn(18));for(var v=u.get("text-line-height")*_s,g="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),x=u.get("text-keep-upright"),b=function(){var o=A[_],s=u.get("text-font").evaluate(o,{}).join(","),l=r,c={horizontal:{},vertical:void 0},h=o.text,f=[0,0];if(h){var y=h.toString(),d=u.get("text-letter-spacing").evaluate(o,{})*_s,m=function(t){for(var e=0,r=t;e<r.length;e+=1)if(!Bn(r[e].charCodeAt(0)))return!1;return!0}(y)?d:0,b=u.get("text-anchor").evaluate(o,{}),k=u.get("text-variable-anchor");if(!k){var S=u.get("text-radial-offset").evaluate(o,{});f=S?Cl(b,[S*_s,zl]):u.get("text-offset").evaluate(o,{}).map((function(t){return t*_s}))}var I=g?"center":u.get("text-justify").evaluate(o,{}),z=u.get("symbol-placement"),C="point"===z?u.get("text-max-width").evaluate(o,{})*_s:0,B=function(){t.allowVerticalPlacement&&Cn(y)&&(c.vertical=ks(h,e,s,C,v,b,"left",m,f,ws.vertical,!0,z))};if(!g&&k){for(var P="auto"===I?k.map((function(t){return Bl(t)})):[I],E=!1,M=0;M<P.length;M++){var T=P[M];if(!c.horizontal[T])if(E)c.horizontal[T]=c.horizontal[0];else{var V=ks(h,e,s,C,v,"center",T,m,f,ws.horizontal,!1,z);V&&(c.horizontal[T]=V,E=1===V.lineCount)}}B()}else{"auto"===I&&(I=Bl(b));var F=ks(h,e,s,C,v,b,I,m,f,ws.horizontal,!1,z);F&&(c.horizontal[I]=F),B(),Cn(y)&&g&&x&&(c.vertical=ks(h,e,s,C,v,b,I,m,f,ws.vertical,!1,z))}}var O=void 0;if(o.icon&&o.icon.name){var L=n[o.icon.name];L&&(O=function(t,e,r){var n=Es(r),i=n.horizontalAlign,a=n.verticalAlign,o=e[0],s=e[1],u=o-t.displaySize[0]*i,l=u+t.displaySize[0],p=s-t.displaySize[1]*a;return{image:t,top:p,bottom:p+t.displaySize[1],left:u,right:l}}(a[o.icon.name],u.get("icon-offset").evaluate(o,{}),u.get("icon-anchor").evaluate(o,{})),void 0===t.sdfIcons?t.sdfIcons=L.sdf:t.sdfIcons!==L.sdf&&w("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),L.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==u.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}(Object.keys(c.horizontal).length||O)&&function(t,e,r,n,a,o,s){var u=o.layoutTextSize.evaluate(e,{}),l=o.layoutIconSize.evaluate(e,{}),p=o.textMaxSize.evaluate(e,{});void 0===p&&(p=u);var c,h=t.layers[0].layout,f=h.get("icon-offset").evaluate(e,{}),y=function(t){for(var e in t)return t[e];return null}(r.horizontal),d=u/24,m=t.tilePixelRatio*d,v=t.tilePixelRatio*p/24,g=t.tilePixelRatio*l,x=t.tilePixelRatio*h.get("symbol-spacing"),b=h.get("text-padding")*t.tilePixelRatio,_=h.get("icon-padding")*t.tilePixelRatio,A=h.get("text-max-angle")/180*Math.PI,k="map"===h.get("text-rotation-alignment")&&"point"!==h.get("symbol-placement"),S="map"===h.get("icon-rotation-alignment")&&"point"!==h.get("symbol-placement"),I=h.get("symbol-placement"),z=x/2,C=h.get("icon-text-fit");n&&"none"!==C&&(t.allowVerticalPlacement&&r.vertical&&(c=Ts(n,r.vertical,C,h.get("icon-text-fit-padding"),f,d)),y&&(n=Ts(n,y,C,h.get("icon-text-fit-padding"),f,d)));var B=function(i,u){u.x<0||u.x>=ha||u.y<0||u.y>=ha||function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,_){var A,k,S,I,z,C=t.addToLineVertexArray(e,r),B=0,P=0,E=0,M=0,T=-1,V=-1,F={},O=Al(""),L=0,D=0;if(void 0===o._unevaluatedLayout.getValue("text-radial-offset")?(L=(A=o.layout.get("text-offset").evaluate(x,{}).map((function(t){return t*_s})))[0],D=A[1]):(L=o.layout.get("text-radial-offset").evaluate(x,{})*_s,D=zl),t.allowVerticalPlacement&&n.vertical){var U=o.layout.get("text-rotate").evaluate(x,{})+90,R=n.vertical;I=new dl(s,r,e,u,l,p,R,c,h,f,t.overscaling,U),a&&(z=new dl(s,r,e,u,l,p,a,d,m,f,t.overscaling,U))}if(i){var j=o.layout.get("icon-rotate").evaluate(x,{}),q=yl(i,j),N=a?yl(a,j):void 0;S=new dl(s,r,e,u,l,p,i,d,m,!1,t.overscaling,j),B=4*q.length;var K=t.iconSizeData,X=null;"source"===K.kind?(X=[Fs*o.layout.get("icon-size").evaluate(x,{})])[0]>Pl&&w(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===K.kind&&((X=[Fs*_.compositeIconSizes[0].evaluate(x,{}),Fs*_.compositeIconSizes[1].evaluate(x,{})])[0]>Pl||X[1]>Pl)&&w(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),t.addSymbols(t.icon,q,X,g,v,x,!1,e,C.lineStartIndex,C.lineLength,-1),T=t.icon.placedSymbolArray.length-1,N&&(P=4*N.length,t.addSymbols(t.icon,N,X,g,v,x,ws.vertical,e,C.lineStartIndex,C.lineLength,-1),V=t.icon.placedSymbolArray.length-1)}for(var Z in n.horizontal){var G=n.horizontal[Z];if(!k){O=Al(G.text);var J=o.layout.get("text-rotate").evaluate(x,{});k=new dl(s,r,e,u,l,p,G,c,h,f,t.overscaling,J)}var H=1===G.lineCount;if(E+=El(t,e,G,o,f,x,y,C,n.vertical?ws.horizontal:ws.horizontalOnly,H?Object.keys(n.horizontal):[Z],F,b,T,_),H)break}n.vertical&&(M+=El(t,e,n.vertical,o,f,x,y,C,ws.vertical,["vertical"],F,b,V,_));var Y=k?k.boxStartIndex:t.collisionBoxArray.length,$=k?k.boxEndIndex:t.collisionBoxArray.length,W=I?I.boxStartIndex:t.collisionBoxArray.length,Q=I?I.boxEndIndex:t.collisionBoxArray.length,tt=S?S.boxStartIndex:t.collisionBoxArray.length,et=S?S.boxEndIndex:t.collisionBoxArray.length,rt=z?z.boxStartIndex:t.collisionBoxArray.length,nt=z?z.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=Zs.MAX_GLYPHS&&w("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),t.symbolInstances.emplaceBack(e.x,e.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,T,V,O,Y,$,W,Q,tt,et,rt,nt,u,E,M,B,P,0,c,L,D)}(t,u,i,r,n,c,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,m,b,k,s,g,_,S,f,e,a,o)};if("line"===I)for(var P=0,E=function(t,e,r,n,a){for(var o=[],s=0;s<t.length;s++)for(var u=t[s],l=void 0,p=0;p<u.length-1;p++){var c=u[p],h=u[p+1];c.x<0&&h.x<0||(c.x<0?c=new i(0,c.y+(h.y-c.y)*((0-c.x)/(h.x-c.x)))._round():h.x<0&&(h=new i(0,c.y+(h.y-c.y)*((0-c.x)/(h.x-c.x)))._round()),c.y<0&&h.y<0||(c.y<0?c=new i(c.x+(h.x-c.x)*((0-c.y)/(h.y-c.y)),0)._round():h.y<0&&(h=new i(c.x+(h.x-c.x)*((0-c.y)/(h.y-c.y)),0)._round()),c.x>=n&&h.x>=n||(c.x>=n?c=new i(n,c.y+(h.y-c.y)*((n-c.x)/(h.x-c.x)))._round():h.x>=n&&(h=new i(n,c.y+(h.y-c.y)*((n-c.x)/(h.x-c.x)))._round()),c.y>=a&&h.y>=a||(c.y>=a?c=new i(c.x+(h.x-c.x)*((a-c.y)/(h.y-c.y)),a)._round():h.y>=a&&(h=new i(c.x+(h.x-c.x)*((a-c.y)/(h.y-c.y)),a)._round()),l&&c.equals(l[l.length-1])||(l=[c],o.push(l)),l.push(h)))))}return o}(e.geometry,0,0,ha,ha);P<E.length;P+=1)for(var M=E[P],V=0,F=fl(M,x,A,r.vertical||y,n,24,v,t.overscaling,ha);V<F.length;V+=1){var O=F[V];y&&Ml(t,y.text,z,O)||B(M,O)}else if("line-center"===I)for(var D=0,U=e.geometry;D<U.length;D+=1){var R=U[D];if(R.length>1){var j=hl(R,A,r.vertical||y,n,24,v);j&&B(R,j)}}else if("Polygon"===e.type)for(var q=0,N=Po(e.geometry,0);q<N.length;q+=1){var K=N[q],X=gl(K,16);B(K[0],new Vs(X.x,X.y,0))}else if("LineString"===e.type)for(var Z=0,G=e.geometry;Z<G.length;Z+=1){var J=G[Z];B(J,new Vs(J[0].x,J[0].y,0))}else if("Point"===e.type)for(var H=0,Y=e.geometry;H<Y.length;H+=1)for(var W=0,Q=Y[H];W<Q.length;W+=1){var tt=Q[W];B([tt],new Vs(tt.x,tt.y,0))}}(t,o,c,O,l,p,f)},_=0,A=t.features;_<A.length;_+=1)b();o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,r,n,i){var a,o=1/Math.tan(e/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(n-i),t[10]=(i+n)*a,t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n];i in t&&(r[i]=t[i])}return r},t.plugin=jn,t.polygonIntersectsPolygon=ga,t.postMapLoadEvent=et,t.postTurnstileEvent=Q,t.potpack=nu,t.rasterBoundsAttributes=Qu,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=_n,t.registerForPluginAvailability=function(t){return Un?t({pluginURL:Un,completionCallback:Tn}):Rn.once("pluginAvailable",t),t},t.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=i*u+o*s,t[2]=n*-s+a*u,t[3]=i*-s+o*u,t},t.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],p=e[9],c=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+l*n,t[5]=o*i+p*n,t[6]=s*i+c*n,t[7]=u*i+h*n,t[8]=l*i-a*n,t[9]=p*i-o*n,t[10]=c*i-s*n,t[11]=h*i-u*n,t},t.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],u=e[3],l=e[4],p=e[5],c=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+l*n,t[1]=o*i+p*n,t[2]=s*i+c*n,t[3]=u*i+h*n,t[4]=l*i-a*n,t[5]=p*i-o*n,t[6]=c*i-s*n,t[7]=h*i-u*n,t},t.scale=function(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.setCacheLimits=function(t,e){nt=t,it=e},t.setRTLTextPlugin=function(t,e){if(Dn===Fn||Dn===On)throw new Error("setRTLTextPlugin cannot be called multiple times.");Dn=Fn,Un=V.resolveURL(t),Tn=function(t){t?(Dn=Vn,Un=null,Dn="error",e&&e(t)):Dn=On},Rn.fire(new At("pluginAvailable",{pluginURL:Un,completionCallback:Tn}))},t.sphericalToCartesian=function(t){var e=t[0],r=t[1],n=t[2];return r+=90,r*=Math.PI/180,n*=Math.PI/180,{x:e*Math.cos(r)*Math.sin(n),y:e*Math.sin(r)*Math.sin(n),z:e*Math.cos(n)}},t.styleSpec=It,t.symbolSize=Us,t.transformMat3=function(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t},t.transformMat4=La,t.translate=function(t,e,r){var n,i,a,o,s,u,l,p,c,h,f,y,d=r[0],m=r[1],v=r[2];return e===t?(t[12]=e[0]*d+e[4]*m+e[8]*v+e[12],t[13]=e[1]*d+e[5]*m+e[9]*v+e[13],t[14]=e[2]*d+e[6]*m+e[10]*v+e[14],t[15]=e[3]*d+e[7]*m+e[11]*v+e[15]):(n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],h=e[9],f=e[10],y=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=l,t[7]=p,t[8]=c,t[9]=h,t[10]=f,t[11]=y,t[12]=n*d+s*m+c*v+e[12],t[13]=i*d+u*m+h*v+e[13],t[14]=a*d+l*m+f*v+e[14],t[15]=o*d+p*m+y*v+e[15]),t},t.uniqueId=f,t.validateCustomStyleLayer=function(t){var e=[],r=t.id;return void 0===r&&e.push({message:"layers."+r+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+r+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=hn,t.validateStyle=cn,t.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},t.vectorTile=Go,t.version="1.5.0",t.warnOnce=w,t.webpSupported=O,t.window=self,t.wrap=p})),define(0,(function(e){function t(e){var r=typeof e;if("number"===r||"boolean"===r||"string"===r||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var i="[",n=0,o=e;n<o.length;n+=1)i+=t(o[n])+",";return i+"]"}for(var s=Object.keys(e).sort(),a="{",u=0;u<s.length;u++)a+=JSON.stringify(s[u])+":"+t(e[s[u]])+",";return a+"}"}function r(r){for(var i="",n=0,o=e.refProperties;n<o.length;n+=1)i+="/"+t(r[o[n]]);return i}var i=function(e){this.keyCache={},e&&this.replace(e)};i.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},i.prototype.update=function(t,i){for(var n=this,o=0,s=t;o<s.length;o+=1){var a=s[o];this._layerConfigs[a.id]=a;var u=this._layers[a.id]=e.createStyleLayer(a);u._featureFilter=e.featureFilter(u.filter),this.keyCache[a.id]&&delete this.keyCache[a.id]}for(var l=0,h=i;l<h.length;l+=1){var c=h[l];delete this.keyCache[c],delete this._layerConfigs[c],delete this._layers[c]}this.familiesBySource={};for(var f=0,p=function(e,t){for(var i={},n=0;n<e.length;n++){var o=t&&t[e[n].id]||r(e[n]);t&&(t[e[n].id]=o);var s=i[o];s||(s=i[o]=[]),s.push(e[n])}var a=[];for(var u in i)a.push(i[u]);return a}(e.values(this._layerConfigs),this.keyCache);f<p.length;f+=1){var d=p[f].map((function(e){return n._layers[e.id]})),g=d[0];if("none"!==g.visibility){var m=g.source||"",v=this.familiesBySource[m];v||(v=this.familiesBySource[m]={});var y=g.sourceLayer||"_geojsonTileLayer",w=v[y];w||(w=v[y]=[]),w.push(d)}}};var n=function(t){var r={},i=[];for(var n in t){var o=t[n],s=r[n]={};for(var a in o){var u=o[+a];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};i.push(l),s[a]={rect:l,metrics:u.metrics}}}}var h=e.potpack(i),c=h.w,f=h.h,p=new e.AlphaImage({width:c||1,height:f||1});for(var d in t){var g=t[d];for(var m in g){var v=g[+m];if(v&&0!==v.bitmap.width&&0!==v.bitmap.height){var y=r[d][m].rect;e.AlphaImage.copy(v.bitmap,p,{x:0,y:0},{x:y.x+1,y:y.y+1},v.bitmap)}}}this.image=p,this.positions=r};e.register("GlyphAtlas",n);var o=function(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies};function s(t,r,i){for(var n=new e.EvaluationParameters(r),o=0,s=t;o<s.length;o+=1)s[o].recalculate(n,i)}o.prototype.parse=function(t,r,i,o,a){var u=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var l=new e.DictionaryCoder(Object.keys(t.layers).sort()),h=new e.FeatureIndex(this.tileID);h.bucketLayerIDs=[];var c,f,p,d,g={},m={featureIndex:h,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},v=r.familiesBySource[this.source];for(var y in v){var w=t.layers[y];if(w){1===w.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var x=l.encode(y),b=[],S=0;S<w.length;S++){var M=w.feature(S);b.push({feature:M,index:S,sourceLayerIndex:x})}for(var k=0,F=v[y];k<F.length;k+=1){var P=F[k],I=P[0];I.minzoom&&this.zoom<Math.floor(I.minzoom)||I.maxzoom&&this.zoom>=I.maxzoom||"none"!==I.visibility&&(s(P,this.zoom,i),(g[I.id]=I.createBucket({index:h.bucketLayerIDs.length,layers:P,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:x,sourceID:this.source})).populate(b,m),h.bucketLayerIDs.push(P.map((function(e){return e.id}))))}}}var T=e.mapObject(m.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(T).length?o.send("getGlyphs",{uid:this.uid,stacks:T},(function(e,t){c||(c=e,f=t,L.call(u))})):f={};var _=Object.keys(m.iconDependencies);_.length?o.send("getImages",{icons:_},(function(e,t){c||(c=e,p=t,L.call(u))})):p={};var D=Object.keys(m.patternDependencies);function L(){if(c)return a(c);if(f&&p&&d){var t=new n(f),r=new e.ImageAtlas(p,d);for(var o in g){var u=g[o];u instanceof e.SymbolBucket?(s(u.layers,this.zoom,i),e.performSymbolLayout(u,f,t.positions,p,r.iconPositions,this.showCollisionBoxes)):u.hasPattern&&(u instanceof e.LineBucket||u instanceof e.FillBucket||u instanceof e.FillExtrusionBucket)&&(s(u.layers,this.zoom,i),u.addFeatures(m,r.patternPositions))}this.status="done",a(null,{buckets:e.values(g).filter((function(e){return!e.isEmpty()})),featureIndex:h,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:r,glyphMap:this.returnDependencies?f:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?t.positions:null})}}D.length?o.send("getImages",{icons:D},(function(e,t){c||(c=e,d=t,L.call(u))})):d={},L.call(this)};var a="undefined"!=typeof performance,u={getEntriesByName:function(e){return!!(a&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(e)},mark:function(e){return!!(a&&performance&&performance.mark)&&performance.mark(e)},measure:function(e,t,r){return!!(a&&performance&&performance.measure)&&performance.measure(e,t,r)},clearMarks:function(e){return!!(a&&performance&&performance.clearMarks)&&performance.clearMarks(e)},clearMeasures:function(e){return!!(a&&performance&&performance.clearMeasures)&&performance.clearMeasures(e)}},l=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},u.mark(this._marks.start)};function h(t,r){var i=e.getArrayBuffer(t.request,(function(t,i,n,o){t?r(t):i&&r(null,{vectorTile:new e.vectorTile.VectorTile(new e.Protobuf(i)),rawData:i,cacheControl:n,expires:o})}));return function(){i.cancel(),r()}}l.prototype.finish=function(){u.mark(this._marks.end);var e=u.getEntriesByName(this._marks.measure);return 0===e.length&&(u.measure(this._marks.measure,this._marks.start,this._marks.end),e=u.getEntriesByName(this._marks.measure),u.clearMarks(this._marks.start),u.clearMarks(this._marks.end),u.clearMeasures(this._marks.measure)),e},u.Performance=l;var c=function(e,t,r,i){this.actor=e,this.layerIndex=t,this.availableImages=r,this.loadVectorData=i||h,this.loading={},this.loaded={}};c.prototype.loadTile=function(t,r){var i=this,n=t.uid;this.loading||(this.loading={});var s=!!(t&&t.request&&t.request.collectResourceTiming)&&new u.Performance(t.request),a=this.loading[n]=new o(t);a.abort=this.loadVectorData(t,(function(t,o){if(delete i.loading[n],t||!o)return a.status="done",i.loaded[n]=a,r(t);var u=o.rawData,l={};o.expires&&(l.expires=o.expires),o.cacheControl&&(l.cacheControl=o.cacheControl);var h={};if(s){var c=s.finish();c&&(h.resourceTiming=JSON.parse(JSON.stringify(c)))}a.vectorTile=o.vectorTile,a.parse(o.vectorTile,i.layerIndex,i.availableImages,i.actor,(function(t,i){if(t||!i)return r(t);r(null,e.extend({rawTileData:u.slice(0)},i,l,h))})),i.loaded=i.loaded||{},i.loaded[n]=a}))},c.prototype.reloadTile=function(e,t){var r=this,i=this.loaded,n=e.uid,o=this;if(i&&i[n]){var s=i[n];s.showCollisionBoxes=e.showCollisionBoxes;var a=function(e,i){var n=s.reloadCallback;n&&(delete s.reloadCallback,s.parse(s.vectorTile,o.layerIndex,r.availableImages,o.actor,n)),t(e,i)};"parsing"===s.status?s.reloadCallback=a:"done"===s.status&&(s.vectorTile?s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}},c.prototype.abortTile=function(e,t){var r=this.loading,i=e.uid;r&&r[i]&&r[i].abort&&(r[i].abort(),delete r[i]),t()},c.prototype.removeTile=function(e,t){var r=this.loaded,i=e.uid;r&&r[i]&&delete r[i],t()};var f=function(){this.loaded={}};f.prototype.loadTile=function(t,r){var i=t.uid,n=t.encoding,o=t.rawImageData,s=new e.DEMData(i,o,n);this.loaded=this.loaded||{},this.loaded[i]=s,r(null,s)},f.prototype.removeTile=function(e){var t=this.loaded,r=e.uid;t&&t[r]&&delete t[r]};var p={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function d(e){var t=0;if(e&&e.length>0){t+=Math.abs(g(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(g(e[r]))}return t}function g(e){var t,r,i,n,o,s,a=0,u=e.length;if(u>2){for(s=0;s<u;s++)s===u-2?(i=u-2,n=u-1,o=0):s===u-1?(i=u-1,n=0,o=1):(i=s,n=s+1,o=s+2),t=e[i],r=e[n],a+=(m(e[o][0])-m(t[0]))*Math.sin(m(r[1]));a=a*p.RADIUS*p.RADIUS/2}return a}function m(e){return e*Math.PI/180}var v={geometry:function e(t){var r,i=0;switch(t.type){case"Polygon":return d(t.coordinates);case"MultiPolygon":for(r=0;r<t.coordinates.length;r++)i+=d(t.coordinates[r]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<t.geometries.length;r++)i+=e(t.geometries[r]);return i}},ring:g};function w(e,t){return function(r){return e(r,t)}}function x(e,t){t=!!t,e[0]=b(e[0],t);for(var r=1;r<e.length;r++)e[r]=b(e[r],!t);return e}function b(e,t){return function(e){return v.ring(e)>=0}(e)===t?e:e.reverse()}var S=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,M=function(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};M.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],r=0,i=this._feature.geometry;r<i.length;r+=1){var n=i[r];t.push([new e.Point$1(n[0],n[1])])}return t}for(var o=[],s=0,a=this._feature.geometry;s<a.length;s+=1){for(var u=[],l=0,h=a[s];l<h.length;l+=1){var c=h[l];u.push(new e.Point$1(c[0],c[1]))}o.push(u)}return o},M.prototype.toGeoJSON=function(e,t,r){return S.call(this,e,t,r)};var k=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t};k.prototype.feature=function(e){return new M(this._features[e])};var F=P;function P(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function I(e){return e.type===P.Bytes?e.readVarint()+e.pos:e.pos+1}function T(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function _(e,t,r){var i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(i);for(var n=r.pos-1;n>=e;n--)r.buf[n+i]=r.buf[n]}function D(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function L(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function B(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function V(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function C(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function z(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function E(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function O(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function N(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function A(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function J(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function G(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}P.Varint=0,P.Fixed64=1,P.Bytes=2,P.Fixed32=5,P.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var i=this.readVarint(),n=i>>3,o=this.pos;this.type=7&i,e(n,t,this),this.pos===o&&this.skip(i)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=A(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=G(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=A(this.buf,this.pos)+4294967296*A(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=A(this.buf,this.pos)+4294967296*G(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var t=e.ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=e.ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(e){var t,r,i=this.buf;return t=127&(r=i[this.pos++]),r<128?t:(t|=(127&(r=i[this.pos++]))<<7,r<128?t:(t|=(127&(r=i[this.pos++]))<<14,r<128?t:(t|=(127&(r=i[this.pos++]))<<21,r<128?t:function(e,t,r){var i,n,o=r.buf;if(i=(112&(n=o[r.pos++]))>>4,n<128)return T(e,i,t);if(i|=(127&(n=o[r.pos++]))<<3,n<128)return T(e,i,t);if(i|=(127&(n=o[r.pos++]))<<10,n<128)return T(e,i,t);if(i|=(127&(n=o[r.pos++]))<<17,n<128)return T(e,i,t);if(i|=(127&(n=o[r.pos++]))<<24,n<128)return T(e,i,t);if(i|=(1&(n=o[r.pos++]))<<31,n<128)return T(e,i,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=i[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=function(e,t,r){for(var i="",n=t;n<r;){var o,s,a,u=e[n],l=null,h=u>239?4:u>223?3:u>191?2:1;if(n+h>r)break;1===h?u<128&&(l=u):2===h?128==(192&(o=e[n+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===h?(o=e[n+1],s=e[n+2],128==(192&o)&&128==(192&s)&&((l=(15&u)<<12|(63&o)<<6|63&s)<=2047||l>=55296&&l<=57343)&&(l=null)):4===h&&(o=e[n+1],s=e[n+2],a=e[n+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&((l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,h=1):l>65535&&(l-=65536,i+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),i+=String.fromCharCode(l),n+=h}return i}(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==P.Bytes)return e.push(this.readVarint(t));var r=I(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==P.Bytes)return e.push(this.readSVarint());var t=I(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==P.Bytes)return e.push(this.readBoolean());var t=I(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==P.Bytes)return e.push(this.readFloat());var t=I(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==P.Bytes)return e.push(this.readDouble());var t=I(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==P.Bytes)return e.push(this.readFixed32());var t=I(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==P.Bytes)return e.push(this.readSFixed32());var t=I(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==P.Bytes)return e.push(this.readFixed64());var t=I(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==P.Bytes)return e.push(this.readSFixed64());var t=I(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===P.Varint)for(;this.buf[this.pos++]>127;);else if(t===P.Bytes)this.pos=this.readVarint()+this.pos;else if(t===P.Fixed32)this.pos+=4;else{if(t!==P.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),J(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),J(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),J(this.buf,-1&e,this.pos),J(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),J(this.buf,-1&e,this.pos),J(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,i;if(e>=0?(r=e%4294967296|0,i=e/4294967296|0):(i=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,i=i+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos]=127&e}(r,0,t),function(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(i,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var i,n,o=0;o<t.length;o++){if((i=t.charCodeAt(o))>55295&&i<57344){if(!n){i>56319||o+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):n=i;continue}if(i<56320){e[r++]=239,e[r++]=191,e[r++]=189,n=i;continue}i=n-55296<<10|i-56320|65536,n=null}else n&&(e[r++]=239,e[r++]=191,e[r++]=189,n=null);i<128?e[r++]=i:(i<2048?e[r++]=i>>6|192:(i<65536?e[r++]=i>>12|224:(e[r++]=i>>18|240,e[r++]=i>>12&63|128),e[r++]=i>>6&63|128),e[r++]=63&i|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&_(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),e.ieee754.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),e.ieee754.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var i=this.pos-r;i>=128&&_(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeMessage:function(e,t,r){this.writeTag(e,P.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,D,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,L,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,C,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,B,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,V,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,z,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,E,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,O,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,N,t)},writeBytesField:function(e,t){this.writeTag(e,P.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,P.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,P.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,P.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,P.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,P.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,P.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,P.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,P.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,P.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Z=e.vectorTile.VectorTileFeature,j=Y;function Y(e,t){this.options=t||{},this.features=e,this.length=e.length}function X(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}Y.prototype.feature=function(e){return new X(this.features[e],this.options.extent)},X.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var r=0;r<t.length;r++){for(var i=t[r],n=[],o=0;o<i.length;o++)n.push(new e.Point$1(i[o][0],i[o][1]));this.geometry.push(n)}return this.geometry},X.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,i=1/0,n=-1/0,o=0;o<e.length;o++)for(var s=e[o],a=0;a<s.length;a++){var u=s[a];t=Math.min(t,u.x),r=Math.max(r,u.x),i=Math.min(i,u.y),n=Math.max(n,u.y)}return[t,i,r,n]},X.prototype.toGeoJSON=Z.prototype.toGeoJSON;var R=$,W=$,U=j;function $(e){var t=new F;return function(e,t){for(var r in e.layers)t.writeMessage(3,H,e.layers[r])}(e,t),t.finish()}function H(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)i.feature=e.feature(r),t.writeMessage(2,K,i);var n=i.keys;for(r=0;r<n.length;r++)t.writeStringField(3,n[r]);var o=i.values;for(r=0;r<o.length;r++)t.writeMessage(4,ie,o[r])}function K(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,Q,e),t.writeVarintField(3,r.type),t.writeMessage(4,re,r)}function Q(e,t){var r=e.feature,i=e.keys,n=e.values,o=e.keycache,s=e.valuecache;for(var a in r.properties){var u=o[a];void 0===u&&(i.push(a),u=i.length-1,o[a]=u),t.writeVarint(u);var l=r.properties[a],h=typeof l;"string"!==h&&"boolean"!==h&&"number"!==h&&(l=JSON.stringify(l));var c=h+":"+l,f=s[c];void 0===f&&(n.push(l),f=n.length-1,s[c]=f),t.writeVarint(f)}}function ee(e,t){return(t<<3)+(7&e)}function te(e){return e<<1^e>>31}function re(e,t){for(var r=e.loadGeometry(),i=e.type,n=0,o=0,s=r.length,a=0;a<s;a++){var u=r[a],l=1;1===i&&(l=u.length),t.writeVarint(ee(1,l));for(var h=3===i?u.length-1:u.length,c=0;c<h;c++){1===c&&1!==i&&t.writeVarint(ee(2,h-1));var f=u[c].x-n,p=u[c].y-o;t.writeVarint(te(f)),t.writeVarint(te(p)),n+=f,o+=p}3===i&&t.writeVarint(ee(7,1))}}function ie(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function oe(e,t,r,i){se(e,r,i),se(t,2*r,2*i),se(t,2*r+1,2*i+1)}function se(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function ae(e,t,r,i){var n=e-r,o=t-i;return n*n+o*o}R.fromVectorTileJs=W,R.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var i in e)r[i]=new j(e[i].features,t),r[i].name=i,r[i].version=t.version,r[i].extent=t.extent;return $({layers:r})},R.GeoJSONWrapper=U;var ue=function(e){return e[0]},le=function(e){return e[1]},he=function(e,t,r,i,n){void 0===t&&(t=ue),void 0===r&&(r=le),void 0===i&&(i=64),void 0===n&&(n=Float64Array),this.nodeSize=i,this.points=e;for(var o=e.length<65536?Uint16Array:Uint32Array,s=this.ids=new o(e.length),a=this.coords=new n(2*e.length),u=0;u<e.length;u++)s[u]=u,a[2*u]=t(e[u]),a[2*u+1]=r(e[u]);!function ne(e,t,r,i,n,o){if(!(n-i<=r)){var s=i+n>>1;!function e(t,r,i,n,o,s){for(;o>n;){if(o-n>600){var a=o-n+1,u=i-n+1,l=Math.log(a),h=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*h*(a-h)/a)*(u-a/2<0?-1:1);e(t,r,i,Math.max(n,Math.floor(i-u*h/a+c)),Math.min(o,Math.floor(i+(a-u)*h/a+c)),s)}var d=r[2*i+s],g=n,m=o;for(oe(t,r,n,i),r[2*o+s]>d&&oe(t,r,n,o);g<m;){for(oe(t,r,g,m),g++,m--;r[2*g+s]<d;)g++;for(;r[2*m+s]>d;)m--}r[2*n+s]===d?oe(t,r,n,m):oe(t,r,++m,o),m<=i&&(n=m+1),i<=m&&(o=m-1)}}(e,t,s,i,n,o%2),ne(e,t,r,i,s-1,o+1),ne(e,t,r,s+1,n,o+1)}}(s,a,i,0,s.length-1,0)};he.prototype.range=function(e,t,r,i){return function(e,t,r,i,n,o,s){for(var a,u,l=[0,e.length-1,0],h=[];l.length;){var c=l.pop(),f=l.pop(),p=l.pop();if(f-p<=s)for(var d=p;d<=f;d++)a=t[2*d],u=t[2*d+1],a>=r&&a<=n&&u>=i&&u<=o&&h.push(e[d]);else{var g=Math.floor((p+f)/2);a=t[2*g],u=t[2*g+1],a>=r&&a<=n&&u>=i&&u<=o&&h.push(e[g]);var m=(c+1)%2;(0===c?r<=a:i<=u)&&(l.push(p),l.push(g-1),l.push(m)),(0===c?n>=a:o>=u)&&(l.push(g+1),l.push(f),l.push(m))}}return h}(this.ids,this.coords,e,t,r,i,this.nodeSize)},he.prototype.within=function(e,t,r){return function(e,t,r,i,n,o){for(var s=[0,e.length-1,0],a=[],u=n*n;s.length;){var l=s.pop(),h=s.pop(),c=s.pop();if(h-c<=o)for(var f=c;f<=h;f++)ae(t[2*f],t[2*f+1],r,i)<=u&&a.push(e[f]);else{var p=Math.floor((c+h)/2),d=t[2*p],g=t[2*p+1];ae(d,g,r,i)<=u&&a.push(e[p]);var m=(l+1)%2;(0===l?r-n<=d:i-n<=g)&&(s.push(c),s.push(p-1),s.push(m)),(0===l?r+n>=d:i+n>=g)&&(s.push(p+1),s.push(h),s.push(m))}}return a}(this.ids,this.coords,e,t,r,this.nodeSize)};var ce={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(e){return e}},fe=function(e){this.options=we(Object.create(ce),e),this.trees=new Array(this.options.maxZoom+1)};function pe(e,t,r,i,n){return{x:e,y:t,zoom:1/0,id:r,parentId:-1,numPoints:i,properties:n}}function de(e,t){var r=e.geometry.coordinates,i=r[0],n=r[1];return{x:ve(i),y:ye(n),zoom:1/0,index:t,parentId:-1}}function ge(e){return{type:"Feature",id:e.id,properties:me(e),geometry:{type:"Point",coordinates:[(i=e.x,360*(i-.5)),(t=e.y,r=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var t,r,i}function me(e){var t=e.numPoints,r=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return we(we({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function ve(e){return e/360+.5}function ye(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function we(e,t){for(var r in t)e[r]=t[r];return e}function xe(e){return e.x}function be(e){return e.y}function Se(e,t,r,i,n,o){var s=n-r,a=o-i;if(0!==s||0!==a){var u=((e-r)*s+(t-i)*a)/(s*s+a*a);u>1?(r=n,i=o):u>0&&(r+=s*u,i+=a*u)}return(s=e-r)*s+(a=t-i)*a}function Me(e,t,r,i){var n={id:void 0===e?null:e,type:t,geometry:r,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)ke(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var i=0;i<t.length;i++)ke(e,t[i]);else if("MultiPolygon"===r)for(i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++)ke(e,t[i][n])}(n),n}function ke(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function Fe(e,t,r,i){if(t.geometry){var n=t.geometry.coordinates,o=t.geometry.type,s=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),a=[],u=t.id;if(r.promoteId?u=t.properties[r.promoteId]:r.generateId&&(u=i||0),"Point"===o)Pe(n,a);else if("MultiPoint"===o)for(var l=0;l<n.length;l++)Pe(n[l],a);else if("LineString"===o)Ie(n,a,s,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(l=0;l<n.length;l++)a=[],Ie(n[l],a,s,!1),e.push(Me(u,"LineString",a,t.properties));return}Te(n,a,s,!1)}else if("Polygon"===o)Te(n,a,s,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<t.geometry.geometries.length;l++)Fe(e,{id:u,geometry:t.geometry.geometries[l],properties:t.properties},r,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<n.length;l++){var h=[];Te(n[l],h,s,!0),a.push(h)}}e.push(Me(u,o,a,t.properties))}}function Pe(e,t){t.push(_e(e[0])),t.push(De(e[1])),t.push(0)}function Ie(e,t,r,i){for(var n,o,s=0,a=0;a<e.length;a++){var u=_e(e[a][0]),l=De(e[a][1]);t.push(u),t.push(l),t.push(0),a>0&&(s+=i?(n*l-u*o)/2:Math.sqrt(Math.pow(u-n,2)+Math.pow(l-o,2))),n=u,o=l}var h=t.length-3;t[2]=1,function e(t,r,i,n){for(var o,s=n,a=i-r>>1,u=i-r,l=t[r],h=t[r+1],c=t[i],f=t[i+1],p=r+3;p<i;p+=3){var d=Se(t[p],t[p+1],l,h,c,f);if(d>s)o=p,s=d;else if(d===s){var g=Math.abs(p-a);g<u&&(o=p,u=g)}}s>n&&(o-r>3&&e(t,r,o,n),t[o+2]=s,i-o>3&&e(t,o,i,n))}(t,0,h,r),t[h+2]=1,t.size=Math.abs(s),t.start=0,t.end=t.size}function Te(e,t,r,i){for(var n=0;n<e.length;n++){var o=[];Ie(e[n],o,r,i),t.push(o)}}function _e(e){return e/360+.5}function De(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Le(e,t,r,i,n,o,s,a){if(i/=t,o>=(r/=t)&&s<i)return e;if(s<r||o>=i)return null;for(var u=[],l=0;l<e.length;l++){var h=e[l],c=h.geometry,f=h.type,p=0===n?h.minX:h.minY,d=0===n?h.maxX:h.maxY;if(p>=r&&d<i)u.push(h);else if(!(d<r||p>=i)){var g=[];if("Point"===f||"MultiPoint"===f)Be(c,g,r,i,n);else if("LineString"===f)Ve(c,g,r,i,n,!1,a.lineMetrics);else if("MultiLineString"===f)ze(c,g,r,i,n,!1);else if("Polygon"===f)ze(c,g,r,i,n,!0);else if("MultiPolygon"===f)for(var m=0;m<c.length;m++){var v=[];ze(c[m],v,r,i,n,!0),v.length&&g.push(v)}if(g.length){if(a.lineMetrics&&"LineString"===f){for(m=0;m<g.length;m++)u.push(Me(h.id,f,g[m],h.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===g.length?(f="LineString",g=g[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===g.length?"Point":"MultiPoint"),u.push(Me(h.id,f,g,h.tags))}}}return u.length?u:null}function Be(e,t,r,i,n){for(var o=0;o<e.length;o+=3){var s=e[o+n];s>=r&&s<=i&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function Ve(e,t,r,i,n,o,s){for(var a,u,l=Ce(e),h=0===n?Oe:Ne,c=e.start,f=0;f<e.length-3;f+=3){var p=e[f],d=e[f+1],g=e[f+2],m=e[f+3],v=e[f+4],y=0===n?p:d,w=0===n?m:v,x=!1;s&&(a=Math.sqrt(Math.pow(p-m,2)+Math.pow(d-v,2))),y<r?w>r&&(u=h(l,p,d,m,v,r),s&&(l.start=c+a*u)):y>i?w<i&&(u=h(l,p,d,m,v,i),s&&(l.start=c+a*u)):Ee(l,p,d,g),w<r&&y>=r&&(u=h(l,p,d,m,v,r),x=!0),w>i&&y<=i&&(u=h(l,p,d,m,v,i),x=!0),!o&&x&&(s&&(l.end=c+a*u),t.push(l),l=Ce(e)),s&&(c+=a)}var b=e.length-3;p=e[b],d=e[b+1],g=e[b+2],(y=0===n?p:d)>=r&&y<=i&&Ee(l,p,d,g),b=l.length-3,o&&b>=3&&(l[b]!==l[0]||l[b+1]!==l[1])&&Ee(l,l[0],l[1],l[2]),l.length&&t.push(l)}function Ce(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ze(e,t,r,i,n,o){for(var s=0;s<e.length;s++)Ve(e[s],t,r,i,n,o,!1)}function Ee(e,t,r,i){e.push(t),e.push(r),e.push(i)}function Oe(e,t,r,i,n,o){var s=(o-t)/(i-t);return e.push(o),e.push(r+(n-r)*s),e.push(1),s}function Ne(e,t,r,i,n,o){var s=(o-r)/(n-r);return e.push(t+(i-t)*s),e.push(o),e.push(1),s}function Ae(e,t){for(var r=[],i=0;i<e.length;i++){var n,o=e[i],s=o.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)n=Je(o.geometry,t);else if("MultiLineString"===s||"Polygon"===s){n=[];for(var a=0;a<o.geometry.length;a++)n.push(Je(o.geometry[a],t))}else if("MultiPolygon"===s)for(n=[],a=0;a<o.geometry.length;a++){for(var u=[],l=0;l<o.geometry[a].length;l++)u.push(Je(o.geometry[a][l],t));n.push(u)}r.push(Me(o.id,s,n,o.tags))}return r}function Je(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var i=0;i<e.length;i+=3)r.push(e[i]+t,e[i+1],e[i+2]);return r}function Ge(e,t){if(e.transformed)return e;var r,i,n,o=1<<e.z,s=e.x,a=e.y;for(r=0;r<e.features.length;r++){var u=e.features[r],l=u.geometry,h=u.type;if(u.geometry=[],1===h)for(i=0;i<l.length;i+=2)u.geometry.push(Ze(l[i],l[i+1],t,o,s,a));else for(i=0;i<l.length;i++){var c=[];for(n=0;n<l[i].length;n+=2)c.push(Ze(l[i][n],l[i][n+1],t,o,s,a));u.geometry.push(c)}}return e.transformed=!0,e}function Ze(e,t,r,i,n,o){return[Math.round(r*(e*i-n)),Math.round(r*(t*i-o))]}function je(e,t,r,i,n){for(var o=t===n.maxZoom?0:n.tolerance/((1<<t)*n.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:i,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<e.length;a++){s.numFeatures++,Ye(s,e[a],o,n);var u=e[a].minX,l=e[a].minY,h=e[a].maxX,c=e[a].maxY;u<s.minX&&(s.minX=u),l<s.minY&&(s.minY=l),h>s.maxX&&(s.maxX=h),c>s.maxY&&(s.maxY=c)}return s}function Ye(e,t,r,i){var n=t.geometry,o=t.type,s=[];if("Point"===o||"MultiPoint"===o)for(var a=0;a<n.length;a+=3)s.push(n[a]),s.push(n[a+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)Xe(s,n,e,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(a=0;a<n.length;a++)Xe(s,n[a],e,r,"Polygon"===o,0===a);else if("MultiPolygon"===o)for(var u=0;u<n.length;u++){var l=n[u];for(a=0;a<l.length;a++)Xe(s,l[a],e,r,!0,0===a)}if(s.length){var h=t.tags||null;if("LineString"===o&&i.lineMetrics){for(var c in h={},t.tags)h[c]=t.tags[c];h.mapbox_clip_start=n.start/n.size,h.mapbox_clip_end=n.end/n.size}var f={geometry:s,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:h};null!==t.id&&(f.id=t.id),e.features.push(f)}}function Xe(e,t,r,i,n,o){var s=i*i;if(i>0&&t.size<(n?s:i))r.numPoints+=t.length/3;else{for(var a=[],u=0;u<t.length;u+=3)(0===i||t[u+2]>s)&&(r.numSimplified++,a.push(t[u]),a.push(t[u+1])),r.numPoints++;n&&function(e,t){for(var r=0,i=0,n=e.length,o=n-2;i<n;o=i,i+=2)r+=(e[i]-e[o])*(e[i+1]+e[o+1]);if(r>0===t)for(i=0,n=e.length;i<n/2;i+=2){var s=e[i],a=e[i+1];e[i]=e[n-2-i],e[i+1]=e[n-1-i],e[n-2-i]=s,e[n-1-i]=a}}(a,o),e.push(a)}}function Re(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var i=0;i<e.features.length;i++)Fe(r,e.features[i],t,i);else"Feature"===e.type?Fe(r,e,t):Fe(r,{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(e,t){var r=t.buffer/t.extent,i=e,n=Le(e,1,-1-r,r,0,-1,2,t),o=Le(e,1,1-r,2+r,0,-1,2,t);return(n||o)&&(i=Le(e,1,-r,1+r,0,-1,2,t)||[],n&&(i=Ae(n,1).concat(i)),o&&(i=i.concat(Ae(o,-1)))),i}(i,t)).length&&this.splitTile(i,0,0,0),r&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function We(e,t,r){return 32*((1<<e)*r+t)+e}function qe(e,t){var r=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return t(null,null);var n=new k(i.features),o=R(n);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:n,rawData:o.buffer})}fe.prototype.load=function(e){var t=this.options,r=t.log,i=t.minZoom,n=t.maxZoom,o=t.nodeSize;r&&console.time("total time");var s="prepare "+e.length+" points";r&&console.time(s),this.points=e;for(var a=[],u=0;u<e.length;u++)e[u].geometry&&a.push(de(e[u],u));this.trees[n+1]=new he(a,xe,be,o,Float32Array),r&&console.timeEnd(s);for(var l=n;l>=i;l--){var h=+Date.now();a=this._cluster(a,l),this.trees[l]=new he(a,xe,be,o,Float32Array),r&&console.log("z%d: %d clusters in %dms",l,a.length,+Date.now()-h)}return r&&console.timeEnd("total time"),this},fe.prototype.getClusters=function(e,t){var r=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),n=180===e[2]?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,n=180;else if(r>n){var s=this.getClusters([r,i,180,o],t),a=this.getClusters([-180,i,n,o],t);return s.concat(a)}for(var u=this.trees[this._limitZoom(t)],l=[],h=0,c=u.range(ve(r),ye(o),ve(n),ye(i));h<c.length;h+=1){var f=c[h],p=u.points[f];l.push(p.numPoints?ge(p):this.points[p.index])}return l},fe.prototype.getChildren=function(e){var t=e>>5,r=e%32,i="No cluster with the specified id.",n=this.trees[r];if(!n)throw new Error(i);var o=n.points[t];if(!o)throw new Error(i);for(var s=this.options.radius/(this.options.extent*Math.pow(2,r-1)),a=[],u=0,l=n.within(o.x,o.y,s);u<l.length;u+=1){var h=l[u],c=n.points[h];c.parentId===e&&a.push(c.numPoints?ge(c):this.points[c.index])}if(0===a.length)throw new Error(i);return a},fe.prototype.getLeaves=function(e,t,r){t=t||10,r=r||0;var i=[];return this._appendLeaves(i,e,t,r,0),i},fe.prototype.getTile=function(e,t,r){var i=this.trees[this._limitZoom(e)],n=Math.pow(2,e),o=this.options,s=o.extent,a=o.radius/s,u=(r-a)/n,l=(r+1+a)/n,h={features:[]};return this._addTileFeatures(i.range((t-a)/n,u,(t+1+a)/n,l),i.points,t,r,n,h),0===t&&this._addTileFeatures(i.range(1-a/n,u,1,l),i.points,n,r,n,h),t===n-1&&this._addTileFeatures(i.range(0,u,a/n,l),i.points,-1,r,n,h),h.features.length?h:null},fe.prototype.getClusterExpansionZoom=function(e){for(var t=e%32-1;t<=this.options.maxZoom;){var r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t},fe.prototype._appendLeaves=function(e,t,r,i,n){for(var o=0,s=this.getChildren(t);o<s.length;o+=1){var a=s[o],u=a.properties;if(u&&u.cluster?n+u.point_count<=i?n+=u.point_count:n=this._appendLeaves(e,u.cluster_id,r,i,n):n<i?n++:e.push(a),e.length===r)break}return n},fe.prototype._addTileFeatures=function(e,t,r,i,n,o){for(var s=0,a=e;s<a.length;s+=1){var u=t[a[s]],l={type:1,geometry:[[Math.round(this.options.extent*(u.x*n-r)),Math.round(this.options.extent*(u.y*n-i))]],tags:u.numPoints?me(u):this.points[u.index].properties},h=u.numPoints?u.id:this.points[u.index].id;void 0!==h&&(l.id=h),o.features.push(l)}},fe.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},fe.prototype._cluster=function(e,t){for(var r=[],i=this.options,n=i.radius,o=i.extent,s=i.reduce,a=n/(o*Math.pow(2,t)),u=0;u<e.length;u++){var l=e[u];if(!(l.zoom<=t)){l.zoom=t;for(var h=this.trees[t+1],c=h.within(l.x,l.y,a),f=l.numPoints||1,p=l.x*f,d=l.y*f,g=s&&f>1?this._map(l,!0):null,m=(u<<5)+(t+1),v=0,y=c;v<y.length;v+=1){var w=y[v],x=h.points[w];if(!(x.zoom<=t)){x.zoom=t;var b=x.numPoints||1;p+=x.x*b,d+=x.y*b,f+=b,x.parentId=m,s&&(g||(g=this._map(l,!0)),s(g,this._map(x)))}}1===f?r.push(l):(l.parentId=m,r.push(pe(p/f,d/f,m,f,g)))}}return r},fe.prototype._map=function(e,t){if(e.numPoints)return t?we({},e.properties):e.properties;var r=this.points[e.index].properties,i=this.options.map(r);return t&&i===r?we({},i):i},Re.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Re.prototype.splitTile=function(e,t,r,i,n,o,s){for(var a=[e,t,r,i],u=this.options,l=u.debug;a.length;){i=a.pop(),r=a.pop(),t=a.pop(),e=a.pop();var h=1<<t,c=We(t,r,i),f=this.tiles[c];if(!f&&(l>1&&console.time("creation"),f=this.tiles[c]=je(e,t,r,i,u),this.tileCoords.push({z:t,x:r,y:i}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,i,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(f.source=e,n){if(t===u.maxZoom||t===n)continue;var d=1<<n-t;if(r!==Math.floor(o/d)||i!==Math.floor(s/d))continue}else if(t===u.indexMaxZoom||f.numPoints<=u.indexMaxPoints)continue;if(f.source=null,0!==e.length){l>1&&console.time("clipping");var g,m,v,y,w,x,b=.5*u.buffer/u.extent,S=.5-b,M=.5+b,k=1+b;g=m=v=y=null,w=Le(e,h,r-b,r+M,0,f.minX,f.maxX,u),x=Le(e,h,r+S,r+k,0,f.minX,f.maxX,u),e=null,w&&(g=Le(w,h,i-b,i+M,1,f.minY,f.maxY,u),m=Le(w,h,i+S,i+k,1,f.minY,f.maxY,u),w=null),x&&(v=Le(x,h,i-b,i+M,1,f.minY,f.maxY,u),y=Le(x,h,i+S,i+k,1,f.minY,f.maxY,u),x=null),l>1&&console.timeEnd("clipping"),a.push(g||[],t+1,2*r,2*i),a.push(m||[],t+1,2*r,2*i+1),a.push(v||[],t+1,2*r+1,2*i),a.push(y||[],t+1,2*r+1,2*i+1)}}},Re.prototype.getTile=function(e,t,r){var i=this.options,n=i.extent,o=i.debug;if(e<0||e>24)return null;var s=1<<e,a=We(e,t=(t%s+s)%s,r);if(this.tiles[a])return Ge(this.tiles[a],n);o>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var u,l=e,h=t,c=r;!u&&l>0;)l--,h=Math.floor(h/2),c=Math.floor(c/2),u=this.tiles[We(l,h,c)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,h,c),o>1&&console.time("drilling down"),this.splitTile(u.source,l,h,c,e,t,r),o>1&&console.timeEnd("drilling down"),this.tiles[a]?Ge(this.tiles[a],n):null):null};var Ue=function(t){function r(e,r,i,n){t.call(this,e,r,i,qe),n&&(this.loadGeoJSON=n)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},r.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var r=this._pendingCallback,i=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var n=!!(i&&i.request&&i.request.collectResourceTiming)&&new u.Performance(i.request);this.loadGeoJSON(i,(function(o,s){if(o||!s)return r(o);if("object"!=typeof s)return r(new Error("Input data given to '"+i.source+"' is not a valid GeoJSON object."));!function e(t,r){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(w(e,r)),t;case"GeometryCollection":return t.geometries=t.geometries.map(w(e,r)),t;case"Feature":return t.geometry=e(t.geometry,r),t;case"Polygon":case"MultiPolygon":return function(e,t){return"Polygon"===e.type?e.coordinates=x(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(w(x,t))),e}(t,r);default:return t}}(s,!0);try{t._geoJSONIndex=i.cluster?new fe(function(t){var r=t.superclusterOptions,i=t.clusterProperties;if(!i||!r)return r;for(var n={},o={},s={accumulated:null,zoom:0},a={properties:null},u=Object.keys(i),l=0,h=u;l<h.length;l+=1){var c=h[l],f=i[c],p=f[0],d=f[1],g=e.createExpression(d),m=e.createExpression("string"==typeof p?[p,["accumulated"],["get",c]]:p);n[c]=g.value,o[c]=m.value}return r.map=function(e){a.properties=e;for(var t={},r=0,i=u;r<i.length;r+=1){var o=i[r];t[o]=n[o].evaluate(s,a)}return t},r.reduce=function(e,t){a.properties=t;for(var r=0,i=u;r<i.length;r+=1){var n=i[r];s.accumulated=e[n],e[n]=o[n].evaluate(s,a)}},r}(i)).load(s.features):function(e,t){return new Re(e,t)}(s,i.geojsonVtOptions)}catch(o){return r(o)}t.loaded={};var a={};if(n){var u=n.finish();u&&(a.resourceTiming={},a.resourceTiming[i.source]=JSON.parse(JSON.stringify(u)))}r(null,a)}))}},r.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},r.prototype.reloadTile=function(e,r){var i=this.loaded,n=e.uid;return i&&i[n]?t.prototype.reloadTile.call(this,e,r):this.loadTile(e,r)},r.prototype.loadGeoJSON=function(t,r){if(t.request)e.getJSON(t.request,r);else{if("string"!=typeof t.data)return r(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."));try{return r(null,JSON.parse(t.data))}catch(e){return r(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."))}}},r.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},r.prototype.getClusterExpansionZoom=function(e,t){t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))},r.prototype.getClusterChildren=function(e,t){t(null,this._geoJSONIndex.getChildren(e.clusterId))},r.prototype.getClusterLeaves=function(e,t){t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))},r}(c),$e=function(t){var r=this;this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:c,geojson:Ue},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(r.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');r.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isLoaded())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}};return $e.prototype.setReferrer=function(e,t){this.referrer=t},$e.prototype.setImages=function(e,t,r){this.availableImages[e]=t,r()},$e.prototype.setLayers=function(e,t,r){this.getLayerIndex(e).replace(t),r()},$e.prototype.updateLayers=function(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r()},$e.prototype.loadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).loadTile(t,r)},$e.prototype.loadDEMTile=function(e,t,r){this.getDEMWorkerSource(e,t.source).loadTile(t,r)},$e.prototype.reloadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).reloadTile(t,r)},$e.prototype.abortTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r)},$e.prototype.removeTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r)},$e.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},$e.prototype.removeSource=function(e,t,r){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var i=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==i.removeSource?i.removeSource(t,r):r()}},$e.prototype.loadWorkerSource=function(e,t,r){try{this.self.importScripts(t.url),r()}catch(e){r(e.toString())}},$e.prototype.loadRTLTextPlugin=function(t,r,i){try{e.plugin.isLoaded()||(this.self.importScripts(r),i(e.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+r)))}catch(e){i(e.toString())}},$e.prototype.getAvailableImages=function(e){var t=this.availableImages[e];return t||(t=[]),t},$e.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new i),t},$e.prototype.getWorkerSource=function(e,t,r){var i=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){var n={send:function(t,r,n){i.actor.send(t,r,n,e)}};this.workerSources[e][t][r]=new this.workerSourceTypes[t](n,this.getLayerIndex(e),this.getAvailableImages(e))}return this.workerSources[e][t][r]},$e.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new f),this.demWorkerSources[e][t]},$e.prototype.enforceCacheSizeLimit=function(t,r){e.enforceCacheSizeLimit(r)},"undefined"!=typeof WorkerGlobalScope&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new $e(e.window)),$e})),define(0,(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),o=URL.createObjectURL(i);try{e=new Worker(o),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(o),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===i[t]&&(i[t]=function(t){var i=document.createElement("canvas"),o=Object.create(e.webGLContextAttributes);return o.failIfMajorPerformanceCaveat=t,i.probablySupportsContext?i.probablySupportsContext("webgl",o)||i.probablySupportsContext("experimental-webgl",o):i.supportsContext?i.supportsContext("webgl",o)||i.supportsContext("experimental-webgl",o):i.getContext("webgl",o)||i.getContext("experimental-webgl",o)}(t)),i[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var i={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),i={create:function(e,i,o){var r=t.window.document.createElement(e);return void 0!==i&&(r.className=i),o&&o.appendChild(r),r},createNS:function(e,i){return t.window.document.createElementNS(e,i)}},o=t.window.document.documentElement.style;function r(t){if(!o)return t[0];for(var e=0;e<t.length;e++)if(t[e]in o)return t[e];return t[0]}var a,n=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){o&&n&&(a=o[n],o[n]="none")},i.enableDrag=function(){o&&n&&(o[n]=a)};var s=r(["transform","WebkitTransform"]);i.setTransform=function(t,e){t.style[s]=e};var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});t.window.addEventListener("test",c,c),t.window.removeEventListener("test",c,c)}catch(t){l=!1}i.addEventListener=function(t,e,i,o){void 0===o&&(o={}),"passive"in o&&l?t.addEventListener(e,i,o):t.addEventListener(e,i,o.capture)},i.removeEventListener=function(t,e,i,o){void 0===o&&(o={}),"passive"in o&&l?t.removeEventListener(e,i,o):t.removeEventListener(e,i,o.capture)};var u=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",u,!0)};function h(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}i.suppressClick=function(){t.window.addEventListener("click",u,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",u,!0)}),0)},i.mousePos=function(e,i){var o=e.getBoundingClientRect(),r=t.window.TouchEvent&&i instanceof t.window.TouchEvent?i.touches[0]:i;return new t.Point(r.clientX-o.left-e.clientLeft,r.clientY-o.top-e.clientTop)},i.touchPos=function(e,i){for(var o=e.getBoundingClientRect(),r=[],a="touchend"===i.type?i.changedTouches:i.touches,n=0;n<a.length;n++)r.push(new t.Point(a[n].clientX-o.left-e.clientLeft,a[n].clientY-o.top-e.clientTop));return r},i.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},i.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var p=function(e){function i(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.isLoaded=function(){return this.loaded},i.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var o=i[e],r=o.ids,a=o.callback;this._notify(r,a)}this.requestors=[]}},i.prototype.getImage=function(t){return this.images[t]},i.prototype.addImage=function(t,e){this.images[t]=e},i.prototype.updateImage=function(t,e){var i=this.images[t];e.version=i.version+1,this.images[t]=e,this.updatedImages[t]=!0},i.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},i.prototype.listImages=function(){return Object.keys(this.images)},i.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var o=0,r=t;o<r.length;o+=1){var a=r[o];this.images[a]||(i=!1)}this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},i.prototype._notify=function(e,i){for(var o={},r=0,a=e;r<a.length;r+=1){var n=a[r];this.images[n]||this.fire(new t.Event("styleimagemissing",{id:n}));var s=this.images[n];s?o[n]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+n+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}i(null,o)},i.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},i.prototype.getPattern=function(e){var i=this.patterns[e],o=this.getImage(e);if(!o)return null;if(i&&i.position.version===o.version)return i.position;if(i)i.position.version=o.version;else{var r={w:o.data.width+2,h:o.data.height+2,x:0,y:0},a=new t.ImagePosition(r,o);this.patterns[e]={bin:r,position:a}}return this._updatePatternAtlas(),this.patterns[e].position},i.prototype.bind=function(e){var i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},i.prototype._updatePatternAtlas=function(){var e=[];for(var i in this.patterns)e.push(this.patterns[i].bin);var o=t.potpack(e),r=o.w,a=o.h,n=this.atlasImage;for(var s in n.resize({width:r||1,height:a||1}),this.patterns){var l=this.patterns[s].bin,c=l.x+1,u=l.y+1,h=this.images[s].data,p=h.width,d=h.height;t.RGBAImage.copy(h,n,{x:0,y:0},{x:c,y:u},{width:p,height:d}),t.RGBAImage.copy(h,n,{x:0,y:d-1},{x:c,y:u-1},{width:p,height:1}),t.RGBAImage.copy(h,n,{x:0,y:0},{x:c,y:u+d},{width:p,height:1}),t.RGBAImage.copy(h,n,{x:p-1,y:0},{x:c-1,y:u},{width:1,height:d}),t.RGBAImage.copy(h,n,{x:0,y:0},{x:c+p,y:u},{width:1,height:d})}this.dirty=!0},i.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},i.prototype.dispatchRenderCallbacks=function(t){for(var e=0,i=t;e<i.length;e+=1){var o=i[e];if(!this.callbackDispatchedThisFrame[o]){this.callbackDispatchedThisFrame[o]=!0;var r=this.images[o];h(r)&&this.updateImage(o,r)}}},i}(t.Evented),d=m,_=m,f=1e20;function m(t,e,i,o,r,a){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=o||.25,this.fontFamily=r||"sans-serif",this.fontWeight=a||"normal",this.radius=i||8;var n=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=n,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(n*n),this.gridInner=new Float64Array(n*n),this.f=new Float64Array(n),this.d=new Float64Array(n),this.z=new Float64Array(n+1),this.v=new Int16Array(n),this.middle=Math.round(n/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(t,e,i,o,r,a,n){for(var s=0;s<e;s++){for(var l=0;l<i;l++)o[l]=t[l*e+s];for(v(o,r,a,n,i),l=0;l<i;l++)t[l*e+s]=r[l]}for(l=0;l<i;l++){for(s=0;s<e;s++)o[s]=t[l*e+s];for(v(o,r,a,n,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(r[s])}}function v(t,e,i,o,r){i[0]=0,o[0]=-f,o[1]=+f;for(var a=1,n=0;a<r;a++){for(var s=(t[a]+a*a-(t[i[n]]+i[n]*i[n]))/(2*a-2*i[n]);s<=o[n];)n--,s=(t[a]+a*a-(t[i[n]]+i[n]*i[n]))/(2*a-2*i[n]);i[++n]=a,o[n]=s,o[n+1]=+f}for(a=0,n=0;a<r;a++){for(;o[n+1]<a;)n++;e[a]=(a-i[n])*(a-i[n])+t[i[n]]}}m.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),o=0;o<this.size*this.size;o++){var r=e.data[4*o+3]/255;this.gridOuter[o]=1===r?0:0===r?f:Math.pow(Math.max(0,.5-r),2),this.gridInner[o]=1===r?f:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),o=0;o<this.size*this.size;o++){var a=this.gridOuter[o]-this.gridInner[o];i[o]=Math.max(0,Math.min(255,Math.round(255-255*(a/this.radius+this.cutoff))))}return i},d.default=_;var y=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};y.prototype.setURL=function(t){this.url=t},y.prototype.getGlyphs=function(e,i){var o=this,r=[];for(var a in e)for(var n=0,s=e[a];n<s.length;n+=1){var l=s[n];r.push({stack:a,id:l})}t.asyncAll(r,(function(t,e){var i=t.stack,r=t.id,a=o.entries[i];a||(a=o.entries[i]={glyphs:{},requests:{}});var n=a.glyphs[r];if(void 0===n){if(n=o._tinySDF(a,i,r))return a.glyphs[r]=n,void e(null,{stack:i,id:r,glyph:n});var s=Math.floor(r/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var l=a.requests[s];l||(l=a.requests[s]=[],y.loadGlyphRange(i,s,o.url,o.requestManager,(function(t,e){if(e)for(var i in e)o._doesCharSupportLocalGlyph(+i)||(a.glyphs[+i]=e[+i]);for(var r=0,n=l;r<n.length;r+=1)(0,n[r])(t,e);delete a.requests[s]}))),l.push((function(t,o){t?e(t):o&&e(null,{stack:i,id:r,glyph:o[r]||null})}))}}else e(null,{stack:i,id:r,glyph:n})}),(function(t,e){if(t)i(t);else if(e){for(var o={},r=0,a=e;r<a.length;r+=1){var n=a[r],s=n.stack,l=n.id,c=n.glyph;(o[s]||(o[s]={}))[l]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}i(null,o)}}))},y.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},y.prototype._tinySDF=function(e,i,o){var r=this.localIdeographFontFamily;if(r&&this._doesCharSupportLocalGlyph(o)){var a=e.tinySDF;if(!a){var n="400";/bold/i.test(i)?n="900":/medium/i.test(i)?n="500":/light/i.test(i)&&(n="200"),a=e.tinySDF=new y.TinySDF(24,3,8,.25,r,n)}return{id:o,bitmap:new t.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(e,i,o,r,a){var n=256*i,s=n+255,l=r.transformRequest(r.normalizeGlyphsURL(o).replace("{fontstack}",e).replace("{range}",n+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,(function(e,i){if(e)a(e);else if(i){for(var o={},r=0,n=t.parseGlyphPBF(i);r<n.length;r+=1){var s=n[r];o[s.id]=s}a(null,o)}}))},y.TinySDF=d;var x=function(){this.specification=t.styleSpec.light.position};x.prototype.possiblyEvaluate=function(e,i){return t.sphericalToCartesian(e.expression.evaluate(i))},x.prototype.interpolate=function(e,i,o){return{x:t.number(e.x,i.x,o),y:t.number(e.y,i.y,o),z:t.number(e.z,i.z,o)}};var b=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new x,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),w=function(e){function i(i){e.call(this),this._transitionable=new t.Transitionable(b),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(e,i){if(void 0===i&&(i={}),!this._validate(t.validateLight,e,i))for(var o in e){var r=e[o];t.endsWith(o,"-transition")?this._transitionable.setTransition(o.slice(0,-"-transition".length),r):this._transitionable.setValue(o,r)}},i.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},i.prototype._validate=function(e,i,o){return(!o||!1!==o.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},i}(t.Evented),E=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};E.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.positions[i]||(this.positions[i]=this.addDash(t,e)),this.positions[i]},E.prototype.addDash=function(e,i){var o=i?7:0,r=2*o+1;if(this.nextRow+r>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var a=0,n=0;n<e.length;n++)a+=e[n];for(var s=this.width/a,l=s/2,c=e.length%2==1,u=-o;u<=o;u++)for(var h=this.nextRow+o+u,p=this.width*h,d=c?-e[e.length-1]:0,_=e[0],f=1,m=0;m<this.width;m++){for(;_<m/s;)d=_,_+=e[f],c&&f===e.length-1&&(_+=e[0]),f++;var g=Math.abs(m-d*s),v=Math.abs(m-_*s),y=Math.min(g,v),x=f%2==1,b=void 0;if(i){var w=o?u/o*(l+1):0;if(x){var E=l-Math.abs(w);b=Math.sqrt(y*y+E*E)}else b=l-Math.sqrt(y*y+w*w)}else b=(x?1:-1)*y;this.data[3+4*(p+m)]=Math.max(0,Math.min(255,b+128))}var T={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:a};return this.nextRow+=r,this.dirty=!0,T},E.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var T=function e(i,o){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var r=this.workerPool.acquire(this.id),a=0;a<r.length;a++){var n=r[a],s=new e.Actor(n,o,this.id);s.name="Worker "+a,this.actors.push(s)}};function I(e,i,o){var r=function(r,a){if(r)return o(r);if(a){var n=t.pick(t.extend(a,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);a.vector_layers&&(n.vectorLayers=a.vector_layers,n.vectorLayerIds=n.vectorLayers.map((function(t){return t.id}))),e.url&&(n.tiles=i.canonicalizeTileset(n,e.url)),o(null,n)}};return e.url?t.getJSON(i.transformRequest(i.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.browser.frame((function(){return r(null,e)}))}T.prototype.broadcast=function(e,i,o){o=o||function(){},t.asyncAll(this.actors,(function(t,o){t.send(e,i,o)}),o)},T.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},T.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},T.Actor=t.Actor;var C=function(e,i,o){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=o||24};C.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},C.prototype.contains=function(e){var i=Math.pow(2,e.z),o=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),a=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),n=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=o&&e.x<a&&e.y>=r&&e.y<n};var S=function(e){function i(i,o,r,a){if(e.call(this),this.id=i,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(o,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,(function(i,o){e._tileJSONRequest=null,e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):o&&(t.extend(e,o),o.bounds&&(e.tileBounds=new C(o.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(o.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(o.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.loadTile=function(e,i){var o=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,null),r={request:this.map._requestManager.transformRequest(o,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function a(o,r){return delete e.request,e.aborted?i(null):o&&404!==o.status?i(o):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=i:e.request=e.actor.send("reloadTile",r,a.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",r,a.bind(this)))},i.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i.prototype.unloadTile=function(t){t.unloadVectorData(),t.clearMask(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i.prototype.hasTransition=function(){return!1},i}(t.Evented),P=function(e){function i(i,o,r,a){e.call(this),this.id=i,this.dispatcher=r,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},o),t.extend(this,t.pick(o,["url","scheme","tileSize"]))}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,(function(i,o){e._tileJSONRequest=null,e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):o&&(t.extend(e,o),o.bounds&&(e.tileBounds=new C(o.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(o.tiles),t.postMapLoadEvent(o.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.loadTile=function(e,i){var o=this,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),(function(r,a){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(r)e.state="errored",i(r);else if(a){o.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;var n=o.map.painter.context,s=n.gl;e.texture=o.map.painter.getTileTexture(a.width),e.texture?e.texture.update(a,{useMipmap:!0}):(e.texture=new t.Texture(n,a,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),n.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(o.dispatcher),i(null)}}))},i.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},i.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),t.clearMask(),e()},i.prototype.hasTransition=function(){return!1},i}(t.Evented),z=function(e){function i(i,o,r,a){e.call(this,i,o,r,a),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(e,i){var o=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);function r(t,o){t&&(e.state="errored",i(t)),o&&(e.dem=o,e.needsHillshadePrepare=!0,e.state="loaded",i(null))}e.request=t.getImage(this.map._requestManager.transformRequest(o,t.ResourceType.Tile),function(o,a){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(o)e.state="errored",i(o);else if(a){this.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;var n=t.browser.getImageData(a,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:n,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,r.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},i.prototype._getNeighboringTiles=function(e){var i=e.canonical,o=Math.pow(2,i.z),r=(i.x-1+o)%o,a=0===i.x?e.wrap-1:e.wrap,n=(i.x+1+o)%o,s=i.x+1===o?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y-1).key]={backfilled:!1}),i.y+1<o&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y+1).key]={backfilled:!1}),l},i.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.clearMask(),t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},i}(P),L=function(e){function i(i,o,r,a){e.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(a),this._data=o.data,this._options=t.extend({},o),this._collectResourceTiming=o.collectResourceTiming,this._resourceTiming=[],void 0!==o.maxzoom&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution);var n=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(void 0!==o.buffer?o.buffer:128)*n,tolerance:(void 0!==o.tolerance?o.tolerance:.375)*n,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:void 0!==o.clusterMaxZoom?Math.min(o.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(o.clusterRadius||50)*n,log:!1},clusterProperties:o.clusterProperties},o.workerOptions)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(i){if(i)e.fire(new t.ErrorEvent(i));else{var o={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(o.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",o))}}))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setData=function(e){var i=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)i.fire(new t.ErrorEvent(e));else{var o={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(o.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new t.Event("data",o))}})),this},i.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},i.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},i.prototype.getClusterLeaves=function(t,e,i,o){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},o),this},i.prototype._updateWorkerData=function(e){var i=this;this._loaded=!1;var o=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(o.request=this.map._requestManager.transformRequest(t.browser.resolveURL(r),t.ResourceType.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(r),this.actor.send(this.type+".loadData",o,(function(t,r){i._removed||r&&r.abandoned||(i._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[i.id]&&(i._resourceTiming=r.resourceTiming[i.id].slice(0)),i.actor.send(i.type+".coalesce",{source:o.source},null),e(t))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.loadTile=function(e,i){var o=this,r=e.actor?"reloadTile":"loadTile";e.actor=this.actor;var a={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.request=this.actor.send(r,a,(function(t,a){return delete e.request,e.unloadVectorData(),e.aborted?i(null):t?i(t):(e.loadVectorData(a,o.map.painter,"reloadTile"===r),i(null))}))},i.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},i.prototype.unloadTile=function(t){t.unloadVectorData(),t.clearMask(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},i.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},i.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(t.Evented),M=function(e){function i(t,i,o,r){e.call(this),this.id=t,this.dispatcher=o,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=i}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(e,i){var o=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(r,a){o._loaded=!0,r?o.fire(new t.ErrorEvent(r)):a&&(o.image=a,e&&(o.coordinates=e),i&&i(),o._finishLoading())}))},i.prototype.loaded=function(){return this._loaded},i.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setCoordinates=function(e){var i=this;this.coordinates=e;var o=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var i=1/0,o=1/0,r=-1/0,a=-1/0,n=0,s=e;n<s.length;n+=1){var l=s[n];i=Math.min(i,l.x),o=Math.min(o,l.y),r=Math.max(r,l.x),a=Math.max(a,l.y)}var c=r-i,u=a-o,h=Math.max(c,u),p=Math.max(0,Math.floor(-Math.log(h)/Math.LN2)),d=Math.pow(2,p);return new t.CanonicalTileID(p,Math.floor((i+r)/2*d),Math.floor((o+a)/2*d))}(o),this.minzoom=this.maxzoom=this.tileID.z;var r=o.map((function(t){return i.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,i=e.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[o];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},i.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(t.Evented),D=function(e){function i(t,i,o,r){e.call(this,t,i,o,r),this.roundZoom=!0,this.type="video",this.options=i}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1;var i=this.options;this.urls=[];for(var o=0,r=i.urls;o<r.length;o+=1){var a=r[o];this.urls.push(this.map._requestManager.transformRequest(a,t.ResourceType.Source).url)}t.getVideo(this.urls,(function(i,o){e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):o&&(e.video=o,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},i.prototype.pause=function(){this.video&&this.video.pause()},i.prototype.play=function(){this.video&&this.video.play()},i.prototype.seek=function(e){if(this.video){var i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("Playback for this video can be set only between the "+i.start(0)+" and "+i.end(0)+"-second mark."))):this.video.currentTime=e}},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,i=e.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[o];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(M),R=function(e){function i(i,o,r,a){e.call(this,i,o,r,a),o.coordinates?Array.isArray(o.coordinates)&&4===o.coordinates.length&&!o.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "coordinates"'))),o.animate&&"boolean"!=typeof o.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value'))),o.canvas?"string"==typeof o.canvas||o.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "canvas"'))),this.options=o,this.animate=void 0===o.animate||o.animate}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,o=i.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(i,this.canvas,o.RGBA,{premultiply:!0}),this.tiles){var a=this.tiles[r];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},i}(M),A={vector:S,raster:P,"raster-dem":z,geojson:L,video:D,image:M,canvas:R},k=function(e,i,o,r){var a=new A[i.type](e,i,o,r);if(a.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+a.id);return t.bindAll(["load","abort","unload","serialize","prepare"],a),a};function B(e,i){var o=t.identity([]);return t.translate(o,o,[1,1,0]),t.scale(o,o,[.5*e.width,.5*e.height,1]),t.multiply(o,o,e.calculatePosMatrix(i.toUnwrapped()))}function O(t,e,i,o,r){var a=function(t,e,i){if(t)for(var o=0,r=t;o<r.length;o+=1){var a=e[r[o]];if(a&&a.source===i&&"fill-extrusion"===a.type)return!0}else for(var n in e){var s=e[n];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(o&&o.layers,e,t.id),n=r.maxPitchScaleFactor(),s=t.tilesIn(i,n,a);s.sort(F);for(var l=[],c=0,u=s;c<u.length;c+=1){var h=u[c];l.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,o,r,n,B(t.transform,h.tileID))})}var p=function(t){for(var e={},i={},o=0,r=t;o<r.length;o+=1){var a=r[o],n=a.queryResults,s=a.wrappedTileID,l=i[s]=i[s]||{};for(var c in n)for(var u=n[c],h=l[c]=l[c]||{},p=e[c]=e[c]||[],d=0,_=u;d<_.length;d+=1){var f=_[d];h[f.featureIndex]||(h[f.featureIndex]=!0,p.push(f))}}return e}(l);for(var d in p)p[d].forEach((function(e){var i=e.feature,o=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}));return p}function F(t,e){var i=t.tileID,o=e.tileID;return i.overscaledZ-o.overscaledZ||i.canonical.y-o.canonical.y||i.wrap-o.wrap||i.canonical.x-o.canonical.x}var U=function(t,e){this.max=t,this.onRemove=e,this.reset()};U.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var o=i[e];o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value)}return this.data={},this.order=[],this},U.prototype.add=function(t,e,i){var o=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var a={value:e,timeout:void 0};if(void 0!==i&&(a.timeout=setTimeout((function(){o.remove(t,a)}),i)),this.data[r].push(a),this.order.push(r),this.order.length>this.max){var n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this},U.prototype.has=function(t){return t.wrapped().key in this.data},U.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},U.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},U.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},U.prototype.remove=function(t,e){if(!this.has(t))return this;var i=t.wrapped().key,o=void 0===e?0:this.data[i].indexOf(e),r=this.data[i][o];return this.data[i].splice(o,1),r.timeout&&clearTimeout(r.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(r.value),this.order.splice(this.order.indexOf(i),1),this},U.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var N=function(t,e,i){this.context=t;var o=t.gl;this.buffer=o.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),o.bufferData(o.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};N.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},N.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},N.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var Z={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},q=function(t,e,i,o){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=o,this.context=t;var r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};q.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},q.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},q.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var o=this.attributes[i],r=e.attributes[o.name];void 0!==r&&t.enableVertexAttribArray(r)}},q.prototype.setVertexAttribPointers=function(t,e,i){for(var o=0;o<this.attributes.length;o++){var r=this.attributes[o],a=e.attributes[r.name];void 0!==a&&t.vertexAttribPointer(a,r.components,t[Z[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0))}},q.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var V=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};V.prototype.get=function(){return this.current},V.prototype.set=function(t){},V.prototype.getDefault=function(){return this.default},V.prototype.setDefault=function(){this.set(this.default)};var j=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(V),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(V),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(V),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(V),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(V),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(V),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(V),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(V),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(V),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(V),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(V),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(V),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(V),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(V),rt=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(V),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(V),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(V),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(V),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(V),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(V),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(V),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(V),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(V),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(V),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(V),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(V),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(V),gt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(V),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(V),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(V),xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(V),bt=function(t){function e(e,i){t.call(this,e),this.context=e,this.parent=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e}(V),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(bt),Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(bt),Tt=function(t,e,i){this.context=t,this.width=e,this.height=i;var o=t.gl,r=this.framebuffer=o.createFramebuffer();this.colorAttachment=new wt(t,r),this.depthAttachment=new Et(t,r)};Tt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var i=this.depthAttachment.get();i&&t.deleteRenderbuffer(i),t.deleteFramebuffer(this.framebuffer)};var It=function(t,e,i){this.func=t,this.mask=e,this.range=i};It.ReadOnly=!1,It.ReadWrite=!0,It.disabled=new It(519,It.ReadOnly,[0,1]);var Ct=function(t,e,i,o,r,a){this.test=t,this.ref=e,this.mask=i,this.fail=o,this.depthFail=r,this.pass=a};Ct.disabled=new Ct({func:519,mask:0},0,0,7680,7680,7680);var St=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i};St.disabled=new St(St.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),St.unblended=new St(St.Replace,t.Color.transparent,[!0,!0,!0,!0]),St.alphaBlended=new St([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Pt=function(t,e,i){this.enable=t,this.mode=e,this.frontFace=i};Pt.disabled=new Pt(!1,1029,2305),Pt.backCCW=new Pt(!0,1029,2305);var zt=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new j(this),this.clearDepth=new G(this),this.clearStencil=new W(this),this.colorMask=new X(this),this.depthMask=new H(this),this.stencilMask=new K(this),this.stencilFunc=new J(this),this.stencilOp=new Y(this),this.stencilTest=new Q(this),this.depthRange=new $(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new it(this),this.blendFunc=new ot(this),this.blendColor=new rt(this),this.blendEquation=new at(this),this.cullFace=new nt(this),this.cullFaceSide=new st(this),this.frontFace=new lt(this),this.program=new ct(this),this.activeTexture=new ut(this),this.viewport=new ht(this),this.bindFramebuffer=new pt(this),this.bindRenderbuffer=new dt(this),this.bindTexture=new _t(this),this.bindVertexBuffer=new ft(this),this.bindElementBuffer=new mt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new gt(this),this.pixelStoreUnpack=new vt(this),this.pixelStoreUnpackPremultiplyAlpha=new yt(this),this.pixelStoreUnpackFlipY=new xt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};zt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},zt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},zt.prototype.createIndexBuffer=function(t,e){return new N(this,t,e)},zt.prototype.createVertexBuffer=function(t,e,i){return new q(this,t,e,i)},zt.prototype.createRenderbuffer=function(t,e,i){var o=this.gl,r=o.createRenderbuffer();return this.bindRenderbuffer.set(r),o.renderbufferStorage(o.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),r},zt.prototype.createFramebuffer=function(t,e){return new Tt(this,t,e)},zt.prototype.clear=function(t){var e=t.color,i=t.depth,o=this.gl,r=0;e&&(r|=o.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(r|=o.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),o.clear(r)},zt.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},zt.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},zt.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},zt.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,St.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},zt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Lt=function(e){function i(i,o,r){var a=this;e.call(this),this.id=i,this.dispatcher=r,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(a._sourceLoaded=!0),a._sourceLoaded&&!a._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))})),this.on("error",(function(){a._sourceErrored=!0})),this._source=k(i,o,r,this),this._tiles={},this._cache=new U(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},i.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},i.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},i.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}},i.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(Mt)},i.prototype.getRenderableIds=function(e){var i=this,o=[];for(var r in this._tiles)this._isIdRenderable(+r,e)&&o.push(+r);return e?o.sort((function(e,o){var r=i._tiles[e].tileID,a=i._tiles[o].tileID,n=new t.Point(r.canonical.x,r.canonical.y)._rotate(i.transform.angle),s=new t.Point(a.canonical.x,a.canonical.y)._rotate(i.transform.angle);return r.overscaledZ-a.overscaledZ||s.y-n.y||s.x-n.x})):o.sort(Mt)},i.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},i.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},i.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},i.prototype._tileLoaded=function(e,i,o,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new t.ErrorEvent(r,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===o&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},i.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),i=0;i<e.length;i++){var o=e[i];if(t.neighboringTiles&&t.neighboringTiles[o]){var r=this.getTileByID(o);a(t,r),a(r,t)}}function a(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,o=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),a=e.tileID.key;0===i&&0===o||Math.abs(o)>1||(Math.abs(i)>1&&(1===Math.abs(i+r)?i+=r:1===Math.abs(i-r)&&(i-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,o),t.neighboringTiles&&t.neighboringTiles[a]&&(t.neighboringTiles[a].backfilled=!0)))}},i.prototype.getTile=function(t){return this.getTileByID(t.key)},i.prototype.getTileByID=function(t){return this._tiles[t]},i.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},i.prototype._retainLoadedChildren=function(t,e,i,o){for(var r in this._tiles){var a=this._tiles[r];if(!(o[r]||!a.hasData()||a.tileID.overscaledZ<=e||a.tileID.overscaledZ>i)){for(var n=a.tileID;a&&a.tileID.overscaledZ>e+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(n=s)}for(var l=n;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){o[n.key]=n;break}}}},i.prototype.findLoadedParent=function(t,e){for(var i=t.overscaledZ-1;i>=e;i--){var o=t.scaledTo(i);if(!o)return;var r=String(o.key),a=this._tiles[r];if(a&&a.hasData())return a;if(this._cache.has(o))return this._cache.get(o)}},i.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),i=Math.floor(5*e),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(o)},i.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,i=Math.round(e);if(this._prevLng=t,i){var o={};for(var r in this._tiles){var a=this._tiles[r];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+i),o[a.tileID.key]=a}for(var n in this._tiles=o,this._timers)clearTimeout(this._timers[n]),delete this._timers[n];for(var s in this._tiles){var l=this._tiles[s];this._setTileReloadTimer(s,l)}}},i.prototype.update=function(e){var o=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter((function(t){return o._source.hasTile(t)})))):r=[];var a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),n=Math.max(a-i.maxOverzooming,this._source.minzoom),s=Math.max(a+i.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(r,a);if(Dt(this._source.type)){for(var c={},u={},h=0,p=Object.keys(l);h<p.length;h+=1){var d=p[h],_=l[d],f=this._tiles[d];if(f&&!(f.fadeEndTime&&f.fadeEndTime<=t.browser.now())){var m=this.findLoadedParent(_,n);m&&(this._addTile(m.tileID),c[m.tileID.key]=m.tileID),u[d]=_}}for(var g in this._retainLoadedChildren(u,a,s,l),c)l[g]||(this._coveredTiles[g]=!0,l[g]=c[g])}for(var v in l)this._tiles[v].clearFadeHold();for(var y=0,x=t.keysDifference(this._tiles,l);y<x.length;y+=1){var b=x[y],w=this._tiles[b];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(b)}}},i.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},i.prototype._updateRetainedTiles=function(t,e){for(var o={},r={},a=Math.max(e-i.maxOverzooming,this._source.minzoom),n=Math.max(e+i.maxUnderzooming,this._source.minzoom),s={},l=0,c=t;l<c.length;l+=1){var u=c[l],h=this._addTile(u);o[u.key]=u,h.hasData()||e<this._source.maxzoom&&(s[u.key]=u)}this._retainLoadedChildren(s,e,n,o);for(var p=0,d=t;p<d.length;p+=1){var _=d[p],f=this._tiles[_.key];if(!f.hasData()){if(e+1>this._source.maxzoom){var m=_.children(this._source.maxzoom)[0],g=this.getTile(m);if(g&&g.hasData()){o[m.key]=m;continue}}else{var v=_.children(this._source.maxzoom);if(o[v[0].key]&&o[v[1].key]&&o[v[2].key]&&o[v[3].key])continue}for(var y=f.wasRequested(),x=_.overscaledZ-1;x>=a;--x){var b=_.scaledTo(x);if(r[b.key])break;if(r[b.key]=!0,!(f=this.getTile(b))&&y&&(f=this._addTile(b)),f&&(o[b.key]=b,y=f.wasRequested(),f.hasData()))break}}}return o},i.prototype._addTile=function(e){var i=this._tiles[e.key];if(i)return i;(i=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));var o=Boolean(i);return o||(i=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))),i?(i.uses++,this._tiles[e.key]=i,o||this._source.fire(new t.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var o=e.getExpiryTimeout();o&&(this._timers[t]=setTimeout((function(){i._reloadTile(t,"expired"),delete i._timers[t]}),o))},i.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},i.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},i.prototype.tilesIn=function(e,i,o){var r=this,a=[],n=this.transform;if(!n)return a;for(var s=o?n.getCameraQueryGeometry(e):e,l=e.map((function(t){return n.pointCoordinate(t)})),c=s.map((function(t){return n.pointCoordinate(t)})),u=this.getIds(),h=1/0,p=1/0,d=-1/0,_=-1/0,f=0,m=c;f<m.length;f+=1){var g=m[f];h=Math.min(h,g.x),p=Math.min(p,g.y),d=Math.max(d,g.x),_=Math.max(_,g.y)}for(var v=function(e){var o=r._tiles[u[e]];if(!o.holdingForFade()){var s=o.tileID,f=Math.pow(2,n.zoom-o.tileID.overscaledZ),m=i*o.queryPadding*t.EXTENT/o.tileSize/f,g=[s.getTilePoint(new t.MercatorCoordinate(h,p)),s.getTilePoint(new t.MercatorCoordinate(d,_))];if(g[0].x-m<t.EXTENT&&g[0].y-m<t.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){var v=l.map((function(t){return s.getTilePoint(t)})),y=c.map((function(t){return s.getTilePoint(t)}));a.push({tile:o,tileID:s,queryGeometry:v,cameraQueryGeometry:y,scale:f})}}},y=0;y<u.length;y++)v(y);return a},i.prototype.getVisibleCoordinates=function(t){for(var e=this,i=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),o=0,r=i;o<r.length;o+=1){var a=r[o];a.posMatrix=this.transform.calculatePosMatrix(a.toUnwrapped())}return i},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Dt(this._source.type))for(var e in this._tiles){var i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=t.browser.now())return!0}return!1},i.prototype.setFeatureState=function(t,e,i){t=t||"_geojsonTileLayer",this._state.updateState(t,e,i)},i.prototype.removeFeatureState=function(t,e,i){t=t||"_geojsonTileLayer",this._state.removeFeatureState(t,e,i)},i.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},i}(t.Evented);function Mt(t,e){return t%32-e%32||e-t}function Dt(t){return"raster"===t||"image"===t||"video"===t}function Rt(){return new t.window.Worker(or.workerUrl)}Lt.maxOverzooming=10,Lt.maxUnderzooming=3;var At=function(){this.active={}};At.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<At.workerCount;)this.workers.push(new Rt);return this.active[t]=!0,this.workers.slice()},At.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)};var kt,Bt=Math.floor(t.browser.hardwareConcurrency/2);function Ot(e,i){var o={};for(var r in e)"ref"!==r&&(o[r]=e[r]);return t.refProperties.forEach((function(t){t in i&&(o[t]=i[t])})),o}function Ft(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var o=0;o<t.length;o++)"ref"in t[o]&&(t[o]=Ot(t[o],e[t[o].ref]));return t}At.workerCount=Math.max(Math.min(Bt,6),1);var Ut={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Nt(t,e,i){i.push({command:Ut.addSource,args:[t,e[t]]})}function Zt(t,e,i){e.push({command:Ut.removeSource,args:[t]}),i[t]=!0}function qt(t,e,i,o){Zt(t,i,o),Nt(t,e,i)}function Vt(e,i,o){var r;for(r in e[o])if(e[o].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[o][r],i[o][r]))return!1;for(r in i[o])if(i[o].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[o][r],i[o][r]))return!1;return!0}function jt(e,i,o,r,a,n){var s;for(s in i=i||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],i[s])||o.push({command:n,args:[r,s,i[s],a]}));for(s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],i[s])||o.push({command:n,args:[r,s,i[s],a]}))}function Gt(t){return t.id}function Wt(t,e){return t[e.id]=e,t}var Ht=function(t,e,i){var o=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var a=0;a<this.xCellCount*this.yCellCount;a++)o.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Kt(e,i,o,r,a){var n=t.create();return i?(t.scale(n,n,[1/a,1/a,1]),o||t.rotateZ(n,n,r.angle)):t.multiply(n,r.labelPlaneMatrix,e),n}function Jt(e,i,o,r,a){if(i){var n=t.clone(e);return t.scale(n,n,[a,a,1]),o||t.rotateZ(n,n,-r.angle),n}return r.glCoordMatrix}function Yt(e,i){var o=[e.x,e.y,0,1];se(o,o,i);var r=o[3];return{point:new t.Point(o[0]/r,o[1]/r),signedDistanceFromCamera:r}}function Qt(t,e){var i=t[0]/t[3],o=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&o>=-e[1]&&o<=e[1]}function $t(e,i,o,r,a,n,s,l){var c=r?e.textSizeData:e.iconSizeData,u=t.evaluateSizeForZoom(c,o.transform.zoom),h=[256/o.width*2+1,256/o.height*2+1],p=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var d=e.lineVertexArray,_=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,f=o.transform.width/o.transform.height,m=!1,g=0;g<_.length;g++){var v=_.get(g);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!m)ne(v.numGlyphs,p);else{m=!1;var y=[v.anchorX,v.anchorY,0,1];if(t.transformMat4(y,y,i),Qt(y,h)){var x=.5+y[3]/o.transform.cameraToCenterDistance*.5,b=t.evaluateSizeForFeature(c,u,v),w=s?b*x:b/x,E=new t.Point(v.anchorX,v.anchorY),T=Yt(E,a).point,I={},C=ie(v,w,!1,l,i,a,n,e.glyphOffsetArray,d,p,T,E,I,f);m=C.useVertical,(C.notEnoughRoom||m||C.needsFlipping&&ie(v,w,!0,l,i,a,n,e.glyphOffsetArray,d,p,T,E,I,f).notEnoughRoom)&&ne(v.numGlyphs,p)}else ne(v.numGlyphs,p)}}r?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function te(t,e,i,o,r,a,n,s,l,c,u,h){var p=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,_=s.lineStartIndex+s.lineLength,f=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(p-1),g=re(t*f,i,o,r,a,n,s.segment,d,_,l,c,u,h);if(!g)return null;var v=re(t*m,i,o,r,a,n,s.segment,d,_,l,c,u,h);return v?{first:g,last:v}:null}function ee(e,i,o,r){return e===t.WritingMode.horizontal&&Math.abs(o.y-i.y)>Math.abs(o.x-i.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?i.y<o.y:i.x>o.x)?{needsFlipping:!0}:null}function ie(e,i,o,r,a,n,s,l,c,u,h,p,d,_){var f,m=i/24,g=e.lineOffsetX*m,v=e.lineOffsetY*m;if(e.numGlyphs>1){var y=e.glyphStartIndex+e.numGlyphs,x=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,w=te(m,l,g,v,o,h,p,e,c,n,d,!1);if(!w)return{notEnoughRoom:!0};var E=Yt(w.first.point,s).point,T=Yt(w.last.point,s).point;if(r&&!o){var I=ee(e.writingMode,E,T,_);if(I)return I}f=[w.first];for(var C=e.glyphStartIndex+1;C<y-1;C++)f.push(re(m*l.getoffsetX(C),g,v,o,h,p,e.segment,x,b,c,n,d,!1));f.push(w.last)}else{if(r&&!o){var S=Yt(p,a).point,P=e.lineStartIndex+e.segment+1,z=new t.Point(c.getx(P),c.gety(P)),L=Yt(z,a),M=L.signedDistanceFromCamera>0?L.point:oe(p,z,S,1,a),D=ee(e.writingMode,S,M,_);if(D)return D}var R=re(m*l.getoffsetX(e.glyphStartIndex),g,v,o,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,n,d,!1);if(!R)return{notEnoughRoom:!0};f=[R]}for(var A=0,k=f;A<k.length;A+=1){var B=k[A];t.addDynamicAttributes(u,B.point,B.angle)}return{}}function oe(t,e,i,o,r){var a=Yt(t.add(t.sub(e)._unit()),r).point,n=i.sub(a);return i.add(n._mult(o/n.mag()))}function re(e,i,o,r,a,n,s,l,c,u,h,p,d){var _=r?e-i:e+i,f=_>0?1:-1,m=0;r&&(f*=-1,m=Math.PI),f<0&&(m+=Math.PI);for(var g=f>0?l+s:l+s+1,v=g,y=a,x=a,b=0,w=0,E=Math.abs(_);b+w<=E;){if((g+=f)<l||g>=c)return null;if(x=y,void 0===(y=p[g])){var T=new t.Point(u.getx(g),u.gety(g)),I=Yt(T,h);if(I.signedDistanceFromCamera>0)y=p[g]=I.point;else{var C=g-f;y=oe(0===b?n:new t.Point(u.getx(C),u.gety(C)),T,x,E-b+1,h)}}b+=w,w=x.dist(y)}var S=(E-b)/w,P=y.sub(x),z=P.mult(S)._add(x);return z._add(P._unit()._perp()._mult(o*f)),{point:z,angle:m+Math.atan2(y.y-x.y,y.x-x.x),tileDistance:d?{prevTileDistance:g-f===v?0:u.gettileUnitDistanceFromAnchor(g-f),lastSegmentViewportDistance:E-b}:null}}Ht.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ht.prototype.insert=function(t,e,i,o,r){this._forEachCell(e,i,o,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(o),this.bboxes.push(r)},Ht.prototype.insertCircle=function(t,e,i,o){this._forEachCell(e-o,i-o,e+o,i+o,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(o)},Ht.prototype._insertBoxCell=function(t,e,i,o,r,a){this.boxCells[r].push(a)},Ht.prototype._insertCircleCell=function(t,e,i,o,r,a){this.circleCells[r].push(a)},Ht.prototype._query=function(t,e,i,o,r,a){if(i<0||t>this.width||o<0||e>this.height)return!r&&[];var n=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=o){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)n.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var c=this.circles[3*l],u=this.circles[3*l+1],h=this.circles[3*l+2];n.push({key:this.circleKeys[l],x1:c-h,y1:u-h,x2:c+h,y2:u+h})}return a?n.filter(a):n}var p={hitTest:r,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,i,o,this._queryCell,n,p,a),r?n.length>0:n},Ht.prototype._queryCircle=function(t,e,i,o,r){var a=t-i,n=t+i,s=e-i,l=e+i;if(n<0||a>this.width||l<0||s>this.height)return!o&&[];var c=[],u={hitTest:o,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}};return this._forEachCell(a,s,n,l,this._queryCellCircle,c,u,r),o?c.length>0:c},Ht.prototype.query=function(t,e,i,o,r){return this._query(t,e,i,o,!1,r)},Ht.prototype.hitTest=function(t,e,i,o,r){return this._query(t,e,i,o,!0,r)},Ht.prototype.hitTestCircle=function(t,e,i,o){return this._queryCircle(t,e,i,!0,o)},Ht.prototype._queryCell=function(t,e,i,o,r,a,n,s){var l=n.seenUids,c=this.boxCells[r];if(null!==c)for(var u=this.bboxes,h=0,p=c;h<p.length;h+=1){var d=p[h];if(!l.box[d]){l.box[d]=!0;var _=4*d;if(t<=u[_+2]&&e<=u[_+3]&&i>=u[_+0]&&o>=u[_+1]&&(!s||s(this.boxKeys[d]))){if(n.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:u[_],y1:u[_+1],x2:u[_+2],y2:u[_+3]})}}}var f=this.circleCells[r];if(null!==f)for(var m=this.circles,g=0,v=f;g<v.length;g+=1){var y=v[g];if(!l.circle[y]){l.circle[y]=!0;var x=3*y;if(this._circleAndRectCollide(m[x],m[x+1],m[x+2],t,e,i,o)&&(!s||s(this.circleKeys[y]))){if(n.hitTest)return a.push(!0),!0;var b=m[x],w=m[x+1],E=m[x+2];a.push({key:this.circleKeys[y],x1:b-E,y1:w-E,x2:b+E,y2:w+E})}}}},Ht.prototype._queryCellCircle=function(t,e,i,o,r,a,n,s){var l=n.circle,c=n.seenUids,u=this.boxCells[r];if(null!==u)for(var h=this.bboxes,p=0,d=u;p<d.length;p+=1){var _=d[p];if(!c.box[_]){c.box[_]=!0;var f=4*_;if(this._circleAndRectCollide(l.x,l.y,l.radius,h[f+0],h[f+1],h[f+2],h[f+3])&&(!s||s(this.boxKeys[_])))return a.push(!0),!0}}var m=this.circleCells[r];if(null!==m)for(var g=this.circles,v=0,y=m;v<y.length;v+=1){var x=y[v];if(!c.circle[x]){c.circle[x]=!0;var b=3*x;if(this._circlesCollide(g[b],g[b+1],g[b+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[x])))return a.push(!0),!0}}},Ht.prototype._forEachCell=function(t,e,i,o,r,a,n,s){for(var l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(o),p=l;p<=u;p++)for(var d=c;d<=h;d++){var _=this.xCellCount*d+p;if(r.call(this,t,e,i,o,_,a,n,s))return}},Ht.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Ht.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Ht.prototype._circlesCollide=function(t,e,i,o,r,a){var n=o-t,s=r-e,l=i+a;return l*l>n*n+s*s},Ht.prototype._circleAndRectCollide=function(t,e,i,o,r,a,n){var s=(a-o)/2,l=Math.abs(t-(o+s));if(l>s+i)return!1;var c=(n-r)/2,u=Math.abs(e-(r+c));if(u>c+i)return!1;if(l<=s||u<=c)return!0;var h=l-s,p=u-c;return h*h+p*p<=i*i};var ae=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ne(t,e){for(var i=0;i<t;i++){var o=e.length;e.resize(o+4),e.float32.set(ae,3*o)}}function se(t,e,i){var o=e[0],r=e[1];return t[0]=i[0]*o+i[4]*r+i[12],t[1]=i[1]*o+i[5]*r+i[13],t[3]=i[3]*o+i[7]*r+i[15],t}var le=function(t,e,i){void 0===e&&(e=new Ht(t.width+200,t.height+200,25)),void 0===i&&(i=new Ht(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function ce(t,e,i){t[e+4]=i?1:0}function ue(e,i,o){return i*(t.EXTENT/(e.tileSize*Math.pow(2,o-e.tileID.overscaledZ)))}le.prototype.placeCollisionBox=function(t,e,i,o,r){var a=this.projectAndGetPerspectiveRatio(o,t.anchorPointX,t.anchorPointY),n=i*a.perspectiveRatio,s=t.x1*n+a.point.x,l=t.y1*n+a.point.y,c=t.x2*n+a.point.x,u=t.y2*n+a.point.y;return!this.isInsideGrid(s,l,c,u)||!e&&this.grid.hitTest(s,l,c,u,r)?{box:[],offscreen:!1}:{box:[s,l,c,u],offscreen:this.isOffscreen(s,l,c,u)}},le.prototype.approximateTileDistance=function(t,e,i,o,r){var a=r?1:o/this.pitchfactor,n=t.lastSegmentViewportDistance*i;return t.prevTileDistance+n+(a-1)*n*Math.abs(Math.sin(e))},le.prototype.placeCollisionCircles=function(e,i,o,r,a,n,s,l,c,u,h,p,d){var _=[],f=this.projectAnchor(c,a.anchorX,a.anchorY),m=l/24,g=a.lineOffsetX*l,v=a.lineOffsetY*l,y=new t.Point(a.anchorX,a.anchorY),x=te(m,s,g,v,!1,Yt(y,u).point,y,a,n,u,{},!0),b=!1,w=!1,E=!0,T=f.perspectiveRatio*r,I=1/(r*o),C=0,S=0;x&&(C=this.approximateTileDistance(x.first.tileDistance,x.first.angle,I,f.cameraDistance,p),S=this.approximateTileDistance(x.last.tileDistance,x.last.angle,I,f.cameraDistance,p));for(var P=0;P<e.length;P+=5){var z=e[P],L=e[P+1],M=e[P+2],D=e[P+3];if(!x||D<-C||D>S)ce(e,P,!1);else{var R=this.projectPoint(c,z,L),A=M*T;if(_.length>0){var k=R.x-_[_.length-4],B=R.y-_[_.length-3];if(A*A*2>k*k+B*B&&P+8<e.length){var O=e[P+8];if(O>-C&&O<S){ce(e,P,!1);continue}}}var F=P/5;_.push(R.x,R.y,A,F),ce(e,P,!0);var U=R.x-A,N=R.y-A,Z=R.x+A,q=R.y+A;if(E=E&&this.isOffscreen(U,N,Z,q),w=w||this.isInsideGrid(U,N,Z,q),!i&&this.grid.hitTestCircle(R.x,R.y,A,d)){if(!h)return{circles:[],offscreen:!1};b=!0}}}return{circles:b||!w?[]:_,offscreen:E}},le.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],o=1/0,r=1/0,a=-1/0,n=-1/0,s=0,l=e;s<l.length;s+=1){var c=l[s],u=new t.Point(c.x+100,c.y+100);o=Math.min(o,u.x),r=Math.min(r,u.y),a=Math.max(a,u.x),n=Math.max(n,u.y),i.push(u)}for(var h={},p={},d=0,_=this.grid.query(o,r,a,n).concat(this.ignoredGrid.query(o,r,a,n));d<_.length;d+=1){var f=_[d],m=f.key;if(void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]={}),!h[m.bucketInstanceId][m.featureIndex]){var g=[new t.Point(f.x1,f.y1),new t.Point(f.x2,f.y1),new t.Point(f.x2,f.y2),new t.Point(f.x1,f.y2)];t.polygonIntersectsPolygon(i,g)&&(h[m.bucketInstanceId][m.featureIndex]=!0,void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]=[]),p[m.bucketInstanceId].push(m.featureIndex))}}return p},le.prototype.insertCollisionBox=function(t,e,i,o,r){var a={bucketInstanceId:i,featureIndex:o,collisionGroupID:r};(e?this.ignoredGrid:this.grid).insert(a,t[0],t[1],t[2],t[3])},le.prototype.insertCollisionCircles=function(t,e,i,o,r){for(var a=e?this.ignoredGrid:this.grid,n={bucketInstanceId:i,featureIndex:o,collisionGroupID:r},s=0;s<t.length;s+=4)a.insertCircle(n,t[s],t[s+1],t[s+2])},le.prototype.projectAnchor=function(t,e,i){var o=[e,i,0,1];return se(o,o,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5,cameraDistance:o[3]}},le.prototype.projectPoint=function(e,i,o){var r=[i,o,0,1];return se(r,r,e),new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100)},le.prototype.projectAndGetPerspectiveRatio=function(e,i,o){var r=[i,o,0,1];return se(r,r,e),{point:new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},le.prototype.isOffscreen=function(t,e,i,o){return i<100||t>=this.screenRightBoundary||o<100||e>this.screenBottomBoundary},le.prototype.isInsideGrid=function(t,e,i,o){return i>=0&&t<this.gridRightBoundary&&o>=0&&e<this.gridBottomBoundary};var he=function(t,e,i,o){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):o&&i?1:0,this.placed=i};he.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var pe=function(t,e,i,o,r){this.text=new he(t?t.text:null,e,i,r),this.icon=new he(t?t.icon:null,e,o,r)};pe.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var de=function(t,e,i){this.text=t,this.icon=e,this.skipFade=i},_e=function(t,e,i,o,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=o,this.tileID=r},fe=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function me(e,i,o,r,a){var n=t.getAnchorAlignment(e),s=-(n.horizontalAlign-.5)*i,l=-(n.verticalAlign-.5)*o,c=t.evaluateVariableOffset(e,r);return new t.Point(s+c[0]*a,l+c[1]*a)}function ge(e,i,o,r,a,n){var s=e.x1,l=e.x2,c=e.y1,u=e.y2,h=e.anchorPointX,p=e.anchorPointY,d=new t.Point(i,o);return r&&d._rotate(a?n:-n),{x1:s+d.x,y1:c+d.y,x2:l+d.x,y2:u+d.y,anchorPointX:h,anchorPointY:p}}fe.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var ve=function(t,e,i,o){this.transform=t.clone(),this.collisionIndex=new le(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new fe(i),this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={}};function ye(t,e,i,o,r){t.emplaceBack(e?1:0,i?1:0,o||0,r||0),t.emplaceBack(e?1:0,i?1:0,o||0,r||0),t.emplaceBack(e?1:0,i?1:0,o||0,r||0),t.emplaceBack(e?1:0,i?1:0,o||0,r||0)}ve.prototype.placeLayerTile=function(e,i,o,r){var a=i.getBucket(e),n=i.latestFeatureIndex;if(a&&n&&e.id===a.layerIds[0]){var s=i.collisionBoxArray,l=a.layers[0].layout,c=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),u=i.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),p=Kt(h,"map"===l.get("text-pitch-alignment"),"map"===l.get("text-rotation-alignment"),this.transform,ue(i,1,this.transform.zoom)),d=Kt(h,"map"===l.get("icon-pitch-alignment"),"map"===l.get("icon-rotation-alignment"),this.transform,ue(i,1,this.transform.zoom));this.retainedQueryData[a.bucketInstanceId]=new _e(a.bucketInstanceId,n,a.sourceLayerIndex,a.index,i.tileID),this.placeLayerBucket(a,h,p,d,c,u,o,i.holdingForFade(),r,s)}},ve.prototype.attemptAnchorPlacement=function(t,e,i,o,r,a,n,s,l,c,u,h,p,d,_){var f,m=[h.textOffset0,h.textOffset1],g=me(t,i,o,m,r),v=this.collisionIndex.placeCollisionBox(ge(e,g.x,g.y,a,n,this.transform.angle),u,s,l,c.predicate);if(!_||0!==this.collisionIndex.placeCollisionBox(ge(_,g.x,g.y,a,n,this.transform.angle),u,s,l,c.predicate).box.length)return v.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(f=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:m,width:i,height:o,anchor:t,textBoxScale:r,prevAnchor:f},this.markUsedJustification(p,t,h,d),p.allowVerticalPlacement&&(this.markUsedOrientation(p,d,h),this.placedOrientations[h.crossTileID]=d),{shift:g,placedGlyphBoxes:v}):void 0},ve.prototype.placeLayerBucket=function(e,i,o,r,a,n,s,l,c,u){var h=this,p=e.layers[0].layout,d=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom),_=p.get("text-optional"),f=p.get("icon-optional"),m=p.get("text-allow-overlap"),g=p.get("icon-allow-overlap"),v=m&&(g||!e.hasIconData()||f),y=g&&(m||!e.hasTextData()||_),x=this.collisionGroups.get(e.sourceID),b="map"===p.get("text-rotation-alignment"),w="map"===p.get("text-pitch-alignment"),E="none"!==p.get("icon-text-fit"),T="viewport-y"===p.get("symbol-z-order");!e.collisionArrays&&u&&e.deserializeCollisionBoxes(u);var I=function(r,u){if(!c[r.crossTileID])if(l)h.placements[r.crossTileID]=new de(!1,!1,!1);else{var T,I=!1,C=!1,S=!0,P=null,z={box:null,offscreen:null},L={box:null,offscreen:null},M=null,D=null,R=0,A=0,k=0;u.textFeatureIndex&&(R=u.textFeatureIndex),u.verticalTextFeatureIndex&&(A=u.verticalTextFeatureIndex);var B=u.textBox;if(B){var O=function(i){var o=t.WritingMode.horizontal;if(e.allowVerticalPlacement&&!i&&h.prevPlacement){var a=h.prevPlacement.placedOrientations[r.crossTileID];a&&(h.placedOrientations[r.crossTileID]=a,o=a,h.markUsedOrientation(e,o,r))}return o},F=function(i,o){if(e.allowVerticalPlacement&&r.numVerticalGlyphVertices>0&&u.verticalTextBox)for(var a=0,n=e.writingModes;a<n.length&&(n[a]===t.WritingMode.vertical?(z=o(),L=z):z=i(),!(z&&z.box&&z.box.length));a+=1);else z=i()};if(p.get("text-variable-anchor")){var U=p.get("text-variable-anchor");if(h.prevPlacement&&h.prevPlacement.variableOffsets[r.crossTileID]){var N=h.prevPlacement.variableOffsets[r.crossTileID];U.indexOf(N.anchor)>0&&(U=U.filter((function(t){return t!==N.anchor}))).unshift(N.anchor)}var Z=function(t,o,a){for(var s=t.x2-t.x1,l=t.y2-t.y1,c=r.textBoxScale,u=E&&!g?o:null,p={box:[],offscreen:!1},d=m?2*U.length:U.length,_=0;_<d;++_){var f=U[_%U.length],v=_>=U.length,y=h.attemptAnchorPlacement(f,t,s,l,c,b,w,n,i,x,v,r,e,a,u);if(y&&(p=y.placedGlyphBoxes)&&p.box&&p.box.length){I=!0,P=y.shift;break}}return p};F((function(){return Z(B,u.iconBox,t.WritingMode.horizontal)}),(function(){var i=u.verticalTextBox,o=z&&z.box&&z.box.length;return e.allowVerticalPlacement&&!o&&r.numVerticalGlyphVertices>0&&i?Z(i,u.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),z&&(I=z.box,S=z.offscreen);var q=O(z&&z.box);if(!I&&h.prevPlacement){var V=h.prevPlacement.variableOffsets[r.crossTileID];V&&(h.variableOffsets[r.crossTileID]=V,h.markUsedJustification(e,V.anchor,r,q))}}else{var j=function(t,o){var a=h.collisionIndex.placeCollisionBox(t,p.get("text-allow-overlap"),n,i,x.predicate);return a&&a.box&&a.box.length&&(h.markUsedOrientation(e,o,r),h.placedOrientations[r.crossTileID]=o),a};F((function(){return j(B,t.WritingMode.horizontal)}),(function(){var i=u.verticalTextBox;return e.allowVerticalPlacement&&r.numVerticalGlyphVertices>0&&i?j(i,t.WritingMode.vertical):{box:null,offscreen:null}})),O(z&&z.box&&z.box.length)}}I=(T=z)&&T.box&&T.box.length>0,S=T&&T.offscreen;var G=u.textCircles;if(G){var W=e.text.placedSymbolArray.get(r.centerJustifiedTextSymbolIndex),X=t.evaluateSizeForFeature(e.textSizeData,d,W);M=h.collisionIndex.placeCollisionCircles(G,p.get("text-allow-overlap"),a,n,W,e.lineVertexArray,e.glyphOffsetArray,X,i,o,s,w,x.predicate),I=p.get("text-allow-overlap")||M.circles.length>0,S=S&&M.offscreen}if(u.iconFeatureIndex&&(k=u.iconFeatureIndex),u.iconBox){var H=function(t){var e=E&&P?ge(t,P.x,P.y,b,w,h.transform.angle):t;return h.collisionIndex.placeCollisionBox(e,p.get("icon-allow-overlap"),n,i,x.predicate)};C=L&&L.box&&L.box.length&&u.verticalIconBox?(D=H(u.verticalIconBox)).box.length>0:(D=H(u.iconBox)).box.length>0,S=S&&D.offscreen}var K=_||0===r.numHorizontalGlyphVertices&&0===r.numVerticalGlyphVertices,J=f||0===r.numIconVertices;K||J?J?K||(C=C&&I):I=C&&I:C=I=C&&I,I&&T&&T.box&&(L&&L.box&&A?h.collisionIndex.insertCollisionBox(T.box,p.get("text-ignore-placement"),e.bucketInstanceId,A,x.ID):h.collisionIndex.insertCollisionBox(T.box,p.get("text-ignore-placement"),e.bucketInstanceId,R,x.ID)),C&&D&&h.collisionIndex.insertCollisionBox(D.box,p.get("icon-ignore-placement"),e.bucketInstanceId,k,x.ID),I&&M&&h.collisionIndex.insertCollisionCircles(M.circles,p.get("text-ignore-placement"),e.bucketInstanceId,R,x.ID),h.placements[r.crossTileID]=new de(I||v,C||y,S||e.justReloaded),c[r.crossTileID]=!0}};if(T)for(var C=e.getSortedSymbolIndexes(this.transform.angle),S=C.length-1;S>=0;--S){var P=C[S];I(e.symbolInstances.get(P),e.collisionArrays[P])}else for(var z=0;z<e.symbolInstances.length;++z)I(e.symbolInstances.get(z),e.collisionArrays[z]);e.justReloaded=!1},ve.prototype.markUsedJustification=function(e,i,o,r){var a,n={left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex};a=r===t.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:n[t.getAnchorJustification(i)];for(var s=0,l=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];s<l.length;s+=1){var c=l[s];c>=0&&(e.text.placedSymbolArray.get(c).crossTileID=a>=0&&c!==a?0:o.crossTileID)}},ve.prototype.markUsedOrientation=function(e,i,o){for(var r=i===t.WritingMode.horizontal||i===t.WritingMode.horizontalOnly?i:0,a=i===t.WritingMode.vertical?i:0,n=0,s=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];n<s.length;n+=1){var l=s[n];e.text.placedSymbolArray.get(l).placedOrientation=r}o.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=a)},ve.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var o=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},a=e?e.variableOffsets:{},n=e?e.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],c=r[s];c?(this.opacities[s]=new pe(c,o,l.text,l.icon),i=i||l.text!==c.text.placed||l.icon!==c.icon.placed):(this.opacities[s]=new pe(null,o,l.text,l.icon,l.skipFade),i=i||l.text||l.icon)}for(var u in r){var h=r[u];if(!this.opacities[u]){var p=new pe(h,o,!1,!1);p.isHidden()||(this.opacities[u]=p,i=i||h.text.placed||h.icon.placed)}}for(var d in a)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=a[d]);for(var _ in n)this.placedOrientations[_]||!this.opacities[_]||this.opacities[_].isHidden()||(this.placedOrientations[_]=n[_]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},ve.prototype.updateLayerOpacities=function(t,e){for(var i={},o=0,r=e;o<r.length;o+=1){var a=r[o],n=a.getBucket(t);n&&a.latestFeatureIndex&&t.id===n.layerIds[0]&&this.updateBucketOpacities(n,i,a.collisionBoxArray)}},ve.prototype.updateBucketOpacities=function(e,i,o){var r=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear(),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexArray.clear(),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexArray.clear();var a=e.layers[0].layout,n=new pe(null,0,!1,!1,!0),s=a.get("text-allow-overlap"),l=a.get("icon-allow-overlap"),c=a.get("text-variable-anchor"),u="map"===a.get("text-rotation-alignment"),h="map"===a.get("text-pitch-alignment"),p="none"!==a.get("icon-text-fit"),d=new pe(null,0,s&&(l||!e.hasIconData()||a.get("icon-optional")),l&&(s||!e.hasTextData()||a.get("text-optional")),!0);!e.collisionArrays&&o&&(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData())&&e.deserializeCollisionBoxes(o);for(var _=function(t,e,i){for(var o=0;o<e/4;o++)t.opacityVertexArray.emplaceBack(i)},f=function(o){var a=e.symbolInstances.get(o),s=a.numHorizontalGlyphVertices,l=a.numVerticalGlyphVertices,f=a.crossTileID,m=i[f],g=r.opacities[f];m?g=n:g||(g=d,r.opacities[f]=g),i[f]=!0;var v=s>0||l>0,y=a.numIconVertices>0,x=r.placedOrientations[a.crossTileID],b=x===t.WritingMode.vertical,w=x===t.WritingMode.horizontal||x===t.WritingMode.horizontalOnly;if(v){var E=Se(g.text),T=b?Pe:E;_(e.text,s,T);var I=w?Pe:E;_(e.text,l,I);var C=g.text.isHidden();[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=C||b?1:0)})),a.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden=C||w?1:0);var S=r.variableOffsets[a.crossTileID];S&&r.markUsedJustification(e,S.anchor,a,x);var P=r.placedOrientations[a.crossTileID];P&&(r.markUsedJustification(e,"left",a,P),r.markUsedOrientation(e,P,a))}if(y){var z=Se(g.icon),L=!(p&&a.verticalPlacedIconSymbolIndex&&b);if(a.placedIconSymbolIndex>=0){var M=L?z:Pe;_(e.icon,a.numIconVertices,M),e.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden=g.icon.isHidden()}if(a.verticalPlacedIconSymbolIndex>=0){var D=L?Pe:z;_(e.icon,a.numVerticalIconVertices,D),e.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden=g.icon.isHidden()}}if(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData()){var R=e.collisionArrays[o];if(R){var A=new t.Point(0,0);if(R.textBox||R.verticalTextBox){var k=!0;if(c){var B=r.variableOffsets[f];B?(A=me(B.anchor,B.width,B.height,B.textOffset,B.textBoxScale),u&&A._rotate(h?r.transform.angle:-r.transform.angle)):k=!1}R.textBox&&ye(e.textCollisionBox.collisionVertexArray,g.text.placed,!k||b,A.x,A.y),R.verticalTextBox&&ye(e.textCollisionBox.collisionVertexArray,g.text.placed,!k||w,A.x,A.y)}var O=Boolean(!w&&R.verticalIconBox);R.iconBox&&ye(e.iconCollisionBox.collisionVertexArray,g.icon.placed,O,p?A.x:0,p?A.y:0),R.verticalIconBox&&ye(e.iconCollisionBox.collisionVertexArray,g.icon.placed,!O,p?A.x:0,p?A.y:0);var F=R.textCircles;if(F&&e.hasTextCollisionCircleData())for(var U=0;U<F.length;U+=5){var N=m||0===F[U+4];ye(e.textCollisionCircle.collisionVertexArray,g.text.placed,N)}}}},m=0;m<e.symbolInstances.length;m++)f(m);e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexBuffer&&e.iconCollisionCircle.collisionVertexBuffer.updateData(e.iconCollisionCircle.collisionVertexArray),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexBuffer&&e.textCollisionCircle.collisionVertexBuffer.updateData(e.textCollisionCircle.collisionVertexArray)},ve.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ve.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},ve.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},ve.prototype.stillRecent=function(t,e){var i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t},ve.prototype.setStale=function(){this.stale=!0};var xe=Math.pow(2,25),be=Math.pow(2,24),we=Math.pow(2,17),Ee=Math.pow(2,16),Te=Math.pow(2,9),Ie=Math.pow(2,8),Ce=Math.pow(2,1);function Se(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*xe+e*be+i*we+e*Ee+i*Te+e*Ie+i*Ce+e}var Pe=0,ze=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};ze.prototype.continuePlacement=function(t,e,i,o,r){for(;this._currentTileIndex<t.length;){var a=t[this._currentTileIndex];if(e.placeLayerTile(o,a,i,this._seenCrossTileIDs),this._currentTileIndex++,r())return!0}};var Le=function(t,e,i,o,r,a,n){this.placement=new ve(t,r,a,n),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=o,this._done=!1};Le.prototype.isDone=function(){return this._done},Le.prototype.continuePlacement=function(e,i,o){for(var r=this,a=t.browser.now(),n=function(){var e=t.browser.now()-a;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=i[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new ze),this._inProgressLayer.continuePlacement(o[s.source],this.placement,this._showCollisionBoxes,s,n))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Le.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Me=512/t.EXTENT/2,De=function(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var o=0;o<e.length;o++){var r=e.get(o),a=r.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}};De.prototype.getScaledCoordinates=function(e,i){var o=i.canonical.z-this.tileID.canonical.z,r=Me/Math.pow(2,o);return{x:Math.floor((i.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((i.canonical.y*t.EXTENT+e.anchorY)*r)}},De.prototype.findMatches=function(t,e,i){for(var o=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0;r<t.length;r++){var a=t.get(r);if(!a.crossTileID){var n=this.indexedSymbolInstances[a.key];if(n)for(var s=this.getScaledCoordinates(a,e),l=0,c=n;l<c.length;l+=1){var u=c[l];if(Math.abs(u.coord.x-s.x)<=o&&Math.abs(u.coord.y-s.y)<=o&&!i[u.crossTileID]){i[u.crossTileID]=!0,a.crossTileID=u.crossTileID;break}}}}};var Re=function(){this.maxCrossTileID=0};Re.prototype.generate=function(){return++this.maxCrossTileID};var Ae=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ae.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var o=this.indexes[i],r={};for(var a in o){var n=o[a];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),r[n.tileID.key]=n}this.indexes[i]=r}this.lng=t},Ae.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var o=0;o<e.symbolInstances.length;o++)e.symbolInstances.get(o).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var n=this.indexes[a];if(Number(a)>t.overscaledZ)for(var s in n){var l=n[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,r)}else{var c=n[t.scaledTo(Number(a)).key];c&&c.findMatches(e.symbolInstances,t,r)}}for(var u=0;u<e.symbolInstances.length;u++){var h=e.symbolInstances.get(u);h.crossTileID||(h.crossTileID=i.generate(),r[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new De(t,e.symbolInstances,e.bucketInstanceId),!0},Ae.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var o=0,r=e.indexedSymbolInstances[i];o<r.length;o+=1){var a=r[o];delete this.usedCrossTileIDs[t][a.crossTileID]}},Ae.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var o=this.indexes[i];for(var r in o)t[o[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,o[r]),delete o[r],e=!0)}return e};var ke=function(){this.layerIndexes={},this.crossTileIDs=new Re,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ke.prototype.addLayer=function(t,e,i){var o=this.layerIndexes[t.id];void 0===o&&(o=this.layerIndexes[t.id]=new Ae);var r=!1,a={};o.handleWrapJump(i);for(var n=0,s=e;n<s.length;n+=1){var l=s[n],c=l.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),o.addBucket(l.tileID,c,this.crossTileIDs)&&(r=!0),a[c.bucketInstanceId]=!0)}return o.removeStaleBuckets(a)&&(r=!0),r},ke.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[i]||delete this.layerIndexes[i]};var Be=function(e,i){return t.emitValidationErrors(e,i&&i.filter((function(t){return"source.canvas"!==t.identifier})))},Oe=t.pick(Ut,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Fe=t.pick(Ut,["setCenter","setZoom","setBearing","setPitch"]),Ue=function(e){function i(o,r){var a=this;void 0===r&&(r={}),e.call(this),this.map=o,this.dispatcher=new T((kt||(kt=new At),kt),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new y(o._requestManager,r.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new ke,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var n=this;this._rtlTextPluginCallback=i.registerForPluginAvailability((function(t){for(var e in n.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),n.sourceCaches)n.sourceCaches[e].reload()})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=a.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var o in a._layers){var r=a._layers[o];r.source===i.id&&a._validateLayer(r)}}}}))}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.loadURL=function(e,i){var o=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof i.validate?i.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,i.accessToken);var a=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(a,(function(e,i){o._request=null,e?o.fire(new t.ErrorEvent(e)):i&&o._load(i,r)}))},i.prototype.loadJSON=function(e,i){var o=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){o._request=null,o._load(e,!1!==i.validate)}))},i.prototype._load=function(e,i){var o=this;if(!i||!Be(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(r,e.sources[r],{validate:!1});e.sprite?this._spriteRequest=function(e,i,o){var r,a,n,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(i.transformRequest(i.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){l=null,n||(n=t,r=e,u())})),c=t.getImage(i.transformRequest(i.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){c=null,n||(n=t,a=e,u())}));function u(){if(n)o(n);else if(r&&a){var e=t.browser.getImageData(a),i={};for(var s in r){var l=r[s],c=l.width,u=l.height,h=l.x,p=l.y,d=l.sdf,_=l.pixelRatio,f=new t.RGBAImage({width:c,height:u});t.RGBAImage.copy(e,f,{x:h,y:p},{x:0,y:0},{width:c,height:u}),i[s]={data:f,pixelRatio:_,sdf:d}}o(null,i)}}return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e.sprite,this.map._requestManager,(function(e,i){if(o._spriteRequest=null,e)o.fire(new t.ErrorEvent(e));else if(i)for(var r in i)o.imageManager.addImage(r,i[r]);o.imageManager.setLoaded(!0),o.dispatcher.broadcast("setImages",o.imageManager.listImages()),o.fire(new t.Event("data",{dataType:"style"}))})):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var a=Ft(this.stylesheet.layers);this._order=a.map((function(t){return t.id})),this._layers={};for(var n=0,s=a;n<s.length;n+=1){var l=s[n];(l=t.createStyleLayer(l)).setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},i.prototype._validateLayer=function(e){var i=this.sourceCaches[e.source];if(i){var o=e.sourceLayer;if(o){var r=i.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(o))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+o+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(t){for(var e=[],i=0,o=t;i<o.length;i+=1){var r=o[i],a=this._layers[r];"custom"!==a.type&&e.push(a.serialize())}return e},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(e){if(this._loaded){var i=this._changed;if(this._changed){var o=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var a in(o.length||r.length)&&this._updateWorkerLayers(o,r),this._updatedSources){var n=this._updatedSources[a];"reload"===n?this._reloadSource(a):"clear"===n&&this._clearSource(a)}for(var s in this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var c=0,u=this._order;c<u.length;c+=1){var h=u[c],p=this._layers[h];p.recalculate(e,this.imageManager.listImages()),!p.isHidden(e.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,i&&this.fire(new t.Event("data",{dataType:"style"}))}},i.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},i.prototype.setState=function(e){var i=this;if(this._checkLoaded(),Be(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=Ft(e.layers);var o=function Xt(e,i){if(!e)return[{command:Ut.setStyle,args:[i]}];var o=[];try{if(!t.deepEqual(e.version,i.version))return[{command:Ut.setStyle,args:[i]}];t.deepEqual(e.center,i.center)||o.push({command:Ut.setCenter,args:[i.center]}),t.deepEqual(e.zoom,i.zoom)||o.push({command:Ut.setZoom,args:[i.zoom]}),t.deepEqual(e.bearing,i.bearing)||o.push({command:Ut.setBearing,args:[i.bearing]}),t.deepEqual(e.pitch,i.pitch)||o.push({command:Ut.setPitch,args:[i.pitch]}),t.deepEqual(e.sprite,i.sprite)||o.push({command:Ut.setSprite,args:[i.sprite]}),t.deepEqual(e.glyphs,i.glyphs)||o.push({command:Ut.setGlyphs,args:[i.glyphs]}),t.deepEqual(e.transition,i.transition)||o.push({command:Ut.setTransition,args:[i.transition]}),t.deepEqual(e.light,i.light)||o.push({command:Ut.setLight,args:[i.light]});var r={},a=[];!function(e,i,o,r){var a;for(a in i=i||{},e=e||{})e.hasOwnProperty(a)&&(i.hasOwnProperty(a)||Zt(a,o,r));for(a in i)i.hasOwnProperty(a)&&(e.hasOwnProperty(a)?t.deepEqual(e[a],i[a])||("geojson"===e[a].type&&"geojson"===i[a].type&&Vt(e,i,a)?o.push({command:Ut.setGeoJSONSourceData,args:[a,i[a].data]}):qt(a,i,o,r)):Nt(a,i,o))}(e.sources,i.sources,a,r);var n=[];e.layers&&e.layers.forEach((function(t){r[t.source]?o.push({command:Ut.removeLayer,args:[t.id]}):n.push(t)})),o=o.concat(a),function(e,i,o){i=i||[];var r,a,n,s,l,c,u,h=(e=e||[]).map(Gt),p=i.map(Gt),d=e.reduce(Wt,{}),_=i.reduce(Wt,{}),f=h.slice(),m=Object.create(null);for(r=0,a=0;r<h.length;r++)n=h[r],_.hasOwnProperty(n)?a++:(o.push({command:Ut.removeLayer,args:[n]}),f.splice(f.indexOf(n,a),1));for(r=0,a=0;r<p.length;r++)n=p[p.length-1-r],f[f.length-1-r]!==n&&(d.hasOwnProperty(n)?(o.push({command:Ut.removeLayer,args:[n]}),f.splice(f.lastIndexOf(n,f.length-a),1)):a++,c=f[f.length-r],o.push({command:Ut.addLayer,args:[_[n],c]}),f.splice(f.length-r,0,n),m[n]=!0);for(r=0;r<p.length;r++)if(s=d[n=p[r]],l=_[n],!m[n]&&!t.deepEqual(s,l))if(t.deepEqual(s.source,l.source)&&t.deepEqual(s["source-layer"],l["source-layer"])&&t.deepEqual(s.type,l.type)){for(u in jt(s.layout,l.layout,o,n,null,Ut.setLayoutProperty),jt(s.paint,l.paint,o,n,null,Ut.setPaintProperty),t.deepEqual(s.filter,l.filter)||o.push({command:Ut.setFilter,args:[n,l.filter]}),t.deepEqual(s.minzoom,l.minzoom)&&t.deepEqual(s.maxzoom,l.maxzoom)||o.push({command:Ut.setLayerZoomRange,args:[n,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?jt(s[u],l[u],o,n,u.slice(6),Ut.setPaintProperty):t.deepEqual(s[u],l[u])||o.push({command:Ut.setLayerProperty,args:[n,u,l[u]]}));for(u in l)l.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?jt(s[u],l[u],o,n,u.slice(6),Ut.setPaintProperty):t.deepEqual(s[u],l[u])||o.push({command:Ut.setLayerProperty,args:[n,u,l[u]]}))}else o.push({command:Ut.removeLayer,args:[n]}),c=f[f.lastIndexOf(n)+1],o.push({command:Ut.addLayer,args:[l,c]})}(n,i.layers,o)}catch(t){console.warn("Unable to compute style diff:",t),o=[{command:Ut.setStyle,args:[i]}]}return o}(this.serialize(),e).filter((function(t){return!(t.command in Fe)}));if(0===o.length)return!1;var r=o.filter((function(t){return!(t.command in Oe)}));if(r.length>0)throw new Error("Unimplemented: "+r.map((function(t){return t.command})).join(", ")+".");return o.forEach((function(t){"setTransition"!==t.command&&i[t.command].apply(i,t.args)})),this.stylesheet=e,!0},i.prototype.addImage=function(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,i),this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},i.prototype.getImage=function(t){return this.imageManager.getImage(t)},i.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(e,i,o){var r=this;if(void 0===o&&(o={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!i.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,i,null,o))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var a=this.sourceCaches[e]=new Lt(e,i,this.dispatcher);a.style=this,a.setEventedParent(this,(function(){return{isSourceLoaded:r.loaded(),source:a.serialize(),sourceId:e}})),a.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+i+'" is using it.')));var o=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],o.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),o.setEventedParent(null),o.clearTiles(),o.onRemove&&o.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},i.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},i.prototype.addLayer=function(e,i,o){void 0===o&&(o={}),this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" already exists on this map')));else{var a;if("custom"===e.type){if(Be(this,t.validateCustomStyleLayer(e)))return;a=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$1(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},o))return;a=t.createStyleLayer(e),this._validateLayer(a),a.setEventedParent(this,{layer:{id:r}})}var n=i?this._order.indexOf(i):this._order.length;if(i&&-1===n)this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(n,0,r),this._layerOrderChanged=!0,this._layers[r]=a,this._removedLayers[r]&&a.source&&"custom"!==a.type){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}},i.prototype.moveLayer=function(e,i){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==i){var o=this._order.indexOf(e);this._order.splice(o,1);var r=i?this._order.indexOf(i):this._order.length;i&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(e){this._checkLoaded();var i=this._layers[e];if(i){i.setEventedParent(null);var o=this._order.indexOf(e);this._order.splice(o,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(t){return this._layers[t]},i.prototype.setLayerZoomRange=function(e,i,o){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===i&&r.maxzoom===o||(null!=i&&(r.minzoom=i),null!=o&&(r.maxzoom=o),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(e,i,o){void 0===o&&(o={}),this._checkLoaded();var r=this.getLayer(e);if(r){if(!t.deepEqual(r.filter,i))return null==i?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,"layers."+r.id+".filter",i,null,o)||(r.filter=t.clone$1(i),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function(e,i,o,r){void 0===r&&(r={}),this._checkLoaded();var a=this.getLayer(e);a?t.deepEqual(a.getLayoutProperty(i),o)||(a.setLayoutProperty(i,o,r),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(e,i){var o=this.getLayer(e);if(o)return o.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(e,i,o,r){void 0===r&&(r={}),this._checkLoaded();var a=this.getLayer(e);a?t.deepEqual(a.getPaintProperty(i),o)||(a.setPaintProperty(i,o,r)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},i.prototype.setFeatureState=function(e,i){this._checkLoaded();var o=e.source,r=e.sourceLayer,a=this.sourceCaches[o],n=parseInt(e.id,10);if(void 0!==a){var s=a.getSource().type;"geojson"===s&&r?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||r?isNaN(n)||n<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):a.setFeatureState(r,n,i):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+o+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(e,i){this._checkLoaded();var o=e.source,r=this.sourceCaches[o];if(void 0!==r){var a=r.getSource().type,n="vector"===a?e.sourceLayer:void 0,s=parseInt(e.id,10);"vector"!==a||n?void 0!==e.id&&isNaN(s)||s<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))):i&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):r.removeFeatureState(n,s,i):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+o+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(e){this._checkLoaded();var i=e.source,o=e.sourceLayer,r=this.sourceCaches[i],a=parseInt(e.id,10);if(void 0!==r)if("vector"!==r.getSource().type||o){if(!(isNaN(a)||a<0))return r.getFeatureState(o,a);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},i.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,i=function(t){return"fill-extrusion"===e._layers[t].type},o={},r=[],a=this._order.length-1;a>=0;a--){var n=this._order[a];if(i(n)){o[n]=a;for(var s=0,l=t;s<l.length;s+=1){var c=l[s][n];if(c)for(var u=0,h=c;u<h.length;u+=1){var p=h[u];r.push(p)}}}}r.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var d=[],_=this._order.length-1;_>=0;_--){var f=this._order[_];if(i(f))for(var m=r.length-1;m>=0;m--){var g=r[m].feature;if(o[g.layer.id]<_)break;d.push(g),r.pop()}else for(var v=0,y=t;v<y.length;v+=1){var x=y[v][f];if(x)for(var b=0,w=x;b<w.length;b+=1){var E=w[b];d.push(E.feature)}}}return d},i.prototype.queryRenderedFeatures=function(e,i,o){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var r={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var a=0,n=i.layers;a<n.length;a+=1){var s=n[a],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];r[l.source]=!0}}var c=[];for(var u in this.sourceCaches)i.layers&&!r[u]||c.push(O(this.sourceCaches[u],this._layers,e,i,o));return this.placement&&c.push(function(t,e,i,o,r,a){for(var n={},s=r.queryRenderedSymbols(i),l=[],c=0,u=Object.keys(s).map(Number);c<u.length;c+=1){var h=u[c];l.push(a[h])}l.sort(F);for(var p=function(){var e=_[d],i=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,o.filter,o.layers,t);for(var r in i){var a=n[r]=n[r]||[],l=i[r];l.sort((function(t,i){var o=e.featureSortOrder;if(o){var r=o.indexOf(t.featureIndex);return o.indexOf(i.featureIndex)-r}return i.featureIndex-t.featureIndex}));for(var c=0,u=l;c<u.length;c+=1){var h=u[c];a.push(h)}}},d=0,_=l;d<_.length;d+=1)p();var f=function(i){n[i].forEach((function(o){var r=o.feature,a=t[i],n=e[a.source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=n}))};for(var m in n)f(m);return n}(this._layers,this.sourceCaches,e,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)},i.prototype.querySourceFeatures=function(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);var o=this.sourceCaches[e];return o?function(t,e){for(var i=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),o=[],r={},a=0;a<i.length;a++){var n=i[a],s=n.tileID.canonical.key;r[s]||(r[s]=!0,n.querySourceFeatures(o,e))}return o}(o,i):[]},i.prototype.addSourceType=function(t,e,o){return i.getSourceType(t)?o(new Error('A source type called "'+t+'" already exists.')):(i.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},o):o(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(e,i){void 0===i&&(i={}),this._checkLoaded();var o=this.light.getLight(),r=!1;for(var a in e)if(!t.deepEqual(e[a],o[a])){r=!0;break}if(r){var n={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(n)}},i.prototype._validate=function(e,i,o,r,a){return void 0===a&&(a={}),(!a||!1!==a.validate)&&Be(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:o,styleSpec:t.styleSpec},r)))},i.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},i.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},i.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},i.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},i.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},i.prototype._updatePlacement=function(e,i,o,r){for(var a=!1,n=!1,s={},l=0,c=this._order;l<c.length;l+=1){var u=c[l],h=this._layers[u];if("symbol"===h.type){if(!s[h.source]){var p=this.sourceCaches[h.source];s[h.source]=p.getRenderableIds(!0).map((function(t){return p.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var d=this.crossTileSymbolIndex.addLayer(h,s[h.source],e.center.lng);a=a||d}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var _=this._layerOrderChanged||0===o;if((_||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Le(e,this._order,_,i,o,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),n=!0),a&&this.pauseablePlacement.placement.setStale()),n||a)for(var f=0,m=this._order;f<m.length;f+=1){var g=m[f],v=this._layers[g];"symbol"===v.type&&this.placement.updateLayerOpacities(v,s[v.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},i.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i)},i.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},i.prototype.getResource=function(e,i,o){return t.makeRequest(i,o)},i}(t.Evented);Ue.getSourceType=function(t){return A[t]},Ue.setSourceType=function(t,e){A[t]=e},Ue.registerForPluginAvailability=t.registerForPluginAvailability;var Ne=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ze=pi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),qe=pi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ve=pi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),je=pi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ge=pi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),We=pi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Xe=pi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),He=pi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ke=pi("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Je=pi("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ye=pi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Qe=pi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),$e=pi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ti=pi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ei=pi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ii=pi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),oi=pi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ri=pi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ai=pi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ni=pi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),si=pi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),li=pi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ci=pi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ui=pi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),hi=pi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");function pi(t,e){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,o={};return{fragmentSource:t=t.replace(i,(function(t,e,i,r,a){return o[a]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nvarying "+i+" "+r+" "+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n"})),vertexSource:e=e.replace(i,(function(t,e,i,r,a){var n="float"===r?"vec2":"vec4",s=a.match(/color/)?"color":n;return o[a]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float u_"+a+"_t;\nattribute "+i+" "+n+" a_"+a+";\nvarying "+i+" "+r+" "+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = a_"+a+";\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = unpack_mix_"+s+"(a_"+a+", u_"+a+"_t);\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float u_"+a+"_t;\nattribute "+i+" "+n+" a_"+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = a_"+a+";\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = unpack_mix_"+s+"(a_"+a+", u_"+a+"_t);\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n"}))}}var di=Object.freeze({__proto__:null,prelude:Ze,background:qe,backgroundPattern:Ve,circle:je,clippingMask:Ge,heatmap:We,heatmapTexture:Xe,collisionBox:He,collisionCircle:Ke,debug:Je,fill:Ye,fillOutline:Qe,fillOutlinePattern:$e,fillPattern:ti,fillExtrusion:ei,fillExtrusionPattern:ii,hillshadePrepare:oi,hillshade:ri,line:ai,lineGradient:ni,linePattern:si,lineSDF:li,raster:ci,symbolIcon:ui,symbolSDF:hi}),_i=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};_i.prototype.bind=function(t,e,i,o,r,a,n,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==o.length,c=0;!l&&c<o.length;c++)this.boundPaintVertexBuffers[c]!==o[c]&&(l=!0);var u=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==i||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==a||this.boundDynamicVertexBuffer!==n||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||u?this.freshBind(e,i,o,r,a,n,s):(t.bindVertexArrayOES.set(this.vao),n&&n.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind())},_i.prototype.freshBind=function(t,e,i,o,r,a,n){var s,l=t.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=o,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=n;else{s=c.currentNumAttributes||0;for(var h=l;h<s;h++)u.disableVertexAttribArray(h)}e.enableAttributes(u,t);for(var p=0,d=i;p<d.length;p+=1)d[p].enableAttributes(u,t);a&&a.enableAttributes(u,t),n&&n.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,r);for(var _=0,f=i;_<f.length;_+=1){var m=f[_];m.bind(),m.setVertexAttribPointers(u,t,r)}a&&(a.bind(),a.setVertexAttribPointers(u,t,r)),o&&o.bind(),n&&(n.bind(),n.setVertexAttribPointers(u,t,r)),c.currentNumAttributes=l},_i.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var fi=function(t,e,i,o,r){var a=t.gl;this.program=a.createProgram();var n=i.defines();r&&n.push("#define OVERDRAW_INSPECTOR;");var s=n.concat(Ze.fragmentSource,e.fragmentSource).join("\n"),l=n.concat(Ze.vertexSource,e.vertexSource).join("\n"),c=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(c,s),a.compileShader(c),a.attachShader(this.program,c);var u=a.createShader(a.VERTEX_SHADER);a.shaderSource(u,l),a.compileShader(u),a.attachShader(this.program,u);for(var h=i.layoutAttributes||[],p=0;p<h.length;p++)a.bindAttribLocation(this.program,p,h[p].name);a.linkProgram(this.program),this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},_=0;_<this.numAttributes;_++){var f=a.getActiveAttrib(this.program,_);f&&(this.attributes[f.name]=a.getAttribLocation(this.program,f.name))}for(var m=a.getProgramParameter(this.program,a.ACTIVE_UNIFORMS),g=0;g<m;g++){var v=a.getActiveUniform(this.program,g);v&&(d[v.name]=a.getUniformLocation(this.program,v.name))}this.fixedUniforms=o(t,d),this.binderUniforms=i.getUniforms(t,d)};function mi(e,i,o){var r=1/ue(o,1,i.transform.tileZoom),a=Math.pow(2,o.tileID.overscaledZ),n=o.tileSize*Math.pow(2,i.transform.tileZoom)/a,s=n*(o.tileID.canonical.x+o.tileID.wrap*a),l=n*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,l>>16],u_pixel_coord_lower:[65535&s,65535&l]}}fi.prototype.draw=function(t,e,i,o,r,a,n,s,l,c,u,h,p,d,_,f){var m,g=t.gl;for(var v in t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(o),t.setColorMode(r),t.setCullFace(a),this.fixedUniforms)this.fixedUniforms[v].set(n[v]);d&&d.setUniforms(t,this.binderUniforms,h,{zoom:p});for(var y=(m={},m[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m)[e],x=0,b=u.get();x<b.length;x+=1){var w=b[x],E=w.vaos||(w.vaos={});(E[s]||(E[s]=new _i)).bind(t,this,l,d?d.getPaintVertexBuffers():[],c,w.vertexOffset,_,f),g.drawElements(e,w.primitiveLength*y,g.UNSIGNED_SHORT,w.primitiveOffset*y*2)}};var gi=function(e,i,o,r){var a=i.style.light,n=a.properties.get("position"),s=[n.x,n.y,n.z],l=t.create$1();"viewport"===a.properties.get("anchor")&&t.fromRotation(l,-i.transform.angle),t.transformMat3(s,s,l);var c=a.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+o,u_opacity:r}},vi=function(e,i,o,r,a,n,s){return t.extend(gi(e,i,o,r),mi(n,i,s),{u_height_factor:-Math.pow(2,a.overscaledZ)/s.tileSize/8})},yi=function(t){return{u_matrix:t}},xi=function(e,i,o,r){return t.extend(yi(e),mi(o,i,r))},bi=function(t,e){return{u_matrix:t,u_world:e}},wi=function(e,i,o,r,a){return t.extend(xi(e,i,o,r),{u_world:a})},Ei=function(e,i,o,r){var a,n,s=e.transform;if("map"===r.paint.get("circle-pitch-alignment")){var l=ue(o,1,s.zoom);a=!0,n=[l,l]}else a=!1,n=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(i.posMatrix,o,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+a,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:n}},Ti=function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,i.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,i.u_overscale_factor)}},Ii=function(t,e,i){var o=ue(i,1,e.zoom),r=Math.pow(2,e.zoom-i.tileID.overscaledZ),a=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:o,u_extrude_scale:[e.pixelsToGLUnits[0]/(o*r),e.pixelsToGLUnits[1]/(o*r)],u_overscale_factor:a}},Ci=function(t,e){return{u_matrix:t,u_color:e}},Si=function(t){return{u_matrix:t}},Pi=function(t,e,i,o){return{u_matrix:t,u_extrude_scale:ue(e,1,i),u_intensity:o}},Li=function(t,e,i){var o=i.paint.get("hillshade-shadow-color"),r=i.paint.get("hillshade-highlight-color"),a=i.paint.get("hillshade-accent-color"),n=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(n-=t.transform.angle);var s=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:Di(0,e.tileID),u_light:[i.paint.get("hillshade-exaggeration"),n],u_shadow:o,u_highlight:r,u_accent:a}},Mi=function(e,i,o){var r=i.stride,a=t.create();return t.ortho(a,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(a,a,[0,-t.EXTENT,0]),{u_matrix:a,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_maxzoom:o,u_unpack:i.getUnpackVector()}};function Di(e,i){var o=Math.pow(2,i.canonical.z),r=i.canonical.y;return[new t.MercatorCoordinate(0,r/o).toLngLat().lat,new t.MercatorCoordinate(0,(r+1)/o).toLngLat().lat]}var Ri=function(e,i,o){var r=e.transform;return{u_matrix:Fi(e,i,o),u_ratio:1/ue(i,1,r.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Ai=function(e,i,o){return t.extend(Ri(e,i,o),{u_image:0})},ki=function(e,i,o,r){var a=e.transform,n=Oi(i,a);return{u_matrix:Fi(e,i,o),u_texsize:i.imageAtlasTexture.size,u_ratio:1/ue(i,1,a.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[t.browser.devicePixelRatio,n,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Bi=function(e,i,o,r,a){var n=e.transform,s=e.lineAtlas,l=Oi(i,n),c="round"===o.layout.get("line-cap"),u=s.getDash(r.from,c),h=s.getDash(r.to,c),p=u.width*a.fromScale,d=h.width*a.toScale;return t.extend(Ri(e,i,o),{u_patternscale_a:[l/p,-u.height/2],u_patternscale_b:[l/d,-h.height/2],u_sdfgamma:s.width/(256*Math.min(p,d)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:a.t})};function Oi(t,e){return 1/ue(t,1,e.tileZoom)}function Fi(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var Ui=function(t,e,i,o,r){return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(n=r.paint.get("raster-saturation"),n>0?1-1/(1.001-n):-n),u_contrast_factor:(a=r.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Ni(r.paint.get("raster-hue-rotate"))};var a,n};function Ni(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}var Zi=function(t,e,i,o,r,a,n,s,l,c){var u=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:n,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+o,u_texsize:c,u_texture:0}},qi=function(e,i,o,r,a,n,s,l,c,u,h){var p=a.transform;return t.extend(Zi(e,i,o,r,a,n,s,l,c,u),{u_gamma_scale:r?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+h})},Vi=function(t,e,i){return{u_matrix:t,u_opacity:e,u_color:i}},ji=function(e,i,o,r,a,n){return t.extend(function(t,e,i,o){var r=i.imageManager.getPattern(t.from.toString()),a=i.imageManager.getPattern(t.to.toString()),n=i.imageManager.getPixelSize(),s=n.width,l=n.height,c=Math.pow(2,o.tileID.overscaledZ),u=o.tileSize*Math.pow(2,i.transform.tileZoom)/c,h=u*(o.tileID.canonical.x+o.tileID.wrap*c),p=u*o.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/ue(o,1,i.transform.tileZoom),u_pixel_coord_upper:[h>>16,p>>16],u_pixel_coord_lower:[65535&h,65535&p]}}(r,n,o,a),{u_matrix:e,u_opacity:i})},Gi={fillExtrusion:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fillExtrusionPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fill:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},fillPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},fillOutline:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}},fillOutlinePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},circle:function(e,i){return{u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,i.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},collisionBox:Ti,collisionCircle:Ti,debug:function(e,i){return{u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},clippingMask:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmap:function(e,i){return{u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmapTexture:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}},hillshade:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}},hillshadePrepare:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_maxzoom:new t.Uniform1f(e,i.u_maxzoom),u_unpack:new t.Uniform4f(e,i.u_unpack)}},line:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels)}},lineGradient:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_image:new t.Uniform1i(e,i.u_image)}},linePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_image:new t.Uniform1i(e,i.u_image),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_scale:new t.Uniform4f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},lineSDF:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,i.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,i.u_sdfgamma),u_image:new t.Uniform1i(e,i.u_image),u_tex_y_a:new t.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,i.u_tex_y_b),u_mix:new t.Uniform1f(e,i.u_mix)}},raster:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}},symbolIcon:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1f(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}},symbolSDF:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1f(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1f(e,i.u_is_halo)}},background:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}},backgroundPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)}}};function Wi(e,i){for(var o=e.sort((function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0})),r=0;r<o.length;r++){var a={},n=o[r],s=o.slice(r+1);Xi(n.tileID.wrapped(),n.tileID,s,new t.OverscaledTileID(0,n.tileID.wrap+1,0,0,0),a),n.setMask(a,i)}}function Xi(e,i,o,r,a){for(var n=0;n<o.length;n++){var s=o[n];if(r.isLessThan(s.tileID))break;if(i.key===s.tileID.key)return;if(s.tileID.isChildOf(i)){for(var l=i.children(1/0),c=0;c<l.length;c++)Xi(e,l[c],o.slice(n),r,a);return}}var u=i.overscaledZ-e.overscaledZ,h=new t.CanonicalTileID(u,i.canonical.x-(e.canonical.x<<u),i.canonical.y-(e.canonical.y<<u));a[h.key]=a[h.key]||h}function Hi(t,e,i,o,r,a,n,s){for(var l=t.context,c=l.gl,u=r?t.useProgram("collisionCircle"):t.useProgram("collisionBox"),h=0;h<o.length;h++){var p=o[h],d=e.getTile(p),_=d.getBucket(i);if(_){var f=r?s?_.textCollisionCircle:_.iconCollisionCircle:s?_.textCollisionBox:_.iconCollisionBox;if(f){var m=p.posMatrix;0===a[0]&&0===a[1]||(m=t.translatePosMatrix(p.posMatrix,d,a,n)),u.draw(l,r?c.TRIANGLES:c.LINES,It.disabled,Ct.disabled,t.colorModeForRenderPass(),Pt.disabled,Ii(m,t.transform,d),i.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,null,t.transform.zoom,null,null,f.collisionVertexBuffer)}}}}function Ki(t,e,i,o,r,a,n){Hi(t,e,i,o,!1,r,a,n),Hi(t,e,i,o,!0,r,a,n)}var Ji=t.identity(new Float32Array(16));function Yi(e,i,o,r,a,n){var s=t.getAnchorAlignment(e),l=-(s.horizontalAlign-.5)*i,c=-(s.verticalAlign-.5)*o,u=t.evaluateVariableOffset(e,r);return new t.Point((l/a+u[0])*n,(c/a+u[1])*n)}function Qi(e,i,o,r,a,n,s,l,c,u,h){var p=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,_=e.icon.dynamicLayoutVertexArray,f={};d.clear();for(var m=0;m<p.length;m++){var g=p.get(m),v=e.allowVerticalPlacement&&!g.placedOrientation,y=g.hidden||!g.crossTileID||v?null:r[g.crossTileID];if(y){var x=new t.Point(g.anchorX,g.anchorY),b=Yt(x,o?l:s),w=.5+n.cameraToCenterDistance/b.signedDistanceFromCamera*.5,E=a.evaluateSizeForFeature(e.textSizeData,u,g)*w/t.ONE_EM;o&&(E*=e.tilePixelRatio/c);for(var T=y.width,I=y.height,C=Yi(y.anchor,T,I,y.textOffset,y.textBoxScale,E),S=o?Yt(x.add(C),s).point:b.point.add(i?C.rotate(-n.angle):C),P=e.allowVerticalPlacement&&g.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,z=0;z<g.numGlyphs;z++)t.addDynamicAttributes(d,S,P);h&&g.associatedIconIndex>=0&&(f[g.associatedIconIndex]={shiftedAnchor:S,angle:P})}else ne(g.numGlyphs,d)}if(h){_.clear();for(var L=e.icon.placedSymbolArray,M=0;M<L.length;M++){var D=L.get(M);if(D.hidden)ne(D.numGlyphs,_);else{var R=f[M];if(R)for(var A=0;A<D.numGlyphs;A++)t.addDynamicAttributes(_,R.shiftedAnchor,R.angle);else ne(D.numGlyphs,_)}}e.icon.dynamicLayoutVertexBuffer.updateData(_)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function $i(e,i,o,r,a,n,s,l,c,u,h,p){for(var d,_,f=e.context,m=f.gl,g=e.transform,v="map"===l,y="map"===c,x=v&&"point"!==o.layout.get("symbol-placement"),b=v&&!y&&!x,w=void 0!==o.layout.get("symbol-sort-key").constantOr(1),E=e.depthModeForSublayer(0,It.ReadOnly),T=o.layout.get("text-variable-anchor"),I=[],C=0,S=r;C<S.length;C+=1){var P=S[C],z=i.getTile(P),L=z.getBucket(o);if(L){var M=a?L.text:L.icon;if(M&&M.segments.get().length){var D=M.programConfigurations.get(o.id),R=a||L.sdfIcons,A=a?L.textSizeData:L.iconSizeData;d||(d=e.useProgram(R?"symbolSDF":"symbolIcon",D),_=t.evaluateSizeForZoom(A,g.zoom)),f.activeTexture.set(m.TEXTURE0);var k=void 0,B=void 0,O=void 0;if(a)B=z.glyphAtlasTexture,O=m.LINEAR,k=z.glyphAtlasTexture.size;else{var F=1!==o.layout.get("icon-size").constantOr(0)||L.iconsNeedLinear,U=y||0!==g.pitch;B=z.imageAtlasTexture,O=R||e.options.rotating||e.options.zooming||F||U?m.LINEAR:m.NEAREST,k=z.imageAtlasTexture.size}var N=ue(z,1,e.transform.zoom),Z=Kt(P.posMatrix,y,v,e.transform,N),q=Jt(P.posMatrix,y,v,e.transform,N),V=T&&L.hasTextData(),j="none"!==o.layout.get("icon-text-fit")&&V&&L.hasIconData();x&&$t(L,P.posMatrix,e,a,Z,q,y,u);var G=e.translatePosMatrix(P.posMatrix,z,n,s),W=x||a&&T||j?Ji:Z,X=e.translatePosMatrix(q,z,n,s,!0),H=R&&0!==o.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),K={program:d,buffers:M,uniformValues:R?qi(A.kind,_,b,y,e,G,W,X,a,k,!0):Zi(A.kind,_,b,y,e,G,W,X,a,k),atlasTexture:B,atlasInterpolation:O,isSDF:R,hasHalo:H};if(w)for(var J=0,Y=M.segments.get();J<Y.length;J+=1){var Q=Y[J];I.push({segments:new t.SegmentVector([Q]),sortKey:Q.sortKey,state:K})}else I.push({segments:M.segments,sortKey:0,state:K})}}}w&&I.sort((function(t,e){return t.sortKey-e.sortKey}));for(var $=0,tt=I;$<tt.length;$+=1){var et=tt[$],it=et.state;if(it.atlasTexture.bind(it.atlasInterpolation,m.CLAMP_TO_EDGE),it.isSDF){var ot=it.uniformValues;it.hasHalo&&(ot.u_is_halo=1,to(it.buffers,et.segments,o,e,it.program,E,h,p,ot)),ot.u_is_halo=0}to(it.buffers,et.segments,o,e,it.program,E,h,p,it.uniformValues)}}function to(t,e,i,o,r,a,n,s,l){var c=o.context,u=c.gl;r.draw(c,u.TRIANGLES,a,n,s,Pt.disabled,l,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,o.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function eo(t,e,i,o,r,a,n){var s,l,c,u,h,p=t.context.gl,d=i.paint.get("fill-pattern"),_=d&&d.constantOr(1),f=i.getCrossfadeParameters();n?(l=_&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(l=_?"fillPattern":"fill",s=p.TRIANGLES);for(var m=0,g=o;m<g.length;m+=1){var v=g[m],y=e.getTile(v);if(!_||y.patternsLoaded()){var x=y.getBucket(i);if(x){var b=x.programConfigurations.get(i.id),w=t.useProgram(l,b);_&&(t.context.activeTexture.set(p.TEXTURE0),y.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),b.updatePatternPaintBuffers(f));var E=d.constantOr(null);if(E&&y.imageAtlas){var T=y.imageAtlas,I=T.patternPositions[E.to.toString()],C=T.patternPositions[E.from.toString()];I&&C&&b.setConstantPatternPositions(I,C)}var S=t.translatePosMatrix(v.posMatrix,y,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(n){u=x.indexBuffer2,h=x.segments2;var P=[p.drawingBufferWidth,p.drawingBufferHeight];c="fillOutlinePattern"===l&&_?wi(S,t,f,y,P):bi(S,P)}else u=x.indexBuffer,h=x.segments,c=_?xi(S,t,f,y):yi(S);w.draw(t.context,s,r,t.stencilModeForClipping(v),a,Pt.disabled,c,i.id,x.layoutVertexBuffer,u,h,i.paint,t.transform.zoom,b)}}}}function io(t,e,i,o,r,a,n){for(var s=t.context,l=s.gl,c=i.paint.get("fill-extrusion-pattern"),u=c.constantOr(1),h=i.getCrossfadeParameters(),p=i.paint.get("fill-extrusion-opacity"),d=0,_=o;d<_.length;d+=1){var f=_[d],m=e.getTile(f),g=m.getBucket(i);if(g){var v=g.programConfigurations.get(i.id),y=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",v);u&&(t.context.activeTexture.set(l.TEXTURE0),m.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePatternPaintBuffers(h));var x=c.constantOr(null);if(x&&m.imageAtlas){var b=m.imageAtlas,w=b.patternPositions[x.to.toString()],E=b.patternPositions[x.from.toString()];w&&E&&v.setConstantPatternPositions(w,E)}var T=t.translatePosMatrix(f.posMatrix,m,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),I=i.paint.get("fill-extrusion-vertical-gradient"),C=u?vi(T,t,I,p,f,h,m):gi(T,t,I,p);y.draw(s,s.gl.TRIANGLES,r,a,n,Pt.backCCW,C,i.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,i.paint,t.transform.zoom,v)}}}function oo(t,e,i,o,r,a){var n=t.context,s=n.gl,l=e.fbo;if(l){var c=t.useProgram("hillshade");n.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var u=Li(t,e,i);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?c.draw(n,s.TRIANGLES,o,r,a,Pt.disabled,u,i.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):c.draw(n,s.TRIANGLES,o,r,a,Pt.disabled,u,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function ro(e,i,o,r,a,n,s){var l=e.context,c=l.gl,u=i.dem;if(u&&u.data){var h=u.dim,p=u.stride,d=u.getPixels();if(l.activeTexture.set(c.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(p),i.demTexture){var _=i.demTexture;_.update(d,{premultiply:!1}),_.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else i.demTexture=new t.Texture(l,d,c.RGBA,{premultiply:!1}),i.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);l.activeTexture.set(c.TEXTURE0);var f=i.fbo;if(!f){var m=new t.Texture(l,{width:h,height:h,data:null},c.RGBA);m.bind(c.LINEAR,c.CLAMP_TO_EDGE),(f=i.fbo=l.createFramebuffer(h,h)).colorAttachment.set(m.texture)}l.bindFramebuffer.set(f.framebuffer),l.viewport.set([0,0,h,h]),e.useProgram("hillshadePrepare").draw(l,c.TRIANGLES,a,n,s,Pt.disabled,Mi(i.tileID,u,r),o.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function ao(e,i,o,r,a){var n=r.paint.get("raster-fade-duration");if(n>0){var s=t.browser.now(),l=(s-e.timeAdded)/n,c=i?(s-i.timeAdded)/n:-1,u=o.getSource(),h=a.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),p=!i||Math.abs(i.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),d=p&&e.refreshedUponExpiration?1:t.clamp(p?l:1-c,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}function no(e,i,o){var r=e.context,a=r.gl,n=o.posMatrix,s=e.useProgram("debug"),l=It.disabled,c=Ct.disabled,u=e.colorModeForRenderPass(),h="$debug";s.draw(r,a.LINE_STRIP,l,c,u,Pt.disabled,Ci(n,t.Color.red),h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var p=i.getTileByID(o.key).latestRawTileData,d=p&&p.byteLength||0,_=Math.floor(d/1024),f=i.getTile(o).tileSize,m=512/Math.min(f,512),g=function(t,e,i,o){o=o||1;var r,a,n,s,l,c,u,h,p=[];for(r=0,a=t.length;r<a;r++)if(l=so[t[r]]){for(h=null,n=0,s=l[1].length;n<s;n+=2)-1===l[1][n]&&-1===l[1][n+1]?h=null:(c=e+l[1][n]*o,u=i-l[1][n+1]*o,h&&p.push(h.x,h.y,c,u),h={x:c,y:u});e+=l[0]*o}return p}(o.toString()+" "+_+"kb",50,200*m,5*m),v=new t.StructArrayLayout2i4,y=new t.StructArrayLayout2ui4,x=0;x<g.length;x+=2)v.emplaceBack(g[x],g[x+1]),y.emplaceBack(x,x+1);for(var b=r.createVertexBuffer(v,Ne.members),w=r.createIndexBuffer(y),E=t.SegmentVector.simpleSegment(0,0,v.length/2,v.length/2),T=t.EXTENT/(Math.pow(2,e.transform.zoom-o.overscaledZ)*f*m),I=[],C=-1;C<=1;C++)for(var S=-1;S<=1&&(0!==C||0!==S);S++)I.push([C,S]);for(var P=0;P<I.length;P++){var z=I[P];s.draw(r,a.LINES,l,c,u,Pt.disabled,Ci(t.translate([],n,[T*z[0],T*z[1],0]),t.Color.white),h,b,w,E)}s.draw(r,a.LINES,l,c,u,Pt.disabled,Ci(n,t.Color.black),h,b,w,E),b.destroy(),w.destroy(),E.destroy()}var so={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},lo={symbol:function(e,i,o,r,a){if("translucent"===e.renderPass){var n=Ct.disabled,s=e.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(e,i,o,r,a,n,s){for(var l=i.transform,c="map"===a,u="map"===n,h=0,p=e;h<p.length;h+=1){var d=p[h],_=r.getTile(d),f=_.getBucket(o);if(f&&f.text&&f.text.segments.get().length){var m=f.textSizeData,g=t.evaluateSizeForZoom(m,l.zoom),v=ue(_,1,i.transform.zoom),y=Kt(d.posMatrix,u,c,i.transform,v),x="none"!==o.layout.get("icon-text-fit")&&f.hasIconData();if(g){var b=Math.pow(2,l.zoom-_.tileID.overscaledZ);Qi(f,c,u,s,t.symbolSize,l,y,d.posMatrix,b,g,x)}}}}(r,e,o,i,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),a),0!==o.paint.get("icon-opacity").constantOr(1)&&$i(e,i,o,r,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),n,s),0!==o.paint.get("text-opacity").constantOr(1)&&$i(e,i,o,r,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),n,s),i.map.showCollisionBoxes&&(Ki(e,i,o,r,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),Ki(e,i,o,r,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))}},circle:function(e,i,o,r){if("translucent"===e.renderPass){var a=o.paint.get("circle-opacity"),n=o.paint.get("circle-stroke-width"),s=o.paint.get("circle-stroke-opacity"),l=void 0!==o.layout.get("circle-sort-key").constantOr(1);if(0!==a.constantOr(1)||0!==n.constantOr(1)&&0!==s.constantOr(1)){for(var c=e.context,u=c.gl,h=e.depthModeForSublayer(0,It.ReadOnly),p=Ct.disabled,d=e.colorModeForRenderPass(),_=[],f=0;f<r.length;f++){var m=r[f],g=i.getTile(m),v=g.getBucket(o);if(v){var y=v.programConfigurations.get(o.id),x={programConfiguration:y,program:e.useProgram("circle",y),layoutVertexBuffer:v.layoutVertexBuffer,indexBuffer:v.indexBuffer,uniformValues:Ei(e,m,g,o)};if(l)for(var b=0,w=v.segments.get();b<w.length;b+=1){var E=w[b];_.push({segments:new t.SegmentVector([E]),sortKey:E.sortKey,state:x})}else _.push({segments:v.segments,sortKey:0,state:x})}}l&&_.sort((function(t,e){return t.sortKey-e.sortKey}));for(var T=0,I=_;T<I.length;T+=1){var C=I[T],S=C.state,P=S.programConfiguration,z=S.program,L=S.layoutVertexBuffer,M=S.indexBuffer,D=S.uniformValues,R=C.segments;z.draw(c,u.TRIANGLES,h,p,d,Pt.disabled,D,o.id,L,M,R,o.paint,e.transform.zoom,P)}}}},heatmap:function(e,i,o,r){if(0!==o.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var a=e.context,n=a.gl,s=e.depthModeForSublayer(0,It.ReadOnly),l=Ct.disabled,c=new St([n.ONE,n.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){var o=t.gl;t.activeTexture.set(o.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r=i.heatmapFbo;if(r)o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),r=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,i,o,r){var a=e.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,i.width/4,i.height/4,0,a.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(o),e.extTextureHalfFloat&&a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),t(e,i,o,r))}(t,e,a,r)}}(a,e,o),a.clear({color:t.Color.transparent});for(var u=0;u<r.length;u++){var h=r[u];if(!i.hasRenderableParent(h)){var p=i.getTile(h),d=p.getBucket(o);if(d){var _=d.programConfigurations.get(o.id),f=e.useProgram("heatmap",_),m=e.transform.zoom;f.draw(a,n.TRIANGLES,s,l,c,Pt.disabled,Pi(h.posMatrix,p,m,o.paint.get("heatmap-intensity")),o.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,o.paint,e.transform.zoom,_)}}}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){var o=e.context,r=o.gl,a=i.heatmapFbo;if(a){o.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),o.activeTexture.set(r.TEXTURE1);var n=i.colorRampTexture;n||(n=i.colorRampTexture=new t.Texture(o,i.colorRamp,r.RGBA)),n.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(o,r.TRIANGLES,It.disabled,Ct.disabled,e.colorModeForRenderPass(),Pt.disabled,function(e,i,o,r){var a=t.create();t.ortho(a,0,e.width,e.height,0,0,1);var n=e.context.gl;return{u_matrix:a,u_world:[n.drawingBufferWidth,n.drawingBufferHeight],u_image:o,u_color_ramp:r,u_opacity:i.paint.get("heatmap-opacity")}}(e,i,0,1),i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}}(e,o))},line:function(e,i,o,r){if("translucent"===e.renderPass){var a=o.paint.get("line-opacity"),n=o.paint.get("line-width");if(0!==a.constantOr(1)&&0!==n.constantOr(1)){var s=e.depthModeForSublayer(0,It.ReadOnly),l=e.colorModeForRenderPass(),c=o.paint.get("line-dasharray"),u=o.paint.get("line-pattern"),h=u.constantOr(1),p=o.paint.get("line-gradient"),d=o.getCrossfadeParameters(),_=c?"lineSDF":h?"linePattern":p?"lineGradient":"line",f=e.context,m=f.gl,g=!0;if(p){f.activeTexture.set(m.TEXTURE0);var v=o.gradientTexture;if(!o.gradient)return;v||(v=o.gradientTexture=new t.Texture(f,o.gradient,m.RGBA)),v.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var y=0,x=r;y<x.length;y+=1){var b=x[y],w=i.getTile(b);if(!h||w.patternsLoaded()){var E=w.getBucket(o);if(E){var T=E.programConfigurations.get(o.id),I=e.context.program.get(),C=e.useProgram(_,T),S=g||C.program!==I,P=u.constantOr(null);if(P&&w.imageAtlas){var z=w.imageAtlas,L=z.patternPositions[P.to.toString()],M=z.patternPositions[P.from.toString()];L&&M&&T.setConstantPatternPositions(L,M)}var D=c?Bi(e,w,o,c,d):h?ki(e,w,o,d):p?Ai(e,w,o):Ri(e,w,o);c&&(S||e.lineAtlas.dirty)?(f.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(f)):h&&(f.activeTexture.set(m.TEXTURE0),w.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),T.updatePatternPaintBuffers(d)),C.draw(f,m.TRIANGLES,s,e.stencilModeForClipping(b),l,Pt.disabled,D,o.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,o.paint,e.transform.zoom,T),g=!1}}}}}},fill:function(e,i,o,r){var a=o.paint.get("fill-color"),n=o.paint.get("fill-opacity");if(0!==n.constantOr(1)){var s=e.colorModeForRenderPass(),l=o.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(t.Color.transparent).a&&1===n.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){var u=e.depthModeForSublayer(1,"opaque"===e.renderPass?It.ReadWrite:It.ReadOnly);eo(e,i,o,r,u,s,!1)}if("translucent"===e.renderPass&&o.paint.get("fill-antialias")){var h=e.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,It.ReadOnly);eo(e,i,o,r,h,s,!0)}}},"fill-extrusion":function(t,e,i,o){var r=i.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===t.renderPass){var a=new It(t.context.gl.LEQUAL,It.ReadWrite,t.depthRangeFor3D);if(1!==r||i.paint.get("fill-extrusion-pattern").constantOr(1))io(t,e,i,o,a,Ct.disabled,St.disabled),io(t,e,i,o,a,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var n=t.colorModeForRenderPass();io(t,e,i,o,a,Ct.disabled,n)}}},hillshade:function(t,e,i,o){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var r=t.context,a=e.getSource().maxzoom,n=t.depthModeForSublayer(0,It.ReadOnly),s=Ct.disabled,l=t.colorModeForRenderPass(),c=0,u=o;c<u.length;c+=1){var h=u[c],p=e.getTile(h);p.needsHillshadePrepare&&"offscreen"===t.renderPass?ro(t,p,i,a,n,s,l):"translucent"===t.renderPass&&oo(t,p,i,n,s,l)}r.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,i,o){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity"))for(var r=t.context,a=r.gl,n=e.getSource(),s=t.useProgram("raster"),l=Ct.disabled,c=t.colorModeForRenderPass(),u=o.length&&o[0].overscaledZ,h=!t.options.moving,p=0,d=o;p<d.length;p+=1){var _=d[p],f=t.depthModeForSublayer(_.overscaledZ-u,1===i.paint.get("raster-opacity")?It.ReadWrite:It.ReadOnly,a.LESS),m=e.getTile(_),g=t.transform.calculatePosMatrix(_.toUnwrapped(),h);m.registerFadeDuration(i.paint.get("raster-fade-duration"));var v=e.findLoadedParent(_,0),y=ao(m,v,e,i,t.transform),x=void 0,b=void 0,w="nearest"===i.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;r.activeTexture.set(a.TEXTURE0),m.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(a.TEXTURE1),v?(v.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),x=Math.pow(2,v.tileID.overscaledZ-m.tileID.overscaledZ),b=[m.tileID.canonical.x*x%1,m.tileID.canonical.y*x%1]):m.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);var E=Ui(g,b||[0,0],x||1,y,i);n instanceof M?s.draw(r,a.TRIANGLES,f,l,c,Pt.disabled,E,i.id,n.boundsBuffer,t.quadTriangleIndexBuffer,n.boundsSegments):m.maskedBoundsBuffer&&m.maskedIndexBuffer&&m.segments?s.draw(r,a.TRIANGLES,f,l,c,Pt.disabled,E,i.id,m.maskedBoundsBuffer,m.maskedIndexBuffer,m.segments,i.paint,t.transform.zoom):s.draw(r,a.TRIANGLES,f,l,c,Pt.disabled,E,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i){var o=i.paint.get("background-color"),r=i.paint.get("background-opacity");if(0!==r){var a=t.context,n=a.gl,s=t.transform,l=s.tileSize,c=i.paint.get("background-pattern");if(!t.isPatternMissing(c)){var u=!c&&1===o.a&&1===r&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===u){var h=Ct.disabled,p=t.depthModeForSublayer(0,"opaque"===u?It.ReadWrite:It.ReadOnly),d=t.colorModeForRenderPass(),_=t.useProgram(c?"backgroundPattern":"background"),f=s.coveringTiles({tileSize:l});c&&(a.activeTexture.set(n.TEXTURE0),t.imageManager.bind(t.context));for(var m=i.getCrossfadeParameters(),g=0,v=f;g<v.length;g+=1){var y=v[g],x=t.transform.calculatePosMatrix(y.toUnwrapped()),b=c?ji(x,r,t,c,{tileID:y,tileSize:l},m):Vi(x,r,o);_.draw(a,n.TRIANGLES,p,h,d,Pt.disabled,b,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,i){for(var o=0;o<i.length;o++)no(t,e,i[o])},custom:function(t,e,i){var o=t.context,r=i.implementation;if("offscreen"===t.renderPass){var a=r.prerender;a&&(t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),a.call(r,o.gl,t.transform.customLayerMatrix()),o.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),o.setStencilMode(Ct.disabled);var n="3d"===r.renderingMode?new It(t.context.gl.LEQUAL,It.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,It.ReadOnly);o.setDepthMode(n),r.render(o.gl,t.transform.customLayerMatrix()),o.setDirty(),t.setBaseState(),o.bindFramebuffer.set(null)}}},co=function(e,i){this.context=new zt(e),this.transform=i,this._tileTextures={},this.setup(),this.numSublayers=Lt.maxUnderzooming+Lt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new ke};function uo(t,e){if(t.y>e.y){var i=t;t=e,e=i}return{x0:t.x,y0:t.y,x1:e.x,y1:e.y,dx:e.x-t.x,dy:e.y-t.y}}function ho(t,e,i,o,r){var a=Math.max(i,Math.floor(e.y0)),n=Math.min(o,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,c=e.dx/e.dy,u=t.dx>0,h=e.dx<0,p=a;p<n;p++){var d=l*Math.max(0,Math.min(t.dy,p+u-t.y0))+t.x0,_=c*Math.max(0,Math.min(e.dy,p+h-e.y0))+e.x0;r(Math.floor(_),Math.ceil(d),p)}}function po(t,e,i,o,r,a){var n,s=uo(t,e),l=uo(e,i),c=uo(i,t);s.dy>l.dy&&(n=s,s=l,l=n),s.dy>c.dy&&(n=s,s=c,c=n),l.dy>c.dy&&(n=l,l=c,c=n),s.dy&&ho(c,s,o,r,a),l.dy&&ho(c,l,o,r,a)}co.prototype.resize=function(e,i){var o=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=i*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,a=this.style._order;r<a.length;r+=1){var n=a[r];this.style._layers[n].resize()}this.depthRbo&&(o.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},co.prototype.setup=function(){var e=this.context,i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,Ne.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(t.EXTENT,0),o.emplaceBack(0,t.EXTENT),o.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(o,Ne.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,Ne.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var n=new t.StructArrayLayout1ui2;n.emplaceBack(0),n.emplaceBack(1),n.emplaceBack(3),n.emplaceBack(2),n.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(n);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var l=this.context.gl;this.stencilClearMode=new Ct({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},co.prototype.clearStencil=function(){var e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var o=t.create();t.ortho(o,0,this.width,this.height,0,0,1),t.scale(o,o,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,i.TRIANGLES,It.disabled,this.stencilClearMode,St.disabled,Pt.disabled,Si(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},co.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var i=this.context,o=i.gl;this.nextStencilID+e.length>256&&this.clearStencil(),i.setColorMode(St.disabled),i.setDepthMode(It.disabled);var r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var a=0,n=e;a<n.length;a+=1){var s=n[a],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;r.draw(i,o.TRIANGLES,It.disabled,new Ct({func:o.ALWAYS,mask:0},l,255,o.KEEP,o.KEEP,o.REPLACE),St.disabled,Pt.disabled,Si(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},co.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Ct({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},co.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Ct({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},co.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new St([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?St.unblended:St.alphaBlended},co.prototype.depthModeForSublayer=function(t,e,i){if(!this.opaquePassEnabledForLayer())return It.disabled;var o=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new It(i||this.context.gl.LEQUAL,e,[o,o])},co.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},co.prototype.render=function(e,i){this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var o=this.style._order,r=this.style.sourceCaches;for(var a in r){var n=r[a];n.used&&n.prepare(this.context)}var s={},l={},c={};for(var u in r){var h=r[u];s[u]=h.getVisibleCoordinates(),l[u]=s[u].slice().reverse(),c[u]=h.getVisibleCoordinates(!0).reverse()}for(var p in r){var d=r[p],_=d.getSource();if("raster"===_.type||"raster-dem"===_.type){for(var f=[],m=0,g=s[p];m<g.length;m+=1){var v=g[m];f.push(d.getTile(v))}Wi(f,this.context)}}this.opaquePassCutoff=1/0;for(var y=0;y<o.length;y++){var x=o[y];if(this.style._layers[x].is3D()){this.opaquePassCutoff=y;break}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var b=0,w=o;b<w.length;b+=1){var E=w[b],T=this.style._layers[E];if(T.hasOffscreenPass()&&!T.isHidden(this.transform.zoom)){var I=l[T.source];("custom"===T.type||I.length)&&this.renderLayer(this,r[T.source],T,I)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=o.length-1;this.currentLayer>=0;this.currentLayer--){var C=this.style._layers[o[this.currentLayer]],S=r[C.source],P=s[C.source];this._renderTileClippingMasks(C,P),this.renderLayer(this,S,C,P)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){var z=this.style._layers[o[this.currentLayer]],L=r[z.source],M=("symbol"===z.type?c:l)[z.source];this._renderTileClippingMasks(z,s[z.source]),this.renderLayer(this,L,z,M)}if(this.options.showTileBoundaries)for(var D in r){lo.debug(this,r[D],s[D]);break}this.context.setDefault()},co.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},co.prototype.renderLayer=function(t,e,i,o){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||o.length)&&(this.id=i.id,lo[i.type](t,e,i,o,this.style.placement.variableOffsets))},co.prototype.translatePosMatrix=function(e,i,o,r,a){if(!o[0]&&!o[1])return e;var n=a?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(n){var s=Math.sin(n),l=Math.cos(n);o=[o[0]*l-o[1]*s,o[0]*s+o[1]*l]}var c=[a?o[0]:ue(i,o[0],this.transform.zoom),a?o[1]:ue(i,o[1],this.transform.zoom),0],u=new Float32Array(16);return t.translate(u,e,c),u},co.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},co.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},co.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i},co.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var i=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new fi(this.context,di[t],e,Gi[t],this._showOverdrawInspector)),this.cache[i]},co.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},co.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)};var _o=function(e,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=i||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},fo={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};_o.prototype.clone=function(){var t=new _o(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},fo.minZoom.get=function(){return this._minZoom},fo.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},fo.maxZoom.get=function(){return this._maxZoom},fo.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},fo.renderWorldCopies.get=function(){return this._renderWorldCopies},fo.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},fo.worldSize.get=function(){return this.tileSize*this.scale},fo.centerPoint.get=function(){return this.size._div(2)},fo.size.get=function(){return new t.Point(this.width,this.height)},fo.bearing.get=function(){return-this.angle/Math.PI*180},fo.bearing.set=function(e){var i=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},fo.pitch.get=function(){return this._pitch/Math.PI*180},fo.pitch.set=function(e){var i=t.clamp(e,0,60)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())},fo.fov.get=function(){return this._fov/Math.PI*180},fo.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},fo.zoom.get=function(){return this._zoom},fo.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},fo.center.get=function(){return this._center},fo.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},_o.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},_o.prototype.getVisibleUnwrappedCoordinates=function(e){var i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new t.Point(0,0)),r=this.pointCoordinate(new t.Point(this.width,0)),a=this.pointCoordinate(new t.Point(this.width,this.height)),n=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(o.x,r.x,a.x,n.x)),l=Math.floor(Math.max(o.x,r.x,a.x,n.x)),c=s-1;c<=l+1;c++)0!==c&&i.push(new t.UnwrappedTileID(c,e));return i},_o.prototype.coveringTiles=function(e){var i=this.coveringZoomLevel(e),o=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);var r=t.MercatorCoordinate.fromLngLat(this.center),a=Math.pow(2,i),n=new t.Point(a*r.x-.5,a*r.y-.5);return function(e,i,o,r){void 0===r&&(r=!0);var a=1<<e,n={};function s(i,s,l){var c,u,h,p;if(l>=0&&l<=a)for(c=i;c<s;c++)u=Math.floor(c/a),h=(c%a+a)%a,0!==u&&!0!==r||(p=new t.OverscaledTileID(o,u,e,h,l),n[p.key]=p)}var l=i.map((function(e){return new t.Point(e.x,e.y)._mult(a)}));return po(l[0],l[1],l[2],0,a,s),po(l[2],l[3],l[0],0,a,s),Object.keys(n).map((function(t){return n[t]}))}(i,[this.pointCoordinate(new t.Point(0,0)),this.pointCoordinate(new t.Point(this.width,0)),this.pointCoordinate(new t.Point(this.width,this.height)),this.pointCoordinate(new t.Point(0,this.height))],e.reparseOverscaled?o:i,this._renderWorldCopies).sort((function(t,e){return n.dist(t.canonical)-n.dist(e.canonical)}))},_o.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},fo.unmodified.get=function(){return this._unmodified},_o.prototype.zoomScale=function(t){return Math.pow(2,t)},_o.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},_o.prototype.project=function(e){var i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)},_o.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},fo.point.get=function(){return this.project(this.center)},_o.prototype.setLocationAtPoint=function(e,i){var o=this.pointCoordinate(i),r=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(e),n=new t.MercatorCoordinate(a.x-(o.x-r.x),a.y-(o.y-r.y));this.center=this.coordinateLocation(n),this._renderWorldCopies&&(this.center=this.center.wrap())},_o.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},_o.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},_o.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},_o.prototype.coordinateLocation=function(t){return t.toLngLat()},_o.prototype.pointCoordinate=function(e){var i=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(o,o,this.pixelMatrixInverse);var r=i[3],a=o[3],n=i[0]/r,s=o[0]/a,l=i[1]/r,c=o[1]/a,u=i[2]/r,h=o[2]/a,p=u===h?0:(0-u)/(h-u);return new t.MercatorCoordinate(t.number(n,s,p)/this.worldSize,t.number(l,c,p)/this.worldSize)},_o.prototype.coordinatePoint=function(e){var i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix),new t.Point(i[0]/i[3],i[1]/i[3])},_o.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},_o.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},_o.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},_o.prototype.calculatePosMatrix=function(e,i){void 0===i&&(i=!1);var o=e.key,r=i?this._alignedPosMatrixCache:this._posMatrixCache;if(r[o])return r[o];var a=e.canonical,n=this.worldSize/this.zoomScale(a.z),s=a.x+Math.pow(2,a.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*n,a.y*n,0]),t.scale(l,l,[n/t.EXTENT,n/t.EXTENT,1]),t.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),r[o]=new Float32Array(l),r[o]},_o.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},_o.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,i,o,r,a=-90,n=90,s=-180,l=180,c=this.size,u=this._unmodified;if(this.latRange){var h=this.latRange;a=t.mercatorYfromLat(h[1])*this.worldSize,e=(n=t.mercatorYfromLat(h[0])*this.worldSize)-a<c.y?c.y/(n-a):0}if(this.lngRange){var p=this.lngRange;s=t.mercatorXfromLng(p[0])*this.worldSize,i=(l=t.mercatorXfromLng(p[1])*this.worldSize)-s<c.x?c.x/(l-s):0}var d=this.point,_=Math.max(i||0,e||0);if(_)return this.center=this.unproject(new t.Point(i?(l+s)/2:d.x,e?(n+a)/2:d.y)),this.zoom+=this.scaleZoom(_),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var f=d.y,m=c.y/2;f-m<a&&(r=a+m),f+m>n&&(r=n-m)}if(this.lngRange){var g=d.x,v=c.x/2;g-v<s&&(o=s+v),g+v>l&&(o=l-v)}void 0===o&&void 0===r||(this.center=this.unproject(new t.Point(void 0!==o?o:d.x,void 0!==r?r:d.y))),this._unmodified=u,this._constraining=!1}},_o.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,i=Math.PI/2+this._pitch,o=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-i-e),r=this.point,a=r.x,n=r.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*o+this.cameraToCenterDistance),l=this.height/50,c=new Float64Array(16);t.perspective(c,this._fov,this.width/this.height,l,s),t.scale(c,c,[1,-1,1]),t.translate(c,c,[0,0,-this.cameraToCenterDistance]),t.rotateX(c,c,this._pitch),t.rotateZ(c,c,this.angle),t.translate(c,c,[-a,-n,0]),this.mercatorMatrix=t.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),t.scale(c,c,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=c;var u=this.width%2/2,h=this.height%2/2,p=Math.cos(this.angle),d=Math.sin(this.angle),_=a-Math.round(a)+p*u+d*h,f=n-Math.round(n)+p*h+d*u,m=new Float64Array(c);if(t.translate(m,m,[_>.5?_-1:_,f>.5?f-1:f,0]),this.alignedProjMatrix=m,c=t.create(),t.scale(c,c,[this.width/2,-this.height/2,1]),t.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=t.create(),t.scale(c,c,[1,-1,1]),t.translate(c,c,[-1,-1,0]),t.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(c=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}},_o.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},_o.prototype.getCameraPoint=function(){var e=this._pitch,i=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,i))},_o.prototype.getCameraQueryGeometry=function(e){var i=this.getCameraPoint();if(1===e.length)return[e[0],i];for(var o=i.x,r=i.y,a=i.x,n=i.y,s=0,l=e;s<l.length;s+=1){var c=l[s];o=Math.min(o,c.x),r=Math.min(r,c.y),a=Math.max(a,c.x),n=Math.max(n,c.y)}return[new t.Point(o,r),new t.Point(a,r),new t.Point(a,n),new t.Point(o,n),new t.Point(o,r)]},Object.defineProperties(_o.prototype,fo);var mo=function(e){var i,r,a,n;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(i=this._updateHashUnthrottled.bind(this),r=!1,a=null,n=function(){a=null,r&&(i(),a=setTimeout(n,300),r=!1)},function(){return r=!0,a||n(),a})};mo.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},mo.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},mo.prototype.getHashString=function(e){var i=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,r=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,r),n=Math.round(i.lng*a)/a,s=Math.round(i.lat*a)/a,l=this._map.getBearing(),c=this._map.getPitch(),u="";if(u+=e?"/"+n+"/"+s+"/"+o:o+"/"+s+"/"+n,(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/"+Math.round(c)),this._hashName){var h=this._hashName,p=!1,d=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===h?(p=!0,e+"="+u):t})).filter((function(t){return t}));return p||d.push(h+"="+u),"#"+d.join("&")}return"#"+u},mo.prototype._getCurrentHash=function(){var e=this,i=t.window.location.hash.replace("#","");if(this._hashName){var o=i.split("&").map((function(t){return t.split("=")})).find((function(t){return t[0]===e._hashName}));return(o&&o[1]||"").split("/")}return i.split("/")},mo.prototype._onHashChange=function(){var t=this._getCurrentHash();return t.length>=3&&!t.some((function(t){return isNaN(t)}))&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},mo.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var go=function(e){function o(o,r,a,n){void 0===n&&(n={});var s=i.mousePos(r.getCanvasContainer(),a),l=r.unproject(s);e.call(this,o,t.extend({point:s,lngLat:l,originalEvent:a},n)),this._defaultPrevented=!1,this.target=r}e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o;var r={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,r),o}(t.Event),vo=function(e){function o(o,r,a){var n=i.touchPos(r.getCanvasContainer(),a),s=n.map((function(t){return r.unproject(t)})),l=n.reduce((function(t,e,i,o){return t.add(e.div(o.length))}),new t.Point(0,0)),c=r.unproject(l);e.call(this,o,{points:n,point:l,lngLats:s,lngLat:c,originalEvent:a}),this._defaultPrevented=!1}e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o;var r={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,r),o}(t.Event),yo=function(t){function e(e,i,o){t.call(this,e,{originalEvent:o}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(t.Event),xo=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};xo.prototype.setZoomRate=function(t){this._defaultZoomRate=t},xo.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},xo.prototype.isEnabled=function(){return!!this._enabled},xo.prototype.isActive=function(){return!!this._active},xo.prototype.isZooming=function(){return!!this._zooming},xo.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},xo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},xo.prototype.onWheel=function(e){if(this.isEnabled()){var i=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,o=t.browser.now(),r=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this.isActive()||this._start(e)),e.preventDefault()}},xo.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},xo.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e}))),this._finishTimeout&&clearTimeout(this._finishTimeout);var o=i.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(o)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},xo.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var i=this._map.transform;if(0!==this._delta){var o="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,r=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&0!==r&&(r=1/r);var a="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var n="number"==typeof this._targetZoom?this._targetZoom:i.zoom,s=this._startZoom,l=this._easing,c=!1;if("wheel"===this._type&&s&&l){var u=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),h=l(u);i.zoom=t.number(s,n,h),u<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):c=!0}else i.zoom=n,c=!0;i.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),c&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom}),200))}},xo.prototype._smoothOutEasing=function(e){var i=t.ease;if(this._prevEase){var o=this._prevEase,r=(t.browser.now()-o.start)/o.duration,a=o.easing(r+.01)-o.easing(r),n=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-n*n);i=t.bezier(n,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:i},i};var bo=function(e,i){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=i.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};bo.prototype.isEnabled=function(){return!!this._enabled},bo.prototype.isActive=function(){return!!this._active},bo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},bo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},bo.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),i.disableDrag(),this._startPos=this._lastPos=i.mousePos(this._el,e),this._active=!0)},bo.prototype._onMouseMove=function(t){var e=i.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var o=this._startPos;this._lastPos=e,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(o.x,e.x),a=Math.max(o.x,e.x),n=Math.min(o.y,e.y),s=Math.max(o.y,e.y);i.setTransform(this._box,"translate("+r+"px,"+n+"px)"),this._box.style.width=a-r+"px",this._box.style.height=s-n+"px"}},bo.prototype._onMouseUp=function(e){if(0===e.button){var o=this._startPos,r=i.mousePos(this._el,e);this._finish(),i.suppressClick(),o.x===r.x&&o.y===r.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(o,r,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},bo.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},bo.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},bo.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))};var wo=t.bezier(0,0,.25,1),Eo=function(e,i){this._map=e,this._el=i.element||e.getCanvasContainer(),this._state="disabled",this._button=i.button||"right",this._bearingSnap=i.bearingSnap||0,this._pitchWithRotate=!1!==i.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};Eo.prototype.isEnabled=function(){return"disabled"!==this._state},Eo.prototype.isActive=function(){return"active"===this._state},Eo.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},Eo.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Eo.prototype.onMouseDown=function(e){if("enabled"===this._state){var o="touchstart"===e.type;if(o)this._startTime=Date.now();else if("right"===this._button){if(this._eventButton=i.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==i.mouseButton(e))return;this._eventButton=0}i.disableDrag(),o?(t.window.document.addEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("touchend",this._onMouseUp)):(t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp)),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._prevPos=this._lastPos=i.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},Eo.prototype._onMouseMove=function(t){var e=i.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Eo.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var i=this._map.transform,o=this._prevPos,r=this._lastPos,a=.8*(o.x-r.x),n=-.5*(o.y-r.y),s=i.bearing-a,l=i.pitch-n,c=this._inertia,u=c[c.length-1];this._drainInertiaBuffer(),c.push([t.browser.now(),this._map._normalizeBearing(s,u[1])]);var h=i.bearing;if(i.bearing=s,this._pitchWithRotate){var p=i.pitch;i.pitch=l,i.pitch!==p&&this._fireEvent("pitch",e)}i.bearing!==h&&this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._prevPos=this._lastPos}},Eo.prototype._onMouseUp=function(t){if("touchend"===t.type&&this._startPos===this._lastPos&&Date.now()-this._startTime<300&&this._el.click(),i.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",i.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},Eo.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},Eo.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.document.removeEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("touchend",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),i.enableDrag()},Eo.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._lastPos},Eo.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var i=this._map,o=i.getBearing(),r=this._inertia,a=function(){Math.abs(o)<e._bearingSnap?i.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(r.length<2)a();else{var n=r[0],s=r[r.length-1],l=r[r.length-2],c=i._normalizeBearing(o,l[1]),u=s[1]-n[1],h=u<0?-1:1,p=(s[0]-n[0])/1e3;if(0!==u&&0!==p){var d=Math.abs(u*(.25/p));d>180&&(d=180);var _=d/180;c+=h*d*(_/2),Math.abs(i._normalizeBearing(c,0))<this._bearingSnap&&(c=i._normalizeBearing(0,c)),i.rotateTo(c,{duration:1e3*_,easing:wo,noMoveStart:!0},{originalEvent:t})}else a()}},Eo.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))},Eo.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,i=t.browser.now();e.length>0&&i-e[0][0]>160;)e.shift()};var To=t.bezier(0,0,.3,1),Io=function(e,i){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=i.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};Io.prototype.isEnabled=function(){return"disabled"!==this._state},Io.prototype.isActive=function(){return"active"===this._state},Io.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},Io.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Io.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==i.mouseButton(e)||(i.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),i.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},Io.prototype.onTouchStart=function(e){this.isEnabled()&&(e.touches&&e.touches.length>1&&("pending"===this._state||"active"===this._state)||(i.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),i.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},Io.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._prevPos=this._lastPos=i.mousePos(this._el,e),this._startTouch=this._lastTouch=t.window.TouchEvent&&e instanceof t.window.TouchEvent?i.touchPos(this._el,e):null,this._inertia=[[t.browser.now(),this._startPos]]},Io.prototype._touchesMatch=function(t,e){return!(!t||!e||t.length!==e.length)&&t.every((function(t,i){return e[i]===t}))},Io.prototype._onMove=function(e){e.preventDefault();var o=t.window.TouchEvent&&e instanceof t.window.TouchEvent?i.touchPos(this._el,e):null,r=i.mousePos(this._el,e);(o?this._touchesMatch(this._lastTouch,o):this._lastPos.equals(r))||"pending"===this._state&&r.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=r,this._lastTouch=o,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._shouldStart=!0),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Io.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t)if(this._map.touchZoomRotate.isActive())this._abort(t);else if(this._shouldStart&&(this._fireEvent("dragstart",t),this._fireEvent("movestart",t),this._shouldStart=!1),this.isActive()){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._prevPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._prevPos=this._lastPos,delete this._lastMoveEvent}},Io.prototype._onMouseUp=function(t){if(0===i.mouseButton(t))switch(this._state){case"active":this._state="enabled",i.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},Io.prototype._onTouchEnd=function(t){if(t.touches&&0!==t.touches.length)switch(this._state){case"pending":case"active":break;case"enabled":this.onTouchStart(t)}else switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},Io.prototype._abort=function(e){switch(this._state){case"active":this._state="enabled",this._shouldStart||(this._fireEvent("dragend",e),this._fireEvent("moveend",e)),this._unbind(),this._deactivate(),t.window.TouchEvent&&e instanceof t.window.TouchEvent&&e.touches.length>1&&i.addEventListener(t.window.document,"touchend",this._onTouchEnd);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},Io.prototype._onBlur=function(t){this._abort(t)},Io.prototype._unbind=function(){i.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),i.removeEventListener(t.window.document,"touchend",this._onTouchEnd),i.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),i.removeEventListener(t.window.document,"mouseup",this._onMouseUp),i.removeEventListener(t.window,"blur",this._onBlur)},Io.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._mouseDownPos,delete this._lastPos,delete this._startTouch,delete this._lastTouch,delete this._shouldStart},Io.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var i=e[e.length-1],o=e[0],r=i[1].sub(o[1]),a=(i[0]-o[0])/1e3;if(0===a||i[1].equals(o[1]))this._fireEvent("moveend",t);else{var n=r.mult(.3/a),s=n.mag();s>1400&&(s=1400,n._unit()._mult(s));var l=s/750,c=n.mult(-l/2);this._map.panBy(c,{duration:1e3*l,easing:To,noMoveStart:!0},{originalEvent:t})}}},Io.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))},Io.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,i=t.browser.now();e.length>0&&i-e[0][0]>160;)e.shift()};var Co=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function So(t){return t*(2-t)}Co.prototype.isEnabled=function(){return!!this._enabled},Co.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Co.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Co.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,i=0,o=0,r=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?o=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?o=-1:(a=1,t.preventDefault());break;default:return}var n=this._map,s=n.getZoom(),l={duration:300,delayEndEvents:500,easing:So,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:n.getBearing()+15*i,pitch:n.getPitch()+10*o,offset:[100*-r,100*-a],center:n.getCenter()};n.easeTo(l,{originalEvent:t})}};var Po=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};Po.prototype.isEnabled=function(){return!!this._enabled},Po.prototype.isActive=function(){return!!this._active},Po.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Po.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Po.prototype.onTouchStart=function(t){var e=this;if(this.isEnabled()&&!(t.points.length>1))if(this._tapped){var i=t.points[0],o=this._tappedPoint;if(o&&o.dist(i)<=30){t.originalEvent.preventDefault();var r=function(){e._tapped&&e._zoom(t),e._map.off("touchcancel",a),e._resetTapped()},a=function(){e._map.off("touchend",r),e._resetTapped()};this._map.once("touchend",r),this._map.once("touchcancel",a)}else this._resetTapped()}else this._tappedPoint=t.points[0],this._tapped=setTimeout((function(){e._tapped=null,e._tappedPoint=null}),300)},Po.prototype._resetTapped=function(){clearTimeout(this._tapped),this._tapped=null,this._tappedPoint=null},Po.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Po.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Po.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var zo=t.bezier(0,0,.15,1),Lo=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};Lo.prototype.isEnabled=function(){return!!this._enabled},Lo.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},Lo.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},Lo.prototype.disableRotation=function(){this._rotationDisabled=!0},Lo.prototype.enableRotation=function(){this._rotationDisabled=!1},Lo.prototype.isActive=function(){return this.isEnabled()&&!!this._gestureIntent},Lo.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var o=i.mousePos(this._el,e.touches[0]),r=i.mousePos(this._el,e.touches[1]),a=o.add(r).div(2);this._startVec=o.sub(r),this._startAround=this._map.transform.pointLocation(a),this._gestureIntent=void 0,this._inertia=[],i.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),i.addEventListener(t.window.document,"touchend",this._onEnd)}},Lo.prototype._getTouchEventData=function(t){var e=i.mousePos(this._el,t.touches[0]),o=i.mousePos(this._el,t.touches[1]),r=e.sub(o);return{vec:r,center:e.add(o).div(2),scale:r.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI}},Lo.prototype._onMove=function(e){if(2===e.touches.length){var i=this._getTouchEventData(e),o=i.vec,r=i.scale,a=i.bearing;if(!this._gestureIntent){var n=this._rotationDisabled&&1!==r||Math.abs(1-r)>.15;Math.abs(a)>10?this._gestureIntent="rotate":n&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=o)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},Lo.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var i=this._map.transform;this._startScale||(this._startScale=i.scale,this._startBearing=i.bearing);var o=this._getTouchEventData(this._lastTouchEvent),r=o.center,a=o.bearing,n=o.scale,s=i.pointLocation(r),l=i.locationPoint(s);"rotate"===e&&(i.bearing=this._startBearing+a),i.zoom=i.scaleZoom(this._startScale*n),i.setLocationAtPoint(this._startAround,l),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),n,r])}},Lo.prototype._onEnd=function(e){i.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),i.removeEventListener(t.window.document,"touchend",this._onEnd);var o=this._gestureIntent,r=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,o){this._map.fire(new t.Event(o+"end",{originalEvent:e})),this._drainInertiaBuffer();var a=this._inertia,n=this._map;if(a.length<2)n.snapToNorth({},{originalEvent:e});else{var s=a[a.length-1],l=a[0],c=n.transform.scaleZoom(r*s[1]),u=n.transform.scaleZoom(r*l[1]),h=c-u,p=(s[0]-l[0])/1e3,d=s[2];if(0!==p&&c!==u){var _=.15*h/p;Math.abs(_)>2.5&&(_=_>0?2.5:-2.5);var f=1e3*Math.abs(_/(12*.15)),m=c+_*f/2e3;m<0&&(m=0),n.easeTo({zoom:m,duration:f,easing:zo,around:this._aroundCenter?n.getCenter():n.unproject(d),noMoveStart:!0},{originalEvent:e})}else n.snapToNorth({},{originalEvent:e})}}},Lo.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,i=t.browser.now();e.length>2&&i-e[0][0]>160;)e.shift()};var Mo={scrollZoom:xo,boxZoom:bo,dragRotate:Eo,dragPan:Io,keyboard:Co,doubleClickZoom:Po,touchZoomRotate:Lo},Do=function(e){function i(i,o){e.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=o.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},i.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},i.prototype.panBy=function(e,i,o){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),o)},i.prototype.panTo=function(e,i,o){return this.easeTo(t.extend({center:e},i),o)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},i.prototype.zoomTo=function(e,i,o){return this.easeTo(t.extend({zoom:e},i),o)},i.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},i.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},i.prototype.rotateTo=function(e,i,o){return this.easeTo(t.extend({bearing:e},i),o)},i.prototype.resetNorth=function(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this},i.prototype.resetNorthPitch=function(e,i){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),i),this},i.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},i.prototype.cameraForBounds=function(e,i){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,i)},i.prototype._cameraForBoxAndBearing=function(e,i,o,r){if("number"==typeof(r=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var a=r.padding;r.padding={top:a,bottom:a,right:a,left:a}}if(t.deepEqual(Object.keys(r.padding).sort((function(t,e){return t<e?-1:t>e?1:0})),["bottom","left","right","top"])){var n=this.transform,s=n.project(t.LngLat.convert(e)),l=n.project(t.LngLat.convert(i)),c=s.rotate(-o*Math.PI/180),u=l.rotate(-o*Math.PI/180),h=new t.Point(Math.max(c.x,u.x),Math.max(c.y,u.y)),p=new t.Point(Math.min(c.x,u.x),Math.min(c.y,u.y)),d=h.sub(p),_=(n.width-r.padding.left-r.padding.right)/d.x,f=(n.height-r.padding.top-r.padding.bottom)/d.y;if(!(f<0||_<0)){var m=Math.min(n.scaleZoom(n.scale*Math.min(_,f)),r.maxZoom),g=t.Point.convert(r.offset),v=(r.padding.left-r.padding.right)/2,y=(r.padding.top-r.padding.bottom)/2,x=new t.Point(g.x+v,g.y+y).mult(n.scale/n.zoomScale(m));return{center:n.unproject(s.add(l).div(2).sub(x)),zoom:m,bearing:o}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},i.prototype.fitBounds=function(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)},i.prototype.fitScreenCoordinates=function(e,i,o,r,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(i)),o,r),r,a)},i.prototype._fitInternal=function(e,i,o){return e?(i=t.extend(e,i)).linear?this.easeTo(i,o):this.flyTo(i,o):this},i.prototype.jumpTo=function(e,i){this.stop();var o=this.transform,r=!1,a=!1,n=!1;return"zoom"in e&&o.zoom!==+e.zoom&&(r=!0,o.zoom=+e.zoom),void 0!==e.center&&(o.center=t.LngLat.convert(e.center)),"bearing"in e&&o.bearing!==+e.bearing&&(a=!0,o.bearing=+e.bearing),"pitch"in e&&o.pitch!==+e.pitch&&(n=!0,o.pitch=+e.pitch),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),r&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),a&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),n&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))},i.prototype.easeTo=function(e,i){var o=this;this.stop(),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||t.browser.prefersReducedMotion)&&(e.duration=0);var r=this.transform,a=this.getZoom(),n=this.getBearing(),s=this.getPitch(),l="zoom"in e?+e.zoom:a,c="bearing"in e?this._normalizeBearing(e.bearing,n):n,u="pitch"in e?+e.pitch:s,h=r.centerPoint.add(t.Point.convert(e.offset)),p=r.pointLocation(h),d=t.LngLat.convert(e.center||p);this._normalizeCenter(d);var _,f,m=r.project(p),g=r.project(d).sub(m),v=r.zoomScale(l-a);return e.around&&(_=t.LngLat.convert(e.around),f=r.locationPoint(_)),this._zooming=l!==a,this._rotating=n!==c,this._pitching=u!==s,this._prepareEase(i,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease((function(e){if(o._zooming&&(r.zoom=t.number(a,l,e)),o._rotating&&(r.bearing=t.number(n,c,e)),o._pitching&&(r.pitch=t.number(s,u,e)),_)r.setLocationAtPoint(_,f);else{var p=r.zoomScale(r.zoom-a),d=l>a?Math.min(2,v):Math.max(.5,v),y=Math.pow(d,1-e),x=r.unproject(m.add(g.mult(e*y)).mult(p));r.setLocationAtPoint(r.renderWorldCopies?x.wrap():x,h)}o._fireMoveEvents(i)}),(function(){e.delayEndEvents?o._easeEndTimeoutID=setTimeout((function(){return o._afterEase(i)}),e.delayEndEvents):o._afterEase(i)}),e),this},i.prototype._prepareEase=function(e,i){this._moving=!0,i||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},i.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},i.prototype._afterEase=function(e){var i=this._zooming,o=this._rotating,r=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,i&&this.fire(new t.Event("zoomend",e)),o&&this.fire(new t.Event("rotateend",e)),r&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},i.prototype.flyTo=function(e,i){var o=this;if(t.browser.prefersReducedMotion){var r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,i)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var a=this.transform,n=this.getZoom(),s=this.getBearing(),l=this.getPitch(),c="zoom"in e?t.clamp(+e.zoom,a.minZoom,a.maxZoom):n,u="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:l,p=a.zoomScale(c-n),d=a.centerPoint.add(t.Point.convert(e.offset)),_=a.pointLocation(d),f=t.LngLat.convert(e.center||_);this._normalizeCenter(f);var m=a.project(_),g=a.project(f).sub(m),v=e.curve,y=Math.max(a.width,a.height),x=y/p,b=g.mag();if("minZoom"in e){var w=t.clamp(Math.min(e.minZoom,n,c),a.minZoom,a.maxZoom),E=y/a.zoomScale(w-n);v=Math.sqrt(E/b*2)}var T=v*v;function I(t){var e=(x*x-y*y+(t?-1:1)*T*T*b*b)/(2*(t?x:y)*T*b);return Math.log(Math.sqrt(e*e+1)-e)}function C(t){return(Math.exp(t)-Math.exp(-t))/2}function S(t){return(Math.exp(t)+Math.exp(-t))/2}var P=I(0),z=function(t){return S(P)/S(P+v*t)},L=function(t){return y*((S(P)*(C(e=P+v*t)/S(e))-C(P))/T)/b;var e},M=(I(1)-P)/v;if(Math.abs(b)<1e-6||!isFinite(M)){if(Math.abs(y-x)<1e-6)return this.easeTo(e,i);var D=x<y?-1:1;M=Math.abs(Math.log(x/y))/v,L=function(){return 0},z=function(t){return Math.exp(D*v*t)}}if("duration"in e)e.duration=+e.duration;else{var R="screenSpeed"in e?+e.screenSpeed/v:+e.speed;e.duration=1e3*M/R}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==u,this._pitching=h!==l,this._prepareEase(i,!1),this._ease((function(e){var r=e*M,p=1/z(r);a.zoom=1===e?c:n+a.scaleZoom(p),o._rotating&&(a.bearing=t.number(s,u,e)),o._pitching&&(a.pitch=t.number(l,h,e));var _=1===e?f:a.unproject(m.add(g.mult(L(r))).mult(p));a.setLocationAtPoint(a.renderWorldCopies?_.wrap():_,d),o._fireMoveEvents(i)}),(function(){return o._afterEase(i)}),e),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},i.prototype._ease=function(e,i,o){!1===o.animate||0===o.duration?(e(1),i()):(this._easeStart=t.browser.now(),this._easeOptions=o,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(e,i){e=t.wrap(e,-180,180);var o=Math.abs(e-i);return Math.abs(e-360-i)<o&&(e-=360),Math.abs(e+360-i)<o&&(e+=360),e},i.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}},i}(t.Evented),Ro=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ro.prototype.getDefaultPosition=function(){return"bottom-right"},Ro.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ro.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},Ro.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var o=i.reduce((function(t,e,o){return e.value&&(t+=e.key+"="+e.value+(o<i.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},Ro.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},Ro.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var i=this._map.style.sourceCaches;for(var o in i){var r=i[o];if(r.used){var a=r.getSource();a.attribution&&t.indexOf(a.attribution)<0&&t.push(a.attribution)}}t.sort((function(t,e){return t.length-e.length}));var n=(t=t.filter((function(e,i){for(var o=i+1;o<t.length;o++)if(t[o].indexOf(e)>=0)return!1;return!0}))).join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ro.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Ao=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Ao.prototype.onAdd=function(t){this._map=t,this._container=i.create("div","mapboxgl-ctrl");var e=i.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ao.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ao.prototype.getDefaultPosition=function(){return"bottom-left"},Ao.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Ao.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Ao.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var ko=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ko.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},ko.prototype.remove=function(t){for(var e=this._currentlyRunning,i=0,o=e?this._queue.concat(e):this._queue;i<o.length;i+=1){var r=o[i];if(r.id===t)return void(r.cancelled=!0)}},ko.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,i=t;e<i.length;e+=1){var o=i[e];if(!o.cancelled&&(o.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ko.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Bo=t.window.HTMLImageElement,Oo=t.window.HTMLElement,Fo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Uo=function(o){function r(e){var r=this;if(null!=(e=t.extend({},Fo,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var a=new _o(e.minZoom,e.maxZoom,e.renderWorldCopies);if(o.call(this,a,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new ko,this._controls=[],this._mapId=t.uniqueId(),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Oo))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return r._update(!1)})),this.on("moveend",(function(){return r._update(!1)})),this.on("zoom",(function(){return r._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var o=t.getCanvasContainer(),r=null,a=!1,n=null;for(var s in Mo)t[s]=new Mo[s](t,e),e.interactive&&e[s]&&t[s].enable(e[s]);i.addEventListener(o,"mouseout",(function(e){t.fire(new go("mouseout",t,e))})),i.addEventListener(o,"mousedown",(function(r){a=!0,n=i.mousePos(o,r);var s=new go("mousedown",t,r);t.fire(s),s.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(r),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(r),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(r))})),i.addEventListener(o,"mouseup",(function(e){var i=t.dragRotate.isActive();r&&!i&&t.fire(new go("contextmenu",t,r)),r=null,a=!1,t.fire(new go("mouseup",t,e))})),i.addEventListener(o,"mousemove",(function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var i=e.target;i&&i!==o;)i=i.parentNode;i===o&&t.fire(new go("mousemove",t,e))}})),i.addEventListener(o,"mouseover",(function(e){for(var i=e.target;i&&i!==o;)i=i.parentNode;i===o&&t.fire(new go("mouseover",t,e))})),i.addEventListener(o,"touchstart",(function(i){var o=new vo("touchstart",t,i);t.fire(o),o.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(i),t.touchZoomRotate.onStart(i),t.doubleClickZoom.onTouchStart(o))}),{passive:!1}),i.addEventListener(o,"touchmove",(function(e){t.fire(new vo("touchmove",t,e))}),{passive:!1}),i.addEventListener(o,"touchend",(function(e){t.fire(new vo("touchend",t,e))})),i.addEventListener(o,"touchcancel",(function(e){t.fire(new vo("touchcancel",t,e))})),i.addEventListener(o,"click",(function(r){var a=i.mousePos(o,r);(!n||a.equals(n)||a.dist(n)<e.clickTolerance)&&t.fire(new go("click",t,r))})),i.addEventListener(o,"dblclick",(function(e){var i=new go("dblclick",t,e);t.fire(i),i.defaultPrevented||t.doubleClickZoom.onDblClick(i)})),i.addEventListener(o,"contextmenu",(function(e){var i=t.dragRotate.isActive();a||i?a&&(r=e):t.fire(new go("contextmenu",t,e)),(t.dragRotate.isEnabled()||t.listens("contextmenu"))&&e.preventDefault()})),i.addEventListener(o,"wheel",(function(i){e.interactive&&t.stop();var o=new yo("wheel",t,i);t.fire(o),o.defaultPrevented||t.scrollZoom.onWheel(i)}),{passive:!1})}(this,e);var n="string"==typeof e.hash&&e.hash||void 0;this._hash=e.hash&&new mo(n).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Ro({customAttribution:e.customAttribution})),this.addControl(new Ao,e.logoPosition),this.on("style.load",(function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)})),this.on("data",(function(e){r._update("style"===e.dataType),r.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){r.fire(new t.Event(e.dataType+"dataloading",e))}))}o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r;var a={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return r.prototype._getMapId=function(){return this._mapId},r.prototype.addControl=function(e,i){if(void 0===i&&e.getDefaultPosition&&(i=e.getDefaultPosition()),void 0===i&&(i="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var o=e.onAdd(this);this._controls.push(e);var r=this._controlPositions[i];return-1!==i.indexOf("bottom")?r.insertBefore(o,r.firstChild):r.appendChild(o),this},r.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this},r.prototype.resize=function(e){var i=this._containerDimensions(),o=i[0],r=i[1];return this._resizeCanvas(o,r),this.transform.resize(o,r),this.painter.resize(o,r),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},r.prototype.getBounds=function(){return this.transform.getBounds()},r.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},r.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},r.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},r.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},r.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},r.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},r.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},r.prototype.on=function(t,e,i){var r=this;if(void 0===i)return o.prototype.on.call(this,t,e);var a=function(){var o;if("mouseenter"===t||"mouseover"===t){var a=!1;return{layer:e,listener:i,delegates:{mousemove:function(o){var n=r.getLayer(e)?r.queryRenderedFeatures(o.point,{layers:[e]}):[];n.length?a||(a=!0,i.call(r,new go(t,r,o.originalEvent,{features:n}))):a=!1},mouseout:function(){a=!1}}}}if("mouseleave"===t||"mouseout"===t){var n=!1;return{layer:e,listener:i,delegates:{mousemove:function(o){(r.getLayer(e)?r.queryRenderedFeatures(o.point,{layers:[e]}):[]).length?n=!0:n&&(n=!1,i.call(r,new go(t,r,o.originalEvent)))},mouseout:function(e){n&&(n=!1,i.call(r,new go(t,r,e.originalEvent)))}}}}return{layer:e,listener:i,delegates:(o={},o[t]=function(t){var o=r.getLayer(e)?r.queryRenderedFeatures(t.point,{layers:[e]}):[];o.length&&(t.features=o,i.call(r,t),delete t.features)},o)}}();for(var n in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a),a.delegates)this.on(n,a.delegates[n]);return this},r.prototype.off=function(t,e,i){if(void 0===i)return o.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var r=this._delegatedListeners[t],a=0;a<r.length;a++){var n=r[a];if(n.layer===e&&n.listener===i){for(var s in n.delegates)this.off(s,n.delegates[s]);return r.splice(a,1),this}}return this},r.prototype.queryRenderedFeatures=function(e,i){if(!this.style)return[];var o;if(void 0!==i||void 0===e||e instanceof t.Point||Array.isArray(e)||(i=e,e=void 0),i=i||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])o=[t.Point.convert(e)];else{var r=t.Point.convert(e[0]),a=t.Point.convert(e[1]);o=[r,new t.Point(a.x,r.y),a,new t.Point(r.x,a.y),r]}return this.style.queryRenderedFeatures(o,i,this.transform)},r.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},r.prototype.setStyle=function(e,i){return!1!==(i=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(e,i))},r.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Ue(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},r.prototype._diffStyle=function(e,i){var o=this;if("string"==typeof e){var r=this._requestManager.normalizeStyleURL(e),a=this._requestManager.transformRequest(r,t.ResourceType.Style);t.getJSON(a,(function(e,r){e?o.fire(new t.ErrorEvent(e)):r&&o._updateDiff(r,i)}))}else"object"==typeof e&&this._updateDiff(e,i)},r.prototype._updateDiff=function(e,i){try{this.style.setState(e)&&this._update(!0)}catch(o){t.warnOnce("Unable to perform style diff: "+(o.message||o.error||o)+".  Rebuilding the style from scratch."),this._updateStyle(e,i)}},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},r.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},r.prototype.isSourceLoaded=function(e){var i=this.style&&this.style.sourceCaches[e];if(void 0!==i)return i.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},r.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e]._tiles;for(var o in i){var r=i[o];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},r.prototype.addSourceType=function(t,e,i){return this.style.addSourceType(t,e,i)},r.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},r.prototype.getSource=function(t){return this.style.getSource(t)},r.prototype.addImage=function(e,i,o){void 0===o&&(o={});var r=o.pixelRatio;void 0===r&&(r=1);var a=o.sdf;if(void 0===a&&(a=!1),i instanceof Bo){var n=t.browser.getImageData(i),s=n.width,l=n.height,c=n.data;this.style.addImage(e,{data:new t.RGBAImage({width:s,height:l},c),pixelRatio:r,sdf:a,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var u=i.width,h=i.height,p=i.data,d=i;this.style.addImage(e,{data:new t.RGBAImage({width:u,height:h},new Uint8Array(p)),pixelRatio:r,sdf:a,version:0,userImage:d}),d.onAdd&&d.onAdd(this,e)}},r.prototype.updateImage=function(e,i){var o=this.style.getImage(e);if(!o)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var r=i instanceof Bo?t.browser.getImageData(i):i,a=r.width,n=r.height,s=r.data;if(void 0===a||void 0===n)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(a!==o.data.width||n!==o.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var l=!(i instanceof Bo);o.data.replace(s,l),this.style.updateImage(e,o)},r.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(t){this.style.removeImage(t)},r.prototype.loadImage=function(e,i){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),i)},r.prototype.listImages=function(){return this.style.listImages()},r.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},r.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},r.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},r.prototype.getLayer=function(t){return this.style.getLayer(t)},r.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)},r.prototype.setFilter=function(t,e,i){return void 0===i&&(i={}),this.style.setFilter(t,e,i),this._update(!0)},r.prototype.getFilter=function(t){return this.style.getFilter(t)},r.prototype.setPaintProperty=function(t,e,i,o){return void 0===o&&(o={}),this.style.setPaintProperty(t,e,i,o),this._update(!0)},r.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},r.prototype.setLayoutProperty=function(t,e,i,o){return void 0===o&&(o={}),this.style.setLayoutProperty(t,e,i,o),this._update(!0)},r.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},r.prototype.setLight=function(t,e){return void 0===e&&(e={}),this.style.setLight(t,e),this._update(!0)},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},r.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},r.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},r.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=i.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var o=this._containerDimensions();this._resizeCanvas(o[0],o[1]);var r=this._controlContainer=i.create("div","mapboxgl-control-container",t),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){a[t]=i.create("div","mapboxgl-ctrl-"+t,r)}))},r.prototype._resizeCanvas=function(e,i){var o=t.window.devicePixelRatio||1;this._canvas.width=o*e,this._canvas.height=o*i,this._canvas.style.width=e+"px",this._canvas.style.height=i+"px"},r.prototype._setupPainter=function(){var i=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);o?(this.painter=new co(o,this.transform),t.webpSupported.testSupport(o)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},r.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},r.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},r.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},r.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var i=this.transform.zoom,o=t.browser.now();this.style.zoomHistory.update(i,o);var r=new t.EvaluationParameters(i,{now:o,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=r.crossFadingFactor();1===a&&a===this._crossFadingFactor||(e=!0,this._crossFadingFactor=a),this.style.update(r)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),this},r.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,i=this._controls;e<i.length;e+=1)i[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var o=this.painter.context.gl.getExtension("WEBGL_lose_context");o&&o.loseContext(),No(this._canvasContainer),No(this._controlContainer),No(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},r.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(){e._frame=null,e._render()})))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(t){this._vertices=t,this._update()},r.prototype._setCacheLimits=function(e,i){t.setCacheLimits(e,i)},a.version.get=function(){return t.version},Object.defineProperties(r.prototype,a),r}(Do);function No(t){t.parentNode&&t.parentNode.removeChild(t)}var Zo={showCompass:!0,showZoom:!0,visualizePitch:!1},qo=function(e){var o=this;this.options=t.extend({},Zo,e),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",(function(t){return o._map.zoomIn({},{originalEvent:t})})),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",(function(t){return o._map.zoomOut({},{originalEvent:t})}))),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",(function(t){o.options.visualizePitch?o._map.resetNorthPitch({},{originalEvent:t}):o._map.resetNorth({},{originalEvent:t})})),this._compassArrow=i.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function Vo(e,i,o){if(e=new t.LngLat(e.lng,e.lat),i){var r=new t.LngLat(e.lng-360,e.lat),a=new t.LngLat(e.lng+360,e.lat),n=o.locationPoint(e).distSqr(i);o.locationPoint(r).distSqr(i)<n?e=r:o.locationPoint(a).distSqr(i)<n&&(e=a)}for(;Math.abs(e.lng-o.center.lng)>180;){var s=o.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=o.width&&s.y<=o.height)break;e.lng>o.center.lng?e.lng-=360:e.lng+=360}return e}qo.prototype._updateZoomButtons=function(){var t=this._map.getZoom();t===this._map.getMaxZoom()?this._zoomInButton.classList.add("mapboxgl-ctrl-icon-disabled"):this._zoomInButton.classList.remove("mapboxgl-ctrl-icon-disabled"),t===this._map.getMinZoom()?this._zoomOutButton.classList.add("mapboxgl-ctrl-icon-disabled"):this._zoomOutButton.classList.remove("mapboxgl-ctrl-icon-disabled")},qo.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},qo.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Eo(t,{button:"left",element:this._compass}),i.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),i.addEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.enable()),this._container},qo.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),i.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),i.removeEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.disable(),delete this._handler),delete this._map},qo.prototype._createButton=function(t,e,o){var r=i.create("button",t,this._container);return r.type="button",r.title=e,r.setAttribute("aria-label",e),r.addEventListener("click",o),r};var jo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Go(t,e,i){var o=t.classList;for(var r in jo)o.remove("mapboxgl-"+i+"-anchor-"+r);o.add("mapboxgl-"+i+"-anchor-"+e)}var Wo,Xo=function(e){function o(o,r){if(e.call(this),(o instanceof t.window.HTMLElement||r)&&(o=t.extend({element:o},r)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._draggable=o&&o.draggable||!1,this._state="inactive",o&&o.element)this._element=o.element,this._offset=t.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div");var a=i.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var n=i.createNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"stroke","none"),n.setAttributeNS(null,"stroke-width","1"),n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"fill-rule","evenodd");var s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var c=0,u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<u.length;c+=1){var h=u[c],p=i.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",h.rx),p.setAttributeNS(null,"ry",h.ry),l.appendChild(p)}var d=i.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill",this._color);var _=i.createNS("http://www.w3.org/2000/svg","path");_.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),d.appendChild(_);var f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"opacity","0.25"),f.setAttributeNS(null,"fill","#000000");var m=i.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),f.appendChild(m);var g=i.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var v=i.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var y=i.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#000000"),y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962");var x=i.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),v.appendChild(y),v.appendChild(x),s.appendChild(l),s.appendChild(d),s.appendChild(f),s.appendChild(g),s.appendChild(v),a.appendChild(s),this._element.appendChild(a),this._offset=t.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),Go(this._element,this._anchor,"marker"),this._popup=null}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},o.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},o.prototype.getElement=function(){return this._element},o.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},o.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},o.prototype.getPopup=function(){return this._popup},o.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},o.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Vo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),i.setTransform(this._element,jo[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"))},o.prototype.getOffset=function(){return this._offset},o.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},o.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},o.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},o.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},o.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},o.prototype.isDraggable=function(){return this._draggable},o}(t.Evented),Ho={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},Ko=function(e){function o(i){e.call(this),this.options=t.extend({},Ho,i),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.onAdd=function(e){var o;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),o=this._setupUI,void 0!==Wo?o(Wo):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){Wo="denied"!==t.state,o(Wo)})):(Wo=!!t.window.navigator.geolocation,o(Wo)),this._container},o.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),i.remove(this._container),this._map=void 0},o.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())},o.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},o.prototype._onSuccess=function(e){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},o.prototype._updateCamera=function(e){var i=new t.LngLat(e.coords.longitude,e.coords.latitude),o=e.coords.accuracy,r=this._map.getBearing(),a=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(o),a,{geolocateSource:!0})},o.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},o.prototype._onError=function(e){this.options.trackUserLocation&&(1===e.code?(this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0,this._geolocateButton.title="Location not available",this._geolocateButton.setAttribute("aria-label","Location not available"),void 0!==this._geolocationWatchID&&this._clearWatch()):this._setErrorState()),"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},o.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},o.prototype._setupUI=function(e){var o=this;this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=i.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.title="Find my location",this._geolocateButton.setAttribute("aria-label","Find my location"),!1===e&&(t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),this._geolocateButton.disabled=!0,this._geolocateButton.title="Location not available",this._geolocateButton.setAttribute("aria-label","Location not available")),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Xo(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){var i=e.originalEvent&&"resize"===e.originalEvent.type;e.geolocateSource||"ACTIVE_LOCK"!==o._watchState||i||(o._watchState="BACKGROUND",o._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),o._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),o.fire(new t.Event("trackuserlocationend")))}))},o.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},o.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},o}(t.Evented),Jo={maxWidth:100,unit:"metric"},Yo=function(e){this.options=t.extend({},Jo,e),t.bindAll(["_onMove","setUnit"],this)};function Qo(t,e,i){var o,r,a,n,s,l,c=i&&i.maxWidth||100,u=t._container.clientHeight/2,h=(o=t.unproject([0,u]),r=t.unproject([c,u]),a=Math.PI/180,n=o.lat*a,s=r.lat*a,l=Math.sin(n)*Math.sin(s)+Math.cos(n)*Math.cos(s)*Math.cos((r.lng-o.lng)*a),6371e3*Math.acos(Math.min(l,1)));if(i&&"imperial"===i.unit){var p=3.2808*h;p>5280?$o(e,c,p/5280,"mi"):$o(e,c,p,"ft")}else i&&"nautical"===i.unit?$o(e,c,h/1852,"nm"):$o(e,c,h,"m")}function $o(t,e,i,o){var r,a,n,s=(r=i,(a=Math.pow(10,(""+Math.floor(r)).length-1))*(n=(n=r/a)>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n))),l=s/i;"m"===o&&s>=1e3&&(s/=1e3,o="km"),t.style.width=e*l+"px",t.innerHTML=s+o}Yo.prototype.getDefaultPosition=function(){return"bottom-left"},Yo.prototype._onMove=function(){Qo(this._map,this._container,this.options)},Yo.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Yo.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Yo.prototype.setUnit=function(t){this.options.unit=t,Qo(this._map,this._container,this.options)};var tr=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};tr.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},tr.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},tr.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},tr.prototype._setupUI=function(){(this._fullscreenButton=i.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer)).type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},tr.prototype._updateTitle=function(){var t=this._isFullscreen()?"Exit fullscreen":"Enter fullscreen";this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},tr.prototype._isFullscreen=function(){return this._fullscreen},tr.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"),this._updateTitle())},tr.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var er={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ir=function(e){function o(i){e.call(this),this.options=t.extend(Object.create(er),i),t.bindAll(["_update","_onClickClose","remove"],this)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.addTo=function(e){var i=this;return this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",(function(t){i._update(t.point)})),this._map.on("mouseup",(function(t){i._update(t.point)})),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},o.prototype.isOpen=function(){return!!this._map},o.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),this._map.off("mousemove"),delete this._map),this.fire(new t.Event("close")),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove"),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},o.prototype.trackPointer=function(){var t=this;return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",(function(e){t._update(e.point)})),this._map.on("drag",(function(e){t._update(e.point)})),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},o.prototype.getElement=function(){return this._container},o.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},o.prototype.setHTML=function(e){var i,o=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");for(r.innerHTML=e;i=r.firstChild;)o.appendChild(i);return this.setDOMContent(o)},o.prototype.getMaxWidth=function(){return this._container.style.maxWidth},o.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},o.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},o.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},o.prototype._update=function(e){var o=this,r=this._lngLat||this._trackPointer;if(this._map&&r&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return o._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Vo(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var a=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),n=this.options.anchor,s=function e(i){if(i){if("number"==typeof i){var o=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new t.Point(0,0),top:new t.Point(0,i),"top-left":new t.Point(o,o),"top-right":new t.Point(-o,o),bottom:new t.Point(0,-i),"bottom-left":new t.Point(o,-o),"bottom-right":new t.Point(-o,-o),left:new t.Point(i,0),right:new t.Point(-i,0)}}if(i instanceof t.Point||Array.isArray(i)){var r=t.Point.convert(i);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.Point.convert(i.center||[0,0]),top:t.Point.convert(i.top||[0,0]),"top-left":t.Point.convert(i["top-left"]||[0,0]),"top-right":t.Point.convert(i["top-right"]||[0,0]),bottom:t.Point.convert(i.bottom||[0,0]),"bottom-left":t.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(i["bottom-right"]||[0,0]),left:t.Point.convert(i.left||[0,0]),right:t.Point.convert(i.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!n){var l,c=this._container.offsetWidth,u=this._container.offsetHeight;l=a.y+s.bottom.y<u?["top"]:a.y>this._map.transform.height-u?["bottom"]:[],a.x<c/2?l.push("left"):a.x>this._map.transform.width-c/2&&l.push("right"),n=0===l.length?"bottom":l.join("-")}var h=a.add(s[n]).round();i.setTransform(this._container,jo[n]+" translate("+h.x+"px,"+h.y+"px)"),Go(this._container,n,"popup")}},o.prototype._onClickClose=function(){this.remove()},o}(t.Evented),or={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Uo,NavigationControl:qo,GeolocateControl:Ko,AttributionControl:Ro,ScaleControl:Yo,FullscreenControl:tr,Popup:ir,Marker:Xo,Style:Ue,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return At.workerCount},set workerCount(t){At.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return or})),mapboxgl}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _deckgl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(239);__webpack_require__.d(__webpack_exports__,"DeckGL",(function(){return _deckgl__WEBPACK_IMPORTED_MODULE_0__.a})),__webpack_require__.d(__webpack_exports__,"default",(function(){return _deckgl__WEBPACK_IMPORTED_MODULE_0__.a}))},,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";var esm_typeof=__webpack_require__(12),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),layer_manager=__webpack_require__(243),assert=__webpack_require__(14),deep_equal=__webpack_require__(158),views_view=__webpack_require__(154),viewports_viewport=__webpack_require__(80),utils_log=__webpack_require__(10),flatten=__webpack_require__(83),view_manager_ViewManager=function(){function ViewManager(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,ViewManager),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=props.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=props.eventManager,this._eventCallbacks={onViewStateChange:props.onViewStateChange,onInteractiveStateChange:props.onInteractiveStateChange},Object.seal(this),this.setProps(props)}return Object(createClass.a)(ViewManager,[{key:"finalize",value:function finalize(){for(var key in this.controllers)this.controllers[key]&&this.controllers[key].finalize();this.controllers={}}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}},{key:"setNeedsUpdate",value:function setNeedsUpdate(reason){this._needsUpdate=this._needsUpdate||reason,this._needsRedraw=this._needsRedraw||reason}},{key:"updateViewStates",value:function updateViewStates(){for(var viewId in this.controllers){var controller=this.controllers[viewId];controller&&controller.updateTransition()}}},{key:"getViewports",value:function getViewports(rect){return rect?this._viewports.filter((function(viewport){return viewport.containsPixel(rect)})):this._viewports}},{key:"getViews",value:function getViews(){var viewMap={};return this.views.forEach((function(view){viewMap[view.id]=view})),viewMap}},{key:"getView",value:function getView(viewOrViewId){return"string"==typeof viewOrViewId?this.views.find((function(view){return view.id===viewOrViewId})):viewOrViewId}},{key:"getViewState",value:function getViewState(viewId){var view=this.getView(viewId),viewState=view&&this.viewState[view.getViewStateId()]||this.viewState;return view?view.filterViewState(viewState):viewState}},{key:"getViewport",value:function getViewport(viewId){return this._viewportMap[viewId]}},{key:"unproject",value:function unproject(xyz,opts){for(var viewports=this.getViewports(),pixel={x:xyz[0],y:xyz[1]},i=viewports.length-1;i>=0;--i){var viewport=viewports[i];if(viewport.containsPixel(pixel)){var p=xyz.slice();return p[0]-=viewport.x,p[1]-=viewport.y,viewport.unproject(p,opts)}}return null}},{key:"setProps",value:function setProps(props){"views"in props&&this._setViews(props.views),"viewState"in props&&this._setViewState(props.viewState),("width"in props||"height"in props)&&this._setSize(props.width,props.height),this._isUpdating||this._update()}},{key:"_update",value:function _update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function _setSize(width,height){Object(assert.a)(Number.isFinite(width)&&Number.isFinite(height)),width===this.width&&height===this.height||(this.width=width,this.height=height,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function _setViews(views){views=Object(flatten.b)(views,{filter:Boolean}).map((function(view){return view instanceof viewports_viewport.a?new views_view.a({viewportInstance:view}):view})),this._diffViews(views,this.views)&&this.setNeedsUpdate("views changed"),this.views=views}},{key:"_setViewState",value:function _setViewState(viewState){viewState?(!Object(deep_equal.a)(viewState,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=viewState):utils_log.a.warn("setting null viewState")()}},{key:"_onViewStateChange",value:function _onViewStateChange(viewId,event){event.viewId=viewId,this._eventCallbacks.onViewStateChange(event)}},{key:"_createController",value:function _createController(props){return new(0,props.type)(Object.assign({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,props.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},props))}},{key:"_updateController",value:function _updateController(view,viewState,viewport,controller){if(view.controller){var controllerProps=Object.assign({},view.controller,viewState,{id:view.id,x:viewport.x,y:viewport.y,width:viewport.width,height:viewport.height});return controller?controller.setProps(controllerProps):controller=this._createController(controllerProps),controller}return null}},{key:"_rebuildViewports",value:function _rebuildViewports(){var width=this.width,height=this.height,views=this.views,oldControllers=this.controllers;this._viewports=[],this.controllers={};for(var i=views.length;i--;){var view=views[i],viewState=this.getViewState(view),viewport=view.makeViewport({width:width,height:height,viewState:viewState});this.controllers[view.id]=this._updateController(view,viewState,viewport,oldControllers[view.id]),this._viewports.unshift(viewport)}for(var id in oldControllers)oldControllers[id]&&!this.controllers[id]&&oldControllers[id].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function _buildViewportMap(){var _this=this;this._viewportMap={},this._viewports.forEach((function(viewport){viewport.id&&(_this._viewportMap[viewport.id]=_this._viewportMap[viewport.id]||viewport)}))}},{key:"_diffViews",value:function _diffViews(newViews,oldViews){return newViews.length!==oldViews.length||newViews.some((function(_,i){return!newViews[i].equals(oldViews[i])}))}}]),ViewManager}(),map_view=__webpack_require__(240),lighting_effect=__webpack_require__(192),DEFAULT_LIGHTING_EFFECT=new lighting_effect.a,effect_manager_EffectManager=function(){function EffectManager(){Object(classCallCheck.a)(this,EffectManager),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return Object(createClass.a)(EffectManager,[{key:"setProps",value:function setProps(props){"effects"in props&&(props.effects.length===this.effects.length&&Object(deep_equal.a)(props.effects,this.effects)||(this.setEffects(props.effects),this._needsRedraw="effects changed"))}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}},{key:"getEffects",value:function getEffects(){return this._internalEffects}},{key:"finalize",value:function finalize(){this.cleanup()}},{key:"setEffects",value:function setEffects(){var effects=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=effects,this._createInternalEffects()}},{key:"cleanup",value:function cleanup(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.effects[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.cleanup()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this._internalEffects[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){_step2.value.cleanup()}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}this.effects.length=0,this._internalEffects.length=0}},{key:"_createInternalEffects",value:function _createInternalEffects(){this._internalEffects=this.effects.slice(),this.effects.some((function(effect){return effect instanceof lighting_effect.a}))||this._internalEffects.push(DEFAULT_LIGHTING_EFFECT)}}]),EffectManager}(),lib_effect=__webpack_require__(121),deck_renderer=__webpack_require__(246),framebuffer=__webpack_require__(69),device_pixels=__webpack_require__(319),copy_and_blit=__webpack_require__(316),pick_layers_pass=__webpack_require__(254),NO_PICKED_OBJECT={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function getClosestObject(_ref){var pickedColors=_ref.pickedColors,layers=_ref.layers,deviceX=_ref.deviceX,deviceY=_ref.deviceY,deviceRadius=_ref.deviceRadius,deviceRect=_ref.deviceRect;if(pickedColors){for(var x=deviceRect.x,y=deviceRect.y,width=deviceRect.width,height=deviceRect.height,minSquareDistanceToCenter=deviceRadius*deviceRadius,closestPixelIndex=-1,i=0,row=0;row<height;row++){var dy=row+y-deviceY,dy2=dy*dy;if(dy2>minSquareDistanceToCenter)i+=4*width;else for(var col=0;col<width;col++){if(pickedColors[i+3]-1>=0){var dx=col+x-deviceX,d2=dx*dx+dy2;d2<=minSquareDistanceToCenter&&(minSquareDistanceToCenter=d2,closestPixelIndex=i)}i+=4}}if(closestPixelIndex>=0){var _pickedLayerIndex=pickedColors[closestPixelIndex+3]-1,pickedColor=pickedColors.slice(closestPixelIndex,closestPixelIndex+4),pickedLayer=layers[_pickedLayerIndex];if(pickedLayer){var pickedObjectIndex=pickedLayer.decodePickingColor(pickedColor);return{pickedColor:pickedColor,pickedLayer:pickedLayer,pickedObjectIndex:pickedObjectIndex}}utils_log.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return NO_PICKED_OBJECT}function processPickInfo(_ref){var pickInfo=_ref.pickInfo,lastPickedInfo=_ref.lastPickedInfo,mode=_ref.mode,layers=_ref.layers,viewports=_ref.viewports,x=_ref.x,y=_ref.y,deviceX=_ref.deviceX,deviceY=_ref.deviceY,pixelRatio=_ref.pixelRatio,pickedColor=pickInfo.pickedColor,pickedLayer=pickInfo.pickedLayer,pickedObjectIndex=pickInfo.pickedObjectIndex,affectedLayers=pickedLayer?[pickedLayer]:[];if("hover"===mode){var lastPickedObjectIndex=lastPickedInfo.index,lastPickedLayerId=lastPickedInfo.layerId,pickedLayerId=pickedLayer&&pickedLayer.props.id;if(pickedLayerId!==lastPickedLayerId||pickedObjectIndex!==lastPickedObjectIndex){if(pickedLayerId!==lastPickedLayerId){var lastPickedLayer=layers.find((function(layer){return layer.props.id===lastPickedLayerId}));lastPickedLayer&&affectedLayers.unshift(lastPickedLayer)}lastPickedInfo.layerId=pickedLayerId,lastPickedInfo.index=pickedObjectIndex,lastPickedInfo.info=null}}var viewport=function getViewportFromCoordinates(_ref3){return _ref3.viewports[0]}({viewports:viewports}),coordinate=viewport&&viewport.unproject([x,y]),baseInfo={color:null,layer:null,index:-1,picked:!1,x:x,y:y,pixel:[x,y],coordinate:coordinate,lngLat:coordinate,devicePixel:[deviceX,deviceY],pixelRatio:pixelRatio},infos=new Map;return infos.set(null,baseInfo),affectedLayers.forEach((function(layer){var info=Object.assign({},baseInfo);if(layer===pickedLayer&&(info.color=pickedColor,info.index=pickedObjectIndex,info.picked=!0),info=getLayerPickingInfo({layer:layer,info:info,mode:mode}),layer===pickedLayer&&"hover"===mode&&(lastPickedInfo.info=info),info&&infos.set(info.layer.id,info),"hover"===mode){var pickingSelectedColor=layer.props.autoHighlight&&pickedLayer===layer?pickedColor:null;layer.setModuleParameters({pickingSelectedColor:pickingSelectedColor}),layer.setNeedsRedraw()}})),infos}function getLayerPickingInfo(_ref2){for(var layer=_ref2.layer,info=_ref2.info,mode=_ref2.mode;layer&&info;){var sourceLayer=info.layer||layer;info.layer=layer,info=layer.pickLayer({info:info,mode:mode,sourceLayer:sourceLayer}),layer=layer.parent}return info}var deck_picker_DeckPicker=function(){function DeckPicker(gl){Object(classCallCheck.a)(this,DeckPicker),this.gl=gl,this.pickingFBO=null,this.pickLayersPass=new pick_layers_pass.a(gl),this.layerFilter=null,this.pickingEvent=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}return Object(createClass.a)(DeckPicker,[{key:"setProps",value:function setProps(props){"layerFilter"in props&&(this.layerFilter=props.layerFilter),this.pickLayersPass.setProps({layerFilter:this.layerFilter})}},{key:"pickObject",value:function pickObject(_ref){var x=_ref.x,y=_ref.y,mode=_ref.mode,_ref$radius=_ref.radius,radius=void 0===_ref$radius?0:_ref$radius,layers=_ref.layers,viewports=_ref.viewports,activateViewport=_ref.activateViewport,_ref$depth=_ref.depth,depth=void 0===_ref$depth?1:_ref$depth,_ref$event=_ref.event,event=void 0===_ref$event?null:_ref$event;this.pickingEvent=event;var result=this.pickClosestObject({x:x,y:y,radius:radius,layers:layers,mode:mode,depth:depth,viewports:viewports,onViewportActive:activateViewport});return this.pickingEvent=null,result}},{key:"pickObjects",value:function pickObjects(_ref2){var x=_ref2.x,y=_ref2.y,width=_ref2.width,height=_ref2.height,layers=_ref2.layers,viewports=_ref2.viewports,activateViewport=_ref2.activateViewport;return this.pickVisibleObjects({x:x,y:y,width:width,height:height,layers:layers,mode:"pickObjects",viewports:viewports,onViewportActive:activateViewport})}},{key:"getLastPickedObject",value:function getLastPickedObject(_ref3){var x=_ref3.x,y=_ref3.y,layers=_ref3.layers,viewports=_ref3.viewports,lastPickedInfo=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,lastPickedLayerId=lastPickedInfo&&lastPickedInfo.layer&&lastPickedInfo.layer.id,layer=lastPickedLayerId?layers.find((function(l){return l.id===lastPickedLayerId})):null,coordinate=viewports[0]&&viewports[0].unproject([x,y]),info={x:x,y:y,coordinate:coordinate,lngLat:coordinate,layer:layer};return layer?Object.assign({},lastPickedInfo,info):Object.assign(info,{color:null,object:null,index:-1})}},{key:"updatePickingBuffer",value:function updatePickingBuffer(){var gl=this.gl;return this.pickingFBO||(this.pickingFBO=new framebuffer.a(gl)),this.pickingFBO.resize({width:gl.canvas.width,height:gl.canvas.height}),this.pickingFBO}},{key:"pickClosestObject",value:function pickClosestObject(_ref4){var layers=_ref4.layers,viewports=_ref4.viewports,x=_ref4.x,y=_ref4.y,radius=_ref4.radius,_ref4$depth=_ref4.depth,depth=void 0===_ref4$depth?1:_ref4$depth,mode=_ref4.mode,onViewportActive=_ref4.onViewportActive;this.updatePickingBuffer();for(var infos,pixelRatio=Object(device_pixels.b)(this.gl),devicePixelRange=Object(device_pixels.a)(this.gl,[x,y],!0),devicePixel=[devicePixelRange.x+Math.floor(devicePixelRange.width/2),devicePixelRange.y+Math.floor(devicePixelRange.height/2)],deviceRadius=Math.round(radius*pixelRatio),_this$pickingFBO=this.pickingFBO,width=_this$pickingFBO.width,height=_this$pickingFBO.height,deviceRect=this.getPickingRect({deviceX:devicePixel[0],deviceY:devicePixel[1],deviceRadius:deviceRadius,deviceWidth:width,deviceHeight:height}),result=[],affectedLayers={},i=0;i<depth;i++){var pickInfo=getClosestObject({pickedColors:deviceRect&&this.drawAndSamplePickingBuffer({layers:layers,viewports:viewports,onViewportActive:onViewportActive,deviceRect:deviceRect,redrawReason:mode}),layers:layers,deviceX:devicePixel[0],deviceY:devicePixel[1],deviceRadius:deviceRadius,deviceRect:deviceRect});if(pickInfo.pickedColor&&i+1<depth){var layerId=pickInfo.pickedColor[3]-1;affectedLayers[layerId]=!0,layers[layerId].clearPickingColor(pickInfo.pickedColor)}infos=processPickInfo({pickInfo:pickInfo,lastPickedInfo:this.lastPickedInfo,mode:mode,layers:layers,viewports:viewports,x:x,y:y,deviceX:devicePixel[0],deviceY:devicePixel[1],pixelRatio:pixelRatio});var processedPickInfos=this.callLayerPickingCallbacks(infos,mode);if(processedPickInfos&&processedPickInfos.forEach((function(info){return result.push(info)})),!pickInfo.pickedColor)break}for(var _layerId in affectedLayers)layers[_layerId].restorePickingColors();return{result:result,emptyInfo:infos&&infos.get(null)}}},{key:"pickVisibleObjects",value:function pickVisibleObjects(_ref5){var layers=_ref5.layers,viewports=_ref5.viewports,x=_ref5.x,y=_ref5.y,width=_ref5.width,height=_ref5.height,mode=_ref5.mode,onViewportActive=_ref5.onViewportActive;this.updatePickingBuffer();var pixelRatio=Object(device_pixels.b)(this.gl),leftTop=Object(device_pixels.a)(this.gl,[x,y],!0),deviceLeft=leftTop.x,deviceTop=leftTop.y+leftTop.height,rightBottom=Object(device_pixels.a)(this.gl,[x+width,y+height],!0),deviceRight=rightBottom.x+rightBottom.width,deviceBottom=rightBottom.y,deviceRect={x:deviceLeft,y:deviceBottom,width:deviceRight-deviceLeft,height:deviceTop-deviceBottom},pickInfos=function getUniqueObjects(_ref2){var pickedColors=_ref2.pickedColors,layers=_ref2.layers,uniqueColors=new Map;if(pickedColors)for(var i=0;i<pickedColors.length;i+=4){var pickedLayerIndex=pickedColors[i+3]-1;if(pickedLayerIndex>=0){var pickedColor=pickedColors.slice(i,i+4),colorKey=pickedColor.join(",");if(!uniqueColors.has(colorKey)){var pickedLayer=layers[pickedLayerIndex];pickedLayer?uniqueColors.set(colorKey,{pickedColor:pickedColor,pickedLayer:pickedLayer,pickedObjectIndex:pickedLayer.decodePickingColor(pickedColor)}):utils_log.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(uniqueColors.values())}({pickedColors:this.drawAndSamplePickingBuffer({layers:layers,viewports:viewports,onViewportActive:onViewportActive,deviceRect:deviceRect,redrawReason:mode}),layers:layers}),uniqueInfos=new Map;return pickInfos.forEach((function(pickInfo){var info={color:pickInfo.pickedColor,layer:null,index:pickInfo.pickedObjectIndex,picked:!0,x:x,y:y,width:width,height:height,pixelRatio:pixelRatio};info=getLayerPickingInfo({layer:pickInfo.pickedLayer,info:info,mode:mode}),uniqueInfos.has(info.object)||uniqueInfos.set(info.object,info)})),Array.from(uniqueInfos.values())}},{key:"drawAndSamplePickingBuffer",value:function drawAndSamplePickingBuffer(_ref6){var layers=_ref6.layers,viewports=_ref6.viewports,onViewportActive=_ref6.onViewportActive,deviceRect=_ref6.deviceRect,redrawReason=_ref6.redrawReason;if(Object(assert.a)(deviceRect),Object(assert.a)(Number.isFinite(deviceRect.width)&&deviceRect.width>0,"`width` must be > 0"),Object(assert.a)(Number.isFinite(deviceRect.height)&&deviceRect.height>0,"`height` must be > 0"),layers.filter((function(layer){return layer.isPickable()})).length<1)return null;var pickingFBO=this.pickingFBO;this.pickLayersPass.render({layers:layers,viewports:viewports,onViewportActive:onViewportActive,pickingFBO:pickingFBO,deviceRect:deviceRect,redrawReason:redrawReason,effectProps:{lightSources:{}}});var x=deviceRect.x,y=deviceRect.y,width=deviceRect.width,height=deviceRect.height,pickedColors=new Uint8Array(width*height*4);return Object(copy_and_blit.b)(pickingFBO,{sourceX:x,sourceY:y,sourceWidth:width,sourceHeight:height,target:pickedColors}),pickedColors}},{key:"getPickingRect",value:function getPickingRect(_ref7){var deviceX=_ref7.deviceX,deviceY=_ref7.deviceY,deviceRadius=_ref7.deviceRadius,deviceWidth=_ref7.deviceWidth,deviceHeight=_ref7.deviceHeight,x=Math.max(0,deviceX-deviceRadius),y=Math.max(0,deviceY-deviceRadius),width=Math.min(deviceWidth,deviceX+deviceRadius+1)-x,height=Math.min(deviceHeight,deviceY+deviceRadius+1)-y;return width<=0||height<=0?null:{x:x,y:y,width:width,height:height}}},{key:"callLayerPickingCallbacks",value:function callLayerPickingCallbacks(infos,mode){var unhandledPickInfos=[],pickingEvent=this.pickingEvent;return infos.forEach((function(info){if(info.layer){var handled=!1;switch(mode){case"hover":handled=info.layer.onHover(info,pickingEvent);break;case"query":break;default:throw new Error("unknown pick type")}handled||unhandledPickInfos.push(info)}})),unhandledPickInfos}}]),DeckPicker}(),defaultStyle={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},tooltip_Tooltip=function(){function Tooltip(canvas){Object(classCallCheck.a)(this,Tooltip);var canvasParent=canvas.parentElement;canvasParent&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,defaultStyle),canvasParent.appendChild(this.el))}return Object(createClass.a)(Tooltip,[{key:"setTooltip",value:function setTooltip(displayInfo,x,y){var el=this.el;if("string"==typeof displayInfo)el.innerText=displayInfo;else{if(!displayInfo)return void(el.style.display="none");"text"in displayInfo&&(el.innerText=displayInfo.text),"html"in displayInfo&&(el.innerHTML=displayInfo.html),"className"in displayInfo&&(el.className=displayInfo.className),Object.assign(el.style,displayInfo.style)}el.style.display="block",el.style.transform="translate(".concat(x,"px, ").concat(y,"px)")}},{key:"remove",value:function remove(){this.el&&this.el.remove()}}]),Tooltip}(),init=__webpack_require__(309),regenerator=__webpack_require__(11),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(18),objectSpread=__webpack_require__(125),track_context_state=__webpack_require__(258),webgl_types=__webpack_require__(197),ERR_HEADLESSGL_NOT_AVAILABLE="Failed to create WebGL context in Node.js, headless gl not available",ERR_HEADLESSGL_FAILED="Failed to create WebGL context in Node.js, headless gl returned null";var pageLoadPromise,is_browser=__webpack_require__(249),isPage=is_browser.a&&"undefined"!=typeof document,isPageLoaded=isPage&&"complete"===document.readyState;function getPageLoadPromise(){return pageLoadPromise||(pageLoadPromise=isPage?new Promise((function(resolve,reject){if(isPage&&"complete"===document.readyState)return isPageLoaded=!0,void resolve(document);window.onload=function(){isPageLoaded=!0,resolve(document)}})):Promise.resolve({})),pageLoadPromise}function getCanvas(_ref2){var targetCanvas,canvas=_ref2.canvas,width=_ref2.width,height=_ref2.height,_ref2$onError=_ref2.onError,onError=void 0===_ref2$onError?function(){}:_ref2$onError;return"string"==typeof canvas?(isPageLoaded||onError("createGLContext called on canvas '".concat(canvas,"' before page was loaded")),targetCanvas=document.getElementById(canvas)):targetCanvas=canvas||function createCanvas(_ref){var _ref$width=_ref.width,width=void 0===_ref$width?800:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?600:_ref$height,_ref$id=_ref.id,id=void 0===_ref$id?"gl-canvas":_ref$id,_ref$insert=_ref.insert,insert=void 0===_ref$insert||_ref$insert,canvas=document.createElement("canvas");if(canvas.id=id,canvas.style.width=Number.isFinite(width)?"".concat(width,"px"):"100%",canvas.style.height=Number.isFinite(height)?"".concat(height,"px"):"100%",insert){var body=document.body;body.insertBefore(canvas,body.firstChild)}return canvas}({id:"lumagl-canvas",width:width,height:height,onError:onError}),targetCanvas}var utils_assert=__webpack_require__(17),esm_utils_log=__webpack_require__(25),globals=__webpack_require__(55);function isWebGL2(gl){return Boolean(gl&&2===gl._version)}var contextDefaults={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function createGLContext(){var gl,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_options=options=Object.assign({},contextDefaults,options),width=_options.width,height=_options.height;function onError(message){if(options.throwOnError)throw new Error(message);return null}is_browser.a?gl=function createBrowserContext(canvas,options){var _options$onError=options.onError,onError=void 0===_options$onError?function(message){return null}:_options$onError,onCreateError=function onCreateError(error){return onError("WebGL context: ".concat(error.statusMessage||"error"))};canvas.addEventListener("webglcontextcreationerror",onCreateError,!1);var _options$webgl=options.webgl1,webgl1=void 0===_options$webgl||_options$webgl,_options$webgl2=options.webgl2,webgl2=void 0===_options$webgl2||_options$webgl2,gl=null;return webgl2&&(gl=(gl=gl||canvas.getContext("webgl2",options))||canvas.getContext("experimental-webgl2",options)),webgl1&&(gl=(gl=gl||canvas.getContext("webgl",options))||canvas.getContext("experimental-webgl",options)),canvas.removeEventListener("webglcontextcreationerror",onCreateError,!1),gl||onError("Failed to create ".concat(webgl2&&!webgl1?"WebGL2":"WebGL"," context"))}(getCanvas({canvas:options.canvas,width:width,height:height,onError:onError}),options):gl=function createHeadlessContext(options){var width=options.width,height=options.height,webgl1=options.webgl1,webgl2=options.webgl2,onError=options.onError;if(webgl2&&!webgl1)return onError("headless-gl does not support WebGL2");if(!webgl_types.c)return onError(ERR_HEADLESSGL_NOT_AVAILABLE);var gl=Object(webgl_types.c)(width,height,options);return gl||onError(ERR_HEADLESSGL_FAILED)}(Object(objectSpread.a)({},options,{width:width,height:height,onError:onError}));return gl?(function logInfo(gl){var webGL=isWebGL2(gl)?"WebGL2":"WebGL1",info=function getContextDebugInfo(gl){var vendorMasked=gl.getParameter(7936),rendererMasked=gl.getParameter(7937),ext=gl.getExtension("WEBGL_debug_renderer_info");return{vendor:ext&&gl.getParameter(ext.UNMASKED_VENDOR_WEBGL||7936)||vendorMasked,renderer:ext&&gl.getParameter(ext.UNMASKED_RENDERER_WEBGL||7937)||rendererMasked,vendorMasked:vendorMasked,rendererMasked:rendererMasked,version:gl.getParameter(7938),shadingLanguageVersion:gl.getParameter(35724)}}(gl),driver=info?"(".concat(info.vendor,",").concat(info.renderer,")"):"",debug=gl.debug?" debug":"";esm_utils_log.a.info(1,"".concat(webGL).concat(debug," context ").concat(driver))()}(gl=instrumentGLContext(gl,options)),gl):null}function instrumentGLContext(gl){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(gl._instrumented)return gl;gl._version=gl._version||function getVersion(gl){if(void 0!==webgl_types.a&&gl instanceof webgl_types.a)return 2;return 1}(gl),gl.luma=gl.luma||{},gl.luma.canvasSizeInfo=gl.luma.canvasSizeInfo||{};var _options3=options=Object.assign({},contextDefaults,options),manageState=_options3.manageState,debug=_options3.debug;return manageState&&Object(track_context_state.a)(gl,{copyState:!1,log:function log(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return esm_utils_log.a.log.apply(esm_utils_log.a,[1].concat(args))()}}),is_browser.a&&debug&&(globals.a.makeDebugContext?(gl=globals.a.makeDebugContext(gl,options),esm_utils_log.a.priority=Math.max(esm_utils_log.a.priority,1)):esm_utils_log.a.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),gl._instrumented=!0,gl}function resizeGLContext(gl){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(gl.canvas){(function setDevicePixelRatio(gl,devicePixelRatio,options){var clientWidth="width"in options?options.width:gl.canvas.clientWidth||gl.canvas.width||1,clientHeight="height"in options?options.height:gl.canvas.clientHeight||gl.canvas.height||1;gl.luma=gl.luma||{},gl.luma.canvasSizeInfo=gl.luma.canvasSizeInfo||{};var cachedSize=gl.luma.canvasSizeInfo;if(cachedSize.clientWidth!==clientWidth||cachedSize.clientHeight!==clientHeight||cachedSize.devicePixelRatio!==devicePixelRatio){var clampedPixelRatio=devicePixelRatio,canvasWidth=Math.floor(clientWidth*clampedPixelRatio),canvasHeight=Math.floor(clientHeight*clampedPixelRatio);gl.canvas.width=canvasWidth,gl.canvas.height=canvasHeight,gl.drawingBufferWidth===canvasWidth&&gl.drawingBufferHeight===canvasHeight||(esm_utils_log.a.warn("Device pixel ratio clamped")(),clampedPixelRatio=Math.min(gl.drawingBufferWidth/clientWidth,gl.drawingBufferHeight/clientHeight),gl.canvas.width=Math.floor(clientWidth*clampedPixelRatio),gl.canvas.height=Math.floor(clientHeight*clampedPixelRatio)),Object.assign(gl.luma.canvasSizeInfo,{clientWidth:clientWidth,clientHeight:clientHeight,devicePixelRatio:devicePixelRatio})}})(gl,Object(device_pixels.c)(options.useDevicePixels),options)}else{var ext=gl.getExtension("STACKGL_resize_drawingbuffer");ext&&"width"in options&&"height"in options&&ext.resize(options.width,options.height)}}var esm_init=__webpack_require__(200),query=__webpack_require__(785);function cancelAnimationFrame(timerId){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(timerId):clearTimeout(timerId)}var webgl_checks=__webpack_require__(39),unified_parameter_api=__webpack_require__(194),statIdCounter=0,animation_loop_AnimationLoop=function(){function AnimationLoop(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,AnimationLoop);var _props$onCreateContex=props.onCreateContext,onCreateContext=void 0===_props$onCreateContex?function(opts){return createGLContext(opts)}:_props$onCreateContex,_props$onAddHTML=props.onAddHTML,onAddHTML=void 0===_props$onAddHTML?null:_props$onAddHTML,_props$onInitialize=props.onInitialize,onInitialize=void 0===_props$onInitialize?function(){}:_props$onInitialize,_props$onRender=props.onRender,onRender=void 0===_props$onRender?function(){}:_props$onRender,_props$onFinalize=props.onFinalize,onFinalize=void 0===_props$onFinalize?function(){}:_props$onFinalize,_props$gl=props.gl,gl=void 0===_props$gl?null:_props$gl,_props$glOptions=props.glOptions,glOptions=void 0===_props$glOptions?{}:_props$glOptions,_props$debug=props.debug,debug=void 0!==_props$debug&&_props$debug,_props$createFramebuf=props.createFramebuffer,createFramebuffer=void 0!==_props$createFramebuf&&_props$createFramebuf,_props$autoResizeView=props.autoResizeViewport,autoResizeViewport=void 0===_props$autoResizeView||_props$autoResizeView,_props$autoResizeDraw=props.autoResizeDrawingBuffer,autoResizeDrawingBuffer=void 0===_props$autoResizeDraw||_props$autoResizeDraw,_props$stats=props.stats,stats=void 0===_props$stats?esm_init.a.get("animation-loop-".concat(statIdCounter++)):_props$stats,_props$useDevicePixel=props.useDevicePixels,useDevicePixels=void 0===_props$useDevicePixel||_props$useDevicePixel;"useDevicePixelRatio"in props&&(esm_utils_log.a.deprecated("useDevicePixelRatio","useDevicePixels")(),useDevicePixels=props.useDevicePixelRatio),this.props={onCreateContext:onCreateContext,onAddHTML:onAddHTML,onInitialize:onInitialize,onRender:onRender,onFinalize:onFinalize,gl:gl,glOptions:glOptions,debug:debug,createFramebuffer:createFramebuffer},this.gl=gl,this.needsRedraw=null,this.timeline=null,this.stats=stats,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:autoResizeViewport,autoResizeDrawingBuffer:autoResizeDrawingBuffer,useDevicePixels:useDevicePixels}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}var _toDataURL;return Object(createClass.a)(AnimationLoop,[{key:"delete",value:function _delete(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function setNeedsRedraw(reason){return Object(utils_assert.a)("string"==typeof reason),this.needsRedraw=this.needsRedraw||reason,this}},{key:"setProps",value:function setProps(props){return"autoResizeViewport"in props&&(this.autoResizeViewport=props.autoResizeViewport),"autoResizeDrawingBuffer"in props&&(this.autoResizeDrawingBuffer=props.autoResizeDrawingBuffer),"useDevicePixels"in props&&(this.useDevicePixels=props.useDevicePixels),this}},{key:"start",value:function start(){var _this=this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running?this:(this._running=!0,getPageLoadPromise().then((function(){return!_this._running||_this._initialized?null:(_this._createWebGLContext(opts),_this._createFramebuffer(),_this._startEventHandling(),_this._initializeCallbackData(),_this._updateCallbackData(),_this._resizeCanvasDrawingBuffer(),_this._resizeViewport(),_this._gpuTimeQuery=query.a.isSupported(_this.gl,["timers"])?new query.a(_this.gl):null,_this._initialized=!0,_this.onInitialize(_this.animationProps))})).then((function(appContext){_this._running&&(_this._addCallbackData(appContext||{}),!1!==appContext&&_this._startLoop())})),this)}},{key:"redraw",value:function redraw(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this}},{key:"stop",value:function stop(){return this._running&&(this._finalizeCallbackData(),cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function attachTimeline(timeline){return this.timeline=timeline,this.timeline}},{key:"detachTimeline",value:function detachTimeline(){this.timeline=null}},{key:"waitForRender",value:function waitForRender(){var _this2=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(resolve){_this2._resolveNextFrame=resolve}))),this._nextFramePromise}},{key:"toDataURL",value:(_toDataURL=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return this.setNeedsRedraw("toDataURL"),_context.next=3,this.waitForRender();case 3:return _context.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return _context.stop()}}),_callee,this)}))),function toDataURL(){return _toDataURL.apply(this,arguments)})},{key:"onCreateContext",value:function onCreateContext(){var _this$props;return(_this$props=this.props).onCreateContext.apply(_this$props,arguments)}},{key:"onInitialize",value:function onInitialize(){var _this$props2;return(_this$props2=this.props).onInitialize.apply(_this$props2,arguments)}},{key:"onRender",value:function onRender(){var _this$props3;return(_this$props3=this.props).onRender.apply(_this$props3,arguments)}},{key:"onFinalize",value:function onFinalize(){var _this$props4;return(_this$props4=this.props).onFinalize.apply(_this$props4,arguments)}},{key:"getHTMLControlValue",value:function getHTMLControlValue(id){var defaultValue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,element=document.getElementById(id);return element?Number(element.value):defaultValue}},{key:"setViewParameters",value:function setViewParameters(){return esm_utils_log.a.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function _startLoop(){var _this3=this;cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame((function renderFrame(){_this3._running&&(_this3.redraw(),_this3._animationFrameId=_this3._requestAnimationFrame(renderFrame))}))}},{key:"_setDisplay",value:function _setDisplay(display){this.display&&(this.display.delete(),this.display.animationLoop=null),display&&(display.animationLoop=this),this.display=display}},{key:"_requestAnimationFrame",value:function _requestAnimationFrame(renderFrameCallback){this.display&&this.display.requestAnimationFrame(renderFrameCallback)||function requestAnimationFrame(callback){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(callback):setTimeout(callback,1e3/60)}(renderFrameCallback)}},{key:"_renderFrame",value:function _renderFrame(){var _this$display;this.display?(_this$display=this.display)._renderFrame.apply(_this$display,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function _clearNeedsRedraw(){this.needsRedraw=null}},{key:"_setupFrame",value:function _setupFrame(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function _initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function _updateCallbackData(){var _this$_getSizeAndAspe=this._getSizeAndAspect(),width=_this$_getSizeAndAspe.width,height=_this$_getSizeAndAspe.height,aspect=_this$_getSizeAndAspe.aspect;width===this.animationProps.width&&height===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),aspect!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=width,this.animationProps.height=height,this.animationProps.aspect=aspect,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function _finalizeCallbackData(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function _addCallbackData(appContext){"object"===Object(esm_typeof.a)(appContext)&&null!==appContext&&(this.animationProps=Object.assign({},this.animationProps,appContext))}},{key:"_createWebGLContext",value:function _createWebGLContext(opts){if(this.offScreen=opts.canvas&&"undefined"!=typeof OffscreenCanvas&&opts.canvas instanceof OffscreenCanvas,opts=Object.assign({},opts,this.props.glOptions),this.gl=this.props.gl?instrumentGLContext(this.props.gl,opts):this.onCreateContext(opts),!Object(webgl_checks.c)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Object(unified_parameter_api.b)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function _createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){var wrapperDiv=document.createElement("div");document.body.appendChild(wrapperDiv),wrapperDiv.style.position="relative";var div=document.createElement("div");div.style.position="absolute",div.style.left="10px",div.style.bottom="10px",div.style.width="300px",div.style.background="white",wrapperDiv.appendChild(this.gl.canvas),wrapperDiv.appendChild(div);var html=this.props.onAddHTML(div);html&&(div.innerHTML=html)}}},{key:"_getSizeAndAspect",value:function _getSizeAndAspect(){var width=this.gl.drawingBufferWidth,height=this.gl.drawingBufferHeight,aspect=1,canvas=this.gl.canvas;return canvas&&canvas.clientHeight?aspect=canvas.clientWidth/canvas.clientHeight:width>0&&height>0&&(aspect=width/height),{width:width,height:height,aspect:aspect}}},{key:"_resizeViewport",value:function _resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function _resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&resizeGLContext(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function _createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new framebuffer.a(this.gl))}},{key:"_resizeFramebuffer",value:function _resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function _beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function _endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function _startEventHandling(){var canvas=this.gl.canvas;canvas&&(canvas.addEventListener("mousemove",this._onMousemove),canvas.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function _onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function _onMouseleave(e){this.animationProps._mousePosition=null}}]),AnimationLoop}(),set_parameters=__webpack_require__(315),animation_timeline=__webpack_require__(776),lib_stats=__webpack_require__(779),esm=__webpack_require__(256),constants=__webpack_require__(23);function noop(){}__webpack_require__.d(__webpack_exports__,"a",(function(){return deck_Deck}));var defaultProps={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",_animate:!1,onWebGLInitialized:noop,onResize:noop,onViewStateChange:noop,onBeforeRender:noop,onAfterRender:noop,onLoad:noop,_onMetrics:null,getCursor:function getCursor(_ref){return _ref.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},deck_Deck=function(){function Deck(props){Object(classCallCheck.a)(this,Deck),props=Object.assign({},defaultProps,props),this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=props.initialViewState||null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),function isIE11(){if(void 0===("undefined"==typeof window?"undefined":Object(esm_typeof.a)(window)))return!1;return-1!==((window.navigator||{}).userAgent||"").indexOf("Trident/")}()&&utils_log.a.warn("IE 11 support will be deprecated in v8.0")(),props.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(props)),this.animationLoop=this._createAnimationLoop(props),this.stats=new lib_stats.a({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(props),this.animationLoop.start()}return Object(createClass.a)(Deck,[{key:"finalize",value:function finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null),this.viewManager&&(this.viewManager.finalize(),this.viewManager=null),this.effectManager&&(this.effectManager.finalize(),this.effectManager=null),this.deckRenderer&&(this.deckRenderer.finalize(),this.deckRenderer=null),this.eventManager&&this.eventManager.destroy(),this.tooltip&&(this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function setProps(props){this.stats.get("setProps Time").timeStart(),"onLayerHover"in props&&utils_log.a.removed("onLayerHover","onHover")(),"onLayerClick"in props&&utils_log.a.removed("onLayerClick","onClick")(),props=Object.assign({},this.props,props),this.props=props,this._setCanvasSize(props);var newProps=Object.assign({},props,{views:this._getViews(this.props),width:this.width,height:this.height}),viewState=this._getViewState(props);viewState&&(newProps.viewState=viewState),this.viewManager&&this.viewManager.setProps(newProps),this.layerManager&&this.layerManager.setProps(newProps),this.effectManager&&this.effectManager.setProps(newProps),this.animationLoop&&this.animationLoop.setProps(newProps),this.deckRenderer&&this.deckRenderer.setProps(newProps),this.deckPicker&&this.deckPicker.setProps(newProps),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var redraw=this._needsRedraw;opts.clearRedrawFlags&&(this._needsRedraw=!1);var viewManagerNeedsRedraw=this.viewManager.needsRedraw(opts),layerManagerNeedsRedraw=this.layerManager.needsRedraw(opts),effectManagerNeedsRedraw=this.effectManager.needsRedraw(opts),deckRendererNeedsRedraw=this.deckRenderer.needsRedraw(opts);return redraw=redraw||viewManagerNeedsRedraw||layerManagerNeedsRedraw||effectManagerNeedsRedraw||deckRendererNeedsRedraw}},{key:"redraw",value:function redraw(force){if(this.layerManager){var redrawReason=force||this.needsRedraw({clearRedrawFlags:!0});redrawReason&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(redrawReason):this._drawLayers(redrawReason))}}},{key:"getViews",value:function getViews(){return this.viewManager.views}},{key:"getViewports",value:function getViewports(rect){return this.viewManager.getViewports(rect)}},{key:"pickObject",value:function pickObject(_ref2){var x=_ref2.x,y=_ref2.y,_ref2$radius=_ref2.radius,radius=void 0===_ref2$radius?0:_ref2$radius,_ref2$layerIds=_ref2.layerIds,layerIds=void 0===_ref2$layerIds?null:_ref2$layerIds;this.stats.get("Pick Count").incrementCount(),this.stats.get("pickObject Time").timeStart();var layers=this.layerManager.getLayers({layerIds:layerIds}),activateViewport=this.layerManager.activateViewport,selectedInfos=this.deckPicker.pickObject({x:x,y:y,radius:radius,layers:layers,viewports:this.getViewports({x:x,y:y}),activateViewport:activateViewport,mode:"query",depth:1}).result;return this.stats.get("pickObject Time").timeEnd(),selectedInfos.length?selectedInfos[0]:null}},{key:"pickMultipleObjects",value:function pickMultipleObjects(_ref3){var x=_ref3.x,y=_ref3.y,_ref3$radius=_ref3.radius,radius=void 0===_ref3$radius?0:_ref3$radius,_ref3$layerIds=_ref3.layerIds,layerIds=void 0===_ref3$layerIds?null:_ref3$layerIds,_ref3$depth=_ref3.depth,depth=void 0===_ref3$depth?10:_ref3$depth;this.stats.get("Pick Count").incrementCount(),this.stats.get("pickMultipleObjects Time").timeStart();var layers=this.layerManager.getLayers({layerIds:layerIds}),activateViewport=this.layerManager.activateViewport,selectedInfos=this.deckPicker.pickObject({x:x,y:y,radius:radius,layers:layers,viewports:this.getViewports({x:x,y:y}),activateViewport:activateViewport,mode:"query",depth:depth}).result;return this.stats.get("pickMultipleObjects Time").timeEnd(),selectedInfos}},{key:"pickObjects",value:function pickObjects(_ref4){var x=_ref4.x,y=_ref4.y,_ref4$width=_ref4.width,width=void 0===_ref4$width?1:_ref4$width,_ref4$height=_ref4.height,height=void 0===_ref4$height?1:_ref4$height,_ref4$layerIds=_ref4.layerIds,layerIds=void 0===_ref4$layerIds?null:_ref4$layerIds;this.stats.get("Pick Count").incrementCount(),this.stats.get("pickObjects Time").timeStart();var layers=this.layerManager.getLayers({layerIds:layerIds}),activateViewport=this.layerManager.activateViewport,infos=this.deckPicker.pickObjects({x:x,y:y,width:width,height:height,layers:layers,viewports:this.getViewports({x:x,y:y,width:width,height:height}),activateViewport:activateViewport});return this.stats.get("pickObjects Time").timeEnd(),infos}},{key:"_createCanvas",value:function _createCanvas(props){var canvas=props.canvas;("string"==typeof canvas&&(canvas=document.getElementById(canvas),Object(assert.a)(canvas)),canvas)||(canvas=document.createElement("canvas"),(props.parent||document.body).appendChild(canvas));var id=props.id,style=props.style;return canvas.id=id,Object.assign(canvas.style,style),canvas}},{key:"_setCanvasSize",value:function _setCanvasSize(props){if(this.canvas){var width=props.width,height=props.height;(width||0===width)&&(width=Number.isFinite(width)?"".concat(width,"px"):width,this.canvas.style.width=width),(height||0===height)&&(height=Number.isFinite(height)?"".concat(height,"px"):height,this.canvas.style.position="absolute",this.canvas.style.height=height)}}},{key:"_updateCanvasSize",value:function _updateCanvasSize(){if(this._checkForCanvasSizeChange()){var width=this.width,height=this.height;this.viewManager.setProps({width:width,height:height}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function _checkForCanvasSizeChange(){var canvas=this.canvas;if(!canvas)return!1;var newWidth=canvas.clientWidth||canvas.width,newHeight=canvas.clientHeight||canvas.height;return(newWidth!==this.width||newHeight!==this.height)&&(this.width=newWidth,this.height=newHeight,!0)}},{key:"_createAnimationLoop",value:function _createAnimationLoop(props){var _this=this,width=props.width,height=props.height,gl=props.gl,glOptions=props.glOptions,debug=props.debug,useDevicePixels=props.useDevicePixels,autoResizeDrawingBuffer=props.autoResizeDrawingBuffer;return new animation_loop_AnimationLoop({width:width,height:height,useDevicePixels:useDevicePixels,autoResizeDrawingBuffer:autoResizeDrawingBuffer,gl:gl,onCreateContext:function onCreateContext(opts){return createGLContext(Object.assign({},glOptions,opts,{canvas:_this.canvas,debug:debug}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:props.onBeforeRender,onAfterRender:props.onAfterRender})}},{key:"_getViewState",value:function _getViewState(props){return props.viewState||this.viewState}},{key:"_getViews",value:function _getViews(props){var views=props.views||[new map_view.a({id:"default-view"})];return(views=Array.isArray(views)?views:[views]).length&&props.controller&&(views[0].props.controller=props.controller),views}},{key:"_onPointerMove",value:function _onPointerMove(event){var _pickRequest=this._pickRequest;if("pointerleave"===event.type)_pickRequest.x=-1,_pickRequest.y=-1,_pickRequest.radius=0;else{if(event.leftButton||event.rightButton)return;var pos=event.offsetCenter;if(!pos)return;_pickRequest.x=pos.x,_pickRequest.y=pos.y,_pickRequest.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:_pickRequest.x,y:_pickRequest.y}),_pickRequest.callback=this.props.onHover,_pickRequest.event=event,_pickRequest.mode="hover"}},{key:"_pickAndCallback",value:function _pickAndCallback(){var _pickRequest=this._pickRequest;if(_pickRequest.mode){var _this$deckPicker$pick=this.deckPicker.pickObject(Object.assign({layers:this.layerManager.getLayers(),viewports:this.getViewports(_pickRequest),activateViewport:this.layerManager.activateViewport,depth:1},_pickRequest)),result=_this$deckPicker$pick.result,emptyInfo=_this$deckPicker$pick.emptyInfo,pickedInfo=(_pickRequest.callback||this.props.getTooltip)&&(result.find((function(info){return info.index>=0}))||emptyInfo);if(this.props.getTooltip){var displayInfo=this.props.getTooltip(pickedInfo);this.tooltip.setTooltip(displayInfo,pickedInfo.x,pickedInfo.y)}_pickRequest.callback&&_pickRequest.callback(pickedInfo,_pickRequest.event),_pickRequest.mode=null}}},{key:"_updateCursor",value:function _updateCursor(){this.canvas&&(this.canvas.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function _setGLContext(gl){if(!this.layerManager){this.canvas||(this.canvas=gl.canvas,Object(track_context_state.a)(gl,{enable:!0,copyState:!0})),this.tooltip=new tooltip_Tooltip(this.canvas),Object(set_parameters.a)(gl,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(gl);var timeline=new animation_timeline.a;for(var eventType in timeline.play(),this.animationLoop.attachTimeline(timeline),this.eventManager=new esm.a(gl.canvas,{touchAction:this.props.touchAction,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),constants.b)this.eventManager.on(eventType,this._onEvent);this.viewManager=new view_manager_ViewManager({timeline:timeline,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(this.props),viewState:this._getViewState(this.props),width:this.width,height:this.height}),Object(assert.a)(this.viewManager);var viewport=this.viewManager.getViewports()[0];this.layerManager=new layer_manager.a(gl,{deck:this,stats:this.stats,viewport:viewport,timeline:timeline}),this.effectManager=new effect_manager_EffectManager,this.deckRenderer=new deck_renderer.a(gl),this.deckPicker=new deck_picker_DeckPicker(gl),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function _drawLayers(redrawReason,renderOptions){var gl=this.layerManager.context.gl;Object(set_parameters.a)(gl,this.props.parameters),this.props.onBeforeRender({gl:gl});var layers=this.layerManager.getLayers(),activateViewport=this.layerManager.activateViewport;this.deckRenderer.renderLayers(Object.assign({layers:layers,viewports:this.viewManager.getViewports(),activateViewport:activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:redrawReason,effects:this.effectManager.getEffects()},renderOptions)),this.props.onAfterRender({gl:gl})}},{key:"_onRendererInitialized",value:function _onRendererInitialized(_ref5){var gl=_ref5.gl;this._setGLContext(gl)}},{key:"_onRenderFrame",value:function _onRenderFrame(animationProps){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),utils_log.a.table(3,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function _onViewStateChange(params){var viewState=this.props.onViewStateChange(params)||params.viewState;this.viewState&&(this.viewState[params.viewId]=viewState,this.viewManager.setProps({viewState:viewState}))}},{key:"_onInteractiveStateChange",value:function _onInteractiveStateChange(_ref6){var _ref6$isDragging=_ref6.isDragging,isDragging=void 0!==_ref6$isDragging&&_ref6$isDragging;isDragging!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=isDragging)}},{key:"_onEvent",value:function _onEvent(event){var eventOptions=constants.b[event.type],pos=event.offsetCenter;if(eventOptions&&pos){var layers=this.layerManager.getLayers(),info=this.deckPicker.getLastPickedObject({x:pos.x,y:pos.y,layers:layers,viewports:this.getViewports(pos)},this._lastPointerDownInfo),layer=info.layer,layerHandler=layer&&(layer[eventOptions.handler]||layer.props[eventOptions.handler]),rootHandler=this.props[eventOptions.handler],handled=!1;layerHandler&&(handled=layerHandler.call(layer,info,event)),!handled&&rootHandler&&rootHandler(info,event)}}},{key:"_onPointerDown",value:function _onPointerDown(event){var pos=event.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:pos.x,y:pos.y,radius:this.props.pickingRadius})}},{key:"_getFrameStats",value:function _getFrameStats(){var stats=this.stats;stats.get("frameRate").timeEnd(),stats.get("frameRate").timeStart();var animationLoopStats=this.animationLoop.stats;stats.get("GPU Time").addTime(animationLoopStats.get("GPU Time").lastTiming),stats.get("CPU Time").addTime(animationLoopStats.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function _getMetrics(){var metrics=this.metrics,stats=this.stats;metrics.fps=stats.get("frameRate").getHz(),metrics.setPropsTime=stats.get("setProps Time").time,metrics.updateAttributesTime=stats.get("Update Attributes").time,metrics.framesRedrawn=stats.get("Redraw Count").count,metrics.pickTime=stats.get("pickObject Time").time+stats.get("pickMultipleObjects Time").time+stats.get("pickObjects Time").time,metrics.pickCount=stats.get("Pick Count").count,metrics.gpuTime=stats.get("GPU Time").time,metrics.cpuTime=stats.get("CPU Time").time,metrics.gpuTimePerFrame=stats.get("GPU Time").getAverageTime(),metrics.cpuTimePerFrame=stats.get("CPU Time").getAverageTime();var memoryStats=esm_init.a.get("Memory Usage");metrics.bufferMemory=memoryStats.get("Buffer Memory").count,metrics.textureMemory=memoryStats.get("Texture Memory").count,metrics.renderbufferMemory=memoryStats.get("Renderbuffer Memory").count,metrics.gpuMemory=memoryStats.get("GPU Memory").count}}]),Deck}();deck_Deck.getPropTypes=function getPropTypes(PropTypes){return{id:PropTypes.string,width:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),height:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),layers:PropTypes.oneOfType([PropTypes.object,PropTypes.array]),layerFilter:PropTypes.func,views:PropTypes.oneOfType([PropTypes.object,PropTypes.array]),viewState:PropTypes.object,effects:PropTypes.arrayOf(PropTypes.instanceOf(lib_effect.a)),controller:PropTypes.oneOfType([PropTypes.func,PropTypes.bool,PropTypes.object]),gl:PropTypes.object,glOptions:PropTypes.object,parameters:PropTypes.object,pickingRadius:PropTypes.number,useDevicePixels:PropTypes.oneOfType([PropTypes.bool,PropTypes.number]),touchAction:PropTypes.string,onWebGLInitialized:PropTypes.func,onResize:PropTypes.func,onViewStateChange:PropTypes.func,onBeforeRender:PropTypes.func,onAfterRender:PropTypes.func,onLoad:PropTypes.func,debug:PropTypes.bool,drawPickingColors:PropTypes.bool,_animate:PropTypes.bool}},deck_Deck.defaultProps=defaultProps,deck_Deck.VERSION=init.a.VERSION},,function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);__webpack_exports__.a=function isElectron(){return"undefined"!=typeof window&&"object"===Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(window.process)&&"renderer"===window.process.type||(!(void 0===process||"object"!==Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process.versions)||!Boolean(process.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}()}).call(this,__webpack_require__(72))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ProgramManager}));var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_luma_gl_shadertools__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(123),_luma_gl_webgl__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(778),ProgramManager=function(){function ProgramManager(gl){Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,ProgramManager),this.gl=gl,this._programCache={},this._getUniforms={},this._registeredModules={},this._moduleInjections={vs:{},fs:{}},this._hookFunctions={vs:{},fs:{}},this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(ProgramManager,null,[{key:"getDefaultProgramManager",value:function getDefaultProgramManager(gl){return gl.luma=gl.luma||{},gl.luma.defaultProgramManager=gl.luma.defaultProgramManager||new ProgramManager(gl),gl.luma.defaultProgramManager}}]),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(ProgramManager,[{key:"addDefaultModule",value:function addDefaultModule(module){this._defaultModules.find((function(m){return m.name===module.name}))||this._defaultModules.push(module),this.stateHash++}},{key:"removeDefaultModule",value:function removeDefaultModule(module){var moduleName="string"==typeof module?module:module.name;this._defaultModules=this._defaultModules.filter((function(m){return m.name!==moduleName})),this.stateHash++}},{key:"addModuleInjection",value:function addModuleInjection(module,opts){var moduleName="string"==typeof module?module:module.name,hook=opts.hook,injection=opts.injection,_opts$order=opts.order,order=void 0===_opts$order?0:_opts$order,shaderStage=hook.slice(0,2),moduleInjections=this._moduleInjections[shaderStage];moduleInjections[moduleName]=moduleInjections[moduleName]||{},moduleInjections[moduleName][hook]={injection:injection,order:order},this.stateHash++}},{key:"addShaderHook",value:function addShaderHook(hook){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_hook$split=(hook=hook.trim()).split(":"),_hook$split2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_hook$split,2),stage=_hook$split2[0],signature=_hook$split2[1],name=hook.replace(/\(.+/,"");this._hookFunctions[stage][name]=Object.assign(opts,{signature:signature}),this.stateHash++}},{key:"get",value:function get(){var _this=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_props$vs=props.vs,vs=void 0===_props$vs?"":_props$vs,_props$fs=props.fs,fs=void 0===_props$fs?"":_props$fs,_props$defines=props.defines,defines=void 0===_props$defines?{}:_props$defines,_props$inject=props.inject,inject=void 0===_props$inject?{}:_props$inject,_props$varyings=props.varyings,varyings=void 0===_props$varyings?[]:_props$varyings,_props$bufferMode=props.bufferMode,bufferMode=void 0===_props$bufferMode?35981:_props$bufferMode,modules=this._getModuleList(props.modules),vsHash=this._getHash(vs),fsHash=this._getHash(fs),moduleHashes=modules.map((function(m){return _this._getHash("string"==typeof m?m:m.name)})).sort(),varyingHashes=varyings.map((function(v){return _this._getHash(v)})),defineKeys=Object.keys(defines).sort(),injectKeys=Object.keys(inject).sort(),defineHashes=[],injectHashes=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=defineKeys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;defineHashes.push(this._getHash(key)),defineHashes.push(this._getHash(defines[key]))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=injectKeys[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _key=_step2.value;injectHashes.push(this._getHash(_key)),injectHashes.push(this._getHash(inject[_key]))}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var hash="".concat(vsHash,"/").concat(fsHash,"D").concat(defineHashes.join("/"),"M").concat(moduleHashes.join("/"),"I").concat(injectHashes.join("/"),"V").concat(varyingHashes.join("/"),"H").concat(this.stateHash,"B").concat(bufferMode);if(!this._programCache[hash]){var assembled=Object(_luma_gl_shadertools__WEBPACK_IMPORTED_MODULE_3__.a)(this.gl,{vs:vs,fs:fs,modules:modules,inject:inject,defines:defines,hookFunctions:this._hookFunctions,moduleInjections:this._moduleInjections});this._programCache[hash]=new _luma_gl_webgl__WEBPACK_IMPORTED_MODULE_4__.a(this.gl,{hash:hash,vs:assembled.vs,fs:assembled.fs,varyings:varyings,bufferMode:bufferMode}),this._getUniforms[hash]=assembled.getUniforms||function(x){},this._useCounts[hash]=0}return this._useCounts[hash]++,this._programCache[hash]}},{key:"getUniforms",value:function getUniforms(program){return this._getUniforms[program.hash]||null}},{key:"release",value:function release(program){var hash=program.hash;this._useCounts[hash]--,0===this._useCounts[hash]&&(this._programCache[hash].delete(),delete this._programCache[hash],delete this._getUniforms[hash],delete this._useCounts[hash])}},{key:"_getHash",value:function _getHash(key){return void 0===this._hashes[key]&&(this._hashes[key]=this._hashCounter++),this._hashes[key]}},{key:"_getModuleList",value:function _getModuleList(){for(var appModules=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],modules=new Array(this._defaultModules.length+appModules.length),seen={},count=0,i=0,len=this._defaultModules.length;i<len;++i){var module=this._defaultModules[i],name="string"==typeof module?module:module.name;modules[count++]=module,seen[name]=!0}for(var _i=0,_len=appModules.length;_i<_len;++_i){var _module=appModules[_i],_name="string"==typeof _module?_module:_module.name;seen[_name]||(modules[count++]=_module,seen[_name]=!0)}return modules.length=count,modules}}]),ProgramManager}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Geometry}));var _babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(125),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(127),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(17),DRAW_MODE={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Geometry=function(){function Geometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,Geometry);var _props$id=props.id,id=void 0===_props$id?Object(_utils__WEBPACK_IMPORTED_MODULE_3__.c)("geometry"):_props$id,_props$drawMode=props.drawMode,drawMode=void 0===_props$drawMode?DRAW_MODE.TRIANGLES:_props$drawMode,_props$attributes=props.attributes,attributes=void 0===_props$attributes?{}:_props$attributes,_props$indices=props.indices,indices=void 0===_props$indices?null:_props$indices,_props$vertexCount=props.vertexCount,vertexCount=void 0===_props$vertexCount?null:_props$vertexCount;this.id=id,this.drawMode=0|drawMode,this.attributes={},this.userData={},this._setAttributes(attributes,indices),this.vertexCount=vertexCount||this._calculateVertexCount(this.attributes,this.indices)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(Geometry,null,[{key:"DRAW_MODE",get:function get(){return DRAW_MODE}}]),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(Geometry,[{key:"getVertexCount",value:function getVertexCount(){return this.vertexCount}},{key:"getAttributes",value:function getAttributes(){return this.indices?Object(_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function _print(attributeName){return"Geometry ".concat(this.id," attribute ").concat(attributeName)}},{key:"_setAttributes",value:function _setAttributes(attributes,indices){for(var attributeName in indices&&(this.indices=ArrayBuffer.isView(indices)?{value:indices,size:1}:indices),attributes){var attribute=attributes[attributeName];attribute=ArrayBuffer.isView(attribute)?{value:attribute}:attribute,Object(_utils__WEBPACK_IMPORTED_MODULE_4__.a)(ArrayBuffer.isView(attribute.value),"".concat(this._print(attributeName),": must be typed array or object with value as typed array")),"POSITION"!==attributeName&&"positions"!==attributeName||attribute.size||(attribute.size=3),"indices"===attributeName?(Object(_utils__WEBPACK_IMPORTED_MODULE_4__.a)(!this.indices),this.indices=attribute):this.attributes[attributeName]=attribute}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function _calculateVertexCount(attributes,indices){if(indices)return indices.value.length;var vertexCount=1/0;for(var attributeName in attributes){var attribute=attributes[attributeName],value=attribute.value,size=attribute.size;!attribute.constant&&value&&size>=1&&(vertexCount=Math.min(vertexCount,value.length/size))}return Object(_utils__WEBPACK_IMPORTED_MODULE_4__.a)(Number.isFinite(vertexCount)),vertexCount}},{key:"mode",get:function get(){return this.drawMode}}]),Geometry}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return registerLoaders})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getRegisteredLoaders}));var _loader_utils_normalize_loader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(82),registeredLoaders=[];function registerLoaders(loaders){loaders=Array.isArray(loaders)?loaders:[loaders];var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function _loop(){var loader=_step.value,normalizedLoader=Object(_loader_utils_normalize_loader__WEBPACK_IMPORTED_MODULE_0__.b)(loader);registeredLoaders.find((function(registeredLoader){return normalizedLoader===registeredLoader}))||registeredLoaders.unshift(normalizedLoader)},_iterator=loaders[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}function getRegisteredLoaders(){return registeredLoaders}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return powish})),__webpack_require__.d(__webpack_exports__,"a",(function(){return pow}));var _linear_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(162),_continuous_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(46),_init_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(65);function transformPow(exponent){return function(x){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent)}}function transformSqrt(x){return x<0?-Math.sqrt(-x):Math.sqrt(x)}function transformSquare(x){return x<0?-x*x:x*x}function powish(transform){var scale=transform(_continuous_js__WEBPACK_IMPORTED_MODULE_1__.c,_continuous_js__WEBPACK_IMPORTED_MODULE_1__.c),exponent=1;function rescale(){return 1===exponent?transform(_continuous_js__WEBPACK_IMPORTED_MODULE_1__.c,_continuous_js__WEBPACK_IMPORTED_MODULE_1__.c):.5===exponent?transform(transformSqrt,transformSquare):transform(transformPow(exponent),transformPow(1/exponent))}return scale.exponent=function(_){return arguments.length?(exponent=+_,rescale()):exponent},Object(_linear_js__WEBPACK_IMPORTED_MODULE_0__.b)(scale)}function pow(){var scale=powish(Object(_continuous_js__WEBPACK_IMPORTED_MODULE_1__.d)());return scale.copy=function(){return Object(_continuous_js__WEBPACK_IMPORTED_MODULE_1__.a)(scale,pow()).exponent(scale.exponent())},_init_js__WEBPACK_IMPORTED_MODULE_2__.b.apply(scale,arguments),scale}},function(module,exports,__webpack_require__){"use strict";function earcut(data,holeIndices,dim){dim=dim||2;var minX,minY,maxX,maxY,x,y,invSize,hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,outerNode=linkedList(data,0,outerLen,dim,!0),triangles=[];if(!outerNode||outerNode.next===outerNode.prev)return triangles;if(hasHoles&&(outerNode=function eliminateHoles(data,holeIndices,outerNode,dim){var i,len,start,end,list,queue=[];for(i=0,len=holeIndices.length;i<len;i++)start=holeIndices[i]*dim,end=i<len-1?holeIndices[i+1]*dim:data.length,(list=linkedList(data,start,end,dim,!1))===list.next&&(list.steiner=!0),queue.push(getLeftmost(list));for(queue.sort(compareX),i=0;i<queue.length;i++)eliminateHole(queue[i],outerNode),outerNode=filterPoints(outerNode,outerNode.next);return outerNode}(data,holeIndices,outerNode,dim)),data.length>80*dim){minX=maxX=data[0],minY=maxY=data[1];for(var i=dim;i<outerLen;i+=dim)(x=data[i])<minX&&(minX=x),(y=data[i+1])<minY&&(minY=y),x>maxX&&(maxX=x),y>maxY&&(maxY=y);invSize=0!==(invSize=Math.max(maxX-minX,maxY-minY))?1/invSize:0}return earcutLinked(outerNode,triangles,dim,minX,minY,invSize),triangles}function linkedList(data,start,end,dim,clockwise){var i,last;if(clockwise===signedArea(data,start,end,dim)>0)for(i=start;i<end;i+=dim)last=insertNode(i,data[i],data[i+1],last);else for(i=end-dim;i>=start;i-=dim)last=insertNode(i,data[i],data[i+1],last);return last&&equals(last,last.next)&&(removeNode(last),last=last.next),last}function filterPoints(start,end){if(!start)return start;end||(end=start);var again,p=start;do{if(again=!1,p.steiner||!equals(p,p.next)&&0!==area(p.prev,p,p.next))p=p.next;else{if(removeNode(p),(p=end=p.prev)===p.next)break;again=!0}}while(again||p!==end);return end}function earcutLinked(ear,triangles,dim,minX,minY,invSize,pass){if(ear){!pass&&invSize&&function indexCurve(start,minX,minY,invSize){var p=start;do{null===p.z&&(p.z=zOrder(p.x,p.y,minX,minY,invSize)),p.prevZ=p.prev,p.nextZ=p.next,p=p.next}while(p!==start);p.prevZ.nextZ=null,p.prevZ=null,function sortLinked(list){var i,p,q,e,tail,numMerges,pSize,qSize,inSize=1;do{for(p=list,list=null,tail=null,numMerges=0;p;){for(numMerges++,q=p,pSize=0,i=0;i<inSize&&(pSize++,q=q.nextZ);i++);for(qSize=inSize;pSize>0||qSize>0&&q;)0!==pSize&&(0===qSize||!q||p.z<=q.z)?(e=p,p=p.nextZ,pSize--):(e=q,q=q.nextZ,qSize--),tail?tail.nextZ=e:list=e,e.prevZ=tail,tail=e;p=q}tail.nextZ=null,inSize*=2}while(numMerges>1);return list}(p)}(ear,minX,minY,invSize);for(var prev,next,stop=ear;ear.prev!==ear.next;)if(prev=ear.prev,next=ear.next,invSize?isEarHashed(ear,minX,minY,invSize):isEar(ear))triangles.push(prev.i/dim),triangles.push(ear.i/dim),triangles.push(next.i/dim),removeNode(ear),ear=next.next,stop=next.next;else if((ear=next)===stop){pass?1===pass?earcutLinked(ear=cureLocalIntersections(filterPoints(ear),triangles,dim),triangles,dim,minX,minY,invSize,2):2===pass&&splitEarcut(ear,triangles,dim,minX,minY,invSize):earcutLinked(filterPoints(ear),triangles,dim,minX,minY,invSize,1);break}}}function isEar(ear){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;for(var p=ear.next.next;p!==ear.prev;){if(pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function isEarHashed(ear,minX,minY,invSize){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;for(var minTX=a.x<b.x?a.x<c.x?a.x:c.x:b.x<c.x?b.x:c.x,minTY=a.y<b.y?a.y<c.y?a.y:c.y:b.y<c.y?b.y:c.y,maxTX=a.x>b.x?a.x>c.x?a.x:c.x:b.x>c.x?b.x:c.x,maxTY=a.y>b.y?a.y>c.y?a.y:c.y:b.y>c.y?b.y:c.y,minZ=zOrder(minTX,minTY,minX,minY,invSize),maxZ=zOrder(maxTX,maxTY,minX,minY,invSize),p=ear.prevZ,n=ear.nextZ;p&&p.z>=minZ&&n&&n.z<=maxZ;){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,n!==ear.prev&&n!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(;p&&p.z>=minZ;){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;n&&n.z<=maxZ;){if(n!==ear.prev&&n!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.nextZ}return!0}function cureLocalIntersections(start,triangles,dim){var p=start;do{var a=p.prev,b=p.next.next;!equals(a,b)&&intersects(a,p,p.next,b)&&locallyInside(a,b)&&locallyInside(b,a)&&(triangles.push(a.i/dim),triangles.push(p.i/dim),triangles.push(b.i/dim),removeNode(p),removeNode(p.next),p=start=b),p=p.next}while(p!==start);return filterPoints(p)}function splitEarcut(start,triangles,dim,minX,minY,invSize){var a=start;do{for(var b=a.next.next;b!==a.prev;){if(a.i!==b.i&&isValidDiagonal(a,b)){var c=splitPolygon(a,b);return a=filterPoints(a,a.next),c=filterPoints(c,c.next),earcutLinked(a,triangles,dim,minX,minY,invSize),void earcutLinked(c,triangles,dim,minX,minY,invSize)}b=b.next}a=a.next}while(a!==start)}function compareX(a,b){return a.x-b.x}function eliminateHole(hole,outerNode){if(outerNode=function findHoleBridge(hole,outerNode){var m,p=outerNode,hx=hole.x,hy=hole.y,qx=-1/0;do{if(hy<=p.y&&hy>=p.next.y&&p.next.y!==p.y){var x=p.x+(hy-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(x<=hx&&x>qx){if(qx=x,x===hx){if(hy===p.y)return p;if(hy===p.next.y)return p.next}m=p.x<p.next.x?p:p.next}}p=p.next}while(p!==outerNode);if(!m)return null;if(hx===qx)return m;var tan,stop=m,mx=m.x,my=m.y,tanMin=1/0;p=m;do{hx>=p.x&&p.x>=mx&&hx!==p.x&&pointInTriangle(hy<my?hx:qx,hy,mx,my,hy<my?qx:hx,hy,p.x,p.y)&&(tan=Math.abs(hy-p.y)/(hx-p.x),locallyInside(p,hole)&&(tan<tanMin||tan===tanMin&&(p.x>m.x||p.x===m.x&&sectorContainsSector(m,p)))&&(m=p,tanMin=tan)),p=p.next}while(p!==stop);return m}(hole,outerNode)){var b=splitPolygon(outerNode,hole);filterPoints(b,b.next)}}function sectorContainsSector(m,p){return area(m.prev,m,p.prev)<0&&area(p.next,m,m.next)<0}function zOrder(x,y,minX,minY,invSize){return(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x=32767*(x-minX)*invSize)|x<<8))|x<<4))|x<<2))|x<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=32767*(y-minY)*invSize)|y<<8))|y<<4))|y<<2))|y<<1))<<1}function getLeftmost(start){var p=start,leftmost=start;do{(p.x<leftmost.x||p.x===leftmost.x&&p.y<leftmost.y)&&(leftmost=p),p=p.next}while(p!==start);return leftmost}function pointInTriangle(ax,ay,bx,by,cx,cy,px,py){return(cx-px)*(ay-py)-(ax-px)*(cy-py)>=0&&(ax-px)*(by-py)-(bx-px)*(ay-py)>=0&&(bx-px)*(cy-py)-(cx-px)*(by-py)>=0}function isValidDiagonal(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!function intersectsPolygon(a,b){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==b.i&&p.next.i!==b.i&&intersects(p,p.next,a,b))return!0;p=p.next}while(p!==a);return!1}(a,b)&&(locallyInside(a,b)&&locallyInside(b,a)&&function middleInside(a,b){var p=a,inside=!1,px=(a.x+b.x)/2,py=(a.y+b.y)/2;do{p.y>py!=p.next.y>py&&p.next.y!==p.y&&px<(p.next.x-p.x)*(py-p.y)/(p.next.y-p.y)+p.x&&(inside=!inside),p=p.next}while(p!==a);return inside}(a,b)&&(area(a.prev,a,b.prev)||area(a,b.prev,b))||equals(a,b)&&area(a.prev,a,a.next)>0&&area(b.prev,b,b.next)>0)}function area(p,q,r){return(q.y-p.y)*(r.x-q.x)-(q.x-p.x)*(r.y-q.y)}function equals(p1,p2){return p1.x===p2.x&&p1.y===p2.y}function intersects(p1,q1,p2,q2){var o1=sign(area(p1,q1,p2)),o2=sign(area(p1,q1,q2)),o3=sign(area(p2,q2,p1)),o4=sign(area(p2,q2,q1));return o1!==o2&&o3!==o4||(!(0!==o1||!onSegment(p1,p2,q1))||(!(0!==o2||!onSegment(p1,q2,q1))||(!(0!==o3||!onSegment(p2,p1,q2))||!(0!==o4||!onSegment(p2,q1,q2)))))}function onSegment(p,q,r){return q.x<=Math.max(p.x,r.x)&&q.x>=Math.min(p.x,r.x)&&q.y<=Math.max(p.y,r.y)&&q.y>=Math.min(p.y,r.y)}function sign(num){return num>0?1:num<0?-1:0}function locallyInside(a,b){return area(a.prev,a,a.next)<0?area(a,b,a.next)>=0&&area(a,a.prev,b)>=0:area(a,b,a.prev)<0||area(a,a.next,b)<0}function splitPolygon(a,b){var a2=new Node(a.i,a.x,a.y),b2=new Node(b.i,b.x,b.y),an=a.next,bp=b.prev;return a.next=b,b.prev=a,a2.next=an,an.prev=a2,b2.next=a2,a2.prev=b2,bp.next=b2,b2.prev=bp,b2}function insertNode(i,x,y,last){var p=new Node(i,x,y);return last?(p.next=last.next,p.prev=last,last.next.prev=p,last.next=p):(p.prev=p,p.next=p),p}function removeNode(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function Node(i,x,y){this.i=i,this.x=x,this.y=y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(data,start,end,dim){for(var sum=0,i=start,j=end-dim;i<end;i+=dim)sum+=(data[j]-data[i])*(data[i+1]+data[j+1]),j=i;return sum}module.exports=earcut,module.exports.default=earcut,earcut.deviation=function(data,holeIndices,dim,triangles){var hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,polygonArea=Math.abs(signedArea(data,0,outerLen,dim));if(hasHoles)for(var i=0,len=holeIndices.length;i<len;i++){var start=holeIndices[i]*dim,end=i<len-1?holeIndices[i+1]*dim:data.length;polygonArea-=Math.abs(signedArea(data,start,end,dim))}var trianglesArea=0;for(i=0;i<triangles.length;i+=3){var a=triangles[i]*dim,b=triangles[i+1]*dim,c=triangles[i+2]*dim;trianglesArea+=Math.abs((data[a]-data[c])*(data[b+1]-data[a+1])-(data[a]-data[b])*(data[c+1]-data[a+1]))}return 0===polygonArea&&0===trianglesArea?0:Math.abs((trianglesArea-polygonArea)/polygonArea)},earcut.flatten=function(data){for(var dim=data[0][0].length,result={vertices:[],holes:[],dimensions:dim},holeIndex=0,i=0;i<data.length;i++){for(var j=0;j<data[i].length;j++)for(var d=0;d<dim;d++)result.vertices.push(data[i][j][d]);i>0&&(holeIndex+=data[i-1].length,result.holes.push(holeIndex))}return result}},function(module,exports,__webpack_require__){var SphericalMercator=__webpack_require__(764),smCache={};function fetchMerc(tileSize){return smCache[tileSize=tileSize||256]||(smCache[tileSize]=new SphericalMercator({size:tileSize})),smCache[tileSize]}module.exports.viewport=function viewport(bounds,dimensions,minzoom,maxzoom,tileSize,allowFloat){minzoom=void 0===minzoom?0:minzoom,maxzoom=void 0===maxzoom?20:maxzoom;var merc=fetchMerc(tileSize),base=maxzoom,bl=merc.px([bounds[0],bounds[1]],base),tr=merc.px([bounds[2],bounds[3]],base),width=tr[0]-bl[0],height=bl[1]-tr[1],ratios=[width/dimensions[0],height/dimensions[1]],center=[(bounds[0]+bounds[2])/2,(bounds[1]+bounds[3])/2],adjusted=function getAdjusted(base,ratios,allowFloat){var adjusted=Math.min(base-Math.log(ratios[0])/Math.log(2),base-Math.log(ratios[1])/Math.log(2));return allowFloat?adjusted:Math.floor(adjusted)}(base,ratios,allowFloat),zoom=Math.max(minzoom,Math.min(maxzoom,adjusted));return{center:center,zoom:zoom}},module.exports.bounds=function bounds(viewport,zoom,dimensions,tileSize){void 0!==viewport.lon&&(viewport=[viewport.lon,viewport.lat]);var merc=fetchMerc(tileSize),px=merc.px(viewport,zoom),tl=merc.ll([px[0]-dimensions[0]/2,px[1]-dimensions[1]/2],zoom),br=merc.ll([px[0]+dimensions[0]/2,px[1]+dimensions[1]/2],zoom);return[tl[0],br[1],br[0],tl[1]]}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8);function createDetectElementResize(nonce){var _window;_window="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;var cancel,raf,attachEvent="undefined"!=typeof document&&document.attachEvent;if(!attachEvent){var requestFrame=(raf=_window.requestAnimationFrame||_window.mozRequestAnimationFrame||_window.webkitRequestAnimationFrame||function(fn){return _window.setTimeout(fn,20)},function(fn){return raf(fn)}),cancelFrame=(cancel=_window.cancelAnimationFrame||_window.mozCancelAnimationFrame||_window.webkitCancelAnimationFrame||_window.clearTimeout,function(id){return cancel(id)}),resetTriggers=function resetTriggers(element){var triggers=element.__resizeTriggers__,expand=triggers.firstElementChild,contract=triggers.lastElementChild,expandChild=expand.firstElementChild;contract.scrollLeft=contract.scrollWidth,contract.scrollTop=contract.scrollHeight,expandChild.style.width=expand.offsetWidth+1+"px",expandChild.style.height=expand.offsetHeight+1+"px",expand.scrollLeft=expand.scrollWidth,expand.scrollTop=expand.scrollHeight},scrollListener=function scrollListener(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var element=this;resetTriggers(this),this.__resizeRAF__&&cancelFrame(this.__resizeRAF__),this.__resizeRAF__=requestFrame((function(){(function checkTriggers(element){return element.offsetWidth!=element.__resizeLast__.width||element.offsetHeight!=element.__resizeLast__.height})(element)&&(element.__resizeLast__.width=element.offsetWidth,element.__resizeLast__.height=element.offsetHeight,element.__resizeListeners__.forEach((function(fn){fn.call(element,e)})))}))}},animation=!1,keyframeprefix="",animationstartevent="animationstart",domPrefixes="Webkit Moz O ms".split(" "),startEvents="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),elm=document.createElement("fakeelement");if(void 0!==elm.style.animationName&&(animation=!0),!1===animation)for(var i=0;i<domPrefixes.length;i++)if(void 0!==elm.style[domPrefixes[i]+"AnimationName"]){keyframeprefix="-"+domPrefixes[i].toLowerCase()+"-",animationstartevent=startEvents[i],animation=!0;break}var animationName="resizeanim",animationKeyframes="@"+keyframeprefix+"keyframes "+animationName+" { from { opacity: 0; } to { opacity: 0; } } ",animationStyle=keyframeprefix+"animation: 1ms "+animationName+"; "}return{addResizeListener:function addResizeListener(element,fn){if(attachEvent)element.attachEvent("onresize",fn);else{if(!element.__resizeTriggers__){var doc=element.ownerDocument,elementStyle=_window.getComputedStyle(element);elementStyle&&"static"==elementStyle.position&&(element.style.position="relative"),function createStyles(doc){if(!doc.getElementById("detectElementResize")){var css=(animationKeyframes||"")+".resize-triggers { "+(animationStyle||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',head=doc.head||doc.getElementsByTagName("head")[0],style=doc.createElement("style");style.id="detectElementResize",style.type="text/css",null!=nonce&&style.setAttribute("nonce",nonce),style.styleSheet?style.styleSheet.cssText=css:style.appendChild(doc.createTextNode(css)),head.appendChild(style)}}(doc),element.__resizeLast__={},element.__resizeListeners__=[],(element.__resizeTriggers__=doc.createElement("div")).className="resize-triggers",element.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',element.appendChild(element.__resizeTriggers__),resetTriggers(element),element.addEventListener("scroll",scrollListener,!0),animationstartevent&&(element.__resizeTriggers__.__animationListener__=function animationListener(e){e.animationName==animationName&&resetTriggers(element)},element.__resizeTriggers__.addEventListener(animationstartevent,element.__resizeTriggers__.__animationListener__))}element.__resizeListeners__.push(fn)}},removeResizeListener:function removeResizeListener(element,fn){if(attachEvent)element.detachEvent("onresize",fn);else if(element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn),1),!element.__resizeListeners__.length){element.removeEventListener("scroll",scrollListener,!0),element.__resizeTriggers__.__animationListener__&&(element.__resizeTriggers__.removeEventListener(animationstartevent,element.__resizeTriggers__.__animationListener__),element.__resizeTriggers__.__animationListener__=null);try{element.__resizeTriggers__=!element.removeChild(element.__resizeTriggers__)}catch(e){}}}}}var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call},AutoSizer=function(_React$PureComponent){function AutoSizer(){var _ref,_temp,_this;classCallCheck(this,AutoSizer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=possibleConstructorReturn(this,(_ref=AutoSizer.__proto__||Object.getPrototypeOf(AutoSizer)).call.apply(_ref,[this].concat(args))),_this.state={height:_this.props.defaultHeight||0,width:_this.props.defaultWidth||0},_this._onResize=function(){var _this$props=_this.props,disableHeight=_this$props.disableHeight,disableWidth=_this$props.disableWidth,onResize=_this$props.onResize;if(_this._parentNode){var _height=_this._parentNode.offsetHeight||0,_width=_this._parentNode.offsetWidth||0,_style=window.getComputedStyle(_this._parentNode)||{},paddingLeft=parseInt(_style.paddingLeft,10)||0,paddingRight=parseInt(_style.paddingRight,10)||0,paddingTop=parseInt(_style.paddingTop,10)||0,paddingBottom=parseInt(_style.paddingBottom,10)||0,newHeight=_height-paddingTop-paddingBottom,newWidth=_width-paddingLeft-paddingRight;(!disableHeight&&_this.state.height!==newHeight||!disableWidth&&_this.state.width!==newWidth)&&(_this.setState({height:_height-paddingTop-paddingBottom,width:_width-paddingLeft-paddingRight}),onResize({height:_height,width:_width}))}},_this._setRef=function(autoSizer){_this._autoSizer=autoSizer},possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(AutoSizer,_React$PureComponent),createClass(AutoSizer,[{key:"componentDidMount",value:function componentDidMount(){var nonce=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=createDetectElementResize(nonce),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function render(){var _props=this.props,children=_props.children,className=_props.className,disableHeight=_props.disableHeight,disableWidth=_props.disableWidth,style=_props.style,_state=this.state,height=_state.height,width=_state.width,outerStyle={overflow:"visible"},childParams={},bailoutOnChildren=!1;return disableHeight||(0===height&&(bailoutOnChildren=!0),outerStyle.height=0,childParams.height=height),disableWidth||(0===width&&(bailoutOnChildren=!0),outerStyle.width=0,childParams.width=width),Object(react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",{className:className,ref:this._setRef,style:_extends({},outerStyle,style)},!bailoutOnChildren&&children(childParams))}}]),AutoSizer}(react__WEBPACK_IMPORTED_MODULE_0__.PureComponent);AutoSizer.defaultProps={onResize:function onResize(){},disableHeight:!1,disableWidth:!1,style:{}},__webpack_exports__.a=AutoSizer}).call(this,__webpack_require__(36))},function(module,__webpack_exports__,__webpack_require__){"use strict";var adder=function(){return new Adder};function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(y){add(temp,y,this.t),add(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add(adder,a,b){var x=adder.s=a+b,bv=x-a,av=x-bv;adder.t=a-av+(b-bv)}var epsilon=1e-6,epsilon2=1e-12,pi=Math.PI,halfPi=pi/2,quarterPi=pi/4,tau=2*pi,degrees=180/pi,radians=pi/180,abs=Math.abs,atan=Math.atan,atan2=Math.atan2,cos=Math.cos,exp=(Math.ceil,Math.exp),log=(Math.floor,Math.log),sin=(Math.pow,Math.sin),math_sign=Math.sign||function(x){return x>0?1:x<0?-1:0},sqrt=Math.sqrt,tan=Math.tan;function acos(x){return x>1?0:x<-1?pi:Math.acos(x)}function asin(x){return x>1?halfPi:x<-1?-halfPi:Math.asin(x)}function noop(){}function streamGeometry(geometry,stream){geometry&&streamGeometryType.hasOwnProperty(geometry.type)&&streamGeometryType[geometry.type](geometry,stream)}var streamObjectType={Feature:function(object,stream){streamGeometry(object.geometry,stream)},FeatureCollection:function(object,stream){for(var features=object.features,i=-1,n=features.length;++i<n;)streamGeometry(features[i].geometry,stream)}},streamGeometryType={Sphere:function(object,stream){stream.sphere()},Point:function(object,stream){object=object.coordinates,stream.point(object[0],object[1],object[2])},MultiPoint:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],stream.point(object[0],object[1],object[2])},LineString:function(object,stream){streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamLine(coordinates[i],stream,0)},Polygon:function(object,stream){streamPolygon(object.coordinates,stream)},MultiPolygon:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamPolygon(coordinates[i],stream)},GeometryCollection:function(object,stream){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)streamGeometry(geometries[i],stream)}};function streamLine(coordinates,stream,closed){var coordinate,i=-1,n=coordinates.length-closed;for(stream.lineStart();++i<n;)coordinate=coordinates[i],stream.point(coordinate[0],coordinate[1],coordinate[2]);stream.lineEnd()}function streamPolygon(coordinates,stream){var i=-1,n=coordinates.length;for(stream.polygonStart();++i<n;)streamLine(coordinates[i],stream,1);stream.polygonEnd()}var area_lambda00,phi00,area_lambda0,area_cosPhi0,area_sinPhi0,src_stream=function(object,stream){object&&streamObjectType.hasOwnProperty(object.type)?streamObjectType[object.type](object,stream):streamGeometry(object,stream)},areaRingSum=adder(),areaSum=adder(),areaStream={point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){areaRingSum.reset(),areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){var areaRing=+areaRingSum;areaSum.add(areaRing<0?tau+areaRing:areaRing),this.lineStart=this.lineEnd=this.point=noop},sphere:function(){areaSum.add(tau)}};function areaRingStart(){areaStream.point=areaPointFirst}function areaRingEnd(){areaPoint(area_lambda00,phi00)}function areaPointFirst(lambda,phi){areaStream.point=areaPoint,area_lambda00=lambda,phi00=phi,area_lambda0=lambda*=radians,area_cosPhi0=cos(phi=(phi*=radians)/2+quarterPi),area_sinPhi0=sin(phi)}function areaPoint(lambda,phi){var dLambda=(lambda*=radians)-area_lambda0,sdLambda=dLambda>=0?1:-1,adLambda=sdLambda*dLambda,cosPhi=cos(phi=(phi*=radians)/2+quarterPi),sinPhi=sin(phi),k=area_sinPhi0*sinPhi,u=area_cosPhi0*cosPhi+k*cos(adLambda),v=k*sdLambda*sin(adLambda);areaRingSum.add(atan2(v,u)),area_lambda0=lambda,area_cosPhi0=cosPhi,area_sinPhi0=sinPhi}function cartesian_spherical(cartesian){return[atan2(cartesian[1],cartesian[0]),asin(cartesian[2])]}function cartesian_cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=cos(phi);return[cosPhi*cos(lambda),cosPhi*sin(lambda),sin(phi)]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianNormalizeInPlace(d){var l=sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}var bounds_lambda0,bounds_phi0,bounds_lambda1,bounds_phi1,bounds_lambda2,bounds_lambda00,bounds_phi00,bounds_p0,ranges,range,deltaSum=adder(),boundsStream={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream.point=boundsRingPoint,boundsStream.lineStart=boundsRingStart,boundsStream.lineEnd=boundsRingEnd,deltaSum.reset(),areaStream.polygonStart()},polygonEnd:function(){areaStream.polygonEnd(),boundsStream.point=boundsPoint,boundsStream.lineStart=boundsLineStart,boundsStream.lineEnd=boundsLineEnd,areaRingSum<0?(bounds_lambda0=-(bounds_lambda1=180),bounds_phi0=-(bounds_phi1=90)):deltaSum>epsilon?bounds_phi1=90:deltaSum<-epsilon&&(bounds_phi0=-90),range[0]=bounds_lambda0,range[1]=bounds_lambda1},sphere:function(){bounds_lambda0=-(bounds_lambda1=180),bounds_phi0=-(bounds_phi1=90)}};function boundsPoint(lambda,phi){ranges.push(range=[bounds_lambda0=lambda,bounds_lambda1=lambda]),phi<bounds_phi0&&(bounds_phi0=phi),phi>bounds_phi1&&(bounds_phi1=phi)}function bounds_linePoint(lambda,phi){var p=cartesian_cartesian([lambda*radians,phi*radians]);if(bounds_p0){var normal=cartesianCross(bounds_p0,p),inflection=cartesianCross([normal[1],-normal[0],0],normal);cartesianNormalizeInPlace(inflection),inflection=cartesian_spherical(inflection);var phii,delta=lambda-bounds_lambda2,sign=delta>0?1:-1,lambdai=inflection[0]*degrees*sign,antimeridian=abs(delta)>180;antimeridian^(sign*bounds_lambda2<lambdai&&lambdai<sign*lambda)?(phii=inflection[1]*degrees)>bounds_phi1&&(bounds_phi1=phii):antimeridian^(sign*bounds_lambda2<(lambdai=(lambdai+360)%360-180)&&lambdai<sign*lambda)?(phii=-inflection[1]*degrees)<bounds_phi0&&(bounds_phi0=phii):(phi<bounds_phi0&&(bounds_phi0=phi),phi>bounds_phi1&&(bounds_phi1=phi)),antimeridian?lambda<bounds_lambda2?bounds_angle(bounds_lambda0,lambda)>bounds_angle(bounds_lambda0,bounds_lambda1)&&(bounds_lambda1=lambda):bounds_angle(lambda,bounds_lambda1)>bounds_angle(bounds_lambda0,bounds_lambda1)&&(bounds_lambda0=lambda):bounds_lambda1>=bounds_lambda0?(lambda<bounds_lambda0&&(bounds_lambda0=lambda),lambda>bounds_lambda1&&(bounds_lambda1=lambda)):lambda>bounds_lambda2?bounds_angle(bounds_lambda0,lambda)>bounds_angle(bounds_lambda0,bounds_lambda1)&&(bounds_lambda1=lambda):bounds_angle(lambda,bounds_lambda1)>bounds_angle(bounds_lambda0,bounds_lambda1)&&(bounds_lambda0=lambda)}else ranges.push(range=[bounds_lambda0=lambda,bounds_lambda1=lambda]);phi<bounds_phi0&&(bounds_phi0=phi),phi>bounds_phi1&&(bounds_phi1=phi),bounds_p0=p,bounds_lambda2=lambda}function boundsLineStart(){boundsStream.point=bounds_linePoint}function boundsLineEnd(){range[0]=bounds_lambda0,range[1]=bounds_lambda1,boundsStream.point=boundsPoint,bounds_p0=null}function boundsRingPoint(lambda,phi){if(bounds_p0){var delta=lambda-bounds_lambda2;deltaSum.add(abs(delta)>180?delta+(delta>0?360:-360):delta)}else bounds_lambda00=lambda,bounds_phi00=phi;areaStream.point(lambda,phi),bounds_linePoint(lambda,phi)}function boundsRingStart(){areaStream.lineStart()}function boundsRingEnd(){boundsRingPoint(bounds_lambda00,bounds_phi00),areaStream.lineEnd(),abs(deltaSum)>epsilon&&(bounds_lambda0=-(bounds_lambda1=180)),range[0]=bounds_lambda0,range[1]=bounds_lambda1,bounds_p0=null}function bounds_angle(lambda0,lambda1){return(lambda1-=lambda0)<0?lambda1+360:lambda1}function rangeCompare(a,b){return a[0]-b[0]}function rangeContains(range,x){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}var bounds=function(feature){var i,n,a,b,merged,deltaMax,delta;if(bounds_phi1=bounds_lambda1=-(bounds_lambda0=bounds_phi0=1/0),ranges=[],src_stream(feature,boundsStream),n=ranges.length){for(ranges.sort(rangeCompare),i=1,merged=[a=ranges[0]];i<n;++i)rangeContains(a,(b=ranges[i])[0])||rangeContains(a,b[1])?(bounds_angle(a[0],b[1])>bounds_angle(a[0],a[1])&&(a[1]=b[1]),bounds_angle(b[0],a[1])>bounds_angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(deltaMax=-1/0,i=0,a=merged[n=merged.length-1];i<=n;a=b,++i)b=merged[i],(delta=bounds_angle(a[1],b[0]))>deltaMax&&(deltaMax=delta,bounds_lambda0=b[0],bounds_lambda1=a[1])}return ranges=range=null,bounds_lambda0===1/0||bounds_phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[bounds_lambda0,bounds_phi0],[bounds_lambda1,bounds_phi1]]};function rotationIdentity(lambda,phi){return[abs(lambda)>pi?lambda+Math.round(-lambda/tau)*tau:lambda,phi]}rotationIdentity.invert=rotationIdentity;var buffer=function(){var line,lines=[];return{point:function(x,y){line.push([x,y])},lineStart:function(){lines.push(line=[])},lineEnd:noop,rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))},result:function(){var result=lines;return lines=[],line=null,result}}},pointEqual=function(a,b){return abs(a[0]-b[0])<epsilon&&abs(a[1]-b[1])<epsilon};function Intersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}var rejoin=function(segments,compareIntersection,startInside,interpolate,stream){var i,n,subject=[],clip=[];if(segments.forEach((function(segment){if(!((n=segment.length-1)<=0)){var n,x,p0=segment[0],p1=segment[n];if(pointEqual(p0,p1)){for(stream.lineStart(),i=0;i<n;++i)stream.point((p0=segment[i])[0],p0[1]);stream.lineEnd()}else subject.push(x=new Intersection(p0,segment,null,!0)),clip.push(x.o=new Intersection(p0,null,x,!1)),subject.push(x=new Intersection(p1,segment,null,!1)),clip.push(x.o=new Intersection(p1,null,x,!0))}})),subject.length){for(clip.sort(compareIntersection),rejoin_link(subject),rejoin_link(clip),i=0,n=clip.length;i<n;++i)clip[i].e=startInside=!startInside;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,stream.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(i=0,n=points.length;i<n;++i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,stream);current=current.n}else{if(isSubject)for(points=current.p.z,i=points.length-1;i>=0;--i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,stream);current=current.p}points=(current=current.o).z,isSubject=!isSubject}while(!current.v);stream.lineEnd()}}};function rejoin_link(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}var polygonContains_sum=adder();function longitude(point){return abs(point[0])<=pi?point[0]:math_sign(point[0])*((abs(point[0])+pi)%tau-pi)}var polygonContains=function(polygon,point){var lambda=longitude(point),phi=point[1],sinPhi=sin(phi),normal=[sin(lambda),-cos(lambda),0],angle=0,winding=0;polygonContains_sum.reset(),1===sinPhi?phi=halfPi+epsilon:-1===sinPhi&&(phi=-halfPi-epsilon);for(var i=0,n=polygon.length;i<n;++i)if(m=(ring=polygon[i]).length)for(var ring,m,point0=ring[m-1],lambda0=longitude(point0),phi0=point0[1]/2+quarterPi,sinPhi0=sin(phi0),cosPhi0=cos(phi0),j=0;j<m;++j,lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){var point1=ring[j],lambda1=longitude(point1),phi1=point1[1]/2+quarterPi,sinPhi1=sin(phi1),cosPhi1=cos(phi1),delta=lambda1-lambda0,sign=delta>=0?1:-1,absDelta=sign*delta,antimeridian=absDelta>pi,k=sinPhi0*sinPhi1;if(polygonContains_sum.add(atan2(k*sign*sin(absDelta),cosPhi0*cosPhi1+k*cos(absDelta))),angle+=antimeridian?delta+sign*tau:delta,antimeridian^lambda0>=lambda^lambda1>=lambda){var arc=cartesianCross(cartesian_cartesian(point0),cartesian_cartesian(point1));cartesianNormalizeInPlace(arc);var intersection=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection);var phiArc=(antimeridian^delta>=0?-1:1)*asin(intersection[2]);(phi>phiArc||phi===phiArc&&(arc[0]||arc[1]))&&(winding+=antimeridian^delta>=0?1:-1)}}return(angle<-epsilon||angle<epsilon&&polygonContains_sum<-epsilon)^1&winding},ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};var compare;1===(compare=ascending).length&&(compare=function ascendingComparator(f){return function(d,x){return ascending(f(d),x)}}(compare));var array_array=Array.prototype;array_array.slice,array_array.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var merge=function(arrays){for(var m,merged,array,n=arrays.length,i=-1,j=0;++i<n;)j+=arrays[i].length;for(merged=new Array(j);--n>=0;)for(m=(array=arrays[n]).length;--m>=0;)merged[--j]=array[m];return merged};var src_clip=function(pointVisible,clipLine,interpolate,start){return function(sink){var polygon,segments,ring,line=clipLine(sink),ringBuffer=buffer(),ringSink=clipLine(ringBuffer),polygonStarted=!1,clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=merge(segments);var startInside=polygonContains(polygon,start);segments.length?(polygonStarted||(sink.polygonStart(),polygonStarted=!0),rejoin(segments,clip_compareIntersection,startInside,interpolate,sink)):startInside&&(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd()),polygonStarted&&(sink.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){sink.polygonStart(),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd(),sink.polygonEnd()}};function point(lambda,phi){pointVisible(lambda,phi)&&sink.point(lambda,phi)}function pointLine(lambda,phi){line.point(lambda,phi)}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]),ringSink.point(lambda,phi)}function ringStart(){ringSink.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringSink.lineEnd();var i,m,segment,point,clean=ringSink.clean(),ringSegments=ringBuffer.result(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){if((m=(segment=ringSegments[0]).length-1)>0){for(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),i=0;i<m;++i)sink.point((point=segment[i])[0],point[1]);sink.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(validSegment))}return clip}};function validSegment(segment){return segment.length>1}function clip_compareIntersection(a,b){return((a=a.x)[0]<0?a[1]-halfPi-epsilon:halfPi-a[1])-((b=b.x)[0]<0?b[1]-halfPi-epsilon:halfPi-b[1])}src_clip((function(){return!0}),(function clipAntimeridianLine(stream){var clean,lambda0=NaN,phi0=NaN,sign0=NaN;return{lineStart:function(){stream.lineStart(),clean=1},point:function(lambda1,phi1){var sign1=lambda1>0?pi:-pi,delta=abs(lambda1-lambda0);abs(delta-pi)<epsilon?(stream.point(lambda0,phi0=(phi0+phi1)/2>0?halfPi:-halfPi),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),stream.point(lambda1,phi0),clean=0):sign0!==sign1&&delta>=pi&&(abs(lambda0-sign0)<epsilon&&(lambda0-=sign0*epsilon),abs(lambda1-sign1)<epsilon&&(lambda1-=sign1*epsilon),phi0=function clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1){var cosPhi0,cosPhi1,sinLambda0Lambda1=sin(lambda0-lambda1);return abs(sinLambda0Lambda1)>epsilon?atan((sin(phi0)*(cosPhi1=cos(phi1))*sin(lambda1)-sin(phi1)*(cosPhi0=cos(phi0))*sin(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2}(lambda0,phi0,lambda1,phi1),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),clean=0),stream.point(lambda0=lambda1,phi0=phi1),sign0=sign1},lineEnd:function(){stream.lineEnd(),lambda0=phi0=NaN},clean:function(){return 2-clean}}}),(function clipAntimeridianInterpolate(from,to,direction,stream){var phi;if(null==from)phi=direction*halfPi,stream.point(-pi,phi),stream.point(0,phi),stream.point(pi,phi),stream.point(pi,0),stream.point(pi,-phi),stream.point(0,-phi),stream.point(-pi,-phi),stream.point(-pi,0),stream.point(-pi,phi);else if(abs(from[0]-to[0])>epsilon){var lambda=from[0]<to[0]?pi:-pi;phi=direction*lambda/2,stream.point(-lambda,phi),stream.point(0,phi),stream.point(lambda,phi)}else stream.point(to[0],to[1])}),[-pi,-halfPi]);adder();adder(),adder();function PathContext(context){this._context=context}PathContext.prototype={_radius:4.5,pointRadius:function(_){return this._radius=_,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._context.moveTo(x,y),this._point=1;break;case 1:this._context.lineTo(x,y);break;default:this._context.moveTo(x+this._radius,y),this._context.arc(x,y,this._radius,0,tau)}},result:noop};adder();function PathString(){this._string=[]}function string_circle(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}PathString.prototype={_radius:4.5,_circle:string_circle(4.5),pointRadius:function(_){return(_=+_)!==this._radius&&(this._radius=_,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._string.push("M",x,",",y),this._point=1;break;case 1:this._string.push("L",x,",",y);break;default:null==this._circle&&(this._circle=string_circle(this._radius)),this._string.push("M",x,",",y,this._circle)}},result:function(){if(this._string.length){var result=this._string.join("");return this._string=[],result}return null}};function transformer(methods){return function(stream){var s=new TransformStream;for(var key in methods)s[key]=methods[key];return s.stream=stream,s}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};cos(30*radians);transformer({point:function(x,y){this.stream.point(x*radians,y*radians)}});function azimuthalRaw(scale){return function(x,y){var cx=cos(x),cy=cos(y),k=scale(cx*cy);return[k*cy*sin(x),k*sin(y)]}}function azimuthalInvert(angle){return function(x,y){var z=sqrt(x*x+y*y),c=angle(z),sc=sin(c),cc=cos(c);return[atan2(x*sc,z*cc),asin(z&&y*sc/z)]}}var azimuthalEqualAreaRaw=azimuthalRaw((function(cxcy){return sqrt(2/(1+cxcy))}));azimuthalEqualAreaRaw.invert=azimuthalInvert((function(z){return 2*asin(z/2)}));var azimuthalEquidistantRaw=azimuthalRaw((function(c){return(c=acos(c))&&c/sin(c)}));azimuthalEquidistantRaw.invert=azimuthalInvert((function(z){return z}));function mercatorRaw(lambda,phi){return[lambda,log(tan((halfPi+phi)/2))]}mercatorRaw.invert=function(x,y){return[x,2*atan(exp(y))-halfPi]};function equirectangularRaw(lambda,phi){return[lambda,phi]}equirectangularRaw.invert=equirectangularRaw;var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=sqrt(3)/2;function equalEarthRaw(lambda,phi){var l=asin(M*sin(phi)),l2=l*l,l6=l2*l2*l2;return[lambda*cos(l)/(M*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))),l*(A1+A2*l2+l6*(A3+A4*l2))]}equalEarthRaw.invert=function(x,y){for(var delta,l=y,l2=l*l,l6=l2*l2*l2,i=0;i<12&&(l6=(l2=(l-=delta=(l*(A1+A2*l2+l6*(A3+A4*l2))-y)/(A1+3*A2*l2+l6*(7*A3+9*A4*l2)))*l)*l2*l2,!(abs(delta)<epsilon2));++i);return[M*x*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))/cos(l),asin(sin(l)/M)]};function gnomonicRaw(x,y){var cy=cos(y),k=cos(x)*cy;return[cy*sin(x)/k,sin(y)/k]}gnomonicRaw.invert=azimuthalInvert(atan);function naturalEarth1Raw(lambda,phi){var phi2=phi*phi,phi4=phi2*phi2;return[lambda*(.8707-.131979*phi2+phi4*(phi4*(.003971*phi2-.001529*phi4)-.013791)),phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))]}naturalEarth1Raw.invert=function(x,y){var delta,phi=y,i=25;do{var phi2=phi*phi,phi4=phi2*phi2;phi-=delta=(phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))-y)/(1.007226+phi2*(.045255+phi4*(.259866*phi2-.311325-.005916*11*phi4)))}while(abs(delta)>epsilon&&--i>0);return[x/(.8707+(phi2=phi*phi)*(phi2*(phi2*phi2*phi2*(.003971-.001529*phi2)-.013791)-.131979)),phi]};function orthographicRaw(x,y){return[cos(y)*sin(x),sin(y)]}orthographicRaw.invert=azimuthalInvert(asin);function stereographicRaw(x,y){var cy=cos(y),k=1+cos(x)*cy;return[cy*sin(x)/k,sin(y)/k]}stereographicRaw.invert=azimuthalInvert((function(z){return 2*atan(z)}));function transverseMercatorRaw(lambda,phi){return[log(tan((halfPi+phi)/2)),-lambda]}transverseMercatorRaw.invert=function(x,y){return[-y,2*atan(exp(x))-halfPi]};__webpack_require__.d(__webpack_exports__,"a",(function(){return bounds}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function Map(){}function map(object,f){var map=new Map;if(object instanceof Map)object.each((function(value,key){map.set(key,value)}));else if(Array.isArray(object)){var o,i=-1,n=object.length;if(null==f)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f(o=object[i],i,object),o)}else if(object)for(var key in object)map.set(key,object[key]);return map}Map.prototype=map.prototype={constructor:Map,has:function(key){return"$"+key in this},get:function(key){return this["$"+key]},set:function(key,value){return this["$"+key]=value,this},remove:function(key){var property="$"+key;return property in this&&delete this[property]},clear:function(){for(var property in this)"$"===property[0]&&delete this[property]},keys:function(){var keys=[];for(var property in this)"$"===property[0]&&keys.push(property.slice(1));return keys},values:function(){var values=[];for(var property in this)"$"===property[0]&&values.push(this[property]);return values},entries:function(){var entries=[];for(var property in this)"$"===property[0]&&entries.push({key:property.slice(1),value:this[property]});return entries},size:function(){var size=0;for(var property in this)"$"===property[0]&&++size;return size},empty:function(){for(var property in this)if("$"===property[0])return!1;return!0},each:function(f){for(var property in this)"$"===property[0]&&f(this[property],property.slice(1),this)}};var src_map=map,src_nest=function(){var sortValues,rollup,nest,keys=[],sortKeys=[];function apply(array,depth,createResult,setResult){if(depth>=keys.length)return null!=sortValues&&array.sort(sortValues),null!=rollup?rollup(array):array;for(var keyValue,value,values,i=-1,n=array.length,key=keys[depth++],valuesByKey=src_map(),result=createResult();++i<n;)(values=valuesByKey.get(keyValue=key(value=array[i])+""))?values.push(value):valuesByKey.set(keyValue,[value]);return valuesByKey.each((function(values,key){setResult(result,key,apply(values,depth,createResult,setResult))})),result}return nest={object:function(array){return apply(array,0,createObject,setObject)},map:function(array){return apply(array,0,createMap,setMap)},entries:function(array){return function entries(map,depth){if(++depth>keys.length)return map;var array,sortKey=sortKeys[depth-1];return null!=rollup&&depth>=keys.length?array=map.entries():(array=[],map.each((function(v,k){array.push({key:k,values:entries(v,depth)})}))),null!=sortKey?array.sort((function(a,b){return sortKey(a.key,b.key)})):array}(apply(array,0,createMap,setMap),0)},key:function(d){return keys.push(d),nest},sortKeys:function(order){return sortKeys[keys.length-1]=order,nest},sortValues:function(order){return sortValues=order,nest},rollup:function(f){return rollup=f,nest}}};function createObject(){return{}}function setObject(object,key,value){object[key]=value}function createMap(){return src_map()}function setMap(map,key,value){map.set(key,value)}function Set(){}var proto=src_map.prototype;function set(object,f){var set=new Set;if(object instanceof Set)object.each((function(value){set.add(value)}));else if(object){var i=-1,n=object.length;if(null==f)for(;++i<n;)set.add(object[i]);else for(;++i<n;)set.add(f(object[i],i,object))}return set}Set.prototype=set.prototype={constructor:Set,has:proto.has,add:function(value){return this["$"+(value+="")]=value,this},remove:proto.remove,clear:proto.clear,values:proto.keys,size:proto.size,empty:proto.empty,each:proto.each};__webpack_require__.d(__webpack_exports__,"a",(function(){return src_nest}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var defineProperty=__webpack_require__(0),texture_2d=__webpack_require__(161),regenerator=__webpack_require__(11),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(18),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),assertThisInitialized=__webpack_require__(7),inherits=__webpack_require__(6),classes_texture=__webpack_require__(58),webgl_checks=__webpack_require__(39),log=__webpack_require__(25),FACES=[34069,34070,34071,34072,34073,34074],texture_cube_TextureCube=function(_Texture){function TextureCube(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,TextureCube),Object(webgl_checks.b)(gl),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(TextureCube).call(this,gl,Object.assign({},props,{target:34067})))).initialize(props),Object.seal(Object(assertThisInitialized.a)(_this)),_this}var _setCubeMapImageData;return Object(inherits.a)(TextureCube,_Texture),Object(createClass.a)(TextureCube,[{key:"initialize",value:function initialize(){var _this2=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_props$mipmaps=props.mipmaps,mipmaps=void 0===_props$mipmaps||_props$mipmaps,_props$parameters=props.parameters,parameters=void 0===_props$parameters?{}:_props$parameters;this.opts=props,this.setCubeMapImageData(props).then((function(){_this2.loaded=!0,mipmaps&&_this2.generateMipmap(props),_this2.setParameters(parameters)}))}},{key:"subImage",value:function subImage(_ref){var face=_ref.face,data=_ref.data,_ref$x=_ref.x,x=void 0===_ref$x?0:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?0:_ref$y,_ref$mipmapLevel=_ref.mipmapLevel,mipmapLevel=void 0===_ref$mipmapLevel?0:_ref$mipmapLevel;return this._subImage({target:face,data:data,x:x,y:y,mipmapLevel:mipmapLevel})}},{key:"setCubeMapImageData",value:(_setCubeMapImageData=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(_ref2){var width,height,pixels,data,_ref2$border,border,_ref2$format,format,_ref2$type,type,gl,imageDataMap,resolvedFaces,_this3=this;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return width=_ref2.width,height=_ref2.height,pixels=_ref2.pixels,data=_ref2.data,_ref2$border=_ref2.border,border=void 0===_ref2$border?0:_ref2$border,_ref2$format=_ref2.format,format=void 0===_ref2$format?6408:_ref2$format,_ref2$type=_ref2.type,type=void 0===_ref2$type?5121:_ref2$type,gl=this.gl,imageDataMap=pixels||data,_context.next=5,Promise.all(FACES.map((function(face){var facePixels=imageDataMap[face];return Promise.all(Array.isArray(facePixels)?facePixels:[facePixels])})));case 5:resolvedFaces=_context.sent,this.bind(),FACES.forEach((function(face,index){resolvedFaces[index].length>1&&!1!==_this3.opts.mipmaps&&log.a.warn("".concat(_this3.id," has mipmap and multiple LODs."))(),resolvedFaces[index].forEach((function(image,lodLevel){width&&height?gl.texImage2D(face,lodLevel,format,width,height,border,format,type,image):gl.texImage2D(face,lodLevel,format,format,type,image)}))})),this.unbind();case 9:case"end":return _context.stop()}}),_callee,this)}))),function setCubeMapImageData(_x){return _setCubeMapImageData.apply(this,arguments)})},{key:"setImageDataForFace",value:function setImageDataForFace(options){var _this4=this,face=options.face,width=options.width,height=options.height,pixels=options.pixels,data=options.data,_options$border=options.border,border=void 0===_options$border?0:_options$border,_options$format=options.format,format=void 0===_options$format?6408:_options$format,_options$type=options.type,type=void 0===_options$type?5121:_options$type,gl=this.gl,imageData=pixels||data;return this.bind(),imageData instanceof Promise?imageData.then((function(resolvedImageData){return _this4.setImageDataForFace(Object.assign({},options,{face:face,data:resolvedImageData,pixels:resolvedImageData}))})):this.width||this.height?gl.texImage2D(face,0,format,width,height,border,format,type,imageData):gl.texImage2D(face,0,format,format,type,imageData),this}}]),TextureCube}(classes_texture.a);texture_cube_TextureCube.FACES=FACES;var with_parameters=__webpack_require__(114),texture_formats=__webpack_require__(110),buffer=__webpack_require__(38),texture_3d_Texture3D=function(_Texture){function Texture3D(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Texture3D),Object(webgl_checks.a)(gl),props=Object.assign({depth:1},props,{target:32879,unpackFlipY:!1}),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Texture3D).call(this,gl,props))).initialize(props),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(Texture3D,_Texture),Object(createClass.a)(Texture3D,null,[{key:"isSupported",value:function isSupported(gl){return Object(webgl_checks.d)(gl)}}]),Object(createClass.a)(Texture3D,[{key:"setImageData",value:function setImageData(_ref){var _this2=this,_ref$level=_ref.level,level=void 0===_ref$level?0:_ref$level,_ref$dataFormat=_ref.dataFormat,dataFormat=void 0===_ref$dataFormat?6408:_ref$dataFormat,width=_ref.width,height=_ref.height,_ref$depth=_ref.depth,depth=void 0===_ref$depth?1:_ref$depth,_ref$border=_ref.border,border=void 0===_ref$border?0:_ref$border,format=_ref.format,_ref$type=_ref.type,type=void 0===_ref$type?5121:_ref$type,_ref$offset=_ref.offset,offset=void 0===_ref$offset?0:_ref$offset,data=_ref.data,_ref$parameters=_ref.parameters,parameters=void 0===_ref$parameters?{}:_ref$parameters;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Object(with_parameters.a)(this.gl,parameters,(function(){ArrayBuffer.isView(data)&&_this2.gl.texImage3D(_this2.target,level,dataFormat,width,height,depth,border,format,type,data),data instanceof buffer.a&&(_this2.gl.bindBuffer(35052,data.handle),_this2.gl.texImage3D(_this2.target,level,dataFormat,width,height,depth,border,format,type,offset))})),data&&data.byteLength)this._trackAllocatedMemory(data.byteLength,"Texture");else{var channels=texture_formats.a[this.dataFormat]||4,channelSize=texture_formats.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*channels*channelSize,"Texture")}return this.loaded=!0,this}}]),Texture3D}(classes_texture.a),classes_framebuffer=__webpack_require__(69),assert=__webpack_require__(17);function cloneTextureFrom(refTexture,overrides){Object(assert.a)(refTexture instanceof texture_2d.a||refTexture instanceof texture_cube_TextureCube||refTexture instanceof texture_3d_Texture3D);var TextureType=refTexture.constructor,gl=refTexture.gl,width=refTexture.width,height=refTexture.height,format=refTexture.format,type=refTexture.type,dataFormat=refTexture.dataFormat,border=refTexture.border,mipmaps=refTexture.mipmaps;return new TextureType(gl,Object.assign({width:width,height:height,format:format,type:type,dataFormat:dataFormat,border:border,mipmaps:mipmaps},overrides))}function toFramebuffer(texture,opts){var gl=texture.gl,width=texture.width,height=texture.height,id=texture.id;return new classes_framebuffer.a(gl,Object.assign({},opts,{id:"framebuffer-for-".concat(id),width:width,height:height,attachments:Object(defineProperty.a)({},36064,texture)}))}__webpack_require__.d(__webpack_exports__,"a",(function(){return cloneTextureFrom})),__webpack_require__.d(__webpack_exports__,"b",(function(){return toFramebuffer}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function isObjectEmpty(object){for(var key in object)return!1;return!0}function isWebGL2(gl){return Boolean(gl&&2===gl._version)}__webpack_require__.d(__webpack_exports__,"a",(function(){return isObjectEmpty})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isWebGL2}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var esm_typeof=__webpack_require__(12),toConsumableArray=__webpack_require__(16),defineProperty=__webpack_require__(0),classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),globals=__webpack_require__(108);var local_storage_LocalStorage=function(){function LocalStorage(id,defaultSettings){var type=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(classCallCheck.a)(this,LocalStorage),this.storage=function getStorage(type){try{var storage=window[type],x="__storage_test__";return storage.setItem(x,x),storage.removeItem(x),storage}catch(e){return null}}(type),this.id=id,this.config={},Object.assign(this.config,defaultSettings),this._loadConfiguration()}return Object(createClass.a)(LocalStorage,[{key:"getConfiguration",value:function getConfiguration(){return this.config}},{key:"setConfiguration",value:function setConfiguration(configuration){return this.config={},this.updateConfiguration(configuration)}},{key:"updateConfiguration",value:function updateConfiguration(configuration){if(Object.assign(this.config,configuration),this.storage){var serialized=JSON.stringify(this.config);this.storage.setItem(this.id,serialized)}return this}},{key:"_loadConfiguration",value:function _loadConfiguration(){var configuration={};if(this.storage){var serializedConfiguration=this.storage.getItem(this.id);configuration=serializedConfiguration?JSON.parse(serializedConfiguration):{}}return Object.assign(this.config,configuration),this}}]),LocalStorage}();function formatImage(image,message,scale){var maxWidth=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,imageUrl=image.src.replace(/\(/g,"%28").replace(/\)/g,"%29");image.width>maxWidth&&(scale=Math.min(scale,maxWidth/image.width));var width=image.width*scale,height=image.height*scale,style=["font-size:1px;","padding:".concat(Math.floor(height/2),"px ").concat(Math.floor(width/2),"px;"),"line-height:".concat(height,"px;"),"background:url(".concat(imageUrl,");"),"background-size:".concat(width,"px ").concat(height,"px;"),"color:transparent;"].join("");return["".concat(message," %c+"),style]}var COLOR={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function getColor(color){return"string"==typeof color?COLOR[color.toUpperCase()]||COLOR.WHITE:color}function assert_assert(condition,message){if(!condition)throw new Error(message||"Assertion failed")}var hi_res_timestamp=__webpack_require__(92);__webpack_require__.d(__webpack_exports__,"a",(function(){return log_Log}));var originalConsole={debug:globals.b&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},DEFAULT_SETTINGS={enabled:!1,priority:0};function noop(){}var cache={};var log_Log=function(){function Log(){var id=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;Object(classCallCheck.a)(this,Log),this.id=id,this.VERSION=globals.a,this._startTs=Object(hi_res_timestamp.a)(),this._deltaTs=Object(hi_res_timestamp.a)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new local_storage_LocalStorage("__probe-".concat(this.id,"__"),DEFAULT_SETTINGS),this.userData={},this.timeStamp("".concat(this.id," started")),function autobind(obj){var predefined=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],proto=Object.getPrototypeOf(obj),propNames=Object.getOwnPropertyNames(proto),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function _loop(){var key=_step.value;"function"==typeof obj[key]&&(predefined.find((function(name){return key===name}))||(obj[key]=obj[key].bind(obj)))},_iterator=propNames[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}(this),Object.seal(this)}return Object(createClass.a)(Log,[{key:"isEnabled",value:function isEnabled(){return this._storage.config.enabled}},{key:"getPriority",value:function getPriority(){return this._storage.config.priority}},{key:"getLevel",value:function getLevel(){return this._storage.config.priority}},{key:"getTotal",value:function getTotal(){return Number((Object(hi_res_timestamp.a)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function getDelta(){return Number((Object(hi_res_timestamp.a)()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function enable(){var enabled=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:enabled}),this}},{key:"setLevel",value:function setLevel(level){return this._storage.updateConfiguration({priority:level}),this}},{key:"assert",value:function assert(condition,message){assert_assert(condition,message)}},{key:"warn",value:function warn(message){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return this._getLogFunction({message:message,args:args,method:originalConsole.warn,once:!0})}},{key:"error",value:function error(message){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];return this._getLogFunction({message:message,args:args,method:originalConsole.error})}},{key:"deprecated",value:function deprecated(oldUsage,newUsage){return this.warn("`".concat(oldUsage,"` is deprecated and will be removed in a later version. Use `").concat(newUsage,"` instead"))}},{key:"removed",value:function removed(oldUsage,newUsage){return this.error("`".concat(oldUsage,"` has been removed. Use `").concat(newUsage,"` instead"))}},{key:"probe",value:function probe(priority,message){for(var _len3=arguments.length,args=new Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++)args[_key3-2]=arguments[_key3];return this._getLogFunction({priority:priority,message:message,args:args,method:originalConsole.log,time:!0,once:!0})}},{key:"log",value:function log(priority,message){for(var _len4=arguments.length,args=new Array(_len4>2?_len4-2:0),_key4=2;_key4<_len4;_key4++)args[_key4-2]=arguments[_key4];return this._getLogFunction({priority:priority,message:message,args:args,method:originalConsole.debug})}},{key:"info",value:function info(priority,message){for(var _len5=arguments.length,args=new Array(_len5>2?_len5-2:0),_key5=2;_key5<_len5;_key5++)args[_key5-2]=arguments[_key5];return this._getLogFunction({priority:priority,message:message,args:args,method:console.info})}},{key:"once",value:function once(priority,message){for(var _len6=arguments.length,args=new Array(_len6>2?_len6-2:0),_key6=2;_key6<_len6;_key6++)args[_key6-2]=arguments[_key6];return this._getLogFunction({priority:priority,message:message,args:args,method:originalConsole.debug||originalConsole.info,once:!0})}},{key:"table",value:function table(priority,_table,columns){if(_table){var tag=function getTableHeader(table){for(var key in table)for(var title in table[key])return title||"untitled";return"empty"}(_table);return this._getLogFunction({priority:priority,message:_table,args:columns&&[columns],tag:tag,method:console.table||noop})}return noop}},{key:"image",value:function image(_ref2){var priority=_ref2.priority,_image=_ref2.image,_ref2$message=_ref2.message,message=void 0===_ref2$message?"":_ref2$message,_ref2$scale=_ref2.scale,scale=void 0===_ref2$scale?1:_ref2$scale;return priority>this.getPriority()?noop:globals.b?this._logImageInBrowser({image:_image,message:message,scale:scale}):this._logImageInNode({image:_image,message:message,scale:scale})}},{key:"settings",value:function settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function get(setting){return this._storage.config[setting]}},{key:"set",value:function set(setting,value){this._storage.updateConfiguration(Object(defineProperty.a)({},setting,value))}},{key:"_logImageInNode",value:function _logImageInNode(_ref3){var image=_ref3.image,_ref3$scale=(_ref3.message,_ref3.scale),scale=void 0===_ref3$scale?1:_ref3$scale,asciify=null;try{asciify=__webpack_require__(762)}catch(error){}return asciify?function(){return asciify(image,{fit:"box",width:"".concat(Math.round(80*scale),"%")}).then((function(data){return console.log(data)}))}:noop}},{key:"_logImageInBrowser",value:function _logImageInBrowser(_ref4){var image=_ref4.image,_ref4$message=_ref4.message,message=void 0===_ref4$message?"":_ref4$message,_ref4$scale=_ref4.scale,scale=void 0===_ref4$scale?1:_ref4$scale;if("string"==typeof image){var img=new Image;return img.onload=function(){var _console,args=formatImage(img,message,scale);(_console=console).log.apply(_console,Object(toConsumableArray.a)(args))},img.src=image,noop}var _console2,element=image.nodeName||"";if("img"===element.toLowerCase())return(_console2=console).log.apply(_console2,Object(toConsumableArray.a)(formatImage(image,message,scale))),noop;if("canvas"===element.toLowerCase()){var _img=new Image;return _img.onload=function(){var _console3;return(_console3=console).log.apply(_console3,Object(toConsumableArray.a)(formatImage(_img,message,scale)))},_img.src=image.toDataURL(),noop}return noop}},{key:"time",value:function time(priority,message){return this._getLogFunction({priority:priority,message:message,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function timeEnd(priority,message){return this._getLogFunction({priority:priority,message:message,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function timeStamp(priority,message){return this._getLogFunction({priority:priority,message:message,method:console.timeStamp||noop})}},{key:"group",value:function group(priority,message){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},_opts=opts=this._normalizeArguments({priority:priority,message:message,opts:opts}),collapsed=_opts.collapsed;return this._getLogFunction({priority:priority,message:message,opts:opts,method:(collapsed?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function groupCollapsed(priority,message){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(priority,message,Object.assign({},opts,{collapsed:!0}))}},{key:"groupEnd",value:function groupEnd(priority){return this._getLogFunction({priority:priority,message:"",method:console.groupEnd||noop})}},{key:"withGroup",value:function withGroup(priority,message,func){var opts=this._normalizeArguments({priority:priority,message:message});this.group(opts);try{func()}finally{this.groupEnd(opts.message)}}},{key:"trace",value:function trace(){console.trace&&console.trace()}},{key:"_shouldLog",value:function _shouldLog(priority){return 0===(priority=this._normalizePriority(priority))||this.isEnabled()&&this.getPriority()>=priority}},{key:"_getElapsedTime",value:function _getElapsedTime(){var total=this.getTotal(),delta=this.getDelta();return this._deltaTs=Object(hi_res_timestamp.a)(),{total:total,delta:delta}}},{key:"_getLogFunction",value:function _getLogFunction(opts){if(this._shouldLog(opts.priority)){var method=opts.method;opts=this._parseArguments(opts),assert_assert(method);var message=opts.message,tag=opts.tag||opts.message;if(opts.once){if(cache[tag])return noop;cache[tag]=Object(hi_res_timestamp.a)()}return message=this._decorateMessage(message,opts),method.bind.apply(method,[console,message].concat(Object(toConsumableArray.a)(opts.args)))}return noop}},{key:"_parseArguments",value:function _parseArguments(options){var normOpts=this._normalizeArguments(options),_this$_getElapsedTime=this._getElapsedTime(),delta=_this$_getElapsedTime.delta,total=_this$_getElapsedTime.total;return Object.assign(options,normOpts,{delta:delta,total:total})}},{key:"_normalizePriority",value:function _normalizePriority(priority){var resolvedPriority;switch(Object(esm_typeof.a)(priority)){case"number":resolvedPriority=priority;break;case"object":resolvedPriority=priority.priority||0;break;default:resolvedPriority=0}return assert_assert(Number.isFinite(resolvedPriority)&&resolvedPriority>=0),resolvedPriority}},{key:"_normalizeArguments",value:function _normalizeArguments(_ref5){var priority=_ref5.priority,message=_ref5.message,_ref5$args=_ref5.args,args=void 0===_ref5$args?[]:_ref5$args,opts=_ref5.opts,newOpts={priority:this._normalizePriority(priority),message:message,args:args};switch(Object(esm_typeof.a)(priority)){case"string":case"function":void 0!==message&&args.unshift(message),Object.assign(newOpts,{message:priority});break;case"object":Object.assign(newOpts,priority)}return"function"==typeof newOpts.message&&(newOpts.message=this._shouldLog(newOpts.priority)?newOpts.message():""),assert_assert("string"==typeof newOpts.message||"object"===Object(esm_typeof.a)(newOpts.message)),Object.assign(newOpts,opts)}},{key:"_decorateMessage",value:function _decorateMessage(message,opts){if("string"==typeof message){var time="";if(opts.time)time=function leftPad(string){var length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,padLength=Math.max(length-string.length,0);return"".concat(" ".repeat(padLength)).concat(string)}(function formatTime(ms){return ms<10?"".concat(ms.toFixed(2),"ms"):ms<100?"".concat(ms.toFixed(1),"ms"):ms<1e3?"".concat(ms.toFixed(0),"ms"):"".concat((ms/1e3).toFixed(2),"s")}(this._getElapsedTime().total));message=function addColor(string,color,background){return globals.b||"string"!=typeof string||(color&&(color=getColor(color),string="[".concat(color,"m").concat(string,"[39m")),background&&(color=getColor(background),string="[".concat(background+10,"m").concat(string,"[49m"))),string}(message=opts.time?"".concat(this.id,": ").concat(time,"  ").concat(message):"".concat(this.id,": ").concat(message),opts.color,opts.background)}return message}},{key:"priority",set:function set(newPriority){return this._storage.updateConfiguration({priority:newPriority}),this},get:function get(){return this._storage.config.priority}}]),Log}();log_Log.VERSION=globals.a},,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(265),__webpack_require__(461),__webpack_require__(548)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(462)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(463),__webpack_require__(464),__webpack_require__(465)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */!function(root,factory){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){var isRegex,isString,$Array=Array,ArrayPrototype=$Array.prototype,$Object=Object,ObjectPrototype=$Object.prototype,$Function=Function,FunctionPrototype=$Function.prototype,$String=String,StringPrototype=$String.prototype,$Number=Number,NumberPrototype=$Number.prototype,array_slice=ArrayPrototype.slice,array_splice=ArrayPrototype.splice,array_push=ArrayPrototype.push,array_unshift=ArrayPrototype.unshift,array_concat=ArrayPrototype.concat,array_join=ArrayPrototype.join,call=FunctionPrototype.call,apply=FunctionPrototype.apply,max=Math.max,min=Math.min,to_string=ObjectPrototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,fnToStr=Function.prototype.toString,constructorRegex=/^\s*class /,isES6ClassFn=function isES6ClassFn(value){try{var spaceStripped=fnToStr.call(value).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return constructorRegex.test(spaceStripped)}catch(e){return!1}},tryFunctionObject=function tryFunctionObject(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}},fnClass="[object Function]",genClass="[object GeneratorFunction]",isCallable=function isCallable(value){if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if(hasToStringTag)return tryFunctionObject(value);if(isES6ClassFn(value))return!1;var strClass=to_string.call(value);return strClass===fnClass||strClass===genClass},regexExec=RegExp.prototype.exec,tryRegexExec=function tryRegexExec(value){try{return regexExec.call(value),!0}catch(e){return!1}},regexClass="[object RegExp]";isRegex=function isRegex(value){return"object"==typeof value&&(hasToStringTag?tryRegexExec(value):to_string.call(value)===regexClass)};var strValue=String.prototype.valueOf,tryStringObject=function tryStringObject(value){try{return strValue.call(value),!0}catch(e){return!1}},stringClass="[object String]";isString=function isString(value){return"string"==typeof value||"object"==typeof value&&(hasToStringTag?tryStringObject(value):to_string.call(value)===stringClass)};var supportsDescriptors=$Object.defineProperty&&function(){try{var obj={};for(var _ in $Object.defineProperty(obj,"x",{enumerable:!1,value:obj}),obj)return!1;return obj.x===obj}catch(e){return!1}}(),defineProperties=(has=ObjectPrototype.hasOwnProperty,defineProperty=supportsDescriptors?function(object,name,method,forceAssign){!forceAssign&&name in object||$Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:method})}:function(object,name,method,forceAssign){!forceAssign&&name in object||(object[name]=method)},function defineProperties(object,map,forceAssign){for(var name in map)has.call(map,name)&&defineProperty(object,name,map[name],forceAssign)}),isPrimitive=function isPrimitive(input){var type=typeof input;return null===input||"object"!==type&&"function"!==type},isActualNaN=$Number.isNaN||function isActualNaN(x){return x!=x},ES={ToInteger:function ToInteger(num){var n=+num;return isActualNaN(n)?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n},ToPrimitive:function ToPrimitive(input){var val,valueOf,toStr;if(isPrimitive(input))return input;if(valueOf=input.valueOf,isCallable(valueOf)&&(val=valueOf.call(input),isPrimitive(val)))return val;if(toStr=input.toString,isCallable(toStr)&&(val=toStr.call(input),isPrimitive(val)))return val;throw new TypeError},ToObject:function(o){if(null==o)throw new TypeError("can't convert "+o+" to object");return $Object(o)},ToUint32:function ToUint32(x){return x>>>0}},Empty=function Empty(){};var has,defineProperty;defineProperties(FunctionPrototype,{bind:function bind(that){var target=this;if(!isCallable(target))throw new TypeError("Function.prototype.bind called on incompatible "+target);for(var bound,args=array_slice.call(arguments,1),binder=function(){if(this instanceof bound){var result=apply.call(target,this,array_concat.call(args,array_slice.call(arguments)));return $Object(result)===result?result:this}return apply.call(target,that,array_concat.call(args,array_slice.call(arguments)))},boundLength=max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)array_push.call(boundArgs,"$"+i);return bound=$Function("binder","return function ("+array_join.call(boundArgs,",")+"){ return binder.apply(this, arguments); }")(binder),target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound}});var owns=call.bind(ObjectPrototype.hasOwnProperty),toStr=call.bind(ObjectPrototype.toString),arraySlice=call.bind(array_slice),arraySliceApply=apply.bind(array_slice);if("object"==typeof document&&document&&document.documentElement)try{arraySlice(document.documentElement.childNodes)}catch(e){var origArraySlice=arraySlice,origArraySliceApply=arraySliceApply;arraySlice=function arraySliceIE(arr){for(var r=[],i=arr.length;i-- >0;)r[i]=arr[i];return origArraySliceApply(r,origArraySlice(arguments,1))},arraySliceApply=function arraySliceApplyIE(arr,args){return origArraySliceApply(arraySlice(arr),args)}}var strSlice=call.bind(StringPrototype.slice),strSplit=call.bind(StringPrototype.split),strIndexOf=call.bind(StringPrototype.indexOf),pushCall=call.bind(array_push),isEnum=call.bind(ObjectPrototype.propertyIsEnumerable),arraySort=call.bind(ArrayPrototype.sort),isArray=$Array.isArray||function isArray(obj){return"[object Array]"===toStr(obj)},hasUnshiftReturnValueBug=1!==[].unshift(0);defineProperties(ArrayPrototype,{unshift:function(){return array_unshift.apply(this,arguments),this.length}},hasUnshiftReturnValueBug),defineProperties($Array,{isArray:isArray});var boxedString=$Object("a"),splitString="a"!==boxedString[0]||!(0 in boxedString),properlyBoxesContext=function properlyBoxed(method){var properlyBoxesNonStrict=!0,properlyBoxesStrict=!0,threwException=!1;if(method)try{method.call("foo",(function(_,__,context){"object"!=typeof context&&(properlyBoxesNonStrict=!1)})),method.call([1],(function(){properlyBoxesStrict="string"==typeof this}),"x")}catch(e){threwException=!0}return!!method&&!threwException&&properlyBoxesNonStrict&&properlyBoxesStrict};defineProperties(ArrayPrototype,{forEach:function forEach(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,i=-1,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++i<length;)i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object))}},!properlyBoxesContext(ArrayPrototype.forEach)),defineProperties(ArrayPrototype,{map:function map(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=$Array(length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.map callback must be a function");for(var i=0;i<length;i++)i in self&&(result[i]=void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object));return result}},!properlyBoxesContext(ArrayPrototype.map)),defineProperties(ArrayPrototype,{filter:function filter(callbackfn){var value,T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=[];if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.filter callback must be a function");for(var i=0;i<length;i++)i in self&&(value=self[i],(void 0===T?callbackfn(value,i,object):callbackfn.call(T,value,i,object))&&pushCall(result,value));return result}},!properlyBoxesContext(ArrayPrototype.filter)),defineProperties(ArrayPrototype,{every:function every(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.every callback must be a function");for(var i=0;i<length;i++)if(i in self&&!(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!1;return!0}},!properlyBoxesContext(ArrayPrototype.every)),defineProperties(ArrayPrototype,{some:function some(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.some callback must be a function");for(var i=0;i<length;i++)if(i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!0;return!1}},!properlyBoxesContext(ArrayPrototype.some));var reduceCoercesToObject=!1;ArrayPrototype.reduce&&(reduceCoercesToObject="object"==typeof ArrayPrototype.reduce.call("es5",(function(_,__,___,list){return list})));defineProperties(ArrayPrototype,{reduce:function reduce(callbackfn){var object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;i<length;i++)i in self&&(result=callbackfn(result,self[i],i,object));return result}},!reduceCoercesToObject);var reduceRightCoercesToObject=!1;ArrayPrototype.reduceRight&&(reduceRightCoercesToObject="object"==typeof ArrayPrototype.reduceRight.call("es5",(function(_,__,___,list){return list})));defineProperties(ArrayPrototype,{reduceRight:function reduceRight(callbackfn){var result,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(--i<0)throw new TypeError("reduceRight of empty array with no initial value")}if(i<0)return result;do{i in self&&(result=callbackfn(result,self[i],i,object))}while(i--);return result}},!reduceRightCoercesToObject);var hasFirefox2IndexOfBug=ArrayPrototype.indexOf&&-1!==[0,1].indexOf(1,2);defineProperties(ArrayPrototype,{indexOf:function indexOf(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=0;for(arguments.length>1&&(i=ES.ToInteger(arguments[1])),i=i>=0?i:max(0,length+i);i<length;i++)if(i in self&&self[i]===searchElement)return i;return-1}},hasFirefox2IndexOfBug);var hasFirefox2LastIndexOfBug=ArrayPrototype.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);defineProperties(ArrayPrototype,{lastIndexOf:function lastIndexOf(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=length-1;for(arguments.length>1&&(i=min(i,ES.ToInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&searchElement===self[i])return i;return-1}},hasFirefox2LastIndexOfBug);var spliceNoopReturnsEmptyArray=(a=[1,2],result=a.splice(),2===a.length&&isArray(result)&&0===result.length);var a,result;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){return 0===arguments.length?[]:array_splice.apply(this,arguments)}},!spliceNoopReturnsEmptyArray);var spliceWorksWithEmptyObject=(obj={},ArrayPrototype.splice.call(obj,0,0,1),1===obj.length);var obj;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){if(0===arguments.length)return[];var args=arguments;return this.length=max(ES.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof deleteCount&&((args=arraySlice(arguments)).length<2?pushCall(args,this.length-start):args[1]=ES.ToInteger(deleteCount)),array_splice.apply(this,args)}},!spliceWorksWithEmptyObject);var spliceWorksWithLargeSparseArrays=(arr=new $Array(1e5),arr[8]="x",arr.splice(1,1),7===arr.indexOf("x")),spliceWorksWithSmallSparseArrays=function(){var arr=[];return arr[256]="a",arr.splice(257,0,"b"),"a"===arr[256]}();var arr;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){for(var from,O=ES.ToObject(this),A=[],len=ES.ToUint32(O.length),relativeStart=ES.ToInteger(start),actualStart=relativeStart<0?max(len+relativeStart,0):min(relativeStart,len),actualDeleteCount=min(max(ES.ToInteger(deleteCount),0),len-actualStart),k=0;k<actualDeleteCount;)from=$String(actualStart+k),owns(O,from)&&(A[k]=O[from]),k+=1;var to,items=arraySlice(arguments,2),itemCount=items.length;if(itemCount<actualDeleteCount){k=actualStart;for(var maxK=len-actualDeleteCount;k<maxK;)from=$String(k+actualDeleteCount),to=$String(k+itemCount),owns(O,from)?O[to]=O[from]:delete O[to],k+=1;k=len;for(var minK=len-actualDeleteCount+itemCount;k>minK;)delete O[k-1],k-=1}else if(itemCount>actualDeleteCount)for(k=len-actualDeleteCount;k>actualStart;)from=$String(k+actualDeleteCount-1),to=$String(k+itemCount-1),owns(O,from)?O[to]=O[from]:delete O[to],k-=1;k=actualStart;for(var i=0;i<items.length;++i)O[k]=items[i],k+=1;return O.length=len-actualDeleteCount+itemCount,A}},!spliceWorksWithLargeSparseArrays||!spliceWorksWithSmallSparseArrays);var hasStringJoinBug,originalJoin=ArrayPrototype.join;try{hasStringJoinBug="1,2,3"!==Array.prototype.join.call("123",",")}catch(e){hasStringJoinBug=!0}hasStringJoinBug&&defineProperties(ArrayPrototype,{join:function join(separator){var sep=void 0===separator?",":separator;return originalJoin.call(isString(this)?strSplit(this,""):this,sep)}},hasStringJoinBug);var hasJoinUndefinedBug="1,2"!==[1,2].join(void 0);hasJoinUndefinedBug&&defineProperties(ArrayPrototype,{join:function join(separator){var sep=void 0===separator?",":separator;return originalJoin.call(this,sep)}},hasJoinUndefinedBug);var pushShim=function push(item){for(var O=ES.ToObject(this),n=ES.ToUint32(O.length),i=0;i<arguments.length;)O[n+i]=arguments[i],i+=1;return O.length=n+i,n+i},pushIsNotGeneric=function(){var obj={};return 1!==Array.prototype.push.call(obj,void 0)||1!==obj.length||void 0!==obj[0]||!owns(obj,0)}();defineProperties(ArrayPrototype,{push:function push(item){return isArray(this)?array_push.apply(this,arguments):pushShim.apply(this,arguments)}},pushIsNotGeneric);var pushUndefinedIsWeird=function(){var arr=[];return 1!==arr.push(void 0)||1!==arr.length||void 0!==arr[0]||!owns(arr,0)}();defineProperties(ArrayPrototype,{push:pushShim},pushUndefinedIsWeird),defineProperties(ArrayPrototype,{slice:function(start,end){var arr=isString(this)?strSplit(this,""):this;return arraySliceApply(arr,arguments)}},splitString);var sortIgnoresNonFunctions=function(){try{[1,2].sort(null)}catch(e){try{[1,2].sort({})}catch(e2){return!1}}return!0}(),sortThrowsOnRegex=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),sortIgnoresUndefined=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();defineProperties(ArrayPrototype,{sort:function sort(compareFn){if(void 0===compareFn)return arraySort(this);if(!isCallable(compareFn))throw new TypeError("Array.prototype.sort callback must be a function");return arraySort(this,compareFn)}},sortIgnoresNonFunctions||!sortIgnoresUndefined||!sortThrowsOnRegex);var hasDontEnumBug=!isEnum({toString:null},"toString"),hasProtoEnumBug=isEnum((function(){}),"prototype"),hasStringEnumBug=!owns("x","0"),equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0,$width:!0,$height:!0,$top:!0,$localStorage:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{!excludedKeys["$"+k]&&owns(window,k)&&null!==window[k]&&"object"==typeof window[k]&&equalsConstructorPrototype(window[k])}catch(e){return!0}return!1}(),equalsConstructorPrototypeIfNotBuggy=function(object){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(object);try{return equalsConstructorPrototype(object)}catch(e){return!1}},dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length,isStandardArguments=function isArguments(value){return"[object Arguments]"===toStr(value)},isLegacyArguments=function isArguments(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&!isArray(value)&&isCallable(value.callee)},isArguments=isStandardArguments(arguments)?isStandardArguments:isLegacyArguments;defineProperties($Object,{keys:function keys(object){var isFn=isCallable(object),isArgs=isArguments(object),isObject=null!==object&&"object"==typeof object,isStr=isObject&&isString(object);if(!isObject&&!isFn&&!isArgs)throw new TypeError("Object.keys called on a non-object");var theKeys=[],skipProto=hasProtoEnumBug&&isFn;if(isStr&&hasStringEnumBug||isArgs)for(var i=0;i<object.length;++i)pushCall(theKeys,$String(i));if(!isArgs)for(var name in object)skipProto&&"prototype"===name||!owns(object,name)||pushCall(theKeys,$String(name));if(hasDontEnumBug)for(var skipConstructor=equalsConstructorPrototypeIfNotBuggy(object),j=0;j<dontEnumsLength;j++){var dontEnum=dontEnums[j];skipConstructor&&"constructor"===dontEnum||!owns(object,dontEnum)||pushCall(theKeys,dontEnum)}return theKeys}});var keysWorksWithArguments=$Object.keys&&function(){return 2===$Object.keys(arguments).length}(1,2),keysHasArgumentsLengthBug=$Object.keys&&function(){var argKeys=$Object.keys(arguments);return 1!==arguments.length||1!==argKeys.length||1!==argKeys[0]}(1),originalKeys=$Object.keys;defineProperties($Object,{keys:function keys(object){return isArguments(object)?originalKeys(arraySlice(object)):originalKeys(object)}},!keysWorksWithArguments||keysHasArgumentsLengthBug);var hasToDateStringFormatBug,hasToStringFormatBug,hasNegativeMonthYearBug=0!==new Date(-0xc782b5b342b24).getUTCMonth(),aNegativeTestDate=new Date(-0x55d318d56a724),aPositiveTestDate=new Date(14496624e5),hasToUTCStringFormatBug="Mon, 01 Jan -45875 11:59:59 GMT"!==aNegativeTestDate.toUTCString(),timeZoneOffset=aNegativeTestDate.getTimezoneOffset();timeZoneOffset<-720?(hasToDateStringFormatBug="Tue Jan 02 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(aPositiveTestDate))):(hasToDateStringFormatBug="Mon Jan 01 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(aPositiveTestDate)));var originalGetFullYear=call.bind(Date.prototype.getFullYear),originalGetMonth=call.bind(Date.prototype.getMonth),originalGetDate=call.bind(Date.prototype.getDate),originalGetUTCFullYear=call.bind(Date.prototype.getUTCFullYear),originalGetUTCMonth=call.bind(Date.prototype.getUTCMonth),originalGetUTCDate=call.bind(Date.prototype.getUTCDate),originalGetUTCDay=call.bind(Date.prototype.getUTCDay),originalGetUTCHours=call.bind(Date.prototype.getUTCHours),originalGetUTCMinutes=call.bind(Date.prototype.getUTCMinutes),originalGetUTCSeconds=call.bind(Date.prototype.getUTCSeconds),originalGetUTCMilliseconds=call.bind(Date.prototype.getUTCMilliseconds),dayName=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthName=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysInMonth=function daysInMonth(month,year){return originalGetDate(new Date(year,month,0))};defineProperties(Date.prototype,{getFullYear:function getFullYear(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this);return year<0&&originalGetMonth(this)>11?year+1:year},getMonth:function getMonth(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this);return year<0&&month>11?0:month},getDate:function getDate(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this),date=originalGetDate(this);return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date},getUTCFullYear:function getUTCFullYear(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this);return year<0&&originalGetUTCMonth(this)>11?year+1:year},getUTCMonth:function getUTCMonth(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);return year<0&&month>11?0:month},getUTCDate:function getUTCDate(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this),date=originalGetUTCDate(this);return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date}},hasNegativeMonthYearBug),defineProperties(Date.prototype,{toUTCString:function toUTCString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=originalGetUTCDay(this),date=originalGetUTCDate(this),month=originalGetUTCMonth(this),year=originalGetUTCFullYear(this),hour=originalGetUTCHours(this),minute=originalGetUTCMinutes(this),second=originalGetUTCSeconds(this);return dayName[day]+", "+(date<10?"0"+date:date)+" "+monthName[month]+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"}},hasNegativeMonthYearBug||hasToUTCStringFormatBug),defineProperties(Date.prototype,{toDateString:function toDateString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear();return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year}},hasNegativeMonthYearBug||hasToDateStringFormatBug),(hasNegativeMonthYearBug||hasToStringFormatBug)&&(Date.prototype.toString=function toString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear(),hour=this.getHours(),minute=this.getMinutes(),second=this.getSeconds(),timezoneOffset=this.getTimezoneOffset(),hoursOffset=Math.floor(Math.abs(timezoneOffset)/60),minutesOffset=Math.floor(Math.abs(timezoneOffset)%60);return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"+(timezoneOffset>0?"-":"+")+(hoursOffset<10?"0"+hoursOffset:hoursOffset)+(minutesOffset<10?"0"+minutesOffset:minutesOffset)},supportsDescriptors&&$Object.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var negativeDate=-621987552e5,negativeYearString="-000001",hasNegativeDateBug=Date.prototype.toISOString&&-1===new Date(negativeDate).toISOString().indexOf(negativeYearString),hasSafari51DateBug=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),getTime=call.bind(Date.prototype.getTime);defineProperties(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(getTime(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);year+=Math.floor(month/12);var result=[(month=(month%12+12)%12)+1,originalGetUTCDate(this),originalGetUTCHours(this),originalGetUTCMinutes(this),originalGetUTCSeconds(this)];year=(year<0?"-":year>9999?"+":"")+strSlice("00000"+Math.abs(year),0<=year&&year<=9999?-4:-6);for(var i=0;i<result.length;++i)result[i]=strSlice("00"+result[i],-2);return year+"-"+arraySlice(result,0,2).join("-")+"T"+arraySlice(result,2).join(":")+"."+strSlice("000"+originalGetUTCMilliseconds(this),-3)+"Z"}},hasNegativeDateBug||hasSafari51DateBug);var dateToJSONIsSupported=function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(negativeDate).toJSON().indexOf(negativeYearString)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}();dateToJSONIsSupported||(Date.prototype.toJSON=function toJSON(key){var O=$Object(this),tv=ES.ToPrimitive(O);if("number"==typeof tv&&!isFinite(tv))return null;var toISO=O.toISOString;if(!isCallable(toISO))throw new TypeError("toISOString property is not callable");return toISO.call(O)});var supportsExtendedYears=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),acceptsInvalidDates=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),doesNotParseY2KNewYear=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(doesNotParseY2KNewYear||acceptsInvalidDates||!supportsExtendedYears){var maxSafeUnsigned32Bit=Math.pow(2,31)-1,hasSafariSignedIntBug=isActualNaN(new Date(1970,0,1,0,0,0,maxSafeUnsigned32Bit+1).getTime());Date=function(NativeDate){var DateShim=function Date(Y,M,D,h,m,s,ms){var date,length=arguments.length;if(this instanceof NativeDate){var seconds=s,millis=ms;if(hasSafariSignedIntBug&&length>=7&&ms>maxSafeUnsigned32Bit){var msToShift=Math.floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=Math.floor(msToShift/1e3);seconds+=sToShift,millis-=1e3*sToShift}date=1===length&&$String(Y)===Y?new NativeDate(DateShim.parse(Y)):length>=7?new NativeDate(Y,M,D,h,m,seconds,millis):length>=6?new NativeDate(Y,M,D,h,m,seconds):length>=5?new NativeDate(Y,M,D,h,m):length>=4?new NativeDate(Y,M,D,h):length>=3?new NativeDate(Y,M,D):length>=2?new NativeDate(Y,M):length>=1?new NativeDate(Y instanceof NativeDate?+Y:Y):new NativeDate}else date=NativeDate.apply(this,arguments);return isPrimitive(date)||defineProperties(date,{constructor:DateShim},!0),date},isoDateExpression=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),months=[0,31,59,90,120,151,181,212,243,273,304,334,365],dayFromMonth=function dayFromMonth(year,month){var t=month>1?1:0;return months[month]+Math.floor((year-1969+t)/4)-Math.floor((year-1901+t)/100)+Math.floor((year-1601+t)/400)+365*(year-1970)},toUTC=function toUTC(t){var s=0,ms=t;if(hasSafariSignedIntBug&&ms>maxSafeUnsigned32Bit){var msToShift=Math.floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=Math.floor(msToShift/1e3);s+=sToShift,ms-=1e3*sToShift}return $Number(new NativeDate(1970,0,1,0,0,s,ms))};for(var key in NativeDate)owns(NativeDate,key)&&(DateShim[key]=NativeDate[key]);defineProperties(DateShim,{now:NativeDate.now,UTC:NativeDate.UTC},!0),DateShim.prototype=NativeDate.prototype,defineProperties(DateShim.prototype,{constructor:DateShim},!0);return defineProperties(DateShim,{parse:function parse(string){var match=isoDateExpression.exec(string);if(match){var result,year=$Number(match[1]),month=$Number(match[2]||1)-1,day=$Number(match[3]||1)-1,hour=$Number(match[4]||0),minute=$Number(match[5]||0),second=$Number(match[6]||0),millisecond=Math.floor(1e3*$Number(match[7]||0)),isLocalTime=Boolean(match[4]&&!match[8]),signOffset="-"===match[9]?1:-1,hourOffset=$Number(match[10]||0),minuteOffset=$Number(match[11]||0),hasMinutesOrSecondsOrMilliseconds=minute>0||second>0||millisecond>0;return hour<(hasMinutesOrSecondsOrMilliseconds?24:25)&&minute<60&&second<60&&millisecond<1e3&&month>-1&&month<12&&hourOffset<24&&minuteOffset<60&&day>-1&&day<dayFromMonth(year,month+1)-dayFromMonth(year,month)&&(result=1e3*(60*((result=60*(24*(dayFromMonth(year,month)+day)+hour+hourOffset*signOffset))+minute+minuteOffset*signOffset)+second)+millisecond,isLocalTime&&(result=toUTC(result)),-864e13<=result&&result<=864e13)?result:NaN}return NativeDate.parse.apply(this,arguments)}}),DateShim}(Date)}Date.now||(Date.now=function now(){return(new Date).getTime()});var hasToFixedBugs=NumberPrototype.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),toFixedHelpers={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(n,c){for(var i=-1,c2=c;++i<toFixedHelpers.size;)c2+=n*toFixedHelpers.data[i],toFixedHelpers.data[i]=c2%toFixedHelpers.base,c2=Math.floor(c2/toFixedHelpers.base)},divide:function divide(n){for(var i=toFixedHelpers.size,c=0;--i>=0;)c+=toFixedHelpers.data[i],toFixedHelpers.data[i]=Math.floor(c/n),c=c%n*toFixedHelpers.base},numToString:function numToString(){for(var i=toFixedHelpers.size,s="";--i>=0;)if(""!==s||0===i||0!==toFixedHelpers.data[i]){var t=$String(toFixedHelpers.data[i]);""===s?s=t:s+=strSlice("0000000",0,7-t.length)+t}return s},pow:function pow(x,n,acc){return 0===n?acc:n%2==1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)},log:function log(x){for(var n=0,x2=x;x2>=4096;)n+=12,x2/=4096;for(;x2>=2;)n+=1,x2/=2;return n}},toFixedShim=function toFixed(fractionDigits){var f,x,s,m,e,z,j,k;if(f=$Number(fractionDigits),(f=isActualNaN(f)?0:Math.floor(f))<0||f>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(x=$Number(this),isActualNaN(x))return"NaN";if(x<=-1e21||x>=1e21)return $String(x);if(s="",x<0&&(s="-",x=-x),m="0",x>1e-21)if(z=(e=toFixedHelpers.log(x*toFixedHelpers.pow(2,69,1))-69)<0?x*toFixedHelpers.pow(2,-e,1):x/toFixedHelpers.pow(2,e,1),z*=4503599627370496,(e=52-e)>0){for(toFixedHelpers.multiply(0,z),j=f;j>=7;)toFixedHelpers.multiply(1e7,0),j-=7;for(toFixedHelpers.multiply(toFixedHelpers.pow(10,j,1),0),j=e-1;j>=23;)toFixedHelpers.divide(1<<23),j-=23;toFixedHelpers.divide(1<<j),toFixedHelpers.multiply(1,1),toFixedHelpers.divide(2),m=toFixedHelpers.numToString()}else toFixedHelpers.multiply(0,z),toFixedHelpers.multiply(1<<-e,0),m=toFixedHelpers.numToString()+strSlice("0.00000000000000000000",2,2+f);return m=f>0?(k=m.length)<=f?s+strSlice("0.0000000000000000000",0,f-k+2)+m:s+strSlice(m,0,k-f)+"."+strSlice(m,k-f):s+m};defineProperties(NumberPrototype,{toFixed:toFixedShim},hasToFixedBugs);var hasToPrecisionUndefinedBug=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),originalToPrecision=NumberPrototype.toPrecision;defineProperties(NumberPrototype,{toPrecision:function toPrecision(precision){return void 0===precision?originalToPrecision.call(this):originalToPrecision.call(this,precision)}},hasToPrecisionUndefinedBug),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(compliantExecNpcg=void 0===/()??/.exec("")[1],maxSafe32BitInt=Math.pow(2,32)-1,StringPrototype.split=function(separator,limit){var string=String(this);if(void 0===separator&&0===limit)return[];if(!isRegex(separator))return strSplit(this,separator,limit);var separator2,match,lastIndex,lastLength,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,separatorCopy=new RegExp(separator.source,flags+"g");compliantExecNpcg||(separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags));var splitLimit=void 0===limit?maxSafe32BitInt:ES.ToUint32(limit);for(match=separatorCopy.exec(string);match&&!((lastIndex=match.index+match[0].length)>lastLastIndex&&(pushCall(output,strSlice(string,lastLastIndex,match.index)),!compliantExecNpcg&&match.length>1&&match[0].replace(separator2,(function(){for(var i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)})),match.length>1&&match.index<string.length&&array_push.apply(output,arraySlice(match,1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=splitLimit));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++,match=separatorCopy.exec(string);return lastLastIndex===string.length?!lastLength&&separatorCopy.test("")||pushCall(output,""):pushCall(output,strSlice(string,lastLastIndex)),output.length>splitLimit?arraySlice(output,0,splitLimit):output}):"0".split(void 0,0).length&&(StringPrototype.split=function split(separator,limit){return void 0===separator&&0===limit?[]:strSplit(this,separator,limit)});var compliantExecNpcg,maxSafe32BitInt;var str_replace=StringPrototype.replace,replaceReportsGroupsCorrectly=(groups=[],"x".replace(/x(.)?/g,(function(match,group){pushCall(groups,group)})),1===groups.length&&void 0===groups[0]);var groups;replaceReportsGroupsCorrectly||(StringPrototype.replace=function replace(searchValue,replaceValue){var isFn=isCallable(replaceValue),hasCapturingGroups=isRegex(searchValue)&&/\)[*?]/.test(searchValue.source);if(isFn&&hasCapturingGroups){return str_replace.call(this,searchValue,(function(match){var length=arguments.length,originalLastIndex=searchValue.lastIndex;searchValue.lastIndex=0;var args=searchValue.exec(match)||[];return searchValue.lastIndex=originalLastIndex,pushCall(args,arguments[length-2],arguments[length-1]),replaceValue.apply(this,args)}))}return str_replace.call(this,searchValue,replaceValue)});var string_substr=StringPrototype.substr,hasNegativeSubstrBug="".substr&&"b"!=="0b".substr(-1);defineProperties(StringPrototype,{substr:function substr(start,length){var normalizedStart=start;return start<0&&(normalizedStart=max(this.length+start,0)),string_substr.call(this,normalizedStart,length)}},hasNegativeSubstrBug);var ws="\t\n\v\f\r \u2028\u2029\ufeff",zeroWidth="",wsRegexChars="["+ws+"]",trimBeginRegexp=new RegExp("^"+wsRegexChars+wsRegexChars+"*"),trimEndRegexp=new RegExp(wsRegexChars+wsRegexChars+"*$"),hasTrimWhitespaceBug=StringPrototype.trim&&(ws.trim()||!zeroWidth.trim());defineProperties(StringPrototype,{trim:function trim(){if(null==this)throw new TypeError("can't convert "+this+" to object");return $String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}},hasTrimWhitespaceBug);var trim=call.bind(String.prototype.trim),hasLastIndexBug=StringPrototype.lastIndexOf&&-1!=="abc".lastIndexOf("",2);defineProperties(StringPrototype,{lastIndexOf:function lastIndexOf(searchString){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var S=$String(this),searchStr=$String(searchString),numPos=arguments.length>1?$Number(arguments[1]):NaN,pos=isActualNaN(numPos)?1/0:ES.ToInteger(numPos),start=min(max(pos,0),S.length),searchLen=searchStr.length,k=start+searchLen;k>0;){k=max(0,k-searchLen);var index=strIndexOf(strSlice(S,k,start+searchLen),searchStr);if(-1!==index)return k+index}return-1}},hasLastIndexBug);var originalLastIndexOf=StringPrototype.lastIndexOf;defineProperties(StringPrototype,{lastIndexOf:function lastIndexOf(searchString){return originalLastIndexOf.apply(this,arguments)}},1!==StringPrototype.lastIndexOf.length),(8!==parseInt(ws+"08")||22!==parseInt(ws+"0x16"))&&(parseInt=(origParseInt=parseInt,hexRegex=/^[-+]?0[xX]/,function parseInt(str,radix){var string=trim(String(str)),defaultedRadix=$Number(radix)||(hexRegex.test(string)?16:10);return origParseInt(string,defaultedRadix)}));var origParseInt,hexRegex;1/parseFloat("-0")!=-1/0&&(parseFloat=(origParseFloat=parseFloat,function parseFloat(string){var inputString=trim(String(string)),result=origParseFloat(inputString);return 0===result&&"-"===strSlice(inputString,0,1)?-0:result}));var origParseFloat;if("RangeError: test"!==String(new RangeError("test"))){var errorToStringShim=function toString(){if(null==this)throw new TypeError("can't convert "+this+" to object");var name=this.name;void 0===name?name="Error":"string"!=typeof name&&(name=$String(name));var msg=this.message;return void 0===msg?msg="":"string"!=typeof msg&&(msg=$String(msg)),name?msg?name+": "+msg:name:msg};Error.prototype.toString=errorToStringShim}if(supportsDescriptors){var ensureNonEnumerable=function(obj,prop){if(isEnum(obj,prop)){var desc=Object.getOwnPropertyDescriptor(obj,prop);desc.configurable&&(desc.enumerable=!1,Object.defineProperty(obj,prop,desc))}};ensureNonEnumerable(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),ensureNonEnumerable(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var regexToString=function toString(){var str="/"+this.source+"/";return this.global&&(str+="g"),this.ignoreCase&&(str+="i"),this.multiline&&(str+="m"),str};RegExp.prototype.toString=regexToString}})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */!function(root,factory){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){var defineGetter,defineSetter,lookupGetter,lookupSetter,call=Function.call,prototypeOfObject=Object.prototype,owns=call.bind(prototypeOfObject.hasOwnProperty),isEnumerable=call.bind(prototypeOfObject.propertyIsEnumerable),toStr=call.bind(prototypeOfObject.toString),supportsAccessors=owns(prototypeOfObject,"__defineGetter__");supportsAccessors&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__));var isPrimitive=function isPrimitive(o){return null==o||"object"!=typeof o&&"function"!=typeof o};Object.getPrototypeOf||(Object.getPrototypeOf=function getPrototypeOf(object){var proto=object.__proto__;return proto||null===proto?proto:"[object Function]"===toStr(object.constructor)?object.constructor.prototype:object instanceof Object?prototypeOfObject:null});var doesGetOwnPropertyDescriptorWork=function doesGetOwnPropertyDescriptorWork(object){try{return object.sentinel=0,0===Object.getOwnPropertyDescriptor(object,"sentinel").value}catch(exception){return!1}};if(Object.defineProperty){var getOwnPropertyDescriptorWorksOnObject=doesGetOwnPropertyDescriptorWork({});if(!("undefined"==typeof document||doesGetOwnPropertyDescriptorWork(document.createElement("div")))||!getOwnPropertyDescriptorWorksOnObject)var getOwnPropertyDescriptorFallback=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||getOwnPropertyDescriptorFallback){Object.getOwnPropertyDescriptor=function getOwnPropertyDescriptor(object,property){if(isPrimitive(object))throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+object);if(getOwnPropertyDescriptorFallback)try{return getOwnPropertyDescriptorFallback.call(Object,object,property)}catch(exception){}var descriptor;if(!owns(object,property))return descriptor;if(descriptor={enumerable:isEnumerable(object,property),configurable:!0},supportsAccessors){var prototype=object.__proto__,notPrototypeOfObject=object!==prototypeOfObject;notPrototypeOfObject&&(object.__proto__=prototypeOfObject);var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(notPrototypeOfObject&&(object.__proto__=prototype),getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor.writable=!0,descriptor}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function getOwnPropertyNames(object){return Object.keys(object)});if(!Object.create){var createEmpty,supportsProto=!({__proto__:null}instanceof Object);createEmpty=supportsProto||"undefined"==typeof document?function(){return{__proto__:null}}:function(){var empty=function shouldUseActiveX(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(exception){return!1}}()?function getEmptyViaActiveX(){var empty,xDoc;return(xDoc=new ActiveXObject("htmlfile")).write("<script><\/script>"),xDoc.close(),empty=xDoc.parentWindow.Object.prototype,xDoc=null,empty}():function getEmptyViaIFrame(){var empty,iframe=document.createElement("iframe"),parent=document.body||document.documentElement;return iframe.style.display="none",parent.appendChild(iframe),iframe.src="javascript:",empty=iframe.contentWindow.Object.prototype,parent.removeChild(iframe),iframe=null,empty}();delete empty.constructor,delete empty.hasOwnProperty,delete empty.propertyIsEnumerable,delete empty.isPrototypeOf,delete empty.toLocaleString,delete empty.toString,delete empty.valueOf;var Empty=function Empty(){};return Empty.prototype=empty,createEmpty=function(){return new Empty},new Empty},Object.create=function create(prototype,properties){var object,Type=function Type(){};if(null===prototype)object=createEmpty();else{if(null!==prototype&&isPrimitive(prototype))throw new TypeError("Object prototype may only be an Object or null");Type.prototype=prototype,(object=new Type).__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}var doesDefinePropertyWork=function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){return!1}};if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty,definePropertiesFallback=Object.defineProperties}if(!Object.defineProperty||definePropertyFallback){Object.defineProperty=function defineProperty(object,property,descriptor){if(isPrimitive(object))throw new TypeError("Object.defineProperty called on non-object: "+object);if(isPrimitive(descriptor))throw new TypeError("Property description must be an object: "+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if("value"in descriptor)if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{var hasGetter="get"in descriptor,hasSetter="set"in descriptor;if(!supportsAccessors&&(hasGetter||hasSetter))throw new TypeError("getters & setters can not be defined on this javascript engine");hasGetter&&defineGetter(object,property,descriptor.get),hasSetter&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties&&!definePropertiesFallback||(Object.defineProperties=function defineProperties(object,properties){if(definePropertiesFallback)try{return definePropertiesFallback.call(Object,object,properties)}catch(exception){}return Object.keys(properties).forEach((function(property){"__proto__"!==property&&Object.defineProperty(object,property,properties[property])})),object});Object.seal||(Object.seal=function seal(object){if(Object(object)!==object)throw new TypeError("Object.seal can only be called on Objects.");return object});Object.freeze||(Object.freeze=function freeze(object){if(Object(object)!==object)throw new TypeError("Object.freeze can only be called on Objects.");return object});try{Object.freeze((function(){}))}catch(exception){Object.freeze=(freezeObject=Object.freeze,function freeze(object){return"function"==typeof object?object:freezeObject(object)})}var freezeObject;Object.preventExtensions||(Object.preventExtensions=function preventExtensions(object){if(Object(object)!==object)throw new TypeError("Object.preventExtensions can only be called on Objects.");return object});Object.isSealed||(Object.isSealed=function isSealed(object){if(Object(object)!==object)throw new TypeError("Object.isSealed can only be called on Objects.");return!1});Object.isFrozen||(Object.isFrozen=function isFrozen(object){if(Object(object)!==object)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1});Object.isExtensible||(Object.isExtensible=function isExtensible(object){if(Object(object)!==object)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue})})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports,__webpack_require__){"use strict";__webpack_require__(466),__webpack_require__(467)(),__webpack_require__(472)},function(module,exports,__webpack_require__){(function(global,process){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){"use strict";var ArrayIterator,_apply=Function.call.bind(Function.apply),_call=Function.call.bind(Function.call),isArray=Array.isArray,keys=Object.keys,not=function notThunker(func){return function notThunk(){return!_apply(func,this,arguments)}},throwsError=function(func){try{return func(),!1}catch(e){return!0}},valueOrFalseIfThrows=function valueOrFalseIfThrows(func){try{return func()}catch(e){return!1}},isCallableWithoutNew=not(throwsError),arePropertyDescriptorsSupported=function(){return!throwsError((function(){return Object.defineProperty({},"x",{get:function(){}})}))},supportsDescriptors=!!Object.defineProperty&&arePropertyDescriptorsSupported(),functionsHaveNames="foo"===function foo(){}.name,_forEach=Function.call.bind(Array.prototype.forEach),_reduce=Function.call.bind(Array.prototype.reduce),_filter=Function.call.bind(Array.prototype.filter),_some=Function.call.bind(Array.prototype.some),defineProperty=function(object,name,value,force){!force&&name in object||(supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:value}):object[name]=value)},defineProperties=function(object,map,forceOverride){_forEach(keys(map),(function(name){var method=map[name];defineProperty(object,name,method,!!forceOverride)}))},_toString=Function.call.bind(Object.prototype.toString),isCallable=function IsCallableFast(x){return"function"==typeof x},Value={getter:function(object,name,getter){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");Object.defineProperty(object,name,{configurable:!0,enumerable:!1,get:getter})},proxy:function(originalObject,key,targetObject){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");var originalDescriptor=Object.getOwnPropertyDescriptor(originalObject,key);Object.defineProperty(targetObject,key,{configurable:originalDescriptor.configurable,enumerable:originalDescriptor.enumerable,get:function getKey(){return originalObject[key]},set:function setKey(value){originalObject[key]=value}})},redefine:function(object,property,newValue){if(supportsDescriptors){var descriptor=Object.getOwnPropertyDescriptor(object,property);descriptor.value=newValue,Object.defineProperty(object,property,descriptor)}else object[property]=newValue},defineByDescriptor:function(object,property,descriptor){supportsDescriptors?Object.defineProperty(object,property,descriptor):"value"in descriptor&&(object[property]=descriptor.value)},preserveToString:function(target,source){source&&isCallable(source.toString)&&defineProperty(target,"toString",source.toString.bind(source),!0)}},create=Object.create||function(prototype,properties){var Prototype=function Prototype(){};Prototype.prototype=prototype;var object=new Prototype;return void 0!==properties&&keys(properties).forEach((function(key){Value.defineByDescriptor(object,key,properties[key])})),object},supportsSubclassing=function(C,f){return!!Object.setPrototypeOf&&valueOrFalseIfThrows((function(){var Sub=function Subclass(arg){var o=new C(arg);return Object.setPrototypeOf(o,Subclass.prototype),o};return Object.setPrototypeOf(Sub,C),Sub.prototype=create(C.prototype,{constructor:{value:Sub}}),f(Sub)}))},getGlobal=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==global)return global;throw new Error("unable to locate global object")},globals=getGlobal(),globalIsFinite=globals.isFinite,_indexOf=Function.call.bind(String.prototype.indexOf),_arrayIndexOfApply=Function.apply.bind(Array.prototype.indexOf),_concat=Function.call.bind(Array.prototype.concat),_strSlice=Function.call.bind(String.prototype.slice),_push=Function.call.bind(Array.prototype.push),_pushApply=Function.apply.bind(Array.prototype.push),_shift=Function.call.bind(Array.prototype.shift),_max=Math.max,_min=Math.min,_floor=Math.floor,_abs=Math.abs,_exp=Math.exp,_log=Math.log,_sqrt=Math.sqrt,_hasOwnProperty=Function.call.bind(Object.prototype.hasOwnProperty),noop=function(){},OrigMap=globals.Map,origMapDelete=OrigMap&&OrigMap.prototype.delete,origMapGet=OrigMap&&OrigMap.prototype.get,origMapHas=OrigMap&&OrigMap.prototype.has,origMapSet=OrigMap&&OrigMap.prototype.set,Symbol=globals.Symbol||{},symbolSpecies=Symbol.species||"@@species",numberIsNaN=Number.isNaN||function isNaN(value){return value!=value},numberIsFinite=Number.isFinite||function isFinite(value){return"number"==typeof value&&globalIsFinite(value)},_sign=isCallable(Math.sign)?Math.sign:function sign(value){var number=Number(value);return 0===number?number:numberIsNaN(number)?number:number<0?-1:1},_log1p=function log1p(value){var x=Number(value);return x<-1||numberIsNaN(x)?NaN:0===x||x===1/0?x:-1===x?-1/0:1+x-1==0?x:x*(_log(1+x)/(1+x-1))},isStandardArguments=function isArguments(value){return"[object Arguments]"===_toString(value)},isLegacyArguments=function isArguments(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Array]"!==_toString(value)&&"[object Function]"===_toString(value.callee)},isArguments=isStandardArguments(arguments)?isStandardArguments:isLegacyArguments,Type={primitive:function(x){return null===x||"function"!=typeof x&&"object"!=typeof x},string:function(x){return"[object String]"===_toString(x)},regex:function(x){return"[object RegExp]"===_toString(x)},symbol:function(x){return"function"==typeof globals.Symbol&&"symbol"==typeof x}},overrideNative=function overrideNative(object,property,replacement){var original=object[property];defineProperty(object,property,replacement,!0),Value.preserveToString(object[property],original)},hasSymbols="function"==typeof Symbol&&"function"==typeof Symbol.for&&Type.symbol(Symbol()),$iterator$=Type.symbol(Symbol.iterator)?Symbol.iterator:"_es6-shim iterator_";globals.Set&&"function"==typeof(new globals.Set)["@@iterator"]&&($iterator$="@@iterator"),globals.Reflect||defineProperty(globals,"Reflect",{},!0);var o,Reflect=globals.Reflect,$String=String,domAll="undefined"!=typeof document&&document?document.all:null,isNullOrUndefined=null==domAll?function isNullOrUndefined(x){return null==x}:function isNullOrUndefinedAndNotDocumentAll(x){return null==x&&x!==domAll},ES={Call:function Call(F,V){var args=arguments.length>2?arguments[2]:[];if(!ES.IsCallable(F))throw new TypeError(F+" is not a function");return _apply(F,V,args)},RequireObjectCoercible:function(x,optMessage){if(isNullOrUndefined(x))throw new TypeError(optMessage||"Cannot call method on "+x);return x},TypeIsObject:function(x){return null!=x&&!0!==x&&!1!==x&&("function"==typeof x||"object"==typeof x||x===domAll)},ToObject:function(o,optMessage){return Object(ES.RequireObjectCoercible(o,optMessage))},IsCallable:isCallable,IsConstructor:function(x){return ES.IsCallable(x)},ToInt32:function(x){return ES.ToNumber(x)>>0},ToUint32:function(x){return ES.ToNumber(x)>>>0},ToNumber:function(value){if("[object Symbol]"===_toString(value))throw new TypeError("Cannot convert a Symbol value to a number");return+value},ToInteger:function(value){var number=ES.ToNumber(value);return numberIsNaN(number)?0:0!==number&&numberIsFinite(number)?(number>0?1:-1)*_floor(_abs(number)):number},ToLength:function(value){var len=ES.ToInteger(value);return len<=0?0:len>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:len},SameValue:function(a,b){return a===b?0!==a||1/a==1/b:numberIsNaN(a)&&numberIsNaN(b)},SameValueZero:function(a,b){return a===b||numberIsNaN(a)&&numberIsNaN(b)},IsIterable:function(o){return ES.TypeIsObject(o)&&(void 0!==o[$iterator$]||isArguments(o))},GetIterator:function(o){if(isArguments(o))return new ArrayIterator(o,"value");var itFn=ES.GetMethod(o,$iterator$);if(!ES.IsCallable(itFn))throw new TypeError("value is not an iterable");var it=ES.Call(itFn,o);if(!ES.TypeIsObject(it))throw new TypeError("bad iterator");return it},GetMethod:function(o,p){var func=ES.ToObject(o)[p];if(!isNullOrUndefined(func)){if(!ES.IsCallable(func))throw new TypeError("Method not callable: "+p);return func}},IteratorComplete:function(iterResult){return!!iterResult.done},IteratorClose:function(iterator,completionIsThrow){var returnMethod=ES.GetMethod(iterator,"return");if(void 0!==returnMethod){var innerResult,innerException;try{innerResult=ES.Call(returnMethod,iterator)}catch(e){innerException=e}if(!completionIsThrow){if(innerException)throw innerException;if(!ES.TypeIsObject(innerResult))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(it){var result=arguments.length>1?it.next(arguments[1]):it.next();if(!ES.TypeIsObject(result))throw new TypeError("bad iterator");return result},IteratorStep:function(it){var result=ES.IteratorNext(it);return!ES.IteratorComplete(result)&&result},Construct:function(C,args,newTarget,isES6internal){var target=void 0===newTarget?C:newTarget;if(!isES6internal&&Reflect.construct)return Reflect.construct(C,args,target);var proto=target.prototype;ES.TypeIsObject(proto)||(proto=Object.prototype);var obj=create(proto),result=ES.Call(C,obj,args);return ES.TypeIsObject(result)?result:obj},SpeciesConstructor:function(O,defaultConstructor){var C=O.constructor;if(void 0===C)return defaultConstructor;if(!ES.TypeIsObject(C))throw new TypeError("Bad constructor");var S=C[symbolSpecies];if(isNullOrUndefined(S))return defaultConstructor;if(!ES.IsConstructor(S))throw new TypeError("Bad @@species");return S},CreateHTML:function(string,tag,attribute,value){var S=ES.ToString(string),p1="<"+tag;return""!==attribute&&(p1+=" "+attribute+'="'+ES.ToString(value).replace(/"/g,"&quot;")+'"'),p1+">"+S+"</"+tag+">"},IsRegExp:function IsRegExp(argument){if(!ES.TypeIsObject(argument))return!1;var isRegExp=argument[Symbol.match];return void 0!==isRegExp?!!isRegExp:Type.regex(argument)},ToString:function ToString(string){return $String(string)}};if(supportsDescriptors&&hasSymbols){var defineWellKnownSymbol=function defineWellKnownSymbol(name){if(Type.symbol(Symbol[name]))return Symbol[name];var sym=Symbol.for("Symbol."+name);return Object.defineProperty(Symbol,name,{configurable:!1,enumerable:!1,writable:!1,value:sym}),sym};if(!Type.symbol(Symbol.search)){var symbolSearch=defineWellKnownSymbol("search"),originalSearch=String.prototype.search;defineProperty(RegExp.prototype,symbolSearch,(function search(string){return ES.Call(originalSearch,string,[this])}));var searchShim=function search(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var searcher=ES.GetMethod(regexp,symbolSearch);if(void 0!==searcher)return ES.Call(searcher,regexp,[O])}return ES.Call(originalSearch,O,[ES.ToString(regexp)])};overrideNative(String.prototype,"search",searchShim)}if(!Type.symbol(Symbol.replace)){var symbolReplace=defineWellKnownSymbol("replace"),originalReplace=String.prototype.replace;defineProperty(RegExp.prototype,symbolReplace,(function replace(string,replaceValue){return ES.Call(originalReplace,string,[this,replaceValue])}));var replaceShim=function replace(searchValue,replaceValue){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(searchValue)){var replacer=ES.GetMethod(searchValue,symbolReplace);if(void 0!==replacer)return ES.Call(replacer,searchValue,[O,replaceValue])}return ES.Call(originalReplace,O,[ES.ToString(searchValue),replaceValue])};overrideNative(String.prototype,"replace",replaceShim)}if(!Type.symbol(Symbol.split)){var symbolSplit=defineWellKnownSymbol("split"),originalSplit=String.prototype.split;defineProperty(RegExp.prototype,symbolSplit,(function split(string,limit){return ES.Call(originalSplit,string,[this,limit])}));var splitShim=function split(separator,limit){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(separator)){var splitter=ES.GetMethod(separator,symbolSplit);if(void 0!==splitter)return ES.Call(splitter,separator,[O,limit])}return ES.Call(originalSplit,O,[ES.ToString(separator),limit])};overrideNative(String.prototype,"split",splitShim)}var symbolMatchExists=Type.symbol(Symbol.match),stringMatchIgnoresSymbolMatch=symbolMatchExists&&((o={})[Symbol.match]=function(){return 42},42!=="a".match(o));if(!symbolMatchExists||stringMatchIgnoresSymbolMatch){var symbolMatch=defineWellKnownSymbol("match"),originalMatch=String.prototype.match;defineProperty(RegExp.prototype,symbolMatch,(function match(string){return ES.Call(originalMatch,string,[this])}));var matchShim=function match(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var matcher=ES.GetMethod(regexp,symbolMatch);if(void 0!==matcher)return ES.Call(matcher,regexp,[O])}return ES.Call(originalMatch,O,[ES.ToString(regexp)])};overrideNative(String.prototype,"match",matchShim)}}var wrapConstructor=function wrapConstructor(original,replacement,keysToSkip){Value.preserveToString(replacement,original),Object.setPrototypeOf&&Object.setPrototypeOf(original,replacement),supportsDescriptors?_forEach(Object.getOwnPropertyNames(original),(function(key){key in noop||keysToSkip[key]||Value.proxy(original,key,replacement)})):_forEach(Object.keys(original),(function(key){key in noop||keysToSkip[key]||(replacement[key]=original[key])})),replacement.prototype=original.prototype,Value.redefine(original.prototype,"constructor",replacement)},defaultSpeciesGetter=function(){return this},addDefaultSpecies=function(C){supportsDescriptors&&!_hasOwnProperty(C,symbolSpecies)&&Value.getter(C,symbolSpecies,defaultSpeciesGetter)},addIterator=function(prototype,impl){var implementation=impl||function iterator(){return this};defineProperty(prototype,$iterator$,implementation),!prototype[$iterator$]&&Type.symbol($iterator$)&&(prototype[$iterator$]=implementation)},createDataProperty=function createDataProperty(object,name,value){supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!0,writable:!0,value:value}):object[name]=value},createDataPropertyOrThrow=function createDataPropertyOrThrow(object,name,value){if(createDataProperty(object,name,value),!ES.SameValue(object[name],value))throw new TypeError("property is nonconfigurable")},emulateES6construct=function(o,defaultNewTarget,defaultProto,slots){if(!ES.TypeIsObject(o))throw new TypeError("Constructor requires `new`: "+defaultNewTarget.name);var proto=defaultNewTarget.prototype;ES.TypeIsObject(proto)||(proto=defaultProto);var obj=create(proto);for(var name in slots)if(_hasOwnProperty(slots,name)){var value=slots[name];defineProperty(obj,name,value,!0)}return obj};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var originalFromCodePoint=String.fromCodePoint;overrideNative(String,"fromCodePoint",(function fromCodePoint(codePoints){return ES.Call(originalFromCodePoint,this,arguments)}))}var StringShims={fromCodePoint:function fromCodePoint(codePoints){for(var next,result=[],i=0,length=arguments.length;i<length;i++){if(next=Number(arguments[i]),!ES.SameValue(next,ES.ToInteger(next))||next<0||next>1114111)throw new RangeError("Invalid code point "+next);next<65536?_push(result,String.fromCharCode(next)):(next-=65536,_push(result,String.fromCharCode(55296+(next>>10))),_push(result,String.fromCharCode(next%1024+56320)))}return result.join("")},raw:function raw(callSite){var cooked=ES.ToObject(callSite,"bad callSite"),rawString=ES.ToObject(cooked.raw,"bad raw value"),len=rawString.length,literalsegments=ES.ToLength(len);if(literalsegments<=0)return"";for(var nextKey,next,nextSeg,nextSub,stringElements=[],nextIndex=0;nextIndex<literalsegments&&(nextKey=ES.ToString(nextIndex),nextSeg=ES.ToString(rawString[nextKey]),_push(stringElements,nextSeg),!(nextIndex+1>=literalsegments));)next=nextIndex+1<arguments.length?arguments[nextIndex+1]:"",nextSub=ES.ToString(next),_push(stringElements,nextSub),nextIndex+=1;return stringElements.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&overrideNative(String,"raw",StringShims.raw),defineProperties(String,StringShims);var stringRepeat=function repeat(s,times){if(times<1)return"";if(times%2)return repeat(s,times-1)+s;var half=repeat(s,times/2);return half+half},stringMaxLength=1/0,StringPrototypeShims={repeat:function repeat(times){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),numTimes=ES.ToInteger(times);if(numTimes<0||numTimes>=stringMaxLength)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return stringRepeat(thisStr,numTimes)},startsWith:function startsWith(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "startsWith" with a regex');var position,searchStr=ES.ToString(searchString);arguments.length>1&&(position=arguments[1]);var start=_max(ES.ToInteger(position),0);return _strSlice(S,start,start+searchStr.length)===searchStr},endsWith:function endsWith(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "endsWith" with a regex');var endPosition,searchStr=ES.ToString(searchString),len=S.length;arguments.length>1&&(endPosition=arguments[1]);var pos=void 0===endPosition?len:ES.ToInteger(endPosition),end=_min(_max(pos,0),len);return _strSlice(S,end-searchStr.length,end)===searchStr},includes:function includes(searchString){if(ES.IsRegExp(searchString))throw new TypeError('"includes" does not accept a RegExp');var position,searchStr=ES.ToString(searchString);return arguments.length>1&&(position=arguments[1]),-1!==_indexOf(this,searchStr,position)},codePointAt:function codePointAt(pos){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),position=ES.ToInteger(pos),length=thisStr.length;if(position>=0&&position<length){var first=thisStr.charCodeAt(position);if(first<55296||first>56319||position+1===length)return first;var second=thisStr.charCodeAt(position+1);return second<56320||second>57343?first:1024*(first-55296)+(second-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&overrideNative(String.prototype,"includes",StringPrototypeShims.includes),String.prototype.startsWith&&String.prototype.endsWith){var startsWithRejectsRegex=throwsError((function(){return"/a/".startsWith(/a/)})),startsWithHandlesInfinity=valueOrFalseIfThrows((function(){return!1==="abc".startsWith("a",1/0)}));startsWithRejectsRegex&&startsWithHandlesInfinity||(overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith),overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith))}if(hasSymbols){var startsWithSupportsSymbolMatch=valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".startsWith(re)}));startsWithSupportsSymbolMatch||overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith);var endsWithSupportsSymbolMatch=valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".endsWith(re)}));endsWithSupportsSymbolMatch||overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith);var includesSupportsSymbolMatch=valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".includes(re)}));includesSupportsSymbolMatch||overrideNative(String.prototype,"includes",StringPrototypeShims.includes)}defineProperties(String.prototype,StringPrototypeShims);var ws=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),trimRegexp=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),trimShim=function trim(){return ES.ToString(ES.RequireObjectCoercible(this)).replace(trimRegexp,"")},nonWS=["","",""].join(""),nonWSregex=new RegExp("["+nonWS+"]","g"),isBadHexRegex=/^[-+]0x[0-9a-f]+$/i,hasStringTrimBug=nonWS.trim().length!==nonWS.length;defineProperty(String.prototype,"trim",trimShim,hasStringTrimBug);var iteratorResult=function(x){return{value:x,done:0===arguments.length}},StringIterator=function(s){ES.RequireObjectCoercible(s),this._s=ES.ToString(s),this._i=0};StringIterator.prototype.next=function(){var s=this._s,i=this._i;if(void 0===s||i>=s.length)return this._s=void 0,iteratorResult();var second,len,first=s.charCodeAt(i);return len=first<55296||first>56319||i+1===s.length?1:(second=s.charCodeAt(i+1))<56320||second>57343?1:2,this._i=i+len,iteratorResult(s.substr(i,len))},addIterator(StringIterator.prototype),addIterator(String.prototype,(function(){return new StringIterator(this)}));var ArrayShims={from:function from(items){var mapFn,mapping,T,C=this;if(arguments.length>1&&(mapFn=arguments[1]),void 0===mapFn)mapping=!1;else{if(!ES.IsCallable(mapFn))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(T=arguments[2]),mapping=!0}var length,result,i,usingIterator=void 0!==(isArguments(items)||ES.GetMethod(items,$iterator$));if(usingIterator){result=ES.IsConstructor(C)?Object(new C):[];var next,nextValue,iterator=ES.GetIterator(items);for(i=0;!1!==(next=ES.IteratorStep(iterator));){nextValue=next.value;try{mapping&&(nextValue=void 0===T?mapFn(nextValue,i):_call(mapFn,T,nextValue,i)),result[i]=nextValue}catch(e){throw ES.IteratorClose(iterator,!0),e}i+=1}length=i}else{var value,arrayLike=ES.ToObject(items);for(length=ES.ToLength(arrayLike.length),result=ES.IsConstructor(C)?Object(new C(length)):new Array(length),i=0;i<length;++i)value=arrayLike[i],mapping&&(value=void 0===T?mapFn(value,i):_call(mapFn,T,value,i)),createDataPropertyOrThrow(result,i,value)}return result.length=length,result},of:function of(){for(var len=arguments.length,C=this,A=isArray(C)||!ES.IsCallable(C)?new Array(len):ES.Construct(C,[len]),k=0;k<len;++k)createDataPropertyOrThrow(A,k,arguments[k]);return A.length=len,A}};defineProperties(Array,ArrayShims),addDefaultSpecies(Array),defineProperties((ArrayIterator=function(array,kind){this.i=0,this.array=array,this.kind=kind}).prototype,{next:function(){var i=this.i,array=this.array;if(!(this instanceof ArrayIterator))throw new TypeError("Not an ArrayIterator");if(void 0!==array)for(var len=ES.ToLength(array.length);i<len;i++){var retval,kind=this.kind;return"key"===kind?retval=i:"value"===kind?retval=array[i]:"entry"===kind&&(retval=[i,array[i]]),this.i=i+1,iteratorResult(retval)}return this.array=void 0,iteratorResult()}}),addIterator(ArrayIterator.prototype);var arrayOfSupportsSubclassing=Array.of===ArrayShims.of||function(){var Foo=function Foo(len){this.length=len};Foo.prototype=[];var fooArr=Array.of.apply(Foo,[1,2]);return fooArr instanceof Foo&&2===fooArr.length}();arrayOfSupportsSubclassing||overrideNative(Array,"of",ArrayShims.of);var ArrayPrototypeShims={copyWithin:function copyWithin(target,start){var end,o=ES.ToObject(this),len=ES.ToLength(o.length),relativeTarget=ES.ToInteger(target),relativeStart=ES.ToInteger(start),to=relativeTarget<0?_max(len+relativeTarget,0):_min(relativeTarget,len),from=relativeStart<0?_max(len+relativeStart,0):_min(relativeStart,len);arguments.length>2&&(end=arguments[2]);var relativeEnd=void 0===end?len:ES.ToInteger(end),finalItem=relativeEnd<0?_max(len+relativeEnd,0):_min(relativeEnd,len),count=_min(finalItem-from,len-to),direction=1;for(from<to&&to<from+count&&(direction=-1,from+=count-1,to+=count-1);count>0;)from in o?o[to]=o[from]:delete o[to],from+=direction,to+=direction,count-=1;return o},fill:function fill(value){var start,end;arguments.length>1&&(start=arguments[1]),arguments.length>2&&(end=arguments[2]);var O=ES.ToObject(this),len=ES.ToLength(O.length);start=ES.ToInteger(void 0===start?0:start),end=ES.ToInteger(void 0===end?len:end);for(var relativeStart=start<0?_max(len+start,0):_min(start,len),relativeEnd=end<0?len+end:end,i=relativeStart;i<len&&i<relativeEnd;++i)O[i]=value;return O},find:function find(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#find: predicate must be a function");for(var value,thisArg=arguments.length>1?arguments[1]:null,i=0;i<length;i++)if(value=list[i],thisArg){if(_call(predicate,thisArg,value,i,list))return value}else if(predicate(value,i,list))return value},findIndex:function findIndex(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#findIndex: predicate must be a function");for(var thisArg=arguments.length>1?arguments[1]:null,i=0;i<length;i++)if(thisArg){if(_call(predicate,thisArg,list[i],i,list))return i}else if(predicate(list[i],i,list))return i;return-1},keys:function keys(){return new ArrayIterator(this,"key")},values:function values(){return new ArrayIterator(this,"value")},entries:function entries(){return new ArrayIterator(this,"entry")}};if(Array.prototype.keys&&!ES.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ES.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[$iterator$]&&(defineProperties(Array.prototype,{values:Array.prototype[$iterator$]}),Type.symbol(Symbol.unscopables)&&(Array.prototype[Symbol.unscopables].values=!0)),functionsHaveNames&&Array.prototype.values&&"values"!==Array.prototype.values.name){var originalArrayPrototypeValues=Array.prototype.values;overrideNative(Array.prototype,"values",(function values(){return ES.Call(originalArrayPrototypeValues,this,arguments)})),defineProperty(Array.prototype,$iterator$,Array.prototype.values,!0)}defineProperties(Array.prototype,ArrayPrototypeShims),1/[!0].indexOf(!0,-0)<0&&defineProperty(Array.prototype,"indexOf",(function indexOf(searchElement){var value=_arrayIndexOfApply(this,arguments);return 0===value&&1/value<0?0:value}),!0),addIterator(Array.prototype,(function(){return this.values()})),Object.getPrototypeOf&&addIterator(Object.getPrototypeOf([].values()));var arr,arrayFromSwallowsNegativeLengths=valueOrFalseIfThrows((function(){return 0===Array.from({length:-1}).length})),arrayFromHandlesIterables=1===(arr=Array.from([0].entries())).length&&isArray(arr[0])&&0===arr[0][0]&&0===arr[0][1];arrayFromSwallowsNegativeLengths&&arrayFromHandlesIterables||overrideNative(Array,"from",ArrayShims.from);var arrayFromHandlesUndefinedMapFunction=valueOrFalseIfThrows((function(){return Array.from([0],void 0)}));if(!arrayFromHandlesUndefinedMapFunction){var origArrayFrom=Array.from;overrideNative(Array,"from",(function from(items){return arguments.length>1&&void 0!==arguments[1]?ES.Call(origArrayFrom,this,arguments):_call(origArrayFrom,this,items)}))}var int32sAsOne=-(Math.pow(2,32)-1),toLengthsCorrectly=function(method,reversed){var obj={length:int32sAsOne};return obj[reversed?(obj.length>>>0)-1:0]=!0,valueOrFalseIfThrows((function(){return _call(method,obj,(function(){throw new RangeError("should not reach here")}),[]),!0}))};if(!toLengthsCorrectly(Array.prototype.forEach)){var originalForEach=Array.prototype.forEach;overrideNative(Array.prototype,"forEach",(function forEach(callbackFn){return ES.Call(originalForEach,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.map)){var originalMap=Array.prototype.map;overrideNative(Array.prototype,"map",(function map(callbackFn){return ES.Call(originalMap,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.filter)){var originalFilter=Array.prototype.filter;overrideNative(Array.prototype,"filter",(function filter(callbackFn){return ES.Call(originalFilter,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.some)){var originalSome=Array.prototype.some;overrideNative(Array.prototype,"some",(function some(callbackFn){return ES.Call(originalSome,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.every)){var originalEvery=Array.prototype.every;overrideNative(Array.prototype,"every",(function every(callbackFn){return ES.Call(originalEvery,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.reduce)){var originalReduce=Array.prototype.reduce;overrideNative(Array.prototype,"reduce",(function reduce(callbackFn){return ES.Call(originalReduce,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.reduceRight,!0)){var originalReduceRight=Array.prototype.reduceRight;overrideNative(Array.prototype,"reduceRight",(function reduceRight(callbackFn){return ES.Call(originalReduceRight,this.length>=0?this:[],arguments)}),!0)}var lacksOctalSupport=8!==Number("0o10"),lacksBinarySupport=2!==Number("0b10"),trimsNonWhitespace=_some(nonWS,(function(c){return 0===Number(c+0+c)}));if(lacksOctalSupport||lacksBinarySupport||trimsNonWhitespace){var OrigNumber=Number,binaryRegex=/^0b[01]+$/i,octalRegex=/^0o[0-7]+$/i,isBinary=binaryRegex.test.bind(binaryRegex),isOctal=octalRegex.test.bind(octalRegex),toPrimitive=function(O){var result;if("function"==typeof O.valueOf&&(result=O.valueOf(),Type.primitive(result)))return result;if("function"==typeof O.toString&&(result=O.toString(),Type.primitive(result)))return result;throw new TypeError("No default value")},hasNonWS=nonWSregex.test.bind(nonWSregex),isBadHex=isBadHexRegex.test.bind(isBadHexRegex),NumberShim=function(){var NumberShim=function Number(value){var primValue;"string"==typeof(primValue=arguments.length>0?Type.primitive(value)?value:toPrimitive(value,"number"):0)&&(primValue=ES.Call(trimShim,primValue),isBinary(primValue)?primValue=parseInt(_strSlice(primValue,2),2):isOctal(primValue)?primValue=parseInt(_strSlice(primValue,2),8):(hasNonWS(primValue)||isBadHex(primValue))&&(primValue=NaN));var receiver=this,valueOfSucceeds=valueOrFalseIfThrows((function(){return OrigNumber.prototype.valueOf.call(receiver),!0}));return receiver instanceof NumberShim&&!valueOfSucceeds?new OrigNumber(primValue):OrigNumber(primValue)};return NumberShim}();wrapConstructor(OrigNumber,NumberShim,{}),defineProperties(NumberShim,{NaN:OrigNumber.NaN,MAX_VALUE:OrigNumber.MAX_VALUE,MIN_VALUE:OrigNumber.MIN_VALUE,NEGATIVE_INFINITY:OrigNumber.NEGATIVE_INFINITY,POSITIVE_INFINITY:OrigNumber.POSITIVE_INFINITY}),Number=NumberShim,Value.redefine(globals,"Number",NumberShim)}var maxSafeInteger=Math.pow(2,53)-1;defineProperties(Number,{MAX_SAFE_INTEGER:maxSafeInteger,MIN_SAFE_INTEGER:-maxSafeInteger,EPSILON:2220446049250313e-31,parseInt:globals.parseInt,parseFloat:globals.parseFloat,isFinite:numberIsFinite,isInteger:function isInteger(value){return numberIsFinite(value)&&ES.ToInteger(value)===value},isSafeInteger:function isSafeInteger(value){return Number.isInteger(value)&&_abs(value)<=Number.MAX_SAFE_INTEGER},isNaN:numberIsNaN}),defineProperty(Number,"parseInt",globals.parseInt,Number.parseInt!==globals.parseInt),1===[,1].find((function(){return!0}))&&overrideNative(Array.prototype,"find",ArrayPrototypeShims.find),0!==[,1].findIndex((function(){return!0}))&&overrideNative(Array.prototype,"findIndex",ArrayPrototypeShims.findIndex);var FAKENULL,gpo,spo,isEnumerableOn=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),ensureEnumerable=function ensureEnumerable(obj,prop){supportsDescriptors&&isEnumerableOn(obj,prop)&&Object.defineProperty(obj,prop,{enumerable:!1})},sliceArgs=function sliceArgs(){for(var initial=Number(this),len=arguments.length,desiredArgCount=len-initial,args=new Array(desiredArgCount<0?0:desiredArgCount),i=initial;i<len;++i)args[i-initial]=arguments[i];return args},assignTo=function assignTo(source){return function assignToSource(target,key){return target[key]=source[key],target}},assignReducer=function(target,source){var symbols,sourceKeys=keys(Object(source));return ES.IsCallable(Object.getOwnPropertySymbols)&&(symbols=_filter(Object.getOwnPropertySymbols(Object(source)),isEnumerableOn(source))),_reduce(_concat(sourceKeys,symbols||[]),assignTo(source),target)},ObjectShims={assign:function(target,source){var to=ES.ToObject(target,"Cannot convert undefined or null to object");return _reduce(ES.Call(sliceArgs,1,arguments),assignReducer,to)},is:function is(a,b){return ES.SameValue(a,b)}},assignHasPendingExceptions=Object.assign&&Object.preventExtensions&&function(){var thrower=Object.preventExtensions({1:2});try{Object.assign(thrower,"xy")}catch(e){return"y"===thrower[1]}}();if(assignHasPendingExceptions&&overrideNative(Object,"assign",ObjectShims.assign),defineProperties(Object,ObjectShims),supportsDescriptors){var ES5ObjectShims={setPrototypeOf:function(Object,magic){var set,setPrototypeOf=function(O,proto){return function(O,proto){if(!ES.TypeIsObject(O))throw new TypeError("cannot set prototype on a non-object");if(null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("can only set prototype to an object or null"+proto)}(O,proto),_call(set,O,proto),O};try{set=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,_call(set,{},null)}catch(e){if(Object.prototype!=={}.__proto__)return;set=function(proto){this.__proto__=proto},setPrototypeOf.polyfill=setPrototypeOf(setPrototypeOf({},null),Object.prototype)instanceof Object}return setPrototypeOf}(Object)};defineProperties(Object,ES5ObjectShims)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(FAKENULL=Object.create(null),gpo=Object.getPrototypeOf,spo=Object.setPrototypeOf,Object.getPrototypeOf=function(o){var result=gpo(o);return result===FAKENULL?null:result},Object.setPrototypeOf=function(o,p){return spo(o,null===p?FAKENULL:p)},Object.setPrototypeOf.polyfill=!1);var objectKeysAcceptsPrimitives=!throwsError((function(){return Object.keys("foo")}));if(!objectKeysAcceptsPrimitives){var originalObjectKeys=Object.keys;overrideNative(Object,"keys",(function keys(value){return originalObjectKeys(ES.ToObject(value))})),keys=Object.keys}var objectKeysRejectsRegex=throwsError((function(){return Object.keys(/a/g)}));if(objectKeysRejectsRegex){var regexRejectingObjectKeys=Object.keys;overrideNative(Object,"keys",(function keys(value){if(Type.regex(value)){var regexKeys=[];for(var k in value)_hasOwnProperty(value,k)&&_push(regexKeys,k);return regexKeys}return regexRejectingObjectKeys(value)})),keys=Object.keys}if(Object.getOwnPropertyNames){var objectGOPNAcceptsPrimitives=!throwsError((function(){return Object.getOwnPropertyNames("foo")}));if(!objectGOPNAcceptsPrimitives){var cachedWindowNames="object"==typeof window?Object.getOwnPropertyNames(window):[],originalObjectGetOwnPropertyNames=Object.getOwnPropertyNames;overrideNative(Object,"getOwnPropertyNames",(function getOwnPropertyNames(value){var val=ES.ToObject(value);if("[object Window]"===_toString(val))try{return originalObjectGetOwnPropertyNames(val)}catch(e){return _concat([],cachedWindowNames)}return originalObjectGetOwnPropertyNames(val)}))}}if(Object.getOwnPropertyDescriptor){var objectGOPDAcceptsPrimitives=!throwsError((function(){return Object.getOwnPropertyDescriptor("foo","bar")}));if(!objectGOPDAcceptsPrimitives){var originalObjectGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;overrideNative(Object,"getOwnPropertyDescriptor",(function getOwnPropertyDescriptor(value,property){return originalObjectGetOwnPropertyDescriptor(ES.ToObject(value),property)}))}}if(Object.seal){var objectSealAcceptsPrimitives=!throwsError((function(){return Object.seal("foo")}));if(!objectSealAcceptsPrimitives){var originalObjectSeal=Object.seal;overrideNative(Object,"seal",(function seal(value){return ES.TypeIsObject(value)?originalObjectSeal(value):value}))}}if(Object.isSealed){var objectIsSealedAcceptsPrimitives=!throwsError((function(){return Object.isSealed("foo")}));if(!objectIsSealedAcceptsPrimitives){var originalObjectIsSealed=Object.isSealed;overrideNative(Object,"isSealed",(function isSealed(value){return!ES.TypeIsObject(value)||originalObjectIsSealed(value)}))}}if(Object.freeze){var objectFreezeAcceptsPrimitives=!throwsError((function(){return Object.freeze("foo")}));if(!objectFreezeAcceptsPrimitives){var originalObjectFreeze=Object.freeze;overrideNative(Object,"freeze",(function freeze(value){return ES.TypeIsObject(value)?originalObjectFreeze(value):value}))}}if(Object.isFrozen){var objectIsFrozenAcceptsPrimitives=!throwsError((function(){return Object.isFrozen("foo")}));if(!objectIsFrozenAcceptsPrimitives){var originalObjectIsFrozen=Object.isFrozen;overrideNative(Object,"isFrozen",(function isFrozen(value){return!ES.TypeIsObject(value)||originalObjectIsFrozen(value)}))}}if(Object.preventExtensions){var objectPreventExtensionsAcceptsPrimitives=!throwsError((function(){return Object.preventExtensions("foo")}));if(!objectPreventExtensionsAcceptsPrimitives){var originalObjectPreventExtensions=Object.preventExtensions;overrideNative(Object,"preventExtensions",(function preventExtensions(value){return ES.TypeIsObject(value)?originalObjectPreventExtensions(value):value}))}}if(Object.isExtensible){var objectIsExtensibleAcceptsPrimitives=!throwsError((function(){return Object.isExtensible("foo")}));if(!objectIsExtensibleAcceptsPrimitives){var originalObjectIsExtensible=Object.isExtensible;overrideNative(Object,"isExtensible",(function isExtensible(value){return!!ES.TypeIsObject(value)&&originalObjectIsExtensible(value)}))}}if(Object.getPrototypeOf){var objectGetProtoAcceptsPrimitives=!throwsError((function(){return Object.getPrototypeOf("foo")}));if(!objectGetProtoAcceptsPrimitives){var originalGetProto=Object.getPrototypeOf;overrideNative(Object,"getPrototypeOf",(function getPrototypeOf(value){return originalGetProto(ES.ToObject(value))}))}}var desc,hasFlags=supportsDescriptors&&((desc=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&ES.IsCallable(desc.get));if(supportsDescriptors&&!hasFlags){var regExpFlagsGetter=function flags(){if(!ES.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var result="";return this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.unicode&&(result+="u"),this.sticky&&(result+="y"),result};Value.getter(RegExp.prototype,"flags",regExpFlagsGetter)}var regex,regExpSupportsFlagsWithRegex=supportsDescriptors&&valueOrFalseIfThrows((function(){return"/a/i"===String(new RegExp(/a/g,"i"))})),regExpNeedsToSupportSymbolMatch=hasSymbols&&supportsDescriptors&&((regex=/./)[Symbol.match]=!1,RegExp(regex)===regex),regexToStringIsGeneric=valueOrFalseIfThrows((function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})})),regexToStringSupportsGenericFlags=regexToStringIsGeneric&&valueOrFalseIfThrows((function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})}));if(!regexToStringIsGeneric||!regexToStringSupportsGenericFlags){var origRegExpToString=RegExp.prototype.toString;defineProperty(RegExp.prototype,"toString",(function toString(){var R=ES.RequireObjectCoercible(this);return Type.regex(R)?_call(origRegExpToString,R):"/"+$String(R.source)+"/"+$String(R.flags)}),!0),Value.preserveToString(RegExp.prototype.toString,origRegExpToString)}if(supportsDescriptors&&(!regExpSupportsFlagsWithRegex||regExpNeedsToSupportSymbolMatch)){var flagsGetter=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,sourceDesc=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},legacySourceGetter=function(){return this.source},sourceGetter=ES.IsCallable(sourceDesc.get)?sourceDesc.get:legacySourceGetter,OrigRegExp=RegExp,RegExpShim=function RegExp(pattern,flags){var patternIsRegExp=ES.IsRegExp(pattern);return this instanceof RegExp||!patternIsRegExp||void 0!==flags||pattern.constructor!==RegExp?Type.regex(pattern)?new RegExp(ES.Call(sourceGetter,pattern),void 0===flags?ES.Call(flagsGetter,pattern):flags):(patternIsRegExp&&(pattern.source,void 0===flags&&pattern.flags),new OrigRegExp(pattern,flags)):pattern};wrapConstructor(OrigRegExp,RegExpShim,{$input:!0}),RegExp=RegExpShim,Value.redefine(globals,"RegExp",RegExpShim)}if(supportsDescriptors){var regexGlobals={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};_forEach(keys(regexGlobals),(function(prop){prop in RegExp&&!(regexGlobals[prop]in RegExp)&&Value.getter(RegExp,regexGlobals[prop],(function get(){return RegExp[prop]}))}))}addDefaultSpecies(RegExp);var inverseEpsilon=1/Number.EPSILON,roundTiesToEven=function roundTiesToEven(n){return n+inverseEpsilon-inverseEpsilon},BINARY_32_EPSILON=Math.pow(2,-23),BINARY_32_MAX_VALUE=Math.pow(2,127)*(2-BINARY_32_EPSILON),BINARY_32_MIN_VALUE=Math.pow(2,-126),E=Math.E,LOG2E=Math.LOG2E,LOG10E=Math.LOG10E,numberCLZ=Number.prototype.clz;delete Number.prototype.clz;var MathShims={acosh:function acosh(value){var x=Number(value);if(numberIsNaN(x)||value<1)return NaN;if(1===x)return 0;if(x===1/0)return x;var xInvSquared=1/(x*x);if(x<2)return _log1p(x-1+_sqrt(1-xInvSquared)*x);var halfX=x/2;return _log1p(halfX+_sqrt(1-xInvSquared)*halfX-1)+1/LOG2E},asinh:function asinh(value){var x=Number(value);if(0===x||!globalIsFinite(x))return x;var a=_abs(x),aSquared=a*a,s=_sign(x);return a<1?s*_log1p(a+aSquared/(_sqrt(aSquared+1)+1)):s*(_log1p(a/2+_sqrt(1+1/aSquared)*a/2-1)+1/LOG2E)},atanh:function atanh(value){var x=Number(value);if(0===x)return x;if(-1===x)return-1/0;if(1===x)return 1/0;if(numberIsNaN(x)||x<-1||x>1)return NaN;var a=_abs(x);return _sign(x)*_log1p(2*a/(1-a))/2},cbrt:function cbrt(value){var x=Number(value);if(0===x)return x;var result,negate=x<0;return negate&&(x=-x),result=x===1/0?1/0:(x/((result=_exp(_log(x)/3))*result)+2*result)/3,negate?-result:result},clz32:function clz32(value){var x=Number(value),number=ES.ToUint32(x);return 0===number?32:numberCLZ?ES.Call(numberCLZ,number):31-_floor(_log(number+.5)*LOG2E)},cosh:function cosh(value){var x=Number(value);if(0===x)return 1;if(numberIsNaN(x))return NaN;if(!globalIsFinite(x))return 1/0;var t=_exp(_abs(x)-1);return(t+1/(t*E*E))*(E/2)},expm1:function expm1(value){var x=Number(value);if(x===-1/0)return-1;if(!globalIsFinite(x)||0===x)return x;if(_abs(x)>.5)return _exp(x)-1;for(var t=x,sum=0,n=1;sum+t!==sum;)sum+=t,t*=x/(n+=1);return sum},hypot:function hypot(x,y){for(var result=0,largest=0,i=0;i<arguments.length;++i){var value=_abs(Number(arguments[i]));largest<value?(result*=largest/value*(largest/value),result+=1,largest=value):result+=value>0?value/largest*(value/largest):value}return largest===1/0?1/0:largest*_sqrt(result)},log2:function log2(value){return _log(value)*LOG2E},log10:function log10(value){return _log(value)*LOG10E},log1p:_log1p,sign:_sign,sinh:function sinh(value){var x=Number(value);if(!globalIsFinite(x)||0===x)return x;var a=_abs(x);if(a<1){var u=Math.expm1(a);return _sign(x)*u*(1+1/(u+1))/2}var t=_exp(a-1);return _sign(x)*(t-1/(t*E*E))*(E/2)},tanh:function tanh(value){var x=Number(value);return numberIsNaN(x)||0===x?x:x>=20?1:x<=-20?-1:(Math.expm1(x)-Math.expm1(-x))/(_exp(x)+_exp(-x))},trunc:function trunc(value){var x=Number(value);return x<0?-_floor(-x):_floor(x)},imul:function imul(x,y){var a=ES.ToUint32(x),b=ES.ToUint32(y),al=65535&a,bl=65535&b;return al*bl+((a>>>16&65535)*bl+al*(b>>>16&65535)<<16>>>0)|0},fround:function fround(x){var v=Number(x);if(0===v||v===1/0||v===-1/0||numberIsNaN(v))return v;var sign=_sign(v),abs=_abs(v);if(abs<BINARY_32_MIN_VALUE)return sign*roundTiesToEven(abs/BINARY_32_MIN_VALUE/BINARY_32_EPSILON)*BINARY_32_MIN_VALUE*BINARY_32_EPSILON;var a=(1+BINARY_32_EPSILON/Number.EPSILON)*abs,result=a-(a-abs);return result>BINARY_32_MAX_VALUE||numberIsNaN(result)?sign*(1/0):sign*result}},withinULPDistance=function withinULPDistance(result,expected,distance){return _abs(1-result/expected)/Number.EPSILON<(distance||8)};defineProperties(Math,MathShims),defineProperty(Math,"sinh",MathShims.sinh,Math.sinh(710)===1/0),defineProperty(Math,"cosh",MathShims.cosh,Math.cosh(710)===1/0),defineProperty(Math,"log1p",MathShims.log1p,-1e-17!==Math.log1p(-1e-17)),defineProperty(Math,"asinh",MathShims.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),defineProperty(Math,"asinh",MathShims.asinh,Math.asinh(1e300)===1/0),defineProperty(Math,"atanh",MathShims.atanh,0===Math.atanh(1e-300)),defineProperty(Math,"tanh",MathShims.tanh,-2e-17!==Math.tanh(-2e-17)),defineProperty(Math,"acosh",MathShims.acosh,Math.acosh(Number.MAX_VALUE)===1/0),defineProperty(Math,"acosh",MathShims.acosh,!withinULPDistance(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),defineProperty(Math,"cbrt",MathShims.cbrt,!withinULPDistance(Math.cbrt(1e-300),1e-100)),defineProperty(Math,"sinh",MathShims.sinh,-2e-17!==Math.sinh(-2e-17));var expm1OfTen=Math.expm1(10);defineProperty(Math,"expm1",MathShims.expm1,expm1OfTen>22025.465794806718||expm1OfTen<22025.465794806718);var origMathRound=Math.round,roundHandlesBoundaryConditions=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),smallestPositiveNumberWhereRoundBreaks=inverseEpsilon+1,largestPositiveNumberWhereRoundBreaks=2*inverseEpsilon-1,roundDoesNotIncreaseIntegers=[smallestPositiveNumberWhereRoundBreaks,largestPositiveNumberWhereRoundBreaks].every((function(num){return Math.round(num)===num}));defineProperty(Math,"round",(function round(x){var floor=_floor(x);return x-floor<.5?floor:-1===floor?-0:floor+1}),!roundHandlesBoundaryConditions||!roundDoesNotIncreaseIntegers),Value.preserveToString(Math.round,origMathRound);var origImul=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=MathShims.imul,Value.preserveToString(Math.imul,origImul)),2!==Math.imul.length&&overrideNative(Math,"imul",(function imul(x,y){return ES.Call(origImul,Math,arguments)}));var count,thenable,PromiseShim=function(){var setTimeout=globals.setTimeout;if("function"==typeof setTimeout||"object"==typeof setTimeout){ES.IsPromise=function(promise){return!!ES.TypeIsObject(promise)&&void 0!==promise._promise};var makeZeroTimeout,PromiseCapability=function(C){if(!ES.IsConstructor(C))throw new TypeError("Bad promise constructor");var capability=this;if(capability.resolve=void 0,capability.reject=void 0,capability.promise=new C((function(resolve,reject){if(void 0!==capability.resolve||void 0!==capability.reject)throw new TypeError("Bad Promise implementation!");capability.resolve=resolve,capability.reject=reject})),!ES.IsCallable(capability.resolve)||!ES.IsCallable(capability.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ES.IsCallable(window.postMessage)&&(makeZeroTimeout=function(){var timeouts=[];return window.addEventListener("message",(function(event){if(event.source===window&&"zero-timeout-message"===event.data){if(event.stopPropagation(),0===timeouts.length)return;_shift(timeouts)()}}),!0),function(fn){_push(timeouts,fn),window.postMessage("zero-timeout-message","*")}});var P,pr,Promise$prototype,Promise$prototype$then,enqueue=ES.IsCallable(globals.setImmediate)?globals.setImmediate:"object"==typeof process&&process.nextTick?process.nextTick:(P=globals.Promise,(pr=P&&P.resolve&&P.resolve())&&function(task){return pr.then(task)}||(ES.IsCallable(makeZeroTimeout)?makeZeroTimeout():function(task){setTimeout(task,0)})),PROMISE_IDENTITY=function(x){return x},PROMISE_THROWER=function(e){throw e},PROMISE_FAKE_CAPABILITY={},enqueuePromiseReactionJob=function(handler,capability,argument){enqueue((function(){promiseReactionJob(handler,capability,argument)}))},promiseReactionJob=function(handler,promiseCapability,argument){var handlerResult,f;if(promiseCapability===PROMISE_FAKE_CAPABILITY)return handler(argument);try{handlerResult=handler(argument),f=promiseCapability.resolve}catch(e){handlerResult=e,f=promiseCapability.reject}f(handlerResult)},fulfillPromise=function(promise,value){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.fulfillReactionHandler0,_promise.reactionCapability0,value),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+0],_promise[idx+2],value),promise[idx+0]=void 0,promise[idx+1]=void 0,promise[idx+2]=void 0;_promise.result=value,_promise.state=1,_promise.reactionLength=0},rejectPromise=function(promise,reason){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.rejectReactionHandler0,_promise.reactionCapability0,reason),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+1],_promise[idx+2],reason),promise[idx+0]=void 0,promise[idx+1]=void 0,promise[idx+2]=void 0;_promise.result=reason,_promise.state=2,_promise.reactionLength=0},createResolvingFunctions=function(promise){var alreadyResolved=!1;return{resolve:function(resolution){var then;if(!alreadyResolved){if(alreadyResolved=!0,resolution===promise)return rejectPromise(promise,new TypeError("Self resolution"));if(!ES.TypeIsObject(resolution))return fulfillPromise(promise,resolution);try{then=resolution.then}catch(e){return rejectPromise(promise,e)}if(!ES.IsCallable(then))return fulfillPromise(promise,resolution);enqueue((function(){promiseResolveThenableJob(promise,resolution,then)}))}},reject:function(reason){if(!alreadyResolved)return alreadyResolved=!0,rejectPromise(promise,reason)}}},optimizedThen=function(then,thenable,resolve,reject){then===Promise$prototype$then?_call(then,thenable,resolve,reject,PROMISE_FAKE_CAPABILITY):_call(then,thenable,resolve,reject)},promiseResolveThenableJob=function(promise,thenable,then){var resolvingFunctions=createResolvingFunctions(promise),resolve=resolvingFunctions.resolve,reject=resolvingFunctions.reject;try{optimizedThen(then,thenable,resolve,reject)}catch(e){reject(e)}},Promise=function(){var PromiseShim=function Promise(resolver){if(!(this instanceof PromiseShim))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ES.IsCallable(resolver))throw new TypeError("not a valid resolver");var promise=emulateES6construct(this,PromiseShim,Promise$prototype,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),resolvingFunctions=createResolvingFunctions(promise),reject=resolvingFunctions.reject;try{resolver(resolvingFunctions.resolve,reject)}catch(e){reject(e)}return promise};return PromiseShim}();Promise$prototype=Promise.prototype;var _promiseAllResolver=function(index,values,capability,remaining){var alreadyCalled=!1;return function(x){alreadyCalled||(alreadyCalled=!0,values[index]=x,0==--remaining.count&&(0,capability.resolve)(values))}};return defineProperties(Promise,{all:function all(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var iterator,iteratorRecord,capability=new PromiseCapability(C);try{return function(iteratorRecord,C,resultCapability){for(var next,nextValue,it=iteratorRecord.iterator,values=[],remaining={count:1},index=0;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}values[index]=void 0;var nextPromise=C.resolve(nextValue),resolveElement=_promiseAllResolver(index,values,resultCapability,remaining);remaining.count+=1,optimizedThen(nextPromise.then,nextPromise,resolveElement,resultCapability.reject),index+=1}return 0==--remaining.count&&(0,resultCapability.resolve)(values),resultCapability.promise}(iteratorRecord={iterator:iterator=ES.GetIterator(iterable),done:!1},C,capability)}catch(e){var exception=e;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}return(0,capability.reject)(exception),capability.promise}},race:function race(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var iterator,iteratorRecord,capability=new PromiseCapability(C);try{return function(iteratorRecord,C,resultCapability){for(var next,nextValue,nextPromise,it=iteratorRecord.iterator;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}nextPromise=C.resolve(nextValue),optimizedThen(nextPromise.then,nextPromise,resultCapability.resolve,resultCapability.reject)}return resultCapability.promise}(iteratorRecord={iterator:iterator=ES.GetIterator(iterable),done:!1},C,capability)}catch(e){var exception=e;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}return(0,capability.reject)(exception),capability.promise}},reject:function reject(reason){if(!ES.TypeIsObject(this))throw new TypeError("Bad promise constructor");var capability=new PromiseCapability(this);return(0,capability.reject)(reason),capability.promise},resolve:function resolve(v){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Bad promise constructor");if(ES.IsPromise(v)&&v.constructor===C)return v;var capability=new PromiseCapability(C);return(0,capability.resolve)(v),capability.promise}}),defineProperties(Promise$prototype,{catch:function(onRejected){return this.then(null,onRejected)},then:function then(onFulfilled,onRejected){var promise=this;if(!ES.IsPromise(promise))throw new TypeError("not a promise");var resultCapability,C=ES.SpeciesConstructor(promise,Promise),returnValueIsIgnored=arguments.length>2&&arguments[2]===PROMISE_FAKE_CAPABILITY;resultCapability=returnValueIsIgnored&&C===Promise?PROMISE_FAKE_CAPABILITY:new PromiseCapability(C);var value,fulfillReactionHandler=ES.IsCallable(onFulfilled)?onFulfilled:PROMISE_IDENTITY,rejectReactionHandler=ES.IsCallable(onRejected)?onRejected:PROMISE_THROWER,_promise=promise._promise;if(0===_promise.state){if(0===_promise.reactionLength)_promise.fulfillReactionHandler0=fulfillReactionHandler,_promise.rejectReactionHandler0=rejectReactionHandler,_promise.reactionCapability0=resultCapability;else{var idx=3*(_promise.reactionLength-1);_promise[idx+0]=fulfillReactionHandler,_promise[idx+1]=rejectReactionHandler,_promise[idx+2]=resultCapability}_promise.reactionLength+=1}else if(1===_promise.state)value=_promise.result,enqueuePromiseReactionJob(fulfillReactionHandler,resultCapability,value);else{if(2!==_promise.state)throw new TypeError("unexpected Promise state");value=_promise.result,enqueuePromiseReactionJob(rejectReactionHandler,resultCapability,value)}return resultCapability.promise}}),PROMISE_FAKE_CAPABILITY=new PromiseCapability(Promise),Promise$prototype$then=Promise$prototype.then,Promise}}();if(globals.Promise&&(delete globals.Promise.accept,delete globals.Promise.defer,delete globals.Promise.prototype.chain),"function"==typeof PromiseShim){defineProperties(globals,{Promise:PromiseShim});var promiseSupportsSubclassing=supportsSubclassing(globals.Promise,(function(S){return S.resolve(42).then((function(){}))instanceof S})),promiseIgnoresNonFunctionThenCallbacks=!throwsError((function(){return globals.Promise.reject(42).then(null,5).then(null,noop)})),promiseRequiresObjectContext=throwsError((function(){return globals.Promise.call(3,noop)})),promiseResolveBroken=function(Promise){var p=Promise.resolve(5);p.constructor={};var p2=Promise.resolve(p);try{p2.then(null,noop).then(null,noop)}catch(e){return!0}return p===p2}(globals.Promise),getsThenSynchronously=supportsDescriptors&&(count=0,thenable=Object.defineProperty({},"then",{get:function(){count+=1}}),Promise.resolve(thenable),1===count),BadResolverPromise=function BadResolverPromise(executor){var p=new Promise(executor);executor(3,(function(){})),this.then=p.then,this.constructor=BadResolverPromise};BadResolverPromise.prototype=Promise.prototype,BadResolverPromise.all=Promise.all;var hasBadResolverPromise=valueOrFalseIfThrows((function(){return!!BadResolverPromise.all([1,2])}));if(promiseSupportsSubclassing&&promiseIgnoresNonFunctionThenCallbacks&&promiseRequiresObjectContext&&!promiseResolveBroken&&getsThenSynchronously&&!hasBadResolverPromise||(Promise=PromiseShim,overrideNative(globals,"Promise",PromiseShim)),1!==Promise.all.length){var origAll=Promise.all;overrideNative(Promise,"all",(function all(iterable){return ES.Call(origAll,this,arguments)}))}if(1!==Promise.race.length){var origRace=Promise.race;overrideNative(Promise,"race",(function race(iterable){return ES.Call(origRace,this,arguments)}))}if(1!==Promise.resolve.length){var origResolve=Promise.resolve;overrideNative(Promise,"resolve",(function resolve(x){return ES.Call(origResolve,this,arguments)}))}if(1!==Promise.reject.length){var origReject=Promise.reject;overrideNative(Promise,"reject",(function reject(r){return ES.Call(origReject,this,arguments)}))}ensureEnumerable(Promise,"all"),ensureEnumerable(Promise,"race"),ensureEnumerable(Promise,"resolve"),ensureEnumerable(Promise,"reject"),addDefaultSpecies(Promise)}var s,m,testOrder=function(a){var b=keys(_reduce(a,(function(o,k){return o[k]=!0,o}),{}));return a.join(":")===b.join(":")},preservesInsertionOrder=testOrder(["z","a","bb"]),preservesNumericInsertionOrder=testOrder(["z",1,"a","3",2]);if(supportsDescriptors){var fastkey=function fastkey(key,skipInsertionOrderCheck){return skipInsertionOrderCheck||preservesInsertionOrder?isNullOrUndefined(key)?"^"+ES.ToString(key):"string"==typeof key?"$"+key:"number"==typeof key?preservesNumericInsertionOrder?key:"n"+key:"boolean"==typeof key?"b"+key:null:null},emptyObject=function emptyObject(){return Object.create?Object.create(null):{}},addIterableToMap=function addIterableToMap(MapConstructor,map,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,(function(entry){if(!ES.TypeIsObject(entry))throw new TypeError("Iterator value "+entry+" is not an entry object");map.set(entry[0],entry[1])}));else if(iterable instanceof MapConstructor)_call(MapConstructor.prototype.forEach,iterable,(function(value,key){map.set(key,value)}));else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=map.set,!ES.IsCallable(adder))throw new TypeError("bad map");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextItem=next.value;try{if(!ES.TypeIsObject(nextItem))throw new TypeError("Iterator value "+nextItem+" is not an entry object");_call(adder,map,nextItem[0],nextItem[1])}catch(e){throw ES.IteratorClose(iter,!0),e}}}},addIterableToSet=function addIterableToSet(SetConstructor,set,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,(function(value){set.add(value)}));else if(iterable instanceof SetConstructor)_call(SetConstructor.prototype.forEach,iterable,(function(value){set.add(value)}));else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=set.add,!ES.IsCallable(adder))throw new TypeError("bad set");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextValue=next.value;try{_call(adder,set,nextValue)}catch(e){throw ES.IteratorClose(iter,!0),e}}}},collectionShims={Map:function(){var empty={},MapEntry=function MapEntry(key,value){this.key=key,this.value=value,this.next=null,this.prev=null};MapEntry.prototype.isRemoved=function isRemoved(){return this.key===empty};var Map$prototype,requireMapSlot=function requireMapSlot(map,method){if(!ES.TypeIsObject(map)||!function isMap(map){return!!map._es6map}(map))throw new TypeError("Method Map.prototype."+method+" called on incompatible receiver "+ES.ToString(map))},MapIterator=function MapIterator(map,kind){requireMapSlot(map,"[[MapIterator]]"),this.head=map._head,this.i=this.head,this.kind=kind};addIterator(MapIterator.prototype={isMapIterator:!0,next:function next(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var result,i=this.i,kind=this.kind,head=this.head;if(void 0===this.i)return iteratorResult();for(;i.isRemoved()&&i!==head;)i=i.prev;for(;i.next!==head;)if(!(i=i.next).isRemoved())return result="key"===kind?i.key:"value"===kind?i.value:[i.key,i.value],this.i=i,iteratorResult(result);return this.i=void 0,iteratorResult()}});var MapShim=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var map=emulateES6construct(this,Map,Map$prototype,{_es6map:!0,_head:null,_map:OrigMap?new OrigMap:null,_size:0,_storage:emptyObject()}),head=new MapEntry(null,null);return head.next=head.prev=head,map._head=head,arguments.length>0&&addIterableToMap(Map,map,arguments[0]),map};return Map$prototype=MapShim.prototype,Value.getter(Map$prototype,"size",(function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size})),defineProperties(Map$prototype,{get:function get(key){var entry;requireMapSlot(this,"get");var fkey=fastkey(key,!0);if(null!==fkey)return(entry=this._storage[fkey])?entry.value:void 0;if(this._map)return(entry=origMapGet.call(this._map,key))?entry.value:void 0;for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value},has:function has(key){requireMapSlot(this,"has");var fkey=fastkey(key,!0);if(null!==fkey)return void 0!==this._storage[fkey];if(this._map)return origMapHas.call(this._map,key);for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return!0;return!1},set:function set(key,value){requireMapSlot(this,"set");var entry,head=this._head,i=head,fkey=fastkey(key,!0);if(null!==fkey){if(void 0!==this._storage[fkey])return this._storage[fkey].value=value,this;entry=this._storage[fkey]=new MapEntry(key,value),i=head.prev}else this._map&&(origMapHas.call(this._map,key)?origMapGet.call(this._map,key).value=value:(entry=new MapEntry(key,value),origMapSet.call(this._map,key,entry),i=head.prev));for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value=value,this;return entry=entry||new MapEntry(key,value),ES.SameValue(-0,key)&&(entry.key=0),entry.next=this._head,entry.prev=this._head.prev,entry.prev.next=entry,entry.next.prev=entry,this._size+=1,this},delete:function(key){requireMapSlot(this,"delete");var head=this._head,i=head,fkey=fastkey(key,!0);if(null!==fkey){if(void 0===this._storage[fkey])return!1;i=this._storage[fkey].prev,delete this._storage[fkey]}else if(this._map){if(!origMapHas.call(this._map,key))return!1;i=origMapGet.call(this._map,key).prev,origMapDelete.call(this._map,key)}for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.key=empty,i.value=empty,i.prev.next=i.next,i.next.prev=i.prev,this._size-=1,!0;return!1},clear:function clear(){requireMapSlot(this,"clear"),this._map=OrigMap?new OrigMap:null,this._size=0,this._storage=emptyObject();for(var head=this._head,i=head,p=i.next;(i=p)!==head;)i.key=empty,i.value=empty,p=i.next,i.next=i.prev=head;head.next=head.prev=head},keys:function keys(){return requireMapSlot(this,"keys"),new MapIterator(this,"key")},values:function values(){return requireMapSlot(this,"values"),new MapIterator(this,"value")},entries:function entries(){return requireMapSlot(this,"entries"),new MapIterator(this,"key+value")},forEach:function forEach(callback){requireMapSlot(this,"forEach");for(var context=arguments.length>1?arguments[1]:null,it=this.entries(),entry=it.next();!entry.done;entry=it.next())context?_call(callback,context,entry.value[1],entry.value[0],this):callback(entry.value[1],entry.value[0],this)}}),addIterator(Map$prototype,Map$prototype.entries),MapShim}(),Set:function(){var Set$prototype,requireSetSlot=function requireSetSlot(set,method){if(!ES.TypeIsObject(set)||!function isSet(set){return set._es6set&&void 0!==set._storage}(set))throw new TypeError("Set.prototype."+method+" called on incompatible receiver "+ES.ToString(set))},SetShim=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var set=emulateES6construct(this,Set,Set$prototype,{_es6set:!0,"[[SetData]]":null,_storage:emptyObject()});if(!set._es6set)throw new TypeError("bad set");return arguments.length>0&&addIterableToSet(Set,set,arguments[0]),set};Set$prototype=SetShim.prototype;var ensureMap=function ensureMap(set){if(!set["[[SetData]]"]){var m=new collectionShims.Map;set["[[SetData]]"]=m,_forEach(keys(set._storage),(function(key){var k=function(key){var k=key;if("^null"===k)return null;if("^undefined"!==k){var first=k.charAt(0);return"$"===first?_strSlice(k,1):"n"===first?+_strSlice(k,1):"b"===first?"btrue"===k:+k}}(key);m.set(k,k)})),set["[[SetData]]"]=m}set._storage=null};Value.getter(SetShim.prototype,"size",(function(){return requireSetSlot(this,"size"),this._storage?keys(this._storage).length:(ensureMap(this),this["[[SetData]]"].size)})),defineProperties(SetShim.prototype,{has:function has(key){var fkey;return requireSetSlot(this,"has"),this._storage&&null!==(fkey=fastkey(key))?!!this._storage[fkey]:(ensureMap(this),this["[[SetData]]"].has(key))},add:function add(key){var fkey;return requireSetSlot(this,"add"),this._storage&&null!==(fkey=fastkey(key))?(this._storage[fkey]=!0,this):(ensureMap(this),this["[[SetData]]"].set(key,key),this)},delete:function(key){var fkey;if(requireSetSlot(this,"delete"),this._storage&&null!==(fkey=fastkey(key))){var hasFKey=_hasOwnProperty(this._storage,fkey);return delete this._storage[fkey]&&hasFKey}return ensureMap(this),this["[[SetData]]"].delete(key)},clear:function clear(){requireSetSlot(this,"clear"),this._storage&&(this._storage=emptyObject()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function values(){return requireSetSlot(this,"values"),ensureMap(this),new SetIterator(this["[[SetData]]"].values())},entries:function entries(){return requireSetSlot(this,"entries"),ensureMap(this),new SetIterator(this["[[SetData]]"].entries())},forEach:function forEach(callback){requireSetSlot(this,"forEach");var context=arguments.length>1?arguments[1]:null,entireSet=this;ensureMap(entireSet),this["[[SetData]]"].forEach((function(value,key){context?_call(callback,context,key,key,entireSet):callback(key,key,entireSet)}))}}),defineProperty(SetShim.prototype,"keys",SetShim.prototype.values,!0),addIterator(SetShim.prototype,SetShim.prototype.values);var SetIterator=function SetIterator(it){this.it=it};return SetIterator.prototype={isSetIterator:!0,next:function next(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},addIterator(SetIterator.prototype),SetShim}()},isGoogleTranslate=globals.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(isGoogleTranslate&&(globals.Set=collectionShims.Set),globals.Map||globals.Set){var mapAcceptsArguments=valueOrFalseIfThrows((function(){return 2===new Map([[1,2]]).get(1)}));mapAcceptsArguments||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,globals.Map.prototype),m},globals.Map.prototype=create(OrigMap.prototype),defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var testMap=new Map,mapUsesSameValueZero=((m=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,m),m.get(0)===m&&m.get(-0)===m&&m.has(0)&&m.has(-0)),mapSupportsChaining=testMap.set(1,2)===testMap;mapUsesSameValueZero&&mapSupportsChaining||overrideNative(Map.prototype,"set",(function set(k,v){return _call(origMapSet,this,0===k?0:k,v),this})),mapUsesSameValueZero||(defineProperties(Map.prototype,{get:function get(k){return _call(origMapGet,this,0===k?0:k)},has:function has(k){return _call(origMapHas,this,0===k?0:k)}},!0),Value.preserveToString(Map.prototype.get,origMapGet),Value.preserveToString(Map.prototype.has,origMapHas));var testSet=new Set,setUsesSameValueZero=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&((s=testSet).delete(0),s.add(-0),!s.has(0)),setSupportsChaining=testSet.add(1)===testSet;if(!setUsesSameValueZero||!setSupportsChaining){var origSetAdd=Set.prototype.add;Set.prototype.add=function add(v){return _call(origSetAdd,this,0===v?0:v),this},Value.preserveToString(Set.prototype.add,origSetAdd)}if(!setUsesSameValueZero){var origSetHas=Set.prototype.has;Set.prototype.has=function has(v){return _call(origSetHas,this,0===v?0:v)},Value.preserveToString(Set.prototype.has,origSetHas);var origSetDel=Set.prototype.delete;Set.prototype.delete=function SetDelete(v){return _call(origSetDel,this,0===v?0:v)},Value.preserveToString(Set.prototype.delete,origSetDel)}var mapSupportsSubclassing=supportsSubclassing(globals.Map,(function(M){var m=new M([]);return m.set(42,42),m instanceof M})),mapFailsToSupportSubclassing=Object.setPrototypeOf&&!mapSupportsSubclassing,mapRequiresNew=function(){try{return!(globals.Map()instanceof globals.Map)}catch(e){return e instanceof TypeError}}();0===globals.Map.length&&!mapFailsToSupportSubclassing&&mapRequiresNew||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,Map.prototype),m},globals.Map.prototype=OrigMap.prototype,defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var setSupportsSubclassing=supportsSubclassing(globals.Set,(function(S){var s=new S([]);return s.add(42,42),s instanceof S})),setFailsToSupportSubclassing=Object.setPrototypeOf&&!setSupportsSubclassing,setRequiresNew=function(){try{return!(globals.Set()instanceof globals.Set)}catch(e){return e instanceof TypeError}}();if(0!==globals.Set.length||setFailsToSupportSubclassing||!setRequiresNew){var OrigSet=globals.Set;globals.Set=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');var s=new OrigSet;return arguments.length>0&&addIterableToSet(Set,s,arguments[0]),delete s.constructor,Object.setPrototypeOf(s,Set.prototype),s},globals.Set.prototype=OrigSet.prototype,defineProperty(globals.Set.prototype,"constructor",globals.Set,!0),Value.preserveToString(globals.Set,OrigSet)}var newMap=new globals.Map,mapIterationThrowsStopIterator=!valueOrFalseIfThrows((function(){return newMap.keys().next().done}));if(("function"!=typeof globals.Map.prototype.clear||0!==(new globals.Set).size||0!==newMap.size||"function"!=typeof globals.Map.prototype.keys||"function"!=typeof globals.Set.prototype.keys||"function"!=typeof globals.Map.prototype.forEach||"function"!=typeof globals.Set.prototype.forEach||isCallableWithoutNew(globals.Map)||isCallableWithoutNew(globals.Set)||"function"!=typeof newMap.keys().next||mapIterationThrowsStopIterator||!mapSupportsSubclassing)&&defineProperties(globals,{Map:collectionShims.Map,Set:collectionShims.Set},!0),globals.Set.prototype.keys!==globals.Set.prototype.values&&defineProperty(globals.Set.prototype,"keys",globals.Set.prototype.values,!0),addIterator(Object.getPrototypeOf((new globals.Map).keys())),addIterator(Object.getPrototypeOf((new globals.Set).keys())),functionsHaveNames&&"has"!==globals.Set.prototype.has.name){var anonymousSetHas=globals.Set.prototype.has;overrideNative(globals.Set.prototype,"has",(function has(key){return _call(anonymousSetHas,this,key)}))}}defineProperties(globals,collectionShims),addDefaultSpecies(globals.Map),addDefaultSpecies(globals.Set)}var throwUnlessTargetIsObject=function throwUnlessTargetIsObject(target){if(!ES.TypeIsObject(target))throw new TypeError("target must be an object")},ReflectShims={apply:function apply(){return ES.Call(ES.Call,null,arguments)},construct:function construct(constructor,args){if(!ES.IsConstructor(constructor))throw new TypeError("First argument must be a constructor.");var newTarget=arguments.length>2?arguments[2]:constructor;if(!ES.IsConstructor(newTarget))throw new TypeError("new.target must be a constructor.");return ES.Construct(constructor,args,newTarget,"internal")},deleteProperty:function deleteProperty(target,key){if(throwUnlessTargetIsObject(target),supportsDescriptors){var desc=Object.getOwnPropertyDescriptor(target,key);if(desc&&!desc.configurable)return!1}return delete target[key]},has:function has(target,key){return throwUnlessTargetIsObject(target),key in target}};Object.getOwnPropertyNames&&Object.assign(ReflectShims,{ownKeys:function ownKeys(target){throwUnlessTargetIsObject(target);var keys=Object.getOwnPropertyNames(target);return ES.IsCallable(Object.getOwnPropertySymbols)&&_pushApply(keys,Object.getOwnPropertySymbols(target)),keys}});var callAndCatchException=function ConvertExceptionToBoolean(func){return!throwsError(func)};if(Object.preventExtensions&&Object.assign(ReflectShims,{isExtensible:function isExtensible(target){return throwUnlessTargetIsObject(target),Object.isExtensible(target)},preventExtensions:function preventExtensions(target){return throwUnlessTargetIsObject(target),callAndCatchException((function(){return Object.preventExtensions(target)}))}}),supportsDescriptors){var internalGet=function get(target,key,receiver){var desc=Object.getOwnPropertyDescriptor(target,key);if(!desc){var parent=Object.getPrototypeOf(target);if(null===parent)return;return internalGet(parent,key,receiver)}return"value"in desc?desc.value:desc.get?ES.Call(desc.get,receiver):void 0},internalSet=function set(target,key,value,receiver){var desc=Object.getOwnPropertyDescriptor(target,key);if(!desc){var parent=Object.getPrototypeOf(target);if(null!==parent)return internalSet(parent,key,value,receiver);desc={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in desc?!!desc.writable&&!!ES.TypeIsObject(receiver)&&(Object.getOwnPropertyDescriptor(receiver,key)?Reflect.defineProperty(receiver,key,{value:value}):Reflect.defineProperty(receiver,key,{value:value,writable:!0,enumerable:!0,configurable:!0})):!!desc.set&&(_call(desc.set,receiver,value),!0)};Object.assign(ReflectShims,{defineProperty:function defineProperty(target,propertyKey,attributes){return throwUnlessTargetIsObject(target),callAndCatchException((function(){return Object.defineProperty(target,propertyKey,attributes)}))},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,propertyKey){return throwUnlessTargetIsObject(target),Object.getOwnPropertyDescriptor(target,propertyKey)},get:function get(target,key){throwUnlessTargetIsObject(target);var receiver=arguments.length>2?arguments[2]:target;return internalGet(target,key,receiver)},set:function set(target,key,value){throwUnlessTargetIsObject(target);var receiver=arguments.length>3?arguments[3]:target;return internalSet(target,key,value,receiver)}})}if(Object.getPrototypeOf){var objectDotGetPrototypeOf=Object.getPrototypeOf;ReflectShims.getPrototypeOf=function getPrototypeOf(target){return throwUnlessTargetIsObject(target),objectDotGetPrototypeOf(target)}}if(Object.setPrototypeOf&&ReflectShims.getPrototypeOf){var willCreateCircularPrototype=function(object,lastProto){for(var proto=lastProto;proto;){if(object===proto)return!0;proto=ReflectShims.getPrototypeOf(proto)}return!1};Object.assign(ReflectShims,{setPrototypeOf:function setPrototypeOf(object,proto){if(throwUnlessTargetIsObject(object),null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("proto must be an object or null");return proto===Reflect.getPrototypeOf(object)||!(Reflect.isExtensible&&!Reflect.isExtensible(object))&&!willCreateCircularPrototype(object,proto)&&(Object.setPrototypeOf(object,proto),!0)}})}var defineOrOverrideReflectProperty=function(key,shim){ES.IsCallable(globals.Reflect[key])?valueOrFalseIfThrows((function(){return globals.Reflect[key](1),globals.Reflect[key](NaN),globals.Reflect[key](!0),!0}))&&overrideNative(globals.Reflect,key,shim):defineProperty(globals.Reflect,key,shim)};Object.keys(ReflectShims).forEach((function(key){defineOrOverrideReflectProperty(key,ReflectShims[key])}));var originalReflectGetProto=globals.Reflect.getPrototypeOf;if(functionsHaveNames&&originalReflectGetProto&&"getPrototypeOf"!==originalReflectGetProto.name&&overrideNative(globals.Reflect,"getPrototypeOf",(function getPrototypeOf(target){return _call(originalReflectGetProto,globals.Reflect,target)})),globals.Reflect.setPrototypeOf&&valueOrFalseIfThrows((function(){return globals.Reflect.setPrototypeOf(1,{}),!0}))&&overrideNative(globals.Reflect,"setPrototypeOf",ReflectShims.setPrototypeOf),globals.Reflect.defineProperty&&(valueOrFalseIfThrows((function(){var basic=!globals.Reflect.defineProperty(1,"test",{value:1}),extensible="function"!=typeof Object.preventExtensions||!globals.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return basic&&extensible}))||overrideNative(globals.Reflect,"defineProperty",ReflectShims.defineProperty)),globals.Reflect.construct&&(valueOrFalseIfThrows((function(){var F=function F(){};return globals.Reflect.construct((function(){}),[],F)instanceof F}))||overrideNative(globals.Reflect,"construct",ReflectShims.construct)),"Invalid Date"!==String(new Date(NaN))){var dateToString=Date.prototype.toString,shimmedDateToString=function toString(){var valueOf=+this;return valueOf!=valueOf?"Invalid Date":ES.Call(dateToString,this)};overrideNative(Date.prototype,"toString",shimmedDateToString)}var stringHTMLshims={anchor:function anchor(name){return ES.CreateHTML(this,"a","name",name)},big:function big(){return ES.CreateHTML(this,"big","","")},blink:function blink(){return ES.CreateHTML(this,"blink","","")},bold:function bold(){return ES.CreateHTML(this,"b","","")},fixed:function fixed(){return ES.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(color){return ES.CreateHTML(this,"font","color",color)},fontsize:function fontsize(size){return ES.CreateHTML(this,"font","size",size)},italics:function italics(){return ES.CreateHTML(this,"i","","")},link:function link(url){return ES.CreateHTML(this,"a","href",url)},small:function small(){return ES.CreateHTML(this,"small","","")},strike:function strike(){return ES.CreateHTML(this,"strike","","")},sub:function sub(){return ES.CreateHTML(this,"sub","","")},sup:function sub(){return ES.CreateHTML(this,"sup","","")}};_forEach(Object.keys(stringHTMLshims),(function(key){var method=String.prototype[key],shouldOverwrite=!1;if(ES.IsCallable(method)){var output=_call(method,"",' " '),quotesCount=_concat([],output.match(/"/g)).length;shouldOverwrite=output!==output.toLowerCase()||quotesCount>2}else shouldOverwrite=!0;shouldOverwrite&&overrideNative(String.prototype,key,stringHTMLshims[key])}));var JSONstringifiesSymbols=function(){if(!hasSymbols)return!1;var stringify="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!stringify)return!1;if(void 0!==stringify(Symbol()))return!0;if("[null]"!==stringify([Symbol()]))return!0;var obj={a:Symbol()};return obj[Symbol()]=!0,"{}"!==stringify(obj)}(),JSONstringifyAcceptsObjectSymbol=valueOrFalseIfThrows((function(){return!hasSymbols||"{}"===JSON.stringify(Object(Symbol()))&&"[{}]"===JSON.stringify([Object(Symbol())])}));if(JSONstringifiesSymbols||!JSONstringifyAcceptsObjectSymbol){var origStringify=JSON.stringify;overrideNative(JSON,"stringify",(function stringify(value){if("symbol"!=typeof value){var replacer;arguments.length>1&&(replacer=arguments[1]);var args=[value];if(isArray(replacer))args.push(replacer);else{var replaceFn=ES.IsCallable(replacer)?replacer:null,wrappedReplacer=function(key,val){var parsedValue=replaceFn?_call(replaceFn,this,key,val):val;if("symbol"!=typeof parsedValue)return Type.symbol(parsedValue)?assignTo({})(parsedValue):parsedValue};args.push(wrappedReplacer)}return arguments.length>2&&args.push(arguments[2]),origStringify.apply(this,args)}}))}return globals})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}).call(this,__webpack_require__(36),__webpack_require__(72))},function(module,exports,__webpack_require__){"use strict";var supportsDescriptors=__webpack_require__(32).supportsDescriptors,functionsHaveNames=__webpack_require__(321)(),getPolyfill=__webpack_require__(469),defineProperty=Object.defineProperty,TypeErr=TypeError;module.exports=function shimName(){var polyfill=getPolyfill();if(functionsHaveNames)return polyfill;if(!supportsDescriptors)throw new TypeErr("Shimming Function.prototype.name support requires ES5 property descriptor support.");var functionProto=Function.prototype;return defineProperty(functionProto,"name",{configurable:!0,enumerable:!1,get:function(){var name=polyfill.call(this);return this!==functionProto&&defineProperty(this,"name",{configurable:!0,enumerable:!1,value:name,writable:!1}),name}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var keysShim;if(!Object.keys){var has=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArgs=__webpack_require__(320),isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call((function(){}),"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{if(!excludedKeys["$"+k]&&has.call(window,k)&&null!==window[k]&&"object"==typeof window[k])try{equalsConstructorPrototype(window[k])}catch(e){return!0}}catch(e){return!0}return!1}();keysShim=function keys(object){var isObject=null!==object&&"object"==typeof object,isFunction="[object Function]"===toStr.call(object),isArguments=isArgs(object),isString=isObject&&"[object String]"===toStr.call(object),theKeys=[];if(!isObject&&!isFunction&&!isArguments)throw new TypeError("Object.keys called on a non-object");var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object.length>0&&!has.call(object,0))for(var i=0;i<object.length;++i)theKeys.push(String(i));if(isArguments&&object.length>0)for(var j=0;j<object.length;++j)theKeys.push(String(j));else for(var name in object)skipProto&&"prototype"===name||!has.call(object,name)||theKeys.push(String(name));if(hasDontEnumBug)for(var skipConstructor=function(o){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(o);try{return equalsConstructorPrototype(o)}catch(e){return!1}}(object),k=0;k<dontEnums.length;++k)skipConstructor&&"constructor"===dontEnums[k]||!has.call(object,dontEnums[k])||theKeys.push(dontEnums[k]);return theKeys}}module.exports=keysShim},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(470);module.exports=function getPolyfill(){return implementation}},function(module,exports,__webpack_require__){"use strict";var isCallable=__webpack_require__(204),functionsHaveNames=__webpack_require__(321)(),bind=__webpack_require__(64),functionToString=bind.call(Function.call,Function.prototype.toString),stringMatch=bind.call(Function.call,String.prototype.match),classRegex=/^class /,regex=/\s*function\s+([^(\s]*)\s*/,functionProto=Function.prototype;module.exports=function getName(){if(!function isClassConstructor(fn){if(isCallable(fn))return!1;if("function"!=typeof fn)return!1;try{return!!stringMatch(functionToString(fn),classRegex)}catch(e){}return!1}(this)&&!isCallable(this))throw new TypeError("Function.prototype.name sham getter called on non-function");if(functionsHaveNames)return this.name;if(this===functionProto)return"";var str=functionToString(this),match=stringMatch(str,regex);return match&&match[1]}},function(module,exports,__webpack_require__){"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr=Object.prototype.toString;module.exports=function bind(that){var target=this;if("function"!=typeof target||"[object Function]"!==toStr.call(target))throw new TypeError(ERROR_MESSAGE+target);for(var bound,args=slice.call(arguments,1),binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))},boundLength=Math.max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)boundArgs.push("$"+i);if(bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder),target.prototype){var Empty=function Empty(){};Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null}return bound}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(473)(),__webpack_require__(486)},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(32),getPolyfill=__webpack_require__(474);module.exports=function shimArrayPrototypeIncludes(){var polyfill=getPolyfill();return define(Array.prototype,{includes:polyfill},{includes:function(){return Array.prototype.includes!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(475);module.exports=function getPolyfill(){return Array.prototype.includes||implementation}},function(module,exports,__webpack_require__){"use strict";(function(global){var ES=__webpack_require__(476),$isNaN=Number.isNaN||function isNaN(a){return a!=a},$isFinite=Number.isFinite||function isFinite(n){return"number"==typeof n&&global.isFinite(n)},indexOf=Array.prototype.indexOf;module.exports=function includes(searchElement){var fromIndex=arguments.length>1?ES.ToInteger(arguments[1]):0;if(indexOf&&!$isNaN(searchElement)&&$isFinite(fromIndex)&&void 0!==searchElement)return indexOf.apply(this,arguments)>-1;var O=ES.ToObject(this),length=ES.ToLength(O.length);if(0===length)return!1;for(var k=fromIndex>=0?fromIndex:Math.max(0,length+fromIndex);k<length;){if(ES.SameValueZero(searchElement,O[k]))return!0;k+=1}return!1}}).call(this,__webpack_require__(36))},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(322)},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(478)},function(module,exports,__webpack_require__){"use strict";var hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,isPrimitive=__webpack_require__(323),isCallable=__webpack_require__(204),isDate=__webpack_require__(479),isSymbol=__webpack_require__(324),ordinaryToPrimitive=function OrdinaryToPrimitive(O,hint){if(null==O)throw new TypeError("Cannot call method on "+O);if("string"!=typeof hint||"number"!==hint&&"string"!==hint)throw new TypeError('hint must be "string" or "number"');var method,result,i,methodNames="string"===hint?["toString","valueOf"]:["valueOf","toString"];for(i=0;i<methodNames.length;++i)if(method=O[methodNames[i]],isCallable(method)&&(result=method.call(O),isPrimitive(result)))return result;throw new TypeError("No default value")},GetMethod=function GetMethod(O,P){var func=O[P];if(null!=func){if(!isCallable(func))throw new TypeError(func+" returned for property "+P+" of object "+O+" is not a function");return func}};module.exports=function ToPrimitive(input){if(isPrimitive(input))return input;var exoticToPrim,hint="default";if(arguments.length>1&&(arguments[1]===String?hint="string":arguments[1]===Number&&(hint="number")),hasSymbols&&(Symbol.toPrimitive?exoticToPrim=GetMethod(input,Symbol.toPrimitive):isSymbol(input)&&(exoticToPrim=Symbol.prototype.valueOf)),void 0!==exoticToPrim){var result=exoticToPrim.call(input,hint);if(isPrimitive(result))return result;throw new TypeError("unable to convert exotic object to primitive")}return"default"===hint&&(isDate(input)||isSymbol(input))&&(hint="string"),ordinaryToPrimitive(input,"default"===hint?"number":hint)}},function(module,exports,__webpack_require__){"use strict";var getDay=Date.prototype.getDay,toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function isDateObject(value){return"object"==typeof value&&null!==value&&(hasToStringTag?function tryDateObject(value){try{return getDay.call(value),!0}catch(e){return!1}}(value):"[object Date]"===toStr.call(value))}},function(module,exports,__webpack_require__){"use strict";module.exports=function hasSymbols(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var obj={},sym=Symbol("test"),symObj=Object(sym);if("string"==typeof sym)return!1;if("[object Symbol]"!==Object.prototype.toString.call(sym))return!1;if("[object Symbol]"!==Object.prototype.toString.call(symObj))return!1;for(sym in obj[sym]=42,obj)return!1;if("function"==typeof Object.keys&&0!==Object.keys(obj).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(obj).length)return!1;var syms=Object.getOwnPropertySymbols(obj);if(1!==syms.length||syms[0]!==sym)return!1;if(!Object.prototype.propertyIsEnumerable.call(obj,sym))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(42!==descriptor.value||!0!==descriptor.enumerable)return!1}return!0}},,function(module,exports,__webpack_require__){"use strict";module.exports=function isPrimitive(value){return null===value||"function"!=typeof value&&"object"!=typeof value}},function(module,exports,__webpack_require__){"use strict";var every=__webpack_require__(270);module.exports=function isSamePropertyDescriptor(ES,D1,D2){return every(["[[Configurable]]","[[Enumerable]]","[[Get]]","[[Set]]","[[Value]]","[[Writable]]"],(function(field){return field in D1==field in D2&&ES.SameValue(D1[field],D2[field])}))}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(44),$Object=GetIntrinsic("%Object%"),$EvalError=GetIntrinsic("%EvalError%"),$TypeError=GetIntrinsic("%TypeError%"),$String=GetIntrinsic("%String%"),$Date=GetIntrinsic("%Date%"),$Number=GetIntrinsic("%Number%"),$floor=GetIntrinsic("%Math.floor%"),$DateUTC=GetIntrinsic("%Date.UTC%"),$abs=GetIntrinsic("%Math.abs%"),assertRecord=__webpack_require__(325),isPropertyDescriptor=__webpack_require__(330),$isNaN=__webpack_require__(268),$isFinite=__webpack_require__(326),sign=__webpack_require__(328),mod=__webpack_require__(329),isPrefixOf=__webpack_require__(336),callBound=__webpack_require__(117),IsCallable=__webpack_require__(204),toPrimitive=__webpack_require__(485),has=__webpack_require__(116),$getUTCFullYear=callBound("Date.prototype.getUTCFullYear"),ES5={ToPrimitive:toPrimitive,ToBoolean:function ToBoolean(value){return!!value},ToNumber:function ToNumber(value){return+value},ToInteger:function ToInteger(value){var number=this.ToNumber(value);return $isNaN(number)?0:0!==number&&$isFinite(number)?sign(number)*Math.floor(Math.abs(number)):number},ToInt32:function ToInt32(x){return this.ToNumber(x)>>0},ToUint32:function ToUint32(x){return this.ToNumber(x)>>>0},ToUint16:function ToUint16(value){var number=this.ToNumber(value);if($isNaN(number)||0===number||!$isFinite(number))return 0;var posInt=sign(number)*Math.floor(Math.abs(number));return mod(posInt,65536)},ToString:function ToString(value){return $String(value)},ToObject:function ToObject(value){return this.CheckObjectCoercible(value),$Object(value)},CheckObjectCoercible:function CheckObjectCoercible(value,optMessage){if(null==value)throw new $TypeError(optMessage||"Cannot call method on "+value);return value},IsCallable:IsCallable,SameValue:function SameValue(x,y){return x===y?0!==x||1/x==1/y:$isNaN(x)&&$isNaN(y)},Type:function Type(x){return null===x?"Null":void 0===x?"Undefined":"function"==typeof x||"object"==typeof x?"Object":"number"==typeof x?"Number":"boolean"==typeof x?"Boolean":"string"==typeof x?"String":void 0},IsPropertyDescriptor:function IsPropertyDescriptor(Desc){return isPropertyDescriptor(this,Desc)},IsAccessorDescriptor:function IsAccessorDescriptor(Desc){return void 0!==Desc&&(assertRecord(this,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Get]]")&&!has(Desc,"[[Set]]")))},IsDataDescriptor:function IsDataDescriptor(Desc){return void 0!==Desc&&(assertRecord(this,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Value]]")&&!has(Desc,"[[Writable]]")))},IsGenericDescriptor:function IsGenericDescriptor(Desc){return void 0!==Desc&&(assertRecord(this,"Property Descriptor","Desc",Desc),!this.IsAccessorDescriptor(Desc)&&!this.IsDataDescriptor(Desc))},FromPropertyDescriptor:function FromPropertyDescriptor(Desc){if(void 0===Desc)return Desc;if(assertRecord(this,"Property Descriptor","Desc",Desc),this.IsDataDescriptor(Desc))return{value:Desc["[[Value]]"],writable:!!Desc["[[Writable]]"],enumerable:!!Desc["[[Enumerable]]"],configurable:!!Desc["[[Configurable]]"]};if(this.IsAccessorDescriptor(Desc))return{get:Desc["[[Get]]"],set:Desc["[[Set]]"],enumerable:!!Desc["[[Enumerable]]"],configurable:!!Desc["[[Configurable]]"]};throw new $TypeError("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function ToPropertyDescriptor(Obj){if("Object"!==this.Type(Obj))throw new $TypeError("ToPropertyDescriptor requires an object");var desc={};if(has(Obj,"enumerable")&&(desc["[[Enumerable]]"]=this.ToBoolean(Obj.enumerable)),has(Obj,"configurable")&&(desc["[[Configurable]]"]=this.ToBoolean(Obj.configurable)),has(Obj,"value")&&(desc["[[Value]]"]=Obj.value),has(Obj,"writable")&&(desc["[[Writable]]"]=this.ToBoolean(Obj.writable)),has(Obj,"get")){var getter=Obj.get;if(void 0!==getter&&!this.IsCallable(getter))throw new TypeError("getter must be a function");desc["[[Get]]"]=getter}if(has(Obj,"set")){var setter=Obj.set;if(void 0!==setter&&!this.IsCallable(setter))throw new $TypeError("setter must be a function");desc["[[Set]]"]=setter}if((has(desc,"[[Get]]")||has(desc,"[[Set]]"))&&(has(desc,"[[Value]]")||has(desc,"[[Writable]]")))throw new $TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return desc},"Abstract Equality Comparison":function AbstractEqualityComparison(x,y){var xType=this.Type(x),yType=this.Type(y);return xType===yType?x===y:null==x&&null==y||("Number"===xType&&"String"===yType?this["Abstract Equality Comparison"](x,this.ToNumber(y)):"String"===xType&&"Number"===yType?this["Abstract Equality Comparison"](this.ToNumber(x),y):"Boolean"===xType?this["Abstract Equality Comparison"](this.ToNumber(x),y):"Boolean"===yType?this["Abstract Equality Comparison"](x,this.ToNumber(y)):"String"!==xType&&"Number"!==xType||"Object"!==yType?"Object"===xType&&("String"===yType||"Number"===yType)&&this["Abstract Equality Comparison"](this.ToPrimitive(x),y):this["Abstract Equality Comparison"](x,this.ToPrimitive(y)))},"Strict Equality Comparison":function StrictEqualityComparison(x,y){var xType=this.Type(x);return xType===this.Type(y)&&("Undefined"===xType||"Null"===xType||x===y)},"Abstract Relational Comparison":function AbstractRelationalComparison(x,y,LeftFirst){if("Boolean"!==this.Type(LeftFirst))throw new $TypeError("Assertion failed: LeftFirst argument must be a Boolean");var px,py;if(LeftFirst?(px=this.ToPrimitive(x,$Number),py=this.ToPrimitive(y,$Number)):(py=this.ToPrimitive(y,$Number),px=this.ToPrimitive(x,$Number)),!("String"===this.Type(px)&&"String"===this.Type(py))){var nx=this.ToNumber(px),ny=this.ToNumber(py);if($isNaN(nx)||$isNaN(ny))return;return(!$isFinite(nx)||!$isFinite(ny)||nx!==ny)&&((0!==nx||0!==ny)&&(nx!==1/0&&(ny===1/0||ny!==-1/0&&(nx===-1/0||nx<ny))))}return!isPrefixOf(py,px)&&(!!isPrefixOf(px,py)||px<py)},msFromTime:function msFromTime(t){return mod(t,1e3)},SecFromTime:function SecFromTime(t){return mod($floor(t/1e3),60)},MinFromTime:function MinFromTime(t){return mod($floor(t/6e4),60)},HourFromTime:function HourFromTime(t){return mod($floor(t/36e5),24)},Day:function Day(t){return $floor(t/864e5)},TimeWithinDay:function TimeWithinDay(t){return mod(t,864e5)},DayFromYear:function DayFromYear(y){return 365*(y-1970)+$floor((y-1969)/4)-$floor((y-1901)/100)+$floor((y-1601)/400)},TimeFromYear:function TimeFromYear(y){return 864e5*this.DayFromYear(y)},YearFromTime:function YearFromTime(t){return $getUTCFullYear(new $Date(t))},WeekDay:function WeekDay(t){return mod(this.Day(t)+4,7)},DaysInYear:function DaysInYear(y){return 0!==mod(y,4)?365:0!==mod(y,100)?366:0!==mod(y,400)?365:366},InLeapYear:function InLeapYear(t){var days=this.DaysInYear(this.YearFromTime(t));if(365===days)return 0;if(366===days)return 1;throw new $EvalError("Assertion failed: there are not 365 or 366 days in a year, got: "+days)},DayWithinYear:function DayWithinYear(t){return this.Day(t)-this.DayFromYear(this.YearFromTime(t))},MonthFromTime:function MonthFromTime(t){var day=this.DayWithinYear(t);if(0<=day&&day<31)return 0;var leap=this.InLeapYear(t);return 31<=day&&day<59+leap?1:59+leap<=day&&day<90+leap?2:90+leap<=day&&day<120+leap?3:120+leap<=day&&day<151+leap?4:151+leap<=day&&day<181+leap?5:181+leap<=day&&day<212+leap?6:212+leap<=day&&day<243+leap?7:243+leap<=day&&day<273+leap?8:273+leap<=day&&day<304+leap?9:304+leap<=day&&day<334+leap?10:334+leap<=day&&day<365+leap?11:void 0},DateFromTime:function DateFromTime(t){var m=this.MonthFromTime(t),d=this.DayWithinYear(t);if(0===m)return d+1;if(1===m)return d-30;var leap=this.InLeapYear(t);if(2===m)return d-58-leap;if(3===m)return d-89-leap;if(4===m)return d-119-leap;if(5===m)return d-150-leap;if(6===m)return d-180-leap;if(7===m)return d-211-leap;if(8===m)return d-242-leap;if(9===m)return d-272-leap;if(10===m)return d-303-leap;if(11===m)return d-333-leap;throw new $EvalError("Assertion failed: MonthFromTime returned an impossible value: "+m)},MakeDay:function MakeDay(year,month,date){if(!$isFinite(year)||!$isFinite(month)||!$isFinite(date))return NaN;var y=this.ToInteger(year),m=this.ToInteger(month),dt=this.ToInteger(date),ym=y+$floor(m/12),mn=mod(m,12),t=$DateUTC(ym,mn,1);return this.YearFromTime(t)!==ym||this.MonthFromTime(t)!==mn||1!==this.DateFromTime(t)?NaN:this.Day(t)+dt-1},MakeDate:function MakeDate(day,time){return $isFinite(day)&&$isFinite(time)?864e5*day+time:NaN},MakeTime:function MakeTime(hour,min,sec,ms){return $isFinite(hour)&&$isFinite(min)&&$isFinite(sec)&&$isFinite(ms)?36e5*this.ToInteger(hour)+6e4*this.ToInteger(min)+1e3*this.ToInteger(sec)+this.ToInteger(ms):NaN},TimeClip:function TimeClip(time){return!$isFinite(time)||$abs(time)>864e13?NaN:$Number(new $Date(this.ToNumber(time)))},modulo:function modulo(x,y){return mod(x,y)}};module.exports=ES5},function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString,isPrimitive=__webpack_require__(323),isCallable=__webpack_require__(204),ES5internalSlots___DefaultValue__=function(O){var actualHint;if((actualHint=arguments.length>1?arguments[1]:"[object Date]"===toStr.call(O)?String:Number)===String||actualHint===Number){var value,i,methods=actualHint===String?["toString","valueOf"]:["valueOf","toString"];for(i=0;i<methods.length;++i)if(isCallable(O[methods[i]])&&(value=O[methods[i]](),isPrimitive(value)))return value;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};module.exports=function ToPrimitive(input){return isPrimitive(input)?input:arguments.length>1?ES5internalSlots___DefaultValue__(input,arguments[1]):ES5internalSlots___DefaultValue__(input)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(487)(),__webpack_require__(491)(),__webpack_require__(494)(),__webpack_require__(497)(),__webpack_require__(500)(),__webpack_require__(503)},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(488),define=__webpack_require__(32);module.exports=function shimValues(){var polyfill=getPolyfill();return define(Object,{values:polyfill},{values:function testValues(){return Object.values!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(489);module.exports=function getPolyfill(){return"function"==typeof Object.values?Object.values:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(170),has=__webpack_require__(116),isEnumerable=__webpack_require__(64).call(Function.call,Object.prototype.propertyIsEnumerable);module.exports=function values(O){var obj=ES.RequireObjectCoercible(O),vals=[];for(var key in obj)has(obj,key)&&isEnumerable(obj,key)&&vals.push(obj[key]);return vals}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(44),originalGetProto=GetIntrinsic("%Object.getPrototypeOf%",!0),$ArrayProto=GetIntrinsic("%Array.prototype%");module.exports=originalGetProto||([].__proto__===$ArrayProto?function(O){return O.__proto__}:null)},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(492),define=__webpack_require__(32);module.exports=function shimEntries(){var polyfill=getPolyfill();return define(Object,{entries:polyfill},{entries:function testEntries(){return Object.entries!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(493);module.exports=function getPolyfill(){return"function"==typeof Object.entries?Object.entries:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(170),has=__webpack_require__(116),isEnumerable=__webpack_require__(64).call(Function.call,Object.prototype.propertyIsEnumerable);module.exports=function entries(O){var obj=ES.RequireObjectCoercible(O),entrys=[];for(var key in obj)has(obj,key)&&isEnumerable(obj,key)&&entrys.push([key,obj[key]]);return entrys}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(495),define=__webpack_require__(32);module.exports=function shimPadStart(){var polyfill=getPolyfill();return define(String.prototype,{padStart:polyfill},{padStart:function(){return String.prototype.padStart!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(496);module.exports=function getPolyfill(){return"function"==typeof String.prototype.padStart?String.prototype.padStart:implementation}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(64),ES=__webpack_require__(170),slice=bind.call(Function.call,String.prototype.slice);module.exports=function padStart(maxLength){var fillString,O=ES.RequireObjectCoercible(this),S=ES.ToString(O),stringLength=ES.ToLength(S.length);arguments.length>1&&(fillString=arguments[1]);var filler=void 0===fillString?"":ES.ToString(fillString);""===filler&&(filler=" ");var intMaxLength=ES.ToLength(maxLength);if(intMaxLength<=stringLength)return S;for(var fillLen=intMaxLength-stringLength;filler.length<fillLen;){var fLen=filler.length,remainingCodeUnits=fillLen-fLen;filler+=fLen>remainingCodeUnits?slice(filler,0,remainingCodeUnits):filler}var truncatedStringFiller=filler.length>fillLen?slice(filler,0,fillLen):filler;return truncatedStringFiller+S}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(498),define=__webpack_require__(32);module.exports=function shimPadEnd(){var polyfill=getPolyfill();return define(String.prototype,{padEnd:polyfill},{padEnd:function(){return String.prototype.padEnd!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(499);module.exports=function getPolyfill(){return"function"==typeof String.prototype.padEnd?String.prototype.padEnd:implementation}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(64),ES=__webpack_require__(170),slice=bind.call(Function.call,String.prototype.slice);module.exports=function padEnd(maxLength){var fillString,O=ES.RequireObjectCoercible(this),S=ES.ToString(O),stringLength=ES.ToLength(S.length);arguments.length>1&&(fillString=arguments[1]);var filler=void 0===fillString?"":ES.ToString(fillString);""===filler&&(filler=" ");var intMaxLength=ES.ToLength(maxLength);if(intMaxLength<=stringLength)return S;for(var fillLen=intMaxLength-stringLength;filler.length<fillLen;){var fLen=filler.length,remainingCodeUnits=fillLen-fLen;filler+=fLen>remainingCodeUnits?slice(filler,0,remainingCodeUnits):filler}var truncatedStringFiller=filler.length>fillLen?slice(filler,0,fillLen):filler;return S+truncatedStringFiller}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(501),define=__webpack_require__(32);module.exports=function shimGetOwnPropertyDescriptors(){var polyfill=getPolyfill();return define(Object,{getOwnPropertyDescriptors:polyfill},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(502);module.exports=function getPolyfill(){return"function"==typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(170),defineProperty=Object.defineProperty,getDescriptor=Object.getOwnPropertyDescriptor,getOwnNames=Object.getOwnPropertyNames,getSymbols=Object.getOwnPropertySymbols,concat=Function.call.bind(Array.prototype.concat),reduce=Function.call.bind(Array.prototype.reduce),getAll=getSymbols?function(obj){return concat(getOwnNames(obj),getSymbols(obj))}:getOwnNames,isES5=ES.IsCallable(getDescriptor)&&ES.IsCallable(getOwnNames);module.exports=function getOwnPropertyDescriptors(value){if(ES.RequireObjectCoercible(value),!isES5)throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor");var O=ES.ToObject(value);return reduce(getAll(O),(function(acc,key){var descriptor=getDescriptor(O,key);return void 0!==descriptor&&function put(obj,prop,val){defineProperty&&prop in obj?defineProperty(obj,prop,{configurable:!0,enumerable:!0,value:val,writable:!0}):obj[prop]=val}(acc,key,descriptor),acc}),{})}},function(module,exports,__webpack_require__){"use strict";"function"==typeof Promise&&__webpack_require__(504),__webpack_require__(509)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(505)()},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(271),getPolyfill=__webpack_require__(506),define=__webpack_require__(32);module.exports=function shimPromiseFinally(){requirePromise();var polyfill=getPolyfill();return define(Promise.prototype,{finally:polyfill},{finally:function testFinally(){return Promise.prototype.finally!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(271),implementation=__webpack_require__(507);module.exports=function getPolyfill(){return requirePromise(),"function"==typeof Promise.prototype.finally?Promise.prototype.finally:implementation}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(271)();var ES=__webpack_require__(272),promiseResolve=function PromiseResolve(C,value){return new C((function(resolve){resolve(value)}))},OriginalPromise=Promise,promiseFinally=function finally_(onFinally){if("Object"!==ES.Type(this))throw new TypeError("receiver is not an Object");var C=ES.SpeciesConstructor(this,OriginalPromise),thenFinally=onFinally,catchFinally=onFinally;return ES.IsCallable(onFinally)&&(thenFinally=function CreateThenFinally(C,onFinally){return function(value){var result=onFinally();return promiseResolve(C,result).then((function(){return value}))}}(C,onFinally),catchFinally=function CreateCatchFinally(C,onFinally){return function(reason){var result=onFinally();return promiseResolve(C,result).then((function(){throw reason}))}}(C,onFinally)),this.then(thenFinally,catchFinally)};if(Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(promiseFinally,"name");descriptor&&descriptor.configurable&&Object.defineProperty(promiseFinally,"name",{configurable:!0,value:"finally"})}module.exports=promiseFinally},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(44),ES2016=__webpack_require__(338),assign=__webpack_require__(169),forEach=__webpack_require__(269),callBind=__webpack_require__(205),$TypeError=GetIntrinsic("%TypeError%"),callBound=__webpack_require__(117),$isEnumerable=callBound("Object.prototype.propertyIsEnumerable"),$pushApply=callBind.apply(GetIntrinsic("%Array.prototype.push%")),$arrayPush=callBound("Array.prototype.push"),ES2017=assign(assign({},ES2016),{ToIndex:function ToIndex(value){if(void 0===value)return 0;var integerIndex=this.ToInteger(value);if(integerIndex<0)throw new RangeError("index must be >= 0");var index=this.ToLength(integerIndex);if(!this.SameValueZero(integerIndex,index))throw new RangeError("index must be >= 0 and < 2 ** 53 - 1");return index},EnumerableOwnProperties:function EnumerableOwnProperties(O,kind){var keys=ES2016.EnumerableOwnNames(O);if("key"===kind)return keys;if("value"===kind||"key+value"===kind){var results=[];return forEach(keys,(function(key){$isEnumerable(O,key)&&$pushApply(results,["value"===kind?O[key]:[key,O[key]]])})),results}throw new $TypeError('Assertion failed: "kind" is not "key", "value", or "key+value": '+kind)},IterableToList:function IterableToList(items,method){for(var iterator=this.GetIterator(items,method),values=[],next=!0;next;)if(next=this.IteratorStep(iterator)){var nextValue=this.IteratorValue(next);$arrayPush(values,nextValue)}return values}});delete ES2017.EnumerableOwnNames,delete ES2017.IterableToArrayLike,module.exports=ES2017},function(module,exports,__webpack_require__){"use strict";__webpack_require__(510),__webpack_require__(518),__webpack_require__(522),__webpack_require__(526),__webpack_require__(530)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(511)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(32),getPolyfill=__webpack_require__(512);module.exports=function shimFlat(){var polyfill=getPolyfill();return define(Array.prototype,{flat:polyfill},{flat:function(){return Array.prototype.flat!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(513);module.exports=function getPolyfill(){return Array.prototype.flat||implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(144);module.exports=function flat(){var O=ES.ToObject(this),sourceLen=ES.ToLength(ES.Get(O,"length")),depthNum=1;arguments.length>0&&void 0!==arguments[0]&&(depthNum=ES.ToInteger(arguments[0]));var A=ES.ArraySpeciesCreate(O,0);return ES.FlattenIntoArray(A,O,sourceLen,0,depthNum),A}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(64),define=__webpack_require__(32),implementation=__webpack_require__(339),getPolyfill=__webpack_require__(340),shim=__webpack_require__(515),bound=bind.call(Function.call,getPolyfill());define(bound,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=bound},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(32),getPolyfill=__webpack_require__(340);module.exports=function shimTrimLeft(){var polyfill=getPolyfill();return define(String.prototype,{trimLeft:polyfill},{trimLeft:function(){return String.prototype.trimLeft!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(64),define=__webpack_require__(32),implementation=__webpack_require__(341),getPolyfill=__webpack_require__(342),shim=__webpack_require__(517),bound=bind.call(Function.call,getPolyfill());define(bound,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=bound},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(32),getPolyfill=__webpack_require__(342);module.exports=function shimTrimRight(){var polyfill=getPolyfill();return define(String.prototype,{trimRight:polyfill},{trimRight:function(){return String.prototype.trimRight!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(519)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(32),getPolyfill=__webpack_require__(520);module.exports=function shimFlatMap(){var polyfill=getPolyfill();return define(Array.prototype,{flatMap:polyfill},{flatMap:function(){return Array.prototype.flatMap!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(521);module.exports=function getPolyfill(){return Array.prototype.flatMap||implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(144);module.exports=function flatMap(mapperFunction){var T,O=ES.ToObject(this),sourceLen=ES.ToLength(ES.Get(O,"length"));if(!ES.IsCallable(mapperFunction))throw new TypeError("mapperFunction must be a function");arguments.length>1&&(T=arguments[1]);var A=ES.ArraySpeciesCreate(O,0);return ES.FlattenIntoArray(A,O,sourceLen,0,1,mapperFunction,T),A}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(523)()},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(84)(),polyfill=__webpack_require__(524),getInferredName=__webpack_require__(334),gOPD=Object.getOwnPropertyDescriptor,dP=Object.defineProperty,setProto=Object.setPrototypeOf,define=function defineGetter(getter){dP(Symbol.prototype,"description",{configurable:!0,enumerable:!1,get:getter})};module.exports=function shimSymbolDescription(){if(!hasSymbols)return!1;var desc=gOPD(Symbol.prototype,"description"),getter=polyfill(),isMissing=!desc||"function"!=typeof desc.get,isBroken=!isMissing&&(void 0!==Symbol().description||""!==Symbol("").description);if(isMissing||isBroken){if(!getInferredName)return function shimGlobalSymbol(getter){var origSym=Function.apply.bind(Symbol),emptyStrings=Object.create?Object.create(null):{},SymNew=function Symbol(){var sym=origSym(this,arguments);return arguments.length>0&&""===arguments[0]&&(emptyStrings[sym]=!0),sym};SymNew.prototype=Symbol.prototype,setProto(SymNew,Symbol),Symbol=SymNew;var boundGetter=Function.call.bind(getter),wrappedGetter=function description(){var symbolDescription=boundGetter(this);return emptyStrings[this]?"":symbolDescription};return define(wrappedGetter),wrappedGetter}(getter);define(getter)}return getter}},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(84)(),implementation=__webpack_require__(525),gOPD=Object.getOwnPropertyDescriptor;module.exports=function descriptionPolyfill(){if(!hasSymbols||"function"!=typeof gOPD)return null;var desc=gOPD(Symbol.prototype,"description");if(!desc||"function"!=typeof desc.get)return implementation;var emptySymbolDesc=desc.get.call(Symbol());return(void 0===emptySymbolDesc||""===emptySymbolDesc)&&"a"===desc.get.call(Symbol("a"))?desc.get:implementation}},function(module,exports,__webpack_require__){"use strict";var getSymbolDescription=__webpack_require__(333);module.exports=function description(){return getSymbolDescription(this)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(527)()},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(528),define=__webpack_require__(32);module.exports=function shimEntries(){var polyfill=getPolyfill();return define(Object,{fromEntries:polyfill},{fromEntries:function testEntries(){return Object.fromEntries!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(529);module.exports=function getPolyfill(){return"function"==typeof Object.fromEntries?Object.fromEntries:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(144),adder=function addDataProperty(key,value){var propertyKey=ES.ToPropertyKey(key);ES.CreateDataPropertyOrThrow(this,propertyKey,value)},hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");module.exports=function fromEntries(iterable){ES.RequireObjectCoercible(iterable);var obj={};if(!hasSymbols){if(!ES.IsArray(iterable))throw new TypeError("this environment lacks native Symbols, and can not support non-Array iterables");return function assign(obj,entries){for(var i=0;i<entries.length;++i){var entry=entries[i];if("Object"!==ES.Type(entry))throw new TypeError("iterator returned a non-object; entry expected");var key=ES.Get(entry,"0"),value=ES.Get(entry,"1"),propertyKey=ES.ToPropertyKey(key);ES.CreateDataPropertyOrThrow(obj,propertyKey,value)}}(obj,iterable),obj}return ES.AddEntriesFromIterable(obj,iterable,adder)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(531),__webpack_require__(540),__webpack_require__(544)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(532)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(32),hasSymbols=__webpack_require__(84)(),getPolyfill=__webpack_require__(533),regexpMatchAllPolyfill=__webpack_require__(343),defineP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor;module.exports=function shimMatchAll(){var polyfill=getPolyfill();if(define(String.prototype,{matchAll:polyfill},{matchAll:function(){return String.prototype.matchAll!==polyfill}}),hasSymbols){var symbol=Symbol.matchAll||(Symbol.for?Symbol.for("Symbol.matchAll"):Symbol("Symbol.matchAll"));if(define(Symbol,{matchAll:symbol},{matchAll:function(){return Symbol.matchAll!==symbol}}),defineP&&gOPD){var desc=gOPD(Symbol,symbol);desc&&!desc.configurable||defineP(Symbol,symbol,{configurable:!1,enumerable:!1,value:symbol,writable:!1})}var regexpMatchAll=regexpMatchAllPolyfill(),func={};func[symbol]=regexpMatchAll;var predicate={};predicate[symbol]=function(){return RegExp.prototype[symbol]!==regexpMatchAll},define(RegExp.prototype,func,predicate)}return polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(534);module.exports=function getPolyfill(){return String.prototype.matchAll||implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(144),hasSymbols=__webpack_require__(84)(),regexpMatchAllPolyfill=__webpack_require__(343),getMatcher=function getMatcher(regexp){var matcherPolyfill=regexpMatchAllPolyfill();if(hasSymbols&&"symbol"==typeof Symbol.matchAll){var matcher=ES.GetMethod(regexp,Symbol.matchAll);return matcher===RegExp.prototype[Symbol.matchAll]&&matcher!==matcherPolyfill?matcherPolyfill:matcher}if(ES.IsRegExp(regexp))return matcherPolyfill};module.exports=function matchAll(regexp){var O=ES.RequireObjectCoercible(this);if(null!=regexp){var matcher=getMatcher(regexp);if(void 0!==matcher)return ES.Call(matcher,regexp,[O])}var S=ES.ToString(O),rx=new RegExp(regexp,"g");return ES.Call(getMatcher(rx),rx,[S])}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(144),flagsGetter=__webpack_require__(536),RegExpStringIterator=__webpack_require__(538),OrigRegExp=RegExp,supportsConstructingWithFlags="flags"in RegExp.prototype,regexMatchAll=function SymbolMatchAll(string){var R=this;if("Object"!==ES.Type(R))throw new TypeError('"this" value must be an Object');var S=ES.ToString(string),tmp=function constructRegex(C,R){var flags="flags"in R?ES.Get(R,"flags"):ES.ToString(flagsGetter(R));return{flags:flags,matcher:new C(supportsConstructingWithFlags&&"string"==typeof flags?R:C===OrigRegExp?R.source:R,flags)}}(ES.SpeciesConstructor(R,OrigRegExp),R),flags=tmp.flags,matcher=tmp.matcher,lastIndex=ES.ToLength(ES.Get(R,"lastIndex"));return ES.Set(matcher,"lastIndex",lastIndex,!0),function CreateRegExpStringIterator(R,S,global,fullUnicode){if("String"!==ES.Type(S))throw new TypeError('"S" value must be a String');if("Boolean"!==ES.Type(global))throw new TypeError('"global" value must be a Boolean');if("Boolean"!==ES.Type(fullUnicode))throw new TypeError('"fullUnicode" value must be a Boolean');return new RegExpStringIterator(R,S,global,fullUnicode)}(matcher,S,flags.indexOf("g")>-1,flags.indexOf("u")>-1)},defineP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor;if(defineP&&gOPD){var desc=gOPD(regexMatchAll,"name");desc&&desc.configurable&&defineP(regexMatchAll,"name",{value:"[Symbol.matchAll]"})}module.exports=regexMatchAll},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(32),implementation=__webpack_require__(344),getPolyfill=__webpack_require__(345),shim=__webpack_require__(537),flagsBound=Function.call.bind(implementation);define(flagsBound,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=flagsBound},function(module,exports,__webpack_require__){"use strict";var supportsDescriptors=__webpack_require__(32).supportsDescriptors,getPolyfill=__webpack_require__(345),gOPD=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,TypeErr=TypeError,getProto=Object.getPrototypeOf,regex=/a/;module.exports=function shimFlags(){if(!supportsDescriptors||!getProto)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var polyfill=getPolyfill(),proto=getProto(regex),descriptor=gOPD(proto,"flags");return descriptor&&descriptor.get===polyfill||defineProperty(proto,"flags",{configurable:!0,enumerable:!1,get:polyfill}),polyfill}},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(32),ES=__webpack_require__(144),GetIntrinsic=__webpack_require__(44),hasSymbols=__webpack_require__(84)(),hidden=__webpack_require__(539)(),RegExpStringIterator=function RegExpStringIterator(R,S,global,fullUnicode){if("String"!==ES.Type(S))throw new TypeError("S must be a string");if("Boolean"!==ES.Type(global))throw new TypeError("global must be a boolean");if("Boolean"!==ES.Type(fullUnicode))throw new TypeError("fullUnicode must be a boolean");hidden.set(this,"[[IteratingRegExp]]",R),hidden.set(this,"[[IteratedString]]",S),hidden.set(this,"[[Global]]",global),hidden.set(this,"[[Unicode]]",fullUnicode),hidden.set(this,"[[Done]]",!1)},IteratorPrototype=GetIntrinsic("%IteratorPrototype%",!0);if(IteratorPrototype&&(RegExpStringIterator.prototype=ES.ObjectCreate(IteratorPrototype)),define(RegExpStringIterator.prototype,{next:function next(){var O=this;if("Object"!==ES.Type(O))throw new TypeError("receiver must be an object");if(!(O instanceof RegExpStringIterator&&hidden.has(O,"[[IteratingRegExp]]")&&hidden.has(O,"[[IteratedString]]")&&hidden.has(O,"[[Global]]")&&hidden.has(O,"[[Unicode]]")&&hidden.has(O,"[[Done]]")))throw new TypeError('"this" value must be a RegExpStringIterator instance');if(hidden.get(O,"[[Done]]"))return ES.CreateIterResultObject(void 0,!0);var R=hidden.get(O,"[[IteratingRegExp]]"),S=hidden.get(O,"[[IteratedString]]"),global=hidden.get(O,"[[Global]]"),fullUnicode=hidden.get(O,"[[Unicode]]"),match=ES.RegExpExec(R,S);if(null===match)return hidden.set(O,"[[Done]]",!0),ES.CreateIterResultObject(void 0,!0);if(global){if(""===ES.ToString(ES.Get(match,"0"))){var thisIndex=ES.ToLength(ES.Get(R,"lastIndex")),nextIndex=ES.AdvanceStringIndex(S,thisIndex,fullUnicode);ES.Set(R,"lastIndex",nextIndex,!0)}return ES.CreateIterResultObject(match,!1)}return hidden.set(O,"[[Done]]",!0),ES.CreateIterResultObject(match,!1)}}),hasSymbols){var defineP=Object.defineProperty;if(Symbol.toStringTag&&(defineP?defineP(RegExpStringIterator.prototype,Symbol.toStringTag,{configurable:!0,enumerable:!1,value:"RegExp String Iterator",writable:!1}):RegExpStringIterator.prototype[Symbol.toStringTag]="RegExp String Iterator"),!IteratorPrototype&&Symbol.iterator){var func={};func[Symbol.iterator]=RegExpStringIterator.prototype[Symbol.iterator]||function SymbolIterator(){return this};var predicate={};predicate[Symbol.iterator]=function(){return RegExpStringIterator.prototype[Symbol.iterator]!==func[Symbol.iterator]},define(RegExpStringIterator.prototype,func,predicate)}}module.exports=RegExpStringIterator},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(32);module.exports=function getHiddenKeyManager(){var symbolCache={},makeKey=function key(prop){return symbolCache["$"+prop]?symbolCache["$"+prop]:"function"==typeof Symbol?(symbolCache["$"+prop]=Symbol(prop),symbolCache["$"+prop]):"___ "+prop+" ___"};return{get:function get(obj,prop){return obj[makeKey(prop)]},has:function has(obj,prop){return makeKey(prop)in obj},set:function set(obj,prop,value){var key=makeKey(prop);define.supportsDescriptors?Object.defineProperty(obj,key,{configurable:!1,enumerable:!1,value:value,writable:!0}):obj[key]=value}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(541)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(32),getPolyfill=__webpack_require__(542);module.exports=function shimGlobal(){var polyfill=getPolyfill();if(define.supportsDescriptors){var descriptor=Object.getOwnPropertyDescriptor(polyfill,"globalThis");(!descriptor||descriptor.configurable&&(descriptor.enumerable||descriptor.writable||globalThis!==polyfill))&&Object.defineProperty(polyfill,"globalThis",{configurable:!0,enumerable:!1,value:polyfill,writable:!1})}else"object"==typeof globalThis&&globalThis===polyfill||(polyfill.globalThis=polyfill);return polyfill}},function(module,exports,__webpack_require__){"use strict";(function(global){var implementation=__webpack_require__(543);module.exports=function getPolyfill(){return"object"==typeof global&&global&&global.Math===Math&&global.Array===Array?global:implementation}}).call(this,__webpack_require__(36))},function(module,exports,__webpack_require__){"use strict";(function(global){"undefined"!=typeof self?module.exports=self:"undefined"!=typeof window?module.exports=window:module.exports=void 0!==global?global:Function("return this")()}).call(this,__webpack_require__(36))},function(module,exports,__webpack_require__){"use strict";__webpack_require__(545)()},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(273),getPolyfill=__webpack_require__(546),define=__webpack_require__(32);module.exports=function shimAllSettled(){requirePromise();var polyfill=getPolyfill();return define(Promise,{allSettled:polyfill},{allSettled:function testAllSettled(){return Promise.allSettled!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(273),implementation=__webpack_require__(547);module.exports=function getPolyfill(){return requirePromise(),"function"==typeof Promise.allSettled?Promise.allSettled:implementation}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(273)();var ES=__webpack_require__(272),getIntrinsic=__webpack_require__(44),bind=__webpack_require__(64),all=bind.call(Function.call,getIntrinsic("%Promise_all%")),reject=bind.call(Function.call,getIntrinsic("%Promise_reject%"));module.exports=function allSettled(iterable){var C=this;if("Object"!==ES.Type(C))throw new TypeError("`this` value must be an object");return all(C,Array.from(iterable,(function(item){var itemPromise=ES.PromiseResolve(C,item);try{return itemPromise.then((function(value){return{status:"fulfilled",value:value}}),(function(reason){return{status:"rejected",reason:reason}}))}catch(e){return reject(C,e)}})))}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(549),__webpack_require__(568),__webpack_require__(569),__webpack_require__(570),__webpack_require__(571),__webpack_require__(572)},function(module,exports,__webpack_require__){__webpack_require__(73),__webpack_require__(78),__webpack_require__(86),__webpack_require__(554),__webpack_require__(99),__webpack_require__(555),__webpack_require__(556),__webpack_require__(100),__webpack_require__(557),__webpack_require__(558),__webpack_require__(559),__webpack_require__(560),__webpack_require__(561),__webpack_require__(562),__webpack_require__(563),__webpack_require__(564),__webpack_require__(565),__webpack_require__(566),__webpack_require__(567);var path=__webpack_require__(276);module.exports=path.Symbol},function(module,exports,__webpack_require__){var global=__webpack_require__(29),setGlobal=__webpack_require__(275),store=global["__core-js_shared__"]||setGlobal("__core-js_shared__",{});module.exports=store},function(module,exports,__webpack_require__){var getBuiltIn=__webpack_require__(176),getOwnPropertyNamesModule=__webpack_require__(210),getOwnPropertySymbolsModule=__webpack_require__(279),anObject=__webpack_require__(50);module.exports=getBuiltIn("Reflect","ownKeys")||function ownKeys(it){var keys=getOwnPropertyNamesModule.f(anObject(it)),getOwnPropertySymbols=getOwnPropertySymbolsModule.f;return getOwnPropertySymbols?keys.concat(getOwnPropertySymbols(it)):keys}},function(module,exports,__webpack_require__){"use strict";var classof=__webpack_require__(354),test={};test[__webpack_require__(37)("toStringTag")]="z",module.exports="[object z]"!==String(test)?function toString(){return"[object "+classof(this)+"]"}:test.toString},function(module,exports,__webpack_require__){var toIndexedObject=__webpack_require__(97),nativeGetOwnPropertyNames=__webpack_require__(210).f,toString={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];module.exports.f=function getOwnPropertyNames(it){return windowNames&&"[object Window]"==toString.call(it)?function(it){try{return nativeGetOwnPropertyNames(it)}catch(error){return windowNames.slice()}}(it):nativeGetOwnPropertyNames(toIndexedObject(it))}},function(module,exports,__webpack_require__){__webpack_require__(45)("asyncIterator")},function(module,exports,__webpack_require__){__webpack_require__(45)("hasInstance")},function(module,exports,__webpack_require__){__webpack_require__(45)("isConcatSpreadable")},function(module,exports,__webpack_require__){__webpack_require__(45)("match")},function(module,exports,__webpack_require__){__webpack_require__(45)("matchAll")},function(module,exports,__webpack_require__){__webpack_require__(45)("replace")},function(module,exports,__webpack_require__){__webpack_require__(45)("search")},function(module,exports,__webpack_require__){__webpack_require__(45)("species")},function(module,exports,__webpack_require__){__webpack_require__(45)("split")},function(module,exports,__webpack_require__){__webpack_require__(45)("toPrimitive")},function(module,exports,__webpack_require__){__webpack_require__(45)("toStringTag")},function(module,exports,__webpack_require__){__webpack_require__(45)("unscopables")},function(module,exports,__webpack_require__){__webpack_require__(129)(Math,"Math",!0)},function(module,exports,__webpack_require__){var global=__webpack_require__(29);__webpack_require__(129)(global.JSON,"JSON",!0)},function(module,exports,__webpack_require__){__webpack_require__(45)("asyncDispose")},function(module,exports,__webpack_require__){__webpack_require__(45)("dispose")},function(module,exports,__webpack_require__){__webpack_require__(45)("observable")},function(module,exports,__webpack_require__){__webpack_require__(45)("patternMatch")},function(module,exports,__webpack_require__){__webpack_require__(45)("replaceAll")},function(module,exports,__webpack_require__){"use strict";__webpack_require__(101).window.STORYBOOK_REACT_CLASSES={}},,,,function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function toString(){return this.map((function(item){var content=function cssWithMappingToString(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}(cssMapping),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot).concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2],"{").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=modules[_i];null!=item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="(".concat(item[2],") and (").concat(mediaQuery,")")),list.push(item))}},list}},function(module,exports,__webpack_require__){"use strict";var stylesInDom={},isOldIE=function isOldIE(){var memo;return function memorize(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo}}(),getTarget=function getTarget(){var memo={};return function memorize(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}();function listToStyles(list,options){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],part={css:item[1],media:item[2],sourceMap:item[3]};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id],j=0;if(domStyle){for(domStyle.refs++;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{for(var parts=[];j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function insertStyleElement(options){var style=document.createElement("style");if(void 0===options.attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(options.attributes.nonce=nonce)}if(Object.keys(options.attributes).forEach((function(key){style.setAttribute(key,options.attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media&&style.setAttribute("media",media),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function remove(){!function removeStyleElement(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).attributes="object"==typeof options.attributes?options.attributes:{},options.singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var styles=listToStyles(list,options);return addStylesToDom(styles,options),function update(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];domStyle&&(domStyle.refs--,mayRemove.push(domStyle))}newList&&addStylesToDom(listToStyles(newList,options),options);for(var _i=0;_i<mayRemove.length;_i++){var _domStyle=mayRemove[_i];if(0===_domStyle.refs){for(var j=0;j<_domStyle.parts.length;j++)_domStyle.parts[j]();delete stylesInDom[_domStyle.id]}}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(73),__webpack_require__(27),Object.defineProperty(exports,"__esModule",{value:!0}),exports.raw=exports.getStorybook=exports.forceReRender=exports.setAddon=exports.clearDecorators=exports.addParameters=exports.addDecorator=exports.configure=exports.storiesOf=void 0;var _client=__webpack_require__(580);__webpack_require__(759);var _render=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(760));var api=(0,_client.start)(_render.default);exports.storiesOf=function storiesOf(kind,m){return api.clientApi.storiesOf(kind,m).addParameters({framework:"react"})};exports.configure=function configure(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return api.configure.apply(api,args.concat(["react"]))};var addDecorator=api.clientApi.addDecorator;exports.addDecorator=addDecorator;var addParameters=api.clientApi.addParameters;exports.addParameters=addParameters;var clearDecorators=api.clientApi.clearDecorators;exports.clearDecorators=clearDecorators;var setAddon=api.clientApi.setAddon;exports.setAddon=setAddon;var forceReRender=api.forceReRender;exports.forceReRender=forceReRender;var getStorybook=api.clientApi.getStorybook;exports.getStorybook=getStorybook;var raw=api.clientApi.raw;exports.raw=raw},function(module,exports,__webpack_require__){module.exports=__webpack_require__(581).default},function(module,exports,__webpack_require__){"use strict";__webpack_require__(27),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(582)).default;exports.default=_default},function(module,exports,__webpack_require__){"use strict";__webpack_require__(27),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _clientApi=__webpack_require__(359),_utils=__webpack_require__(224);var _default={start:function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(736)).default,toId:_utils.toId,ClientApi:_clientApi.ClientApi,ConfigApi:_clientApi.ConfigApi,StoryStore:_clientApi.StoryStore};exports.default=_default},function(module,exports,__webpack_require__){var $=__webpack_require__(19),fails=__webpack_require__(33),toIndexedObject=__webpack_require__(97),nativeGetOwnPropertyDescriptor=__webpack_require__(145).f,DESCRIPTORS=__webpack_require__(49),FAILS_ON_PRIMITIVES=fails((function(){nativeGetOwnPropertyDescriptor(1)}));$({target:"Object",stat:!0,forced:!DESCRIPTORS||FAILS_ON_PRIMITIVES,sham:!DESCRIPTORS},{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(it,key){return nativeGetOwnPropertyDescriptor(toIndexedObject(it),key)}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(86),__webpack_require__(99),__webpack_require__(100),__webpack_require__(73),__webpack_require__(215),__webpack_require__(87),__webpack_require__(181),__webpack_require__(133),__webpack_require__(89),__webpack_require__(216),__webpack_require__(367),__webpack_require__(183),__webpack_require__(147),__webpack_require__(27),__webpack_require__(287),__webpack_require__(288),__webpack_require__(119),__webpack_require__(78),__webpack_require__(184),__webpack_require__(102),__webpack_require__(88),__webpack_require__(103),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.defaultDecorateStory=void 0;var _utilDeprecate=_interopRequireDefault(__webpack_require__(289)),_isPlainObject=_interopRequireDefault(__webpack_require__(774)),_clientLogger=__webpack_require__(148),_addons=_interopRequireDefault(__webpack_require__(217)),_coreEvents=_interopRequireDefault(__webpack_require__(186)),_utils=__webpack_require__(224),_mergeWith=_interopRequireDefault(__webpack_require__(633)),_isEqual=_interopRequireDefault(__webpack_require__(692)),_get=_interopRequireDefault(__webpack_require__(406)),_subscriptions_store=_interopRequireDefault(__webpack_require__(407)),_hooks=__webpack_require__(305);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var merge=function merge(a,b){return(0,_mergeWith.default)({},a,b,(function(objValue,srcValue){return Array.isArray(srcValue)&&Array.isArray(objValue)?(srcValue.forEach((function(s){objValue.find((function(o){return o===s||(0,_isEqual.default)(o,s)}))||objValue.push(s)})),objValue):Array.isArray(objValue)?(_clientLogger.logger.log("the types mismatch, picking",objValue),objValue):void 0}))},defaultContext={id:"unspecified",name:"unspecified",kind:"unspecified",parameters:{}},defaultDecorateStory=function defaultDecorateStory(storyFn,decorators){return decorators.reduce((function(decorated,decorator){return function(){var context=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaultContext;return decorator((function(p){return decorated(p?Object.assign({},context,{},p,{parameters:Object.assign({},context.parameters,{},p.parameters)}):context)}),context)}}),storyFn)};exports.defaultDecorateStory=defaultDecorateStory;var metaSubscriptionHandler=(0,_utilDeprecate.default)(_subscriptions_store.default.register,"Events.REGISTER_SUBSCRIPTION is deprecated and will be removed in 6.0. Please use useEffect from @storybook/client-api instead."),metaSubscription=function metaSubscription(){return _addons.default.getChannel().on(_coreEvents.default.REGISTER_SUBSCRIPTION,metaSubscriptionHandler),function(){return _addons.default.getChannel().removeListener(_coreEvents.default.REGISTER_SUBSCRIPTION,metaSubscriptionHandler)}},withSubscriptionTracking=function withSubscriptionTracking(storyFn){if(!_addons.default.hasChannel())return storyFn();_subscriptions_store.default.markAllAsUnused(),_subscriptions_store.default.register(metaSubscription);var result=storyFn();return _subscriptions_store.default.clearUnused(),result};exports.default=function ClientApi(_ref){var _this=this,storyStore=_ref.storyStore,_ref$decorateStory=_ref.decorateStory,decorateStory=void 0===_ref$decorateStory?defaultDecorateStory:_ref$decorateStory;if(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ClientApi),this._storyStore=void 0,this._addons=void 0,this._globalDecorators=void 0,this._globalParameters=void 0,this._decorateStory=void 0,this.setAddon=function(addon){_this._addons=Object.assign({},_this._addons,{},addon)},this.getSeparators=function(){return Object.assign({},{hierarchyRootSeparator:"|",hierarchySeparator:/\/|\./},_this._globalParameters.options)},this.addDecorator=function(decorator){_this._globalDecorators.push(decorator)},this.addParameters=function(parameters){_this._globalParameters=Object.assign({},_this._globalParameters,{},parameters,{options:Object.assign({},merge((0,_get.default)(_this._globalParameters,"options",{}),(0,_get.default)(parameters,"options",{}))),docs:Object.assign({},merge((0,_get.default)(_this._globalParameters,"docs",{}),(0,_get.default)(parameters,"docs",{})))})},this.clearDecorators=function(){_this._globalDecorators=[]},this.storiesOf=function(kind,m){if(!kind&&"string"!=typeof kind)throw new Error("Invalid or missing kind provided for stories, should be a string");if(m||_clientLogger.logger.warn("Missing 'module' parameter for story with a kind of '".concat(kind,"'. It will break your HMR")),m){var proto=Object.getPrototypeOf(m);proto.exports&&proto.exports.default&&_clientLogger.logger.error("Illegal mix of CSF default export and storiesOf calls in a single file: ".concat(proto.i))}m&&m.hot&&m.hot.dispose&&m.hot.dispose((function(){var _storyStore=_this._storyStore;_storyStore.removeStoryKind(kind),_storyStore.incrementRevision()}));var localDecorators=[],localParameters={},hasAdded=!1,api={kind:kind.toString(),add:function add(){return api},addDecorator:function addDecorator(){return api},addParameters:function addParameters(){return api}};return Object.keys(_this._addons).forEach((function(name){var addon=_this._addons[name];api[name]=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return addon.apply(api,args),api}})),api.add=function(storyName,storyFn,parameters){hasAdded=!0;var _globalParameters=_this._globalParameters,_globalDecorators=_this._globalDecorators,id=(0,_utils.toId)(kind,storyName);if("string"!=typeof storyName)throw new Error('Invalid or missing storyName provided for a "'.concat(kind,'" story.'));m&&m.hot&&m.hot.dispose&&m.hot.dispose((function(){_this._storyStore.remove(id)}));var fileName=m&&m.id?"".concat(m.id):void 0,_this$getSeparators=_this.getSeparators(),allParam=[{options:{hierarchyRootSeparator:_this$getSeparators.hierarchyRootSeparator,hierarchySeparator:_this$getSeparators.hierarchySeparator}},_globalParameters,localParameters,parameters].reduce((function(acc,p){return p&&Object.entries(p).forEach((function(_ref2){var _ref3=_slicedToArray(_ref2,2),key=_ref3[0],value=_ref3[1],existingValue=acc[key];Array.isArray(value)?acc[key]=value:(0,_isPlainObject.default)(value)&&(0,_isPlainObject.default)(existingValue)?acc[key]=merge(existingValue,value):acc[key]=value})),acc}),{fileName:fileName});return _this._storyStore.addStory({id:id,kind:kind,name:storyName,storyFn:storyFn,parameters:allParam},{applyDecorators:(0,_hooks.applyHooks)(_this._decorateStory),getDecorators:function getDecorators(){return[].concat(_toConsumableArray(allParam.decorators||[]),localDecorators,_toConsumableArray(_globalDecorators),[withSubscriptionTracking])}}),api},api.addDecorator=function(decorator){return hasAdded&&_clientLogger.logger.warn("You have added a decorator to the kind '".concat(kind,"' after a story has already been added.\nIn Storybook 4 this applied the decorator only to subsequent stories. In Storybook 5+ it applies to all stories.\nThis is probably not what you intended. Read more here: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md")),localDecorators.push(decorator),api},api.addParameters=function(parameters){return localParameters=Object.assign({},localParameters,{},parameters),api},api},this.getStorybook=function(){return _this._storyStore.getStoryKinds().map((function(kind){var fileName=_this._storyStore.getStoryFileName(kind),stories=_this._storyStore.getStories(kind).map((function(name){return{name:name,render:_this._storyStore.getStoryWithContext(kind,name)}}));return{kind:kind,fileName:fileName,stories:stories}}))},this.raw=function(){return _this._storyStore.raw()},this.store=function(){return _this._storyStore},this._storyStore=storyStore,this._addons={},this._globalDecorators=[],this._globalParameters={},this._decorateStory=decorateStory,!storyStore)throw new Error("storyStore is required")}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(179),toObject=__webpack_require__(77),callWithSafeIterationClosing=__webpack_require__(362),isArrayIteratorMethod=__webpack_require__(363),toLength=__webpack_require__(76),createProperty=__webpack_require__(280),getIteratorMethod=__webpack_require__(364);module.exports=function from(arrayLike){var length,result,step,iterator,next,O=toObject(arrayLike),C="function"==typeof this?this:Array,argumentsLength=arguments.length,mapfn=argumentsLength>1?arguments[1]:void 0,mapping=void 0!==mapfn,index=0,iteratorMethod=getIteratorMethod(O);if(mapping&&(mapfn=bind(mapfn,argumentsLength>2?arguments[2]:void 0,2)),null==iteratorMethod||C==Array&&isArrayIteratorMethod(iteratorMethod))for(result=new C(length=toLength(O.length));length>index;index++)createProperty(result,index,mapping?mapfn(O[index],index):O[index]);else for(next=(iterator=iteratorMethod.call(O)).next,result=new C;!(step=next.call(iterator)).done;index++)createProperty(result,index,mapping?callWithSafeIterationClosing(iterator,mapfn,[step.value,index],!0):step.value);return result.length=index,result}},function(module,exports,__webpack_require__){"use strict";var IteratorPrototype=__webpack_require__(365).IteratorPrototype,create=__webpack_require__(146),createPropertyDescriptor=__webpack_require__(171),setToStringTag=__webpack_require__(129),Iterators=__webpack_require__(182),returnThis=function(){return this};module.exports=function(IteratorConstructor,NAME,next){var TO_STRING_TAG=NAME+" Iterator";return IteratorConstructor.prototype=create(IteratorPrototype,{next:createPropertyDescriptor(1,next)}),setToStringTag(IteratorConstructor,TO_STRING_TAG,!1,!0),Iterators[TO_STRING_TAG]=returnThis,IteratorConstructor}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40);module.exports=function(it){if(!isObject(it)&&null!==it)throw TypeError("Can't set "+String(it)+" as a prototype");return it}},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(131),toObject=__webpack_require__(77),IndexedObject=__webpack_require__(207),toLength=__webpack_require__(76),createMethod=function(IS_RIGHT){return function(that,callbackfn,argumentsLength,memo){aFunction(callbackfn);var O=toObject(that),self=IndexedObject(O),length=toLength(O.length),index=IS_RIGHT?length-1:0,i=IS_RIGHT?-1:1;if(argumentsLength<2)for(;;){if(index in self){memo=self[index],index+=i;break}if(index+=i,IS_RIGHT?index<0:length<=index)throw TypeError("Reduce of empty array with no initial value")}for(;IS_RIGHT?index>=0:length>index;index+=i)index in self&&(memo=callbackfn(memo,self[index],index,O));return memo}};module.exports={left:createMethod(!1),right:createMethod(!0)}},function(module,exports,__webpack_require__){"use strict";var DESCRIPTORS=__webpack_require__(49),fails=__webpack_require__(33),objectKeys=__webpack_require__(178),getOwnPropertySymbolsModule=__webpack_require__(279),propertyIsEnumerableModule=__webpack_require__(206),toObject=__webpack_require__(77),IndexedObject=__webpack_require__(207),nativeAssign=Object.assign;module.exports=!nativeAssign||fails((function(){var A={},B={},symbol=Symbol();return A[symbol]=7,"abcdefghijklmnopqrst".split("").forEach((function(chr){B[chr]=chr})),7!=nativeAssign({},A)[symbol]||"abcdefghijklmnopqrst"!=objectKeys(nativeAssign({},B)).join("")}))?function assign(target,source){for(var T=toObject(target),argumentsLength=arguments.length,index=1,getOwnPropertySymbols=getOwnPropertySymbolsModule.f,propertyIsEnumerable=propertyIsEnumerableModule.f;argumentsLength>index;)for(var key,S=IndexedObject(arguments[index++]),keys=getOwnPropertySymbols?objectKeys(S).concat(getOwnPropertySymbols(S)):objectKeys(S),length=keys.length,j=0;length>j;)key=keys[j++],DESCRIPTORS&&!propertyIsEnumerable.call(S,key)||(T[key]=S[key]);return T}:nativeAssign},function(module,exports,__webpack_require__){"use strict";__webpack_require__(87),__webpack_require__(147),__webpack_require__(27),__webpack_require__(78),__webpack_require__(290),__webpack_require__(218),__webpack_require__(88),Object.defineProperty(exports,"__esModule",{value:!0}),exports.addons=exports.AddonStore=void 0;var _global=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(101)),_clientLogger=__webpack_require__(148),_types=__webpack_require__(374);var AddonStore=function AddonStore(){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AddonStore),this.loaders={},this.elements={},this.channel=void 0,this.promise=void 0,this.resolve=void 0,this.getChannel=function(){if(!_this.channel)throw new Error("Accessing non-existent addons channel, see https://storybook.js.org/basics/faq/#why-is-there-no-addons-channel");return _this.channel},this.ready=function(){return _this.promise},this.hasChannel=function(){return!!_this.channel},this.setChannel=function(channel){_this.channel=channel,_this.resolve()},this.getElements=function(type){return _this.elements[type]||(_this.elements[type]={}),_this.elements[type]},this.addPanel=function(name,options){_this.add(name,Object.assign({type:_types.types.PANEL},options))},this.add=function(name,addon){var type=addon.type;_this.getElements(type)[name]=Object.assign({id:name},addon)},this.register=function(name,registerCallback){_this.loaders[name]&&_clientLogger.logger.warn("".concat(name," was loaded twice, this could have bad side-effects")),_this.loaders[name]=registerCallback},this.loadAddons=function(api){Object.values(_this.loaders).forEach((function(value){return value(api)}))},this.promise=new Promise((function(res){_this.resolve=function(){return res(_this.getChannel())}}))};exports.AddonStore=AddonStore;var KEY="__STORYBOOK_ADDONS";var addons=function getAddonsStore(){return _global.default[KEY]||(_global.default[KEY]=new AddonStore),_global.default[KEY]}();exports.addons=addons},function(module,exports,__webpack_require__){var global=__webpack_require__(29);module.exports=global.Promise},function(module,exports,__webpack_require__){var flush,head,last,notify,toggle,node,promise,then,global=__webpack_require__(29),getOwnPropertyDescriptor=__webpack_require__(145).f,classof=__webpack_require__(98),macrotask=__webpack_require__(291).set,userAgent=__webpack_require__(214),MutationObserver=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,IS_NODE="process"==classof(process),queueMicrotaskDescriptor=getOwnPropertyDescriptor(global,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value;queueMicrotask||(flush=function(){var parent,fn;for(IS_NODE&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(error){throw head?notify():last=void 0,error}}last=void 0,parent&&parent.enter()},IS_NODE?notify=function(){process.nextTick(flush)}:MutationObserver&&!/(iphone|ipod|ipad).*applewebkit/i.test(userAgent)?(toggle=!0,node=document.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}):Promise&&Promise.resolve?(promise=Promise.resolve(void 0),then=promise.then,notify=function(){then.call(promise,flush)}):notify=function(){macrotask.call(global,flush)}),module.exports=queueMicrotask||function(fn){var task={fn:fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(50),isObject=__webpack_require__(40),newPromiseCapability=__webpack_require__(373);module.exports=function(C,x){if(anObject(C),isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);return(0,promiseCapability.resolve)(x),promiseCapability.promise}},function(module,exports,__webpack_require__){var global=__webpack_require__(29);module.exports=function(a,b){var console=global.console;console&&console.error&&(1===arguments.length?console.error(a):console.error(a,b))}},function(module,exports){module.exports=function(exec){try{return{error:!1,value:exec()}}catch(error){return{error:!0,value:error}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(73),__webpack_require__(222),__webpack_require__(27),Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeDecorator=void 0;var _utilDeprecate=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(289));exports.makeDecorator=function makeDecorator(_ref){var name=_ref.name,parameterName=_ref.parameterName,wrapper=_ref.wrapper,_ref$skipIfNoParamete=_ref.skipIfNoParametersOrOptions,skipIfNoParametersOrOptions=void 0!==_ref$skipIfNoParamete&&_ref$skipIfNoParamete,_ref$allowDeprecatedU=_ref.allowDeprecatedUsage,allowDeprecatedUsage=void 0!==_ref$allowDeprecatedU&&_ref$allowDeprecatedU,decorator=function decorator(options){return function(getStory,context){var parameters=context.parameters&&context.parameters[parameterName];return parameters&&parameters.disable?getStory(context):!skipIfNoParametersOrOptions||options||parameters?wrapper(getStory,context,{options:options,parameters:parameters}):getStory(context)}};return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return"function"==typeof args[0]?decorator().apply(void 0,args):function(){for(var _len2=arguments.length,innerArgs=new Array(_len2),_key2=0;_key2<_len2;_key2++)innerArgs[_key2]=arguments[_key2];if(innerArgs.length>1)return decorator.apply(void 0,args).apply(void 0,innerArgs);if(allowDeprecatedUsage)return(0,_utilDeprecate.default)((function(context){return decorator.apply(void 0,args)(innerArgs[0],context)}),"Passing stories directly into ".concat(name,"() is deprecated,\n          instead use addDecorator(").concat(name,") and pass options with the '").concat(parameterName,"' parameter"));throw new Error("Passing stories directly into ".concat(name,"() is not allowed,\n        instead use addDecorator(").concat(name,") and pass options with the '").concat(parameterName,"' parameter"))}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(27),Object.defineProperty(exports,"__esModule",{value:!0}),exports.mockChannel=function mockChannel(){return new _channels.default({transport:{setHandler:function setHandler(){},send:function send(){}}})};var _channels=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(375))},function(module,exports,__webpack_require__){(function(global){var scope=void 0!==global&&global||"undefined"!=typeof self&&self||window,apply=Function.prototype.apply;function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,scope,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,scope,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout&&timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(scope,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout((function onTimeout(){item._onTimeout&&item._onTimeout()}),msecs))},__webpack_require__(599),exports.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==global&&global.setImmediate||this&&this.setImmediate,exports.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==global&&global.clearImmediate||this&&this.clearImmediate}).call(this,__webpack_require__(36))},function(module,exports,__webpack_require__){(function(global,process){!function(global,undefined){"use strict";if(!global.setImmediate){var registerImmediate,nextHandle=1,tasksByHandle={},currentlyRunningATask=!1,doc=global.document,attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global,"[object process]"==={}.toString.call(global.process)?function installNextTickImplementation(){registerImmediate=function(handle){process.nextTick((function(){runIfPresent(handle)}))}}():!function canUsePostMessage(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=!0,oldOnMessage=global.onmessage;return global.onmessage=function(){postMessageIsAsynchronous=!1},global.postMessage("","*"),global.onmessage=oldOnMessage,postMessageIsAsynchronous}}()?global.MessageChannel?function installMessageChannelImplementation(){var channel=new MessageChannel;channel.port1.onmessage=function(event){runIfPresent(event.data)},registerImmediate=function(handle){channel.port2.postMessage(handle)}}():doc&&"onreadystatechange"in doc.createElement("script")?function installReadyStateChangeImplementation(){var html=doc.documentElement;registerImmediate=function(handle){var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script)}}():function installSetTimeoutImplementation(){registerImmediate=function(handle){setTimeout(runIfPresent,0,handle)}}():function installPostMessageImplementation(){var messagePrefix="setImmediate$"+Math.random()+"$",onGlobalMessage=function(event){event.source===global&&"string"==typeof event.data&&0===event.data.indexOf(messagePrefix)&&runIfPresent(+event.data.slice(messagePrefix.length))};global.addEventListener?global.addEventListener("message",onGlobalMessage,!1):global.attachEvent("onmessage",onGlobalMessage),registerImmediate=function(handle){global.postMessage(messagePrefix+handle,"*")}}(),attachTo.setImmediate=function setImmediate(callback){"function"!=typeof callback&&(callback=new Function(""+callback));for(var args=new Array(arguments.length-1),i=0;i<args.length;i++)args[i]=arguments[i+1];var task={callback:callback,args:args};return tasksByHandle[nextHandle]=task,registerImmediate(nextHandle),nextHandle++},attachTo.clearImmediate=clearImmediate}function clearImmediate(handle){delete tasksByHandle[handle]}function runIfPresent(handle){if(currentlyRunningATask)setTimeout(runIfPresent,0,handle);else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=!0;try{!function run(task){var callback=task.callback,args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(undefined,args)}}(task)}finally{clearImmediate(handle),currentlyRunningATask=!1}}}}}("undefined"==typeof self?void 0===global?this:global:self)}).call(this,__webpack_require__(36),__webpack_require__(72))},function(module,exports,__webpack_require__){var global=__webpack_require__(29),task=__webpack_require__(291),FORCED=!global.setImmediate||!global.clearImmediate;__webpack_require__(19)({global:!0,bind:!0,enumerable:!0,forced:FORCED},{setImmediate:task.set,clearImmediate:task.clear})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(86),__webpack_require__(99),__webpack_require__(100),__webpack_require__(73),__webpack_require__(602),__webpack_require__(87),__webpack_require__(181),__webpack_require__(377),__webpack_require__(133),__webpack_require__(89),__webpack_require__(216),__webpack_require__(183),__webpack_require__(378),__webpack_require__(222),__webpack_require__(27),__webpack_require__(287),__webpack_require__(119),__webpack_require__(78),__webpack_require__(184),__webpack_require__(379),__webpack_require__(383),__webpack_require__(102),__webpack_require__(604),__webpack_require__(88),__webpack_require__(103),Object.defineProperty(exports,"__esModule",{value:!0}),exports.useMemo=function useMemo(nextCreate,deps){return useMemoLike("useMemo",nextCreate,deps)},exports.useCallback=function useCallback(callback,deps){return useMemoLike("useCallback",(function(){return callback}),deps)},exports.useRef=function useRef(initialValue){return useRefLike("useRef",initialValue)},exports.useState=function useState(initialState){return useStateLike("useState",initialState)},exports.useReducer=function useReducer(reducer,initialArg,init){var _useStateLike2=_slicedToArray(useStateLike("useReducer",null!=init?function(){return init(initialArg)}:initialArg),2),state=_useStateLike2[0],setState=_useStateLike2[1];return[state,function dispatch(action){return setState((function(prevState){return reducer(prevState,action)}))}]},exports.useEffect=useEffect,exports.useChannel=function useChannel(eventMap){var deps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],channel=_public_api.default.getChannel();return useEffect((function(){return Object.entries(eventMap).forEach((function(_ref2){var _ref3=_slicedToArray(_ref2,2),type=_ref3[0],listener=_ref3[1];return channel.on(type,listener)})),function(){Object.entries(eventMap).forEach((function(_ref4){var _ref5=_slicedToArray(_ref4,2),type=_ref5[0],listener=_ref5[1];return channel.removeListener(type,listener)}))}}),[].concat(_toConsumableArray(Object.keys(eventMap)),_toConsumableArray(deps))),channel.emit.bind(channel)},exports.useStoryContext=useStoryContext,exports.useParameter=function useParameter(parameterKey,defaultValue){var parameters=useStoryContext().parameters;if(parameterKey)return parameters[parameterKey]||defaultValue;return},exports.applyHooks=exports.HooksContext=void 0;var _global=_interopRequireDefault(__webpack_require__(101)),_clientLogger=__webpack_require__(148),_coreEvents=__webpack_require__(186),_public_api=_interopRequireDefault(__webpack_require__(217));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var RenderEvents=[_coreEvents.STORY_RENDERED,_coreEvents.DOCS_RENDERED],HooksContext=function(){function HooksContext(){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HooksContext),this.hookListsMap=void 0,this.mountedDecorators=void 0,this.prevMountedDecorators=void 0,this.currentHooks=void 0,this.nextHookIndex=void 0,this.currentPhase=void 0,this.currentEffects=void 0,this.prevEffects=void 0,this.currentDecoratorName=void 0,this.hasUpdates=void 0,this.currentContext=void 0,this.renderListener=function(){_this.triggerEffects(),_this.currentContext=null,_this.removeRenderListeners()},this.init()}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(HooksContext,[{key:"init",value:function init(){this.hookListsMap=new WeakMap,this.mountedDecorators=new Set,this.prevMountedDecorators=this.mountedDecorators,this.currentHooks=[],this.nextHookIndex=0,this.currentPhase="NONE",this.currentEffects=[],this.prevEffects=[],this.currentDecoratorName=null,this.hasUpdates=!1,this.currentContext=null}},{key:"clean",value:function clean(){this.prevEffects.forEach((function(effect){effect.destroy&&effect.destroy()})),this.init(),this.removeRenderListeners()}},{key:"getNextHook",value:function getNextHook(){var hook=this.currentHooks[this.nextHookIndex];return this.nextHookIndex+=1,hook}},{key:"triggerEffects",value:function triggerEffects(){var _this2=this;this.prevEffects.forEach((function(effect){!_this2.currentEffects.includes(effect)&&effect.destroy&&effect.destroy()})),this.currentEffects.forEach((function(effect){_this2.prevEffects.includes(effect)||(effect.destroy=effect.create())})),this.prevEffects=this.currentEffects,this.currentEffects=[]}},{key:"addRenderListeners",value:function addRenderListeners(){var _this3=this,channel=_public_api.default.getChannel();RenderEvents.forEach((function(e){return channel.on(e,_this3.renderListener)}))}},{key:"removeRenderListeners",value:function removeRenderListeners(){var _this4=this,channel=_public_api.default.getChannel();RenderEvents.forEach((function(e){return channel.removeListener(e,_this4.renderListener)}))}}]),HooksContext}();exports.HooksContext=HooksContext;var hookify=function hookify(fn){return function(){var _ref="function"==typeof(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=0?void 0:arguments[0],hooks=_ref.hooks,prevPhase=hooks.currentPhase,prevHooks=hooks.currentHooks,prevNextHookIndex=hooks.nextHookIndex,prevDecoratorName=hooks.currentDecoratorName;hooks.currentDecoratorName=fn.name,hooks.prevMountedDecorators.has(fn)?(hooks.currentPhase="UPDATE",hooks.currentHooks=hooks.hookListsMap.get(fn)||[]):(hooks.currentPhase="MOUNT",hooks.currentHooks=[],hooks.hookListsMap.set(fn,hooks.currentHooks)),hooks.nextHookIndex=0;var prevContext=_global.default.STORYBOOK_HOOKS_CONTEXT;_global.default.STORYBOOK_HOOKS_CONTEXT=hooks;var result=fn.apply(void 0,arguments);if(_global.default.STORYBOOK_HOOKS_CONTEXT=prevContext,"UPDATE"===hooks.currentPhase&&null!=hooks.getNextHook())throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return hooks.currentPhase=prevPhase,hooks.currentHooks=prevHooks,hooks.nextHookIndex=prevNextHookIndex,hooks.currentDecoratorName=prevDecoratorName,result}},numberOfRenders=0;exports.applyHooks=function applyHooks(applyDecorators){return function(getStory,decorators){var decorated=applyDecorators(hookify(getStory),decorators.map(hookify));return function(context){var hooks=context.hooks;hooks.prevMountedDecorators=hooks.mountedDecorators,hooks.mountedDecorators=new Set([getStory].concat(_toConsumableArray(decorators))),hooks.currentContext=context,hooks.hasUpdates=!1;var result=decorated(context);for(numberOfRenders=1;hooks.hasUpdates;)if(hooks.hasUpdates=!1,hooks.currentEffects=[],hooks.prevMountedDecorators=hooks.mountedDecorators,result=decorated(context),(numberOfRenders+=1)>25)throw new Error("Too many re-renders. Storybook limits the number of renders to prevent an infinite loop.");return hooks.addRenderListeners(),result}}};var areDepsEqual=function areDepsEqual(deps,nextDeps){return deps.length===nextDeps.length&&deps.every((function(dep,i){return dep===nextDeps[i]}))},invalidHooksError=function invalidHooksError(){return new Error("Storybook preview hooks can only be called inside decorators and story functions.")};function getHooksContextOrNull(){return _global.default.STORYBOOK_HOOKS_CONTEXT||null}function getHooksContextOrThrow(){var hooks=getHooksContextOrNull();if(null==hooks)throw invalidHooksError();return hooks}function useMemoLike(name,nextCreate,deps){return function useHook(name,callback,deps){var hooks=getHooksContextOrThrow();if("MOUNT"===hooks.currentPhase){null==deps||Array.isArray(deps)||_clientLogger.logger.warn("".concat(name," received a final argument that is not an array (instead, received ").concat(deps,"). When specified, the final argument must be an array."));var _hook={name:name,deps:deps};return hooks.currentHooks.push(_hook),callback(_hook),_hook}if("UPDATE"===hooks.currentPhase){var _hook2=hooks.getNextHook();if(null==_hook2)throw new Error("Rendered more hooks than during the previous render.");return _hook2.name!==name&&_clientLogger.logger.warn("Storybook has detected a change in the order of Hooks".concat(hooks.currentDecoratorName?" called by ".concat(hooks.currentDecoratorName):"",". This will lead to bugs and errors if not fixed.")),null!=deps&&null==_hook2.deps&&_clientLogger.logger.warn("".concat(name," received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.")),null!=deps&&null!=_hook2.deps&&deps.length!==_hook2.deps.length&&_clientLogger.logger.warn("The final argument passed to ".concat(name," changed size between renders. The order and size of this array must remain constant.\nPrevious: ").concat(_hook2.deps,"\nIncoming: ").concat(deps)),null!=deps&&null!=_hook2.deps&&areDepsEqual(deps,_hook2.deps)||(callback(_hook2),_hook2.deps=deps),_hook2}throw invalidHooksError()}(name,(function(hook){hook.memoizedState=nextCreate()}),deps).memoizedState}function useRefLike(name,initialValue){return useMemoLike(name,(function(){return{current:initialValue}}),[])}function useStateLike(name,initialState){var stateRef=useRefLike(name,"function"==typeof initialState?initialState():initialState);return[stateRef.current,function setState(update){stateRef.current="function"==typeof update?update(stateRef.current):update,function triggerUpdate(){var hooks=getHooksContextOrNull();if(null!=hooks&&"NONE"!==hooks.currentPhase)hooks.hasUpdates=!0;else try{_public_api.default.getChannel().emit(_coreEvents.FORCE_RE_RENDER)}catch(e){_clientLogger.logger.warn("State updates of Storybook preview hooks work only in browser")}}()}]}function useEffect(create,deps){var hooks=getHooksContextOrThrow(),effect=useMemoLike("useEffect",(function(){return{create:create}}),deps);hooks.currentEffects.push(effect)}function useStoryContext(){var currentContext=getHooksContextOrThrow().currentContext;if(null==currentContext)throw invalidHooksError();return currentContext}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),$every=__webpack_require__(130).every;$({target:"Array",proto:!0,forced:__webpack_require__(180)("every")},{every:function every(callbackfn){return $every(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";var aFunction=__webpack_require__(131),isObject=__webpack_require__(40),slice=[].slice,factories={},construct=function(C,argsLength,args){if(!(argsLength in factories)){for(var list=[],i=0;i<argsLength;i++)list[i]="a["+i+"]";factories[argsLength]=Function("C,a","return new C("+list.join(",")+")")}return factories[argsLength](C,args)};module.exports=Function.bind||function bind(that){var fn=aFunction(this),partArgs=slice.call(arguments,1),boundFunction=function bound(){var args=partArgs.concat(slice.call(arguments));return this instanceof boundFunction?construct(fn,args.length,args):fn.apply(that,args)};return isObject(fn.prototype)&&(boundFunction.prototype=fn.prototype),boundFunction}},function(module,exports,__webpack_require__){"use strict";var InternalWeakMap,global=__webpack_require__(29),redefineAll=__webpack_require__(219),InternalMetadataModule=__webpack_require__(185),collection=__webpack_require__(292),collectionWeak=__webpack_require__(605),isObject=__webpack_require__(40),enforceIternalState=__webpack_require__(118).enforce,NATIVE_WEAK_MAP=__webpack_require__(348),IS_IE11=!global.ActiveXObject&&"ActiveXObject"in global,isExtensible=Object.isExtensible,wrapper=function(get){return function WeakMap(){return get(this,arguments.length?arguments[0]:void 0)}},$WeakMap=module.exports=collection("WeakMap",wrapper,collectionWeak,!0,!0);if(NATIVE_WEAK_MAP&&IS_IE11){InternalWeakMap=collectionWeak.getConstructor(wrapper,"WeakMap",!0),InternalMetadataModule.REQUIRED=!0;var WeakMapPrototype=$WeakMap.prototype,nativeDelete=WeakMapPrototype.delete,nativeHas=WeakMapPrototype.has,nativeGet=WeakMapPrototype.get,nativeSet=WeakMapPrototype.set;redefineAll(WeakMapPrototype,{delete:function(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeDelete.call(this,key)||state.frozen.delete(key)}return nativeDelete.call(this,key)},has:function has(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeHas.call(this,key)||state.frozen.has(key)}return nativeHas.call(this,key)},get:function get(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeHas.call(this,key)?nativeGet.call(this,key):state.frozen.get(key)}return nativeGet.call(this,key)},set:function set(key,value){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);state.frozen||(state.frozen=new InternalWeakMap),nativeHas.call(this,key)?nativeSet.call(this,key,value):state.frozen.set(key,value)}else nativeSet.call(this,key,value);return this}})}},function(module,exports,__webpack_require__){"use strict";var redefineAll=__webpack_require__(219),getWeakData=__webpack_require__(185).getWeakData,anObject=__webpack_require__(50),isObject=__webpack_require__(40),anInstance=__webpack_require__(220),iterate=__webpack_require__(221),ArrayIterationModule=__webpack_require__(130),$has=__webpack_require__(60),InternalStateModule=__webpack_require__(118),setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor,find=ArrayIterationModule.find,findIndex=ArrayIterationModule.findIndex,id=0,uncaughtFrozenStore=function(store){return store.frozen||(store.frozen=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.entries=[]},findUncaughtFrozen=function(store,key){return find(store.entries,(function(it){return it[0]===key}))};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1]},has:function(key){return!!findUncaughtFrozen(this,key)},set:function(key,value){var entry=findUncaughtFrozen(this,key);entry?entry[1]=value:this.entries.push([key,value])},delete:function(key){var index=findIndex(this.entries,(function(it){return it[0]===key}));return~index&&this.entries.splice(index,1),!!~index}},module.exports={getConstructor:function(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var C=wrapper((function(that,iterable){anInstance(that,C,CONSTRUCTOR_NAME),setInternalState(that,{type:CONSTRUCTOR_NAME,id:id++,frozen:void 0}),null!=iterable&&iterate(iterable,that[ADDER],that,IS_MAP)})),getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME),define=function(that,key,value){var state=getInternalState(that),data=getWeakData(anObject(key),!0);return!0===data?uncaughtFrozenStore(state).set(key,value):data[state.id]=value,that};return redefineAll(C.prototype,{delete:function(key){var state=getInternalState(this);if(!isObject(key))return!1;var data=getWeakData(key);return!0===data?uncaughtFrozenStore(state).delete(key):data&&$has(data,state.id)&&delete data[state.id]},has:function has(key){var state=getInternalState(this);if(!isObject(key))return!1;var data=getWeakData(key);return!0===data?uncaughtFrozenStore(state).has(key):data&&$has(data,state.id)}}),redefineAll(C.prototype,IS_MAP?{get:function get(key){var state=getInternalState(this);if(isObject(key)){var data=getWeakData(key);return!0===data?uncaughtFrozenStore(state).get(key):data?data[state.id]:void 0}},set:function set(key,value){return define(this,key,value)}}:{add:function add(value){return define(this,value,!0)}}),C}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(86),__webpack_require__(99),__webpack_require__(100),__webpack_require__(73),__webpack_require__(223),__webpack_require__(133),__webpack_require__(89),__webpack_require__(147),__webpack_require__(27),__webpack_require__(78),__webpack_require__(149),__webpack_require__(102),__webpack_require__(226),__webpack_require__(387),__webpack_require__(294),__webpack_require__(608),__webpack_require__(609),__webpack_require__(103),Object.defineProperty(exports,"__esModule",{value:!0}),exports.storyNameFromExport=exports.parseKind=exports.getMatch=exports.stringifyQuery=exports.queryFromLocation=exports.queryFromString=exports.parsePath=exports.toId=exports.sanitize=void 0;var _qs=_interopRequireDefault(__webpack_require__(295)),_memoizerific=_interopRequireDefault(__webpack_require__(297)),_startCase=_interopRequireDefault(__webpack_require__(612));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var splitPathRegex=/\/([^/]+)\/([^/]+)?/,sanitize=function sanitize(string){return string.toLowerCase().replace(/[ '`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")};exports.sanitize=sanitize;var sanitizeSafe=function sanitizeSafe(string,part){var sanitized=sanitize(string);if(""===sanitized)throw new Error("Invalid ".concat(part," '").concat(string,"', must include alphanumeric characters"));return sanitized};exports.toId=function toId(kind,name){return"".concat(sanitizeSafe(kind,"kind"),"--").concat(sanitizeSafe(name,"name"))};var parsePath=(0,_memoizerific.default)(1e3)((function(path){var result={viewMode:void 0,storyId:void 0};if(path){var _ref2=_slicedToArray(path.match(splitPathRegex)||[void 0,void 0,void 0],3),viewMode=_ref2[1],storyId=_ref2[2];viewMode&&Object.assign(result,{viewMode:viewMode,storyId:storyId})}return result}));exports.parsePath=parsePath;var queryFromString=(0,_memoizerific.default)(1e3)((function(s){return _qs.default.parse(s,{ignoreQueryPrefix:!0})}));exports.queryFromString=queryFromString;exports.queryFromLocation=function queryFromLocation(location){return queryFromString(location.search)};exports.stringifyQuery=function stringifyQuery(query){return _qs.default.stringify(query,{addQueryPrefix:!0,encode:!1})};var getMatch=(0,_memoizerific.default)(1e3)((function(current,target){var startsWith=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],startsWithTarget=current&&startsWith&&current.startsWith(target),currentIsTarget="string"==typeof target&&current===target,matchTarget=current&&target&&current.match(target);return startsWithTarget||currentIsTarget||matchTarget?{path:current}:null}));exports.getMatch=getMatch;exports.parseKind=function parseKind(kind,_ref3){var rootSeparator=_ref3.rootSeparator,groupSeparator=_ref3.groupSeparator,_kind$split2=_slicedToArray(kind.split(rootSeparator,2),2),root=_kind$split2[0],remainder=_kind$split2[1];return{root:remainder?root:null,groups:(remainder||kind).split(groupSeparator).filter((function(i){return!!i}))}};exports.storyNameFromExport=function storyNameFromExport(key){return(0,_startCase.default)(key)}},function(module,exports){module.exports=Object.is||function is(x,y){return x===y?0!==x||1/x==1/y:x!=x&&y!=y}},function(module,exports,__webpack_require__){"use strict";var fixRegExpWellKnownSymbolLogic=__webpack_require__(227),isRegExp=__webpack_require__(385),anObject=__webpack_require__(50),requireObjectCoercible=__webpack_require__(85),speciesConstructor=__webpack_require__(372),advanceStringIndex=__webpack_require__(293),toLength=__webpack_require__(76),callRegExpExec=__webpack_require__(228),regexpExec=__webpack_require__(225),fails=__webpack_require__(33),arrayPush=[].push,min=Math.min,SUPPORTS_Y=!fails((function(){return!RegExp(4294967295,"y")}));fixRegExpWellKnownSymbolLogic("split",2,(function(SPLIT,nativeSplit,maybeCallNative){var internalSplit;return internalSplit="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(separator,limit){var string=String(requireObjectCoercible(this)),lim=void 0===limit?4294967295:limit>>>0;if(0===lim)return[];if(void 0===separator)return[string];if(!isRegExp(separator))return nativeSplit.call(string,separator,lim);for(var match,lastIndex,lastLength,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,separatorCopy=new RegExp(separator.source,flags+"g");(match=regexpExec.call(separatorCopy,string))&&!((lastIndex=separatorCopy.lastIndex)>lastLastIndex&&(output.push(string.slice(lastLastIndex,match.index)),match.length>1&&match.index<string.length&&arrayPush.apply(output,match.slice(1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=lim));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++;return lastLastIndex===string.length?!lastLength&&separatorCopy.test("")||output.push(""):output.push(string.slice(lastLastIndex)),output.length>lim?output.slice(0,lim):output}:"0".split(void 0,0).length?function(separator,limit){return void 0===separator&&0===limit?[]:nativeSplit.call(this,separator,limit)}:nativeSplit,[function split(separator,limit){var O=requireObjectCoercible(this),splitter=null==separator?void 0:separator[SPLIT];return void 0!==splitter?splitter.call(separator,O,limit):internalSplit.call(String(O),separator,limit)},function(regexp,limit){var res=maybeCallNative(internalSplit,regexp,this,limit,internalSplit!==nativeSplit);if(res.done)return res.value;var rx=anObject(regexp),S=String(this),C=speciesConstructor(rx,RegExp),unicodeMatching=rx.unicode,flags=(rx.ignoreCase?"i":"")+(rx.multiline?"m":"")+(rx.unicode?"u":"")+(SUPPORTS_Y?"y":"g"),splitter=new C(SUPPORTS_Y?rx:"^(?:"+rx.source+")",flags),lim=void 0===limit?4294967295:limit>>>0;if(0===lim)return[];if(0===S.length)return null===callRegExpExec(splitter,S)?[S]:[];for(var p=0,q=0,A=[];q<S.length;){splitter.lastIndex=SUPPORTS_Y?q:0;var e,z=callRegExpExec(splitter,SUPPORTS_Y?S:S.slice(q));if(null===z||(e=min(toLength(splitter.lastIndex+(SUPPORTS_Y?0:q)),S.length))===p)q=advanceStringIndex(S,q,unicodeMatching);else{if(A.push(S.slice(p,q)),A.length===lim)return A;for(var i=1;i<=z.length-1;i++)if(A.push(z[i]),A.length===lim)return A;q=p=e}}return A.push(S.slice(p)),A}]}),!SUPPORTS_Y)},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),toLength=__webpack_require__(76),notARegExp=__webpack_require__(384),requireObjectCoercible=__webpack_require__(85),correctIsRegExpLogic=__webpack_require__(386),nativeStartsWith="".startsWith,min=Math.min;$({target:"String",proto:!0,forced:!correctIsRegExpLogic("startsWith")},{startsWith:function startsWith(searchString){var that=String(requireObjectCoercible(this));notARegExp(searchString);var index=toLength(min(arguments.length>1?arguments[1]:void 0,that.length)),search=String(searchString);return nativeStartsWith?nativeStartsWith.call(that,search,index):that.slice(index,index+search.length)===search}})},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(296),formats=__webpack_require__(388),has=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function brackets(prefix){return prefix+"[]"},comma:"comma",indices:function indices(prefix,key){return prefix+"["+key+"]"},repeat:function repeat(prefix){return prefix}},isArray=Array.isArray,push=Array.prototype.push,pushToArray=function(arr,valueOrArray){push.apply(arr,isArray(valueOrArray)?valueOrArray:[valueOrArray])},toISO=Date.prototype.toISOString,defaultFormat=formats.default,defaults={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats.formatters[defaultFormat],indices:!1,serializeDate:function serializeDate(date){return toISO.call(date)},skipNulls:!1,strictNullHandling:!1},stringify=function stringify(object,prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset){var obj=object;if("function"==typeof filter?obj=filter(prefix,obj):obj instanceof Date?obj=serializeDate(obj):"comma"===generateArrayPrefix&&isArray(obj)&&(obj=obj.join(",")),null===obj){if(strictNullHandling)return encoder&&!encodeValuesOnly?encoder(prefix,defaults.encoder,charset,"key"):prefix;obj=""}if(function isNonNullishPrimitive(v){return"string"==typeof v||"number"==typeof v||"boolean"==typeof v||"symbol"==typeof v||"bigint"==typeof v}(obj)||utils.isBuffer(obj))return encoder?[formatter(encodeValuesOnly?prefix:encoder(prefix,defaults.encoder,charset,"key"))+"="+formatter(encoder(obj,defaults.encoder,charset,"value"))]:[formatter(prefix)+"="+formatter(String(obj))];var objKeys,values=[];if(void 0===obj)return values;if(isArray(filter))objKeys=filter;else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];skipNulls&&null===obj[key]||(isArray(obj)?pushToArray(values,stringify(obj[key],"function"==typeof generateArrayPrefix?generateArrayPrefix(prefix,key):prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset)):pushToArray(values,stringify(obj[key],prefix+(allowDots?"."+key:"["+key+"]"),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset)))}return values};module.exports=function(object,opts){var objKeys,obj=object,options=function normalizeStringifyOptions(opts){if(!opts)return defaults;if(null!==opts.encoder&&void 0!==opts.encoder&&"function"!=typeof opts.encoder)throw new TypeError("Encoder has to be a function.");var charset=opts.charset||defaults.charset;if(void 0!==opts.charset&&"utf-8"!==opts.charset&&"iso-8859-1"!==opts.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var format=formats.default;if(void 0!==opts.format){if(!has.call(formats.formatters,opts.format))throw new TypeError("Unknown format option provided.");format=opts.format}var formatter=formats.formatters[format],filter=defaults.filter;return("function"==typeof opts.filter||isArray(opts.filter))&&(filter=opts.filter),{addQueryPrefix:"boolean"==typeof opts.addQueryPrefix?opts.addQueryPrefix:defaults.addQueryPrefix,allowDots:void 0===opts.allowDots?defaults.allowDots:!!opts.allowDots,charset:charset,charsetSentinel:"boolean"==typeof opts.charsetSentinel?opts.charsetSentinel:defaults.charsetSentinel,delimiter:void 0===opts.delimiter?defaults.delimiter:opts.delimiter,encode:"boolean"==typeof opts.encode?opts.encode:defaults.encode,encoder:"function"==typeof opts.encoder?opts.encoder:defaults.encoder,encodeValuesOnly:"boolean"==typeof opts.encodeValuesOnly?opts.encodeValuesOnly:defaults.encodeValuesOnly,filter:filter,formatter:formatter,serializeDate:"function"==typeof opts.serializeDate?opts.serializeDate:defaults.serializeDate,skipNulls:"boolean"==typeof opts.skipNulls?opts.skipNulls:defaults.skipNulls,sort:"function"==typeof opts.sort?opts.sort:null,strictNullHandling:"boolean"==typeof opts.strictNullHandling?opts.strictNullHandling:defaults.strictNullHandling}}(opts);"function"==typeof options.filter?obj=(0,options.filter)("",obj):isArray(options.filter)&&(objKeys=options.filter);var arrayFormat,keys=[];if("object"!=typeof obj||null===obj)return"";arrayFormat=opts&&opts.arrayFormat in arrayPrefixGenerators?opts.arrayFormat:opts&&"indices"in opts?opts.indices?"indices":"repeat":"indices";var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];objKeys||(objKeys=Object.keys(obj)),options.sort&&objKeys.sort(options.sort);for(var i=0;i<objKeys.length;++i){var key=objKeys[i];options.skipNulls&&null===obj[key]||pushToArray(keys,stringify(obj[key],key,generateArrayPrefix,options.strictNullHandling,options.skipNulls,options.encode?options.encoder:null,options.filter,options.sort,options.allowDots,options.serializeDate,options.formatter,options.encodeValuesOnly,options.charset))}var joined=keys.join(options.delimiter),prefix=!0===options.addQueryPrefix?"?":"";return options.charsetSentinel&&("iso-8859-1"===options.charset?prefix+="utf8=%26%2310003%3B&":prefix+="utf8=%E2%9C%93&"),joined.length>0?prefix+joined:""}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(296),has=Object.prototype.hasOwnProperty,defaults={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(str){return str.replace(/&#(\d+);/g,(function($0,numberStr){return String.fromCharCode(parseInt(numberStr,10))}))},parseKeys=function parseQueryStringKeys(givenKey,val,options){if(givenKey){var key=options.allowDots?givenKey.replace(/\.([^.[]+)/g,"[$1]"):givenKey,child=/(\[[^[\]]*])/g,segment=options.depth>0&&/(\[[^[\]]*])/.exec(key),parent=segment?key.slice(0,segment.index):key,keys=[];if(parent){if(!options.plainObjects&&has.call(Object.prototype,parent)&&!options.allowPrototypes)return;keys.push(parent)}for(var i=0;options.depth>0&&null!==(segment=child.exec(key))&&i<options.depth;){if(i+=1,!options.plainObjects&&has.call(Object.prototype,segment[1].slice(1,-1))&&!options.allowPrototypes)return;keys.push(segment[1])}return segment&&keys.push("["+key.slice(segment.index)+"]"),function(chain,val,options){for(var leaf=val,i=chain.length-1;i>=0;--i){var obj,root=chain[i];if("[]"===root&&options.parseArrays)obj=[].concat(leaf);else{obj=options.plainObjects?Object.create(null):{};var cleanRoot="["===root.charAt(0)&&"]"===root.charAt(root.length-1)?root.slice(1,-1):root,index=parseInt(cleanRoot,10);options.parseArrays||""!==cleanRoot?!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&index>=0&&options.parseArrays&&index<=options.arrayLimit?(obj=[])[index]=leaf:obj[cleanRoot]=leaf:obj={0:leaf}}leaf=obj}return leaf}(keys,val,options)}};module.exports=function(str,opts){var options=function normalizeParseOptions(opts){if(!opts)return defaults;if(null!==opts.decoder&&void 0!==opts.decoder&&"function"!=typeof opts.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==opts.charset&&"utf-8"!==opts.charset&&"iso-8859-1"!==opts.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var charset=void 0===opts.charset?defaults.charset:opts.charset;return{allowDots:void 0===opts.allowDots?defaults.allowDots:!!opts.allowDots,allowPrototypes:"boolean"==typeof opts.allowPrototypes?opts.allowPrototypes:defaults.allowPrototypes,arrayLimit:"number"==typeof opts.arrayLimit?opts.arrayLimit:defaults.arrayLimit,charset:charset,charsetSentinel:"boolean"==typeof opts.charsetSentinel?opts.charsetSentinel:defaults.charsetSentinel,comma:"boolean"==typeof opts.comma?opts.comma:defaults.comma,decoder:"function"==typeof opts.decoder?opts.decoder:defaults.decoder,delimiter:"string"==typeof opts.delimiter||utils.isRegExp(opts.delimiter)?opts.delimiter:defaults.delimiter,depth:"number"==typeof opts.depth||!1===opts.depth?+opts.depth:defaults.depth,ignoreQueryPrefix:!0===opts.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof opts.interpretNumericEntities?opts.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:"number"==typeof opts.parameterLimit?opts.parameterLimit:defaults.parameterLimit,parseArrays:!1!==opts.parseArrays,plainObjects:"boolean"==typeof opts.plainObjects?opts.plainObjects:defaults.plainObjects,strictNullHandling:"boolean"==typeof opts.strictNullHandling?opts.strictNullHandling:defaults.strictNullHandling}}(opts);if(""===str||null==str)return options.plainObjects?Object.create(null):{};for(var tempObj="string"==typeof str?function parseQueryStringValues(str,options){var i,obj={},cleanStr=options.ignoreQueryPrefix?str.replace(/^\?/,""):str,limit=options.parameterLimit===1/0?void 0:options.parameterLimit,parts=cleanStr.split(options.delimiter,limit),skipIndex=-1,charset=options.charset;if(options.charsetSentinel)for(i=0;i<parts.length;++i)0===parts[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===parts[i]?charset="utf-8":"utf8=%26%2310003%3B"===parts[i]&&(charset="iso-8859-1"),skipIndex=i,i=parts.length);for(i=0;i<parts.length;++i)if(i!==skipIndex){var key,val,part=parts[i],bracketEqualsPos=part.indexOf("]="),pos=-1===bracketEqualsPos?part.indexOf("="):bracketEqualsPos+1;-1===pos?(key=options.decoder(part,defaults.decoder,charset,"key"),val=options.strictNullHandling?null:""):(key=options.decoder(part.slice(0,pos),defaults.decoder,charset,"key"),val=options.decoder(part.slice(pos+1),defaults.decoder,charset,"value")),val&&options.interpretNumericEntities&&"iso-8859-1"===charset&&(val=interpretNumericEntities(val)),val&&options.comma&&val.indexOf(",")>-1&&(val=val.split(",")),has.call(obj,key)?obj[key]=utils.combine(obj[key],val):obj[key]=val}return obj}(str,options):str,obj=options.plainObjects?Object.create(null):{},keys=Object.keys(tempObj),i=0;i<keys.length;++i){var key=keys[i],newObj=parseKeys(key,tempObj[key],options);obj=utils.merge(obj,newObj,options)}return utils.compact(obj)}},function(module,exports,__webpack_require__){var createCompounder=__webpack_require__(613),upperFirst=__webpack_require__(626),startCase=createCompounder((function(result,word,index){return result+(index?" ":"")+upperFirst(word)}));module.exports=startCase},function(module,exports,__webpack_require__){var arrayReduce=__webpack_require__(614),deburr=__webpack_require__(615),words=__webpack_require__(622),reApos=RegExp("[']","g");module.exports=function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}},function(module,exports){module.exports=function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}},function(module,exports,__webpack_require__){var deburrLetter=__webpack_require__(616),toString=__webpack_require__(229),reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reComboMark=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");module.exports=function deburr(string){return(string=toString(string))&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}},function(module,exports,__webpack_require__){var deburrLetter=__webpack_require__(617)({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"});module.exports=deburrLetter},function(module,exports){module.exports=function basePropertyOf(object){return function(key){return null==object?void 0:object[key]}}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(230),arrayMap=__webpack_require__(619),isArray=__webpack_require__(134),isSymbol=__webpack_require__(231),INFINITY=1/0,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}},function(module,exports){module.exports=function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(230),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},function(module,exports){var nativeObjectToString=Object.prototype.toString;module.exports=function objectToString(value){return nativeObjectToString.call(value)}},function(module,exports,__webpack_require__){var asciiWords=__webpack_require__(623),hasUnicodeWord=__webpack_require__(624),toString=__webpack_require__(229),unicodeWords=__webpack_require__(625);module.exports=function words(string,pattern,guard){return string=toString(string),void 0===(pattern=guard?void 0:pattern)?hasUnicodeWord(string)?unicodeWords(string):asciiWords(string):string.match(pattern)||[]}},function(module,exports){var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;module.exports=function asciiWords(string){return string.match(reAsciiWord)||[]}},function(module,exports){var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;module.exports=function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}},function(module,exports){var rsBreakRange="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsBreak="["+rsBreakRange+"]",rsDigits="\\d+",rsDingbat="[\\u2700-\\u27bf]",rsLower="[a-z\\xdf-\\xf6\\xf8-\\xff]",rsMisc="[^\\ud800-\\udfff"+rsBreakRange+rsDigits+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",reOptMod="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+(?:['](?:d|ll|m|re|s|t|ve))?",rsUpper+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsDigits,rsEmoji].join("|"),"g");module.exports=function unicodeWords(string){return string.match(reUnicodeWord)||[]}},function(module,exports,__webpack_require__){var upperFirst=__webpack_require__(627)("toUpperCase");module.exports=upperFirst},function(module,exports,__webpack_require__){var castSlice=__webpack_require__(628),hasUnicode=__webpack_require__(390),stringToArray=__webpack_require__(630),toString=__webpack_require__(229);module.exports=function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):void 0,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}},function(module,exports,__webpack_require__){var baseSlice=__webpack_require__(629);module.exports=function castSlice(array,start,end){var length=array.length;return end=void 0===end?length:end,!start&&end>=length?array:baseSlice(array,start,end)}},function(module,exports){module.exports=function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),(end=end>length?length:end)<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}},function(module,exports,__webpack_require__){var asciiToArray=__webpack_require__(631),hasUnicode=__webpack_require__(390),unicodeToArray=__webpack_require__(632);module.exports=function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}},function(module,exports){module.exports=function asciiToArray(string){return string.split("")}},function(module,exports){var rsAstral="[\\ud800-\\udfff]",rsCombo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",reOptMod="(?:"+rsCombo+"|"+rsFitz+")"+"?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");module.exports=function unicodeToArray(string){return string.match(reUnicode)||[]}},function(module,exports,__webpack_require__){var baseMerge=__webpack_require__(634),mergeWith=__webpack_require__(683)((function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)}));module.exports=mergeWith},function(module,exports,__webpack_require__){var Stack=__webpack_require__(391),assignMergeValue=__webpack_require__(393),baseFor=__webpack_require__(661),baseMergeDeep=__webpack_require__(663),isObject=__webpack_require__(104),keysIn=__webpack_require__(401),safeGet=__webpack_require__(400);module.exports=function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,(function(srcValue,key){if(stack||(stack=new Stack),isObject(srcValue))baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):void 0;void 0===newValue&&(newValue=srcValue),assignMergeValue(object,key,newValue)}}),keysIn)}},function(module,exports){module.exports=function listCacheClear(){this.__data__=[],this.size=0}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(233),splice=Array.prototype.splice;module.exports=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(233);module.exports=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(233);module.exports=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(233);module.exports=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(232);module.exports=function stackClear(){this.__data__=new ListCache,this.size=0}},function(module,exports){module.exports=function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}},function(module,exports){module.exports=function stackGet(key){return this.__data__.get(key)}},function(module,exports){module.exports=function stackHas(key){return this.__data__.has(key)}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(232),Map=__webpack_require__(298),MapCache=__webpack_require__(300),LARGE_ARRAY_SIZE=200;module.exports=function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(299),isMasked=__webpack_require__(646),isObject=__webpack_require__(104),toSource=__webpack_require__(392),reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=function baseIsNative(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}},function(module,exports,__webpack_require__){var uid,coreJsData=__webpack_require__(647),maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";module.exports=function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(79)["__core-js_shared__"];module.exports=coreJsData},function(module,exports){module.exports=function getValue(object,key){return null==object?void 0:object[key]}},function(module,exports,__webpack_require__){var Hash=__webpack_require__(650),ListCache=__webpack_require__(232),Map=__webpack_require__(298);module.exports=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(651),hashDelete=__webpack_require__(652),hashGet=__webpack_require__(653),hashHas=__webpack_require__(654),hashSet=__webpack_require__(655);function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(234);module.exports=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}},function(module,exports){module.exports=function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(234),HASH_UNDEFINED="__lodash_hash_undefined__",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(234),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(234),HASH_UNDEFINED="__lodash_hash_undefined__";module.exports=function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(235);module.exports=function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}},function(module,exports){module.exports=function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(235);module.exports=function mapCacheGet(key){return getMapData(this,key).get(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(235);module.exports=function mapCacheHas(key){return getMapData(this,key).has(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(235);module.exports=function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}},function(module,exports,__webpack_require__){var baseFor=__webpack_require__(662)();module.exports=baseFor},function(module,exports){module.exports=function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}},function(module,exports,__webpack_require__){var assignMergeValue=__webpack_require__(393),cloneBuffer=__webpack_require__(664),cloneTypedArray=__webpack_require__(665),copyArray=__webpack_require__(667),initCloneObject=__webpack_require__(668),isArguments=__webpack_require__(398),isArray=__webpack_require__(134),isArrayLikeObject=__webpack_require__(671),isBuffer=__webpack_require__(303),isFunction=__webpack_require__(299),isObject=__webpack_require__(104),isPlainObject=__webpack_require__(673),isTypedArray=__webpack_require__(304),safeGet=__webpack_require__(400),toPlainObject=__webpack_require__(677);module.exports=function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked)assignMergeValue(object,key,stacked);else{var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):void 0,isCommon=void 0===newValue;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue,isArr||isBuff||isTyped?isArray(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):isBuff?(isCommon=!1,newValue=cloneBuffer(srcValue,!0)):isTyped?(isCommon=!1,newValue=cloneTypedArray(srcValue,!0)):newValue=[]:isPlainObject(srcValue)||isArguments(srcValue)?(newValue=objValue,isArguments(objValue)?newValue=toPlainObject(objValue):isObject(objValue)&&!isFunction(objValue)||(newValue=initCloneObject(srcValue))):isCommon=!1}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue)),assignMergeValue(object,key,newValue)}}},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(79),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0;module.exports=function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}}).call(this,__webpack_require__(132)(module))},function(module,exports,__webpack_require__){var cloneArrayBuffer=__webpack_require__(666);module.exports=function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}},function(module,exports,__webpack_require__){var Uint8Array=__webpack_require__(395);module.exports=function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}},function(module,exports){module.exports=function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}},function(module,exports,__webpack_require__){var baseCreate=__webpack_require__(669),getPrototype=__webpack_require__(396),isPrototype=__webpack_require__(302);module.exports=function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(104),objectCreate=Object.create,baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=void 0,result}}();module.exports=baseCreate},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(150),isObjectLike=__webpack_require__(135),argsTag="[object Arguments]";module.exports=function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}},function(module,exports,__webpack_require__){var isArrayLike=__webpack_require__(236),isObjectLike=__webpack_require__(135);module.exports=function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}},function(module,exports){module.exports=function stubFalse(){return!1}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(150),getPrototype=__webpack_require__(396),isObjectLike=__webpack_require__(135),objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);module.exports=function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(150),isLength=__webpack_require__(399),isObjectLike=__webpack_require__(135),typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1,module.exports=function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}},function(module,exports){module.exports=function baseUnary(func){return function(value){return func(value)}}},function(module,exports,__webpack_require__){(function(module){var freeGlobal=__webpack_require__(389),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil}).call(this,__webpack_require__(132)(module))},function(module,exports,__webpack_require__){var copyObject=__webpack_require__(678),keysIn=__webpack_require__(401);module.exports=function toPlainObject(value){return copyObject(value,keysIn(value))}},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(679),baseAssignValue=__webpack_require__(301);module.exports=function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;void 0===newValue&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(301),eq=__webpack_require__(187),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}},function(module,exports){module.exports=function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(104),isPrototype=__webpack_require__(302),nativeKeysIn=__webpack_require__(682),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseKeysIn(object){if(!isObject(object))return nativeKeysIn(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}},function(module,exports){module.exports=function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}},function(module,exports,__webpack_require__){var baseRest=__webpack_require__(684),isIterateeCall=__webpack_require__(691);module.exports=function createAssigner(assigner){return baseRest((function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:void 0,guard=length>2?sources[2]:void 0;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):void 0,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object}))}},function(module,exports,__webpack_require__){var identity=__webpack_require__(404),overRest=__webpack_require__(685),setToString=__webpack_require__(687);module.exports=function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}},function(module,exports,__webpack_require__){var apply=__webpack_require__(686),nativeMax=Math.max;module.exports=function overRest(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}},function(module,exports){module.exports=function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}},function(module,exports,__webpack_require__){var baseSetToString=__webpack_require__(688),setToString=__webpack_require__(690)(baseSetToString);module.exports=setToString},function(module,exports,__webpack_require__){var constant=__webpack_require__(689),defineProperty=__webpack_require__(394),identity=__webpack_require__(404),baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;module.exports=baseSetToString},function(module,exports){module.exports=function constant(value){return function(){return value}}},function(module,exports){var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;module.exports=function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return arguments[0]}else count=0;return func.apply(void 0,arguments)}}},function(module,exports,__webpack_require__){var eq=__webpack_require__(187),isArrayLike=__webpack_require__(236),isIndex=__webpack_require__(403),isObject=__webpack_require__(104);module.exports=function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}},function(module,exports,__webpack_require__){var baseIsEqual=__webpack_require__(693);module.exports=function isEqual(value,other){return baseIsEqual(value,other)}},function(module,exports,__webpack_require__){var baseIsEqualDeep=__webpack_require__(694),isObjectLike=__webpack_require__(135);module.exports=function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}},function(module,exports,__webpack_require__){var Stack=__webpack_require__(391),equalArrays=__webpack_require__(405),equalByTag=__webpack_require__(700),equalObjects=__webpack_require__(703),getTag=__webpack_require__(713),isArray=__webpack_require__(134),isBuffer=__webpack_require__(303),isTypedArray=__webpack_require__(304),COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other),objIsObj=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othIsObj=(othTag=othTag==argsTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack))}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(300),setCacheAdd=__webpack_require__(696),setCacheHas=__webpack_require__(697);function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,module.exports=SetCache},function(module,exports){var HASH_UNDEFINED="__lodash_hash_undefined__";module.exports=function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),this}},function(module,exports){module.exports=function setCacheHas(value){return this.__data__.has(value)}},function(module,exports){module.exports=function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}},function(module,exports){module.exports=function cacheHas(cache,key){return cache.has(key)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(230),Uint8Array=__webpack_require__(395),eq=__webpack_require__(187),equalArrays=__webpack_require__(405),mapToArray=__webpack_require__(701),setToArray=__webpack_require__(702),COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}},function(module,exports){module.exports=function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}},function(module,exports){module.exports=function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}},function(module,exports,__webpack_require__){var getAllKeys=__webpack_require__(704),COMPARE_PARTIAL_FLAG=1,hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack.delete(object),stack.delete(other),result}},function(module,exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(705),getSymbols=__webpack_require__(707),keys=__webpack_require__(710);module.exports=function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(706),isArray=__webpack_require__(134);module.exports=function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}},function(module,exports){module.exports=function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}},function(module,exports,__webpack_require__){var arrayFilter=__webpack_require__(708),stubArray=__webpack_require__(709),propertyIsEnumerable=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:stubArray;module.exports=getSymbols},function(module,exports){module.exports=function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}},function(module,exports){module.exports=function stubArray(){return[]}},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(402),baseKeys=__webpack_require__(711),isArrayLike=__webpack_require__(236);module.exports=function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}},function(module,exports,__webpack_require__){var isPrototype=__webpack_require__(302),nativeKeys=__webpack_require__(712),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}},function(module,exports,__webpack_require__){var nativeKeys=__webpack_require__(397)(Object.keys,Object);module.exports=nativeKeys},function(module,exports,__webpack_require__){var DataView=__webpack_require__(714),Map=__webpack_require__(298),Promise=__webpack_require__(715),Set=__webpack_require__(716),WeakMap=__webpack_require__(717),baseGetTag=__webpack_require__(150),toSource=__webpack_require__(392),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&"[object DataView]"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&"[object Map]"!=getTag(new Map)||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&"[object Set]"!=getTag(new Set)||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result}),module.exports=getTag},function(module,exports,__webpack_require__){var DataView=__webpack_require__(136)(__webpack_require__(79),"DataView");module.exports=DataView},function(module,exports,__webpack_require__){var Promise=__webpack_require__(136)(__webpack_require__(79),"Promise");module.exports=Promise},function(module,exports,__webpack_require__){var Set=__webpack_require__(136)(__webpack_require__(79),"Set");module.exports=Set},function(module,exports,__webpack_require__){var WeakMap=__webpack_require__(136)(__webpack_require__(79),"WeakMap");module.exports=WeakMap},function(module,exports,__webpack_require__){var castPath=__webpack_require__(719),toKey=__webpack_require__(724);module.exports=function baseGet(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(134),isKey=__webpack_require__(720),stringToPath=__webpack_require__(721),toString=__webpack_require__(229);module.exports=function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(134),isSymbol=__webpack_require__(231),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(722),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped((function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)})),result}));module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(723),MAX_MEMOIZE_SIZE=500;module.exports=function memoizeCapped(func){var result=memoize(func,(function(key){return cache.size===MAX_MEMOIZE_SIZE&&cache.clear(),key})),cache=result.cache;return result}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(300),FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache,module.exports=memoize},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(231),INFINITY=1/0;module.exports=function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(86),__webpack_require__(99),__webpack_require__(100),__webpack_require__(223),__webpack_require__(215),__webpack_require__(87),__webpack_require__(133),__webpack_require__(89),__webpack_require__(216),__webpack_require__(367),__webpack_require__(376),__webpack_require__(726),__webpack_require__(222),__webpack_require__(147),__webpack_require__(409),__webpack_require__(727),__webpack_require__(27),__webpack_require__(287),__webpack_require__(728),__webpack_require__(288),__webpack_require__(119),__webpack_require__(410),__webpack_require__(78),__webpack_require__(290),__webpack_require__(149),__webpack_require__(102),__webpack_require__(387),__webpack_require__(88),__webpack_require__(103),__webpack_require__(411),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _eventemitter=_interopRequireDefault(__webpack_require__(729)),_memoizerific=_interopRequireDefault(__webpack_require__(297)),_debounce=_interopRequireDefault(__webpack_require__(730)),_commonTags=__webpack_require__(770),_coreEvents=_interopRequireDefault(__webpack_require__(186)),_clientLogger=__webpack_require__(148),_hooks=__webpack_require__(305);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _templateObject(){var data=function _taggedTemplateLiteral(strings,raw){raw||(raw=strings.slice(0));return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n        Story with id "," already exists in the store!\n\n        Perhaps you added the same story twice, or you have a name collision?\n        Story ids need to be unique -- ensure you aren't using the same names modulo url-sanitization.\n      "]);return _templateObject=function _templateObject(){return data},data}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var toKey=function toKey(input){return input.replace(/[^a-z0-9]+([a-z0-9])/gi,(function(){for(var _len=arguments.length,params=new Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];return params[1].toUpperCase()}))},count=0,getId=function getId(){return count+=1},isStoryDocsOnly=function isStoryDocsOnly(parameters){return parameters&&parameters.docsOnly},includeStory=function includeStory(story){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeDocsOnly:!1};return!!options.includeDocsOnly||!isStoryDocsOnly(story.parameters)},StoryStore=function(_EventEmitter){function StoryStore(params){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StoryStore),(_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(StoryStore).call(this)))._error=void 0,_this._channel=void 0,_this._data=void 0,_this._legacyData=void 0,_this._legacydata=void 0,_this._revision=void 0,_this._selection=void 0,_this.setChannel=function(channel){_this._channel=channel},_this.fromId=function(id){try{var data=_this._data[id];return data&&data.getDecorated?data:null}catch(e){return _clientLogger.logger.warn("failed to get story:",_this._data),_clientLogger.logger.error(e),null}},_this.getSelection=function(){return _this._selection},_this.getError=function(){return _this._error},_this.remove=function(id){var _data=_assertThisInitialized(_this)._data,story=_data[id];if(delete _data[id],story){story.hooks.clean();var kind=story.kind,name=story.name,kindData=_this._legacydata[toKey(kind)];kindData&&delete kindData.stories[toKey(name)]}},_this.pushToManager=(0,_debounce.default)((function(){if(_this._channel){var stories=_this.extract({includeDocsOnly:!0});_this._channel.emit(_coreEvents.default.SET_STORIES,{stories:stories})}}),0),_this._legacydata={},_this._data={},_this._revision=0,_this._selection={},_this._channel=params.channel,_this._error=void 0,_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(StoryStore,_EventEmitter),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(StoryStore,[{key:"raw",value:function raw(options){var _this2=this;return Object.values(this._data).filter((function(i){return!!i.getDecorated})).filter((function(i){return includeStory(i,options)})).map((function(_ref3){var id=_ref3.id;return _this2.fromId(id)}))}},{key:"extract",value:function extract(options){var _this3=this,stories=Object.entries(this._data);if(Object.values(this._data).length>0){var index=Object.keys(this._data).find((function(key){return!!(_this3._data[key]&&_this3._data[key].parameters&&_this3._data[key].parameters.options)}));if(index&&this._data[index].parameters.options.storySort){var sortFn=this._data[index].parameters.options.storySort;stories.sort(sortFn)}}return stories.reduce((function(a,_ref4){var _ref5=_slicedToArray(_ref4,2),k=_ref5[0],v=_ref5[1];return includeStory(v,options)?Object.assign(a,_defineProperty({},k,function toExtracted(obj){return Object.entries(obj).reduce((function(acc,_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return"function"==typeof value?acc:Array.isArray(value)?Object.assign(acc,_defineProperty({},key,value.slice().sort())):Object.assign(acc,_defineProperty({},key,value))}),{})}(v))):a}),{})}},{key:"setSelection",value:function setSelection(data,error){var _this4=this;this._selection=void 0===data?this._selection:{storyId:data.storyId,viewMode:data.viewMode},this._error=void 0===error?this._error:error,setTimeout((function(){_this4._channel&&_this4._channel.emit(_coreEvents.default.STORY_RENDER),_this4.emit(_coreEvents.default.STORY_RENDER)}),1)}},{key:"addStory",value:function addStory(_ref6,_ref7){var id=_ref6.id,kind=_ref6.kind,name=_ref6.name,original=_ref6.storyFn,_ref6$parameters=_ref6.parameters,parameters=void 0===_ref6$parameters?{}:_ref6$parameters,getDecorators=_ref7.getDecorators,applyDecorators=_ref7.applyDecorators,_data=this._data;_data[id]&&_clientLogger.logger.warn((0,_commonTags.stripIndents)(_templateObject(),id));var identification={id:id,kind:kind,name:name,story:name},getOriginal=function getOriginal(){return original},getDecorated=(0,_memoizerific.default)(1)((function(){return applyDecorators(getOriginal(),getDecorators())})),hooks=new _hooks.HooksContext,storyFn=function storyFn(p){return getDecorated()(Object.assign({},identification,{},p,{hooks:hooks,parameters:Object.assign({},parameters,{},p&&p.parameters)}))};_data[id]=Object.assign({},identification,{hooks:hooks,getDecorated:getDecorated,getOriginal:getOriginal,storyFn:storyFn,parameters:parameters}),isStoryDocsOnly(parameters)||this.addLegacyStory({kind:kind,name:name,storyFn:storyFn,parameters:parameters}),this.pushToManager()}},{key:"getRevision",value:function getRevision(){return this._revision}},{key:"incrementRevision",value:function incrementRevision(){this._revision+=1}},{key:"addLegacyStory",value:function addLegacyStory(_ref8){var kind=_ref8.kind,name=_ref8.name,storyFn=_ref8.storyFn,parameters=_ref8.parameters,k=toKey(kind);this._legacydata[k]||(this._legacydata[k]={kind:kind,fileName:parameters.fileName,index:getId(),stories:{}}),this._legacydata[k].stories[toKey(name)]={name:name,index:getId(),story:storyFn,parameters:parameters}}},{key:"getStoryKinds",value:function getStoryKinds(){return Object.values(this._legacydata).filter((function(kind){return Object.keys(kind.stories).length>0})).sort((function(info1,info2){return info1.index-info2.index})).map((function(info){return info.kind}))}},{key:"getStories",value:function getStories(kind){var _this5=this,key=toKey(kind);return this._legacydata[key]?Object.keys(this._legacydata[key].stories).map((function(name){return _this5._legacydata[key].stories[name]})).sort((function(info1,info2){return info1.index-info2.index})).map((function(info){return info.name})):[]}},{key:"getStoriesForKind",value:function getStoriesForKind(kind){return this.raw().filter((function(story){return story.kind===kind}))}},{key:"getStoryFileName",value:function getStoryFileName(kind){var key=toKey(kind),storiesKind=this._legacydata[key];return storiesKind?storiesKind.fileName:null}},{key:"getStoryAndParameters",value:function getStoryAndParameters(kind,name){if(!kind||!name)return null;var storiesKind=this._legacydata[toKey(kind)];if(!storiesKind)return null;var storyInfo=storiesKind.stories[toKey(name)];return storyInfo?{story:storyInfo.story,parameters:storyInfo.parameters}:null}},{key:"getStory",value:function getStory(kind,name){var data=this.getStoryAndParameters(kind,name);return data&&data.story}},{key:"getStoryWithContext",value:function getStoryWithContext(kind,name){var data=this.getStoryAndParameters(kind,name);return data?data.story:null}},{key:"removeStoryKind",value:function removeStoryKind(kind){this.hasStoryKind(kind)&&(this._legacydata[toKey(kind)].stories={},this.cleanHooksForKind(kind),this._data=Object.entries(this._data).reduce((function(acc,_ref9){var _ref10=_slicedToArray(_ref9,2),id=_ref10[0],story=_ref10[1];return story.kind!==kind&&Object.assign(acc,_defineProperty({},id,story)),acc}),{}),this.pushToManager())}},{key:"hasStoryKind",value:function hasStoryKind(kind){return Boolean(this._legacydata[toKey(kind)])}},{key:"hasStory",value:function hasStory(kind,name){return Boolean(this.getStory(kind,name))}},{key:"dumpStoryBook",value:function dumpStoryBook(){var _this6=this;return this.getStoryKinds().map((function(kind){return{kind:kind,stories:_this6.getStories(kind)}}))}},{key:"size",value:function size(){return Object.keys(this._legacydata).length}},{key:"clean",value:function clean(){var _this7=this;this.getStoryKinds().forEach((function(kind){return delete _this7._legacydata[toKey(kind)]}))}},{key:"cleanHooks",value:function cleanHooks(id){this._data[id]&&this._data[id].hooks.clean()}},{key:"cleanHooksForKind",value:function cleanHooksForKind(kind){var _this8=this;this.getStoriesForKind(kind).map((function(story){return _this8.cleanHooks(story.id)}))}}]),StoryStore}(_eventemitter.default);exports.default=StoryStore},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),aFunction=__webpack_require__(131),toObject=__webpack_require__(77),fails=__webpack_require__(33),sloppyArrayMethod=__webpack_require__(180),nativeSort=[].sort,test=[1,2,3],FAILS_ON_UNDEFINED=fails((function(){test.sort(void 0)})),FAILS_ON_NULL=fails((function(){test.sort(null)})),SLOPPY_METHOD=sloppyArrayMethod("sort");$({target:"Array",proto:!0,forced:FAILS_ON_UNDEFINED||!FAILS_ON_NULL||SLOPPY_METHOD},{sort:function sort(comparefn){return void 0===comparefn?nativeSort.call(toObject(this)):nativeSort.call(toObject(this),aFunction(comparefn))}})},function(module,exports,__webpack_require__){var $=__webpack_require__(19),DESCRIPTORS=__webpack_require__(49);$({target:"Object",stat:!0,forced:!DESCRIPTORS,sham:!DESCRIPTORS},{defineProperties:__webpack_require__(355)})},function(module,exports,__webpack_require__){var $=__webpack_require__(19),FREEZING=__webpack_require__(380),fails=__webpack_require__(33),isObject=__webpack_require__(40),onFreeze=__webpack_require__(185).onFreeze,nativeFreeze=Object.freeze;$({target:"Object",stat:!0,forced:fails((function(){nativeFreeze(1)})),sham:!FREEZING},{freeze:function freeze(it){return nativeFreeze&&isObject(it)?nativeFreeze(onFreeze(it)):it}})},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function addListener(emitter,event,fn,context,once){if("function"!=typeof fn)throw new TypeError("The listener must be a function");var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;return emitter._events[evt]?emitter._events[evt].fn?emitter._events[evt]=[emitter._events[evt],listener]:emitter._events[evt].push(listener):(emitter._events[evt]=listener,emitter._eventsCount++),emitter}function clearEvent(emitter,evt){0==--emitter._eventsCount?emitter._events=new Events:delete emitter._events[evt]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function eventNames(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function listeners(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++)ee[i]=handlers[i].fn;return ee},EventEmitter.prototype.listenerCount=function listenerCount(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];return listeners?listeners.fn?1:listeners.length:0},EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function on(event,fn,context){return addListener(this,event,fn,context,!1)},EventEmitter.prototype.once=function once(event,fn,context){return addListener(this,event,fn,context,!0)},EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return clearEvent(this,evt),this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||clearEvent(this,evt);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:clearEvent(this,evt)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&clearEvent(this,evt)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter},function(module,exports,__webpack_require__){var isObject=__webpack_require__(104),now=__webpack_require__(731),toNumber=__webpack_require__(732),FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;module.exports=function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function remainingWait(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function flush(){return void 0===timerId?result:trailingEdge(now())},debounced}},function(module,exports,__webpack_require__){var root=__webpack_require__(79);module.exports=function(){return root.Date.now()}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(104),isSymbol=__webpack_require__(231),NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(27),__webpack_require__(411),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _coreEvents=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(186));function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var ConfigApi=function(){function ConfigApi(_ref){var _this=this,channel=_ref.channel,storyStore=_ref.storyStore,clientApi=_ref.clientApi,clearDecorators=_ref.clearDecorators;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ConfigApi),this._channel=void 0,this._storyStore=void 0,this._clearDecorators=void 0,this.clientApi=void 0,this.configure=function(loaders,module){module.hot&&(module.hot.accept(),module.hot.dispose((function(){_this._clearDecorators()}))),_this._channel?(!function render(){var errors=[];try{loaders&&loaders()}catch(e){errors.push(e)}if(!errors.length)try{_this._renderMain()}catch(e){errors.push(e)}if(errors.length)throw _this._storyStore.setSelection(void 0,errors[0]),errors[0];_this._storyStore.setSelection(void 0,null)}(),setTimeout((function(){return _this._channel.emit(_coreEvents.default.STORIES_CONFIGURED)}),0)):loaders()},this._channel=channel,this._storyStore=storyStore,this._clearDecorators=clearDecorators,this.clientApi=clientApi}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ConfigApi,[{key:"_renderMain",value:function _renderMain(){this._storyStore.emit(_coreEvents.default.STORY_INIT)}},{key:"_renderError",value:function _renderError(err){var error={stack:err.stack,message:err.message};this._storyStore.setSelection(void 0,error)}}]),ConfigApi}();exports.default=ConfigApi},function(module,exports,__webpack_require__){"use strict";__webpack_require__(27),__webpack_require__(149),__webpack_require__(226),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function pathToId(path){var match=(path||"").match(/^\/story\/(.+)/);if(!match)throw new Error("Invalid path '".concat(path,"',  must start with '/story/'"));return match[1]}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(27),__webpack_require__(149),__webpack_require__(294),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getQueryParam=exports.getQueryParams=void 0;var _global=__webpack_require__(101),_qs=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(295));var getQueryParams=function getQueryParams(){return _global.document&&_global.document.location&&_global.document.location.search?_qs.default.parse(_global.document.location.search,{ignoreQueryPrefix:!0}):{}};exports.getQueryParams=getQueryParams;exports.getQueryParam=function getQueryParam(key){return getQueryParams()[key]}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(86),__webpack_require__(99),__webpack_require__(100),__webpack_require__(73),__webpack_require__(223),__webpack_require__(215),__webpack_require__(87),__webpack_require__(181),__webpack_require__(377),__webpack_require__(412),__webpack_require__(133),__webpack_require__(89),__webpack_require__(216),__webpack_require__(183),__webpack_require__(222),__webpack_require__(408),__webpack_require__(147),__webpack_require__(27),__webpack_require__(119),__webpack_require__(78),__webpack_require__(218),__webpack_require__(149),__webpack_require__(184),__webpack_require__(379),__webpack_require__(383),__webpack_require__(102),__webpack_require__(226),__webpack_require__(88),__webpack_require__(103),Object.defineProperty(exports,"__esModule",{value:!0}),exports.isExportStory=isExportStory,exports.default=function start(render){var decorateStory=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).decorateStory,context=getContext(decorateStory),clientApi=context.clientApi,channel=context.channel,configApi=context.configApi,storyStore=context.storyStore,previousKind="",previousStory="",previousRevision=-1,previousViewMode="",previousId=null,renderMain=function renderMain(forceRender){var revision=storyStore.getRevision(),loadError=storyStore.getError(),_storyStore$getSelect=storyStore.getSelection(),storyId=_storyStore$getSelect.storyId,urlViewMode=_storyStore$getSelect.viewMode,data=storyStore.fromId(storyId),_ref5=data||{},kind=_ref5.kind,name=_ref5.name,getDecorated=_ref5.getDecorated,id=_ref5.id,parameters=_ref5.parameters,error=_ref5.error,viewMode=parameters&&parameters.docsOnly?"docs":urlViewMode,renderContext=Object.assign({},context,{},data,{selectedKind:kind,selectedStory:name,parameters:parameters,forceRender:forceRender});if(loadError||error)showErrorDisplay(loadError||error);else if(forceRender||revision!==previousRevision||viewMode!==previousViewMode||kind!==previousKind||name!==previousStory){switch(!forceRender&&previousKind&&previousStory&&_addons.default.getChannel().emit(_coreEvents.default.STORY_CHANGED,id),previousViewMode){case"docs":null==previousKind||kind===previousKind&&viewMode===previousViewMode||storyStore.cleanHooksForKind(previousKind);break;case"story":default:null==previousId||id===previousId&&viewMode===previousViewMode||storyStore.cleanHooks(previousId)}if(viewMode!==previousViewMode)switch(viewMode){case"docs":showMain(),_global.document.getElementById("root").setAttribute("hidden",!0),_global.document.getElementById("docs-root").removeAttribute("hidden");break;case"story":default:"docs"===previousViewMode&&(_global.document.getElementById("docs-root").setAttribute("hidden",!0),_reactDom.default.unmountComponentAtNode(_global.document.getElementById("docs-root")),_global.document.getElementById("root").removeAttribute("hidden"))}switch(viewMode){case"docs":var docs=parameters&&parameters.docs||{},DocsContainer=docs.container||function(_ref6){var children=_ref6.children;return _react.default.createElement(_react.default.Fragment,null,children)},Page=docs.page||_NoDocs.NoDocs;_reactDom.default.render(_react.default.createElement(DocsContainer,{context:renderContext},_react.default.createElement(Page,null)),_global.document.getElementById("docs-root"),(function(){return _addons.default.getChannel().emit(_coreEvents.default.DOCS_RENDERED,kind)}));break;case"story":default:getDecorated?function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,render(renderContext);case 3:_addons.default.getChannel().emit(_coreEvents.default.STORY_RENDERED,id),_context.next=9;break;case 6:_context.prev=6,_context.t0=_context.catch(0),showException(_context.t0);case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))():(!function showNopreview(){_global.document.body.classList.remove(classes.MAIN),_global.document.body.classList.remove(classes.ERROR),_global.document.body.classList.add(classes.NOPREVIEW)}(),_addons.default.getChannel().emit(_coreEvents.default.STORY_MISSING,id))}previousRevision=revision,previousKind=kind,previousStory=name,previousViewMode=viewMode,previousId=id,forceRender||(_global.document.documentElement.scrollTop=0)}else _addons.default.getChannel().emit(_coreEvents.default.STORY_UNCHANGED,{id:id,revision:revision,kind:kind,name:name,viewMode:viewMode})},renderUI=function renderUI(forceRender){if(isBrowser)try{renderMain(forceRender)}catch(ex){showException(ex)}},forceReRender=function forceReRender(){return renderUI(!0)};if(isBrowser){var deprecatedToId=(0,_utilDeprecate.default)(_utils.toId,"Passing name+kind to the SET_CURRENT_STORY event is deprecated, use a storyId instead");channel.on(_coreEvents.default.FORCE_RE_RENDER,forceReRender),channel.on(_coreEvents.default.SET_CURRENT_STORY,(function(_ref8){var inputStoryId=_ref8.storyId,name=_ref8.name,kind=_ref8.kind,viewMode=_ref8.viewMode,storyId=inputStoryId;if(!storyId){if(!name||!kind)throw new Error("You should pass `storyId` into SET_CURRENT_STORY");storyId=deprecatedToId(kind,name)}storyStore.setSelection({storyId:storyId,viewMode:viewMode}),(0,_url.setPath)({storyId:storyId,viewMode:viewMode})})),_global.window.onkeydown=function(event){if(!function focusInInput(event){return/input|textarea/i.test(event.target.tagName)||null!==event.target.getAttribute("contenteditable")}(event)){var altKey=event.altKey,ctrlKey=event.ctrlKey,metaKey=event.metaKey,shiftKey=event.shiftKey,key=event.key,code=event.code,keyCode=event.keyCode;channel.emit(_coreEvents.default.PREVIEW_KEYDOWN,{event:{altKey:altKey,ctrlKey:ctrlKey,metaKey:metaKey,shiftKey:shiftKey,key:key,code:code,keyCode:keyCode}})}}}storyStore.on(_coreEvents.default.STORY_INIT,(function(){var _initializePath=(0,_url.initializePath)(),storyId=_initializePath.storyId,viewMode=_initializePath.viewMode;storyStore.setSelection({storyId:storyId,viewMode:viewMode})})),storyStore.on(_coreEvents.default.STORY_RENDER,renderUI),void 0!==_global.window&&(_global.window.__STORYBOOK_CLIENT_API__=clientApi,_global.window.__STORYBOOK_STORY_STORE__=storyStore,_global.window.__STORYBOOK_ADDONS_CHANNEL__=channel);var previousExports=new Map,loadStories=function loadStories(loadable,framework){return function(){var loadedKinds=new Set,reqs=null;Array.isArray(loadable)?reqs=loadable:loadable.keys&&(reqs=[loadable]);var currentExports=new Map;if(reqs)reqs.forEach((function(req){req.keys().forEach((function(filename){var fileExports=req(filename);currentExports.set(fileExports,"function"==typeof req.resolve?req.resolve(filename):null)}))}));else{var exported=loadable();Array.isArray(exported)&&!exported.find((function(obj){return!obj.default}))?currentExports=new Map(exported.map((function(fileExports){return[fileExports,null]}))):exported&&_clientLogger.logger.warn("Loader function passed to 'configure' should return void or an array of module exports that all contain a 'default' export. Received: ".concat(JSON.stringify(exported)))}var removed=_toConsumableArray(previousExports.keys()).filter((function(exp){return!currentExports.has(exp)}));removed.forEach((function(exp){exp.default&&storyStore.removeStoryKind(exp.default.title)})),removed.length>0&&storyStore.incrementRevision(),_toConsumableArray(currentExports.keys()).filter((function(exp){return!previousExports.has(exp)})).forEach((function(fileExports){if(fileExports.default){if(!fileExports.default.title)throw new Error("Unexpected default export without title: ".concat(JSON.stringify(fileExports.default)));var meta=fileExports.default,exports=function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}(fileExports,["default"]),kindName=meta.title,params=meta.parameters,decos=meta.decorators,component=meta.component;if(loadedKinds.has(kindName))throw new Error("Duplicate title '".concat(kindName,"' used in multiple files; use unique titles or combine '").concat(kindName,"' stories into a single file."));loadedKinds.add(kindName);var kind=clientApi.storiesOf(kindName,!0);kind.addParameters(Object.assign({framework:framework,component:component,fileName:currentExports.get(fileExports)},params)),(decos||[]).forEach((function(decorator){kind.addDecorator(decorator)})),Object.keys(exports).forEach((function(key){if(isExportStory(key,meta)){var storyFn=exports[key],_ref9=storyFn.story||{},name=_ref9.name,parameters=_ref9.parameters,decorators=_ref9.decorators;parameters&&parameters.decorators&&(0,_utilDeprecate.default)((function(){}),"".concat(kindName," => ").concat(name||key,": story.parameters.decorators is deprecated; use story.decorators instead."))();var decoratorParams=decorators?{decorators:decorators}:null,displayNameParams=name?{displayName:name}:{};kind.add((0,_utils.storyNameFromExport)(key),storyFn,Object.assign({},parameters,{},decoratorParams,{},displayNameParams))}}))}})),previousExports=currentExports}},loaded=!1;return{configure:function configure(loadable,m,framework){if(m&&m.hot&&m.hot.dispose){var _ref10$previousExport=(m.hot.data||{}).previousExports;previousExports=void 0===_ref10$previousExport?new Map:_ref10$previousExport,m.hot.dispose((function(data){loaded=!1,data.previousExports=previousExports}))}loaded&&_clientLogger.logger.warn("Unexpected loaded state. Did you call `load` twice?"),loaded=!0,configApi.configure(loadStories(loadable,framework),m)},context:context,clientApi:clientApi,configApi:configApi,forceReRender:forceReRender}},exports.getContext=void 0,__webpack_require__(265);var _global=__webpack_require__(101),_react=_interopRequireDefault(__webpack_require__(8)),_reactDom=_interopRequireDefault(__webpack_require__(414)),_utilDeprecate=_interopRequireDefault(__webpack_require__(289)),_ansiToHtml=_interopRequireDefault(__webpack_require__(741)),_addons=_interopRequireDefault(__webpack_require__(217)),_channelPostmessage=_interopRequireDefault(__webpack_require__(748)),_clientApi2=__webpack_require__(359),_utils=__webpack_require__(224),_clientLogger=__webpack_require__(148),_coreEvents=_interopRequireDefault(__webpack_require__(186)),_url=__webpack_require__(757),_NoDocs=__webpack_require__(758);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var ansiConverter=new _ansiToHtml.default,classes={MAIN:"sb-show-main",NOPREVIEW:"sb-show-nopreview",ERROR:"sb-show-errordisplay"};function matches(storyKey,arrayOrRegex){return Array.isArray(arrayOrRegex)?arrayOrRegex.includes(storyKey):storyKey.match(arrayOrRegex)}function isExportStory(key,_ref){var includeStories=_ref.includeStories,excludeStories=_ref.excludeStories;return("__esModule"!==key&&(!includeStories||matches(key,includeStories))&&(!excludeStories||!matches(key,excludeStories)))}function showMain(){_global.document.body.classList.remove(classes.NOPREVIEW),_global.document.body.classList.remove(classes.ERROR),_global.document.body.classList.add(classes.MAIN)}function showErrorDisplay(_ref2){var _ref2$message=_ref2.message,message=void 0===_ref2$message?"":_ref2$message,_ref2$stack=_ref2.stack,stack=void 0===_ref2$stack?"":_ref2$stack;_global.document.getElementById("error-message").innerHTML=ansiConverter.toHtml(message),_global.document.getElementById("error-stack").innerHTML=ansiConverter.toHtml(stack),_global.document.body.classList.remove(classes.MAIN),_global.document.body.classList.remove(classes.NOPREVIEW),_global.document.body.classList.add(classes.ERROR)}function showError(_ref3){var title=_ref3.title,description=_ref3.description;_addons.default.getChannel().emit(_coreEvents.default.STORY_ERRORED,{title:title,description:description}),showErrorDisplay({message:title,stack:description})}function showException(exception){_addons.default.getChannel().emit(_coreEvents.default.STORY_THREW_EXCEPTION,exception),showErrorDisplay(exception),_clientLogger.logger.error(exception)}var isBrowser=_global.navigator&&_global.navigator.userAgent&&"storyshots"!==_global.navigator.userAgent&&!(_global.navigator.userAgent.indexOf("Node.js")>-1)&&!(_global.navigator.userAgent.indexOf("jsdom")>-1),getContext=function(decorateStory){var storyStore,clientApi,channel=null;if(isBrowser)try{channel=_addons.default.getChannel()}catch(e){channel=(0,_channelPostmessage.default)({page:"preview"}),_addons.default.setChannel(channel)}void 0!==_global.window&&_global.window.__STORYBOOK_CLIENT_API__?storyStore=(clientApi=_global.window.__STORYBOOK_CLIENT_API__)._storyStore:(storyStore=new _clientApi2.StoryStore({channel:channel}),clientApi=new _clientApi2.ClientApi({storyStore:storyStore,decorateStory:decorateStory}));var clearDecorators=clientApi.clearDecorators;return{configApi:new _clientApi2.ConfigApi({clearDecorators:clearDecorators,storyStore:storyStore,channel:channel,clientApi:clientApi}),storyStore:storyStore,channel:channel,clientApi:clientApi,showMain:showMain,showError:showError,showException:showException}};exports.getContext=getContext},function(module,exports,__webpack_require__){"use strict";
/** @license React v16.11.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h=__webpack_require__(413),n="function"==typeof Symbol&&Symbol.for,p=n?Symbol.for("react.element"):60103,q=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,t=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,v=n?Symbol.for("react.provider"):60109,w=n?Symbol.for("react.context"):60110,x=n?Symbol.for("react.forward_ref"):60112,y=n?Symbol.for("react.suspense"):60113;n&&Symbol.for("react.suspense_list");var z=n?Symbol.for("react.memo"):60115,aa=n?Symbol.for("react.lazy"):60116;n&&Symbol.for("react.fundamental"),n&&Symbol.for("react.responder"),n&&Symbol.for("react.scope");var A="function"==typeof Symbol&&Symbol.iterator;function B(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D={};function E(a,b,c){this.props=a,this.context=b,this.refs=D,this.updater=c||C}function F(){}function G(a,b,c){this.props=a,this.context=b,this.refs=D,this.updater=c||C}E.prototype.isReactComponent={},E.prototype.setState=function(a,b){if("object"!=typeof a&&"function"!=typeof a&&null!=a)throw Error(B(85));this.updater.enqueueSetState(this,a,b,"setState")},E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")},F.prototype=E.prototype;var H=G.prototype=new F;H.constructor=G,h(H,E.prototype),H.isPureReactComponent=!0;var I={current:null},J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};function M(a,b,c){var e,d={},g=null,l=null;if(null!=b)for(e in void 0!==b.ref&&(l=b.ref),void 0!==b.key&&(g=""+b.key),b)K.call(b,e)&&!L.hasOwnProperty(e)&&(d[e]=b[e]);var f=arguments.length-2;if(1===f)d.children=c;else if(1<f){for(var k=Array(f),m=0;m<f;m++)k[m]=arguments[m+2];d.children=k}if(a&&a.defaultProps)for(e in f=a.defaultProps)void 0===d[e]&&(d[e]=f[e]);return{$$typeof:p,type:a,key:g,ref:l,props:d,_owner:J.current}}function N(a){return"object"==typeof a&&null!==a&&a.$$typeof===p}var O=/\/+/g,P=[];function Q(a,b,c,e){if(P.length){var d=P.pop();return d.result=a,d.keyPrefix=b,d.func=c,d.context=e,d.count=0,d}return{result:a,keyPrefix:b,func:c,context:e,count:0}}function R(a){a.result=null,a.keyPrefix=null,a.func=null,a.context=null,a.count=0,10>P.length&&P.push(a)}function U(a,b,c){return null==a?0:function S(a,b,c,e){var d=typeof a;"undefined"!==d&&"boolean"!==d||(a=null);var g=!1;if(null===a)g=!0;else switch(d){case"string":case"number":g=!0;break;case"object":switch(a.$$typeof){case p:case q:g=!0}}if(g)return c(e,a,""===b?"."+T(a,0):b),1;if(g=0,b=""===b?".":b+":",Array.isArray(a))for(var l=0;l<a.length;l++){var f=b+T(d=a[l],l);g+=S(d,f,c,e)}else if(null===a||"object"!=typeof a?f=null:f="function"==typeof(f=A&&a[A]||a["@@iterator"])?f:null,"function"==typeof f)for(a=f.call(a),l=0;!(d=a.next()).done;)g+=S(d=d.value,f=b+T(d,l++),c,e);else if("object"===d)throw c=""+a,Error(B(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return g}(a,"",b,c)}function T(a,b){return"object"==typeof a&&null!==a&&null!=a.key?function escape(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,(function(a){return b[a]}))}(a.key):b.toString(36)}function ca(a,b){a.func.call(a.context,b,a.count++)}function da(a,b,c){var e=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++),Array.isArray(a)?V(a,e,c,(function(a){return a})):null!=a&&(N(a)&&(a=function ba(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}(a,d+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+c)),e.push(a))}function V(a,b,c,e,d){var g="";null!=c&&(g=(""+c).replace(O,"$&/")+"/"),U(a,da,b=Q(b,g,e,d)),R(b)}function W(){var a=I.current;if(null===a)throw Error(B(321));return a}var X={Children:{map:function(a,b,c){if(null==a)return a;var e=[];return V(a,e,null,b,c),e},forEach:function(a,b,c){if(null==a)return a;U(a,ca,b=Q(null,null,b,c)),R(b)},count:function(a){return U(a,(function(){return null}),null)},toArray:function(a){var b=[];return V(a,b,null,(function(a){return a})),b},only:function(a){if(!N(a))throw Error(B(143));return a}},createRef:function(){return{current:null}},Component:E,PureComponent:G,createContext:function(a,b){return void 0===b&&(b=null),(a={$$typeof:w,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:v,_context:a},a.Consumer=a},forwardRef:function(a){return{$$typeof:x,render:a}},lazy:function(a){return{$$typeof:aa,_ctor:a,_status:-1,_result:null}},memo:function(a,b){return{$$typeof:z,type:a,compare:void 0===b?null:b}},useCallback:function(a,b){return W().useCallback(a,b)},useContext:function(a,b){return W().useContext(a,b)},useEffect:function(a,b){return W().useEffect(a,b)},useImperativeHandle:function(a,b,c){return W().useImperativeHandle(a,b,c)},useDebugValue:function(){},useLayoutEffect:function(a,b){return W().useLayoutEffect(a,b)},useMemo:function(a,b){return W().useMemo(a,b)},useReducer:function(a,b,c){return W().useReducer(a,b,c)},useRef:function(a){return W().useRef(a)},useState:function(a){return W().useState(a)},Fragment:r,Profiler:u,StrictMode:t,Suspense:y,createElement:M,cloneElement:function(a,b,c){if(null==a)throw Error(B(267,a));var e=h({},a.props),d=a.key,g=a.ref,l=a._owner;if(null!=b){if(void 0!==b.ref&&(g=b.ref,l=J.current),void 0!==b.key&&(d=""+b.key),a.type&&a.type.defaultProps)var f=a.type.defaultProps;for(k in b)K.call(b,k)&&!L.hasOwnProperty(k)&&(e[k]=void 0===b[k]&&void 0!==f?f[k]:b[k])}var k=arguments.length-2;if(1===k)e.children=c;else if(1<k){f=Array(k);for(var m=0;m<k;m++)f[m]=arguments[m+2];e.children=f}return{$$typeof:p,type:a.type,key:d,ref:g,props:e,_owner:l}},createFactory:function(a){var b=M.bind(null,a);return b.type=a,b},isValidElement:N,version:"16.11.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:h}},Y={default:X},Z=Y&&X||Y;module.exports=Z.default||Z},function(module,exports,__webpack_require__){"use strict";
/** @license React v16.11.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=__webpack_require__(8),n=__webpack_require__(413),q=__webpack_require__(739);function u(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(u(227));var ba=null,ca={};function da(){if(ba)for(var a in ca){var b=ca[a],c=ba.indexOf(a);if(!(-1<c))throw Error(u(96,a));if(!ea[c]){if(!b.extractEvents)throw Error(u(97,a));for(var d in ea[c]=b,c=b.eventTypes){var e=void 0,f=c[d],g=b,h=d;if(fa.hasOwnProperty(h))throw Error(u(99,h));fa[h]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&ha(k[e],g,h);e=!0}else f.registrationName?(ha(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(u(98,d,a))}}}}function ha(a,b,c){if(ia[a])throw Error(u(100,a));ia[a]=b,ja[a]=b.eventTypes[c].dependencies}var ea=[],fa={},ia={},ja={};function ka(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var la=!1,ma=null,na=!1,oa=null,pa={onError:function(a){la=!0,ma=a}};function qa(a,b,c,d,e,f,g,h,k){la=!1,ma=null,ka.apply(pa,arguments)}var sa=null,ua=null,va=null;function wa(a,b,c){var d=a.type||"unknown-event";a.currentTarget=va(c),function ra(a,b,c,d,e,f,g,h,k){if(qa.apply(this,arguments),la){if(!la)throw Error(u(198));var l=ma;la=!1,ma=null,na||(na=!0,oa=l)}}(d,b,void 0,a),a.currentTarget=null}function xa(a,b){if(null==b)throw Error(u(30));return null==a?b:Array.isArray(a)?Array.isArray(b)?(a.push.apply(a,b),a):(a.push(b),a):Array.isArray(b)?[a].concat(b):[a,b]}function ya(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var za=null;function Aa(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)wa(a,b[d],c[d]);else b&&wa(a,b,c);a._dispatchListeners=null,a._dispatchInstances=null,a.isPersistent()||a.constructor.release(a)}}function Ba(a){if(null!==a&&(za=xa(za,a)),a=za,za=null,a){if(ya(a,Aa),za)throw Error(u(95));if(na)throw a=oa,na=!1,oa=null,a}}var Ca={injectEventPluginOrder:function(a){if(ba)throw Error(u(101));ba=Array.prototype.slice.call(a),da()},injectEventPluginsByName:function(a){var c,b=!1;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!ca.hasOwnProperty(c)||ca[c]!==d){if(ca[c])throw Error(u(102,c));ca[c]=d,b=!0}}b&&da()}};function Da(a,b){var c=a.stateNode;if(!c)return null;var d=sa(c);if(!d)return null;c=d[b];a:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(d=!d.disabled)||(d=!("button"===(a=a.type)||"input"===a||"select"===a||"textarea"===a)),a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!=typeof c)throw Error(u(231,b,typeof c));return c}var Ea=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Ea.hasOwnProperty("ReactCurrentDispatcher")||(Ea.ReactCurrentDispatcher={current:null}),Ea.hasOwnProperty("ReactCurrentBatchConfig")||(Ea.ReactCurrentBatchConfig={suspense:null});var Fa=/^(.*)[\\\/]/,w="function"==typeof Symbol&&Symbol.for,Ga=w?Symbol.for("react.element"):60103,Ha=w?Symbol.for("react.portal"):60106,Ia=w?Symbol.for("react.fragment"):60107,Ja=w?Symbol.for("react.strict_mode"):60108,Ka=w?Symbol.for("react.profiler"):60114,La=w?Symbol.for("react.provider"):60109,Ma=w?Symbol.for("react.context"):60110,Na=w?Symbol.for("react.concurrent_mode"):60111,Oa=w?Symbol.for("react.forward_ref"):60112,Pa=w?Symbol.for("react.suspense"):60113,Qa=w?Symbol.for("react.suspense_list"):60120,Ra=w?Symbol.for("react.memo"):60115,Sa=w?Symbol.for("react.lazy"):60116;w&&Symbol.for("react.fundamental"),w&&Symbol.for("react.responder"),w&&Symbol.for("react.scope");var Ta="function"==typeof Symbol&&Symbol.iterator;function Ua(a){return null===a||"object"!=typeof a?null:"function"==typeof(a=Ta&&a[Ta]||a["@@iterator"])?a:null}function Wa(a){if(null==a)return null;if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a;switch(a){case Ia:return"Fragment";case Ha:return"Portal";case Ka:return"Profiler";case Ja:return"StrictMode";case Pa:return"Suspense";case Qa:return"SuspenseList"}if("object"==typeof a)switch(a.$$typeof){case Ma:return"Context.Consumer";case La:return"Context.Provider";case Oa:var b=a.render;return b=b.displayName||b.name||"",a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ra:return Wa(a.type);case Sa:if(a=1===a._status?a._result:null)return Wa(a)}return null}function Xa(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=Wa(a.type);c=null,d&&(c=Wa(d.type)),d=f,f="",e?f=" (at "+e.fileName.replace(Fa,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")"),c="\n    in "+(d||"Unknown")+f}b+=c,a=a.return}while(a);return b}var Ya=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Za=null,$a=null,ab=null;function bb(a){if(a=ua(a)){if("function"!=typeof Za)throw Error(u(280));var b=sa(a.stateNode);Za(a.stateNode,a.type,b)}}function cb(a){$a?ab?ab.push(a):ab=[a]:$a=a}function db(){if($a){var a=$a,b=ab;if(ab=$a=null,bb(a),b)for(a=0;a<b.length;a++)bb(b[a])}}function eb(a,b){return a(b)}function fb(a,b,c,d){return a(b,c,d)}function gb(){}var hb=eb,ib=!1,jb=!1;function kb(){null===$a&&null===ab||(gb(),db())}new Map;var lb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mb=Object.prototype.hasOwnProperty,nb={},ob={};function B(a,b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b,this.attributeName=d,this.attributeNamespace=e,this.mustUseProperty=c,this.propertyName=a,this.type=b,this.sanitizeURL=f}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(a){D[a]=new B(a,0,!1,a,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(a){var b=a[0];D[b]=new B(b,1,!1,a[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(a){D[a]=new B(a,2,!1,a.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(a){D[a]=new B(a,2,!1,a,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(a){D[a]=new B(a,3,!1,a.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(a){D[a]=new B(a,3,!0,a,null,!1)})),["capture","download"].forEach((function(a){D[a]=new B(a,4,!1,a,null,!1)})),["cols","rows","size","span"].forEach((function(a){D[a]=new B(a,6,!1,a,null,!1)})),["rowSpan","start"].forEach((function(a){D[a]=new B(a,5,!1,a.toLowerCase(),null,!1)}));var sb=/[\-:]([a-z])/g;function tb(a){return a[1].toUpperCase()}function ub(a){switch(typeof a){case"boolean":case"number":case"object":case"string":case"undefined":return a;default:return""}}function vb(a,b,c,d){var e=D.hasOwnProperty(b)?D[b]:null;(null!==e?0===e.type:!d&&(2<b.length&&("o"===b[0]||"O"===b[0])&&("n"===b[1]||"N"===b[1])))||(function rb(a,b,c,d){if(null==b||function qb(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return!d&&(null!==c?!c.acceptsBooleans:"data-"!==(a=a.toLowerCase().slice(0,5))&&"aria-"!==a);default:return!1}}(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}(b,c,e,d)&&(c=null),d||null===e?function pb(a){return!!mb.call(ob,a)||!mb.call(nb,a)&&(lb.test(a)?ob[a]=!0:(nb[a]=!0,!1))}(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3!==e.type&&"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(c=3===(e=e.type)||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function wb(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function yb(a){a._valueTracker||(a._valueTracker=function xb(a){var b=wb(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&void 0!==c&&"function"==typeof c.get&&"function"==typeof c.set){var e=c.get,f=c.set;return Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a,f.call(this,a)}}),Object.defineProperty(a,b,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null,delete a[b]}}}}(a))}function zb(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue(),d="";return a&&(d=wb(a)?a.checked?"true":"false":a.value),(a=d)!==c&&(b.setValue(a),!0)}function Ab(a,b){var c=b.checked;return n({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Bb(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=ub(null!=b.value?b.value:c),a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function Cb(a,b){null!=(b=b.checked)&&vb(a,"checked",b,!1)}function Eb(a,b){Cb(a,b);var c=ub(b.value),d=b.type;if(null!=c)"number"===d?(0===c&&""===a.value||a.value!=c)&&(a.value=""+c):a.value!==""+c&&(a.value=""+c);else if("submit"===d||"reset"===d)return void a.removeAttribute("value");b.hasOwnProperty("value")?Fb(a,b.type,c):b.hasOwnProperty("defaultValue")&&Fb(a,b.type,ub(b.defaultValue)),null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Gb(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue,c||b===a.value||(a.value=b),a.defaultValue=b}""!==(c=a.name)&&(a.name=""),a.defaultChecked=!a.defaultChecked,a.defaultChecked=!!a._wrapperState.initialChecked,""!==c&&(a.name=c)}function Fb(a,b,c){"number"===b&&a.ownerDocument.activeElement===a||(null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c))}function Ib(a,b){return a=n({children:void 0},b),(b=function Hb(a){var b="";return aa.Children.forEach(a,(function(a){null!=a&&(b+=a)})),b}(b.children))&&(a.children=b),a}function Jb(a,b,c,d){if(a=a.options,b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{for(c=""+ub(c),b=null,e=0;e<a.length;e++){if(a[e].value===c)return a[e].selected=!0,void(d&&(a[e].defaultSelected=!0));null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Kb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(u(91));return n({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Lb(a,b){var c=b.value;if(null==c){if(c=b.defaultValue,null!=(b=b.children)){if(null!=c)throw Error(u(92));if(Array.isArray(b)){if(!(1>=b.length))throw Error(u(93));b=b[0]}c=b}null==c&&(c="")}a._wrapperState={initialValue:ub(c)}}function Mb(a,b){var c=ub(b.value),d=ub(b.defaultValue);null!=c&&((c=""+c)!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c)),null!=d&&(a.defaultValue=""+d)}function Nb(a){var b=a.textContent;b===a._wrapperState.initialValue&&""!==b&&null!==b&&(a.value=b)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(a){var b=a.replace(sb,tb);D[b]=new B(b,1,!1,a,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(a){var b=a.replace(sb,tb);D[b]=new B(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(a){var b=a.replace(sb,tb);D[b]=new B(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!1)})),D.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!0)}));var Ob={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Pb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qb(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Pb(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}var Rb,Sb=function(a){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction((function(){return a(b,c)}))}:a}((function(a,b){if(a.namespaceURI!==Ob.svg||"innerHTML"in a)a.innerHTML=b;else{for((Rb=Rb||document.createElement("div")).innerHTML="<svg>"+b.valueOf().toString()+"</svg>",b=Rb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}));function Tb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType)return void(c.nodeValue=b)}a.textContent=b}function Ub(a,b){var c={};return c[a.toLowerCase()]=b.toLowerCase(),c["Webkit"+a]="webkit"+b,c["Moz"+a]="moz"+b,c}var Vb={animationend:Ub("Animation","AnimationEnd"),animationiteration:Ub("Animation","AnimationIteration"),animationstart:Ub("Animation","AnimationStart"),transitionend:Ub("Transition","TransitionEnd")},Wb={},Xb={};function Yb(a){if(Wb[a])return Wb[a];if(!Vb[a])return a;var c,b=Vb[a];for(c in b)if(b.hasOwnProperty(c)&&c in Xb)return Wb[a]=b[c];return a}Ya&&(Xb=document.createElement("div").style,"AnimationEvent"in window||(delete Vb.animationend.animation,delete Vb.animationiteration.animation,delete Vb.animationstart.animation),"TransitionEvent"in window||delete Vb.transitionend.transition);var Zb=Yb("animationend"),$b=Yb("animationiteration"),ac=Yb("animationstart"),bc=Yb("transitionend"),dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function ec(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do{0!=(1026&(b=a).effectTag)&&(c=b.return),a=b.return}while(a)}return 3===b.tag?c:null}function fc(a){if(13===a.tag){var b=a.memoizedState;if(null===b&&(null!==(a=a.alternate)&&(b=a.memoizedState)),null!==b)return b.dehydrated}return null}function gc(a){if(ec(a)!==a)throw Error(u(188))}function ic(a){if(!(a=function hc(a){var b=a.alternate;if(!b){if(null===(b=ec(a)))throw Error(u(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){if(null!==(d=e.return)){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return gc(e),a;if(f===d)return gc(e),b;f=f.sibling}throw Error(u(188))}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0,c=e,d=f;break}if(h===d){g=!0,d=e,c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===c){g=!0,c=f,d=e;break}if(h===d){g=!0,d=f,c=e;break}h=h.sibling}if(!g)throw Error(u(189))}}if(c.alternate!==d)throw Error(u(190))}if(3!==c.tag)throw Error(u(188));return c.stateNode.current===c?a:b}(a)))return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}}return null}var jc,kc,lc,mc=!1,nc=[],oc=null,pc=null,qc=null,rc=new Map,sc=new Map,tc=[],uc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),vc="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function zc(a,b,c,d){return{blockedOn:a,topLevelType:b,eventSystemFlags:32|c,nativeEvent:d}}function Ac(a,b){switch(a){case"focus":case"blur":oc=null;break;case"dragenter":case"dragleave":pc=null;break;case"mouseover":case"mouseout":qc=null;break;case"pointerover":case"pointerout":rc.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":sc.delete(b.pointerId)}}function Bc(a,b,c,d,e){return null===a||a.nativeEvent!==e?(a=zc(b,c,d,e),null!==b&&(null!==(b=Cc(b))&&kc(b)),a):(a.eventSystemFlags|=d,a)}function Ec(a){var b=Fc(a.target);if(null!==b){var c=ec(b);if(null!==c)if(13===(b=c.tag)){if(null!==(b=fc(c)))return a.blockedOn=b,void q.unstable_runWithPriority(a.priority,(function(){lc(c)}))}else if(3===b&&c.stateNode.hydrate)return void(a.blockedOn=3===c.tag?c.stateNode.containerInfo:null)}a.blockedOn=null}function Gc(a){if(null!==a.blockedOn)return!1;var b=Hc(a.topLevelType,a.eventSystemFlags,a.nativeEvent);if(null!==b){var c=Cc(b);return null!==c&&kc(c),a.blockedOn=b,!1}return!0}function Ic(a,b,c){Gc(a)&&c.delete(b)}function Jc(){for(mc=!1;0<nc.length;){var a=nc[0];if(null!==a.blockedOn){null!==(a=Cc(a.blockedOn))&&jc(a);break}var b=Hc(a.topLevelType,a.eventSystemFlags,a.nativeEvent);null!==b?a.blockedOn=b:nc.shift()}null!==oc&&Gc(oc)&&(oc=null),null!==pc&&Gc(pc)&&(pc=null),null!==qc&&Gc(qc)&&(qc=null),rc.forEach(Ic),sc.forEach(Ic)}function Kc(a,b){a.blockedOn===b&&(a.blockedOn=null,mc||(mc=!0,q.unstable_scheduleCallback(q.unstable_NormalPriority,Jc)))}function Lc(a){function b(b){return Kc(b,a)}if(0<nc.length){Kc(nc[0],a);for(var c=1;c<nc.length;c++){var d=nc[c];d.blockedOn===a&&(d.blockedOn=null)}}for(null!==oc&&Kc(oc,a),null!==pc&&Kc(pc,a),null!==qc&&Kc(qc,a),rc.forEach(b),sc.forEach(b),c=0;c<tc.length;c++)(d=tc[c]).blockedOn===a&&(d.blockedOn=null);for(;0<tc.length&&null===(c=tc[0]).blockedOn;)Ec(c),null===c.blockedOn&&tc.shift()}function Mc(a){return(a=a.target||a.srcElement||window).correspondingUseElement&&(a=a.correspondingUseElement),3===a.nodeType?a.parentNode:a}function Nc(a){do{a=a.return}while(a&&5!==a.tag);return a||null}function Oc(a,b,c){(b=Da(a,c.dispatchConfig.phasedRegistrationNames[b]))&&(c._dispatchListeners=xa(c._dispatchListeners,b),c._dispatchInstances=xa(c._dispatchInstances,a))}function Pc(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=Nc(b);for(b=c.length;0<b--;)Oc(c[b],"captured",a);for(b=0;b<c.length;b++)Oc(c[b],"bubbled",a)}}function Qc(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Da(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=xa(c._dispatchListeners,b),c._dispatchInstances=xa(c._dispatchInstances,a))}function Rc(a){a&&a.dispatchConfig.registrationName&&Qc(a._targetInst,null,a)}function Sc(a){ya(a,Pc)}function Tc(){return!0}function Uc(){return!1}function E(a,b,c,d){for(var e in this.dispatchConfig=a,this._targetInst=b,this.nativeEvent=c,a=this.constructor.Interface)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);return this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?Tc:Uc,this.isPropagationStopped=Uc,this}function Wc(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();return this.call(e,a,b,c,d),e}return new this(a,b,c,d)}function Xc(a){if(!(a instanceof this))throw Error(u(279));a.destructor(),10>this.eventPool.length&&this.eventPool.push(a)}function Vc(a){a.eventPool=[],a.getPooled=Wc,a.release=Xc}n(E.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!=typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=Tc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!=typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=Tc)},persist:function(){this.isPersistent=Tc},isPersistent:Uc,destructor:function(){var b,a=this.constructor.Interface;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Uc,this._dispatchInstances=this._dispatchListeners=null}}),E.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},E.extend=function(a){function b(){}function c(){return d.apply(this,arguments)}var d=this;b.prototype=d.prototype;var e=new b;return n(e,c.prototype),c.prototype=e,c.prototype.constructor=c,c.Interface=n({},d.Interface,a),c.extend=d.extend,Vc(c),c},Vc(E);var Yc=E.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Zc=E.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),$c=E.extend({view:null,detail:null}),ad=$c.extend({relatedTarget:null});function bd(a){var b=a.keyCode;return"charCode"in a?0===(a=a.charCode)&&13===b&&(a=13):a=b,10===a&&(a=13),32<=a||13===a?a:0}var cd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ed={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):!!(a=fd[a])&&!!b[a]}function hd(){return gd}for(var id=$c.extend({key:function(a){if(a.key){var b=cd[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?13===(a=bd(a))?"Enter":String.fromCharCode(a):"keydown"===a.type||"keyup"===a.type?ed[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:hd,charCode:function(a){return"keypress"===a.type?bd(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===a.type?bd(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),jd=0,kd=0,ld=!1,md=!1,nd=$c.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:hd,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=jd;return jd=a.screenX,ld?"mousemove"===a.type?a.screenX-b:0:(ld=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=kd;return kd=a.screenY,md?"mousemove"===a.type?a.screenY-b:0:(md=!0,0)}}),od=nd.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),pd=nd.extend({dataTransfer:null}),qd=$c.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:hd}),rd=E.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),sd=nd.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),td=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Zb,"animationEnd",2],[$b,"animationIteration",2],[ac,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[bc,"transitionEnd",2],["waiting","waiting",2]],ud={},vd={},xd=0;xd<td.length;xd++){var yd=td[xd],zd=yd[0],Ad=yd[1],Bd=yd[2],Cd="on"+(Ad[0].toUpperCase()+Ad.slice(1)),Dd={phasedRegistrationNames:{bubbled:Cd,captured:Cd+"Capture"},dependencies:[zd],eventPriority:Bd};ud[Ad]=Dd,vd[zd]=Dd}var Ed={eventTypes:ud,getEventPriority:function(a){return void 0!==(a=vd[a])?a.eventPriority:2},extractEvents:function(a,b,c,d){var e=vd[a];if(!e)return null;switch(a){case"keypress":if(0===bd(c))return null;case"keydown":case"keyup":a=id;break;case"blur":case"focus":a=ad;break;case"click":if(2===c.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=pd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=qd;break;case Zb:case $b:case ac:a=Yc;break;case bc:a=rd;break;case"scroll":a=$c;break;case"wheel":a=sd;break;case"copy":case"cut":case"paste":a=Zc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=od;break;default:a=E}return Sc(b=a.getPooled(e,b,c,d)),b}},Fd=q.unstable_UserBlockingPriority,Gd=q.unstable_runWithPriority,Hd=Ed.getEventPriority,Id=10,Jd=[];function Kd(a){var b=a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;5!==(b=c.tag)&&6!==b||a.ancestors.push(c),c=Fc(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Mc(a.nativeEvent);d=a.topLevelType;for(var f=a.nativeEvent,g=a.eventSystemFlags,h=null,k=0;k<ea.length;k++){var l=ea[k];l&&(l=l.extractEvents(d,b,f,e,g))&&(h=xa(h,l))}Ba(h)}}var Ld=!0;function F(a,b){Md(b,a,!1)}function Md(a,b,c){switch(Hd(b)){case 0:var d=Nd.bind(null,b,1);break;case 1:d=Od.bind(null,b,1);break;default:d=Pd.bind(null,b,1)}c?a.addEventListener(b,d,!0):a.addEventListener(b,d,!1)}function Nd(a,b,c){ib||gb();var d=Pd,e=ib;ib=!0;try{fb(d,a,b,c)}finally{(ib=e)||kb()}}function Od(a,b,c){Gd(Fd,Pd.bind(null,a,b,c))}function Qd(a,b,c,d){if(Jd.length){var e=Jd.pop();e.topLevelType=a,e.eventSystemFlags=b,e.nativeEvent=c,e.targetInst=d,a=e}else a={topLevelType:a,eventSystemFlags:b,nativeEvent:c,targetInst:d,ancestors:[]};try{if(b=Kd,c=a,jb)b(c,void 0);else{jb=!0;try{hb(b,c,void 0)}finally{jb=!1,kb()}}}finally{a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,Jd.length<Id&&Jd.push(a)}}function Pd(a,b,c){if(Ld)if(0<nc.length&&-1<uc.indexOf(a))a=zc(null,a,b,c),nc.push(a);else{var d=Hc(a,b,c);null===d?Ac(a,c):-1<uc.indexOf(a)?(a=zc(d,a,b,c),nc.push(a)):function Dc(a,b,c,d){switch(b){case"focus":return oc=Bc(oc,a,b,c,d),!0;case"dragenter":return pc=Bc(pc,a,b,c,d),!0;case"mouseover":return qc=Bc(qc,a,b,c,d),!0;case"pointerover":var e=d.pointerId;return rc.set(e,Bc(rc.get(e)||null,a,b,c,d)),!0;case"gotpointercapture":return e=d.pointerId,sc.set(e,Bc(sc.get(e)||null,a,b,c,d)),!0}return!1}(d,a,b,c)||(Ac(a,c),Qd(a,b,c,null))}}function Hc(a,b,c){var d=Mc(c);if(null!==(d=Fc(d))){var e=ec(d);if(null===e)d=null;else{var f=e.tag;if(13===f){if(null!==(d=fc(e)))return d;d=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;d=null}else e!==d&&(d=null)}}return Qd(a,b,c,d),null}function Rd(a){if(!Ya)return!1;var b=(a="on"+a)in document;return b||((b=document.createElement("div")).setAttribute(a,"return;"),b="function"==typeof b[a]),b}var Sd=new("function"==typeof WeakMap?WeakMap:Map);function xc(a){var b=Sd.get(a);return void 0===b&&(b=new Set,Sd.set(a,b)),b}function yc(a,b,c){if(!c.has(a)){switch(a){case"scroll":Md(b,"scroll",!0);break;case"focus":case"blur":Md(b,"focus",!0),Md(b,"blur",!0),c.add("blur"),c.add("focus");break;case"cancel":case"close":Rd(a)&&Md(b,a,!0);break;case"invalid":case"submit":case"reset":break;default:-1===dc.indexOf(a)&&F(a,b)}c.add(a)}}var Td={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ud=["Webkit","ms","Moz","O"];function Vd(a,b,c){return null==b||"boolean"==typeof b||""===b?"":c||"number"!=typeof b||0===b||Td.hasOwnProperty(a)&&Td[a]?(""+b).trim():b+"px"}function Wd(a,b){for(var c in a=a.style,b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=Vd(c,b[c],d);"float"===c&&(c="cssFloat"),d?a.setProperty(c,e):a[c]=e}}Object.keys(Td).forEach((function(a){Ud.forEach((function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1),Td[b]=Td[a]}))}));var Xd=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yd(a,b){if(b){if(Xd[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(u(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(u(60));if(!("object"==typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(u(61))}if(null!=b.style&&"object"!=typeof b.style)throw Error(u(62,""))}}function Zd(a,b){if(-1===a.indexOf("-"))return"string"==typeof b.is;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function $d(a,b){var c=xc(a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument);b=ja[b];for(var d=0;d<b.length;d++)yc(b[d],a,c)}function ae(){}function be(a){if(void 0===(a=a||("undefined"!=typeof document?document:void 0)))return null;try{return a.activeElement||a.body}catch(b){return a.body}}function ce(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function de(a,b){var d,c=ce(a);for(a=0;c;){if(3===c.nodeType){if(d=a+c.textContent.length,a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=ce(c)}}function fe(){for(var a=window,b=be();b instanceof a.HTMLIFrameElement;){try{var c="string"==typeof b.contentWindow.location.href}catch(d){c=!1}if(!c)break;b=be((a=b.contentWindow).document)}return b}function ge(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}var he="$",ie="/$",je="$?",ke="$!",le=null,me=null;function ne(a,b){switch(a){case"button":case"input":case"select":case"textarea":return!!b.autoFocus}return!1}function oe(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"==typeof b.children||"number"==typeof b.children||"object"==typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var pe="function"==typeof setTimeout?setTimeout:void 0,qe="function"==typeof clearTimeout?clearTimeout:void 0;function re(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function se(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===he||c===ke||c===je){if(0===b)return a;b--}else c===ie&&b++}a=a.previousSibling}return null}var te=Math.random().toString(36).slice(2),ue="__reactInternalInstance$"+te,ve="__reactEventHandlers$"+te,we="__reactContainere$"+te;function Fc(a){var b=a[ue];if(b)return b;for(var c=a.parentNode;c;){if(b=c[we]||c[ue]){if(c=b.alternate,null!==b.child||null!==c&&null!==c.child)for(a=se(a);null!==a;){if(c=a[ue])return c;a=se(a)}return b}c=(a=c).parentNode}return null}function Cc(a){return!(a=a[ue]||a[we])||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function xe(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(u(33))}function ye(a){return a[ve]||null}var ze=null,Ae=null,Be=null;function Ce(){if(Be)return Be;var a,d,b=Ae,c=b.length,e="value"in ze?ze.value:ze.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return Be=e.slice(a,1<d?1-d:void 0)}var De=E.extend({data:null}),Ee=E.extend({data:null}),Fe=[9,13,27,32],Ge=Ya&&"CompositionEvent"in window,He=null;Ya&&"documentMode"in document&&(He=document.documentMode);var Ie=Ya&&"TextEvent"in window&&!He,Je=Ya&&(!Ge||He&&8<He&&11>=He),Ke=String.fromCharCode(32),Le={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Me=!1;function Ne(a,b){switch(a){case"keyup":return-1!==Fe.indexOf(b.keyCode);case"keydown":return 229!==b.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Oe(a){return"object"==typeof(a=a.detail)&&"data"in a?a.data:null}var Pe=!1;var Se={eventTypes:Le,extractEvents:function(a,b,c,d){var e;if(Ge)b:{switch(a){case"compositionstart":var f=Le.compositionStart;break b;case"compositionend":f=Le.compositionEnd;break b;case"compositionupdate":f=Le.compositionUpdate;break b}f=void 0}else Pe?Ne(a,c)&&(f=Le.compositionEnd):"keydown"===a&&229===c.keyCode&&(f=Le.compositionStart);return f?(Je&&"ko"!==c.locale&&(Pe||f!==Le.compositionStart?f===Le.compositionEnd&&Pe&&(e=Ce()):(Ae="value"in(ze=d)?ze.value:ze.textContent,Pe=!0)),f=De.getPooled(f,b,c,d),e?f.data=e:null!==(e=Oe(c))&&(f.data=e),Sc(f),e=f):e=null,(a=Ie?function Qe(a,b){switch(a){case"compositionend":return Oe(b);case"keypress":return 32!==b.which?null:(Me=!0,Ke);case"textInput":return(a=b.data)===Ke&&Me?null:a;default:return null}}(a,c):function Re(a,b){if(Pe)return"compositionend"===a||!Ge&&Ne(a,b)?(a=Ce(),Be=Ae=ze=null,Pe=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return Je&&"ko"!==b.locale?null:b.data;default:return null}}(a,c))?((b=Ee.getPooled(Le.beforeInput,b,c,d)).data=a,Sc(b)):b=null,null===e?b:null===b?e:[e,b]}},Te={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ue(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Te[a.type]:"textarea"===b}var Ve={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function We(a,b,c){return(a=E.getPooled(Ve.change,a,b,c)).type="change",cb(c),Sc(a),a}var Xe=null,Ye=null;function Ze(a){Ba(a)}function $e(a){if(zb(xe(a)))return a}function af(a,b){if("change"===a)return b}var bf=!1;function cf(){Xe&&(Xe.detachEvent("onpropertychange",df),Ye=Xe=null)}function df(a){if("value"===a.propertyName&&$e(Ye))if(a=We(Ye,a,Mc(a)),ib)Ba(a);else{ib=!0;try{eb(Ze,a)}finally{ib=!1,kb()}}}function ef(a,b,c){"focus"===a?(cf(),Ye=c,(Xe=b).attachEvent("onpropertychange",df)):"blur"===a&&cf()}function ff(a){if("selectionchange"===a||"keyup"===a||"keydown"===a)return $e(Ye)}function gf(a,b){if("click"===a)return $e(b)}function hf(a,b){if("input"===a||"change"===a)return $e(b)}Ya&&(bf=Rd("input")&&(!document.documentMode||9<document.documentMode));var lf,jf={eventTypes:Ve,_isInputEventSupported:bf,extractEvents:function(a,b,c,d){var e=b?xe(b):window,f=e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=af;else if(Ue(e))if(bf)g=hf;else{g=ff;var h=ef}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=gf);if(g&&(g=g(a,b)))return We(g,c,d);h&&h(a,e,b),"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Fb(e,"number",e.value)}},kf={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},mf={eventTypes:kf,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0==(32&e)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;if(e=d.window===d?d:(e=d.ownerDocument)?e.defaultView||e.parentWindow:window,g?(g=b,null!==(b=(b=c.relatedTarget||c.toElement)?Fc(b):null)&&(b!==(f=ec(b))||5!==b.tag&&6!==b.tag)&&(b=null)):g=null,g===b)return null;if("mouseout"===a||"mouseover"===a)var h=nd,k=kf.mouseLeave,l=kf.mouseEnter,m="mouse";else"pointerout"!==a&&"pointerover"!==a||(h=od,k=kf.pointerLeave,l=kf.pointerEnter,m="pointer");if(a=null==g?e:xe(g),e=null==b?e:xe(b),(k=h.getPooled(k,g,c,d)).type=m+"leave",k.target=a,k.relatedTarget=e,(d=h.getPooled(l,b,c,d)).type=m+"enter",d.target=e,d.relatedTarget=a,m=b,(h=g)&&m)a:{for(a=m,g=0,b=l=h;b;b=Nc(b))g++;for(b=0,e=a;e;e=Nc(e))b++;for(;0<g-b;)l=Nc(l),g--;for(;0<b-g;)a=Nc(a),b--;for(;g--;){if(l===a||l===a.alternate)break a;l=Nc(l),a=Nc(a)}l=null}else l=null;for(a=l,l=[];h&&h!==a&&(null===(g=h.alternate)||g!==a);)l.push(h),h=Nc(h);for(h=[];m&&m!==a&&(null===(g=m.alternate)||g!==a);)h.push(m),m=Nc(m);for(m=0;m<l.length;m++)Qc(l[m],"bubbled",k);for(m=h.length;0<m--;)Qc(h[m],"captured",d);return c===lf?(lf=null,[k]):(lf=c,[k,d])}};var of="function"==typeof Object.is?Object.is:function nf(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},pf=Object.prototype.hasOwnProperty;function qf(a,b){if(of(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!pf.call(b,c[d])||!of(a[c[d]],b[c[d]]))return!1;return!0}var rf=Ya&&"documentMode"in document&&11>=document.documentMode,sf={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},tf=null,uf=null,vf=null,wf=!1;function xf(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;return wf||null==tf||tf!==be(c)?null:("selectionStart"in(c=tf)&&ge(c)?c={start:c.selectionStart,end:c.selectionEnd}:c={anchorNode:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset},vf&&qf(vf,c)?null:(vf=c,(a=E.getPooled(sf.select,uf,a,b)).type="select",a.target=tf,Sc(a),a))}var yf={eventTypes:sf,extractEvents:function(a,b,c,d){var f,e=d.window===d?d.document:9===d.nodeType?d:d.ownerDocument;if(!(f=!e)){a:{e=xc(e),f=ja.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;switch(e=b?xe(b):window,a){case"focus":(Ue(e)||"true"===e.contentEditable)&&(tf=e,uf=b,vf=null);break;case"blur":vf=uf=tf=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":return wf=!1,xf(c,d);case"selectionchange":if(rf)break;case"keydown":case"keyup":return xf(c,d)}return null}};Ca.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),sa=ye,ua=Cc,va=xe,Ca.injectEventPluginsByName({SimpleEventPlugin:Ed,EnterLeaveEventPlugin:mf,ChangeEventPlugin:jf,SelectEventPlugin:yf,BeforeInputEventPlugin:Se}),new Set;var Af=[],Bf=-1;function G(a){0>Bf||(a.current=Af[Bf],Af[Bf]=null,Bf--)}function I(a,b){Af[++Bf]=a.current,a.current=b}var Cf={},J={current:Cf},K={current:!1},Df=Cf;function Ef(a,b){var c=a.type.contextTypes;if(!c)return Cf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var f,e={};for(f in c)e[f]=b[f];return d&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e),e}function L(a){return null!=(a=a.childContextTypes)}function Ff(a){G(K),G(J)}function Gf(a){G(K),G(J)}function Hf(a,b,c){if(J.current!==Cf)throw Error(u(168));I(J,b),I(K,c)}function If(a,b,c){var d=a.stateNode;if(a=b.childContextTypes,"function"!=typeof d.getChildContext)return c;for(var e in d=d.getChildContext())if(!(e in a))throw Error(u(108,Wa(b)||"Unknown",e));return n({},c,{},d)}function Jf(a){var b=a.stateNode;return b=b&&b.__reactInternalMemoizedMergedChildContext||Cf,Df=J.current,I(J,b),I(K,K.current),!0}function Kf(a,b,c){var d=a.stateNode;if(!d)throw Error(u(169));c?(b=If(a,b,Df),d.__reactInternalMemoizedMergedChildContext=b,G(K),G(J),I(J,b)):G(K),I(K,c)}var Lf=q.unstable_runWithPriority,Mf=q.unstable_scheduleCallback,Nf=q.unstable_cancelCallback,Of=q.unstable_shouldYield,Pf=q.unstable_requestPaint,Qf=q.unstable_now,Rf=q.unstable_getCurrentPriorityLevel,Sf=q.unstable_ImmediatePriority,Tf=q.unstable_UserBlockingPriority,Uf=q.unstable_NormalPriority,Vf=q.unstable_LowPriority,Wf=q.unstable_IdlePriority,Xf={},Yf=void 0!==Pf?Pf:function(){},Zf=null,$f=null,ag=!1,bg=Qf(),cg=1e4>bg?Qf:function(){return Qf()-bg};function dg(){switch(Rf()){case Sf:return 99;case Tf:return 98;case Uf:return 97;case Vf:return 96;case Wf:return 95;default:throw Error(u(332))}}function eg(a){switch(a){case 99:return Sf;case 98:return Tf;case 97:return Uf;case 96:return Vf;case 95:return Wf;default:throw Error(u(332))}}function fg(a,b){return a=eg(a),Lf(a,b)}function gg(a,b,c){return a=eg(a),Mf(a,b,c)}function hg(a){return null===Zf?(Zf=[a],$f=Mf(Sf,ig)):Zf.push(a),Xf}function jg(){if(null!==$f){var a=$f;$f=null,Nf(a)}ig()}function ig(){if(!ag&&null!==Zf){ag=!0;var a=0;try{var b=Zf;fg(99,(function(){for(;a<b.length;a++){var c=b[a];do{c=c(!0)}while(null!==c)}})),Zf=null}catch(c){throw null!==Zf&&(Zf=Zf.slice(a+1)),Mf(Sf,jg),c}finally{ag=!1}}}var kg=3;function lg(a,b,c){return 1073741821-(1+((1073741821-a+b/10)/(c/=10)|0))*c}function mg(a,b){if(a&&a.defaultProps)for(var c in b=n({},b),a=a.defaultProps)void 0===b[c]&&(b[c]=a[c]);return b}var ng={current:null},og=null,pg=null,qg=null;function rg(){qg=pg=og=null}function sg(a,b){var c=a.type._context;I(ng,c._currentValue),c._currentValue=b}function tg(a){var b=ng.current;G(ng),a.type._context._currentValue=b}function ug(a,b){for(;null!==a;){var c=a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else{if(!(null!==c&&c.childExpirationTime<b))break;c.childExpirationTime=b}a=a.return}}function vg(a,b){og=a,qg=pg=null,null!==(a=a.dependencies)&&null!==a.firstContext&&(a.expirationTime>=b&&(wg=!0),a.firstContext=null)}function xg(a,b){if(qg!==a&&!1!==b&&0!==b)if("number"==typeof b&&1073741823!==b||(qg=a,b=1073741823),b={context:a,observedBits:b,next:null},null===pg){if(null===og)throw Error(u(308));pg=b,og.dependencies={expirationTime:0,firstContext:b,responders:null}}else pg=pg.next=b;return a._currentValue}var yg=!1;function zg(a){return{baseState:a,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ag(a){return{baseState:a.baseState,firstUpdate:a.firstUpdate,lastUpdate:a.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Bg(a,b){return{expirationTime:a,suspenseConfig:b,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Cg(a,b){null===a.lastUpdate?a.firstUpdate=a.lastUpdate=b:(a.lastUpdate.next=b,a.lastUpdate=b)}function Dg(a,b){var c=a.alternate;if(null===c){var d=a.updateQueue,e=null;null===d&&(d=a.updateQueue=zg(a.memoizedState))}else d=a.updateQueue,e=c.updateQueue,null===d?null===e?(d=a.updateQueue=zg(a.memoizedState),e=c.updateQueue=zg(c.memoizedState)):d=a.updateQueue=Ag(e):null===e&&(e=c.updateQueue=Ag(d));null===e||d===e?Cg(d,b):null===d.lastUpdate||null===e.lastUpdate?(Cg(d,b),Cg(e,b)):(Cg(d,b),e.lastUpdate=b)}function Eg(a,b){var c=a.updateQueue;null===(c=null===c?a.updateQueue=zg(a.memoizedState):Fg(a,c)).lastCapturedUpdate?c.firstCapturedUpdate=c.lastCapturedUpdate=b:(c.lastCapturedUpdate.next=b,c.lastCapturedUpdate=b)}function Fg(a,b){var c=a.alternate;return null!==c&&b===c.updateQueue&&(b=a.updateQueue=Ag(b)),b}function Gg(a,b,c,d,e,f){switch(c.tag){case 1:return"function"==typeof(a=c.payload)?a.call(f,d,e):a;case 3:a.effectTag=-4097&a.effectTag|64;case 0:if(null==(e="function"==typeof(a=c.payload)?a.call(f,d,e):a))break;return n({},d,e);case 2:yg=!0}return d}function Hg(a,b,c,d,e){yg=!1;for(var f=(b=Fg(a,b)).baseState,g=null,h=0,k=b.firstUpdate,l=f;null!==k;){var m=k.expirationTime;m<e?(null===g&&(g=k,f=l),h<m&&(h=m)):(Ig(m,k.suspenseConfig),l=Gg(a,0,k,l,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastEffect?b.firstEffect=b.lastEffect=k:(b.lastEffect.nextEffect=k,b.lastEffect=k))),k=k.next}for(m=null,k=b.firstCapturedUpdate;null!==k;){var C=k.expirationTime;C<e?(null===m&&(m=k,null===g&&(f=l)),h<C&&(h=C)):(l=Gg(a,0,k,l,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastCapturedEffect?b.firstCapturedEffect=b.lastCapturedEffect=k:(b.lastCapturedEffect.nextEffect=k,b.lastCapturedEffect=k))),k=k.next}null===g&&(b.lastUpdate=null),null===m?b.lastCapturedUpdate=null:a.effectTag|=32,null===g&&null===m&&(f=l),b.baseState=f,b.firstUpdate=g,b.firstCapturedUpdate=m,Jg(h),a.expirationTime=h,a.memoizedState=l}function Kg(a,b,c){null!==b.firstCapturedUpdate&&(null!==b.lastUpdate&&(b.lastUpdate.next=b.firstCapturedUpdate,b.lastUpdate=b.lastCapturedUpdate),b.firstCapturedUpdate=b.lastCapturedUpdate=null),Lg(b.firstEffect,c),b.firstEffect=b.lastEffect=null,Lg(b.firstCapturedEffect,c),b.firstCapturedEffect=b.lastCapturedEffect=null}function Lg(a,b){for(;null!==a;){var c=a.callback;if(null!==c){a.callback=null;var d=b;if("function"!=typeof c)throw Error(u(191,c));c.call(d)}a=a.nextEffect}}var Mg=Ea.ReactCurrentBatchConfig,Ng=(new aa.Component).refs;function Og(a,b,c,d){c=null==(c=c(d,b=a.memoizedState))?b:n({},b,c),a.memoizedState=c,null!==(d=a.updateQueue)&&0===a.expirationTime&&(d.baseState=c)}var Sg={isMounted:function(a){return!!(a=a._reactInternalFiber)&&ec(a)===a},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=Pg(),e=Mg.suspense;(e=Bg(d=Qg(d,a,e),e)).payload=b,null!=c&&(e.callback=c),Dg(a,e),Rg(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=Pg(),e=Mg.suspense;(e=Bg(d=Qg(d,a,e),e)).tag=1,e.payload=b,null!=c&&(e.callback=c),Dg(a,e),Rg(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=Pg(),d=Mg.suspense;(d=Bg(c=Qg(c,a,d),d)).tag=2,null!=b&&(d.callback=b),Dg(a,d),Rg(a,c)}};function Tg(a,b,c,d,e,f,g){return"function"==typeof(a=a.stateNode).shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):!b.prototype||!b.prototype.isPureReactComponent||(!qf(c,d)||!qf(e,f))}function Ug(a,b,c){var d=!1,e=Cf,f=b.contextType;return"object"==typeof f&&null!==f?f=xg(f):(e=L(b)?Df:J.current,f=(d=null!=(d=b.contextTypes))?Ef(a,e):Cf),b=new b(c,f),a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null,b.updater=Sg,a.stateNode=b,b._reactInternalFiber=a,d&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f),b}function Vg(a,b,c,d){a=b.state,"function"==typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d),"function"==typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d),b.state!==a&&Sg.enqueueReplaceState(b,b.state,null)}function Wg(a,b,c,d){var e=a.stateNode;e.props=c,e.state=a.memoizedState,e.refs=Ng;var f=b.contextType;"object"==typeof f&&null!==f?e.context=xg(f):(f=L(b)?Df:J.current,e.context=Ef(a,f)),null!==(f=a.updateQueue)&&(Hg(a,f,c,e,d),e.state=a.memoizedState),"function"==typeof(f=b.getDerivedStateFromProps)&&(Og(a,b,f,c),e.state=a.memoizedState),"function"==typeof b.getDerivedStateFromProps||"function"==typeof e.getSnapshotBeforeUpdate||"function"!=typeof e.UNSAFE_componentWillMount&&"function"!=typeof e.componentWillMount||(b=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Sg.enqueueReplaceState(e,e.state,null),null!==(f=a.updateQueue)&&(Hg(a,f,c,e,d),e.state=a.memoizedState)),"function"==typeof e.componentDidMount&&(a.effectTag|=4)}var Xg=Array.isArray;function Yg(a,b,c){if(null!==(a=c.ref)&&"function"!=typeof a&&"object"!=typeof a){if(c._owner){if(c=c._owner){if(1!==c.tag)throw Error(u(309));var d=c.stateNode}if(!d)throw Error(u(147,a));var e=""+a;return null!==b&&null!==b.ref&&"function"==typeof b.ref&&b.ref._stringRef===e?b.ref:((b=function(a){var b=d.refs;b===Ng&&(b=d.refs={}),null===a?delete b[e]:b[e]=a})._stringRef=e,b)}if("string"!=typeof a)throw Error(u(284));if(!c._owner)throw Error(u(290,a))}return a}function Zg(a,b){if("textarea"!==a.type)throw Error(u(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""))}function $g(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c,c.nextEffect=null,c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b,c){return(a=ah(a,b)).index=0,a.sibling=null,a}function f(b,c,d){return b.index=d,a?null!==(d=b.alternate)?(d=d.index)<c?(b.effectTag=2,c):d:(b.effectTag=2,c):c}function g(b){return a&&null===b.alternate&&(b.effectTag=2),b}function h(a,b,c,d){return null===b||6!==b.tag?((b=bh(c,a.mode,d)).return=a,b):((b=e(b,c)).return=a,b)}function k(a,b,c,d){return null!==b&&b.elementType===c.type?((d=e(b,c.props)).ref=Yg(a,b,c),d.return=a,d):((d=ch(c.type,c.key,c.props,null,a.mode,d)).ref=Yg(a,b,c),d.return=a,d)}function l(a,b,c,d){return null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation?((b=dh(c,a.mode,d)).return=a,b):((b=e(b,c.children||[])).return=a,b)}function m(a,b,c,d,f){return null===b||7!==b.tag?((b=eh(c,a.mode,d,f)).return=a,b):((b=e(b,c)).return=a,b)}function C(a,b,c){if("string"==typeof b||"number"==typeof b)return(b=bh(""+b,a.mode,c)).return=a,b;if("object"==typeof b&&null!==b){switch(b.$$typeof){case Ga:return(c=ch(b.type,b.key,b.props,null,a.mode,c)).ref=Yg(a,null,b),c.return=a,c;case Ha:return(b=dh(b,a.mode,c)).return=a,b}if(Xg(b)||Ua(b))return(b=eh(b,a.mode,c,null)).return=a,b;Zg(a,b)}return null}function y(a,b,c,d){var e=null!==b?b.key:null;if("string"==typeof c||"number"==typeof c)return null!==e?null:h(a,b,""+c,d);if("object"==typeof c&&null!==c){switch(c.$$typeof){case Ga:return c.key===e?c.type===Ia?m(a,b,c.props.children,d,e):k(a,b,c,d):null;case Ha:return c.key===e?l(a,b,c,d):null}if(Xg(c)||Ua(c))return null!==e?null:m(a,b,c,d,null);Zg(a,c)}return null}function H(a,b,c,d,e){if("string"==typeof d||"number"==typeof d)return h(b,a=a.get(c)||null,""+d,e);if("object"==typeof d&&null!==d){switch(d.$$typeof){case Ga:return a=a.get(null===d.key?c:d.key)||null,d.type===Ia?m(b,a,d.props.children,e,d.key):k(b,a,d,e);case Ha:return l(b,a=a.get(null===d.key?c:d.key)||null,d,e)}if(Xg(d)||Ua(d))return m(b,a=a.get(c)||null,d,e,null);Zg(b,d)}return null}function z(e,g,h,k){for(var l=null,m=null,r=g,x=g=0,A=null;null!==r&&x<h.length;x++){r.index>x?(A=r,r=null):A=r.sibling;var p=y(e,r,h[x],k);if(null===p){null===r&&(r=A);break}a&&r&&null===p.alternate&&b(e,r),g=f(p,g,x),null===m?l=p:m.sibling=p,m=p,r=A}if(x===h.length)return c(e,r),l;if(null===r){for(;x<h.length;x++)null!==(r=C(e,h[x],k))&&(g=f(r,g,x),null===m?l=r:m.sibling=r,m=r);return l}for(r=d(e,r);x<h.length;x++)null!==(A=H(r,e,x,h[x],k))&&(a&&null!==A.alternate&&r.delete(null===A.key?x:A.key),g=f(A,g,x),null===m?l=A:m.sibling=A,m=A);return a&&r.forEach((function(a){return b(e,a)})),l}function ta(e,g,h,k){var l=Ua(h);if("function"!=typeof l)throw Error(u(150));if(null==(h=l.call(h)))throw Error(u(151));for(var m=l=null,r=g,x=g=0,A=null,p=h.next();null!==r&&!p.done;x++,p=h.next()){r.index>x?(A=r,r=null):A=r.sibling;var z=y(e,r,p.value,k);if(null===z){null===r&&(r=A);break}a&&r&&null===z.alternate&&b(e,r),g=f(z,g,x),null===m?l=z:m.sibling=z,m=z,r=A}if(p.done)return c(e,r),l;if(null===r){for(;!p.done;x++,p=h.next())null!==(p=C(e,p.value,k))&&(g=f(p,g,x),null===m?l=p:m.sibling=p,m=p);return l}for(r=d(e,r);!p.done;x++,p=h.next())null!==(p=H(r,e,x,p.value,k))&&(a&&null!==p.alternate&&r.delete(null===p.key?x:p.key),g=f(p,g,x),null===m?l=p:m.sibling=p,m=p);return a&&r.forEach((function(a){return b(e,a)})),l}return function(a,d,f,h){var k="object"==typeof f&&null!==f&&f.type===Ia&&null===f.key;k&&(f=f.props.children);var l="object"==typeof f&&null!==f;if(l)switch(f.$$typeof){case Ga:a:{for(l=f.key,k=d;null!==k;){if(k.key===l){if(7===k.tag?f.type===Ia:k.elementType===f.type){c(a,k.sibling),(d=e(k,f.type===Ia?f.props.children:f.props)).ref=Yg(a,k,f),d.return=a,a=d;break a}c(a,k);break}b(a,k),k=k.sibling}f.type===Ia?((d=eh(f.props.children,a.mode,h,f.key)).return=a,a=d):((h=ch(f.type,f.key,f.props,null,a.mode,h)).ref=Yg(a,d,f),h.return=a,a=h)}return g(a);case Ha:a:{for(k=f.key;null!==d;){if(d.key===k){if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling),(d=e(d,f.children||[])).return=a,a=d;break a}c(a,d);break}b(a,d),d=d.sibling}(d=dh(f,a.mode,h)).return=a,a=d}return g(a)}if("string"==typeof f||"number"==typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),(d=e(d,f)).return=a,a=d):(c(a,d),(d=bh(f,a.mode,h)).return=a,a=d),g(a);if(Xg(f))return z(a,d,f,h);if(Ua(f))return ta(a,d,f,h);if(l&&Zg(a,f),void 0===f&&!k)switch(a.tag){case 1:case 0:throw a=a.type,Error(u(152,a.displayName||a.name||"Component"))}return c(a,d)}}var fh=$g(!0),gh=$g(!1),hh={},ih={current:hh},jh={current:hh},kh={current:hh};function lh(a){if(a===hh)throw Error(u(174));return a}function mh(a,b){I(kh,b),I(jh,a),I(ih,hh);var c=b.nodeType;switch(c){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Qb(null,"");break;default:b=Qb(b=(c=8===c?b.parentNode:b).namespaceURI||null,c=c.tagName)}G(ih),I(ih,b)}function nh(a){G(ih),G(jh),G(kh)}function oh(a){lh(kh.current);var b=lh(ih.current),c=Qb(b,a.type);b!==c&&(I(jh,a),I(ih,c))}function ph(a){jh.current===a&&(G(ih),G(jh))}var M={current:0};function qh(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(null===(c=c.dehydrated)||c.data===je||c.data===ke))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!=(64&b.effectTag))return b}else if(null!==b.child){b.child.return=b,b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}function rh(a,b){return{responder:a,props:b}}var sh=Ea.ReactCurrentDispatcher,N=Ea.ReactCurrentBatchConfig,th=0,uh=null,O=null,vh=null,wh=null,P=null,xh=null,yh=0,zh=null,Ah=0,Bh=!1,Ch=null,Gh=0;function Q(){throw Error(u(321))}function Hh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!of(a[c],b[c]))return!1;return!0}function Ih(a,b,c,d,e,f){if(th=f,uh=b,vh=null!==a?a.memoizedState:null,sh.current=null===vh?Jh:Kh,b=c(d,e),Bh){do{Bh=!1,Gh+=1,vh=null!==a?a.memoizedState:null,xh=wh,zh=P=O=null,sh.current=Kh,b=c(d,e)}while(Bh);Ch=null,Gh=0}if(sh.current=Lh,(a=uh).memoizedState=wh,a.expirationTime=yh,a.updateQueue=zh,a.effectTag|=Ah,a=null!==O&&null!==O.next,th=0,xh=P=wh=vh=O=uh=null,yh=0,zh=null,Ah=0,a)throw Error(u(300));return b}function Mh(){sh.current=Lh,th=0,xh=P=wh=vh=O=uh=null,yh=0,zh=null,Ah=0,Bh=!1,Ch=null,Gh=0}function Nh(){var a={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===P?wh=P=a:P=P.next=a,P}function Oh(){if(null!==xh)xh=(P=xh).next,vh=null!==(O=vh)?O.next:null;else{if(null===vh)throw Error(u(310));var a={memoizedState:(O=vh).memoizedState,baseState:O.baseState,queue:O.queue,baseUpdate:O.baseUpdate,next:null};P=null===P?wh=a:P.next=a,vh=O.next}return P}function Ph(a,b){return"function"==typeof b?b(a):b}function Qh(a){var b=Oh(),c=b.queue;if(null===c)throw Error(u(311));if(c.lastRenderedReducer=a,0<Gh){var d=c.dispatch;if(null!==Ch){var e=Ch.get(c);if(void 0!==e){Ch.delete(c);var f=b.memoizedState;do{f=a(f,e.action),e=e.next}while(null!==e);return of(f,b.memoizedState)||(wg=!0),b.memoizedState=f,b.baseUpdate===c.last&&(b.baseState=f),c.lastRenderedState=f,[f,d]}}return[b.memoizedState,d]}d=c.last;var g=b.baseUpdate;if(f=b.baseState,null!==g?(null!==d&&(d.next=null),d=g.next):d=null!==d?d.next:null,null!==d){var h=e=null,k=d,l=!1;do{var m=k.expirationTime;m<th?(l||(l=!0,h=g,e=f),m>yh&&Jg(yh=m)):(Ig(m,k.suspenseConfig),f=k.eagerReducer===a?k.eagerState:a(f,k.action)),g=k,k=k.next}while(null!==k&&k!==d);l||(h=g,e=f),of(f,b.memoizedState)||(wg=!0),b.memoizedState=f,b.baseUpdate=h,b.baseState=e,c.lastRenderedState=f}return[b.memoizedState,c.dispatch]}function Rh(a){var b=Nh();return"function"==typeof a&&(a=a()),b.memoizedState=b.baseState=a,a=(a=b.queue={last:null,dispatch:null,lastRenderedReducer:Ph,lastRenderedState:a}).dispatch=Sh.bind(null,uh,a),[b.memoizedState,a]}function Th(a){return Qh(Ph)}function Uh(a,b,c,d){return a={tag:a,create:b,destroy:c,deps:d,next:null},null===zh?(zh={lastEffect:null}).lastEffect=a.next=a:null===(b=zh.lastEffect)?zh.lastEffect=a.next=a:(c=b.next,b.next=a,a.next=c,zh.lastEffect=a),a}function Vh(a,b,c,d){var e=Nh();Ah|=a,e.memoizedState=Uh(b,c,void 0,void 0===d?null:d)}function Wh(a,b,c,d){var e=Oh();d=void 0===d?null:d;var f=void 0;if(null!==O){var g=O.memoizedState;if(f=g.destroy,null!==d&&Hh(d,g.deps))return void Uh(0,c,f,d)}Ah|=a,e.memoizedState=Uh(b,c,f,d)}function Xh(a,b){return Vh(516,192,a,b)}function Yh(a,b){return Wh(516,192,a,b)}function Zh(a,b){return"function"==typeof b?(a=a(),b(a),function(){b(null)}):null!=b?(a=a(),b.current=a,function(){b.current=null}):void 0}function $h(){}function ai(a,b){return Nh().memoizedState=[a,void 0===b?null:b],a}function bi(a,b){var c=Oh();b=void 0===b?null:b;var d=c.memoizedState;return null!==d&&null!==b&&Hh(b,d[1])?d[0]:(c.memoizedState=[a,b],a)}function Sh(a,b,c){if(!(25>Gh))throw Error(u(301));var d=a.alternate;if(a===uh||null!==d&&d===uh)if(Bh=!0,a={expirationTime:th,suspenseConfig:null,action:c,eagerReducer:null,eagerState:null,next:null},null===Ch&&(Ch=new Map),void 0===(c=Ch.get(b)))Ch.set(b,a);else{for(b=c;null!==b.next;)b=b.next;b.next=a}else{var e=Pg(),f=Mg.suspense;f={expirationTime:e=Qg(e,a,f),suspenseConfig:f,action:c,eagerReducer:null,eagerState:null,next:null};var g=b.last;if(null===g)f.next=f;else{var h=g.next;null!==h&&(f.next=h),g.next=f}if(b.last=f,0===a.expirationTime&&(null===d||0===d.expirationTime)&&null!==(d=b.lastRenderedReducer))try{var k=b.lastRenderedState,l=d(k,c);if(f.eagerReducer=d,f.eagerState=l,of(l,k))return}catch(m){}Rg(a,e)}}var Lh={readContext:xg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useResponder:Q,useDeferredValue:Q,useTransition:Q},Jh={readContext:xg,useCallback:ai,useContext:xg,useEffect:Xh,useImperativeHandle:function(a,b,c){return c=null!=c?c.concat([a]):null,Vh(4,36,Zh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return Vh(4,36,a,b)},useMemo:function(a,b){var c=Nh();return b=void 0===b?null:b,a=a(),c.memoizedState=[a,b],a},useReducer:function(a,b,c){var d=Nh();return b=void 0!==c?c(b):b,d.memoizedState=d.baseState=b,a=(a=d.queue={last:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b}).dispatch=Sh.bind(null,uh,a),[d.memoizedState,a]},useRef:function(a){return a={current:a},Nh().memoizedState=a},useState:Rh,useDebugValue:$h,useResponder:rh,useDeferredValue:function(a,b){var c=Rh(a),d=c[0],e=c[1];return Xh((function(){q.unstable_next((function(){var c=N.suspense;N.suspense=void 0===b?null:b;try{e(a)}finally{N.suspense=c}}))}),[a,b]),d},useTransition:function(a){var b=Rh(!1),c=b[0],d=b[1];return[ai((function(b){d(!0),q.unstable_next((function(){var c=N.suspense;N.suspense=void 0===a?null:a;try{d(!1),b()}finally{N.suspense=c}}))}),[a,c]),c]}},Kh={readContext:xg,useCallback:bi,useContext:xg,useEffect:Yh,useImperativeHandle:function(a,b,c){return c=null!=c?c.concat([a]):null,Wh(4,36,Zh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return Wh(4,36,a,b)},useMemo:function(a,b){var c=Oh();b=void 0===b?null:b;var d=c.memoizedState;return null!==d&&null!==b&&Hh(b,d[1])?d[0]:(a=a(),c.memoizedState=[a,b],a)},useReducer:Qh,useRef:function(){return Oh().memoizedState},useState:Th,useDebugValue:$h,useResponder:rh,useDeferredValue:function(a,b){var c=Th(),d=c[0],e=c[1];return Yh((function(){q.unstable_next((function(){var c=N.suspense;N.suspense=void 0===b?null:b;try{e(a)}finally{N.suspense=c}}))}),[a,b]),d},useTransition:function(a){var b=Th(),c=b[0],d=b[1];return[bi((function(b){d(!0),q.unstable_next((function(){var c=N.suspense;N.suspense=void 0===a?null:a;try{d(!1),b()}finally{N.suspense=c}}))}),[a,c]),c]}},ci=null,di=null,ei=!1;function fi(a,b){var c=gi(5,null,null,0);c.elementType="DELETED",c.type="DELETED",c.stateNode=b,c.return=a,c.effectTag=8,null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function hi(a,b){switch(a.tag){case 5:var c=a.type;return null!==(b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b)&&(a.stateNode=b,!0);case 6:return null!==(b=""===a.pendingProps||3!==b.nodeType?null:b)&&(a.stateNode=b,!0);case 13:default:return!1}}function ii(a){if(ei){var b=di;if(b){var c=b;if(!hi(a,b)){if(!(b=re(c.nextSibling))||!hi(a,b))return a.effectTag=-1025&a.effectTag|2,ei=!1,void(ci=a);fi(ci,c)}ci=a,di=re(b.firstChild)}else a.effectTag=-1025&a.effectTag|2,ei=!1,ci=a}}function ji(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ci=a}function ki(a){if(a!==ci)return!1;if(!ei)return ji(a),ei=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==b&&!oe(b,a.memoizedProps))for(b=di;b;)fi(a,b),b=re(b.nextSibling);if(ji(a),13===a.tag){if(!(a=null!==(a=a.memoizedState)?a.dehydrated:null))throw Error(u(317));a:{for(a=a.nextSibling,b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ie){if(0===b){di=re(a.nextSibling);break a}b--}else c!==he&&c!==ke&&c!==je||b++}a=a.nextSibling}di=null}}else di=ci?re(a.stateNode.nextSibling):null;return!0}function li(){di=ci=null,ei=!1}var mi=Ea.ReactCurrentOwner,wg=!1;function R(a,b,c,d){b.child=null===a?gh(b,null,c,d):fh(b,a.child,c,d)}function ni(a,b,c,d,e){c=c.render;var f=b.ref;return vg(b,e),d=Ih(a,b,c,d,f,e),null===a||wg?(b.effectTag|=1,R(a,b,d,e),b.child):(b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),oi(a,b,e))}function pi(a,b,c,d,e,f){if(null===a){var g=c.type;return"function"!=typeof g||qi(g)||void 0!==g.defaultProps||null!==c.compare||void 0!==c.defaultProps?((a=ch(c.type,null,d,null,b.mode,f)).ref=b.ref,a.return=b,b.child=a):(b.tag=15,b.type=g,ri(a,b,g,d,e,f))}return g=a.child,e<f&&(e=g.memoizedProps,(c=null!==(c=c.compare)?c:qf)(e,d)&&a.ref===b.ref)?oi(a,b,f):(b.effectTag|=1,(a=ah(g,d)).ref=b.ref,a.return=b,b.child=a)}function ri(a,b,c,d,e,f){return null!==a&&qf(a.memoizedProps,d)&&a.ref===b.ref&&(wg=!1,e<f)?oi(a,b,f):si(a,b,c,d,f)}function ti(a,b){var c=b.ref;(null===a&&null!==c||null!==a&&a.ref!==c)&&(b.effectTag|=128)}function si(a,b,c,d,e){var f=L(c)?Df:J.current;return f=Ef(b,f),vg(b,e),c=Ih(a,b,c,d,f,e),null===a||wg?(b.effectTag|=1,R(a,b,c,e),b.child):(b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),oi(a,b,e))}function ui(a,b,c,d,e){if(L(c)){var f=!0;Jf(b)}else f=!1;if(vg(b,e),null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Ug(b,c,d),Wg(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;"object"==typeof l&&null!==l?l=xg(l):l=Ef(b,l=L(c)?Df:J.current);var m=c.getDerivedStateFromProps,C="function"==typeof m||"function"==typeof g.getSnapshotBeforeUpdate;C||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Vg(b,g,d,l),yg=!1;var y=b.memoizedState;k=g.state=y;var H=b.updateQueue;null!==H&&(Hg(b,H,d,g,e),k=b.memoizedState),h!==d||y!==k||K.current||yg?("function"==typeof m&&(Og(b,c,m,d),k=b.memoizedState),(h=yg||Tg(b,c,h,d,y,k,l))?(C||"function"!=typeof g.UNSAFE_componentWillMount&&"function"!=typeof g.componentWillMount||("function"==typeof g.componentWillMount&&g.componentWillMount(),"function"==typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"==typeof g.componentDidMount&&(b.effectTag|=4)):("function"==typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):("function"==typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,h=b.memoizedProps,g.props=b.type===b.elementType?h:mg(b.type,h),k=g.context,"object"==typeof(l=c.contextType)&&null!==l?l=xg(l):l=Ef(b,l=L(c)?Df:J.current),(C="function"==typeof(m=c.getDerivedStateFromProps)||"function"==typeof g.getSnapshotBeforeUpdate)||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Vg(b,g,d,l),yg=!1,k=b.memoizedState,y=g.state=k,null!==(H=b.updateQueue)&&(Hg(b,H,d,g,e),y=b.memoizedState),h!==d||k!==y||K.current||yg?("function"==typeof m&&(Og(b,c,m,d),y=b.memoizedState),(m=yg||Tg(b,c,h,d,k,y,l))?(C||"function"!=typeof g.UNSAFE_componentWillUpdate&&"function"!=typeof g.componentWillUpdate||("function"==typeof g.componentWillUpdate&&g.componentWillUpdate(d,y,l),"function"==typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,y,l)),"function"==typeof g.componentDidUpdate&&(b.effectTag|=4),"function"==typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=y),g.props=d,g.state=y,g.context=l,d=m):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),d=!1);return vi(a,b,c,d,f,e)}function vi(a,b,c,d,e,f){ti(a,b);var g=0!=(64&b.effectTag);if(!d&&!g)return e&&Kf(b,c,!1),oi(a,b,f);d=b.stateNode,mi.current=b;var h=g&&"function"!=typeof c.getDerivedStateFromError?null:d.render();return b.effectTag|=1,null!==a&&g?(b.child=fh(b,a.child,null,f),b.child=fh(b,null,h,f)):R(a,b,h,f),b.memoizedState=d.state,e&&Kf(b,c,!0),b.child}function wi(a){var b=a.stateNode;b.pendingContext?Hf(0,b.pendingContext,b.pendingContext!==b.context):b.context&&Hf(0,b.context,!1),mh(a,b.containerInfo)}var Hi,Ii,Ji,Ki,xi={dehydrated:null,retryTime:0};function yi(a,b,c){var h,d=b.mode,e=b.pendingProps,f=M.current,g=!1;if((h=0!=(64&b.effectTag))||(h=0!=(2&f)&&(null===a||null!==a.memoizedState)),h?(g=!0,b.effectTag&=-65):null!==a&&null===a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1),I(M,1&f),null===a){if(void 0!==e.fallback&&ii(b),g){if(g=e.fallback,(e=eh(null,d,0,null)).return=b,0==(2&b.mode))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;return(c=eh(g,d,c,null)).return=b,e.sibling=c,b.memoizedState=xi,b.child=e,c}return d=e.children,b.memoizedState=null,b.child=gh(b,null,d,c)}if(null!==a.memoizedState){if(d=(a=a.child).sibling,g){if(e=e.fallback,(c=ah(a,a.pendingProps)).return=b,0==(2&b.mode)&&(g=null!==b.memoizedState?b.child.child:b.child)!==a.child)for(c.child=g;null!==g;)g.return=c,g=g.sibling;return(d=ah(d,e,d.expirationTime)).return=b,c.sibling=d,c.childExpirationTime=0,b.memoizedState=xi,b.child=c,d}return c=fh(b,a.child,e.children,c),b.memoizedState=null,b.child=c}if(a=a.child,g){if(g=e.fallback,(e=eh(null,d,0,null)).return=b,e.child=a,null!==a&&(a.return=e),0==(2&b.mode))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;return(c=eh(g,d,c,null)).return=b,e.sibling=c,c.effectTag|=2,e.childExpirationTime=0,b.memoizedState=xi,b.child=e,c}return b.memoizedState=null,b.child=fh(b,a,e.children,c)}function zi(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b),ug(a.return,b)}function Ai(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,last:d,tail:c,tailExpiration:0,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function Bi(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;if(R(a,b,d.children,c),0!=(2&(d=M.current)))d=1&d|2,b.effectTag|=64;else{if(null!==a&&0!=(64&a.effectTag))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&zi(a,c);else if(19===a.tag)zi(a,c);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}if(I(M,d),0==(2&b.mode))b.memoizedState=null;else switch(e){case"forwards":for(c=b.child,e=null;null!==c;)null!==(a=c.alternate)&&null===qh(a)&&(e=c),c=c.sibling;null===(c=e)?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null),Ai(b,!1,e,c,f,b.lastEffect);break;case"backwards":for(c=null,e=b.child,b.child=null;null!==e;){if(null!==(a=e.alternate)&&null===qh(a)){b.child=e;break}a=e.sibling,e.sibling=c,c=e,e=a}Ai(b,!0,c,null,f,b.lastEffect);break;case"together":Ai(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function oi(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;if(0!==d&&Jg(d),b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(u(153));if(null!==b.child){for(c=ah(a=b.child,a.pendingProps,a.expirationTime),b.child=c,c.return=b;null!==a.sibling;)a=a.sibling,(c=c.sibling=ah(a,a.pendingProps,a.expirationTime)).return=b;c.sibling=null}return b.child}function Ci(a){a.effectTag|=4}function Li(a,b){switch(a.tailMode){case"hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function Mi(a){switch(a.tag){case 1:L(a.type)&&Ff();var b=a.effectTag;return 4096&b?(a.effectTag=-4097&b|64,a):null;case 3:if(nh(),Gf(),0!=(64&(b=a.effectTag)))throw Error(u(285));return a.effectTag=-4097&b|64,a;case 5:return ph(a),null;case 13:return G(M),4096&(b=a.effectTag)?(a.effectTag=-4097&b|64,a):null;case 19:return G(M),null;case 4:return nh(),null;case 10:return tg(a),null;default:return null}}function Ni(a,b){return{value:a,source:b,stack:Xa(b)}}Hi=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Ii=function(){},Ji=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var h,k,g=b.stateNode;switch(lh(ih.current),a=null,c){case"input":f=Ab(g,f),d=Ab(g,d),a=[];break;case"option":f=Ib(g,f),d=Ib(g,d),a=[];break;case"select":f=n({},f,{value:void 0}),d=n({},d,{value:void 0}),a=[];break;case"textarea":f=Kb(g,f),d=Kb(g,d),a=[];break;default:"function"!=typeof f.onClick&&"function"==typeof d.onClick&&(g.onclick=ae)}for(h in Yd(c,d),c=null,f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(k in g=f[h])g.hasOwnProperty(k)&&(c||(c={}),c[k]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(ia.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var l=d[h];if(g=null!=f?f[h]:void 0,d.hasOwnProperty(h)&&l!==g&&(null!=l||null!=g))if("style"===h)if(g){for(k in g)!g.hasOwnProperty(k)||l&&l.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in l)l.hasOwnProperty(k)&&g[k]!==l[k]&&(c||(c={}),c[k]=l[k])}else c||(a||(a=[]),a.push(h,c)),c=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,g=g?g.__html:void 0,null!=l&&g!==l&&(a=a||[]).push(h,""+l)):"children"===h?g===l||"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(ia.hasOwnProperty(h)?(null!=l&&$d(e,h),a||g===l||(a=[])):(a=a||[]).push(h,l))}c&&(a=a||[]).push("style",c),e=a,(b.updateQueue=e)&&Ci(b)}},Ki=function(a,b,c,d){c!==d&&Ci(b)};var Oi="function"==typeof WeakSet?WeakSet:Set;function Pi(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Xa(c)),null!==c&&Wa(c.type),b=b.value,null!==a&&1===a.tag&&Wa(a.type);try{console.error(b)}catch(e){setTimeout((function(){throw e}))}}function Si(a){var b=a.ref;if(null!==b)if("function"==typeof b)try{b(null)}catch(c){Ri(a,c)}else b.current=null}function Ti(a,b){switch(b.tag){case 0:case 11:case 15:Ui(2,0,b);break;case 1:if(256&b.effectTag&&null!==a){var c=a.memoizedProps,d=a.memoizedState;b=(a=b.stateNode).getSnapshotBeforeUpdate(b.elementType===b.type?c:mg(b.type,c),d),a.__reactInternalSnapshotBeforeUpdate=b}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}function Ui(a,b,c){if(null!==(c=null!==(c=c.updateQueue)?c.lastEffect:null)){var d=c=c.next;do{if(0!=(d.tag&a)){var e=d.destroy;d.destroy=void 0,void 0!==e&&e()}0!=(d.tag&b)&&(e=d.create,d.destroy=e()),d=d.next}while(d!==c)}}function Vi(a,b,c){switch("function"==typeof Wi&&Wi(b),b.tag){case 0:case 11:case 14:case 15:if(null!==(a=b.updateQueue)&&null!==(a=a.lastEffect)){var d=a.next;fg(97<c?97:c,(function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Ri(g,h)}}a=a.next}while(a!==d)}))}break;case 1:Si(b),"function"==typeof(c=b.stateNode).componentWillUnmount&&function Qi(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Ri(a,c)}}(b,c);break;case 5:Si(b);break;case 4:Xi(a,b,c)}}function Yi(a){var b=a.alternate;a.return=null,a.child=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.alternate=null,a.firstEffect=null,a.lastEffect=null,a.pendingProps=null,a.memoizedProps=null,null!==b&&Yi(b)}function Zi(a){return 5===a.tag||3===a.tag||4===a.tag}function $i(a){a:{for(var b=a.return;null!==b;){if(Zi(b)){var c=b;break a}b=b.return}throw Error(u(160))}switch(b=c.stateNode,c.tag){case 5:var d=!1;break;case 3:case 4:b=b.containerInfo,d=!0;break;default:throw Error(u(161))}16&c.effectTag&&(Tb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Zi(c.return)){c=null;break a}c=c.return}for(c.sibling.return=c.return,c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(2&c.effectTag)continue b;if(null===c.child||4===c.tag)continue b;c.child.return=c,c=c.child}if(!(2&c.effectTag)){c=c.stateNode;break a}}for(var e=a;;){var f=5===e.tag||6===e.tag;if(f){var g=f?e.stateNode:e.stateNode.instance;if(c)if(d){var h=g;g=c,8===(f=b).nodeType?f.parentNode.insertBefore(h,g):f.insertBefore(h,g)}else b.insertBefore(g,c);else d?(8===(h=b).nodeType?(f=h.parentNode).insertBefore(g,h):(f=h).appendChild(g),null!=(h=h._reactRootContainer)||null!==f.onclick||(f.onclick=ae)):b.appendChild(g)}else if(4!==e.tag&&null!==e.child){e.child.return=e,e=e.child;continue}if(e===a)break;for(;null===e.sibling;){if(null===e.return||e.return===a)return;e=e.return}e.sibling.return=e.return,e=e.sibling}}function Xi(a,b,c){for(var f,g,d=b,e=!1;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(u(160));switch(f=e.stateNode,e.tag){case 5:g=!1;break a;case 3:case 4:f=f.containerInfo,g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=a,k=d,l=c,m=k;;)if(Vi(h,m,l),null!==m.child&&4!==m.tag)m.child.return=m,m=m.child;else{if(m===k)break;for(;null===m.sibling;){if(null===m.return||m.return===k)break a;m=m.return}m.sibling.return=m.return,m=m.sibling}g?(h=f,k=d.stateNode,8===h.nodeType?h.parentNode.removeChild(k):h.removeChild(k)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo,g=!0,d.child.return=d,d=d.child;continue}}else if(Vi(a,d,c),null!==d.child){d.child.return=d,d=d.child;continue}if(d===b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;4===(d=d.return).tag&&(e=!1)}d.sibling.return=d.return,d=d.sibling}}function aj(a,b){switch(b.tag){case 0:case 11:case 14:case 15:Ui(4,8,b);break;case 1:break;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;if(b.updateQueue=null,null!==f){for(c[ve]=d,"input"===a&&"radio"===d.type&&null!=d.name&&Cb(c,d),Zd(a,e),b=Zd(a,d),e=0;e<f.length;e+=2){var g=f[e],h=f[e+1];"style"===g?Wd(c,h):"dangerouslySetInnerHTML"===g?Sb(c,h):"children"===g?Tb(c,h):vb(c,g,h,b)}switch(a){case"input":Eb(c,d);break;case"textarea":Mb(c,d);break;case"select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,null!=(a=d.value)?Jb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?Jb(c,!!d.multiple,d.defaultValue,!0):Jb(c,!!d.multiple,d.multiple?[]:"",!1))}}}break;case 6:if(null===b.stateNode)throw Error(u(162));b.stateNode.nodeValue=b.memoizedProps;break;case 3:(b=b.stateNode).hydrate&&(b.hydrate=!1,Lc(b.containerInfo));break;case 12:break;case 13:if(c=b,null===b.memoizedState?d=!1:(d=!0,c=b.child,bj=cg()),null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?"function"==typeof(f=f.style).setProperty?f.setProperty("display","none","important"):f.display="none":(f=a.stateNode,e=null!=(e=a.memoizedProps.style)&&e.hasOwnProperty("display")?e.display:null,f.style.display=Vd("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?"":a.memoizedProps;else{if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){(f=a.child.sibling).return=a,a=f;continue}if(null!==a.child){a.child.return=a,a=a.child;continue}}if(a===c)break a;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return,a=a.sibling}cj(b);break;case 19:cj(b);break;case 17:case 20:case 21:break;default:throw Error(u(163))}}function cj(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Oi),b.forEach((function(b){var d=dj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))}))}}var ej="function"==typeof WeakMap?WeakMap:Map;function fj(a,b,c){(c=Bg(c,null)).tag=3,c.payload={element:null};var d=b.value;return c.callback=function(){gj||(gj=!0,hj=d),Pi(a,b)},c}function ij(a,b,c){(c=Bg(c,null)).tag=3;var d=a.type.getDerivedStateFromError;if("function"==typeof d){var e=b.value;c.payload=function(){return Pi(a,b),d(e)}}var f=a.stateNode;return null!==f&&"function"==typeof f.componentDidCatch&&(c.callback=function(){"function"!=typeof d&&(null===jj?jj=new Set([this]):jj.add(this),Pi(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})}),c}var gk,kj=Math.ceil,lj=Ea.ReactCurrentDispatcher,mj=Ea.ReactCurrentOwner,S=0,nj=8,oj=16,pj=32,qj=0,rj=1,sj=2,tj=3,uj=4,vj=5,T=S,U=null,V=null,W=0,X=qj,wj=null,xj=1073741823,yj=1073741823,zj=null,Aj=0,Bj=!1,bj=0,Cj=500,Y=null,gj=!1,hj=null,jj=null,Dj=!1,Ej=null,Fj=90,Gj=null,Hj=0,Ij=null,Jj=0;function Pg(){return(T&(oj|pj))!==S?1073741821-(cg()/10|0):0!==Jj?Jj:Jj=1073741821-(cg()/10|0)}function Qg(a,b,c){if(0==(2&(b=b.mode)))return 1073741823;var d=dg();if(0==(4&b))return 99===d?1073741823:1073741822;if((T&oj)!==S)return W;if(null!==c)a=lg(a,0|c.timeoutMs||5e3,250);else switch(d){case 99:a=1073741823;break;case 98:a=lg(a,150,100);break;case 97:case 96:a=lg(a,5e3,250);break;case 95:a=2;break;default:throw Error(u(326))}return null!==U&&a===W&&--a,a}function Rg(a,b){if(50<Hj)throw Hj=0,Ij=null,Error(u(185));if(null!==(a=Kj(a,b))){var c=dg();1073741823===b?(T&nj)!==S&&(T&(oj|pj))===S?Lj(a):(Z(a),T===S&&jg()):Z(a),(4&T)===S||98!==c&&99!==c||(null===Gj?Gj=new Map([[a,b]]):(void 0===(c=Gj.get(a))||c>b)&&Gj.set(a,b))}}function Kj(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){if(c=d.alternate,d.childExpirationTime<b&&(d.childExpirationTime=b),null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b),null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}return null!==e&&(U===e&&(Jg(b),X===uj&&Mj(e,W)),Nj(e,b)),e}function Oj(a){var b=a.lastExpiredTime;return 0!==b?b:Pj(a,b=a.firstPendingTime)?(b=a.lastPingedTime)>(a=a.nextKnownPendingLevel)?b:a:b}function Z(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=hg(Lj.bind(null,a));else{var b=Oj(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=Pg();if(1073741823===b?d=99:1===b||2===b?d=95:d=0>=(d=10*(1073741821-b)-10*(1073741821-d))?99:250>=d?98:5250>=d?97:95,null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Xf&&Nf(c)}a.callbackExpirationTime=b,a.callbackPriority=d,b=1073741823===b?hg(Lj.bind(null,a)):gg(d,Qj.bind(null,a),{timeout:10*(1073741821-b)-cg()}),a.callbackNode=b}}}function Qj(a,b){if(Jj=0,b)return Rj(a,b=Pg()),Z(a),null;var c=Oj(a);if(0!==c){if(b=a.callbackNode,(T&(oj|pj))!==S)throw Error(u(327));if(Sj(),a===U&&c===W||Tj(a,c),null!==V){var d=T;T|=oj;for(var e=Uj();;)try{Vj();break}catch(h){Wj(a,h)}if(rg(),T=d,lj.current=e,X===rj)throw b=wj,Tj(a,c),Mj(a,c),Z(a),b;if(null===V)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=X,U=null,d){case qj:case rj:throw Error(u(345));case sj:Rj(a,2<c?2:c);break;case tj:if(Mj(a,c),c===(d=a.lastSuspendedTime)&&(a.nextKnownPendingLevel=Xj(e)),1073741823===xj&&10<(e=bj+Cj-cg())){if(Bj){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=c,Tj(a,c);break}}if(0!==(f=Oj(a))&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=pe(Yj.bind(null,a),e);break}Yj(a);break;case uj:if(Mj(a,c),c===(d=a.lastSuspendedTime)&&(a.nextKnownPendingLevel=Xj(e)),Bj&&(0===(e=a.lastPingedTime)||e>=c)){a.lastPingedTime=c,Tj(a,c);break}if(0!==(e=Oj(a))&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}if(1073741823!==yj?d=10*(1073741821-yj)-cg():1073741823===xj?d=0:(d=10*(1073741821-xj)-5e3,0>(d=(e=cg())-d)&&(d=0),(c=10*(1073741821-c)-e)<(d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*kj(d/1960))-d)&&(d=c)),10<d){a.timeoutHandle=pe(Yj.bind(null,a),d);break}Yj(a);break;case vj:if(1073741823!==xj&&null!==zj){f=xj;var g=zj;if(0>=(d=0|g.busyMinDurationMs)?d=0:(e=0|g.busyDelayMs,d=(f=cg()-(10*(1073741821-f)-(0|g.timeoutMs||5e3)))<=e?0:e+d-f),10<d){Mj(a,c),a.timeoutHandle=pe(Yj.bind(null,a),d);break}}Yj(a);break;default:throw Error(u(329))}if(Z(a),a.callbackNode===b)return Qj.bind(null,a)}}return null}function Lj(a){var b=a.lastExpiredTime;if(b=0!==b?b:1073741823,a.finishedExpirationTime===b)Yj(a);else{if((T&(oj|pj))!==S)throw Error(u(327));if(Sj(),a===U&&b===W||Tj(a,b),null!==V){var c=T;T|=oj;for(var d=Uj();;)try{Zj();break}catch(e){Wj(a,e)}if(rg(),T=c,lj.current=d,X===rj)throw c=wj,Tj(a,b),Mj(a,b),Z(a),c;if(null!==V)throw Error(u(261));a.finishedWork=a.current.alternate,a.finishedExpirationTime=b,U=null,Yj(a),Z(a)}}return null}function bk(a,b){var c=T;T|=1;try{return a(b)}finally{(T=c)===S&&jg()}}function ck(a,b){var c=T;T&=-2,T|=nj;try{return a(b)}finally{(T=c)===S&&jg()}}function Tj(a,b){a.finishedWork=null,a.finishedExpirationTime=0;var c=a.timeoutHandle;if(-1!==c&&(a.timeoutHandle=-1,qe(c)),null!==V)for(c=V.return;null!==c;){var d=c;switch(d.tag){case 1:var e=d.type.childContextTypes;null!=e&&Ff();break;case 3:nh(),Gf();break;case 5:ph(d);break;case 4:nh();break;case 13:case 19:G(M);break;case 10:tg(d)}c=c.return}U=a,V=ah(a.current,null),W=b,X=qj,wj=null,yj=xj=1073741823,zj=null,Aj=0,Bj=!1}function Wj(a,b){for(;;){try{if(rg(),Mh(),null===V||null===V.return)return X=rj,wj=b,null;a:{var c=a,d=V.return,e=V,f=b;if(b=W,e.effectTag|=2048,e.firstEffect=e.lastEffect=null,null!==f&&"object"==typeof f&&"function"==typeof f.then){var g=f,h=0!=(1&M.current),k=d;do{var l;if(l=13===k.tag){var m=k.memoizedState;if(null!==m)l=null!==m.dehydrated;else{var C=k.memoizedProps;l=void 0!==C.fallback&&(!0!==C.unstable_avoidThisFallback||!h)}}if(l){var y=k.updateQueue;if(null===y){var H=new Set;H.add(g),k.updateQueue=H}else y.add(g);if(0==(2&k.mode)){if(k.effectTag|=64,e.effectTag&=-2981,1===e.tag)if(null===e.alternate)e.tag=17;else{var z=Bg(1073741823,null);z.tag=2,Dg(e,z)}e.expirationTime=1073741823;break a}f=void 0,e=b;var ta=c.pingCache;if(null===ta?(ta=c.pingCache=new ej,f=new Set,ta.set(g,f)):void 0===(f=ta.get(g))&&(f=new Set,ta.set(g,f)),!f.has(e)){f.add(e);var r=dk.bind(null,c,g,e);g.then(r,r)}k.effectTag|=4096,k.expirationTime=b;break a}k=k.return}while(null!==k);f=Error((Wa(e.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Xa(e))}X!==vj&&(X=sj),f=Ni(f,e),k=d;do{switch(k.tag){case 3:g=f,k.effectTag|=4096,k.expirationTime=b,Eg(k,fj(k,g,b));break a;case 1:g=f;var A=k.type,p=k.stateNode;if(0==(64&k.effectTag)&&("function"==typeof A.getDerivedStateFromError||null!==p&&"function"==typeof p.componentDidCatch&&(null===jj||!jj.has(p)))){k.effectTag|=4096,k.expirationTime=b,Eg(k,ij(k,g,b));break a}}k=k.return}while(null!==k)}V=ek(V)}catch(v){b=v;continue}break}}function Uj(){var a=lj.current;return lj.current=Lh,null===a?Lh:a}function Ig(a,b){a<xj&&2<a&&(xj=a),null!==b&&a<yj&&2<a&&(yj=a,zj=b)}function Jg(a){a>Aj&&(Aj=a)}function Zj(){for(;null!==V;)V=fk(V)}function Vj(){for(;null!==V&&!Of();)V=fk(V)}function fk(a){var b=gk(a.alternate,a,W);return a.memoizedProps=a.pendingProps,null===b&&(b=ek(a)),mj.current=null,b}function ek(a){V=a;do{var b=V.alternate;if(a=V.return,0==(2048&V.effectTag)){a:{var c=b,d=W,e=(b=V).pendingProps;switch(b.tag){case 2:case 16:break;case 15:case 0:break;case 1:L(b.type)&&Ff();break;case 3:nh(),Gf(),(e=b.stateNode).pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),(null===c||null===c.child)&&ki(b)&&Ci(b),Ii(b);break;case 5:ph(b),d=lh(kh.current);var f=b.type;if(null!==c&&null!=b.stateNode)Ji(c,b,f,e,d),c.ref!==b.ref&&(b.effectTag|=128);else if(e){var g=lh(ih.current);if(ki(b)){var h=(e=b).stateNode;c=e.type;var k=e.memoizedProps,l=d;switch(h[ue]=e,h[ve]=k,f=void 0,d=h,c){case"iframe":case"object":case"embed":F("load",d);break;case"video":case"audio":for(h=0;h<dc.length;h++)F(dc[h],d);break;case"source":F("error",d);break;case"img":case"image":case"link":F("error",d),F("load",d);break;case"form":F("reset",d),F("submit",d);break;case"details":F("toggle",d);break;case"input":Bb(d,k),F("invalid",d),$d(l,"onChange");break;case"select":d._wrapperState={wasMultiple:!!k.multiple},F("invalid",d),$d(l,"onChange");break;case"textarea":Lb(d,k),F("invalid",d),$d(l,"onChange")}for(f in Yd(c,k),h=null,k)k.hasOwnProperty(f)&&(g=k[f],"children"===f?"string"==typeof g?d.textContent!==g&&(h=["children",g]):"number"==typeof g&&d.textContent!==""+g&&(h=["children",""+g]):ia.hasOwnProperty(f)&&null!=g&&$d(l,f));switch(c){case"input":yb(d),Gb(d,k,!0);break;case"textarea":yb(d),Nb(d);break;case"select":case"option":break;default:"function"==typeof k.onClick&&(d.onclick=ae)}f=h,e.updateQueue=f,(e=null!==f)&&Ci(b)}else{c=b,l=f,k=e,h=9===d.nodeType?d:d.ownerDocument,g===Ob.html&&(g=Pb(l)),g===Ob.html?"script"===l?((k=h.createElement("div")).innerHTML="<script><\/script>",h=k.removeChild(k.firstChild)):"string"==typeof k.is?h=h.createElement(l,{is:k.is}):(h=h.createElement(l),"select"===l&&(l=h,k.multiple?l.multiple=!0:k.size&&(l.size=k.size))):h=h.createElementNS(g,l),(k=h)[ue]=c,k[ve]=e,Hi(k,b,!1,!1),b.stateNode=k;var m=d,C=Zd(l=f,c=e);switch(l){case"iframe":case"object":case"embed":F("load",k),d=c;break;case"video":case"audio":for(d=0;d<dc.length;d++)F(dc[d],k);d=c;break;case"source":F("error",k),d=c;break;case"img":case"image":case"link":F("error",k),F("load",k),d=c;break;case"form":F("reset",k),F("submit",k),d=c;break;case"details":F("toggle",k),d=c;break;case"input":Bb(k,c),d=Ab(k,c),F("invalid",k),$d(m,"onChange");break;case"option":d=Ib(k,c);break;case"select":k._wrapperState={wasMultiple:!!c.multiple},d=n({},c,{value:void 0}),F("invalid",k),$d(m,"onChange");break;case"textarea":Lb(k,c),d=Kb(k,c),F("invalid",k),$d(m,"onChange");break;default:d=c}Yd(l,d),h=void 0,g=l;var y=k,H=d;for(h in H)if(H.hasOwnProperty(h)){var z=H[h];"style"===h?Wd(y,z):"dangerouslySetInnerHTML"===h?null!=(z=z?z.__html:void 0)&&Sb(y,z):"children"===h?"string"==typeof z?("textarea"!==g||""!==z)&&Tb(y,z):"number"==typeof z&&Tb(y,""+z):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(ia.hasOwnProperty(h)?null!=z&&$d(m,h):null!=z&&vb(y,h,z,C))}switch(l){case"input":yb(k),Gb(k,c,!1);break;case"textarea":yb(k),Nb(k);break;case"option":null!=c.value&&k.setAttribute("value",""+ub(c.value));break;case"select":(d=k).multiple=!!c.multiple,null!=(k=c.value)?Jb(d,!!c.multiple,k,!1):null!=c.defaultValue&&Jb(d,!!c.multiple,c.defaultValue,!0);break;default:"function"==typeof d.onClick&&(k.onclick=ae)}(e=ne(f,e))&&Ci(b)}null!==b.ref&&(b.effectTag|=128)}else if(null===b.stateNode)throw Error(u(166));break;case 6:if(c&&null!=b.stateNode)Ki(c,b,c.memoizedProps,e);else{if("string"!=typeof e&&null===b.stateNode)throw Error(u(166));d=lh(kh.current),lh(ih.current),ki(b)?(f=(e=b).stateNode,d=e.memoizedProps,f[ue]=e,(e=f.nodeValue!==d)&&Ci(b)):(f=b,(e=(9===d.nodeType?d:d.ownerDocument).createTextNode(e))[ue]=f,b.stateNode=e)}break;case 11:break;case 13:if(G(M),e=b.memoizedState,0!=(64&b.effectTag)){b.expirationTime=d;break a}e=null!==e,f=!1,null===c?void 0!==b.memoizedProps.fallback&&ki(b):(f=null!==(d=c.memoizedState),e||null===d||null!==(d=c.child.sibling)&&(null!==(k=b.firstEffect)?(b.firstEffect=d,d.nextEffect=k):(b.firstEffect=b.lastEffect=d,d.nextEffect=null),d.effectTag=8)),e&&!f&&0!=(2&b.mode)&&(null===c&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!=(1&M.current)?X===qj&&(X=tj):(X!==qj&&X!==tj||(X=uj),0!==Aj&&null!==U&&(Mj(U,W),Nj(U,Aj)))),(e||f)&&(b.effectTag|=4);break;case 7:case 8:case 12:break;case 4:nh(),Ii(b);break;case 10:tg(b);break;case 9:case 14:break;case 17:L(b.type)&&Ff();break;case 19:if(G(M),null===(e=b.memoizedState))break;if(f=0!=(64&b.effectTag),null===(k=e.rendering)){if(f)Li(e,!1);else if(X!==qj||null!==c&&0!=(64&c.effectTag))for(c=b.child;null!==c;){if(null!==(k=qh(c))){for(b.effectTag|=64,Li(e,!1),null!==(f=k.updateQueue)&&(b.updateQueue=f,b.effectTag|=4),null===e.lastEffect&&(b.firstEffect=null),b.lastEffect=e.lastEffect,e=d,f=b.child;null!==f;)c=e,(d=f).effectTag&=2,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null,null===(k=d.alternate)?(d.childExpirationTime=0,d.expirationTime=c,d.child=null,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null):(d.childExpirationTime=k.childExpirationTime,d.expirationTime=k.expirationTime,d.child=k.child,d.memoizedProps=k.memoizedProps,d.memoizedState=k.memoizedState,d.updateQueue=k.updateQueue,c=k.dependencies,d.dependencies=null===c?null:{expirationTime:c.expirationTime,firstContext:c.firstContext,responders:c.responders}),f=f.sibling;I(M,1&M.current|2),b=b.child;break a}c=c.sibling}}else{if(!f)if(null!==(c=qh(k))){if(b.effectTag|=64,f=!0,null!==(d=c.updateQueue)&&(b.updateQueue=d,b.effectTag|=4),Li(e,!0),null===e.tail&&"hidden"===e.tailMode){null!==(b=b.lastEffect=e.lastEffect)&&(b.nextEffect=null);break}}else cg()>e.tailExpiration&&1<d&&(b.effectTag|=64,f=!0,Li(e,!1),b.expirationTime=b.childExpirationTime=d-1);e.isBackwards?(k.sibling=b.child,b.child=k):(null!==(d=e.last)?d.sibling=k:b.child=k,e.last=k)}if(null!==e.tail){0===e.tailExpiration&&(e.tailExpiration=cg()+500),d=e.tail,e.rendering=d,e.tail=d.sibling,e.lastEffect=b.lastEffect,d.sibling=null,e=M.current,I(M,e=f?1&e|2:1&e),b=d;break a}break;case 20:case 21:break;default:throw Error(u(156,b.tag))}b=null}if(e=V,1===W||1!==e.childExpirationTime){for(f=0,d=e.child;null!==d;)(c=d.expirationTime)>f&&(f=c),(k=d.childExpirationTime)>f&&(f=k),d=d.sibling;e.childExpirationTime=f}if(null!==b)return b;null!==a&&0==(2048&a.effectTag)&&(null===a.firstEffect&&(a.firstEffect=V.firstEffect),null!==V.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=V.firstEffect),a.lastEffect=V.lastEffect),1<V.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=V:a.firstEffect=V,a.lastEffect=V))}else{if(null!==(b=Mi(V)))return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=2048)}if(null!==(b=V.sibling))return b;V=a}while(null!==V);return X===qj&&(X=vj),null}function Xj(a){var b=a.expirationTime;return b>(a=a.childExpirationTime)?b:a}function Yj(a){var b=dg();return fg(99,ik.bind(null,a,b)),null}function ik(a,b){if(Sj(),(T&(oj|pj))!==S)throw Error(u(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;if(a.finishedWork=null,a.finishedExpirationTime=0,c===a.current)throw Error(u(177));a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90,a.nextKnownPendingLevel=0;var e=Xj(c);if(a.firstPendingTime=e,d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1),d<=a.lastPingedTime&&(a.lastPingedTime=0),d<=a.lastExpiredTime&&(a.lastExpiredTime=0),a===U&&(V=U=null,W=0),1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect,null!==e){var f=T;T|=pj,mj.current=null,le=Ld;var g=fe();if(ge(g)){if("selectionStart"in g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{var k=(h=(h=g.ownerDocument)&&h.defaultView||window).getSelection&&h.getSelection();if(k&&0!==k.rangeCount){h=k.anchorNode;var l=k.anchorOffset,m=k.focusNode;k=k.focusOffset;try{h.nodeType,m.nodeType}catch(Db){h=null;break a}var C=0,y=-1,H=-1,z=0,ta=0,r=g,x=null;b:for(;;){for(var A;r!==h||0!==l&&3!==r.nodeType||(y=C+l),r!==m||0!==k&&3!==r.nodeType||(H=C+k),3===r.nodeType&&(C+=r.nodeValue.length),null!==(A=r.firstChild);)x=r,r=A;for(;;){if(r===g)break b;if(x===h&&++z===l&&(y=C),x===m&&++ta===k&&(H=C),null!==(A=r.nextSibling))break;x=(r=x).parentNode}r=A}h=-1===y||-1===H?null:{start:y,end:H}}else h=null}h=h||{start:0,end:0}}else h=null;me={focusedElem:g,selectionRange:h},Ld=!1,Y=e;do{try{jk()}catch(Db){if(null===Y)throw Error(u(330));Ri(Y,Db),Y=Y.nextEffect}}while(null!==Y);Y=e;do{try{for(g=a,h=b;null!==Y;){var p=Y.effectTag;if(16&p&&Tb(Y.stateNode,""),128&p){var t=Y.alternate;if(null!==t){var v=t.ref;null!==v&&("function"==typeof v?v(null):v.current=null)}}switch(1038&p){case 2:$i(Y),Y.effectTag&=-3;break;case 6:$i(Y),Y.effectTag&=-3,aj(Y.alternate,Y);break;case 1024:Y.effectTag&=-1025;break;case 1028:Y.effectTag&=-1025,aj(Y.alternate,Y);break;case 4:aj(Y.alternate,Y);break;case 8:Xi(g,l=Y,h),Yi(l)}Y=Y.nextEffect}}catch(Db){if(null===Y)throw Error(u(330));Ri(Y,Db),Y=Y.nextEffect}}while(null!==Y);if(v=me,t=fe(),p=v.focusedElem,h=v.selectionRange,t!==p&&p&&p.ownerDocument&&function ee(a,b){return!(!a||!b)&&(a===b||(!a||3!==a.nodeType)&&(b&&3===b.nodeType?ee(a,b.parentNode):"contains"in a?a.contains(b):!!a.compareDocumentPosition&&!!(16&a.compareDocumentPosition(b))))}(p.ownerDocument.documentElement,p)){null!==h&&ge(p)&&(t=h.start,void 0===(v=h.end)&&(v=t),"selectionStart"in p?(p.selectionStart=t,p.selectionEnd=Math.min(v,p.value.length)):(v=(t=p.ownerDocument||document)&&t.defaultView||window).getSelection&&(v=v.getSelection(),l=p.textContent.length,g=Math.min(h.start,l),h=void 0===h.end?g:Math.min(h.end,l),!v.extend&&g>h&&(l=h,h=g,g=l),l=de(p,g),m=de(p,h),l&&m&&(1!==v.rangeCount||v.anchorNode!==l.node||v.anchorOffset!==l.offset||v.focusNode!==m.node||v.focusOffset!==m.offset)&&((t=t.createRange()).setStart(l.node,l.offset),v.removeAllRanges(),g>h?(v.addRange(t),v.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),v.addRange(t))))),t=[];for(v=p;v=v.parentNode;)1===v.nodeType&&t.push({element:v,left:v.scrollLeft,top:v.scrollTop});for("function"==typeof p.focus&&p.focus(),p=0;p<t.length;p++)(v=t[p]).element.scrollLeft=v.left,v.element.scrollTop=v.top}me=null,Ld=!!le,le=null,a.current=c,Y=e;do{try{for(p=d;null!==Y;){var Dh=Y.effectTag;if(36&Dh){var cc=Y.alternate;switch(v=p,(t=Y).tag){case 0:case 11:case 15:Ui(16,32,t);break;case 1:var dd=t.stateNode;if(4&t.effectTag)if(null===cc)dd.componentDidMount();else{var hk=t.elementType===t.type?cc.memoizedProps:mg(t.type,cc.memoizedProps);dd.componentDidUpdate(hk,cc.memoizedState,dd.__reactInternalSnapshotBeforeUpdate)}var Eh=t.updateQueue;null!==Eh&&Kg(0,Eh,dd);break;case 3:var Fh=t.updateQueue;if(null!==Fh){if(g=null,null!==t.child)switch(t.child.tag){case 5:g=t.child.stateNode;break;case 1:g=t.child.stateNode}Kg(0,Fh,g)}break;case 5:var xk=t.stateNode;null===cc&&4&t.effectTag&&ne(t.type,t.memoizedProps)&&xk.focus();break;case 6:case 4:case 12:break;case 13:if(null===t.memoizedState){var Di=t.alternate;if(null!==Di){var Ei=Di.memoizedState;if(null!==Ei){var Fi=Ei.dehydrated;null!==Fi&&Lc(Fi)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(u(163))}}if(128&Dh){t=void 0;var wd=Y.ref;if(null!==wd){var Gi=Y.stateNode;switch(Y.tag){case 5:t=Gi;break;default:t=Gi}"function"==typeof wd?wd(t):wd.current=t}}Y=Y.nextEffect}}catch(Db){if(null===Y)throw Error(u(330));Ri(Y,Db),Y=Y.nextEffect}}while(null!==Y);Y=null,Yf(),T=f}else a.current=c;if(Dj)Dj=!1,Ej=a,Fj=b;else for(Y=e;null!==Y;)b=Y.nextEffect,Y.nextEffect=null,Y=b;if(0===(b=a.firstPendingTime)&&(jj=null),1073741823===b?a===Ij?Hj++:(Hj=0,Ij=a):Hj=0,"function"==typeof kk&&kk(c.stateNode,d),Z(a),gj)throw gj=!1,a=hj,hj=null,a;return(T&nj)!==S?null:(jg(),null)}function jk(){for(;null!==Y;){var a=Y.effectTag;0!=(256&a)&&Ti(Y.alternate,Y),0==(512&a)||Dj||(Dj=!0,gg(97,(function(){return Sj(),null}))),Y=Y.nextEffect}}function Sj(){if(90!==Fj){var a=97<Fj?97:Fj;return Fj=90,fg(a,lk)}}function lk(){if(null===Ej)return!1;var a=Ej;if(Ej=null,(T&(oj|pj))!==S)throw Error(u(331));var b=T;for(T|=pj,a=a.current.firstEffect;null!==a;){try{var c=a;if(0!=(512&c.effectTag))switch(c.tag){case 0:case 11:case 15:Ui(128,0,c),Ui(0,64,c)}}catch(d){if(null===a)throw Error(u(330));Ri(a,d)}c=a.nextEffect,a.nextEffect=null,a=c}return T=b,jg(),!0}function mk(a,b,c){Dg(a,b=fj(a,b=Ni(c,b),1073741823)),null!==(a=Kj(a,1073741823))&&Z(a)}function Ri(a,b){if(3===a.tag)mk(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){mk(c,a,b);break}if(1===c.tag){var d=c.stateNode;if("function"==typeof c.type.getDerivedStateFromError||"function"==typeof d.componentDidCatch&&(null===jj||!jj.has(d))){Dg(c,a=ij(c,a=Ni(b,a),1073741823)),null!==(c=Kj(c,1073741823))&&Z(c);break}}c=c.return}}function dk(a,b,c){var d=a.pingCache;null!==d&&d.delete(b),U===a&&W===c?X===uj||X===tj&&1073741823===xj&&cg()-bj<Cj?Tj(a,W):Bj=!0:Pj(a,c)&&(0!==(b=a.lastPingedTime)&&b<c||(a.lastPingedTime=c,a.finishedExpirationTime===c&&(a.finishedExpirationTime=0,a.finishedWork=null),Z(a)))}function dj(a,b){var c=a.stateNode;null!==c&&c.delete(b),0===(b=0)&&(b=Qg(b=Pg(),a,null)),null!==(a=Kj(a,b))&&Z(a)}gk=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||K.current)wg=!0;else{if(d<c){switch(wg=!1,b.tag){case 3:wi(b),li();break;case 5:if(oh(b),4&b.mode&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:L(b.type)&&Jf(b);break;case 4:mh(b,b.stateNode.containerInfo);break;case 10:sg(b,b.memoizedProps.value);break;case 13:if(null!==b.memoizedState)return 0!==(d=b.child.childExpirationTime)&&d>=c?yi(a,b,c):(I(M,1&M.current),null!==(b=oi(a,b,c))?b.sibling:null);I(M,1&M.current);break;case 19:if(d=b.childExpirationTime>=c,0!=(64&a.effectTag)){if(d)return Bi(a,b,c);b.effectTag|=64}if(null!==(e=b.memoizedState)&&(e.rendering=null,e.tail=null),I(M,M.current),!d)return null}return oi(a,b,c)}wg=!1}}else wg=!1;switch(b.expirationTime=0,b.tag){case 2:if(d=b.type,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),a=b.pendingProps,e=Ef(b,J.current),vg(b,c),e=Ih(null,b,d,a,e,c),b.effectTag|=1,"object"==typeof e&&null!==e&&"function"==typeof e.render&&void 0===e.$$typeof){if(b.tag=1,Mh(),L(d)){var f=!0;Jf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;var g=d.getDerivedStateFromProps;"function"==typeof g&&Og(b,d,g,a),e.updater=Sg,b.stateNode=e,e._reactInternalFiber=b,Wg(b,d,a,c),b=vi(null,b,d,!0,f,c)}else b.tag=0,R(null,b,e,c),b=b.child;return b;case 16:if(e=b.elementType,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),a=b.pendingProps,function Va(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b(),a._result=b,b.then((function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)}),(function(b){0===a._status&&(a._status=2,a._result=b)}))}}(e),1!==e._status)throw e._result;switch(e=e._result,b.type=e,f=b.tag=function nk(a){if("function"==typeof a)return qi(a)?1:0;if(null!=a){if((a=a.$$typeof)===Oa)return 11;if(a===Ra)return 14}return 2}(e),a=mg(e,a),f){case 0:b=si(null,b,e,a,c);break;case 1:b=ui(null,b,e,a,c);break;case 11:b=ni(null,b,e,a,c);break;case 14:b=pi(null,b,e,mg(e.type,a),d,c);break;default:throw Error(u(306,e,""))}return b;case 0:return d=b.type,e=b.pendingProps,si(a,b,d,e=b.elementType===d?e:mg(d,e),c);case 1:return d=b.type,e=b.pendingProps,ui(a,b,d,e=b.elementType===d?e:mg(d,e),c);case 3:if(wi(b),null===(d=b.updateQueue))throw Error(u(282));if(e=null!==(e=b.memoizedState)?e.element:null,Hg(b,d,b.pendingProps,null,c),(d=b.memoizedState.element)===e)li(),b=oi(a,b,c);else{if((e=b.stateNode.hydrate)&&(di=re(b.stateNode.containerInfo.firstChild),ci=b,e=ei=!0),e)for(c=gh(b,null,d,c),b.child=c;c;)c.effectTag=-3&c.effectTag|1024,c=c.sibling;else R(a,b,d,c),li();b=b.child}return b;case 5:return oh(b),null===a&&ii(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,oe(d,e)?g=null:null!==f&&oe(d,f)&&(b.effectTag|=16),ti(a,b),4&b.mode&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(R(a,b,g,c),b=b.child),b;case 6:return null===a&&ii(b),null;case 13:return yi(a,b,c);case 4:return mh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=fh(b,null,d,c):R(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,ni(a,b,d,e=b.elementType===d?e:mg(d,e),c);case 7:return R(a,b,b.pendingProps,c),b.child;case 8:case 12:return R(a,b,b.pendingProps.children,c),b.child;case 10:a:{if(d=b.type._context,e=b.pendingProps,g=b.memoizedProps,sg(b,f=e.value),null!==g){var h=g.value;if(0===(f=of(h,f)?0:0|("function"==typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823))){if(g.children===e.children&&!K.current){b=oi(a,b,c);break a}}else for(null!==(h=b.child)&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=k.firstContext;null!==l;){if(l.context===d&&0!=(l.observedBits&f)){1===h.tag&&((l=Bg(c,null)).tag=2,Dg(h,l)),h.expirationTime<c&&(h.expirationTime=c),null!==(l=h.alternate)&&l.expirationTime<c&&(l.expirationTime=c),ug(h.return,c),k.expirationTime<c&&(k.expirationTime=c);break}l=l.next}}else g=10===h.tag&&h.type===b.type?null:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}if(null!==(h=g.sibling)){h.return=g.return,g=h;break}g=g.return}h=g}}R(a,b,e.children,c),b=b.child}return b;case 9:return e=b.type,d=(f=b.pendingProps).children,vg(b,c),d=d(e=xg(e,f.unstable_observedBits)),b.effectTag|=1,R(a,b,d,c),b.child;case 14:return f=mg(e=b.type,b.pendingProps),pi(a,b,e,f=mg(e.type,f),d,c);case 15:return ri(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:mg(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,L(d)?(a=!0,Jf(b)):a=!1,vg(b,c),Ug(b,d,e),Wg(b,d,e,c),vi(null,b,d,!0,a,c);case 19:return Bi(a,b,c)}throw Error(u(156,b.tag))};var kk=null,Wi=null;function pk(a,b,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function gi(a,b,c,d){return new pk(a,b,c,d)}function qi(a){return!(!(a=a.prototype)||!a.isReactComponent)}function ah(a,b){var c=a.alternate;return null===c?((c=gi(a.tag,b,a.key,a.mode)).elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null),c.childExpirationTime=a.childExpirationTime,c.expirationTime=a.expirationTime,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,b=a.dependencies,c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c}function ch(a,b,c,d,e,f){var g=2;if(d=a,"function"==typeof a)qi(a)&&(g=1);else if("string"==typeof a)g=5;else a:switch(a){case Ia:return eh(c.children,e,f,b);case Na:g=8,e|=7;break;case Ja:g=8,e|=1;break;case Ka:return(a=gi(12,c,b,8|e)).elementType=Ka,a.type=Ka,a.expirationTime=f,a;case Pa:return(a=gi(13,c,b,e)).type=Pa,a.elementType=Pa,a.expirationTime=f,a;case Qa:return(a=gi(19,c,b,e)).elementType=Qa,a.expirationTime=f,a;default:if("object"==typeof a&&null!==a)switch(a.$$typeof){case La:g=10;break a;case Ma:g=9;break a;case Oa:g=11;break a;case Ra:g=14;break a;case Sa:g=16,d=null;break a}throw Error(u(130,null==a?a:typeof a,""))}return(b=gi(g,c,b,e)).elementType=a,b.type=d,b.expirationTime=f,b}function eh(a,b,c,d){return(a=gi(7,a,d,b)).expirationTime=c,a}function bh(a,b,c){return(a=gi(6,a,null,b)).expirationTime=c,a}function dh(a,b,c){return(b=gi(4,null!==a.children?a.children:[],a.key,b)).expirationTime=c,b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},b}function qk(a,b,c){this.tag=b,this.current=null,this.containerInfo=a,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=c,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Pj(a,b){var c=a.firstSuspendedTime;return a=a.lastSuspendedTime,0!==c&&c>=b&&a<=b}function Mj(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;c<b&&(a.firstSuspendedTime=b),(d>b||0===c)&&(a.lastSuspendedTime=b),b<=a.lastPingedTime&&(a.lastPingedTime=0),b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function Nj(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Rj(a,b){var c=a.lastExpiredTime;(0===c||c>b)&&(a.lastExpiredTime=b)}function rk(a,b,c,d){var e=b.current,f=Pg(),g=Mg.suspense;f=Qg(f,e,g);a:if(c){b:{if(ec(c=c._reactInternalFiber)!==c||1!==c.tag)throw Error(u(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(L(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(u(171))}if(1===c.tag){var k=c.type;if(L(k)){c=If(c,k,h);break a}}c=h}else c=Cf;return null===b.context?b.context=c:b.pendingContext=c,(b=Bg(f,g)).payload={element:a},null!==(d=void 0===d?null:d)&&(b.callback=d),Dg(e,b),Rg(e,f),f}function sk(a){if(!(a=a.current).child)return null;switch(a.child.tag){case 5:default:return a.child.stateNode}}function tk(a,b){null!==(a=a.memoizedState)&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function uk(a,b){tk(a,b),(a=a.alternate)&&tk(a,b)}function wk(a,b,c){var d=new qk(a,b,c=null!=c&&!0===c.hydrate),e=gi(3,null,null,2===b?7:1===b?3:0);d.current=e,e.stateNode=d,a[we]=d.current,c&&0!==b&&function wc(a){var b=xc(a);uc.forEach((function(c){yc(c,a,b)})),vc.forEach((function(c){yc(c,a,b)}))}(9===a.nodeType?a:a.ownerDocument),this._internalRoot=d}function yk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Ak(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if("function"==typeof e){var h=e;e=function(){var a=sk(g);h.call(a)}}rk(b,g,a,e)}else{if(f=c._reactRootContainer=function zk(a,b){if(b||(b=!(!(b=a?9===a.nodeType?a.documentElement:a.firstChild:null)||1!==b.nodeType||!b.hasAttribute("data-reactroot"))),!b)for(var c;c=a.lastChild;)a.removeChild(c);return new wk(a,0,b?{hydrate:!0}:void 0)}(c,d),g=f._internalRoot,"function"==typeof e){var k=e;e=function(){var a=sk(g);k.call(a)}}ck((function(){rk(b,g,a,e)}))}return sk(g)}function Bk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!yk(b))throw Error(u(200));return function vk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ha,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}(a,b,null,c)}jc=function(a){if(13===a.tag){var b=lg(Pg(),150,100);Rg(a,b),uk(a,b)}},kc=function(a){if(13===a.tag){Pg();var b=kg++;Rg(a,b),uk(a,b)}},lc=function(a){if(13===a.tag){var b=Pg();Rg(a,b=Qg(b,a,null)),uk(a,b)}},Za=function(a,b,c){switch(b){case"input":if(Eb(a,c),b=c.name,"radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]'),b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ye(d);if(!e)throw Error(u(90));zb(d),Eb(d,e)}}}break;case"textarea":Mb(a,c);break;case"select":null!=(b=c.value)&&Jb(a,!!c.multiple,b,!1)}},wk.prototype.render=function(a,b){rk(a,this._internalRoot,null,void 0===b?null:b)},wk.prototype.unmount=function(a){rk(null,this._internalRoot,null,void 0===a?null:a)},eb=bk,fb=function(a,b,c,d){var e=T;T|=4;try{return fg(98,a.bind(null,b,c,d))}finally{(T=e)===S&&jg()}},gb=function(){(T&(1|oj|pj))===S&&(function ak(){if(null!==Gj){var a=Gj;Gj=null,a.forEach((function(a,c){Rj(c,a),Z(c)})),jg()}}(),Sj())},hb=function(a,b){var c=T;T|=2;try{return a(b)}finally{(T=c)===S&&jg()}};var a,b,Ck={createPortal:Bk,findDOMNode:function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===b){if("function"==typeof a.render)throw Error(u(188));throw Error(u(268,Object.keys(a)))}return a=null===(a=ic(b))?null:a.stateNode},hydrate:function(a,b,c){if(!yk(b))throw Error(u(200));return Ak(null,a,b,!0,c)},render:function(a,b,c){if(!yk(b))throw Error(u(200));return Ak(null,a,b,!1,c)},unstable_renderSubtreeIntoContainer:function(a,b,c,d){if(!yk(c))throw Error(u(200));if(null==a||void 0===a._reactInternalFiber)throw Error(u(38));return Ak(a,b,c,!1,d)},unmountComponentAtNode:function(a){if(!yk(a))throw Error(u(40));return!!a._reactRootContainer&&(ck((function(){Ak(null,null,a,!1,(function(){a._reactRootContainer=null}))})),!0)},unstable_createPortal:function(){return Bk.apply(void 0,arguments)},unstable_batchedUpdates:bk,flushSync:function(a,b){if((T&(oj|pj))!==S)throw Error(u(187));var c=T;T|=1;try{return fg(99,a.bind(null,b))}finally{T=c,jg()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[Cc,xe,ye,Ca.injectEventPluginsByName,fa,Sc,function(a){ya(a,Rc)},cb,db,Pd,Ba,Sj,{current:!1}]}};b=(a={findFiberByHostInstance:Fc,bundleType:0,version:"16.11.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function ok(a){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);kk=function(a){try{b.onCommitFiberRoot(c,a,void 0,64==(64&a.current.effectTag))}catch(e){}},Wi=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}(n({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ea.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return null===(a=ic(a))?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}));var Dk={default:Ck},Ek=Dk&&Ck||Dk;module.exports=Ek.default||Ek},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(740)},function(module,exports,__webpack_require__){"use strict";
/** @license React v0.17.0
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f,g,h,k,l;if(Object.defineProperty(exports,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var p=null,q=null,t=function(){if(null!==p)try{var a=exports.unstable_now();p(!0,a),p=null}catch(b){throw setTimeout(t,0),b}},u=Date.now();exports.unstable_now=function(){return Date.now()-u},f=function(a){null!==p?setTimeout(f,0,a):(p=a,setTimeout(t,0))},g=function(a,b){q=setTimeout(a,b)},h=function(){clearTimeout(q)},k=function(){return!1},l=exports.unstable_forceFrameRate=function(){}}else{var w=window.performance,x=window.Date,y=window.setTimeout,z=window.clearTimeout,A=window.requestAnimationFrame,B=window.cancelAnimationFrame;if("undefined"!=typeof console&&("function"!=typeof A&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof B&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),"object"==typeof w&&"function"==typeof w.now)exports.unstable_now=function(){return w.now()};else{var C=x.now();exports.unstable_now=function(){return x.now()-C}}var D=!1,E=null,F=-1,G=5,H=0;k=function(){return exports.unstable_now()>=H},l=function(){},exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):G=0<a?Math.floor(1e3/a):33.33};var I=new MessageChannel,J=I.port2;I.port1.onmessage=function(){if(null!==E){var a=exports.unstable_now();H=a+G;try{E(!0,a)?J.postMessage(null):(D=!1,E=null)}catch(b){throw J.postMessage(null),b}}else D=!1},f=function(a){E=a,D||(D=!0,J.postMessage(null))},g=function(a,b){F=y((function(){a(exports.unstable_now())}),b)},h=function(){z(F),F=-1}}function K(a,b){var c=a.length;a.push(b);a:for(;;){var d=Math.floor((c-1)/2),e=a[d];if(!(void 0!==e&&0<L(e,b)))break a;a[d]=b,a[c]=e,c=d}}function M(a){return void 0===(a=a[0])?null:a}function N(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>L(n,c))void 0!==r&&0>L(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else{if(!(void 0!==r&&0>L(r,c)))break a;a[d]=r,a[v]=c,d=v}}}return b}return null}function L(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var O=[],P=[],Q=1,R=null,S=3,T=!1,U=!1,V=!1;function W(a){for(var b=M(P);null!==b;){if(null===b.callback)N(P);else{if(!(b.startTime<=a))break;N(P),b.sortIndex=b.expirationTime,K(O,b)}b=M(P)}}function X(a){if(V=!1,W(a),!U)if(null!==M(O))U=!0,f(Y);else{var b=M(P);null!==b&&g(X,b.startTime-a)}}function Y(a,b){U=!1,V&&(V=!1,h()),T=!0;var c=S;try{for(W(b),R=M(O);null!==R&&(!(R.expirationTime>b)||a&&!k());){var d=R.callback;if(null!==d){R.callback=null,S=R.priorityLevel;var e=d(R.expirationTime<=b);b=exports.unstable_now(),"function"==typeof e?R.callback=e:R===M(O)&&N(O),W(b)}else N(O);R=M(O)}if(null!==R)var m=!0;else{var n=M(P);null!==n&&g(X,n.startTime-b),m=!1}return m}finally{R=null,S=c,T=!1}}function Z(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var aa=l;exports.unstable_ImmediatePriority=1,exports.unstable_UserBlockingPriority=2,exports.unstable_NormalPriority=3,exports.unstable_IdlePriority=5,exports.unstable_LowPriority=4,exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=S;S=a;try{return b()}finally{S=c}},exports.unstable_next=function(a){switch(S){case 1:case 2:case 3:var b=3;break;default:b=S}var c=S;S=b;try{return a()}finally{S=c}},exports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();if("object"==typeof c&&null!==c){var e=c.delay;e="number"==typeof e&&0<e?d+e:d,c="number"==typeof c.timeout?c.timeout:Z(a)}else c=Z(a),e=d;return a={id:Q++,callback:b,priorityLevel:a,startTime:e,expirationTime:c=e+c,sortIndex:-1},e>d?(a.sortIndex=e,K(P,a),null===M(O)&&a===M(P)&&(V?h():V=!0,g(X,e-d))):(a.sortIndex=c,K(O,a),U||T||(U=!0,f(Y))),a},exports.unstable_cancelCallback=function(a){a.callback=null},exports.unstable_wrapCallback=function(a){var b=S;return function(){var c=S;S=b;try{return a.apply(this,arguments)}finally{S=c}}},exports.unstable_getCurrentPriorityLevel=function(){return S},exports.unstable_shouldYield=function(){var a=exports.unstable_now();W(a);var b=M(O);return b!==R&&null!==R&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<R.expirationTime||k()},exports.unstable_requestPaint=aa,exports.unstable_continueExecution=function(){U||T||(U=!0,f(Y))},exports.unstable_pauseExecution=function(){},exports.unstable_getFirstCallbackNode=function(){return M(O)},exports.unstable_Profiling=null},function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var entities=__webpack_require__(742),defaults={fg:"#FFF",bg:"#000",newline:!1,escapeXML:!1,stream:!1,colors:function getDefaultColors(){var colors={0:"#000",1:"#A00",2:"#0A0",3:"#A50",4:"#00A",5:"#A0A",6:"#0AA",7:"#AAA",8:"#555",9:"#F55",10:"#5F5",11:"#FF5",12:"#55F",13:"#F5F",14:"#5FF",15:"#FFF"};return range(0,5).forEach((function(red){range(0,5).forEach((function(green){range(0,5).forEach((function(blue){return function setStyleColor(red,green,blue,colors){var r=red>0?40*red+55:0,g=green>0?40*green+55:0,b=blue>0?40*blue+55:0;colors[16+36*red+6*green+blue]=function toColorHexString(ref){var results=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=ref[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var r=_step.value;results.push(toHexString(r))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return"#"+results.join("")}([r,g,b])}(red,green,blue,colors)}))}))})),range(0,23).forEach((function(gray){var c=gray+232,l=toHexString(10*gray+8);colors[c]="#"+l+l+l})),colors}()};function toHexString(num){for(var str=num.toString(16);str.length<2;)str="0"+str;return str}function generateOutput(stack,token,data,options){var result;return"text"===token?result=function pushText(text,options){if(options.escapeXML)return entities.encodeXML(text);return text}(data,options):"display"===token?result=function handleDisplay(stack,code,options){code=parseInt(code,10);var result,codeMap={"-1":function _(){return"<br/>"},0:function _(){return stack.length&&resetStyles(stack)},1:function _(){return pushTag(stack,"b")},3:function _(){return pushTag(stack,"i")},4:function _(){return pushTag(stack,"u")},8:function _(){return pushStyle(stack,"display:none")},9:function _(){return pushTag(stack,"strike")},22:function _(){return pushStyle(stack,"font-weight:normal;text-decoration:none;font-style:normal")},23:function _(){return closeTag(stack,"i")},24:function _(){return closeTag(stack,"u")},39:function _(){return pushForegroundColor(stack,options.fg)},49:function _(){return pushBackgroundColor(stack,options.bg)},53:function _(){return pushStyle(stack,"text-decoration:overline")}};codeMap[code]?result=codeMap[code]():4<code&&code<7?result=pushTag(stack,"blink"):29<code&&code<38?result=pushForegroundColor(stack,options.colors[code-30]):39<code&&code<48?result=pushBackgroundColor(stack,options.colors[code-40]):89<code&&code<98?result=pushForegroundColor(stack,options.colors[code-90+8]):99<code&&code<108&&(result=pushBackgroundColor(stack,options.colors[code-100+8]));return result}(stack,data,options):"xterm256"===token?result=pushForegroundColor(stack,options.colors[data]):"rgb"===token&&(result=function handleRgb(stack,data){var operation=+(data=data.substring(2).slice(0,-1)).substr(0,2),rgb=data.substring(5).split(";").map((function(value){return("0"+Number(value).toString(16)).substr(-2)})).join("");return pushStyle(stack,(38===operation?"color:#":"background-color:#")+rgb)}(stack,data)),result}function resetStyles(stack){var stackClone=stack.slice(0);return stack.length=0,stackClone.reverse().map((function(tag){return"</"+tag+">"})).join("")}function range(low,high){for(var results=[],j=low;j<=high;j++)results.push(j);return results}function categoryForCode(code){var result=null;return 0===(code=parseInt(code,10))?result="all":1===code?result="bold":2<code&&code<5?result="underline":4<code&&code<7?result="blink":8===code?result="hide":9===code?result="strike":29<code&&code<38||39===code||89<code&&code<98?result="foreground-color":(39<code&&code<48||49===code||99<code&&code<108)&&(result="background-color"),result}function pushTag(stack,tag,style){return style||(style=""),stack.push(tag),["<"+tag,style?' style="'+style+'"':void 0,">"].join("")}function pushStyle(stack,style){return pushTag(stack,"span",style)}function pushForegroundColor(stack,color){return pushTag(stack,"span","color:"+color)}function pushBackgroundColor(stack,color){return pushTag(stack,"span","background-color:"+color)}function closeTag(stack,style){var last;if(stack.slice(-1)[0]===style&&(last=stack.pop()),last)return"</"+style+">"}var Filter=function(){function Filter(options){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Filter),(options=options||{}).colors&&(options.colors=Object.assign({},defaults.colors,options.colors)),this.options=Object.assign({},defaults,options),this.stack=[],this.stickyStack=[]}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Filter,[{key:"toHtml",value:function toHtml(input){var _this=this;input="string"==typeof input?[input]:input;var stack=this.stack,options=this.options,buf=[];return this.stickyStack.forEach((function(element){var output=generateOutput(stack,element.token,element.data,options);output&&buf.push(output)})),function tokenize(text,options,callback){var ansiMatch=!1,ansiHandler=3;function remove(){return""}var tokens=[{pattern:/^\x08+/,sub:remove},{pattern:/^\x1b\[[012]?K/,sub:remove},{pattern:/^\x1b\[\(B/,sub:remove},{pattern:/^\x1b\[[34]8;2;\d+;\d+;\d+m/,sub:function rgb(m){return callback("rgb",m),""}},{pattern:/^\x1b\[38;5;(\d+)m/,sub:function removeXterm256(m,g1){return callback("xterm256",g1),""}},{pattern:/^\n/,sub:function newline(m){return options.newline?callback("display",-1):callback("text",m),""}},{pattern:/^\x1b\[((?:\d{1,3};?)+|)m/,sub:function ansiMess(m,g1){ansiMatch=!0,0===g1.trim().length&&(g1="0"),g1=g1.trimRight(";").split(";");var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=g1[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var g=_step2.value;callback("display",g)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return""}},{pattern:/^\x1b\[\d?J/,sub:remove},{pattern:/^\x1b\[\d{0,3};\d{0,3}f/,sub:remove},{pattern:/^\x1b\[?[\d;]{0,3}/,sub:remove},{pattern:/^([^\x1b\x08\n]+)/,sub:function realText(m){return callback("text",m),""}}];function process(handler,i){i>ansiHandler&&ansiMatch||(ansiMatch=!1,text=text.replace(handler.pattern,handler.sub))}var results1=[],length=text.length;outer:for(;length>0;){for(var i=0,o=0,len=tokens.length;o<len;i=++o){if(process(tokens[i],i),text.length!==length){length=text.length;continue outer}}if(text.length===length)break;results1.push(0),length=text.length}return results1}(input.join(""),options,(function(token,data){var output=generateOutput(stack,token,data,options);output&&buf.push(output),options.stream&&(_this.stickyStack=function updateStickyStack(stickyStack,token,data){return"text"!==token&&(stickyStack=stickyStack.filter(function notCategory(category){return function(e){return(null===category||e.category!==category)&&"all"!==category}}(categoryForCode(data)))).push({token:token,data:data,category:categoryForCode(data)}),stickyStack}(_this.stickyStack,token,data))})),stack.length&&buf.push(resetStyles(stack)),buf.join("")}}]),Filter}();module.exports=Filter},function(module,exports,__webpack_require__){var encode=__webpack_require__(743),decode=__webpack_require__(744);exports.decode=function(data,level){return(!level||level<=0?decode.XML:decode.HTML)(data)},exports.decodeStrict=function(data,level){return(!level||level<=0?decode.XML:decode.HTMLStrict)(data)},exports.encode=function(data,level){return(!level||level<=0?encode.XML:encode.HTML)(data)},exports.encodeXML=encode.XML,exports.encodeHTML4=exports.encodeHTML5=exports.encodeHTML=encode.HTML,exports.decodeXML=exports.decodeXMLStrict=decode.XML,exports.decodeHTML4=exports.decodeHTML5=exports.decodeHTML=decode.HTML,exports.decodeHTML4Strict=exports.decodeHTML5Strict=exports.decodeHTMLStrict=decode.HTMLStrict,exports.escape=encode.escape},function(module,exports,__webpack_require__){var inverseXML=getInverseObj(__webpack_require__(415)),xmlReplacer=getInverseReplacer(inverseXML);exports.XML=getInverse(inverseXML,xmlReplacer);var inverseHTML=getInverseObj(__webpack_require__(416)),htmlReplacer=getInverseReplacer(inverseHTML);function getInverseObj(obj){return Object.keys(obj).sort().reduce((function(inverse,name){return inverse[obj[name]]="&"+name+";",inverse}),{})}function getInverseReplacer(inverse){var single=[],multiple=[];return Object.keys(inverse).forEach((function(k){1===k.length?single.push("\\"+k):multiple.push(k)})),multiple.unshift("["+single.join("")+"]"),new RegExp(multiple.join("|"),"g")}exports.HTML=getInverse(inverseHTML,htmlReplacer);var re_nonASCII=/[^\0-\x7F]/g,re_astralSymbols=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function singleCharReplacer(c){return"&#x"+c.charCodeAt(0).toString(16).toUpperCase()+";"}function astralReplacer(c){return"&#x"+(1024*(c.charCodeAt(0)-55296)+c.charCodeAt(1)-56320+65536).toString(16).toUpperCase()+";"}function getInverse(inverse,re){function func(name){return inverse[name]}return function(data){return data.replace(re,func).replace(re_astralSymbols,astralReplacer).replace(re_nonASCII,singleCharReplacer)}}var re_xmlChars=getInverseReplacer(inverseXML);exports.escape=function escapeXML(data){return data.replace(re_xmlChars,singleCharReplacer).replace(re_astralSymbols,astralReplacer).replace(re_nonASCII,singleCharReplacer)}},function(module,exports,__webpack_require__){var entityMap=__webpack_require__(416),legacyMap=__webpack_require__(745),xmlMap=__webpack_require__(415),decodeCodePoint=__webpack_require__(746),decodeXMLStrict=getStrictDecoder(xmlMap),decodeHTMLStrict=getStrictDecoder(entityMap);function getStrictDecoder(map){var keys=Object.keys(map).join("|"),replace=getReplacer(map),re=new RegExp("&(?:"+(keys+="|#[xX][\\da-fA-F]+|#\\d+")+");","g");return function(str){return String(str).replace(re,replace)}}var decodeHTML=function(){for(var legacy=Object.keys(legacyMap).sort(sorter),keys=Object.keys(entityMap).sort(sorter),i=0,j=0;i<keys.length;i++)legacy[j]===keys[i]?(keys[i]+=";?",j++):keys[i]+=";";var re=new RegExp("&(?:"+keys.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),replace=getReplacer(entityMap);function replacer(str){return";"!==str.substr(-1)&&(str+=";"),replace(str)}return function(str){return String(str).replace(re,replacer)}}();function sorter(a,b){return a<b?1:-1}function getReplacer(map){return function replace(str){return"#"===str.charAt(1)?"X"===str.charAt(2)||"x"===str.charAt(2)?decodeCodePoint(parseInt(str.substr(3),16)):decodeCodePoint(parseInt(str.substr(2),10)):map[str.slice(1,-1)]}}module.exports={XML:decodeXMLStrict,HTML:decodeHTML,HTMLStrict:decodeHTMLStrict}},function(module){module.exports=JSON.parse('{"Aacute":"","aacute":"","Acirc":"","acirc":"","acute":"","AElig":"","aelig":"","Agrave":"","agrave":"","amp":"&","AMP":"&","Aring":"","aring":"","Atilde":"","atilde":"","Auml":"","auml":"","brvbar":"","Ccedil":"","ccedil":"","cedil":"","cent":"","copy":"","COPY":"","curren":"","deg":"","divide":"","Eacute":"","eacute":"","Ecirc":"","ecirc":"","Egrave":"","egrave":"","ETH":"","eth":"","Euml":"","euml":"","frac12":"","frac14":"","frac34":"","gt":">","GT":">","Iacute":"","iacute":"","Icirc":"","icirc":"","iexcl":"","Igrave":"","igrave":"","iquest":"","Iuml":"","iuml":"","laquo":"","lt":"<","LT":"<","macr":"","micro":"","middot":"","nbsp":"","not":"","Ntilde":"","ntilde":"","Oacute":"","oacute":"","Ocirc":"","ocirc":"","Ograve":"","ograve":"","ordf":"","ordm":"","Oslash":"","oslash":"","Otilde":"","otilde":"","Ouml":"","ouml":"","para":"","plusmn":"","pound":"","quot":"\\"","QUOT":"\\"","raquo":"","reg":"","REG":"","sect":"","shy":"","sup1":"","sup2":"","sup3":"","szlig":"","THORN":"","thorn":"","times":"","Uacute":"","uacute":"","Ucirc":"","ucirc":"","Ugrave":"","ugrave":"","uml":"","Uuml":"","uuml":"","Yacute":"","yacute":"","yen":"","yuml":""}')},function(module,exports,__webpack_require__){var decodeMap=__webpack_require__(747);module.exports=function decodeCodePoint(codePoint){if(codePoint>=55296&&codePoint<=57343||codePoint>1114111)return"";codePoint in decodeMap&&(codePoint=decodeMap[codePoint]);var output="";codePoint>65535&&(codePoint-=65536,output+=String.fromCharCode(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint);return output+=String.fromCharCode(codePoint)}},function(module){module.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},function(module,exports,__webpack_require__){"use strict";__webpack_require__(86),__webpack_require__(99),__webpack_require__(100),__webpack_require__(73),__webpack_require__(87),__webpack_require__(181),__webpack_require__(133),__webpack_require__(89),__webpack_require__(183),__webpack_require__(378),__webpack_require__(749),__webpack_require__(752),__webpack_require__(27),__webpack_require__(78),__webpack_require__(218),__webpack_require__(184),__webpack_require__(102),__webpack_require__(88),__webpack_require__(103),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function createChannel(_ref2){var page=_ref2.page,transport=new PostmsgTransport({page:page});return new _channels.default({transport:transport})},exports.PostmsgTransport=exports.KEY=void 0;var _global=__webpack_require__(101),_channels=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(375)),_clientLogger=__webpack_require__(148),_telejson=__webpack_require__(754);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var KEY="storybook-channel";exports.KEY=KEY;var PostmsgTransport=function(){function PostmsgTransport(config){if(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PostmsgTransport),this.config=config,this.buffer=void 0,this.handler=void 0,this.connected=void 0,this.buffer=[],this.handler=null,_global.window.addEventListener("message",this.handleEvent.bind(this),!1),"manager"!==config.page&&"preview"!==config.page)throw new Error('postmsg-channel: "config.page" cannot be "'.concat(config.page,'"'))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PostmsgTransport,[{key:"setHandler",value:function setHandler(handler){var _this=this;this.handler=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];handler.apply(_this,args),!_this.connected&&_this.getWindow()&&(_this.flush(),_this.connected=!0)}}},{key:"send",value:function send(event,options){var _this2=this,iframeWindow=this.getWindow();if(!iframeWindow)return new Promise((function(resolve,reject){_this2.buffer.push({event:event,resolve:resolve,reject:reject})}));var depth=15,allowFunction=!0;options&&"boolean"==typeof options.allowFunction&&(allowFunction=options.allowFunction),options&&Number.isInteger(options.depth)&&(depth=options.depth);var data=(0,_telejson.stringify)({key:KEY,event:event},{maxDepth:depth,allowFunction:allowFunction});return iframeWindow.postMessage(data,"*"),Promise.resolve(null)}},{key:"flush",value:function flush(){var _this3=this,buffer=this.buffer;this.buffer=[],buffer.forEach((function(item){_this3.send(item.event).then(item.resolve).catch(item.reject)}))}},{key:"getWindow",value:function getWindow(){if("manager"===this.config.page){var iframe=_global.document.getElementById("storybook-preview-iframe");return iframe?iframe.contentWindow:null}return _global.window.parent}},{key:"handleEvent",value:function handleEvent(rawEvent){try{var data=rawEvent.data,_ref="string"==typeof data&&(0,_telejson.isJSON)(data)?(0,_telejson.parse)(data):data,key=_ref.key,event=_ref.event;key===KEY&&(_clientLogger.logger.debug.apply(_clientLogger.logger,["message arrived at ".concat(this.config.page),event.type].concat(_toConsumableArray(event.args))),this.handler(event))}catch(error){_clientLogger.logger.error(error)}}}]),PostmsgTransport}();exports.PostmsgTransport=PostmsgTransport},function(module,exports,__webpack_require__){"use strict";var DESCRIPTORS=__webpack_require__(49),global=__webpack_require__(29),isForced=__webpack_require__(212),redefine=__webpack_require__(75),has=__webpack_require__(60),classof=__webpack_require__(98),inheritIfRequired=__webpack_require__(381),toPrimitive=__webpack_require__(172),fails=__webpack_require__(33),create=__webpack_require__(146),getOwnPropertyNames=__webpack_require__(210).f,getOwnPropertyDescriptor=__webpack_require__(145).f,defineProperty=__webpack_require__(61).f,trim=__webpack_require__(750).trim,NativeNumber=global.Number,NumberPrototype=NativeNumber.prototype,BROKEN_CLASSOF="Number"==classof(create(NumberPrototype)),toNumber=function(argument){var first,third,radix,maxCode,digits,length,index,code,it=toPrimitive(argument,!1);if("string"==typeof it&&it.length>2)if(43===(first=(it=trim(it)).charCodeAt(0))||45===first){if(88===(third=it.charCodeAt(2))||120===third)return NaN}else if(48===first){switch(it.charCodeAt(1)){case 66:case 98:radix=2,maxCode=49;break;case 79:case 111:radix=8,maxCode=55;break;default:return+it}for(length=(digits=it.slice(2)).length,index=0;index<length;index++)if((code=digits.charCodeAt(index))<48||code>maxCode)return NaN;return parseInt(digits,radix)}return+it};if(isForced("Number",!NativeNumber(" 0o1")||!NativeNumber("0b1")||NativeNumber("+0x1"))){for(var key,NumberWrapper=function Number(value){var it=arguments.length<1?0:value,dummy=this;return dummy instanceof NumberWrapper&&(BROKEN_CLASSOF?fails((function(){NumberPrototype.valueOf.call(dummy)})):"Number"!=classof(dummy))?inheritIfRequired(new NativeNumber(toNumber(it)),dummy,NumberWrapper):toNumber(it)},keys=DESCRIPTORS?getOwnPropertyNames(NativeNumber):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;keys.length>j;j++)has(NativeNumber,key=keys[j])&&!has(NumberWrapper,key)&&defineProperty(NumberWrapper,key,getOwnPropertyDescriptor(NativeNumber,key));NumberWrapper.prototype=NumberPrototype,NumberPrototype.constructor=NumberWrapper,redefine(global,"Number",NumberWrapper)}},function(module,exports,__webpack_require__){var requireObjectCoercible=__webpack_require__(85),whitespace="["+__webpack_require__(751)+"]",ltrim=RegExp("^"+whitespace+whitespace+"*"),rtrim=RegExp(whitespace+whitespace+"*$"),createMethod=function(TYPE){return function($this){var string=String(requireObjectCoercible($this));return 1&TYPE&&(string=string.replace(ltrim,"")),2&TYPE&&(string=string.replace(rtrim,"")),string}};module.exports={start:createMethod(1),end:createMethod(2),trim:createMethod(3)}},function(module,exports){module.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(module,exports,__webpack_require__){__webpack_require__(19)({target:"Number",stat:!0},{isInteger:__webpack_require__(753)})},function(module,exports,__webpack_require__){var isObject=__webpack_require__(40),floor=Math.floor;module.exports=function isInteger(it){return!isObject(it)&&isFinite(it)&&floor(it)===it}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=exports.stringify=exports.isJSON=exports.reviver=exports.replacer=void 0;var _isRegex=_interopRequireDefault(__webpack_require__(337)),_isFunction=_interopRequireDefault(__webpack_require__(755)),_isSymbol=_interopRequireDefault(__webpack_require__(324)),_isobject=_interopRequireDefault(__webpack_require__(756)),_get=_interopRequireDefault(__webpack_require__(406)),_memoizerific=_interopRequireDefault(__webpack_require__(297));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var isObject=_isobject.default,removeCodeComments=function removeCodeComments(code){var inQuoteChar=null,inBlockComment=!1,inLineComment=!1,inRegexLiteral=!1,newCode="";if(code.indexOf("//")>=0||code.indexOf("/*")>=0)for(var i=0;i<code.length;i+=1)inQuoteChar||inBlockComment||inLineComment||inRegexLiteral?(inQuoteChar&&(code[i]===inQuoteChar&&"\\"!==code[i-1]||"\n"===code[i]&&"`"!==inQuoteChar)&&(inQuoteChar=null),inRegexLiteral&&("/"===code[i]&&"\\"!==code[i-1]||"\n"===code[i])&&(inRegexLiteral=!1),inBlockComment&&"/"===code[i-1]&&"*"===code[i-2]&&(inBlockComment=!1),inLineComment&&"\n"===code[i]&&(inLineComment=!1)):'"'===code[i]||"'"===code[i]||"`"===code[i]?inQuoteChar=code[i]:"/"===code[i]&&"*"===code[i+1]?inBlockComment=!0:"/"===code[i]&&"/"===code[i+1]?inLineComment=!0:"/"===code[i]&&"/"!==code[i+1]&&(inRegexLiteral=!0),inBlockComment||inLineComment||(newCode+=code[i]);else newCode=code;return newCode},cleanCode=(0,_memoizerific.default)(1e4)((function(code){return removeCodeComments(code).replace(/\n\s*/g,"").trim()})),dateFormat=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z$/,replacer=function replacer(options){var objects,stack,keys;return function replace(key,value){if(""===key)return keys=["root"],objects=[{keys:"root",value:value}],stack=[],value;for(;stack.length&&this!==stack[0];)stack.shift(),keys.pop();if((0,_isRegex.default)(value)){if(!options.allowRegExp)return;return"_regexp_".concat(value.flags,"|").concat(value.source)}if((0,_isFunction.default)(value)){if(!options.allowFunction)return;var name=value.name,stringified=value.toString();return stringified.match(/(\[native code\]|WEBPACK_IMPORTED_MODULE|__webpack_exports__|__webpack_require__)/)?"_function_".concat(name,"|").concat(function(){}.toString()):"_function_".concat(name,"|").concat(cleanCode(stringified))}if((0,_isSymbol.default)(value)){if(!options.allowSymbol)return;return"_symbol_".concat(value.toString().slice(7,-1))}if("string"==typeof value&&dateFormat.test(value)){if(!options.allowDate)return;return"_date_".concat(value)}if(void 0===value){if(!options.allowUndefined)return;return"_undefined_"}if("number"==typeof value)return value===-1/0?"_-Infinity_":value===1/0?"_Infinity_":Number.isNaN(value)?"_NaN_":value;if("string"==typeof value)return value;if("boolean"==typeof value)return value;if(stack.length>=options.maxDepth)return Array.isArray(value)?"[Array(".concat(value.length,")]"):"[Object]";var found=objects.find((function(o){return o.value===value}));if(!found){if(value&&isObject(value)&&value.constructor&&value.constructor.name&&"Object"!==value.constructor.name){if(!options.allowClass)return;try{Object.assign(value,{"_constructor-name_":value.constructor.name})}catch(e){}}return keys.push(key),stack.unshift(value),objects.push({keys:keys.join("."),value:value}),value}return"_duplicate_".concat(found.keys)}};exports.replacer=replacer;var reviver=function reviver(){var refs=[],root;return function revive(key,value){if(""===key&&(root=value,refs.forEach((function(_ref){var target=_ref.target,container=_ref.container,replacement=_ref.replacement;container[target]="root"===replacement?root:(0,_get.default)(root,replacement.replace("root.",""))}))),"_constructor-name_"===key)return value;if(isObject(value)&&value["_constructor-name_"]){var name=value["_constructor-name_"];if("Object"!==name){var Fn=new Function("return function ".concat(name,"(){}"))();Object.setPrototypeOf(value,new Fn)}return delete value["_constructor-name_"],value}if("string"==typeof value&&value.startsWith("_function_")){var _ref2=value.match(/_function_([^|]*)\|(.*)/)||[],_ref3=_slicedToArray(_ref2,3),_name=_ref3[1],source=_ref3[2],result=function result(){var f=eval("(".concat(source,")"));return f.apply(void 0,arguments)};return Object.defineProperty(result,"toString",{value:function value(){return source}}),Object.defineProperty(result,"name",{value:_name}),result}if("string"==typeof value&&value.startsWith("_regexp_")){var _ref4=value.match(/_regexp_([^|]*)\|(.*)/)||[],_ref5=_slicedToArray(_ref4,3),flags=_ref5[1],_source=_ref5[2];return new RegExp(_source,flags)}return"string"==typeof value&&value.startsWith("_date_")?new Date(value.replace("_date_","")):"string"==typeof value&&value.startsWith("_duplicate_")?(refs.push({target:key,container:this,replacement:value.replace("_duplicate_","")}),null):"string"==typeof value&&value.startsWith("_symbol_")?Symbol(value.replace("_symbol_","")):"string"==typeof value&&"_-Infinity_"===value?-1/0:"string"==typeof value&&"_Infinity_"===value?1/0:"string"==typeof value&&"_NaN_"===value?NaN:value}};exports.reviver=reviver;var isJSON=function isJSON(input){return input.match(/^[\[\{\"\}].*[\]\}\"]$/)};exports.isJSON=isJSON;var defaultOptions={maxDepth:10,space:void 0,allowFunction:!0,allowRegExp:!0,allowDate:!0,allowClass:!0,allowUndefined:!0,allowSymbol:!0},stringify=function stringify(data){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},mergedOptions=Object.assign({},defaultOptions,options);return JSON.stringify(data,replacer(mergedOptions),options.space)};exports.stringify=stringify;var mutator=function mutator(){var mutated=[];return function mutateUndefined(value){isObject(value)&&Object.entries(value).forEach((function(_ref6){var _ref7=_slicedToArray(_ref6,2),k=_ref7[0],v=_ref7[1];"_undefined_"===v?value[k]=void 0:mutated.includes(v)||(mutated.push(v),mutateUndefined(v))})),Array.isArray(value)&&value.forEach((function(v){mutated.push(v),mutateUndefined(v)}))}},parse=function parse(data){var result=JSON.parse(data,reviver());return mutator()(result),result};exports.parse=parse},function(module,exports){module.exports=function isFunction(fn){var string=toString.call(fn);return"[object Function]"===string||"function"==typeof fn&&"[object RegExp]"!==string||"undefined"!=typeof window&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)};var toString=Object.prototype.toString},function(module,__webpack_exports__,__webpack_require__){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function isObject(val){return null!=val&&"object"==typeof val&&!1===Array.isArray(val)}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return isObject}))},function(module,exports,__webpack_require__){"use strict";__webpack_require__(86),__webpack_require__(73),__webpack_require__(412),__webpack_require__(147),__webpack_require__(27),__webpack_require__(119),__webpack_require__(149),__webpack_require__(226),__webpack_require__(294),Object.defineProperty(exports,"__esModule",{value:!0}),exports.pathToId=pathToId,exports.initializePath=exports.parseQueryParameters=exports.getIdFromLegacyQuery=exports.setPath=void 0;var _global=__webpack_require__(101),_qs=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(295)),_utils=__webpack_require__(224);function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function pathToId(path){var match=(path||"").match(/^\/story\/(.+)/);if(!match)throw new Error("Invalid path '".concat(path,"',  must start with '/story/'"));return match[1]}var setPath=function setPath(_ref){var storyId=_ref.storyId,viewMode=_ref.viewMode,_qs$parse=_qs.default.parse(_global.document.location.search,{ignoreQueryPrefix:!0}),rest=(_qs$parse.path,_qs$parse.selectedKind,_qs$parse.selectedStory,_objectWithoutProperties(_qs$parse,["path","selectedKind","selectedStory"])),newPath="".concat(_global.document.location.pathname,"?").concat(_qs.default.stringify(Object.assign({},rest,{id:storyId,viewMode:viewMode})));_global.history.replaceState({},"",newPath)};exports.setPath=setPath;var getIdFromLegacyQuery=function getIdFromLegacyQuery(_ref2){var path=_ref2.path,selectedKind=_ref2.selectedKind,selectedStory=_ref2.selectedStory;return path&&pathToId(path)||selectedKind&&selectedStory&&(0,_utils.toId)(selectedKind,selectedStory)};exports.getIdFromLegacyQuery=getIdFromLegacyQuery;exports.parseQueryParameters=function parseQueryParameters(search){return _qs.default.parse(search,{ignoreQueryPrefix:!0}).id};exports.initializePath=function initializePath(){var query=_qs.default.parse(_global.document.location.search,{ignoreQueryPrefix:!0}),storyId=query.id,viewMode=query.viewMode;return storyId||(storyId=getIdFromLegacyQuery(query))&&setPath({storyId:storyId,viewMode:viewMode}),{storyId:storyId,viewMode:viewMode}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(27),Object.defineProperty(exports,"__esModule",{value:!0}),exports.NoDocs=void 0;var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(8));var _ref=_react.default.createElement("div",{style:{fontSize:"14px",letterSpacing:"0.2px",margin:"10px 0"},className:"sb-nodocs sb-wrapper"},_react.default.createElement("div",{style:{margin:"auto",padding:"30px",borderRadius:"10px",background:"rgba(0,0,0,0.03)"}},_react.default.createElement("h1",{style:{textAlign:"center"}},"No Docs"),_react.default.createElement("p",null,"Sorry, but there are no docs for the selected story. To add them, set the story's"," ",_react.default.createElement("code",null,"docs")," parameter. If you think this is an error:"),_react.default.createElement("ul",null,_react.default.createElement("li",null,"Please check the story definition."),_react.default.createElement("li",null,"Please check the Storybook config."),_react.default.createElement("li",null,"Try reloading the page.")),_react.default.createElement("p",null,"If the problem persists, check the browser console, or the terminal you've run Storybook from."))),NoDocs=function NoDocs(){return _ref};exports.NoDocs=NoDocs,NoDocs.displayName="NoDocs"},function(module,exports,__webpack_require__){"use strict";var _global=__webpack_require__(101);if(_global.window&&_global.window.parent!==_global.window)try{_global.window.__REACT_DEVTOOLS_GLOBAL_HOOK__=_global.window.parent.__REACT_DEVTOOLS_GLOBAL_HOOK__}catch(error){}_global.window&&(_global.window.STORYBOOK_ENV="react")},function(module,exports,__webpack_require__){"use strict";__webpack_require__(86),__webpack_require__(99),__webpack_require__(100),__webpack_require__(73),__webpack_require__(89),__webpack_require__(409),__webpack_require__(27),__webpack_require__(288),__webpack_require__(410),__webpack_require__(78),__webpack_require__(218),__webpack_require__(102),__webpack_require__(103),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function renderMain(_x){return _renderMain.apply(this,arguments)},__webpack_require__(265);var _global=__webpack_require__(101),_react=_interopRequireDefault(__webpack_require__(8)),_reactDom=_interopRequireDefault(__webpack_require__(414));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}var rootEl=_global.document?_global.document.getElementById("root"):null,render=function render(node,el){return new Promise((function(resolve){_reactDom.default.render(Object({NODE_ENV:"production",NODE_PATH:"",PUBLIC_URL:"."}).STORYBOOK_EXAMPLE_APP?_react.default.createElement(_react.default.StrictMode,null,node):node,el,resolve)}))},ErrorBoundary=function(_React$Component){function ErrorBoundary(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ErrorBoundary);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ErrorBoundary)).call.apply(_getPrototypeOf2,[this].concat(args)))).state={hasError:!1},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ErrorBoundary,_React$Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ErrorBoundary,[{key:"componentDidMount",value:function componentDidMount(){var hasError=this.state.hasError,showMain=this.props.showMain;hasError||showMain()}},{key:"componentDidCatch",value:function componentDidCatch(err){(0,this.props.showException)(err)}},{key:"render",value:function render(){var hasError=this.state.hasError,children=this.props.children;return hasError?null:children}}],[{key:"getDerivedStateFromError",value:function getDerivedStateFromError(){return{hasError:!0}}}]),ErrorBoundary}(_react.default.Component);function _renderMain(){return(_renderMain=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(_ref){var StoryFn,showMain,showException,forceRender,element;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return StoryFn=_ref.storyFn,showMain=_ref.showMain,showException=_ref.showException,forceRender=_ref.forceRender,element=_react.default.createElement(ErrorBoundary,{showMain:showMain,showException:showException},_react.default.createElement(StoryFn,null)),forceRender||_reactDom.default.unmountComponentAtNode(rootEl),_context.next=5,render(element,rootEl);case 5:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}},,,function(module,exports,__webpack_require__){var runtime=function(exports){"use strict";var undefined,Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting)throw new Error("Generator is already running");if(state===GenStateCompleted){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if(state===GenStateSuspendedStart)throw state=GenStateCompleted,context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?GenStateCompleted:GenStateSuspendedYield,record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state=GenStateCompleted,context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var GenStateSuspendedStart="suspendedStart",GenStateSuspendedYield="suspendedYield",GenStateExecuting="executing",GenStateCompleted="completed",ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){prototype[method]=function(arg){return this._invoke(method,arg)}}))}function AsyncIterator(generator){var previousPromise;this._invoke=function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise((function(resolve,reject){!function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?Promise.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):Promise.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}return GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction",exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,toStringTagSymbol in genFun||(genFun[toStringTagSymbol]="GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),Gp[toStringTagSymbol]="Generator",Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel}},exports}(module.exports);try{regeneratorRuntime=runtime}catch(accidentalStrictMode){Function("r","regeneratorRuntime = r")(runtime)}},function(module,exports,__webpack_require__){var SphericalMercator=function(){var cache={},D2R=Math.PI/180,R2D=180/Math.PI,A=6378137,MAXEXTENT=20037508.342789244;function isFloat(n){return Number(n)===n&&n%1!=0}function SphericalMercator(options){if(options=options||{},this.size=options.size||256,!cache[this.size]){var size=this.size,c=cache[this.size]={};c.Bc=[],c.Cc=[],c.zc=[],c.Ac=[];for(var d=0;d<30;d++)c.Bc.push(size/360),c.Cc.push(size/(2*Math.PI)),c.zc.push(size/2),c.Ac.push(size),size*=2}this.Bc=cache[this.size].Bc,this.Cc=cache[this.size].Cc,this.zc=cache[this.size].zc,this.Ac=cache[this.size].Ac}return SphericalMercator.prototype.px=function(ll,zoom){if(isFloat(zoom)){var size=this.size*Math.pow(2,zoom),d=size/2,bc=size/360,cc=size/(2*Math.PI),ac=size,f=Math.min(Math.max(Math.sin(D2R*ll[1]),-.9999),.9999);return(x=d+ll[0]*bc)>ac&&(x=ac),(y=d+.5*Math.log((1+f)/(1-f))*-cc)>ac&&(y=ac),[x,y]}d=this.zc[zoom],f=Math.min(Math.max(Math.sin(D2R*ll[1]),-.9999),.9999);var x=Math.round(d+ll[0]*this.Bc[zoom]),y=Math.round(d+.5*Math.log((1+f)/(1-f))*-this.Cc[zoom]);return x>this.Ac[zoom]&&(x=this.Ac[zoom]),y>this.Ac[zoom]&&(y=this.Ac[zoom]),[x,y]},SphericalMercator.prototype.ll=function(px,zoom){if(isFloat(zoom)){var size=this.size*Math.pow(2,zoom),bc=size/360,cc=size/(2*Math.PI),zc=size/2,g=(px[1]-zc)/-cc;return[(px[0]-zc)/bc,R2D*(2*Math.atan(Math.exp(g))-.5*Math.PI)]}g=(px[1]-this.zc[zoom])/-this.Cc[zoom];return[(px[0]-this.zc[zoom])/this.Bc[zoom],R2D*(2*Math.atan(Math.exp(g))-.5*Math.PI)]},SphericalMercator.prototype.bbox=function(x,y,zoom,tms_style,srs){tms_style&&(y=Math.pow(2,zoom)-1-y);var ll=[x*this.size,(+y+1)*this.size],ur=[(+x+1)*this.size,y*this.size],bbox=this.ll(ll,zoom).concat(this.ll(ur,zoom));return"900913"===srs?this.convert(bbox,"900913"):bbox},SphericalMercator.prototype.xyz=function(bbox,zoom,tms_style,srs){"900913"===srs&&(bbox=this.convert(bbox,"WGS84"));var ll=[bbox[0],bbox[1]],ur=[bbox[2],bbox[3]],px_ll=this.px(ll,zoom),px_ur=this.px(ur,zoom),x=[Math.floor(px_ll[0]/this.size),Math.floor((px_ur[0]-1)/this.size)],y=[Math.floor(px_ur[1]/this.size),Math.floor((px_ll[1]-1)/this.size)],bounds={minX:Math.min.apply(Math,x)<0?0:Math.min.apply(Math,x),minY:Math.min.apply(Math,y)<0?0:Math.min.apply(Math,y),maxX:Math.max.apply(Math,x),maxY:Math.max.apply(Math,y)};if(tms_style){var tms={minY:Math.pow(2,zoom)-1-bounds.maxY,maxY:Math.pow(2,zoom)-1-bounds.minY};bounds.minY=tms.minY,bounds.maxY=tms.maxY}return bounds},SphericalMercator.prototype.convert=function(bbox,to){return"900913"===to?this.forward(bbox.slice(0,2)).concat(this.forward(bbox.slice(2,4))):this.inverse(bbox.slice(0,2)).concat(this.inverse(bbox.slice(2,4)))},SphericalMercator.prototype.forward=function(ll){var xy=[A*ll[0]*D2R,A*Math.log(Math.tan(.25*Math.PI+.5*ll[1]*D2R))];return xy[0]>MAXEXTENT&&(xy[0]=MAXEXTENT),xy[0]<-MAXEXTENT&&(xy[0]=-MAXEXTENT),xy[1]>MAXEXTENT&&(xy[1]=MAXEXTENT),xy[1]<-MAXEXTENT&&(xy[1]=-MAXEXTENT),xy},SphericalMercator.prototype.inverse=function(xy){return[xy[0]*R2D/A,(.5*Math.PI-2*Math.atan(Math.exp(-xy[1]/A)))*R2D]},SphericalMercator}();module.exports=SphericalMercator},function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(766);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},function(module,exports,__webpack_require__){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},,,function(module,exports,__webpack_require__){var f;module.exports=((f=function(){function e(a){return c.appendChild(a.dom),a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?"block":"none";l=a}var l=0,c=document.createElement("div");c.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",c.addEventListener("click",(function(a){a.preventDefault(),u(++l%c.children.length)}),!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel("FPS","#0ff","#002")),h=e(new f.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var t=e(new f.Panel("MB","#f08","#201"));return u(0),{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();if(h.update(c-k,200),c>g+1e3&&(r.update(1e3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}}).Panel=function(e,f,l){var c=1/0,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement("canvas");q.width=r,q.height=h,q.style.cssText="width:80px;height:48px";var b=q.getContext("2d");return b.font="bold "+9*a+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=l,b.fillRect(0,0,r,h),b.fillStyle=f,b.fillText(e,t,v),b.fillRect(d,m,n,p),b.fillStyle=l,b.globalAlpha=.9,b.fillRect(d,m,n,p),{dom:q,update:function(h,w){c=Math.min(c,h),k=Math.max(k,h),b.fillStyle=l,b.globalAlpha=1,b.fillRect(0,0,r,m),b.fillStyle=f,b.fillText(g(h)+" "+e+" ("+g(c)+"-"+g(k)+")",t,v),b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p),b.fillRect(d+n-a,m,a,p),b.fillStyle=l,b.globalAlpha=.9,b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}},f)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject=function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["",""],["",""]);var TemplateTag_TemplateTag=function(){function TemplateTag(){for(var _this=this,_len=arguments.length,transformers=Array(_len),_key=0;_key<_len;_key++)transformers[_key]=arguments[_key];return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TemplateTag),this.tag=function(strings){for(var _len2=arguments.length,expressions=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)expressions[_key2-1]=arguments[_key2];return"function"==typeof strings?_this.interimTag.bind(_this,strings):"string"==typeof strings?_this.transformEndResult(strings):(strings=strings.map(_this.transformString.bind(_this)),_this.transformEndResult(strings.reduce(_this.processSubstitutions.bind(_this,expressions))))},transformers.length>0&&Array.isArray(transformers[0])&&(transformers=transformers[0]),this.transformers=transformers.map((function(transformer){return"function"==typeof transformer?transformer():transformer})),this.tag}return _createClass(TemplateTag,[{key:"interimTag",value:function interimTag(previousTag,template){for(var _len3=arguments.length,substitutions=Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++)substitutions[_key3-2]=arguments[_key3];return this.tag(_templateObject,previousTag.apply(void 0,[template].concat(substitutions)))}},{key:"processSubstitutions",value:function processSubstitutions(substitutions,resultSoFar,remainingPart){var substitution=this.transformSubstitution(substitutions.shift(),resultSoFar);return"".concat(resultSoFar,substitution,remainingPart)}},{key:"transformString",value:function transformString(str){return this.transformers.reduce((function cb(res,transform){return transform.onString?transform.onString(res):res}),str)}},{key:"transformSubstitution",value:function transformSubstitution(substitution,resultSoFar){return this.transformers.reduce((function cb(res,transform){return transform.onSubstitution?transform.onSubstitution(res,resultSoFar):res}),substitution)}},{key:"transformEndResult",value:function transformEndResult(endResult){return this.transformers.reduce((function cb(res,transform){return transform.onEndResult?transform.onEndResult(res):res}),endResult)}}]),TemplateTag}(),trimResultTransformer_trimResultTransformer=function trimResultTransformer(){var side=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{onEndResult:function onEndResult(endResult){if(""===side)return endResult.trim();if("start"===(side=side.toLowerCase())||"left"===side)return endResult.replace(/^\s*/,"");if("end"===side||"right"===side)return endResult.replace(/\s*$/,"");throw new Error("Side not supported: "+side)}}};function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var stripIndentTransformer_stripIndentTransformer=function stripIndentTransformer(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";return{onEndResult:function onEndResult(endResult){if("initial"===type){var match=endResult.match(/^[^\S\n]*(?=\S)/gm),indent=match&&Math.min.apply(Math,_toConsumableArray(match.map((function(el){return el.length}))));if(indent){var regexp=new RegExp("^.{"+indent+"}","gm");return endResult.replace(regexp,"")}return endResult}if("all"===type)return endResult.replace(/^[^\S\n]+/gm,"");throw new Error("Unknown type: "+type)}}},replaceResultTransformer_replaceResultTransformer=function replaceResultTransformer(replaceWhat,replaceWith){return{onEndResult:function onEndResult(endResult){if(null==replaceWhat||null==replaceWith)throw new Error("replaceResultTransformer requires at least 2 arguments.");return endResult.replace(replaceWhat,replaceWith)}}},replaceSubstitutionTransformer_replaceSubstitutionTransformer=function replaceSubstitutionTransformer(replaceWhat,replaceWith){return{onSubstitution:function onSubstitution(substitution,resultSoFar){if(null==replaceWhat||null==replaceWith)throw new Error("replaceSubstitutionTransformer requires at least 2 arguments.");return null==substitution?substitution:substitution.toString().replace(replaceWhat,replaceWith)}}},replaceStringTransformer_replaceStringTransformer=function replaceStringTransformer(replaceWhat,replaceWith){return{onString:function onString(str){if(null==replaceWhat||null==replaceWith)throw new Error("replaceStringTransformer requires at least 2 arguments.");return str.replace(replaceWhat,replaceWith)}}},defaults={separator:"",conjunction:"",serial:!1},inlineArrayTransformer_inlineArrayTransformer=function inlineArrayTransformer(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaults;return{onSubstitution:function onSubstitution(substitution,resultSoFar){if(Array.isArray(substitution)){var arrayLength=substitution.length,separator=opts.separator,conjunction=opts.conjunction,serial=opts.serial,indent=resultSoFar.match(/(\n?[^\S\n]+)$/);if(substitution=indent?substitution.join(separator+indent[1]):substitution.join(separator+" "),conjunction&&arrayLength>1){var separatorIndex=substitution.lastIndexOf(separator);substitution=substitution.slice(0,separatorIndex)+(serial?separator:"")+" "+conjunction+substitution.slice(separatorIndex+1)}}return substitution}}},splitStringTransformer_splitStringTransformer=function splitStringTransformer(splitBy){return{onSubstitution:function onSubstitution(substitution,resultSoFar){if(null==splitBy||"string"!=typeof splitBy)throw new Error("You need to specify a string character to split by.");return"string"==typeof substitution&&substitution.includes(splitBy)&&(substitution=substitution.split(splitBy)),substitution}}},isValidValue=function isValidValue(x){return null!=x&&!Number.isNaN(x)&&"boolean"!=typeof x},removeNonPrintingValuesTransformer_removeNonPrintingValuesTransformer=function removeNonPrintingValuesTransformer(){return{onSubstitution:function onSubstitution(substitution){return Array.isArray(substitution)?substitution.filter(isValidValue):isValidValue(substitution)?substitution:""}}},commaLists_commaLists=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:","}),stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),commaListsAnd_commaListsAnd=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:",",conjunction:"and"}),stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),commaListsOr_commaListsOr=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:",",conjunction:"or"}),stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),html_html=new TemplateTag_TemplateTag(splitStringTransformer_splitStringTransformer("\n"),removeNonPrintingValuesTransformer_removeNonPrintingValuesTransformer,inlineArrayTransformer_inlineArrayTransformer,stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),safeHtml_safeHtml=new TemplateTag_TemplateTag(splitStringTransformer_splitStringTransformer("\n"),inlineArrayTransformer_inlineArrayTransformer,stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer,replaceSubstitutionTransformer_replaceSubstitutionTransformer(/&/g,"&amp;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/</g,"&lt;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/>/g,"&gt;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/"/g,"&quot;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/'/g,"&#x27;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/`/g,"&#x60;")),oneLine_oneLine=new TemplateTag_TemplateTag(replaceResultTransformer_replaceResultTransformer(/(?:\n(?:\s*))+/g," "),trimResultTransformer_trimResultTransformer),oneLineTrim_oneLineTrim=new TemplateTag_TemplateTag(replaceResultTransformer_replaceResultTransformer(/(?:\n\s*)/g,""),trimResultTransformer_trimResultTransformer),oneLineCommaLists_oneLineCommaLists=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:","}),replaceResultTransformer_replaceResultTransformer(/(?:\s+)/g," "),trimResultTransformer_trimResultTransformer),oneLineCommaListsOr_oneLineCommaListsOr=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:",",conjunction:"or"}),replaceResultTransformer_replaceResultTransformer(/(?:\s+)/g," "),trimResultTransformer_trimResultTransformer),oneLineCommaListsAnd_oneLineCommaListsAnd=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:",",conjunction:"and"}),replaceResultTransformer_replaceResultTransformer(/(?:\s+)/g," "),trimResultTransformer_trimResultTransformer),inlineLists_inlineLists=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer,stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),oneLineInlineLists_oneLineInlineLists=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer,replaceResultTransformer_replaceResultTransformer(/(?:\s+)/g," "),trimResultTransformer_trimResultTransformer),stripIndent_stripIndent=new TemplateTag_TemplateTag(stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),stripIndents_stripIndents=new TemplateTag_TemplateTag(stripIndentTransformer_stripIndentTransformer("all"),trimResultTransformer_trimResultTransformer);__webpack_require__.d(__webpack_exports__,"TemplateTag",(function(){return TemplateTag_TemplateTag})),__webpack_require__.d(__webpack_exports__,"trimResultTransformer",(function(){return trimResultTransformer_trimResultTransformer})),__webpack_require__.d(__webpack_exports__,"stripIndentTransformer",(function(){return stripIndentTransformer_stripIndentTransformer})),__webpack_require__.d(__webpack_exports__,"replaceResultTransformer",(function(){return replaceResultTransformer_replaceResultTransformer})),__webpack_require__.d(__webpack_exports__,"replaceSubstitutionTransformer",(function(){return replaceSubstitutionTransformer_replaceSubstitutionTransformer})),__webpack_require__.d(__webpack_exports__,"replaceStringTransformer",(function(){return replaceStringTransformer_replaceStringTransformer})),__webpack_require__.d(__webpack_exports__,"inlineArrayTransformer",(function(){return inlineArrayTransformer_inlineArrayTransformer})),__webpack_require__.d(__webpack_exports__,"splitStringTransformer",(function(){return splitStringTransformer_splitStringTransformer})),__webpack_require__.d(__webpack_exports__,"removeNonPrintingValuesTransformer",(function(){return removeNonPrintingValuesTransformer_removeNonPrintingValuesTransformer})),__webpack_require__.d(__webpack_exports__,"commaLists",(function(){return commaLists_commaLists})),__webpack_require__.d(__webpack_exports__,"commaListsAnd",(function(){return commaListsAnd_commaListsAnd})),__webpack_require__.d(__webpack_exports__,"commaListsOr",(function(){return commaListsOr_commaListsOr})),__webpack_require__.d(__webpack_exports__,"html",(function(){return html_html})),__webpack_require__.d(__webpack_exports__,"codeBlock",(function(){return html_html})),__webpack_require__.d(__webpack_exports__,"source",(function(){return html_html})),__webpack_require__.d(__webpack_exports__,"safeHtml",(function(){return safeHtml_safeHtml})),__webpack_require__.d(__webpack_exports__,"oneLine",(function(){return oneLine_oneLine})),__webpack_require__.d(__webpack_exports__,"oneLineTrim",(function(){return oneLineTrim_oneLineTrim})),__webpack_require__.d(__webpack_exports__,"oneLineCommaLists",(function(){return oneLineCommaLists_oneLineCommaLists})),__webpack_require__.d(__webpack_exports__,"oneLineCommaListsOr",(function(){return oneLineCommaListsOr_oneLineCommaListsOr})),__webpack_require__.d(__webpack_exports__,"oneLineCommaListsAnd",(function(){return oneLineCommaListsAnd_oneLineCommaListsAnd})),__webpack_require__.d(__webpack_exports__,"inlineLists",(function(){return inlineLists_inlineLists})),__webpack_require__.d(__webpack_exports__,"oneLineInlineLists",(function(){return oneLineInlineLists_oneLineInlineLists})),__webpack_require__.d(__webpack_exports__,"stripIndent",(function(){return stripIndent_stripIndent})),__webpack_require__.d(__webpack_exports__,"stripIndents",(function(){return stripIndents_stripIndents}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var colors=function(specifier){for(var n=specifier.length/6|0,colors=new Array(n),i=0;i<n;)colors[i]="#"+specifier.slice(6*i,6*++i);return colors},category10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Accent=colors("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Dark2=colors("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Paired=colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Pastel1=colors("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Pastel2=colors("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Set1=colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Set2=colors("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Set3=colors("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Tableau10=colors("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),src=__webpack_require__(54),ramp=function(scheme){return Object(src.d)(scheme[scheme.length-1])},BrBG_scheme=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors),BrBG=ramp(BrBG_scheme),PRGn_scheme=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors),PRGn=ramp(PRGn_scheme),PiYG_scheme=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors),PiYG=ramp(PiYG_scheme),PuOr_scheme=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors),PuOr=ramp(PuOr_scheme),RdBu_scheme=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors),RdBu=ramp(RdBu_scheme),RdGy_scheme=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors),RdGy=ramp(RdGy_scheme),RdYlBu_scheme=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors),RdYlBu=ramp(RdYlBu_scheme),RdYlGn_scheme=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors),RdYlGn=ramp(RdYlGn_scheme),Spectral_scheme=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors),Spectral=ramp(Spectral_scheme),BuGn_scheme=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors),BuGn=ramp(BuGn_scheme),BuPu_scheme=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors),BuPu=ramp(BuPu_scheme),GnBu_scheme=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors),GnBu=ramp(GnBu_scheme),OrRd_scheme=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors),OrRd=ramp(OrRd_scheme),PuBuGn_scheme=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors),PuBuGn=ramp(PuBuGn_scheme),PuBu_scheme=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors),PuBu=ramp(PuBu_scheme),PuRd_scheme=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors),PuRd=ramp(PuRd_scheme),RdPu_scheme=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors),RdPu=ramp(RdPu_scheme),YlGnBu_scheme=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors),YlGnBu=ramp(YlGnBu_scheme),YlGn_scheme=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors),YlGn=ramp(YlGn_scheme),YlOrBr_scheme=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors),YlOrBr=ramp(YlOrBr_scheme),YlOrRd_scheme=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors),YlOrRd=ramp(YlOrRd_scheme),Blues_scheme=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors),Blues=ramp(Blues_scheme),Greens_scheme=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors),Greens=ramp(Greens_scheme),Greys_scheme=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors),Greys=ramp(Greys_scheme),Purples_scheme=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors),Purples=ramp(Purples_scheme),Reds_scheme=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors),Reds=ramp(Reds_scheme),Oranges_scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors),Oranges=ramp(Oranges_scheme),cividis=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},cubehelix=__webpack_require__(787),sequential_multi_cubehelix=Object(src.b)(Object(cubehelix.a)(300,.5,0),Object(cubehelix.a)(-240,.5,1)),warm=Object(src.b)(Object(cubehelix.a)(-100,.75,.35),Object(cubehelix.a)(80,1.5,.8)),cool=Object(src.b)(Object(cubehelix.a)(260,.75,.35),Object(cubehelix.a)(80,1.5,.8)),c=Object(cubehelix.a)(),rainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var ts=Math.abs(t-.5);return c.h=360*t-100,c.s=1.5-1.5*ts,c.l=.8-.9*ts,c+""},color=__webpack_require__(59),sinebow_c=Object(color.g)(),pi_1_3=Math.PI/3,pi_2_3=2*Math.PI/3,sinebow=function(t){var x;return t=(.5-t)*Math.PI,sinebow_c.r=255*(x=Math.sin(t))*x,sinebow_c.g=255*(x=Math.sin(t+pi_1_3))*x,sinebow_c.b=255*(x=Math.sin(t+pi_2_3))*x,sinebow_c+""},turbo=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"};function viridis_ramp(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var viridis=viridis_ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),magma=viridis_ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=viridis_ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=viridis_ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));__webpack_require__.d(__webpack_exports__,"schemeCategory10",(function(){return category10})),__webpack_require__.d(__webpack_exports__,"schemeAccent",(function(){return Accent})),__webpack_require__.d(__webpack_exports__,"schemeDark2",(function(){return Dark2})),__webpack_require__.d(__webpack_exports__,"schemePaired",(function(){return Paired})),__webpack_require__.d(__webpack_exports__,"schemePastel1",(function(){return Pastel1})),__webpack_require__.d(__webpack_exports__,"schemePastel2",(function(){return Pastel2})),__webpack_require__.d(__webpack_exports__,"schemeSet1",(function(){return Set1})),__webpack_require__.d(__webpack_exports__,"schemeSet2",(function(){return Set2})),__webpack_require__.d(__webpack_exports__,"schemeSet3",(function(){return Set3})),__webpack_require__.d(__webpack_exports__,"schemeTableau10",(function(){return Tableau10})),__webpack_require__.d(__webpack_exports__,"interpolateBrBG",(function(){return BrBG})),__webpack_require__.d(__webpack_exports__,"schemeBrBG",(function(){return BrBG_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePRGn",(function(){return PRGn})),__webpack_require__.d(__webpack_exports__,"schemePRGn",(function(){return PRGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePiYG",(function(){return PiYG})),__webpack_require__.d(__webpack_exports__,"schemePiYG",(function(){return PiYG_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePuOr",(function(){return PuOr})),__webpack_require__.d(__webpack_exports__,"schemePuOr",(function(){return PuOr_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdBu",(function(){return RdBu})),__webpack_require__.d(__webpack_exports__,"schemeRdBu",(function(){return RdBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdGy",(function(){return RdGy})),__webpack_require__.d(__webpack_exports__,"schemeRdGy",(function(){return RdGy_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdYlBu",(function(){return RdYlBu})),__webpack_require__.d(__webpack_exports__,"schemeRdYlBu",(function(){return RdYlBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdYlGn",(function(){return RdYlGn})),__webpack_require__.d(__webpack_exports__,"schemeRdYlGn",(function(){return RdYlGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateSpectral",(function(){return Spectral})),__webpack_require__.d(__webpack_exports__,"schemeSpectral",(function(){return Spectral_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateBuGn",(function(){return BuGn})),__webpack_require__.d(__webpack_exports__,"schemeBuGn",(function(){return BuGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateBuPu",(function(){return BuPu})),__webpack_require__.d(__webpack_exports__,"schemeBuPu",(function(){return BuPu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateGnBu",(function(){return GnBu})),__webpack_require__.d(__webpack_exports__,"schemeGnBu",(function(){return GnBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateOrRd",(function(){return OrRd})),__webpack_require__.d(__webpack_exports__,"schemeOrRd",(function(){return OrRd_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePuBuGn",(function(){return PuBuGn})),__webpack_require__.d(__webpack_exports__,"schemePuBuGn",(function(){return PuBuGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePuBu",(function(){return PuBu})),__webpack_require__.d(__webpack_exports__,"schemePuBu",(function(){return PuBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePuRd",(function(){return PuRd})),__webpack_require__.d(__webpack_exports__,"schemePuRd",(function(){return PuRd_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdPu",(function(){return RdPu})),__webpack_require__.d(__webpack_exports__,"schemeRdPu",(function(){return RdPu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateYlGnBu",(function(){return YlGnBu})),__webpack_require__.d(__webpack_exports__,"schemeYlGnBu",(function(){return YlGnBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateYlGn",(function(){return YlGn})),__webpack_require__.d(__webpack_exports__,"schemeYlGn",(function(){return YlGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateYlOrBr",(function(){return YlOrBr})),__webpack_require__.d(__webpack_exports__,"schemeYlOrBr",(function(){return YlOrBr_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateYlOrRd",(function(){return YlOrRd})),__webpack_require__.d(__webpack_exports__,"schemeYlOrRd",(function(){return YlOrRd_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateBlues",(function(){return Blues})),__webpack_require__.d(__webpack_exports__,"schemeBlues",(function(){return Blues_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateGreens",(function(){return Greens})),__webpack_require__.d(__webpack_exports__,"schemeGreens",(function(){return Greens_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateGreys",(function(){return Greys})),__webpack_require__.d(__webpack_exports__,"schemeGreys",(function(){return Greys_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePurples",(function(){return Purples})),__webpack_require__.d(__webpack_exports__,"schemePurples",(function(){return Purples_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateReds",(function(){return Reds})),__webpack_require__.d(__webpack_exports__,"schemeReds",(function(){return Reds_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateOranges",(function(){return Oranges})),__webpack_require__.d(__webpack_exports__,"schemeOranges",(function(){return Oranges_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateCividis",(function(){return cividis})),__webpack_require__.d(__webpack_exports__,"interpolateCubehelixDefault",(function(){return sequential_multi_cubehelix})),__webpack_require__.d(__webpack_exports__,"interpolateRainbow",(function(){return rainbow})),__webpack_require__.d(__webpack_exports__,"interpolateWarm",(function(){return warm})),__webpack_require__.d(__webpack_exports__,"interpolateCool",(function(){return cool})),__webpack_require__.d(__webpack_exports__,"interpolateSinebow",(function(){return sinebow})),__webpack_require__.d(__webpack_exports__,"interpolateTurbo",(function(){return turbo})),__webpack_require__.d(__webpack_exports__,"interpolateViridis",(function(){return viridis})),__webpack_require__.d(__webpack_exports__,"interpolateMagma",(function(){return magma})),__webpack_require__.d(__webpack_exports__,"interpolateInferno",(function(){return inferno})),__webpack_require__.d(__webpack_exports__,"interpolatePlasma",(function(){return plasma}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(columns){return new Function("d","return {"+columns.map((function(name,i){return JSON.stringify(name)+": d["+i+"]"})).join(",")+"}")}function inferColumns(rows){var columnSet=Object.create(null),columns=[];return rows.forEach((function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)})),columns}function pad(value,width){var s=value+"",length=s.length;return length<width?new Array(width-length+1).join(0)+s:s}function formatDate(date){var hours=date.getUTCHours(),minutes=date.getUTCMinutes(),seconds=date.getUTCSeconds(),milliseconds=date.getUTCMilliseconds();return isNaN(date)?"Invalid Date":function formatYear(year){return year<0?"-"+pad(-year,6):year>9999?"+"+pad(year,6):pad(year,4)}(date.getUTCFullYear())+"-"+pad(date.getUTCMonth()+1,2)+"-"+pad(date.getUTCDate(),2)+(milliseconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"."+pad(milliseconds,3)+"Z":seconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"Z":minutes||hours?"T"+pad(hours,2)+":"+pad(minutes,2)+"Z":"")}var dsv=function(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF;if(eol)return eol=!1,EOL;var i,c,j=I;if(text.charCodeAt(j)===QUOTE){for(;I++<N&&text.charCodeAt(I)!==QUOTE||text.charCodeAt(++I)===QUOTE;);return(i=I)>=N?eof=!0:(c=text.charCodeAt(I++))===NEWLINE?eol=!0:c===RETURN&&(eol=!0,text.charCodeAt(I)===NEWLINE&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if((c=text.charCodeAt(i=I++))===NEWLINE)eol=!0;else if(c===RETURN)eol=!0,text.charCodeAt(I)===NEWLINE&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(text.charCodeAt(N-1)===NEWLINE&&--N,text.charCodeAt(N-1)===RETURN&&--N;(t=token())!==EOF;){for(var row=[];t!==EOL&&t!==EOF;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function preformatBody(rows,columns){return rows.map((function(row){return columns.map((function(column){return formatValue(row[column])})).join(delimiter)}))}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(value){return null==value?"":value instanceof Date?formatDate(value):reFormat.test(value+="")?'"'+value.replace(/"/g,'""')+'"':value}return{parse:function parse(text,f){var convert,columns,rows=parseRows(text,(function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter(row)}));return rows.columns=columns||[],rows},parseRows:parseRows,format:function format(rows,columns){return null==columns&&(columns=inferColumns(rows)),[columns.map(formatValue).join(delimiter)].concat(preformatBody(rows,columns)).join("\n")},formatBody:function formatBody(rows,columns){return null==columns&&(columns=inferColumns(rows)),preformatBody(rows,columns).join("\n")},formatRows:function formatRows(rows){return rows.map(formatRow).join("\n")}}},csv=dsv(","),csvParse=csv.parse,csvParseRows=csv.parseRows,csvFormat=csv.format,csvFormatBody=csv.formatBody,csvFormatRows=csv.formatRows,tsv=dsv("\t"),tsvParse=tsv.parse,tsvParseRows=tsv.parseRows,tsvFormat=tsv.format,tsvFormatBody=tsv.formatBody,tsvFormatRows=tsv.formatRows;function autoType(object){for(var key in object){var number,value=object[key].trim();if(value)if("true"===value)value=!0;else if("false"===value)value=!1;else if("NaN"===value)value=NaN;else if(isNaN(number=+value)){if(!/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/.test(value))continue;value=new Date(value)}else value=number;else value=null;object[key]=value}return object}__webpack_require__.d(__webpack_exports__,"dsvFormat",(function(){return dsv})),__webpack_require__.d(__webpack_exports__,"csvParse",(function(){return csvParse})),__webpack_require__.d(__webpack_exports__,"csvParseRows",(function(){return csvParseRows})),__webpack_require__.d(__webpack_exports__,"csvFormat",(function(){return csvFormat})),__webpack_require__.d(__webpack_exports__,"csvFormatBody",(function(){return csvFormatBody})),__webpack_require__.d(__webpack_exports__,"csvFormatRows",(function(){return csvFormatRows})),__webpack_require__.d(__webpack_exports__,"tsvParse",(function(){return tsvParse})),__webpack_require__.d(__webpack_exports__,"tsvParseRows",(function(){return tsvParseRows})),__webpack_require__.d(__webpack_exports__,"tsvFormat",(function(){return tsvFormat})),__webpack_require__.d(__webpack_exports__,"tsvFormatBody",(function(){return tsvFormatBody})),__webpack_require__.d(__webpack_exports__,"tsvFormatRows",(function(){return tsvFormatRows})),__webpack_require__.d(__webpack_exports__,"autoType",(function(){return autoType}))},,function(module,__webpack_exports__,__webpack_require__){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function isObjectObject(o){return!0===
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function isObject(val){return null!=val&&"object"==typeof val&&!1===Array.isArray(val)}(o)&&"[object Object]"===Object.prototype.toString.call(o)}function isPlainObject(o){var ctor,prot;return!1!==isObjectObject(o)&&("function"==typeof(ctor=o.constructor)&&(!1!==isObjectObject(prot=ctor.prototype)&&!1!==prot.hasOwnProperty("isPrototypeOf")))}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return isPlainObject}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return stubRemovedMethods}));var _log__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(25);function stubRemovedMethods(instance,className,version,methodNames){var upgradeMessage="See luma.gl ".concat(version," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),prototype=Object.getPrototypeOf(instance);methodNames.forEach((function(methodName){prototype.methodName||(prototype[methodName]=function(){throw _log__WEBPACK_IMPORTED_MODULE_0__.a.removed("Calling removed method ".concat(className,".").concat(methodName,": "),upgradeMessage)(),new Error(methodName)})}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Timeline}));var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),channelHandles=1,animationHandles=1,Timeline=function(){function Timeline(){Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,Timeline),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(Timeline,[{key:"addChannel",value:function addChannel(props){var _props$delay=props.delay,delay=void 0===_props$delay?0:_props$delay,_props$duration=props.duration,duration=void 0===_props$duration?Number.POSITIVE_INFINITY:_props$duration,_props$rate=props.rate,rate=void 0===_props$rate?1:_props$rate,_props$repeat=props.repeat,handle=channelHandles++,channel={time:0,delay:delay,duration:duration,rate:rate,repeat:void 0===_props$repeat?1:_props$repeat};return this._setChannelTime(channel,this.time),this.channels.set(handle,channel),handle}},{key:"removeChannel",value:function removeChannel(handle){this.channels.delete(handle);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.animations[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_step.value,2),animationHandle=_step$value[0];_step$value[1].channel===handle&&this.detachAnimation(animationHandle)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"isFinished",value:function isFinished(handle){var channel=this.channels.get(handle);return void 0!==channel&&this.time>=channel.delay+channel.duration*channel.repeat}},{key:"getTime",value:function getTime(handle){if(void 0===handle)return this.time;var channel=this.channels.get(handle);return void 0===channel?-1:channel.time}},{key:"setTime",value:function setTime(time){this.time=Math.max(0,time);var channels=this.channels.values(),_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=channels[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var channel=_step2.value;this._setChannelTime(channel,this.time)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var animations=this.animations.values(),_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=animations[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var animationData=_step3.value,animation=animationData.animation,_channel=animationData.channel;animation.setTime(this.getTime(_channel))}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}},{key:"play",value:function play(){this.playing=!0}},{key:"pause",value:function pause(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function reset(){this.setTime(0)}},{key:"attachAnimation",value:function attachAnimation(animation,channelHandle){var animationHandle=animationHandles++;return this.animations.set(animationHandle,{animation:animation,channel:channelHandle}),animation.setTime(this.getTime(channelHandle)),animationHandle}},{key:"detachAnimation",value:function detachAnimation(handle){this.animations.delete(handle)}},{key:"update",value:function update(engineTime){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=engineTime),this.setTime(this.time+(engineTime-this.lastEngineTime)),this.lastEngineTime=engineTime)}},{key:"_setChannelTime",value:function _setChannelTime(channel,time){var offsetTime=time-channel.delay;offsetTime>=channel.duration*channel.repeat?channel.time=channel.duration*channel.rate:(channel.time=Math.max(0,offsetTime)%channel.duration,channel.time*=channel.rate)}}]),Timeline}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AmbientLight})),__webpack_require__.d(__webpack_exports__,"b",(function(){return DirectionalLight}));var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2),math_gl__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(42),_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(127),DEFAULT_LIGHT_COLOR=[255,255,255],DEFAULT_ATTENUATION=[0,0,1],DEFAULT_LIGHT_DIRECTION=[0,0,-1],DEFAULT_LIGHT_POSITION=[0,0,1],Light=function Light(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.a)(this,Light),this.id=props.id||Object(_utils__WEBPACK_IMPORTED_MODULE_6__.c)("light");var _props$color=props.color,color=void 0===_props$color?DEFAULT_LIGHT_COLOR:_props$color;this.color=color;var _props$intensity=props.intensity,intensity=void 0===_props$intensity?1:_props$intensity;this.intensity=intensity},AmbientLight=function(_Light){function AmbientLight(){var _this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.a)(this,AmbientLight),(_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__.a)(AmbientLight).call(this,props))).type="ambient",_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__.a)(AmbientLight,_Light),AmbientLight}(Light),DirectionalLight=function(_Light2){function DirectionalLight(){var _this2,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.a)(this,DirectionalLight),(_this2=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__.a)(DirectionalLight).call(this,props))).type="directional";var _props$direction=props.direction,direction=void 0===_props$direction?DEFAULT_LIGHT_DIRECTION:_props$direction;return _this2.direction=new math_gl__WEBPACK_IMPORTED_MODULE_5__.a(direction).normalize().toArray(),_this2}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__.a)(DirectionalLight,_Light2),DirectionalLight}(Light);!function(_Light3){function PointLight(){var _this3,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.a)(this,PointLight),(_this3=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__.a)(PointLight).call(this,props))).type="point";var _props$position=props.position,position=void 0===_props$position?DEFAULT_LIGHT_POSITION:_props$position;return _this3.position=position,_this3.attenuation=_this3._getAttenuation(props),_this3}Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__.a)(PointLight,_Light3),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__.a)(PointLight,[{key:"_getAttenuation",value:function _getAttenuation(props){return"attenuation"in props?props.attenuation:"intensity"in props?[0,0,props.intensity]:DEFAULT_ATTENUATION}}])}(Light)},function(module,__webpack_exports__,__webpack_require__){"use strict";var _UNIFORM_SETTERS,classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(5),assertThisInitialized=__webpack_require__(7),getPrototypeOf=__webpack_require__(3),get=__webpack_require__(20),inherits=__webpack_require__(6),resource=__webpack_require__(47),classes_texture=__webpack_require__(58),classes_framebuffer=__webpack_require__(69),defineProperty=__webpack_require__(0),renderbuffer=__webpack_require__(140),log=__webpack_require__(25),UNIFORM_SETTERS=(_UNIFORM_SETTERS={},Object(defineProperty.a)(_UNIFORM_SETTERS,5126,(function(gl,location,value){return gl.uniform1fv(location,toFloatArray(value,1))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35664,(function(gl,location,value){return gl.uniform2fv(location,toFloatArray(value,2))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35665,(function(gl,location,value){return gl.uniform3fv(location,toFloatArray(value,3))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35666,(function(gl,location,value){return gl.uniform4fv(location,toFloatArray(value,4))})),Object(defineProperty.a)(_UNIFORM_SETTERS,5124,(function(gl,location,value){return gl.uniform1iv(location,toIntArray(value,1))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35667,(function(gl,location,value){return gl.uniform2iv(location,toIntArray(value,2))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35668,(function(gl,location,value){return gl.uniform3iv(location,toIntArray(value,3))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35669,(function(gl,location,value){return gl.uniform4iv(location,toIntArray(value,4))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35670,(function(gl,location,value){return gl.uniform1iv(location,toIntArray(value,1))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35671,(function(gl,location,value){return gl.uniform2iv(location,toIntArray(value,2))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35672,(function(gl,location,value){return gl.uniform3iv(location,toIntArray(value,3))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35673,(function(gl,location,value){return gl.uniform4iv(location,toIntArray(value,4))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35674,(function(gl,location,value){return gl.uniformMatrix2fv(location,!1,toFloatArray(value,4))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35675,(function(gl,location,value){return gl.uniformMatrix3fv(location,!1,toFloatArray(value,9))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35676,(function(gl,location,value){return gl.uniformMatrix4fv(location,!1,toFloatArray(value,16))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35678,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,35680,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,5125,(function(gl,location,value){return gl.uniform1uiv(location,toUIntArray(value,1))})),Object(defineProperty.a)(_UNIFORM_SETTERS,36294,(function(gl,location,value){return gl.uniform2uiv(location,toUIntArray(value,2))})),Object(defineProperty.a)(_UNIFORM_SETTERS,36295,(function(gl,location,value){return gl.uniform3uiv(location,toUIntArray(value,3))})),Object(defineProperty.a)(_UNIFORM_SETTERS,36296,(function(gl,location,value){return gl.uniform4uiv(location,toUIntArray(value,4))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35685,(function(gl,location,value){return gl.uniformMatrix2x3fv(location,!1,toFloatArray(value,6))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35686,(function(gl,location,value){return gl.uniformMatrix2x4fv(location,!1,toFloatArray(value,8))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35687,(function(gl,location,value){return gl.uniformMatrix3x2fv(location,!1,toFloatArray(value,6))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35688,(function(gl,location,value){return gl.uniformMatrix3x4fv(location,!1,toFloatArray(value,12))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35689,(function(gl,location,value){return gl.uniformMatrix4x2fv(location,!1,toFloatArray(value,8))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35690,(function(gl,location,value){return gl.uniformMatrix4x3fv(location,!1,toFloatArray(value,12))})),Object(defineProperty.a)(_UNIFORM_SETTERS,35679,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,35682,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,36289,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,36292,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,36293,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,36298,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,36299,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,36300,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,36303,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,36306,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,36307,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,36308,(function(gl,location,value){return gl.uniform1i(location,value)})),Object(defineProperty.a)(_UNIFORM_SETTERS,36311,(function(gl,location,value){return gl.uniform1i(location,value)})),_UNIFORM_SETTERS),FLOAT_ARRAY={},INT_ARRAY={},UINT_ARRAY={},array1=[0];function toTypedArray(value,uniformLength,Type,cache){1===uniformLength&&"boolean"==typeof value&&(value=value?1:0),Number.isFinite(value)&&(array1[0]=value,value=array1);var length=value.length;if(length%uniformLength&&log.a.warn("Uniform size should be multiples of ".concat(uniformLength),value)(),value instanceof Type)return value;var result=cache[length];result||(result=new Type(length),cache[length]=result);for(var i=0;i<length;i++)result[i]=value[i];return result}function toFloatArray(value,uniformLength){return toTypedArray(value,uniformLength,Float32Array,FLOAT_ARRAY)}function toIntArray(value,uniformLength){return toTypedArray(value,uniformLength,Int32Array,INT_ARRAY)}function toUIntArray(value,uniformLength){return toTypedArray(value,uniformLength,Uint32Array,UINT_ARRAY)}function parseUniformName(name){if("]"!==name[name.length-1])return{name:name,length:1,isArray:!1};var matches=name.match(/([^[]*)(\[[0-9]+\])?/);if(!matches||matches.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(name));return{name:matches[1],length:matches[2]||1,isArray:Boolean(matches[2])}}function getUniformSetter(gl,location,info){var setter=UNIFORM_SETTERS[info.type];if(!setter)throw new Error("Unknown GLSL uniform type ".concat(info.type));return setter.bind(null,gl,location)}function checkUniformValues(uniforms,source,uniformMap){for(var uniformName in uniforms){var value=uniforms[uniformName];if((!uniformMap||Boolean(uniformMap[uniformName]))&&!checkUniformValue(value))throw source=source?"".concat(source," "):"",console.error("".concat(source," Bad uniform ").concat(uniformName),value),new Error("".concat(source," Bad uniform ").concat(uniformName))}return!0}function checkUniformValue(value){return Array.isArray(value)||ArrayBuffer.isView(value)?function checkUniformArray(value){if(0===value.length)return!1;for(var checkLength=Math.min(value.length,16),i=0;i<checkLength;++i)if(!Number.isFinite(value[i]))return!1;return!0}(value):!!isFinite(value)||(!0===value||!1===value||(value instanceof classes_texture.a||(value instanceof renderbuffer.a||value instanceof classes_framebuffer.a&&Boolean(value.texture))))}function areUniformsEqual(uniform1,uniform2){if(Array.isArray(uniform1)||ArrayBuffer.isView(uniform1)){if(!uniform2)return!1;var len=uniform1.length;if(uniform2.length!==len)return!1;for(var i=0;i<len;i++)if(uniform1[i]!==uniform2[i])return!1;return!0}return uniform1===uniform2}function getUniformCopy(uniform){return Array.isArray(uniform)||ArrayBuffer.isView(uniform)?uniform.slice():uniform}function getShaderName(shader){var defaultName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",match=shader.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return match?match[1]:defaultName}var GL_FRAGMENT_SHADER=35632,GL_VERTEX_SHADER=35633;function parseGLSLCompilerError(errLog,src,shaderType,shaderName){for(var errorStrings=errLog.split(/\r?\n/),errors={},warnings={},name=shaderName||getShaderName(src)||"(unnamed)",shaderDescription="".concat(function getShaderTypeName(type){switch(type){case GL_FRAGMENT_SHADER:return"fragment";case GL_VERTEX_SHADER:return"vertex";default:return"unknown type"}}(shaderType)," shader ").concat(name),i=0;i<errorStrings.length;i++){var errorString=errorStrings[i];if(!(errorString.length<=1)){var segments=errorString.split(":"),type=segments[0],line=parseInt(segments[2],10);if(isNaN(line))throw new Error("GLSL compilation error in ".concat(shaderDescription,": ").concat(errLog));"WARNING"!==type?errors[line]=errorString:warnings[line]=errorString}}var lines=function addLineNumbers(string){var start=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,delim=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",lines=string.split(/\r?\n/),maxDigits=String(lines.length+start-1).length;return lines.map((function(line,i){var lineNumber=i+start,digits=String(lineNumber).length;return padLeft(lineNumber,maxDigits-digits)+delim+line}))}(src);return{shaderName:shaderDescription,errors:formatErrors(errors,lines),warnings:formatErrors(warnings,lines)}}function formatErrors(errors,lines){for(var message="",i=0;i<lines.length;i++){var line=lines[i];if((errors[i+3]||errors[i+2]||errors[i+1])&&(message+="".concat(line,"\n"),errors[i+1])){var error=errors[i+1],segments=error.split(":",3),type=segments[0],column=parseInt(segments[1],10)||0,err=error.substring(segments.join(":").length+1).trim();message+=padLeft("^^^ ".concat(type,": ").concat(err,"\n\n"),column)}}return message}function padLeft(string,digits){for(var result="",i=0;i<digits;++i)result+=" ";return"".concat(result).concat(string)}var webgl_checks=__webpack_require__(39),assert=__webpack_require__(17),utils=__webpack_require__(127),ERR_SOURCE="Shader: GLSL source code must be a JavaScript string",shader_Shader=function(_Resource){function Shader(gl,props){var _this;Object(classCallCheck.a)(this,Shader),Object(webgl_checks.b)(gl),Object(assert.a)("string"==typeof props.source,ERR_SOURCE);var id=getShaderName(props.source,null)||props.id||Object(utils.c)("unnamed ".concat(Shader.getTypeName(props.shaderType)));return(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Shader).call(this,gl,{id:id}))).shaderType=props.shaderType,_this.source=props.source,_this.initialize(props),_this}return Object(inherits.a)(Shader,_Resource),Object(createClass.a)(Shader,null,[{key:"getTypeName",value:function getTypeName(shaderType){switch(shaderType){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Object(assert.a)(!1),"unknown"}}}]),Object(createClass.a)(Shader,[{key:"initialize",value:function initialize(_ref){var source=_ref.source,shaderName=getShaderName(source,null);shaderName&&(this.id=Object(utils.c)(shaderName)),this._compile(source)}},{key:"getParameter",value:function getParameter(pname){return this.gl.getShaderParameter(this.handle,pname)}},{key:"toString",value:function toString(){return"".concat(Shader.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function getName(){return getShaderName(this.source)||"unnamed-shader"}},{key:"getSource",value:function getSource(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function getTranslatedSource(){var extension=this.gl.getExtension("WEBGL.debug_shaders");return extension?extension.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"}},{key:"_compile",value:function _compile(){var source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;source.startsWith("#version ")||(source="#version 100\n".concat(source)),this.source=source,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var compileStatus=this.getParameter(35713);if(!compileStatus){var infoLog=this.gl.getShaderInfoLog(this.handle),_parseGLSLCompilerErr=parseGLSLCompilerError(infoLog,this.source,this.shaderType,this.id),shaderName=_parseGLSLCompilerErr.shaderName,errors=_parseGLSLCompilerErr.errors,warnings=_parseGLSLCompilerErr.warnings;throw log.a.error("GLSL compilation errors in ".concat(shaderName,"\n").concat(errors))(),log.a.warn("GLSL compilation warnings in ".concat(shaderName,"\n").concat(warnings))(),new Error("GLSL compilation errors in ".concat(shaderName))}}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function _getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}]),Shader}(resource.a),shader_VertexShader=function(_Shader){function VertexShader(gl,props){return Object(classCallCheck.a)(this,VertexShader),"string"==typeof props&&(props={source:props}),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(VertexShader).call(this,gl,Object.assign({},props,{shaderType:35633})))}return Object(inherits.a)(VertexShader,_Shader),Object(createClass.a)(VertexShader,[{key:"_createHandle",value:function _createHandle(){return this.gl.createShader(35633)}}]),VertexShader}(shader_Shader),shader_FragmentShader=function(_Shader2){function FragmentShader(gl,props){return Object(classCallCheck.a)(this,FragmentShader),"string"==typeof props&&(props={source:props}),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(FragmentShader).call(this,gl,Object.assign({},props,{shaderType:35632})))}return Object(inherits.a)(FragmentShader,_Shader2),Object(createClass.a)(FragmentShader,[{key:"_createHandle",value:function _createHandle(){return this.gl.createShader(35632)}}]),FragmentShader}(shader_Shader),classes_accessor=__webpack_require__(66),attribute_utils=__webpack_require__(105),program_configuration_ProgramConfiguration=function(){function ProgramConfiguration(program){Object(classCallCheck.a)(this,ProgramConfiguration),this.id=program.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(program),this._readVaryingsFromProgram(program)}return Object(createClass.a)(ProgramConfiguration,[{key:"getAttributeInfo",value:function getAttributeInfo(locationOrName){var location=Number(locationOrName);return Number.isFinite(location)?this.attributeInfosByLocation[location]:this.attributeInfosByName[locationOrName]||null}},{key:"getAttributeLocation",value:function getAttributeLocation(locationOrName){var attributeInfo=this.getAttributeInfo(locationOrName);return attributeInfo?attributeInfo.location:-1}},{key:"getAttributeAccessor",value:function getAttributeAccessor(locationOrName){var attributeInfo=this.getAttributeInfo(locationOrName);return attributeInfo?attributeInfo.accessor:null}},{key:"getVaryingInfo",value:function getVaryingInfo(locationOrName){var location=Number(locationOrName);return Number.isFinite(location)?this.varyingInfos[location]:this.varyingInfosByName[locationOrName]||null}},{key:"getVaryingIndex",value:function getVaryingIndex(locationOrName){var varying=this.getVaryingInfo();return varying?varying.location:-1}},{key:"getVaryingAccessor",value:function getVaryingAccessor(locationOrName){var varying=this.getVaryingInfo();return varying?varying.accessor:null}},{key:"_readAttributesFromProgram",value:function _readAttributesFromProgram(program){for(var gl=program.gl,count=gl.getProgramParameter(program.handle,35721),index=0;index<count;index++){var _gl$getActiveAttrib=gl.getActiveAttrib(program.handle,index),name=_gl$getActiveAttrib.name,type=_gl$getActiveAttrib.type,size=_gl$getActiveAttrib.size,location=gl.getAttribLocation(program.handle,name);location>=0&&this._addAttribute(location,name,type,size)}this.attributeInfos.sort((function(a,b){return a.location-b.location}))}},{key:"_readVaryingsFromProgram",value:function _readVaryingsFromProgram(program){var gl=program.gl;if(Object(webgl_checks.d)(gl)){for(var count=gl.getProgramParameter(program.handle,35971),location=0;location<count;location++){var _gl$getTransformFeedb=gl.getTransformFeedbackVarying(program.handle,location),name=_gl$getTransformFeedb.name,type=_gl$getTransformFeedb.type,size=_gl$getTransformFeedb.size;this._addVarying(location,name,type,size)}this.varyingInfos.sort((function(a,b){return a.location-b.location}))}}},{key:"_addAttribute",value:function _addAttribute(location,name,compositeType,size){var _decomposeCompositeGL=Object(attribute_utils.a)(compositeType),accessor={type:_decomposeCompositeGL.type,size:size*_decomposeCompositeGL.components};this._inferProperties(location,name,accessor);var attributeInfo={location:location,name:name,accessor:new classes_accessor.a(accessor)};this.attributeInfos.push(attributeInfo),this.attributeInfosByLocation[location]=attributeInfo,this.attributeInfosByName[attributeInfo.name]=attributeInfo}},{key:"_inferProperties",value:function _inferProperties(location,name,accessor){/instance/i.test(name)&&(accessor.divisor=1)}},{key:"_addVarying",value:function _addVarying(location,name,compositeType,size){var _decomposeCompositeGL2=Object(attribute_utils.a)(compositeType),type=_decomposeCompositeGL2.type,components=_decomposeCompositeGL2.components,varying={location:location,name:name,accessor:new classes_accessor.a({type:type,size:size*components})};this.varyingInfos.push(varying),this.varyingInfosByName[varying.name]=varying}}]),ProgramConfiguration}(),with_parameters=__webpack_require__(114),constants_to_keys=__webpack_require__(128);__webpack_require__.d(__webpack_exports__,"a",(function(){return program_Program}));var V6_DEPRECATED_METHODS=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],program_Program=function(_Resource){function Program(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Program),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Program).call(this,gl,props))).stubRemovedMethods("Program","v6.0",V6_DEPRECATED_METHODS),_this._isCached=!1,_this.initialize(props),Object.seal(Object(assertThisInitialized.a)(_this)),_this._setId(props.id),_this}return Object(inherits.a)(Program,_Resource),Object(createClass.a)(Program,[{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},hash=props.hash,vs=props.vs,fs=props.fs,varyings=props.varyings,_props$bufferMode=props.bufferMode,bufferMode=void 0===_props$bufferMode?35981:_props$bufferMode;return this.hash=hash||"",this.vs="string"==typeof vs?new shader_VertexShader(this.gl,{id:"".concat(props.id,"-vs"),source:vs}):vs,this.fs="string"==typeof fs?new shader_FragmentShader(this.gl,{id:"".concat(props.id,"-fs"),source:fs}):fs,Object(assert.a)(this.vs instanceof shader_VertexShader),Object(assert.a)(this.fs instanceof shader_FragmentShader),this.uniforms={},varyings&&varyings.length>0&&(Object(webgl_checks.a)(this.gl),this.varyings=varyings,this.gl.transformFeedbackVaryings(this.handle,varyings,bufferMode)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new program_configuration_ProgramConfiguration(this),this.setProps(props)}},{key:"delete",value:function _delete(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:Object(get.a)(Object(getPrototypeOf.a)(Program.prototype),"delete",this).call(this,options)}},{key:"setProps",value:function setProps(props){return"uniforms"in props&&this.setUniforms(props.uniforms),this}},{key:"draw",value:function draw(_ref){var _this2=this,logPriority=_ref.logPriority,_ref$drawMode=_ref.drawMode,drawMode=void 0===_ref$drawMode?4:_ref$drawMode,vertexCount=_ref.vertexCount,_ref$offset=_ref.offset,offset=void 0===_ref$offset?0:_ref$offset,start=_ref.start,end=_ref.end,_ref$isIndexed=_ref.isIndexed,isIndexed=void 0!==_ref$isIndexed&&_ref$isIndexed,_ref$indexType=_ref.indexType,indexType=void 0===_ref$indexType?5123:_ref$indexType,_ref$isInstanced=_ref.isInstanced,isInstanced=void 0!==_ref$isInstanced&&_ref$isInstanced,_ref$instanceCount=_ref.instanceCount,instanceCount=void 0===_ref$instanceCount?0:_ref$instanceCount,_ref$vertexArray=_ref.vertexArray,vertexArray=void 0===_ref$vertexArray?null:_ref$vertexArray,transformFeedback=_ref.transformFeedback,framebuffer=_ref.framebuffer,_ref$parameters=_ref.parameters,parameters=void 0===_ref$parameters?{}:_ref$parameters,uniforms=_ref.uniforms,samplers=_ref.samplers;if((uniforms||samplers)&&(log.a.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(uniforms||{})),void 0!==logPriority){var fb=framebuffer?framebuffer.id:"default",message="mode=".concat(Object(constants_to_keys.a)(this.gl,drawMode)," verts=").concat(vertexCount," ")+"instances=".concat(instanceCount," indexType=").concat(Object(constants_to_keys.a)(this.gl,indexType)," ")+"isInstanced=".concat(isInstanced," isIndexed=").concat(isIndexed," ")+"Framebuffer=".concat(fb);log.a.log(logPriority,message)()}return Object(assert.a)(vertexArray),this.gl.useProgram(this.handle),!!this._areTexturesRenderable()&&(vertexArray.bindForDraw(vertexCount,instanceCount,(function(){if(void 0!==framebuffer&&(parameters=Object.assign({},parameters,{framebuffer:framebuffer})),transformFeedback){var primitiveMode=Object(attribute_utils.c)(drawMode);transformFeedback.begin(primitiveMode)}_this2._bindTextures(),Object(with_parameters.a)(_this2.gl,parameters,(function(){isIndexed&&isInstanced?_this2.gl.drawElementsInstanced(drawMode,vertexCount,indexType,offset,instanceCount):isIndexed&&Object(webgl_checks.d)(_this2.gl)&&!isNaN(start)&&!isNaN(end)?_this2.gl.drawRangeElements(drawMode,start,end,vertexCount,indexType,offset):isIndexed?_this2.gl.drawElements(drawMode,vertexCount,indexType,offset):isInstanced?_this2.gl.drawArraysInstanced(drawMode,offset,vertexCount,instanceCount):_this2.gl.drawArrays(drawMode,offset,vertexCount)})),transformFeedback&&transformFeedback.end()})),!0)}},{key:"setUniforms",value:function setUniforms(){var uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_onChangeCallback=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},somethingChanged=!1,changedUniforms={};for(var key in uniforms)areUniformsEqual(this.uniforms[key],uniforms[key])||(somethingChanged=!0,changedUniforms[key]=uniforms[key],this.uniforms[key]=getUniformCopy(uniforms[key]));return somethingChanged&&(_onChangeCallback(),checkUniformValues(changedUniforms,this.id,this._uniformSetters),this._setUniforms(changedUniforms)),this}},{key:"reset",value:function reset(){}},{key:"_areTexturesRenderable",value:function _areTexturesRenderable(){var texturesRenderable=!0;for(var uniformName in this.uniforms){var uniformSetter=this._uniformSetters[uniformName];if(uniformSetter&&void 0!==uniformSetter.textureIndex){var uniform=this.uniforms[uniformName];if(uniform instanceof classes_framebuffer.a)uniform=uniform.texture;if(uniform instanceof classes_texture.a)texturesRenderable=texturesRenderable&&uniform.loaded}}return texturesRenderable}},{key:"_bindTextures",value:function _bindTextures(){for(var uniformName in this.uniforms){var uniformSetter=this._uniformSetters[uniformName];if(uniformSetter&&void 0!==uniformSetter.textureIndex){var uniform=this.uniforms[uniformName];if(uniform instanceof classes_framebuffer.a&&(uniform=uniform.texture),uniform instanceof classes_texture.a)uniform.bind(uniformSetter.textureIndex)}}}},{key:"_setUniforms",value:function _setUniforms(uniforms){for(var uniformName in this.gl.useProgram(this.handle),uniforms){var uniform=uniforms[uniformName],uniformSetter=this._uniformSetters[uniformName];if(uniformSetter)if(uniform instanceof classes_framebuffer.a&&(uniform=uniform.texture),uniform instanceof classes_texture.a){void 0===uniformSetter.textureIndex&&(uniformSetter.textureIndex=this._textureIndexCounter++);var texture=uniform,textureIndex=uniformSetter.textureIndex;texture.bind(textureIndex),uniformSetter(textureIndex)}else uniformSetter(uniform)}return this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function _getOptionsFromHandle(handle){var shaderHandles=this.gl.getAttachedShaders(handle),opts={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=shaderHandles[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var shaderHandle=_step.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:opts.vs=new shader_VertexShader({handle:shaderHandle});break;case 35632:opts.fs=new shader_FragmentShader({handle:shaderHandle})}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return opts}},{key:"_getParameter",value:function _getParameter(pname){return this.gl.getProgramParameter(this.handle,pname)}},{key:"_setId",value:function _setId(id){if(!id){var programName=this._getName();this.id=Object(utils.c)(programName)}}},{key:"_getName",value:function _getName(){var programName=this.vs.getName()||this.fs.getName();return programName=(programName=programName.replace(/shader/i,""))?"".concat(programName,"-program"):"program"}},{key:"_compileAndLink",value:function _compileAndLink(){var gl=this.gl;if((gl.attachShader(this.handle,this.vs.handle),gl.attachShader(this.handle,this.fs.handle),log.a.time(4,"linkProgram for ".concat(this._getName()))(),gl.linkProgram(this.handle),log.a.timeEnd(4,"linkProgram for ".concat(this._getName()))(),gl.debug||log.a.priority>0)&&(gl.validateProgram(this.handle),!gl.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(gl.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function _readUniformLocationsFromLinkedProgram(){var gl=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var i=0;i<this._uniformCount;i++){var info=this.gl.getActiveUniform(this.handle,i),_parseUniformName=parseUniformName(info.name),name=_parseUniformName.name,location=(_parseUniformName.isArray,gl.getUniformLocation(this.handle,name));if(this._uniformSetters[name]=getUniformSetter(gl,location,info),info.size>1)for(var l=0;l<info.size;l++)location=gl.getUniformLocation(this.handle,"".concat(name,"[").concat(l,"]")),this._uniformSetters["".concat(name,"[").concat(l,"]")]=getUniformSetter(gl,location,info)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function getActiveUniforms(uniformIndices,pname){return this.gl.getActiveUniforms(this.handle,uniformIndices,pname)}},{key:"getUniformBlockIndex",value:function getUniformBlockIndex(blockName){return this.gl.getUniformBlockIndex(this.handle,blockName)}},{key:"getActiveUniformBlockParameter",value:function getActiveUniformBlockParameter(blockIndex,pname){return this.gl.getActiveUniformBlockParameter(this.handle,blockIndex,pname)}},{key:"uniformBlockBinding",value:function uniformBlockBinding(blockIndex,blockBinding){this.gl.uniformBlockBinding(this.handle,blockIndex,blockBinding)}}]),Program}(resource.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),hi_res_timestamp=__webpack_require__(92),stat_Stat=function(){function Stat(name,type){Object(classCallCheck.a)(this,Stat),this.name=name,this.type=type,this.sampleSize=1,this.reset()}return Object(createClass.a)(Stat,[{key:"setSampleSize",value:function setSampleSize(samples){return this.sampleSize=samples,this}},{key:"incrementCount",value:function incrementCount(){return this.addCount(1),this}},{key:"decrementCount",value:function decrementCount(){return this.subtractCount(1),this}},{key:"addCount",value:function addCount(value){return this._count+=value,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function subtractCount(value){return this._count-=value,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function addTime(time){return this._time+=time,this.lastTiming=time,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function timeStart(){return this._startTime=Object(hi_res_timestamp.a)(),this._timerPending=!0,this}},{key:"timeEnd",value:function timeEnd(){return this._timerPending?(this.addTime(Object(hi_res_timestamp.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function getAverageCount(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function getAverageTime(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function getHz(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function _checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),Stat}();__webpack_require__.d(__webpack_exports__,"a",(function(){return stats_Stats}));var stats_Stats=function(){function Stats(_ref){var id=_ref.id,stats=_ref.stats;Object(classCallCheck.a)(this,Stats),this.id=id,this.stats={},this._initializeStats(stats),Object.seal(this)}return Object(createClass.a)(Stats,[{key:"get",value:function get(name){var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:name,type:type})}},{key:"reset",value:function reset(){for(var key in this.stats)this.stats[key].reset();return this}},{key:"forEach",value:function forEach(fn){for(var key in this.stats)fn(this.stats[key])}},{key:"getTable",value:function getTable(){var table={};return this.forEach((function(stat){table[stat.name]={time:stat.time||0,count:stat.count||0,average:stat.getAverageTime()||0,hz:stat.getHz()||0}})),table}},{key:"_initializeStats",value:function _initializeStats(){var _this=this,stats=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];stats.forEach((function(stat){return _this._getOrCreate(stat)}))}},{key:"_getOrCreate",value:function _getOrCreate(stat){if(!stat||!stat.name)return null;var name=stat.name,type=stat.type;return this.stats[name]||(this.stats[name]=stat instanceof stat_Stat?stat:new stat_Stat(name,type)),this.stats[name]}},{key:"size",get:function get(){return Object.keys(this.stats).length}}]),Stats}()},,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TransformFeedback}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6),_resource__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(47),_buffer__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(38),_webgl_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(39),_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(127),_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(25),TransformFeedback=function(_Resource){function TransformFeedback(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,TransformFeedback),Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_8__.a)(gl),(_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__.a)(TransformFeedback).call(this,gl,props))).initialize(props),_this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__.a)(_this)),_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__.a)(TransformFeedback,_Resource),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(TransformFeedback,null,[{key:"isSupported",value:function isSupported(gl){return Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_8__.d)(gl)}}]),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(TransformFeedback,[{key:"initialize",value:function initialize(){var _this2=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(_utils__WEBPACK_IMPORTED_MODULE_9__.a)(this.buffers)||this.bind((function(){return _this2._unbindBuffers()})),this.setProps(props),this}},{key:"setProps",value:function setProps(props){"program"in props&&(this.configuration=props.program&&props.program.configuration),"configuration"in props&&(this.configuration=props.configuration),"bindOnUse"in props&&(props=props.bindOnUse),"buffers"in props&&this.setBuffers(props.buffers)}},{key:"setBuffers",value:function setBuffers(){var _this3=this,buffers=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var bufferName in buffers)_this3.setBuffer(bufferName,buffers[bufferName])})),this}},{key:"setBuffer",value:function setBuffer(locationOrName,bufferOrParams){var _this4=this,location=this._getVaryingIndex(locationOrName),_this$_getBufferParam=this._getBufferParams(bufferOrParams),buffer=_this$_getBufferParam.buffer,byteSize=_this$_getBufferParam.byteSize,byteOffset=_this$_getBufferParam.byteOffset;return location<0?(this.unused[locationOrName]=buffer,_utils__WEBPACK_IMPORTED_MODULE_10__.a.warn((function(){return"".concat(_this4.id," unused varying buffer ").concat(locationOrName)}))(),this):(this.buffers[location]=bufferOrParams,this.bindOnUse||this._bindBuffer(location,buffer,byteOffset,byteSize),this)}},{key:"begin",value:function begin(){var primitiveMode=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(primitiveMode),this}},{key:"end",value:function end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function _getBufferParams(bufferOrParams){var byteOffset,byteSize,buffer;return bufferOrParams instanceof _buffer__WEBPACK_IMPORTED_MODULE_7__.a==!1?(buffer=bufferOrParams.buffer,byteSize=bufferOrParams.byteSize,byteOffset=bufferOrParams.byteOffset):buffer=bufferOrParams,void 0===byteOffset&&void 0===byteSize||(byteOffset=byteOffset||0,byteSize=byteSize||buffer.byteLength-byteOffset),{buffer:buffer,byteOffset:byteOffset,byteSize:byteSize}}},{key:"_getVaryingInfo",value:function _getVaryingInfo(locationOrName){return this.configuration&&this.configuration.getVaryingInfo(locationOrName)}},{key:"_getVaryingIndex",value:function _getVaryingIndex(locationOrName){if(this.configuration)return this.configuration.getVaryingInfo(locationOrName).location;var location=Number(locationOrName);return Number.isFinite(location)?location:-1}},{key:"_bindBuffers",value:function _bindBuffers(){if(this.bindOnUse)for(var bufferIndex in this.buffers){var _this$_getBufferParam2=this._getBufferParams(this.buffers[bufferIndex]),buffer=_this$_getBufferParam2.buffer,byteSize=_this$_getBufferParam2.byteSize,byteOffset=_this$_getBufferParam2.byteOffset;this._bindBuffer(bufferIndex,buffer,byteOffset,byteSize)}}},{key:"_unbindBuffers",value:function _unbindBuffers(){if(this.bindOnUse)for(var bufferIndex in this.buffers)this._bindBuffer(bufferIndex,null)}},{key:"_bindBuffer",value:function _bindBuffer(index,buffer){var byteOffset=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,byteSize=arguments.length>3?arguments[3]:void 0,handle=buffer&&buffer.handle;return handle&&void 0!==byteSize?this.gl.bindBufferRange(35982,index,handle,byteOffset,byteSize):this.gl.bindBufferBase(35982,index,handle),this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function _bindHandle(handle){this.gl.bindTransformFeedback(36386,this.handle)}}]),TransformFeedback}(_resource__WEBPACK_IMPORTED_MODULE_6__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Query}));var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6),_resource__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(47),_features__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(318),_features__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(198),_webgl_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(39),_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(17),Query=function(_Resource){function Query(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Query),(_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__.a)(Query).call(this,gl,opts))).target=null,_this._queryPending=!1,_this._pollingPromise=null,Object.seal(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__.a)(_this)),_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__.a)(Query,_Resource),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(Query,null,[{key:"isSupported",value:function isSupported(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],webgl2=Object(_webgl_utils__WEBPACK_IMPORTED_MODULE_9__.d)(gl),hasTimerQuery=Object(_features__WEBPACK_IMPORTED_MODULE_7__.c)(gl,_features__WEBPACK_IMPORTED_MODULE_8__.a.TIMER_QUERY),supported=webgl2||hasTimerQuery,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=opts[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;switch(key){case"queries":supported=supported&&webgl2;break;case"timers":supported=supported&&hasTimerQuery;break;default:Object(_utils__WEBPACK_IMPORTED_MODULE_10__.a)(!1)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return supported}}]),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(Query,[{key:"beginTimeElapsedQuery",value:function beginTimeElapsedQuery(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function beginOcclusionQuery(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$conservative=_ref.conservative,conservative=void 0!==_ref$conservative&&_ref$conservative;return this.begin(conservative?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function beginTransformFeedbackQuery(){return this.begin(35976)}},{key:"begin",value:function begin(target){return this._queryPending?this:(this.target=target,this.gl.beginQuery(this.target,this.handle),this)}},{key:"end",value:function end(){return this._queryPending?this:(this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this)}},{key:"isResultAvailable",value:function isResultAvailable(){if(!this._queryPending)return!1;var resultAvailable=this.gl.getQueryParameter(this.handle,34919);return resultAvailable&&(this._queryPending=!1),resultAvailable}},{key:"isTimerDisjoint",value:function isTimerDisjoint(){return this.gl.getParameter(36795)}},{key:"getResult",value:function getResult(){return this.gl.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function getTimerMilliseconds(){return this.getResult()/1e6}},{key:"createPoll",value:function createPoll(){var _this2=this,limit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var counter=0;return this._pollingPromise=new Promise((function(resolve,reject){requestAnimationFrame((function poll(){_this2.isResultAvailable()?(resolve(_this2.getResult()),_this2._pollingPromise=null):counter++>limit?(reject("Timed out"),_this2._pollingPromise=null):requestAnimationFrame(poll)}))})),this._pollingPromise}},{key:"_createHandle",value:function _createHandle(){return Query.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteQuery(this.handle)}}]),Query}(_resource__WEBPACK_IMPORTED_MODULE_6__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return lab})),__webpack_require__.d(__webpack_exports__,"b",(function(){return hcl}));var _define_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(63),_color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(59),_math_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(165),Xn=.96422,Yn=1,Zn=.82521,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl)return hcl2lab(o);o instanceof _color_js__WEBPACK_IMPORTED_MODULE_1__.b||(o=Object(_color_js__WEBPACK_IMPORTED_MODULE_1__.h)(o));var x,z,r=rgb2lrgb(o.r),g=rgb2lrgb(o.g),b=rgb2lrgb(o.b),y=xyz2lab((.2225045*r+.7168786*g+.0606169*b)/Yn);return r===g&&g===b?x=z=y:(x=xyz2lab((.4360747*r+.3850649*g+.1430804*b)/Xn),z=xyz2lab((.0139322*r+.0971045*g+.7141733*b)/Zn)),new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity)}function lab(l,a,b,opacity){return 1===arguments.length?labConvert(l):new Lab(l,a,b,null==opacity?1:opacity)}function Lab(l,a,b,opacity){this.l=+l,this.a=+a,this.b=+b,this.opacity=+opacity}function xyz2lab(t){return t>t3?Math.pow(t,1/3):t/t2+t0}function lab2xyz(t){return t>t1?t*t*t:t2*(t-t0)}function lrgb2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2lrgb(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);if(o instanceof Lab||(o=labConvert(o)),0===o.a&&0===o.b)return new Hcl(NaN,0<o.l&&o.l<100?0:NaN,o.l,o.opacity);var h=Math.atan2(o.b,o.a)*_math_js__WEBPACK_IMPORTED_MODULE_2__.b;return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function hcl(h,c,l,opacity){return 1===arguments.length?hclConvert(h):new Hcl(h,c,l,null==opacity?1:opacity)}function Hcl(h,c,l,opacity){this.h=+h,this.c=+c,this.l=+l,this.opacity=+opacity}function hcl2lab(o){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h=o.h*_math_js__WEBPACK_IMPORTED_MODULE_2__.a;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.a)(Lab,lab,Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.b)(_color_js__WEBPACK_IMPORTED_MODULE_1__.a,{brighter:function(k){return new Lab(this.l+18*(null==k?1:k),this.a,this.b,this.opacity)},darker:function(k){return new Lab(this.l-18*(null==k?1:k),this.a,this.b,this.opacity)},rgb:function(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;return x=Xn*lab2xyz(x),y=Yn*lab2xyz(y),z=Zn*lab2xyz(z),new _color_js__WEBPACK_IMPORTED_MODULE_1__.b(lrgb2rgb(3.1338561*x-1.6168667*y-.4906146*z),lrgb2rgb(-.9787684*x+1.9161415*y+.033454*z),lrgb2rgb(.0719453*x-.2289914*y+1.4052427*z),this.opacity)}})),Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.a)(Hcl,hcl,Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.b)(_color_js__WEBPACK_IMPORTED_MODULE_1__.a,{brighter:function(k){return new Hcl(this.h,this.c,this.l+18*(null==k?1:k),this.opacity)},darker:function(k){return new Hcl(this.h,this.c,this.l-18*(null==k?1:k),this.opacity)},rgb:function(){return hcl2lab(this).rgb()}}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return cubehelix}));var _define_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(63),_color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(59),_math_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(165),A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelix(h,s,l,opacity){return 1===arguments.length?function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);o instanceof _color_js__WEBPACK_IMPORTED_MODULE_1__.b||(o=Object(_color_js__WEBPACK_IMPORTED_MODULE_1__.h)(o));var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-C*bl)/D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*_math_js__WEBPACK_IMPORTED_MODULE_2__.b-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}(h):new Cubehelix(h,s,l,null==opacity?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.a)(Cubehelix,cubehelix,Object(_define_js__WEBPACK_IMPORTED_MODULE_0__.b)(_color_js__WEBPACK_IMPORTED_MODULE_1__.a,{brighter:function(k){return k=null==k?_color_js__WEBPACK_IMPORTED_MODULE_1__.c:Math.pow(_color_js__WEBPACK_IMPORTED_MODULE_1__.c,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?_color_js__WEBPACK_IMPORTED_MODULE_1__.d:Math.pow(_color_js__WEBPACK_IMPORTED_MODULE_1__.d,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=isNaN(this.h)?0:(this.h+120)*_math_js__WEBPACK_IMPORTED_MODULE_2__.a,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new _color_js__WEBPACK_IMPORTED_MODULE_1__.b(255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)),this.opacity)}}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return tickIncrement})),__webpack_require__.d(__webpack_exports__,"c",(function(){return tickStep}));var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),stop<start?-step1:step1}__webpack_exports__.a=function(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)===(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement(start,stop,count))||!isFinite(step))return[];if(step>0)for(start=Math.ceil(start/step),stop=Math.floor(stop/step),ticks=new Array(n=Math.ceil(stop-start+1));++i<n;)ticks[i]=(start+i)*step;else for(start=Math.floor(start*step),stop=Math.ceil(stop*step),ticks=new Array(n=Math.ceil(start-stop+1));++i<n;)ticks[i]=(start-i)/step;return reverse&&ticks.reverse(),ticks}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=function(values,valueof){let min,max;if(void 0===valueof)for(const value of values)null!=value&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)));else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)))}return[min,max]}},function(module,__webpack_exports__,__webpack_require__){"use strict";function max(values,valueof){let max;if(void 0===valueof)for(const value of values)null!=value&&(max<value||void 0===max&&value>=value)&&(max=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(max<value||void 0===max&&value>=value)&&(max=value)}return max}__webpack_require__.d(__webpack_exports__,"a",(function(){return max}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return normalizeViewportProps}));var _web_mercator_viewport__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(196),_math_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(56),MAX_LATITUDE=85.05113,MIN_LATITUDE=-85.05113;function normalizeViewportProps(_ref){var width=_ref.width,height=_ref.height,longitude=_ref.longitude,latitude=_ref.latitude,zoom=_ref.zoom,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?0:_ref$pitch,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?0:_ref$bearing;(longitude<-180||longitude>180)&&(longitude=Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.c)(longitude+180,360)-180),(bearing<-180||bearing>180)&&(bearing=Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.c)(bearing+180,360)-180);var flatViewport=new _web_mercator_viewport__WEBPACK_IMPORTED_MODULE_0__.a({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom}),topY=flatViewport.project([longitude,MAX_LATITUDE])[1],bottomY=flatViewport.project([longitude,MIN_LATITUDE])[1],shiftY=0;return bottomY-topY<height&&(zoom+=Math.log2(height/(bottomY-topY)),topY=(flatViewport=new _web_mercator_viewport__WEBPACK_IMPORTED_MODULE_0__.a({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom})).project([longitude,MAX_LATITUDE])[1],bottomY=flatViewport.project([longitude,MIN_LATITUDE])[1]),topY>0?shiftY=topY:bottomY<height&&(shiftY=bottomY-height),shiftY&&(latitude=flatViewport.unproject([width/2,height/2+shiftY])[1]),{width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom,pitch:pitch,bearing:bearing}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(2),createClass=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(5),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(6),composite_layer=__webpack_require__(418),get=__webpack_require__(20),lib_layer=__webpack_require__(153),model=__webpack_require__(255),geometry_geometry=__webpack_require__(430),DEFAULT_COLOR=[0,0,0,255],defaultProps={radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,getPosition:{type:"accessor",value:function value(x){return x.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:DEFAULT_COLOR},getLineColor:{type:"accessor",value:DEFAULT_COLOR},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},scatterplot_layer_ScatterplotLayer=function(_Layer){function ScatterplotLayer(){return Object(classCallCheck.a)(this,ScatterplotLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ScatterplotLayer).apply(this,arguments))}return Object(inherits.a)(ScatterplotLayer,_Layer),Object(createClass.a)(ScatterplotLayer,[{key:"getShaders",value:function getShaders(id){return Object(get.a)(Object(getPrototypeOf.a)(ScatterplotLayer.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  float outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  } \n  if (distToCenter > innerUnitRadius) {\n    gl_FragColor = vLineColor;\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:["project32","picking"]})}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function updateState(_ref){var props=_ref.props,oldProps=_ref.oldProps,changeFlags=_ref.changeFlags;if(Object(get.a)(Object(getPrototypeOf.a)(ScatterplotLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags}),changeFlags.extensionsChanged){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function draw(_ref2){var uniforms=_ref2.uniforms,viewport=this.context.viewport,_this$props=this.props,radiusScale=_this$props.radiusScale,radiusMinPixels=_this$props.radiusMinPixels,radiusMaxPixels=_this$props.radiusMaxPixels,stroked=_this$props.stroked,filled=_this$props.filled,lineWidthUnits=_this$props.lineWidthUnits,lineWidthScale=_this$props.lineWidthScale,lineWidthMinPixels=_this$props.lineWidthMinPixels,lineWidthMaxPixels=_this$props.lineWidthMaxPixels,widthMultiplier="pixels"===lineWidthUnits?viewport.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},uniforms,{stroked:stroked?1:0,filled:filled,radiusScale:radiusScale,radiusMinPixels:radiusMinPixels,radiusMaxPixels:radiusMaxPixels,lineWidthScale:lineWidthScale*widthMultiplier,lineWidthMinPixels:lineWidthMinPixels,lineWidthMaxPixels:lineWidthMaxPixels})).draw()}},{key:"_getModel",value:function _getModel(gl){return new model.a(gl,Object.assign(this.getShaders(),{id:this.props.id,geometry:new geometry_geometry.a({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}}),isInstanced:!0}))}}]),ScatterplotLayer}(lib_layer.a);scatterplot_layer_ScatterplotLayer.layerName="ScatterplotLayer",scatterplot_layer_ScatterplotLayer.defaultProps=defaultProps;var esm=__webpack_require__(51),Tesselator=esm.a.Tesselator,path_tesselator_PathTesselator=function(_Tesselator){function PathTesselator(_ref){var data=_ref.data,getGeometry=_ref.getGeometry,positionFormat=_ref.positionFormat,fp64=_ref.fp64;return Object(classCallCheck.a)(this,PathTesselator),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PathTesselator).call(this,{data:data,getGeometry:getGeometry,positionFormat:positionFormat,attributes:{startPositions:{size:3,padding:3,type:fp64?Float64Array:Float32Array},endPositions:{size:3,padding:3,type:fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray},startPositions64XyLow:{size:2,padding:2,fp64Only:!0},endPositions64XyLow:{size:2,padding:2,fp64Only:!0}}}))}return Object(inherits.a)(PathTesselator,_Tesselator),Object(createClass.a)(PathTesselator,[{key:"get",value:function get(attributeName){return this.attributes[attributeName]}},{key:"getGeometrySize",value:function getGeometrySize(path){var numPoints=this.getPathLength(path);return numPoints<2?0:this.isClosed(path)?numPoints<3?0:numPoints+1:numPoints-1}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(path,context){var _this$attributes=this.attributes,startPositions=_this$attributes.startPositions,endPositions=_this$attributes.endPositions,segmentTypes=_this$attributes.segmentTypes,geometrySize=context.geometrySize;if(0!==geometrySize)for(var startPoint,endPoint,isPathClosed=this.isClosed(path),i=context.vertexStart,ptIndex=0;ptIndex<geometrySize;i++,ptIndex++)startPoint=endPoint||this.getPointOnPath(path,0),endPoint=this.getPointOnPath(path,ptIndex+1),segmentTypes[i]=0,0===ptIndex&&(segmentTypes[i]+=isPathClosed?4:1),ptIndex===geometrySize-1&&(segmentTypes[i]+=isPathClosed?4:2),startPositions[3*i+3]=startPoint[0],startPositions[3*i+4]=startPoint[1],startPositions[3*i+5]=startPoint[2]||0,endPositions[3*i]=endPoint[0],endPositions[3*i+1]=endPoint[1],endPositions[3*i+2]=endPoint[2]||0}},{key:"getPathLength",value:function getPathLength(path){return Number.isFinite(path[0])?path.length/this.positionSize:path.length}},{key:"getPointOnPath",value:function getPointOnPath(path,index){if(Number.isFinite(path[0])){var positionSize=this.positionSize;return index*positionSize>=path.length&&(index+=1-path.length/positionSize),[path[index*positionSize],path[index*positionSize+1],3===positionSize?path[index*positionSize+2]:0]}return index>=path.length&&(index+=1-path.length),path[index]}},{key:"isClosed",value:function isClosed(path){var numPoints=this.getPathLength(path),firstPoint=this.getPointOnPath(path,0),lastPoint=this.getPointOnPath(path,numPoints-1);return firstPoint[0]===lastPoint[0]&&firstPoint[1]===lastPoint[1]&&firstPoint[2]===lastPoint[2]}}]),PathTesselator}(Tesselator),path_layer_DEFAULT_COLOR=[0,0,0,255],path_layer_defaultProps={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},dashJustified:!1,billboard:!1,getPath:{type:"accessor",value:function value(object){return object.path}},getColor:{type:"accessor",value:path_layer_DEFAULT_COLOR},getWidth:{type:"accessor",value:1},getDashArray:{type:"accessor",value:[0,0]}},ATTRIBUTE_TRANSITION={enter:function enter(value,chunk){return chunk.length?chunk.subarray(chunk.length-value.length):value}},path_layer_PathLayer=function(_Layer){function PathLayer(){return Object(classCallCheck.a)(this,PathLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PathLayer).apply(this,arguments))}return Object(inherits.a)(PathLayer,_Layer),Object(createClass.a)(PathLayer,[{key:"getShaders",value:function getShaders(){return Object(get.a)(Object(getPrototypeOf.a)(PathLayer.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec2 instanceLeftPositions64xyLow;\nattribute vec2 instanceStartPositions64xyLow;\nattribute vec2 instanceEndPositions64xyLow;\nattribute vec2 instanceRightPositions64xyLow;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  float relativePosition, bool isEnd, bool isJoint,\n  vec2 width, vec2 widthPixels\n) {\n  vec2 deltaA = (currPoint.xy - prevPoint.xy) / width;\n  vec2 deltaB = (nextPoint.xy - currPoint.xy) / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n  lenA = lenA > EPSILON ? lenA : 0.0;\n  lenB = lenB > EPSILON ? lenB : 0.0;\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  float offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  float cornerPosition = isJoint ?\n    0.0 :\n    flipIfTrue(turnsRight == (relativePosition > 0.0));\n  cornerPosition *=\n    float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) * cosHalfA);\n  if (cornerPosition < 0.0) {\n    offsetScale = min(offsetScale, L / max(cosHalfA, EPSILON));\n  }\n\n  vMiterLength = cornerPosition >= 0.0 ?\n    mix(offsetScale, 0.0, cornerPosition) :\n    offsetScale * cornerPosition;\n  vMiterLength -= sinHalfA * jointType;\n\n  float offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  cornerPosition = isCap ? (1.0 - positions.z) : 0.;\n  if (isStartCap) {\n    offsetVec = mix(dirB, perpB, cornerPosition);\n  }\n  if (isEndCap) {\n    offsetVec = mix(dirA, perpA, cornerPosition);\n  }\n  if (isCap) {\n    offsetScale = mix(4.0 * jointType, 1.0, cornerPosition);\n    vMiterLength = 1.0 - cornerPosition;\n    offsetDirection = mix(flipIfTrue(isStartCap), positions.y, cornerPosition);\n  }\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n  vDashArray = instanceDashArrays;\n  vPathLength = L;\n  vec2 offsetFromStartOfPath = vCornerOffset;\n  if (isEnd) {\n    offsetFromStartOfPath += deltaA;\n  }\n  vec2 dir = isEnd ? dirA : dirB;\n  vPathPosition = vec2(\n    positions.y + positions.z * offsetDirection,\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(vCornerOffset * widthPixels * isValid, 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  return currPoint + vec3(offset.xy / widthPixels * width, 0.0);\n}\nvec3 lineJoin(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\n  float relativePosition = positions.y;\n  bool isEnd = positions.x > EPSILON;\n  bool isJoint = positions.z > EPSILON;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n\n  vec2 width = billboard ? project_pixel_size_to_clipspace(widthPixels) : project_pixel_size(widthPixels);\n\n  return lineJoin(\n    prevPoint, currPoint, nextPoint,\n    relativePosition, isEnd, isJoint,\n    width, widthPixels\n  );\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.worldPosition = instanceStartPositions;\n  geometry.worldPositionAlt = instanceEndPositions;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec2 prevPosition64xyLow = mix(instanceLeftPositions64xyLow, instanceStartPositions64xyLow, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartPositions64xyLow, instanceEndPositions64xyLow, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec2 nextPosition64xyLow = mix(instanceEndPositions64xyLow, instanceRightPositions64xyLow, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64xyLow, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64xyLow, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64xyLow, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64xyLow);\n    currPosition = project_position(currPosition, currPosition64xyLow);\n    nextPosition = project_position(nextPosition, nextPosition64xyLow);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\nuniform float alignMode;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nfloat mod2(float a, float b) {\n  return a - floor(a / b) * b;\n}\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\nbool dash_isFragInGap() {\n  float solidLength = vDashArray.x;\n  float gapLength = vDashArray.y;\n\n  float unitLength = solidLength + gapLength;\n\n  if (unitLength == 0.0) {\n    return false;\n  }\n\n  unitLength = mix(\n    unitLength,\n    vPathLength / round(vPathLength / unitLength),\n    alignMode\n  );\n\n  float offset = alignMode * solidLength / 2.0;\n\n  return gapLength > 0.0 &&\n    vPathPosition.y >= 0.0 &&\n    vPathPosition.y <= vPathLength &&\n    mod2(vPathPosition.y + offset, unitLength) > solidLength;\n}\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n  if (jointType > 0.0 && vMiterLength > 0.0 && length(vCornerOffset) > 1.0) {\n    discard;\n  }\n  if (jointType == 0.0 && vMiterLength > miterLimit) {\n    discard;\n  }\n  if (vColor.a == 0.0 || dash_isFragInGap()) {\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:["project32","picking"]})}},{key:"initializeState",value:function initializeState(){var _this=this;this.getAttributeManager().addInstanced({startPositions:{size:3,offset:12,type:5130,fp64:this.use64bitPositions(),transition:ATTRIBUTE_TRANSITION,accessor:"getPath",update:this.calculateStartPositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{offset:0},instanceStartPositions:{offset:12}}},endPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:ATTRIBUTE_TRANSITION,accessor:"getPath",update:this.calculateEndPositions,noAlloc:!0,shaderAttributes:{instanceEndPositions:{offset:0},instanceRightPositions:{offset:12}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:ATTRIBUTE_TRANSITION,defaultValue:1},instanceDashArrays:{size:2,accessor:"getDashArray"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:ATTRIBUTE_TRANSITION,defaultValue:path_layer_DEFAULT_COLOR},instancePickingColors:{size:3,type:5121,accessor:function accessor(object,_ref){var index=_ref.index,value=_ref.target;return _this.encodePickingColor(index,value)}}}),this.setState({pathTesselator:new path_tesselator_PathTesselator({fp64:this.use64bitPositions()})})}},{key:"updateState",value:function updateState(_ref2){var oldProps=_ref2.oldProps,props=_ref2.props,changeFlags=_ref2.changeFlags;Object(get.a)(Object(getPrototypeOf.a)(PathLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags});var attributeManager=this.getAttributeManager();if(changeFlags.dataChanged||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getPath)){var pathTesselator=this.state.pathTesselator;pathTesselator.updateGeometry({data:props.data,getGeometry:props.getPath,positionFormat:props.positionFormat,dataChanged:changeFlags.dataChanged}),this.setState({numInstances:pathTesselator.instanceCount,bufferLayout:pathTesselator.bufferLayout}),changeFlags.dataChanged||attributeManager.invalidateAll()}if(changeFlags.extensionsChanged){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),attributeManager.invalidateAll()}}},{key:"draw",value:function draw(_ref3){var uniforms=_ref3.uniforms,viewport=this.context.viewport,_this$props=this.props,rounded=_this$props.rounded,billboard=_this$props.billboard,miterLimit=_this$props.miterLimit,widthUnits=_this$props.widthUnits,widthScale=_this$props.widthScale,widthMinPixels=_this$props.widthMinPixels,widthMaxPixels=_this$props.widthMaxPixels,dashJustified=_this$props.dashJustified,widthMultiplier="pixels"===widthUnits?viewport.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},uniforms,{jointType:Number(rounded),billboard:billboard,alignMode:Number(dashJustified),widthScale:widthScale*widthMultiplier,miterLimit:miterLimit,widthMinPixels:widthMinPixels,widthMaxPixels:widthMaxPixels})).draw()}},{key:"_getModel",value:function _getModel(gl){return new model.a(gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new geometry_geometry.a({drawMode:4,attributes:{indices:new Uint16Array([0,2,1,1,2,4,1,4,3,3,4,5]),positions:new Float32Array([0,0,1,0,-1,0,0,1,0,1,-1,0,1,1,0,1,0,1])}}),isInstanced:!0}))}},{key:"calculateStartPositions",value:function calculateStartPositions(attribute){var pathTesselator=this.state.pathTesselator;attribute.bufferLayout=pathTesselator.bufferLayout,attribute.value=pathTesselator.get("startPositions")}},{key:"calculateEndPositions",value:function calculateEndPositions(attribute){var pathTesselator=this.state.pathTesselator;attribute.bufferLayout=pathTesselator.bufferLayout,attribute.value=pathTesselator.get("endPositions")}},{key:"calculateSegmentTypes",value:function calculateSegmentTypes(attribute){var pathTesselator=this.state.pathTesselator;attribute.bufferLayout=pathTesselator.bufferLayout,attribute.value=pathTesselator.get("segmentTypes")}}]),PathLayer}(lib_layer.a);path_layer_PathLayer.layerName="PathLayer",path_layer_PathLayer.defaultProps=path_layer_defaultProps;var assertThisInitialized=__webpack_require__(7),phong_material_defaultProps={ambient:.35,diffuse:.6,shininess:32,specularColor:[30,30,30]},phong_material_PhongMaterial=function(_Material){function PhongMaterial(props){var _this;return Object(classCallCheck.a)(this,PhongMaterial),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PhongMaterial).call(this,props)),props=Object.assign({},phong_material_defaultProps,props),Object.assign(Object(assertThisInitialized.a)(_this),props),_this}return Object(inherits.a)(PhongMaterial,_Material),PhongMaterial}((function Material(){Object(classCallCheck.a)(this,Material)})),features_features=__webpack_require__(318),webgl_features_table=__webpack_require__(198),earcut=__webpack_require__(433),earcut_default=__webpack_require__.n(earcut);function validate(polygon){if(polygon=polygon&&polygon.positions||polygon,!Array.isArray(polygon)&&!ArrayBuffer.isView(polygon))throw new Error("invalid polygon")}function isSimple(polygon){return polygon.length>=1&&polygon[0].length>=2&&Number.isFinite(polygon[0][0])}function isNestedRingClosed(simplePolygon){var p0=simplePolygon[0],p1=simplePolygon[simplePolygon.length-1];return p0[0]===p1[0]&&p0[1]===p1[1]&&p0[2]===p1[2]}function isFlatRingClosed(positions,size,startIndex,endIndex){for(var i=0;i<size;i++)if(positions[startIndex+i]!==positions[endIndex-size+i])return!1;return!0}function copyNestedRing(target,targetStartIndex,simplePolygon,size){for(var targetIndex=targetStartIndex,len=simplePolygon.length,i=0;i<len;i++)for(var j=0;j<size;j++)target[targetIndex++]=simplePolygon[i][j]||0;if(!isNestedRingClosed(simplePolygon))for(var _j=0;_j<size;_j++)target[targetIndex++]=simplePolygon[0][_j]||0;return targetIndex}function copyFlatRing(target,targetStartIndex,positions,size){var srcStartIndex=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,srcEndIndex=arguments.length>5?arguments[5]:void 0,srcLength=(srcEndIndex=srcEndIndex||positions.length)-srcStartIndex;if(srcLength<=0)return targetStartIndex;for(var targetIndex=targetStartIndex,i=0;i<srcLength;i++)target[targetIndex++]=positions[srcStartIndex+i];if(!isFlatRingClosed(positions,size,srcStartIndex,srcEndIndex))for(var _i=0;_i<size;_i++)target[targetIndex++]=positions[srcStartIndex+_i];return targetIndex}function getNestedVertexCount(simplePolygon){return(isNestedRingClosed(simplePolygon)?0:1)+simplePolygon.length}function getFlatVertexCount(positions,size){var startIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,endIndex=arguments.length>3?arguments[3]:void 0;return startIndex>=(endIndex=endIndex||positions.length)?0:(isFlatRingClosed(positions,size,startIndex,endIndex)?0:1)+(endIndex-startIndex)/size}function getVertexCount(polygon,positionSize){if(validate(polygon),polygon.positions){var _polygon=polygon,positions=_polygon.positions,holeIndices=_polygon.holeIndices;if(holeIndices){for(var vertexCount=0,i=0;i<=holeIndices.length;i++)vertexCount+=getFlatVertexCount(polygon.positions,positionSize,holeIndices[i-1],holeIndices[i]);return vertexCount}polygon=positions}if(Number.isFinite(polygon[0]))return getFlatVertexCount(polygon,positionSize);if(!isSimple(polygon)){var _vertexCount=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=polygon[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_vertexCount+=getNestedVertexCount(_step.value)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return _vertexCount}return getNestedVertexCount(polygon)}var polygon_tesselator_PolygonTesselator=function(_Tesselator){function PolygonTesselator(_ref){var data=_ref.data,getGeometry=_ref.getGeometry,fp64=_ref.fp64,positionFormat=_ref.positionFormat,_ref$IndexType=_ref.IndexType,IndexType=void 0===_ref$IndexType?Uint32Array:_ref$IndexType;return Object(classCallCheck.a)(this,PolygonTesselator),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PolygonTesselator).call(this,{data:data,getGeometry:getGeometry,positionFormat:positionFormat,attributes:{positions:{size:3,type:fp64?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:IndexType,size:1}}}))}return Object(inherits.a)(PolygonTesselator,_Tesselator),Object(createClass.a)(PolygonTesselator,[{key:"get",value:function get(attributeName){return"indices"===attributeName?this.attributes.indices.subarray(0,this.vertexCount):this.attributes[attributeName]}},{key:"getGeometrySize",value:function getGeometrySize(polygon){return getVertexCount(polygon,this.positionSize)}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(polygon,context){polygon=function normalize(polygon,positionSize,vertexCount){validate(polygon),vertexCount=vertexCount||getVertexCount(polygon,positionSize);var positions=new Float64Array(vertexCount*positionSize),holeIndices=[];if(polygon.positions){var _polygon2=polygon,srcPositions=_polygon2.positions,srcHoleIndices=_polygon2.holeIndices;if(srcHoleIndices){for(var targetIndex=0,i=0;i<=srcHoleIndices.length;i++)targetIndex=copyFlatRing(positions,targetIndex,srcPositions,positionSize,srcHoleIndices[i-1],srcHoleIndices[i]),holeIndices.push(targetIndex);return holeIndices.pop(),{positions:positions,holeIndices:holeIndices}}polygon=srcPositions}if(Number.isFinite(polygon[0]))return copyFlatRing(positions,0,polygon,positionSize),{positions:positions,holeIndices:null};if(!isSimple(polygon)){var _targetIndex=0,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=polygon[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){_targetIndex=copyNestedRing(positions,_targetIndex,_step2.value,positionSize),holeIndices.push(_targetIndex)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return holeIndices.pop(),{positions:positions,holeIndices:holeIndices}}return copyNestedRing(positions,0,polygon,positionSize),{positions:positions,holeIndices:null}}(polygon,this.positionSize,context.geometrySize),this._updateIndices(polygon,context),this._updatePositions(polygon,context)}},{key:"_updateIndices",value:function _updateIndices(polygon,_ref2){var geometryIndex=_ref2.geometryIndex,offset=_ref2.vertexStart,indexStart=_ref2.indexStart,attributes=this.attributes,indexLayout=this.indexLayout,typedArrayManager=this.typedArrayManager,target=attributes.indices,i=indexStart,indices=function getSurfaceIndices(normalizedPolygon,positionSize){var holeIndices=null;return normalizedPolygon.holeIndices&&(holeIndices=normalizedPolygon.holeIndices.map((function(positionIndex){return positionIndex/positionSize}))),earcut_default()(normalizedPolygon.positions,holeIndices,positionSize)}(polygon,this.positionSize);target=typedArrayManager.allocate(target,indexStart+indices.length,{copy:!0});for(var j=0;j<indices.length;j++)target[i++]=indices[j]+offset;indexLayout[geometryIndex]=indices.length,attributes.indices=target}},{key:"_updatePositions",value:function _updatePositions(polygon,_ref3){for(var vertexStart=_ref3.vertexStart,geometrySize=_ref3.geometrySize,_this$attributes=this.attributes,positions=_this$attributes.positions,vertexValid=_this$attributes.vertexValid,positionSize=this.positionSize,i=vertexStart,polygonPositions=polygon.positions,holeIndices=polygon.holeIndices,j=0;j<geometrySize;j++){var x=polygonPositions[j*positionSize],y=polygonPositions[j*positionSize+1],z=positionSize>2?polygonPositions[j*positionSize+2]:0;positions[3*i]=x,positions[3*i+1]=y,positions[3*i+2]=z,vertexValid[i]=1,i++}if(holeIndices)for(var _j=0;_j<holeIndices.length;_j++)vertexValid[vertexStart+holeIndices[_j]/positionSize-1]=0;vertexValid[vertexStart+geometrySize-1]=0}}]),PolygonTesselator}(esm.a.Tesselator),solid_polygon_layer_vertex_main_glsl="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec2 positions64xyLow;\n  vec2 nextPositions64xyLow;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n  vec3 pos;\n  vec2 pos64xyLow;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64xyLow = mix(props.positions64xyLow, props.nextPositions64xyLow, vertexPositions.x);\n  isValid = vertexValid;\n#else\n  pos = props.positions;\n  pos64xyLow = props.positions64xyLow;\n  isValid = 1.0;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n    \n#ifdef IS_SIDE_VERTEX\n    normal = vec3(props.positions.y - props.nextPositions.y, props.nextPositions.x - props.positions.x, 0.0);\n    normal = project_offset_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n    geometry.normal = normal;\n  }\n\n  gl_Position = project_position_to_clipspace(pos, pos64xyLow, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n  picking_setPickingColor(props.pickingColors);\n}\n",solid_polygon_layer_vertex_top_glsl="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(solid_polygon_layer_vertex_main_glsl,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64xyLow = positions64xyLow;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),solid_polygon_layer_vertex_side_glsl="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec3 nextPositions;\nattribute vec2 nextPositions64xyLow;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(solid_polygon_layer_vertex_main_glsl,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = instancePositions;\n  props.positions64xyLow = instancePositions64xyLow;\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n  props.nextPositions = nextPositions;\n  props.nextPositions64xyLow = nextPositions64xyLow;\n\n  calculatePosition(props);\n}\n"),solid_polygon_layer_DEFAULT_COLOR=[0,0,0,255],defaultMaterial=new phong_material_PhongMaterial,solid_polygon_layer_defaultProps={filled:!0,extruded:!1,wireframe:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function value(f){return f.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:solid_polygon_layer_DEFAULT_COLOR},getLineColor:{type:"accessor",value:solid_polygon_layer_DEFAULT_COLOR},material:defaultMaterial},solid_polygon_layer_ATTRIBUTE_TRANSITION={enter:function enter(value,chunk){return chunk.length?chunk.subarray(chunk.length-value.length):value}},solid_polygon_layer_SolidPolygonLayer=function(_Layer){function SolidPolygonLayer(){return Object(classCallCheck.a)(this,SolidPolygonLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(SolidPolygonLayer).apply(this,arguments))}return Object(inherits.a)(SolidPolygonLayer,_Layer),Object(createClass.a)(SolidPolygonLayer,[{key:"getShaders",value:function getShaders(vs){return Object(get.a)(Object(getPrototypeOf.a)(SolidPolygonLayer.prototype),"getShaders",this).call(this,{vs:vs,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid < 0.5) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{},modules:["project32","gouraud-lighting","picking"]})}},{key:"initializeState",value:function initializeState(){var _this=this,gl=this.context.gl;this.setState({numInstances:0,polygonTesselator:new polygon_tesselator_PolygonTesselator({fp64:this.use64bitPositions(),IndexType:!gl||Object(features_features.b)(gl,webgl_features_table.a.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var attributeManager=this.getAttributeManager();attributeManager.remove(["instancePickingColors"]),attributeManager.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:solid_polygon_layer_ATTRIBUTE_TRANSITION,accessor:"getPolygon",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{positions:{offset:0,divisor:0},instancePositions:{offset:0,divisor:1},nextPositions:{offset:12,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:solid_polygon_layer_ATTRIBUTE_TRANSITION,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:solid_polygon_layer_ATTRIBUTE_TRANSITION,accessor:"getFillColor",defaultValue:solid_polygon_layer_DEFAULT_COLOR,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:solid_polygon_layer_ATTRIBUTE_TRANSITION,accessor:"getLineColor",defaultValue:solid_polygon_layer_DEFAULT_COLOR,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:function accessor(object,_ref){var index=_ref.index,value=_ref.target;return _this.encodePickingColor(index,value)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"draw",value:function draw(_ref2){var uniforms=_ref2.uniforms,_this$props=this.props,extruded=_this$props.extruded,filled=_this$props.filled,wireframe=_this$props.wireframe,elevationScale=_this$props.elevationScale,_this$state=this.state,topModel=_this$state.topModel,sideModel=_this$state.sideModel,polygonTesselator=_this$state.polygonTesselator,renderUniforms=Object.assign({},uniforms,{extruded:Boolean(extruded),elevationScale:elevationScale});sideModel&&(sideModel.setInstanceCount(polygonTesselator.instanceCount-1),sideModel.setUniforms(renderUniforms),wireframe&&(sideModel.setDrawMode(3),sideModel.setUniforms({isWireframe:!0}).draw()),filled&&(sideModel.setDrawMode(6),sideModel.setUniforms({isWireframe:!1}).draw())),topModel&&(topModel.setVertexCount(polygonTesselator.get("indices").length),topModel.setUniforms(renderUniforms).draw())}},{key:"updateState",value:function updateState(updateParams){Object(get.a)(Object(getPrototypeOf.a)(SolidPolygonLayer.prototype),"updateState",this).call(this,updateParams),this.updateGeometry(updateParams);var props=updateParams.props,oldProps=updateParams.oldProps,changeFlags=updateParams.changeFlags,attributeManager=this.getAttributeManager();(changeFlags.extensionsChanged||props.filled!==oldProps.filled||props.extruded!==oldProps.extruded)&&(this.state.models&&this.state.models.forEach((function(model){return model.delete()})),this.setState(this._getModels(this.context.gl)),attributeManager.invalidateAll())}},{key:"updateGeometry",value:function updateGeometry(_ref3){var props=_ref3.props,changeFlags=(_ref3.oldProps,_ref3.changeFlags);if(changeFlags.dataChanged||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getPolygon)){var polygonTesselator=this.state.polygonTesselator;polygonTesselator.updateGeometry({data:props.data,getGeometry:props.getPolygon,positionFormat:props.positionFormat,fp64:this.use64bitPositions(),dataChanged:changeFlags.dataChanged}),this.setState({numInstances:polygonTesselator.instanceCount,bufferLayout:polygonTesselator.bufferLayout}),changeFlags.dataChanged||this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function _getModels(gl){var topModel,sideModel,_this$props2=this.props,id=_this$props2.id,filled=_this$props2.filled,extruded=_this$props2.extruded;if(filled){var shaders=this.getShaders(solid_polygon_layer_vertex_top_glsl);shaders.defines.NON_INSTANCED_MODEL=1,topModel=new model.a(gl,Object.assign({},shaders,{id:"".concat(id,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0}))}return extruded&&((sideModel=new model.a(gl,Object.assign({},this.getShaders(solid_polygon_layer_vertex_side_glsl),{id:"".concat(id,"-side"),geometry:new geometry_geometry.a({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,1,0,1,0,0,1,0])}}}),instanceCount:0,isInstanced:1}))).userData.excludeAttributes={indices:!0}),{models:[sideModel,topModel].filter(Boolean),topModel:topModel,sideModel:sideModel}}},{key:"calculateIndices",value:function calculateIndices(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.bufferLayout=polygonTesselator.indexLayout,attribute.value=polygonTesselator.get("indices")}},{key:"calculatePositions",value:function calculatePositions(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.bufferLayout=polygonTesselator.bufferLayout,attribute.value=polygonTesselator.get("positions")}},{key:"calculateVertexValid",value:function calculateVertexValid(attribute){attribute.value=this.state.polygonTesselator.get("vertexValid")}}]),SolidPolygonLayer}(lib_layer.a);function replaceInRange(_ref){for(var data=_ref.data,getIndex=_ref.getIndex,dataRange=_ref.dataRange,replace=_ref.replace,_dataRange$startRow=dataRange.startRow,startRow=void 0===_dataRange$startRow?0:_dataRange$startRow,_dataRange$endRow=dataRange.endRow,endRow=void 0===_dataRange$endRow?1/0:_dataRange$endRow,count=data.length,replaceStart=count,replaceEnd=count,i=0;i<count;i++){var row=getIndex(data[i]);if(replaceStart>i&&row>=startRow&&(replaceStart=i),row>=endRow){replaceEnd=i;break}}for(var index=replaceStart,dataLengthChanged=replaceEnd-replaceStart!==replace.length,endChunk=dataLengthChanged&&data.slice(replaceEnd),_i=0;_i<replace.length;_i++)data[index++]=replace[_i];if(dataLengthChanged){for(var _i2=0;_i2<endChunk.length;_i2++)data[index++]=endChunk[_i2];data.length=index}return{startRow:replaceStart,endRow:replaceStart+replace.length}}solid_polygon_layer_SolidPolygonLayer.layerName="SolidPolygonLayer",solid_polygon_layer_SolidPolygonLayer.defaultProps=solid_polygon_layer_defaultProps;var log=__webpack_require__(10);function separateGeojsonFeatures(features,wrapFeature){for(var dataRange=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},separated={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},_dataRange$startRow=dataRange.startRow,startRow=void 0===_dataRange$startRow?0:_dataRange$startRow,_dataRange$endRow=dataRange.endRow,endRow=void 0===_dataRange$endRow?features.length:_dataRange$endRow,featureIndex=startRow;featureIndex<endRow;featureIndex++){var feature=features[featureIndex];log.a.assert(feature&&feature.geometry,"GeoJSON does not have geometry");var geometry=feature.geometry;if("GeometryCollection"===geometry.type){log.a.assert(Array.isArray(geometry.geometries),"GeoJSON does not have geometries array");for(var geometries=geometry.geometries,i=0;i<geometries.length;i++){separateGeometry(geometries[i],separated,wrapFeature,feature,featureIndex)}}else separateGeometry(geometry,separated,wrapFeature,feature,featureIndex)}return separated}function separateGeometry(geometry,separated,wrapFeature,sourceFeature,sourceFeatureIndex){var type=geometry.type,coordinates=geometry.coordinates,pointFeatures=separated.pointFeatures,lineFeatures=separated.lineFeatures,polygonFeatures=separated.polygonFeatures,polygonOutlineFeatures=separated.polygonOutlineFeatures;if(function validateGeometry(type,coordinates){var nestLevel=COORDINATE_NEST_LEVEL[type];log.a.assert(nestLevel,"Unknown GeoJSON type ".concat(type));for(;coordinates&&--nestLevel>0;)coordinates=coordinates[0];return coordinates&&Number.isFinite(coordinates[0])}(type,coordinates))switch(type){case"Point":pointFeatures.push(wrapFeature({geometry:geometry},sourceFeature,sourceFeatureIndex));break;case"MultiPoint":coordinates.forEach((function(point){pointFeatures.push(wrapFeature({geometry:{type:"Point",coordinates:point}},sourceFeature,sourceFeatureIndex))}));break;case"LineString":lineFeatures.push(wrapFeature({geometry:geometry},sourceFeature,sourceFeatureIndex));break;case"MultiLineString":coordinates.forEach((function(path){lineFeatures.push(wrapFeature({geometry:{type:"LineString",coordinates:path}},sourceFeature,sourceFeatureIndex))}));break;case"Polygon":polygonFeatures.push(wrapFeature({geometry:geometry},sourceFeature,sourceFeatureIndex)),coordinates.forEach((function(path){polygonOutlineFeatures.push(wrapFeature({geometry:{type:"LineString",coordinates:path}},sourceFeature,sourceFeatureIndex))}));break;case"MultiPolygon":coordinates.forEach((function(polygon){polygonFeatures.push(wrapFeature({geometry:{type:"Polygon",coordinates:polygon}},sourceFeature,sourceFeatureIndex)),polygon.forEach((function(path){polygonOutlineFeatures.push(wrapFeature({geometry:{type:"LineString",coordinates:path}},sourceFeature,sourceFeatureIndex))}))}))}else log.a.warn("".concat(type," coordinates are malformed"))()}var COORDINATE_NEST_LEVEL={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};__webpack_require__.d(__webpack_exports__,"a",(function(){return geojson_layer_GeoJsonLayer}));var geojson_layer_defaultMaterial=new phong_material_PhongMaterial,geojson_layer_defaultProps={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,lineDashJustified:!1,getLineColor:{type:"accessor",value:[0,0,0,255]},getFillColor:{type:"accessor",value:[0,0,0,255]},getRadius:{type:"accessor",value:1},getLineWidth:{type:"accessor",value:1},getLineDashArray:{type:"accessor",value:[0,0]},getElevation:{type:"accessor",value:1e3},material:geojson_layer_defaultMaterial};function getCoordinates(f){return f.geometry.coordinates}var geojson_layer_GeoJsonLayer=function(_CompositeLayer){function GeoJsonLayer(){return Object(classCallCheck.a)(this,GeoJsonLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(GeoJsonLayer).apply(this,arguments))}return Object(inherits.a)(GeoJsonLayer,_CompositeLayer),Object(createClass.a)(GeoJsonLayer,[{key:"initializeState",value:function initializeState(){this.state={features:{}}}},{key:"updateState",value:function updateState(_ref){var props=_ref.props,changeFlags=_ref.changeFlags;if(changeFlags.dataChanged){var features=function getGeojsonFeatures(geojson){if(Array.isArray(geojson))return geojson;switch(log.a.assert(geojson.type,"GeoJSON does not have type"),geojson.type){case"Feature":return[geojson];case"FeatureCollection":return log.a.assert(Array.isArray(geojson.features),"GeoJSON does not have features array"),geojson.features;default:return[{geometry:geojson}]}}(props.data),wrapFeature=this.getSubLayerRow.bind(this);if(Array.isArray(changeFlags.dataChanged)){var oldFeatures=this.state.features,newFeatures={},featuresDiff={};for(var key in oldFeatures)newFeatures[key]=oldFeatures[key].slice(),featuresDiff[key]=[];var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=changeFlags.dataChanged[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var dataRange=_step.value,partialFeatures=separateGeojsonFeatures(features,wrapFeature,dataRange);for(var _key in oldFeatures)featuresDiff[_key].push(replaceInRange({data:newFeatures[_key],getIndex:function getIndex(f){return f.__source.index},dataRange:dataRange,replace:partialFeatures[_key]}))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.setState({features:newFeatures,featuresDiff:featuresDiff})}else this.setState({features:separateGeojsonFeatures(features,wrapFeature),featuresDiff:{}})}}},{key:"renderLayers",value:function renderLayers(){var _this$state=this.state,features=_this$state.features,featuresDiff=_this$state.featuresDiff,pointFeatures=features.pointFeatures,lineFeatures=features.lineFeatures,polygonFeatures=features.polygonFeatures,polygonOutlineFeatures=features.polygonOutlineFeatures,_this$props=this.props,stroked=_this$props.stroked,filled=_this$props.filled,extruded=_this$props.extruded,wireframe=_this$props.wireframe,material=_this$props.material,transitions=_this$props.transitions,_this$props2=this.props,lineWidthUnits=_this$props2.lineWidthUnits,lineWidthScale=_this$props2.lineWidthScale,lineWidthMinPixels=_this$props2.lineWidthMinPixels,lineWidthMaxPixels=_this$props2.lineWidthMaxPixels,lineJointRounded=_this$props2.lineJointRounded,lineMiterLimit=_this$props2.lineMiterLimit,pointRadiusScale=_this$props2.pointRadiusScale,pointRadiusMinPixels=_this$props2.pointRadiusMinPixels,pointRadiusMaxPixels=_this$props2.pointRadiusMaxPixels,elevationScale=_this$props2.elevationScale,lineDashJustified=_this$props2.lineDashJustified,_this$props3=this.props,getLineColor=_this$props3.getLineColor,getFillColor=_this$props3.getFillColor,getRadius=_this$props3.getRadius,getLineWidth=_this$props3.getLineWidth,getLineDashArray=_this$props3.getLineDashArray,getElevation=_this$props3.getElevation,updateTriggers=_this$props3.updateTriggers,PolygonFillLayer=this.getSubLayerClass("polygons-fill",solid_polygon_layer_SolidPolygonLayer),PolygonStrokeLayer=this.getSubLayerClass("polygons-stroke",path_layer_PathLayer),LineStringsLayer=this.getSubLayerClass("line-strings",path_layer_PathLayer),PointsLayer=this.getSubLayerClass("points",scatterplot_layer_ScatterplotLayer),polygonFillLayer=this.shouldRenderSubLayer("polygons-fill",polygonFeatures)&&new PolygonFillLayer({_dataDiff:featuresDiff.polygonFeatures&&function(){return featuresDiff.polygonFeatures},extruded:extruded,elevationScale:elevationScale,filled:filled,wireframe:wireframe,material:material,getElevation:this.getSubLayerAccessor(getElevation),getFillColor:this.getSubLayerAccessor(getFillColor),getLineColor:this.getSubLayerAccessor(getLineColor),transitions:transitions&&{getPolygon:transitions.geometry,getElevation:transitions.getElevation,getFillColor:transitions.getFillColor,getLineColor:transitions.getLineColor}},this.getSubLayerProps({id:"polygons-fill",updateTriggers:{getElevation:updateTriggers.getElevation,getFillColor:updateTriggers.getFillColor,getLineColor:updateTriggers.getLineColor}}),{data:polygonFeatures,getPolygon:getCoordinates});return[!extruded&&polygonFillLayer,!extruded&&stroked&&this.shouldRenderSubLayer("polygons-stroke",polygonOutlineFeatures)&&new PolygonStrokeLayer({_dataDiff:featuresDiff.polygonOutlineFeatures&&function(){return featuresDiff.polygonOutlineFeatures},widthUnits:lineWidthUnits,widthScale:lineWidthScale,widthMinPixels:lineWidthMinPixels,widthMaxPixels:lineWidthMaxPixels,rounded:lineJointRounded,miterLimit:lineMiterLimit,dashJustified:lineDashJustified,getColor:this.getSubLayerAccessor(getLineColor),getWidth:this.getSubLayerAccessor(getLineWidth),getDashArray:this.getSubLayerAccessor(getLineDashArray),transitions:transitions&&{getPath:transitions.geometry,getColor:transitions.getLineColor,getWidth:transitions.getLineWidth}},this.getSubLayerProps({id:"polygons-stroke",updateTriggers:{getColor:updateTriggers.getLineColor,getWidth:updateTriggers.getLineWidth,getDashArray:updateTriggers.getLineDashArray}}),{data:polygonOutlineFeatures,getPath:getCoordinates}),this.shouldRenderSubLayer("linestrings",lineFeatures)&&new LineStringsLayer({_dataDiff:featuresDiff.lineFeatures&&function(){return featuresDiff.lineFeatures},widthUnits:lineWidthUnits,widthScale:lineWidthScale,widthMinPixels:lineWidthMinPixels,widthMaxPixels:lineWidthMaxPixels,rounded:lineJointRounded,miterLimit:lineMiterLimit,dashJustified:lineDashJustified,getColor:this.getSubLayerAccessor(getLineColor),getWidth:this.getSubLayerAccessor(getLineWidth),getDashArray:this.getSubLayerAccessor(getLineDashArray),transitions:transitions&&{getPath:transitions.geometry,getColor:transitions.getLineColor,getWidth:transitions.getLineWidth}},this.getSubLayerProps({id:"line-strings",updateTriggers:{getColor:updateTriggers.getLineColor,getWidth:updateTriggers.getLineWidth,getDashArray:updateTriggers.getLineDashArray}}),{data:lineFeatures,getPath:getCoordinates}),this.shouldRenderSubLayer("points",pointFeatures)&&new PointsLayer({_dataDiff:featuresDiff.pointFeatures&&function(){return featuresDiff.pointFeatures},stroked:stroked,filled:filled,radiusScale:pointRadiusScale,radiusMinPixels:pointRadiusMinPixels,radiusMaxPixels:pointRadiusMaxPixels,lineWidthUnits:lineWidthUnits,lineWidthScale:lineWidthScale,lineWidthMinPixels:lineWidthMinPixels,lineWidthMaxPixels:lineWidthMaxPixels,getFillColor:this.getSubLayerAccessor(getFillColor),getLineColor:this.getSubLayerAccessor(getLineColor),getRadius:this.getSubLayerAccessor(getRadius),getLineWidth:this.getSubLayerAccessor(getLineWidth),transitions:transitions&&{getPosition:transitions.geometry,getFillColor:transitions.getFillColor,getLineColor:transitions.getLineColor,getRadius:transitions.getRadius,getLineWidth:transitions.getLineWidth}},this.getSubLayerProps({id:"points",updateTriggers:{getFillColor:updateTriggers.getFillColor,getLineColor:updateTriggers.getLineColor,getRadius:updateTriggers.getRadius,getLineWidth:updateTriggers.getLineWidth}}),{data:pointFeatures,getPosition:getCoordinates}),extruded&&polygonFillLayer]}}]),GeoJsonLayer}(composite_layer.a);geojson_layer_GeoJsonLayer.layerName="GeoJsonLayer",geojson_layer_GeoJsonLayer.defaultProps=geojson_layer_defaultProps},function(module,__webpack_exports__,__webpack_require__){"use strict";var src=__webpack_require__(54),continuous=__webpack_require__(46),init=__webpack_require__(65);__webpack_require__(162),__webpack_require__(788),__webpack_require__(112);var pow=__webpack_require__(432);function transformer(){var t0,t1,k10,transform,unknown,x0=0,x1=1,interpolator=continuous.c,clamp=!1;function scale(x){return isNaN(x=+x)?unknown:interpolator(0===k10?.5:(x=(transform(x)-t0)*k10,clamp?Math.max(0,Math.min(1,x)):x))}function range(interpolate){return function(_){var r0,r1;return arguments.length?([r0,r1]=_,interpolator=interpolate(r0,r1),scale):[interpolator(0),interpolator(1)]}}return scale.domain=function(_){return arguments.length?([x0,x1]=_,t0=transform(x0=+x0),t1=transform(x1=+x1),k10=t0===t1?0:1/(t1-t0),scale):[x0,x1]},scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.range=range(src.a),scale.rangeRound=range(src.e),scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t){return transform=t,t0=t(x0),t1=t(x1),k10=t0===t1?0:1/(t1-t0),scale}}function copy(source,target){return target.domain(source.domain()).interpolator(source.interpolator()).clamp(source.clamp()).unknown(source.unknown())}function sequentialPow(){var scale=Object(pow.b)(transformer());return scale.copy=function(){return copy(scale,sequentialPow()).exponent(scale.exponent())},init.a.apply(scale,arguments)}__webpack_require__.d(__webpack_exports__,"a",(function(){return sequentialPow}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var identity=function(x){return x};function rollup(values,reduce,...keys){return nest(values,identity,reduce,keys)}function nest(values,map,reduce,keys){return function regroup(values,i){if(i>=keys.length)return reduce(values);const groups=new Map,keyof=keys[i++];let index=-1;for(const value of values){const key=keyof(value,++index,values),group=groups.get(key);group?group.push(value):groups.set(key,[value])}for(const[key,values]of groups)groups.set(key,regroup(values,i));return map(groups)}(values,0)}__webpack_require__.d(__webpack_exports__,"a",(function(){return rollup}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var ascending=__webpack_require__(252);__webpack_require__.d(__webpack_exports__,"a",(function(){return bisectLeft}));var compare,ascendingBisect=(1===(compare=ascending.a).length&&(compare=function ascendingComparator(f){return function(d,x){return Object(ascending.a)(f(d),x)}}(compare)),{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left;__webpack_exports__.b=bisectRight}]]);
//# sourceMappingURL=vendors~main.f853d0f71414f2ab944a.bundle.js.map